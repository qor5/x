// Code generated by github.com/gobuffalo/packr. DO NOT EDIT.

package tiptap

import "github.com/gobuffalo/packr"

// You can use the "packr clean" command to clean up this,
// and any other packr generated files.
func init() {
	_ = packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.css", "\"LnRpcHRhcC1lZGl0b3J7cG9zaXRpb246cmVsYXRpdmV9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnR7b3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZH0udGlwdGFwLWVkaXRvcl9fY29udGVudCAqe2NhcmV0LWNvbG9yOmN1cnJlbnRDb2xvcn0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3RlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgzLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHAsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVse21hcmdpbjoxcmVtIDB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMjpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBvbDpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBwOmZpcnN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bDpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgaDI6bGFzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcDpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVsOmxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgze2xpbmUtaGVpZ2h0OjEuM30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwcmV7cGFkZGluZzouN3JlbSAxcmVtO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6IzAwMDtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouOHJlbTtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlIGNvZGV7ZGlzcGxheTpibG9ja30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwIGNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIC40cmVtO2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouOHJlbTtmb250LXdlaWdodDo3MDA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBvbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bHtwYWRkaW5nLWxlZnQ6MXJlbX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5vbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5wLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGxpPnVse21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGF7Y29sb3I6aW5oZXJpdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3Rle2JvcmRlci1sZWZ0OjNweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KTtwYWRkaW5nLWxlZnQ6LjhyZW07Zm9udC1zdHlsZTppdGFsaWN9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZSBwe21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGltZ3ttYXgtd2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjNweH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7dGFibGUtbGF5b3V0OmZpeGVkO3dpZHRoOjEwMCU7bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVufS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRoe21pbi13aWR0aDoxZW07Ym9yZGVyOjJweCBzb2xpZCAjZGRkO3BhZGRpbmc6M3B4IDVweDt2ZXJ0aWNhbC1hbGlnbjp0b3A7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlfS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkPiosLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGg+KnttYXJnaW4tYm90dG9tOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGh7Zm9udC13ZWlnaHQ6NzAwO3RleHQtYWxpZ246bGVmdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuc2VsZWN0ZWRDZWxsOmFmdGVye3otaW5kZXg6Mjtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OiIiO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQ6cmdiYSgyMDAsMjAwLDI1NSwuNCk7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuY29sdW1uLXJlc2l6ZS1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6LTJweDt0b3A6MDtib3R0b206MDt3aWR0aDo0cHg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kLWNvbG9yOiNhZGY7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCAudGFibGVXcmFwcGVye21hcmdpbjoxZW0gMDtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgLnJlc2l6ZS1jdXJzb3J7Y3Vyc29yOmV3LXJlc2l6ZTtjdXJzb3I6Y29sLXJlc2l6ZX0ubWVudWJhcnttYXJnaW4tYm90dG9tOjFyZW07LXdlYmtpdC10cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzIC40cyxvcGFjaXR5IC4ycyAuNHM7dHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyAuNHMsb3BhY2l0eSAuMnMgLjRzfS5tZW51YmFyLmlzLWhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbjtvcGFjaXR5OjB9Lm1lbnViYXIuaXMtZm9jdXNlZHt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxOy13ZWJraXQtdHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyxvcGFjaXR5IC4yczt0cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzLG9wYWNpdHkgLjJzfS5tZW51YmFyX19idXR0b257Zm9udC13ZWlnaHQ6NzAwO2Rpc3BsYXk6LXdlYmtpdC1pbmxpbmUtYm94O2Rpc3BsYXk6LW1zLWlubGluZS1mbGV4Ym94O2Rpc3BsYXk6aW5saW5lLWZsZXg7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6MDtjb2xvcjojMDAwO3BhZGRpbmc6LjJyZW0gLjVyZW07bWFyZ2luLXJpZ2h0Oi4ycmVtO2JvcmRlci1yYWRpdXM6M3B4O2N1cnNvcjpwb2ludGVyfS5tZW51YmFyX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wNSl9Lm1lbnViYXJfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xKX0ubWVudWJhciBzcGFuLm1lbnViYXJfX2J1dHRvbntmb250LXNpemU6MTMuMzMzM3B4fS5tZW51YnViYmxle3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kOiMwMDA7Ym9yZGVyLXJhZGl1czo1cHg7cGFkZGluZzouM3JlbTttYXJnaW4tYm90dG9tOi41cmVtOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC4ycyx2aXNpYmlsaXR5IC4yczt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzLHZpc2liaWxpdHkgLjJzfS5tZW51YnViYmxlLmlzLWFjdGl2ZXtvcGFjaXR5OjE7dmlzaWJpbGl0eTp2aXNpYmxlfS5tZW51YnViYmxlX19idXR0b257ZGlzcGxheTotd2Via2l0LWlubGluZS1ib3g7ZGlzcGxheTotbXMtaW5saW5lLWZsZXhib3g7ZGlzcGxheTppbmxpbmUtZmxleDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjowO2NvbG9yOiNmZmY7cGFkZGluZzouMnJlbSAuNXJlbTttYXJnaW4tcmlnaHQ6LjJyZW07Ym9yZGVyLXJhZGl1czozcHg7Y3Vyc29yOnBvaW50ZXJ9Lm1lbnVidWJibGVfX2J1dHRvbjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfS5tZW51YnViYmxlX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMSl9Lm1lbnVidWJibGVfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMil9Lm1lbnVidWJibGVfX2Zvcm17ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn0ubWVudWJ1YmJsZV9faW5wdXR7Zm9udDppbmhlcml0O2JvcmRlcjpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6I2ZmZn0uaWNvbltkYXRhLXYtZTU5Zjc4MzJde3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aWR0aDouOHJlbTtoZWlnaHQ6LjhyZW07bWFyZ2luOjAgLjNyZW07dG9wOi4wNXJlbTtmaWxsOmN1cnJlbnRDb2xvcn0uaWNvbiBzdmdbZGF0YS12LWU1OWY3ODMyXXtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjp0b3A7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uaWNvbltkYXRhLXYtZTU5Zjc4MzJdOmZpcnN0LWNoaWxke21hcmdpbi1sZWZ0OjB9Lmljb25bZGF0YS12LWU1OWY3ODMyXTpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfQ==\"")
	_ = packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.umd.min.js", "\"KGZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZSgiVnVlIikpOiJmdW5jdGlvbiI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbIlZ1ZSJdLGUpOiJvYmplY3QiPT09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1sidGlwdGFwIl09ZShyZXF1aXJlKCJWdWUiKSk6dFsidGlwdGFwIl09ZSh0WyJWdWUiXSl9KSgidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcywoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBvPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUscil7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJiJvYmplY3QiPT09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkociwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmInN0cmluZyIhPXR5cGVvZiB0KWZvcih2YXIgbyBpbiB0KW4uZChyLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdFsiZGVmYXVsdCJdfTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gbi5kKGUsImEiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPSIiLG4obi5zPSJmYWUzIil9KHsiMDBlZSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImI2MjIiKSxvPXIoInRvU3RyaW5nVGFnIiksaT17fTtpW29dPSJ6Iix0LmV4cG9ydHM9IltvYmplY3Qgel0iPT09U3RyaW5nKGkpfSwiMDEwOSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigiY2lyY2xlIix7YXR0cnM6e2N4OiIyLjUiLGN5OiIzLjk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik04LjUgNUgyM2ExIDEgMCAwMDAtMkg4LjVhMSAxIDAgMDAwIDJ6In19KSxuKCJjaXJjbGUiLHthdHRyczp7Y3g6IjIuNSIsY3k6IjExLjk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMyAxMUg4LjVhMSAxIDAgMDAwIDJIMjNhMSAxIDAgMDAwLTJ6In19KSxuKCJjaXJjbGUiLHthdHRyczp7Y3g6IjIuNSIsY3k6IjE5Ljk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMyAxOUg4LjVhMSAxIDAgMDAwIDJIMjNhMSAxIDAgMDAwLTJ6In19KV0pKX19fSwiMDM2NiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjFjMGIiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2lmKHIodCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAwOnJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmNhbGwoZSl9O2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSwiMDU3ZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImZjNmEiKSxvPW4oIjI0MWMiKS5mLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBvKHQpfWNhdGNoKGUpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbCh0KT9hKHQpOm8ocih0KSl9fSwiMDZjZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgzYWIiKSxvPW4oImQxZTciKSxpPW4oIjVjNmMiKSxzPW4oImZjNmEiKSxhPW4oImMwNGUiKSxjPW4oIjUxMzUiKSxoPW4oIjBjZmIiKSxwPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7ZS5mPXI/cDpmdW5jdGlvbih0LGUpe2lmKHQ9cyh0KSxlPWEoZSwhMCksaCl0cnl7cmV0dXJuIHAodCxlKX1jYXRjaChuKXt9aWYoYyh0LGUpKXJldHVybiBpKCFvLmYuY2FsbCh0LGUpLHRbZV0pfX0sIjA3M2UiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiNWRiZSIpLG89aShFcnJvcik7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZS5kaXNwbGF5TmFtZT10LmRpc3BsYXlOYW1lfHx0Lm5hbWUsZTtmdW5jdGlvbiBlKGUpe3JldHVybiBlJiYoZT1yLmFwcGx5KG51bGwsYXJndW1lbnRzKSksbmV3IHQoZSl9fXQuZXhwb3J0cz1vLG8uZXZhbD1pKEV2YWxFcnJvciksby5yYW5nZT1pKFJhbmdlRXJyb3IpLG8ucmVmZXJlbmNlPWkoUmVmZXJlbmNlRXJyb3IpLG8uc3ludGF4PWkoU3ludGF4RXJyb3IpLG8udHlwZT1pKFR5cGVFcnJvciksby51cmk9aShVUklFcnJvciksby5jcmVhdGU9aX0sIjBhYzAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLG4uZChlLCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4geH0pKSxuLmQoZSwiYyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHd9KSksbi5kKGUsImQiLChmdW5jdGlvbigpe3JldHVybiBsfSkpLG4uZChlLCJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gQX0pKSxuLmQoZSwiZiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSksbi5kKGUsImciLChmdW5jdGlvbigpe3JldHVybiBJfSkpLG4uZChlLCJoIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKSxuLmQoZSwiaSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHp9KSksbi5kKGUsImoiLChmdW5jdGlvbigpe3JldHVybiBTfSkpO3ZhciByPW4oIjMwNGEiKSxvPTY1NTM1LGk9TWF0aC5wb3coMiwxNik7ZnVuY3Rpb24gcyh0LGUpe3JldHVybiB0K2UqaX1mdW5jdGlvbiBhKHQpe3JldHVybiB0Jm99ZnVuY3Rpb24gYyh0KXtyZXR1cm4odC0odCZvKSkvaX12YXIgaD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPW51bGwpLHRoaXMucG9zPXQsdGhpcy5kZWxldGVkPWUsdGhpcy5yZWNvdmVyPW59LHA9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy5yYW5nZXM9dCx0aGlzLmludmVydGVkPWV9O3AucHJvdG90eXBlLnJlY292ZXI9ZnVuY3Rpb24odCl7dmFyIGU9MCxuPWEodCk7aWYoIXRoaXMuaW52ZXJ0ZWQpZm9yKHZhciByPTA7cjxuO3IrKyllKz10aGlzLnJhbmdlc1szKnIrMl0tdGhpcy5yYW5nZXNbMypyKzFdO3JldHVybiB0aGlzLnJhbmdlc1szKm5dK2UrYyh0KX0scC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxwLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMCl9LHAucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wLG89dGhpcy5pbnZlcnRlZD8yOjEsaT10aGlzLmludmVydGVkPzE6MixhPTA7YTx0aGlzLnJhbmdlcy5sZW5ndGg7YSs9Myl7dmFyIGM9dGhpcy5yYW5nZXNbYV0tKHRoaXMuaW52ZXJ0ZWQ/cjowKTtpZihjPnQpYnJlYWs7dmFyIHA9dGhpcy5yYW5nZXNbYStvXSx1PXRoaXMucmFuZ2VzW2EraV0sZj1jK3A7aWYodDw9Zil7dmFyIGw9cD90PT1jPy0xOnQ9PWY/MTplOmUsZD1jK3IrKGw8MD8wOnUpO2lmKG4pcmV0dXJuIGQ7dmFyIHY9cyhhLzMsdC1jKTtyZXR1cm4gbmV3IGgoZCxlPDA/dCE9Yzp0IT1mLHYpfXIrPXUtcH1yZXR1cm4gbj90K3I6bmV3IGgodCtyKX0scC5wcm90b3R5cGUudG91Y2hlcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9YShlKSxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIscz0wO3M8dGhpcy5yYW5nZXMubGVuZ3RoO3MrPTMpe3ZhciBjPXRoaXMucmFuZ2VzW3NdLSh0aGlzLmludmVydGVkP246MCk7aWYoYz50KWJyZWFrO3ZhciBoPXRoaXMucmFuZ2VzW3Mrb10scD1jK2g7aWYodDw9cCYmcz09MypyKXJldHVybiEwO24rPXRoaXMucmFuZ2VzW3MraV0taH1yZXR1cm4hMX0scC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pbnZlcnRlZD8yOjEsbj10aGlzLmludmVydGVkPzE6MixyPTAsbz0wO3I8dGhpcy5yYW5nZXMubGVuZ3RoO3IrPTMpe3ZhciBpPXRoaXMucmFuZ2VzW3JdLHM9aS0odGhpcy5pbnZlcnRlZD9vOjApLGE9aSsodGhpcy5pbnZlcnRlZD8wOm8pLGM9dGhpcy5yYW5nZXNbcitlXSxoPXRoaXMucmFuZ2VzW3Irbl07dChzLHMrYyxhLGEraCksbys9aC1jfX0scC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKHRoaXMucmFuZ2VzLCF0aGlzLmludmVydGVkKX0scC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pbnZlcnRlZD8iLSI6IiIpK0pTT04uc3RyaW5naWZ5KHRoaXMucmFuZ2VzKX0scC5vZmZzZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQ/cC5lbXB0eTpuZXcgcCh0PDA/WzAsLXQsMF06WzAsMCx0XSl9LHAuZW1wdHk9bmV3IHAoW10pO3ZhciB1PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubWFwcz10fHxbXSx0aGlzLmZyb209bnx8MCx0aGlzLnRvPW51bGw9PXI/dGhpcy5tYXBzLmxlbmd0aDpyLHRoaXMubWlycm9yPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfXUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubWFwcy5sZW5ndGgpLG5ldyB1KHRoaXMubWFwcyx0aGlzLm1pcnJvcix0LGUpfSx1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMubWFwcy5zbGljZSgpLHRoaXMubWlycm9yJiZ0aGlzLm1pcnJvci5zbGljZSgpLHRoaXMuZnJvbSx0aGlzLnRvKX0sdS5wcm90b3R5cGUuYXBwZW5kTWFwPWZ1bmN0aW9uKHQsZSl7dGhpcy50bz10aGlzLm1hcHMucHVzaCh0KSxudWxsIT1lJiZ0aGlzLnNldE1pcnJvcih0aGlzLm1hcHMubGVuZ3RoLTEsZSl9LHUucHJvdG90eXBlLmFwcGVuZE1hcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLm1hcHMubGVuZ3RoO2U8dC5tYXBzLmxlbmd0aDtlKyspe3ZhciByPXQuZ2V0TWlycm9yKGUpO3RoaXMuYXBwZW5kTWFwKHQubWFwc1tlXSxudWxsIT1yJiZyPGU/bityOm51bGwpfX0sdS5wcm90b3R5cGUuZ2V0TWlycm9yPWZ1bmN0aW9uKHQpe2lmKHRoaXMubWlycm9yKWZvcih2YXIgZT0wO2U8dGhpcy5taXJyb3IubGVuZ3RoO2UrKylpZih0aGlzLm1pcnJvcltlXT09dClyZXR1cm4gdGhpcy5taXJyb3JbZSsoZSUyPy0xOjEpXX0sdS5wcm90b3R5cGUuc2V0TWlycm9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5taXJyb3J8fCh0aGlzLm1pcnJvcj1bXSksdGhpcy5taXJyb3IucHVzaCh0LGUpfSx1LnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubWFwcy5sZW5ndGgtMSxuPXRoaXMubWFwcy5sZW5ndGgrdC5tYXBzLmxlbmd0aDtlPj0wO2UtLSl7dmFyIHI9dC5nZXRNaXJyb3IoZSk7dGhpcy5hcHBlbmRNYXAodC5tYXBzW2VdLmludmVydCgpLG51bGwhPXImJnI+ZT9uLXItMTpudWxsKX19LHUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3ZhciB0PW5ldyB1O3JldHVybiB0LmFwcGVuZE1hcHBpbmdJbnZlcnRlZCh0aGlzKSx0fSx1LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLm1pcnJvcilyZXR1cm4gdGhpcy5fbWFwKHQsZSwhMCk7Zm9yKHZhciBuPXRoaXMuZnJvbTtuPHRoaXMudG87bisrKXQ9dGhpcy5tYXBzW25dLm1hcCh0LGUpO3JldHVybiB0fSx1LnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LHUucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0hMSxvPW51bGwsaT10aGlzLmZyb207aTx0aGlzLnRvO2krKyl7dmFyIHM9dGhpcy5tYXBzW2ldLGE9byYmb1tpXTtpZihudWxsIT1hJiZzLnRvdWNoZXModCxhKSl0PXMucmVjb3ZlcihhKTtlbHNle3ZhciBjPXMubWFwUmVzdWx0KHQsZSk7aWYobnVsbCE9Yy5yZWNvdmVyKXt2YXIgcD10aGlzLmdldE1pcnJvcihpKTtpZihudWxsIT1wJiZwPmkmJnA8dGhpcy50byl7aWYoYy5kZWxldGVkKXtpPXAsdD10aGlzLm1hcHNbcF0ucmVjb3ZlcihjLnJlY292ZXIpO2NvbnRpbnVlfShvfHwobz1PYmplY3QuY3JlYXRlKG51bGwpKSlbcF09Yy5yZWNvdmVyfX1jLmRlbGV0ZWQmJihyPSEwKSx0PWMucG9zfX1yZXR1cm4gbj90Om5ldyBoKHQscil9LGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlRyYW5zZm9ybUVycm9yIjt2YXIgbD1mdW5jdGlvbih0KXt0aGlzLmRvYz10LHRoaXMuc3RlcHM9W10sdGhpcy5kb2NzPVtdLHRoaXMubWFwcGluZz1uZXcgdX0sZD17YmVmb3JlOntjb25maWd1cmFibGU6ITB9LGRvY0NoYW5nZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHYoKXt0aHJvdyBuZXcgRXJyb3IoIk92ZXJyaWRlIG1lIil9ZC5iZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jcy5sZW5ndGg/dGhpcy5kb2NzWzBdOnRoaXMuZG9jfSxsLnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWF5YmVTdGVwKHQpO2lmKGUuZmFpbGVkKXRocm93IG5ldyBmKGUuZmFpbGVkKTtyZXR1cm4gdGhpc30sbC5wcm90b3R5cGUubWF5YmVTdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXQuYXBwbHkodGhpcy5kb2MpO3JldHVybiBlLmZhaWxlZHx8dGhpcy5hZGRTdGVwKHQsZS5kb2MpLGV9LGQuZG9jQ2hhbmdlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwcy5sZW5ndGg+MH0sbC5wcm90b3R5cGUuYWRkU3RlcD1mdW5jdGlvbih0LGUpe3RoaXMuZG9jcy5wdXNoKHRoaXMuZG9jKSx0aGlzLnN0ZXBzLnB1c2godCksdGhpcy5tYXBwaW5nLmFwcGVuZE1hcCh0LmdldE1hcCgpKSx0aGlzLmRvYz1lfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsLnByb3RvdHlwZSxkKTt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpLHk9ZnVuY3Rpb24oKXt9O3kucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBwLmVtcHR5fSx5LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHYoKX0seS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSx5LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdigpfSx5LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnN0ZXBUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTdGVwLmZyb21KU09OIik7dmFyIG49bVtlLnN0ZXBUeXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gc3RlcCB0eXBlICIrZS5zdGVwVHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSx5Lmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gbSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgIit0KTtyZXR1cm4gbVt0XT1lLGUucHJvdG90eXBlLmpzb25JRD10LGV9O3ZhciBnPWZ1bmN0aW9uKHQsZSl7dGhpcy5kb2M9dCx0aGlzLmZhaWxlZD1lfTtnLm9rPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZyh0LG51bGwpfSxnLmZhaWw9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBnKG51bGwsdCl9LGcuZnJvbVJlcGxhY2U9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBnLm9rKHQucmVwbGFjZShlLG4sbykpfWNhdGNoKGkpe2lmKGkgaW5zdGFuY2VvZiByWyJoIl0pcmV0dXJuIGcuZmFpbChpLm1lc3NhZ2UpO3Rocm93IGl9fTt2YXIgdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5zbGljZT1yLHRoaXMuc3RydWN0dXJlPSEhb31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlJiZiKHQsdGhpcy5mcm9tLHRoaXMudG8pP2cuZmFpbCgiU3RydWN0dXJlIHJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTpnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcChbdGhpcy5mcm9tLHRoaXMudG8tdGhpcy5mcm9tLHRoaXMuc2xpY2Uuc2l6ZV0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZD9udWxsOm5ldyBlKG4ucG9zLE1hdGgubWF4KG4ucG9zLHIucG9zKSx0aGlzLnNsaWNlKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgZSl8fHQuc3RydWN0dXJlIT10aGlzLnN0cnVjdHVyZSlyZXR1cm4gbnVsbDtpZih0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplIT10LmZyb218fHRoaXMuc2xpY2Uub3BlbkVuZHx8dC5zbGljZS5vcGVuU3RhcnQpe2lmKHQudG8hPXRoaXMuZnJvbXx8dGhpcy5zbGljZS5vcGVuU3RhcnR8fHQuc2xpY2Uub3BlbkVuZClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnNsaWNlLnNpemUrdC5zbGljZS5zaXplPT0wP3JbImkiXS5lbXB0eTpuZXcgclsiaSJdKHQuc2xpY2UuY29udGVudC5hcHBlbmQodGhpcy5zbGljZS5jb250ZW50KSx0LnNsaWNlLm9wZW5TdGFydCx0aGlzLnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0LmZyb20sdGhpcy50byxuLHRoaXMuc3RydWN0dXJlKX12YXIgbz10aGlzLnNsaWNlLnNpemUrdC5zbGljZS5zaXplPT0wP3JbImkiXS5lbXB0eTpuZXcgclsiaSJdKHRoaXMuc2xpY2UuY29udGVudC5hcHBlbmQodC5zbGljZS5jb250ZW50KSx0aGlzLnNsaWNlLm9wZW5TdGFydCx0LnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy50bysodC50by10LmZyb20pLG8sdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2UiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxyWyJpIl0uZnJvbUpTT04odCxuLnNsaWNlKSwhIW4uc3RydWN0dXJlKX0sZX0oeSk7eS5qc29uSUQoInJlcGxhY2UiLHcpO3ZhciB4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSl7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLmdhcEZyb209cix0aGlzLmdhcFRvPW8sdGhpcy5zbGljZT1pLHRoaXMuaW5zZXJ0PXMsdGhpcy5zdHJ1Y3R1cmU9ISFhfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtpZih0aGlzLnN0cnVjdHVyZSYmKGIodCx0aGlzLmZyb20sdGhpcy5nYXBGcm9tKXx8Yih0LHRoaXMuZ2FwVG8sdGhpcy50bykpKXJldHVybiBnLmZhaWwoIlN0cnVjdHVyZSBnYXAtcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpO3ZhciBlPXQuc2xpY2UodGhpcy5nYXBGcm9tLHRoaXMuZ2FwVG8pO2lmKGUub3BlblN0YXJ0fHxlLm9wZW5FbmQpcmV0dXJuIGcuZmFpbCgiR2FwIGlzIG5vdCBhIGZsYXQgcmFuZ2UiKTt2YXIgbj10aGlzLnNsaWNlLmluc2VydEF0KHRoaXMuaW5zZXJ0LGUuY29udGVudCk7cmV0dXJuIG4/Zy5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLG4pOmcuZmFpbCgiQ29udGVudCBkb2VzIG5vdCBmaXQgaW4gZ2FwIil9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcChbdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5pbnNlcnQsdGhpcy5nYXBUbyx0aGlzLnRvLXRoaXMuZ2FwVG8sdGhpcy5zbGljZS5zaXplLXRoaXMuaW5zZXJ0XSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLmdhcFRvLXRoaXMuZ2FwRnJvbTtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUrbix0aGlzLmZyb20rdGhpcy5pbnNlcnQsdGhpcy5mcm9tK3RoaXMuaW5zZXJ0K24sdC5zbGljZSh0aGlzLmZyb20sdGhpcy50bykucmVtb3ZlQmV0d2Vlbih0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuZ2FwVG8tdGhpcy5mcm9tKSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpLG89dC5tYXAodGhpcy5nYXBGcm9tLC0xKSxpPXQubWFwKHRoaXMuZ2FwVG8sMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxvPG4ucG9zfHxpPnIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsbyxpLHRoaXMuc2xpY2UsdGhpcy5pbnNlcnQsdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2VBcm91bmQiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG8sZ2FwRnJvbTp0aGlzLmdhcEZyb20sZ2FwVG86dGhpcy5nYXBUbyxpbnNlcnQ6dGhpcy5pbnNlcnR9O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvfHwibnVtYmVyIiE9dHlwZW9mIG4uZ2FwRnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLmdhcFRvfHwibnVtYmVyIiE9dHlwZW9mIG4uaW5zZXJ0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlQXJvdW5kU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxuLmdhcEZyb20sbi5nYXBUbyxyWyJpIl0uZnJvbUpTT04odCxuLnNsaWNlKSxuLmluc2VydCwhIW4uc3RydWN0dXJlKX0sZX0oeSk7ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpLG89bi1lLGk9ci5kZXB0aDt3aGlsZShvPjAmJmk+MCYmci5pbmRleEFmdGVyKGkpPT1yLm5vZGUoaSkuY2hpbGRDb3VudClpLS0sby0tO2lmKG8+MCl7dmFyIHM9ci5ub2RlKGkpLm1heWJlQ2hpbGQoci5pbmRleEFmdGVyKGkpKTt3aGlsZShvPjApe2lmKCFzfHxzLmlzTGVhZilyZXR1cm4hMDtzPXMuZmlyc3RDaGlsZCxvLS19fXJldHVybiExfWZ1bmN0aW9uIGsodCxlLG4pe3JldHVybigwPT1lfHx0LmNhblJlcGxhY2UoZSx0LmNoaWxkQ291bnQpKSYmKG49PXQuY2hpbGRDb3VudHx8dC5jYW5SZXBsYWNlKDAsbikpfWZ1bmN0aW9uIFModCl7Zm9yKHZhciBlPXQucGFyZW50LG49ZS5jb250ZW50LmN1dEJ5SW5kZXgodC5zdGFydEluZGV4LHQuZW5kSW5kZXgpLHI9dC5kZXB0aDs7LS1yKXt2YXIgbz10LiRmcm9tLm5vZGUociksaT10LiRmcm9tLmluZGV4KHIpLHM9dC4kdG8uaW5kZXhBZnRlcihyKTtpZihyPHQuZGVwdGgmJm8uY2FuUmVwbGFjZShpLHMsbikpcmV0dXJuIHI7aWYoMD09cnx8by50eXBlLnNwZWMuaXNvbGF0aW5nfHwhayhvLGkscykpYnJlYWt9fWZ1bmN0aW9uIE8odCxlLG4scil7dm9pZCAwPT09ciYmKHI9dCk7dmFyIG89TSh0LGUpLGk9byYmVChyLGUpO3JldHVybiBpP28ubWFwKEMpLmNvbmNhdCh7dHlwZTplLGF0dHJzOm59KS5jb25jYXQoaS5tYXAoQykpOm51bGx9ZnVuY3Rpb24gQyh0KXtyZXR1cm57dHlwZTp0LGF0dHJzOm51bGx9fWZ1bmN0aW9uIE0odCxlKXt2YXIgbj10LnBhcmVudCxyPXQuc3RhcnRJbmRleCxvPXQuZW5kSW5kZXgsaT1uLmNvbnRlbnRNYXRjaEF0KHIpLmZpbmRXcmFwcGluZyhlKTtpZighaSlyZXR1cm4gbnVsbDt2YXIgcz1pLmxlbmd0aD9pWzBdOmU7cmV0dXJuIG4uY2FuUmVwbGFjZVdpdGgocixvLHMpP2k6bnVsbH1mdW5jdGlvbiBUKHQsZSl7dmFyIG49dC5wYXJlbnQscj10LnN0YXJ0SW5kZXgsbz10LmVuZEluZGV4LGk9bi5jaGlsZChyKSxzPWUuY29udGVudE1hdGNoLmZpbmRXcmFwcGluZyhpLnR5cGUpO2lmKCFzKXJldHVybiBudWxsO2Zvcih2YXIgYT1zLmxlbmd0aD9zW3MubGVuZ3RoLTFdOmUsYz1hLmNvbnRlbnRNYXRjaCxoPXI7YyYmaDxvO2grKyljPWMubWF0Y2hUeXBlKG4uY2hpbGQoaCkudHlwZSk7cmV0dXJuIGMmJmMudmFsaWRFbmQ/czpudWxsfWZ1bmN0aW9uIE4odCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPXIuaW5kZXgoKTtyZXR1cm4gci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobyxvKzEsbil9ZnVuY3Rpb24gRSh0LGUsbixyKXt2b2lkIDA9PT1uJiYobj0xKTt2YXIgbz10LnJlc29sdmUoZSksaT1vLmRlcHRoLW4scz1yJiZyW3IubGVuZ3RoLTFdfHxvLnBhcmVudDtpZihpPDB8fG8ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmd8fCFvLnBhcmVudC5jYW5SZXBsYWNlKG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KXx8IXMudHlwZS52YWxpZENvbnRlbnQoby5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KSkpcmV0dXJuITE7Zm9yKHZhciBhPW8uZGVwdGgtMSxjPW4tMjthPmk7YS0tLGMtLSl7dmFyIGg9by5ub2RlKGEpLHA9by5pbmRleChhKTtpZihoLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7dmFyIHU9aC5jb250ZW50LmN1dEJ5SW5kZXgocCxoLmNoaWxkQ291bnQpLGY9ciYmcltjXXx8aDtpZihmIT1oJiYodT11LnJlcGxhY2VDaGlsZCgwLGYudHlwZS5jcmVhdGUoZi5hdHRycykpKSwhaC5jYW5SZXBsYWNlKHArMSxoLmNoaWxkQ291bnQpfHwhZi50eXBlLnZhbGlkQ29udGVudCh1KSlyZXR1cm4hMX12YXIgbD1vLmluZGV4QWZ0ZXIoaSksZD1yJiZyWzBdO3JldHVybiBvLm5vZGUoaSkuY2FuUmVwbGFjZVdpdGgobCxsLGQ/ZC50eXBlOm8ubm9kZShpKzEpLnR5cGUpfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10LnJlc29sdmUoZSkscj1uLmluZGV4KCk7cmV0dXJuIFIobi5ub2RlQmVmb3JlLG4ubm9kZUFmdGVyKSYmbi5wYXJlbnQuY2FuUmVwbGFjZShyLHIrMSl9ZnVuY3Rpb24gUih0LGUpe3JldHVybiB0JiZlJiYhdC5pc0xlYWYmJnQuY2FuQXBwZW5kKGUpfWZ1bmN0aW9uIHoodCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTtmb3IodmFyIHI9dC5yZXNvbHZlKGUpLG89ci5kZXB0aDs7by0tKXt2YXIgaT12b2lkIDAscz12b2lkIDA7aWYobz09ci5kZXB0aD8oaT1yLm5vZGVCZWZvcmUscz1yLm5vZGVBZnRlcik6bj4wPyhpPXIubm9kZShvKzEpLHM9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKSsxKSk6KGk9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKS0xKSxzPXIubm9kZShvKzEpKSxpJiYhaS5pc1RleHRibG9jayYmUihpLHMpKXJldHVybiBlO2lmKDA9PW8pYnJlYWs7ZT1uPDA/ci5iZWZvcmUobyk6ci5hZnRlcihvKX19ZnVuY3Rpb24gRCh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKHIucGFyZW50LmNhblJlcGxhY2VXaXRoKHIuaW5kZXgoKSxyLmluZGV4KCksbikpcmV0dXJuIGU7aWYoMD09ci5wYXJlbnRPZmZzZXQpZm9yKHZhciBvPXIuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ci5pbmRleChvKTtpZihyLm5vZGUobykuY2FuUmVwbGFjZVdpdGgoaSxpLG4pKXJldHVybiByLmJlZm9yZShvKzEpO2lmKGk+MClyZXR1cm4gbnVsbH1pZihyLnBhcmVudE9mZnNldD09ci5wYXJlbnQuY29udGVudC5zaXplKWZvcih2YXIgcz1yLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPXIuaW5kZXhBZnRlcihzKTtpZihyLm5vZGUocykuY2FuUmVwbGFjZVdpdGgoYSxhLG4pKXJldHVybiByLmFmdGVyKHMrMSk7aWYoYTxyLm5vZGUocykuY2hpbGRDb3VudClyZXR1cm4gbnVsbH19ZnVuY3Rpb24gSSh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKCFuLmNvbnRlbnQuc2l6ZSlyZXR1cm4gZTtmb3IodmFyIG89bi5jb250ZW50LGk9MDtpPG4ub3BlblN0YXJ0O2krKylvPW8uZmlyc3RDaGlsZC5jb250ZW50O2Zvcih2YXIgcz0xO3M8PSgwPT1uLm9wZW5TdGFydCYmbi5zaXplPzI6MSk7cysrKWZvcih2YXIgYT1yLmRlcHRoO2E+PTA7YS0tKXt2YXIgYz1hPT1yLmRlcHRoPzA6ci5wb3M8PShyLnN0YXJ0KGErMSkrci5lbmQoYSsxKSkvMj8tMToxLGg9ci5pbmRleChhKSsoYz4wPzE6MCk7aWYoMT09cz9yLm5vZGUoYSkuY2FuUmVwbGFjZShoLGgsbyk6ci5ub2RlKGEpLmNvbnRlbnRNYXRjaEF0KGgpLmZpbmRXcmFwcGluZyhvLmZpcnN0Q2hpbGQudHlwZSkpcmV0dXJuIDA9PWM/ci5wb3M6YzwwP3IuYmVmb3JlKGErMSk6ci5hZnRlcihhKzEpfXJldHVybiBudWxsfWZ1bmN0aW9uIFAodCxlLG4pe2Zvcih2YXIgbz1bXSxpPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgcz10LmNoaWxkKGkpO3MuY29udGVudC5zaXplJiYocz1zLmNvcHkoUChzLmNvbnRlbnQsZSxzKSkpLHMuaXNJbmxpbmUmJihzPWUocyxuLGkpKSxvLnB1c2gocyl9cmV0dXJuIHJbImMiXS5mcm9tQXJyYXkobyl9eS5qc29uSUQoInJlcGxhY2VBcm91bmQiLHgpLGwucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC4kZnJvbSxvPXQuJHRvLGk9dC5kZXB0aCxzPW4uYmVmb3JlKGkrMSksYT1vLmFmdGVyKGkrMSksYz1zLGg9YSxwPXJbImMiXS5lbXB0eSx1PTAsZj1pLGw9ITE7Zj5lO2YtLSlsfHxuLmluZGV4KGYpPjA/KGw9ITAscD1yWyJjIl0uZnJvbShuLm5vZGUoZikuY29weShwKSksdSsrKTpjLS07Zm9yKHZhciBkPXJbImMiXS5lbXB0eSx2PTAsbT1pLHk9ITE7bT5lO20tLSl5fHxvLmFmdGVyKG0rMSk8by5lbmQobSk/KHk9ITAsZD1yWyJjIl0uZnJvbShvLm5vZGUobSkuY29weShkKSksdisrKTpoKys7cmV0dXJuIHRoaXMuc3RlcChuZXcgeChjLGgscyxhLG5ldyByWyJpIl0ocC5hcHBlbmQoZCksdSx2KSxwLnNpemUtdSwhMCkpfSxsLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXJbImMiXS5lbXB0eSxvPWUubGVuZ3RoLTE7bz49MDtvLS0pbj1yWyJjIl0uZnJvbShlW29dLnR5cGUuY3JlYXRlKGVbb10uYXR0cnMsbikpO3ZhciBpPXQuc3RhcnQscz10LmVuZDtyZXR1cm4gdGhpcy5zdGVwKG5ldyB4KGkscyxpLHMsbmV3IHJbImkiXShuLDAsMCksZS5sZW5ndGgsITApKX0sbC5wcm90b3R5cGUuc2V0QmxvY2tUeXBlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9dCksIW4uaXNUZXh0YmxvY2spdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9jayIpO3ZhciBzPXRoaXMuc3RlcHMubGVuZ3RoO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0LGUpe2lmKHQuaXNUZXh0YmxvY2smJiF0Lmhhc01hcmt1cChuLG8pJiZOKGkuZG9jLGkubWFwcGluZy5zbGljZShzKS5tYXAoZSksbikpe2kuY2xlYXJJbmNvbXBhdGlibGUoaS5tYXBwaW5nLnNsaWNlKHMpLm1hcChlLDEpLG4pO3ZhciBhPWkubWFwcGluZy5zbGljZShzKSxjPWEubWFwKGUsMSksaD1hLm1hcChlK3Qubm9kZVNpemUsMSk7cmV0dXJuIGkuc3RlcChuZXcgeChjLGgsYysxLGgtMSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4uY3JlYXRlKG8sbnVsbCx0Lm1hcmtzKSksMCwwKSwxLCEwKSksITF9fSkpLHRoaXN9LGwucHJvdG90eXBlLnNldE5vZGVNYXJrdXA9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGk9dGhpcy5kb2Mubm9kZUF0KHQpO2lmKCFpKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBub2RlIGF0IGdpdmVuIHBvc2l0aW9uIik7ZXx8KGU9aS50eXBlKTt2YXIgcz1lLmNyZWF0ZShuLG51bGwsb3x8aS5tYXJrcyk7aWYoaS5pc0xlYWYpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0K2kubm9kZVNpemUscyk7aWYoIWUudmFsaWRDb250ZW50KGkuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSB0eXBlICIrZS5uYW1lKTtyZXR1cm4gdGhpcy5zdGVwKG5ldyB4KHQsdCtpLm5vZGVTaXplLHQrMSx0K2kubm9kZVNpemUtMSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKHMpLDAsMCksMSwhMCkpfSxsLnByb3RvdHlwZS5zcGxpdD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MSk7Zm9yKHZhciBvPXRoaXMuZG9jLnJlc29sdmUodCksaT1yWyJjIl0uZW1wdHkscz1yWyJjIl0uZW1wdHksYT1vLmRlcHRoLGM9by5kZXB0aC1lLGg9ZS0xO2E+YzthLS0saC0tKXtpPXJbImMiXS5mcm9tKG8ubm9kZShhKS5jb3B5KGkpKTt2YXIgcD1uJiZuW2hdO3M9clsiYyJdLmZyb20ocD9wLnR5cGUuY3JlYXRlKHAuYXR0cnMscyk6by5ub2RlKGEpLmNvcHkocykpfXJldHVybiB0aGlzLnN0ZXAobmV3IHcodCx0LG5ldyByWyJpIl0oaS5hcHBlbmQocyksZSxlKSwhMCkpfSxsLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIG49bmV3IHcodC1lLHQrZSxyWyJpIl0uZW1wdHksITApO3JldHVybiB0aGlzLnN0ZXAobil9O3ZhciBCPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxvPXQucmVzb2x2ZSh0aGlzLmZyb20pLGk9by5ub2RlKG8uc2hhcmVkRGVwdGgodGhpcy50bykpLHM9bmV3IHJbImkiXShQKG4uY29udGVudCwoZnVuY3Rpb24odCxuKXtyZXR1cm4gbi50eXBlLmFsbG93c01hcmtUeXBlKGUubWFyay50eXBlKT90Lm1hcmsoZS5tYXJrLmFkZFRvU2V0KHQubWFya3MpKTp0fSksaSksbi5vcGVuU3RhcnQsbi5vcGVuRW5kKTtyZXR1cm4gZy5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLHMpfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEYodGhpcy5mcm9tLHRoaXMudG8sdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bi5wb3M+PXIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGUmJnQubWFyay5lcSh0aGlzLm1hcmspJiZ0aGlzLmZyb208PXQudG8mJnRoaXMudG8+PXQuZnJvbSlyZXR1cm4gbmV3IGUoTWF0aC5taW4odGhpcy5mcm9tLHQuZnJvbSksTWF0aC5tYXgodGhpcy50byx0LnRvKSx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcFR5cGU6ImFkZE1hcmsiLG1hcms6dGhpcy5tYXJrLnRvSlNPTigpLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgQWRkTWFya1N0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sdC5tYXJrRnJvbUpTT04obi5tYXJrKSl9LGV9KHkpO3kuanNvbklEKCJhZGRNYXJrIixCKTt2YXIgRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMubWFyaz1yfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zbGljZSh0aGlzLmZyb20sdGhpcy50byksbz1uZXcgclsiaSJdKFAobi5jb250ZW50LChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKGUubWFyay5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX0pKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgQih0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToicmVtb3ZlTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZW1vdmVNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oeSk7ZnVuY3Rpb24gaih0LGUsbixvKXtpZih2b2lkIDA9PT1uJiYobj1lKSx2b2lkIDA9PT1vJiYobz1yWyJpIl0uZW1wdHkpLGU9PW4mJiFvLnNpemUpcmV0dXJuIG51bGw7dmFyIGk9dC5yZXNvbHZlKGUpLHM9dC5yZXNvbHZlKG4pO2lmKEgoaSxzLG8pKXJldHVybiBuZXcgdyhlLG4sbyk7dmFyIGE9RyhpLG8pLGM9JChpLGEpLGg9VyhpLHMsYyk7aWYoIWgpcmV0dXJuIG51bGw7aWYoYy5zaXplIT1oLnNpemUmJksoaSxzLGMpKXt2YXIgcD1zLmRlcHRoLHU9cy5hZnRlcihwKTt3aGlsZShwPjEmJnU9PXMuZW5kKC0tcCkpKyt1O3ZhciBmPVcoaSx0LnJlc29sdmUodSksYyk7aWYoZilyZXR1cm4gbmV3IHgoZSx1LG4scy5lbmQoKSxmLGMuc2l6ZSl9cmV0dXJuIGguc2l6ZXx8ZSE9bj9uZXcgdyhlLG4saCk6bnVsbH1mdW5jdGlvbiBfKHQsZSxuLG8pe3ZhciBpPXJbImMiXS5lbXB0eSxzPTAsYT1uW2VdO2lmKHQuZGVwdGg+ZSl7dmFyIGM9Xyh0LGUrMSxuLG98fGEpO3M9Yy5vcGVuRW5kKzEsaT1yWyJjIl0uZnJvbSh0Lm5vZGUoZSsxKS5jb3B5KGMuY29udGVudCkpfXJldHVybiBhJiYoaT1pLmFwcGVuZChhLmNvbnRlbnQpLHM9YS5vcGVuRW5kKSxvJiYoaT1pLmFwcGVuZCh0Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5maWxsQmVmb3JlKHJbImMiXS5lbXB0eSwhMCkpLHM9MCkse2NvbnRlbnQ6aSxvcGVuRW5kOnN9fWZ1bmN0aW9uICQodCxlKXt2YXIgbj1fKHQsMCxlLCExKSxvPW4uY29udGVudCxpPW4ub3BlbkVuZDtyZXR1cm4gbmV3IHJbImkiXShvLHQuZGVwdGgsaXx8MCl9ZnVuY3Rpb24gSih0LGUsbixyLG8saSxzKXt2YXIgYSxjPXQuY2hpbGRDb3VudCxoPWMtKHM+MD8xOjApLHA9aTwwP2U6bi5ub2RlKG8pO2E9aTwwP3AuY29udGVudE1hdGNoQXQoaCk6MT09YyYmcz4wP3AuY29udGVudE1hdGNoQXQoaT9uLmluZGV4KG8pOm4uaW5kZXhBZnRlcihvKSk6cC5jb250ZW50TWF0Y2hBdChuLmluZGV4QWZ0ZXIobykpLm1hdGNoRnJhZ21lbnQodCxjPjAmJmk/MTowLGgpO3ZhciB1PXIubm9kZShvKTtpZihzPjAmJm88ci5kZXB0aCl7dmFyIGY9dS5jb250ZW50LmN1dEJ5SW5kZXgoci5pbmRleEFmdGVyKG8pKS5hZGRUb1N0YXJ0KHQubGFzdENoaWxkKSxsPWEuZmlsbEJlZm9yZShmLCEwKTtpZihsJiZsLnNpemUmJmk+MCYmMT09YyYmKGw9bnVsbCksbCl7dmFyIGQ9Sih0Lmxhc3RDaGlsZC5jb250ZW50LHQubGFzdENoaWxkLG4scixvKzEsMT09Yz9pLTE6LTEscy0xKTtpZihkKXt2YXIgdj10Lmxhc3RDaGlsZC5jb3B5KGQpO3JldHVybiBsLnNpemU/dC5jdXRCeUluZGV4KDAsYy0xKS5hcHBlbmQobCkuYWRkVG9FbmQodik6dC5yZXBsYWNlQ2hpbGQoYy0xLHYpfX19cz4wJiYoYT1hLm1hdGNoVHlwZSgoMT09YyYmaT4wP24ubm9kZShvKzEpOnQubGFzdENoaWxkKS50eXBlKSk7dmFyIG09ci5pbmRleChvKTtpZihtPT11LmNoaWxkQ291bnQmJiF1LnR5cGUuY29tcGF0aWJsZUNvbnRlbnQoZS50eXBlKSlyZXR1cm4gbnVsbDtmb3IodmFyIHk9YS5maWxsQmVmb3JlKHUuY29udGVudCwhMCxtKSxnPW07eSYmZzx1LmNvbnRlbnQuY2hpbGRDb3VudDtnKyspcC50eXBlLmFsbG93c01hcmtzKHUuY29udGVudC5jaGlsZChnKS5tYXJrcyl8fCh5PW51bGwpO2lmKCF5KXJldHVybiBudWxsO2lmKHM+MCl7dmFyIHc9TCh0Lmxhc3RDaGlsZCxzLTEsbixvKzEsMT09Yz9pLTE6LTEpO3Q9dC5yZXBsYWNlQ2hpbGQoYy0xLHcpfXJldHVybiB0PXQuYXBwZW5kKHkpLHIuZGVwdGg+byYmKHQ9dC5hZGRUb0VuZChWKHIsbysxKSkpLHR9ZnVuY3Rpb24gTCh0LGUsbixvLGkpe3ZhciBzLGE9dC5jb250ZW50LGM9YS5jaGlsZENvdW50O2lmKHM9aT49MD9uLm5vZGUobykuY29udGVudE1hdGNoQXQobi5pbmRleEFmdGVyKG8pKS5tYXRjaEZyYWdtZW50KGEsaT4wPzE6MCxjKTp0LmNvbnRlbnRNYXRjaEF0KGMpLGU+MCl7dmFyIGg9TChhLmxhc3RDaGlsZCxlLTEsbixvKzEsMT09Yz9pLTE6LTEpO2E9YS5yZXBsYWNlQ2hpbGQoYy0xLGgpfXJldHVybiB0LmNvcHkoYS5hcHBlbmQocy5maWxsQmVmb3JlKHJbImMiXS5lbXB0eSwhMCkpKX1mdW5jdGlvbiBWKHQsZSl7dmFyIG49dC5ub2RlKGUpLHI9bi5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKG4uY29udGVudCwhMCx0LmluZGV4KGUpKTtyZXR1cm4gdC5kZXB0aD5lJiYocj1yLmFkZFRvRW5kKFYodCxlKzEpKSksbi5jb3B5KHIpfWZ1bmN0aW9uIHEodCxlLG4pe3doaWxlKGU+MCYmbj4wJiYxPT10LmNoaWxkQ291bnQpdD10LmZpcnN0Q2hpbGQuY29udGVudCxlLS0sbi0tO3JldHVybiBuZXcgclsiaSJdKHQsZSxuKX1mdW5jdGlvbiBXKHQsZSxuKXt2YXIgcj1KKG4uY29udGVudCx0Lm5vZGUoMCksdCxlLDAsbi5vcGVuU3RhcnQsbi5vcGVuRW5kKTtyZXR1cm4gcj9xKHIsbi5vcGVuU3RhcnQsZS5kZXB0aCk6bnVsbH1mdW5jdGlvbiBIKHQsZSxuKXtyZXR1cm4hbi5vcGVuU3RhcnQmJiFuLm9wZW5FbmQmJnQuc3RhcnQoKT09ZS5zdGFydCgpJiZ0LnBhcmVudC5jYW5SZXBsYWNlKHQuaW5kZXgoKSxlLmluZGV4KCksbi5jb250ZW50KX1mdW5jdGlvbiBLKHQsZSxuKXtpZighZS5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIHIsbz1uLm9wZW5FbmQ/VShuLmNvbnRlbnQsbi5vcGVuRW5kKTp0Lm5vZGUodC5kZXB0aC0obi5vcGVuU3RhcnQtbi5vcGVuRW5kKSk7aWYoIW8uaXNUZXh0YmxvY2spcmV0dXJuITE7Zm9yKHZhciBpPWUuaW5kZXgoKTtpPGUucGFyZW50LmNoaWxkQ291bnQ7aSsrKWlmKCFvLnR5cGUuYWxsb3dzTWFya3MoZS5wYXJlbnQuY2hpbGQoaSkubWFya3MpKXJldHVybiExO3JldHVybiBuLm9wZW5FbmQ/cj1vLmNvbnRlbnRNYXRjaEF0KG8uY2hpbGRDb3VudCk6KHI9by5jb250ZW50TWF0Y2hBdChvLmNoaWxkQ291bnQpLG4uc2l6ZSYmKHI9ci5tYXRjaEZyYWdtZW50KG4uY29udGVudCxuLm9wZW5TdGFydD8xOjApKSkscj1yLm1hdGNoRnJhZ21lbnQoZS5wYXJlbnQuY29udGVudCxlLmluZGV4KCkpLHImJnIudmFsaWRFbmR9ZnVuY3Rpb24gVSh0LGUpe2Zvcih2YXIgbj0xO248ZTtuKyspdD10Lmxhc3RDaGlsZC5jb250ZW50O3JldHVybiB0Lmxhc3RDaGlsZH1mdW5jdGlvbiBHKHQsZSl7Zm9yKHZhciBuPW5ldyBYKHQpLHI9MTtlLnNpemUmJnI8PTM7cisrKXt2YXIgbz1uLnBsYWNlU2xpY2UoZS5jb250ZW50LGUub3BlblN0YXJ0LGUub3BlbkVuZCxyKTszPT1yJiZvIT1lJiZvLnNpemUmJihyPTApLGU9b313aGlsZShuLm9wZW4ubGVuZ3RoKW4uY2xvc2VOb2RlKCk7cmV0dXJuIG4ucGxhY2VkfXkuanNvbklEKCJyZW1vdmVNYXJrIixGKSxsLnByb3RvdHlwZS5hZGRNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89W10saT1bXSxzPW51bGwsYT1udWxsO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLGMsaCl7aWYoci5pc0lubGluZSl7dmFyIHA9ci5tYXJrcztpZighbi5pc0luU2V0KHApJiZoLnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKSl7Zm9yKHZhciB1PU1hdGgubWF4KGMsdCksZj1NYXRoLm1pbihjK3Iubm9kZVNpemUsZSksbD1uLmFkZFRvU2V0KHApLGQ9MDtkPHAubGVuZ3RoO2QrKylwW2RdLmlzSW5TZXQobCl8fChzJiZzLnRvPT11JiZzLm1hcmsuZXEocFtkXSk/cy50bz1mOm8ucHVzaChzPW5ldyBGKHUsZixwW2RdKSkpO2EmJmEudG89PXU/YS50bz1mOmkucHVzaChhPW5ldyBCKHUsZixuKSl9fX0pKSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAodCl9KSksaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLHRoaXN9LGwucHJvdG90eXBlLnJlbW92ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCk7dmFyIGk9W10scz0wO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihvLGEpe2lmKG8uaXNJbmxpbmUpe3MrKzt2YXIgYz1udWxsO2lmKG4gaW5zdGFuY2VvZiByWyJlIl0pe3ZhciBoPW4uaXNJblNldChvLm1hcmtzKTtoJiYoYz1baF0pfWVsc2Ugbj9uLmlzSW5TZXQoby5tYXJrcykmJihjPVtuXSk6Yz1vLm1hcmtzO2lmKGMmJmMubGVuZ3RoKWZvcih2YXIgcD1NYXRoLm1pbihhK28ubm9kZVNpemUsZSksdT0wO3U8Yy5sZW5ndGg7dSsrKXtmb3IodmFyIGY9Y1t1XSxsPXZvaWQgMCxkPTA7ZDxpLmxlbmd0aDtkKyspe3ZhciB2PWlbZF07di5zdGVwPT1zLTEmJmYuZXEoaVtkXS5zdHlsZSkmJihsPXYpfWw/KGwudG89cCxsLnN0ZXA9cyk6aS5wdXNoKHtzdHlsZTpmLGZyb206TWF0aC5tYXgoYSx0KSx0bzpwLHN0ZXA6c30pfX19KSksaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gby5zdGVwKG5ldyBGKHQuZnJvbSx0LnRvLHQuc3R5bGUpKX0pKSx0aGlzfSxsLnByb3RvdHlwZS5jbGVhckluY29tcGF0aWJsZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZS5jb250ZW50TWF0Y2gpO2Zvcih2YXIgbz10aGlzLmRvYy5ub2RlQXQodCksaT1bXSxzPXQrMSxhPTA7YTxvLmNoaWxkQ291bnQ7YSsrKXt2YXIgYz1vLmNoaWxkKGEpLGg9cytjLm5vZGVTaXplLHA9bi5tYXRjaFR5cGUoYy50eXBlLGMuYXR0cnMpO2lmKHApe249cDtmb3IodmFyIHU9MDt1PGMubWFya3MubGVuZ3RoO3UrKyllLmFsbG93c01hcmtUeXBlKGMubWFya3NbdV0udHlwZSl8fHRoaXMuc3RlcChuZXcgRihzLGgsYy5tYXJrc1t1XSkpfWVsc2UgaS5wdXNoKG5ldyB3KHMsaCxyWyJpIl0uZW1wdHkpKTtzPWh9aWYoIW4udmFsaWRFbmQpe3ZhciBmPW4uZmlsbEJlZm9yZShyWyJjIl0uZW1wdHksITApO3RoaXMucmVwbGFjZShzLHMsbmV3IHJbImkiXShmLDAsMCkpfWZvcih2YXIgbD1pLmxlbmd0aC0xO2w+PTA7bC0tKXRoaXMuc3RlcChpW2xdKTtyZXR1cm4gdGhpc30sbC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9dCksdm9pZCAwPT09biYmKG49clsiaSJdLmVtcHR5KTt2YXIgbz1qKHRoaXMuZG9jLHQsZSxuKTtyZXR1cm4gbyYmdGhpcy5zdGVwKG8pLHRoaXN9LGwucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4pLDAsMCkpfSxsLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxyWyJpIl0uZW1wdHkpfSxsLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQsZSl9O3ZhciBYPWZ1bmN0aW9uKHQpe3RoaXMub3Blbj1bXTtmb3IodmFyIGU9MDtlPD10LmRlcHRoO2UrKyl7dmFyIG49dC5ub2RlKGUpLG89bi5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpO3RoaXMub3Blbi5wdXNoKHtwYXJlbnQ6bixtYXRjaDpvLGNvbnRlbnQ6clsiYyJdLmVtcHR5LHdyYXBwZXI6ITEsb3BlbkVuZDowLGRlcHRoOmV9KX10aGlzLnBsYWNlZD1bXX07ZnVuY3Rpb24gWSh0LGUsbil7dmFyIHI9dC5jb250ZW50O2lmKGU+MSl7dmFyIG89WSh0LmZpcnN0Q2hpbGQsZS0xLDE9PXQuY2hpbGRDb3VudD9uLTE6MCk7cj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKDAsbyl9dmFyIGk9dC50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHIsMD09bik7cmV0dXJuIHQuY29weShpLmFwcGVuZChyKSl9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPXQuY29udGVudDtpZihlPjEpe3ZhciBvPVoodC5sYXN0Q2hpbGQsZS0xKTtuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsbyl9dmFyIGk9dC5jb250ZW50TWF0Y2hBdCh0LmNoaWxkQ291bnQpLmZpbGxCZWZvcmUoclsiYyJdLmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKGkpKX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIGU/dC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsWih0Lmxhc3RDaGlsZCxlKSk6dH1mdW5jdGlvbiB0dCh0LGUsbixvLGkpe2lmKGU8bil7dmFyIHM9dC5maXJzdENoaWxkO3Q9dC5yZXBsYWNlQ2hpbGQoMCxzLmNvcHkodHQocy5jb250ZW50LGUrMSxuLG8scykpKX1pZihlPm8pe3ZhciBhPWkuY29udGVudE1hdGNoQXQoMCksYz1hLmZpbGxCZWZvcmUodCkuYXBwZW5kKHQpO3Q9Yy5hcHBlbmQoYS5tYXRjaEZyYWdtZW50KGMpLmZpbGxCZWZvcmUoclsiYyJdLmVtcHR5LCEwKSl9cmV0dXJuIHR9ZnVuY3Rpb24gZXQodCxlKXtmb3IodmFyIG49W10scj1NYXRoLm1pbih0LmRlcHRoLGUuZGVwdGgpLG89cjtvPj0wO28tLSl7dmFyIGk9dC5zdGFydChvKTtpZihpPHQucG9zLSh0LmRlcHRoLW8pfHxlLmVuZChvKT5lLnBvcysoZS5kZXB0aC1vKXx8dC5ub2RlKG8pLnR5cGUuc3BlYy5pc29sYXRpbmd8fGUubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nKWJyZWFrO2k9PWUuc3RhcnQobykmJm4ucHVzaChvKX1yZXR1cm4gbn1YLnByb3RvdHlwZS5wbGFjZVNsaWNlPWZ1bmN0aW9uKHQsZSxuLG8saSl7aWYoZT4wKXt2YXIgcz10LmZpcnN0Q2hpbGQsYT10aGlzLnBsYWNlU2xpY2Uocy5jb250ZW50LE1hdGgubWF4KDAsZS0xKSxuJiYxPT10LmNoaWxkQ291bnQ/bi0xOjAsbyxzKTthLmNvbnRlbnQhPXMuY29udGVudCYmKGEuY29udGVudC5zaXplPyh0PXQucmVwbGFjZUNoaWxkKDAscy5jb3B5KGEuY29udGVudCkpLGU9YS5vcGVuU3RhcnQrMSk6KDE9PXQuY2hpbGRDb3VudCYmKG49MCksdD10LmN1dEJ5SW5kZXgoMSksZT0wKSl9dmFyIGM9dGhpcy5wbGFjZUNvbnRlbnQodCxlLG4sbyxpKTtpZihvPjImJmMuc2l6ZSYmMD09ZSl7dmFyIGg9Yy5jb250ZW50LmZpcnN0Q2hpbGQscD0xPT1jLmNvbnRlbnQuY2hpbGRDb3VudDt0aGlzLnBsYWNlQ29udGVudChoLmNvbnRlbnQsMCxuJiZwP24tMTowLG8saCksYz1wP3JbImMiXS5lbXB0eTpuZXcgclsiaSJdKGMuY29udGVudC5jdXRCeUluZGV4KDEpLDAsbil9cmV0dXJuIGN9LFgucHJvdG90eXBlLnBsYWNlQ29udGVudD1mdW5jdGlvbih0LGUsbixvLGkpe2Zvcih2YXIgcz0wO3M8dC5jaGlsZENvdW50O3MrKyl7Zm9yKHZhciBhPXQuY2hpbGQocyksYz0hMSxoPXM9PXQuY2hpbGRDb3VudC0xLHA9dGhpcy5vcGVuLmxlbmd0aC0xO3A+PTA7cC0tKXt2YXIgdT10aGlzLm9wZW5bcF0sZj12b2lkIDA7aWYobz4xJiYoZj11Lm1hdGNoLmZpbmRXcmFwcGluZyhhLnR5cGUpKSYmKCFpfHwhZi5sZW5ndGh8fGZbZi5sZW5ndGgtMV0hPWkudHlwZSkpe3doaWxlKHRoaXMub3Blbi5sZW5ndGgtMT5wKXRoaXMuY2xvc2VOb2RlKCk7Zm9yKHZhciBsPTA7bDxmLmxlbmd0aDtsKyspdS5tYXRjaD11Lm1hdGNoLm1hdGNoVHlwZShmW2xdKSxwKyssdT17cGFyZW50OmZbbF0uY3JlYXRlKCksbWF0Y2g6ZltsXS5jb250ZW50TWF0Y2gsY29udGVudDpyWyJjIl0uZW1wdHksd3JhcHBlcjohMCxvcGVuRW5kOjAsZGVwdGg6cCtsfSx0aGlzLm9wZW4ucHVzaCh1KX12YXIgZD11Lm1hdGNoLm1hdGNoVHlwZShhLnR5cGUpO2lmKCFkKXt2YXIgdj11Lm1hdGNoLmZpbGxCZWZvcmUoclsiYyJdLmZyb20oYSkpO2lmKCF2KXtpZihpJiZ1Lm1hdGNoLm1hdGNoVHlwZShpLnR5cGUpKWJyZWFrO2NvbnRpbnVlfWZvcih2YXIgbT0wO208di5jaGlsZENvdW50O20rKyl7dmFyIHk9di5jaGlsZChtKTt0aGlzLmFkZE5vZGUodSx5LDApLGQ9dS5tYXRjaC5tYXRjaEZyYWdtZW50KHkpfX13aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+cCl0aGlzLmNsb3NlTm9kZSgpO2E9YS5tYXJrKHUucGFyZW50LnR5cGUuYWxsb3dlZE1hcmtzKGEubWFya3MpKSxlJiYoYT1ZKGEsZSxoP246MCksZT0wKSx0aGlzLmFkZE5vZGUodSxhLGg/bjowKSx1Lm1hdGNoPWQsaCYmKG49MCksYz0hMDticmVha31pZighYylicmVha31yZXR1cm4gdGhpcy5vcGVuLmxlbmd0aD4xJiYocz4wJiZzPT10LmNoaWxkQ291bnR8fGkmJnRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLnBhcmVudC50eXBlPT1pLnR5cGUpJiZ0aGlzLmNsb3NlTm9kZSgpLG5ldyByWyJpIl0odC5jdXRCeUluZGV4KHMpLGUsbil9LFgucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4pe3QuY29udGVudD1RKHQuY29udGVudCx0Lm9wZW5FbmQpLmFkZFRvRW5kKGUpLHQub3BlbkVuZD1ufSxYLnByb3RvdHlwZS5jbG9zZU5vZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wZW4ucG9wKCk7MD09dC5jb250ZW50LnNpemV8fCh0LndyYXBwZXI/dGhpcy5hZGROb2RlKHRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLHQucGFyZW50LmNvcHkodC5jb250ZW50KSx0Lm9wZW5FbmQrMSk6dGhpcy5wbGFjZWRbdC5kZXB0aF09e2RlcHRoOnQuZGVwdGgsY29udGVudDp0LmNvbnRlbnQsb3BlbkVuZDp0Lm9wZW5FbmR9KX0sbC5wcm90b3R5cGUucmVwbGFjZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXtpZighbi5zaXplKXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKHQsZSk7dmFyIG89dGhpcy5kb2MucmVzb2x2ZSh0KSxpPXRoaXMuZG9jLnJlc29sdmUoZSk7aWYoSChvLGksbikpcmV0dXJuIHRoaXMuc3RlcChuZXcgdyh0LGUsbikpO3ZhciBzPWV0KG8sdGhpcy5kb2MucmVzb2x2ZShlKSk7MD09c1tzLmxlbmd0aC0xXSYmcy5wb3AoKTt2YXIgYT0tKG8uZGVwdGgrMSk7cy51bnNoaWZ0KGEpO2Zvcih2YXIgYz1vLmRlcHRoLGg9by5wb3MtMTtjPjA7Yy0tLGgtLSl7dmFyIHA9by5ub2RlKGMpLnR5cGUuc3BlYztpZihwLmRlZmluaW5nfHxwLmlzb2xhdGluZylicmVhaztzLmluZGV4T2YoYyk+LTE/YT1jOm8uYmVmb3JlKGMpPT1oJiZzLnNwbGljZSgxLDAsLWMpfWZvcih2YXIgdT1zLmluZGV4T2YoYSksZj1bXSxsPW4ub3BlblN0YXJ0LGQ9bi5jb250ZW50LHY9MDs7disrKXt2YXIgbT1kLmZpcnN0Q2hpbGQ7aWYoZi5wdXNoKG0pLHY9PW4ub3BlblN0YXJ0KWJyZWFrO2Q9bS5jb250ZW50fWw+MCYmZltsLTFdLnR5cGUuc3BlYy5kZWZpbmluZyYmby5ub2RlKHUpLnR5cGUhPWZbbC0xXS50eXBlP2wtPTE6bD49MiYmZltsLTFdLmlzVGV4dGJsb2NrJiZmW2wtMl0udHlwZS5zcGVjLmRlZmluaW5nJiZvLm5vZGUodSkudHlwZSE9ZltsLTJdLnR5cGUmJihsLT0yKTtmb3IodmFyIHk9bi5vcGVuU3RhcnQ7eT49MDt5LS0pe3ZhciBnPSh5K2wrMSklKG4ub3BlblN0YXJ0KzEpLHg9ZltnXTtpZih4KWZvcih2YXIgYj0wO2I8cy5sZW5ndGg7YisrKXt2YXIgaz1zWyhiK3UpJXMubGVuZ3RoXSxTPSEwO2s8MCYmKFM9ITEsaz0tayk7dmFyIE89by5ub2RlKGstMSksQz1vLmluZGV4KGstMSk7aWYoTy5jYW5SZXBsYWNlV2l0aChDLEMseC50eXBlLHgubWFya3MpKXJldHVybiB0aGlzLnJlcGxhY2Uoby5iZWZvcmUoayksUz9pLmFmdGVyKGspOmUsbmV3IHJbImkiXSh0dChuLmNvbnRlbnQsMCxuLm9wZW5TdGFydCxnKSxnLG4ub3BlbkVuZCkpfX1mb3IodmFyIE09dGhpcy5zdGVwcy5sZW5ndGgsVD1zLmxlbmd0aC0xO1Q+PTA7VC0tKXtpZih0aGlzLnJlcGxhY2UodCxlLG4pLHRoaXMuc3RlcHMubGVuZ3RoPk0pYnJlYWs7dmFyIE49c1tUXTtUPDB8fCh0PW8uYmVmb3JlKE4pLGU9aS5hZnRlcihOKSl9cmV0dXJuIHRoaXN9LGwucHJvdG90eXBlLnJlcGxhY2VSYW5nZVdpdGg9ZnVuY3Rpb24odCxlLG4pe2lmKCFuLmlzSW5saW5lJiZ0PT1lJiZ0aGlzLmRvYy5yZXNvbHZlKHQpLnBhcmVudC5jb250ZW50LnNpemUpe3ZhciBvPUQodGhpcy5kb2MsdCxuLnR5cGUpO251bGwhPW8mJih0PWU9byl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlKHQsZSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4pLDAsMCkpfSxsLnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmRvYy5yZXNvbHZlKHQpLHI9dGhpcy5kb2MucmVzb2x2ZShlKSxvPWV0KG4sciksaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9aT09by5sZW5ndGgtMTtpZihhJiYwPT1zfHxuLm5vZGUocykudHlwZS5jb250ZW50TWF0Y2gudmFsaWRFbmQpcmV0dXJuIHRoaXMuZGVsZXRlKG4uc3RhcnQocyksci5lbmQocykpO2lmKHM+MCYmKGF8fG4ubm9kZShzLTEpLmNhblJlcGxhY2Uobi5pbmRleChzLTEpLHIuaW5kZXhBZnRlcihzLTEpKSkpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKHMpLHIuYWZ0ZXIocykpfWZvcih2YXIgYz0xO2M8PW4uZGVwdGgmJmM8PXIuZGVwdGg7YysrKWlmKHQtbi5zdGFydChjKT09bi5kZXB0aC1jJiZlPm4uZW5kKGMpJiZyLmVuZChjKS1lIT1yLmRlcHRoLWMpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKGMpLGUpO3JldHVybiB0aGlzLmRlbGV0ZSh0LGUpfX0sIjBjZmIiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4M2FiIiksbz1uKCJkMDM5IiksaT1uKCJjYzEyIik7dC5leHBvcnRzPSFyJiYhbygoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KGkoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKX0sIjEzYWQiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXt0aGlzLmNvbnRlbnQ9dH1yLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cixmaW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKz0yKWlmKHRoaXMuY29udGVudFtlXT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9LGdldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbmQodCk7cmV0dXJuLTE9PWU/dm9pZCAwOnRoaXMuY29udGVudFtlKzFdfSx1cGRhdGU6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPW4mJm4hPXQ/dGhpcy5yZW1vdmUobik6dGhpcyxpPW8uZmluZCh0KSxzPW8uY29udGVudC5zbGljZSgpO3JldHVybi0xPT1pP3MucHVzaChufHx0LGUpOihzW2krMV09ZSxuJiYoc1tpXT1uKSksbmV3IHIocyl9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbmQodCk7aWYoLTE9PWUpcmV0dXJuIHRoaXM7dmFyIG49dGhpcy5jb250ZW50LnNsaWNlKCk7cmV0dXJuIG4uc3BsaWNlKGUsMiksbmV3IHIobil9LGFkZFRvU3RhcnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHIoW3QsZV0uY29uY2F0KHRoaXMucmVtb3ZlKHQpLmNvbnRlbnQpKX0sYWRkVG9FbmQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnJlbW92ZSh0KS5jb250ZW50LnNsaWNlKCk7cmV0dXJuIG4ucHVzaCh0LGUpLG5ldyByKG4pfSxhZGRCZWZvcmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMucmVtb3ZlKGUpLGk9by5jb250ZW50LnNsaWNlKCkscz1vLmZpbmQodCk7cmV0dXJuIGkuc3BsaWNlKC0xPT1zP2kubGVuZ3RoOnMsMCxlLG4pLG5ldyByKGkpfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKz0yKXQodGhpcy5jb250ZW50W2VdLHRoaXMuY29udGVudFtlKzFdKX0scHJlcGVuZDpmdW5jdGlvbih0KXtyZXR1cm4gdD1yLmZyb20odCksdC5zaXplP25ldyByKHQuY29udGVudC5jb25jYXQodGhpcy5zdWJ0cmFjdCh0KS5jb250ZW50KSk6dGhpc30sYXBwZW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0PXIuZnJvbSh0KSx0LnNpemU/bmV3IHIodGhpcy5zdWJ0cmFjdCh0KS5jb250ZW50LmNvbmNhdCh0LmNvbnRlbnQpKTp0aGlzfSxzdWJ0cmFjdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3Q9ci5mcm9tKHQpO2Zvcih2YXIgbj0wO248dC5jb250ZW50Lmxlbmd0aDtuKz0yKWU9ZS5yZW1vdmUodC5jb250ZW50W25dKTtyZXR1cm4gZX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD4+MX19LHIuZnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgcilyZXR1cm4gdDt2YXIgZT1bXTtpZih0KWZvcih2YXIgbiBpbiB0KWUucHVzaChuLHRbbl0pO3JldHVybiBuZXcgcihlKX07dmFyIG89cjtlWyJhIl09b30sIjE1NWMiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5yKGUpLG4uZChlLCJDb250ZW50TWF0Y2giLChmdW5jdGlvbigpe3JldHVybiBffSkpLG4uZChlLCJET01QYXJzZXIiLChmdW5jdGlvbigpe3JldHVybiB1dH0pKSxuLmQoZSwiRE9NU2VyaWFsaXplciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR0fSkpLG4uZChlLCJGcmFnbWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSksbi5kKGUsIk1hcmsiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLG4uZChlLCJNYXJrVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN0fSkpLG4uZChlLCJOb2RlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxuLmQoZSwiTm9kZVJhbmdlIiwoZnVuY3Rpb24oKXtyZXR1cm4gen0pKSxuLmQoZSwiTm9kZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiBvdH0pKSxuLmQoZSwiUmVwbGFjZUVycm9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gZn0pKSxuLmQoZSwiUmVzb2x2ZWRQb3MiLChmdW5jdGlvbigpe3JldHVybiBUfSkpLG4uZChlLCJTY2hlbWEiLChmdW5jdGlvbigpe3JldHVybiBodH0pKSxuLmQoZSwiU2xpY2UiLChmdW5jdGlvbigpe3JldHVybiBsfSkpO3ZhciByPW4oIjEzYWQiKTtmdW5jdGlvbiBvKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBpPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKGkhPXMpe2lmKCFpLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoaS5pc1RleHQmJmkudGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtpLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKGkuY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9byhpLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1pLm5vZGVTaXplfWVsc2Ugbis9aS5ub2RlU2l6ZX19ZnVuY3Rpb24gaSh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LHM9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PXMpcmV0dXJuIG89PXM/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLXMpLGg9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgZj1pKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoZilyZXR1cm4gZn1uLT1oLHItPWh9ZWxzZSBuLT1oLHItPWh9fXZhciBzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LGE9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O3MucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciBoPXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtaCksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1oKSxuLHIraCl9cz1jfX0scy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LHMucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30scy5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBzKHIsdGhpcy5zaXplK3Quc2l6ZSl9LHMucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBhPXRoaXMuY29udGVudFtvXSxjPWkrYS5ub2RlU2l6ZTtjPnQmJigoaTx0fHxjPmUpJiYoYT1hLmlzVGV4dD9hLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxlLWkpKTphLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2goYSkscis9YS5ub2RlU2l6ZSksaT1jfXJldHVybiBuZXcgcyhuLHIpfSxzLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/cy5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IHModGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxzLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgcyhyLG8pfSxzLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LGEuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0sYS5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0sYS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxzLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0scy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSxzLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LHMucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbyh0aGlzLHQsZSl9LHMucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLGkodGhpcyx0LGUsbil9LHMucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiBoKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBoKHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP2gobisxLGkpOmgobixyKTtyPWl9fSxzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LHMucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcy5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHMoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0scy5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBzLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgcyhlfHx0LG4pfSxzLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHMuZW1wdHk7aWYodCBpbnN0YW5jZW9mIHMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IHMoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKTt2YXIgYz17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gaCh0LGUpe3JldHVybiBjLmluZGV4PXQsYy5vZmZzZXQ9ZSxjfWZ1bmN0aW9uIHAodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXAodFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IXAodFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9cy5lbXB0eT1uZXcgcyhbXSwwKTt2YXIgdT1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24gZih0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWYucHJvdG90eXBlLGV9dS5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LHUucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSx1LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LHUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmcCh0aGlzLmF0dHJzLHQuYXR0cnMpfSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sdS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sdS5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LHUuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIHUubm9uZTtpZih0IGluc3RhbmNlb2YgdSlyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LHUubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxkPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB2KHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxoPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihoIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh2KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBtKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9bShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiB5KHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gZyh0LGUsbiwwKX1mdW5jdGlvbiBnKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz1nKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1NKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIFMoaSxPKHQsYyxoLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBTKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBTKGksQyh0LGUscikpfWZ1bmN0aW9uIHcodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIHgodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gdyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBiKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gayh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihiKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspYihvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmYihlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gUyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZ4KHQsZSxvKzEpLGE9ci5kZXB0aD5vJiZ4KG4scixvKzEpLGM9W107cmV0dXJuIGsobnVsbCx0LG8sYyksaSYmYSYmZS5pbmRleChvKT09bi5pbmRleChvKT8odyhpLGEpLGIoUyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmIoUyhpLEModCxlLG8rMSkpLGMpLGsoZSxuLG8sYyksYSYmYihTKGEsQyhuLHIsbysxKSksYykpLGsocixudWxsLG8sYyksbmV3IHMoYyl9ZnVuY3Rpb24gQyh0LGUsbil7dmFyIHI9W107aWYoayhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPXgodCxlLG4rMSk7YihTKG8sQyh0LGUsbisxKSkscil9cmV0dXJuIGsoZSxudWxsLG4sciksbmV3IHMocil9ZnVuY3Rpb24gTSh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShzLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19ZC5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGwucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgbChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGwodih0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGwucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sbC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBsLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgbChzLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxsLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBsKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobC5wcm90b3R5cGUsZCksbC5lbXB0eT1uZXcgbChzLmVtcHR5LDAsMCk7dmFyIFQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sTj17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtULnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LE4ucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LE4uZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LFQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sVC5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxULnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxULnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxULnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxULnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sVC5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxOLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxOLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxOLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxULnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiB1Lm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sVC5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxULnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSxULnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyB6KHRoaXMsdCxuKX0sVC5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxULnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LFQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LFQucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IFQoZSxuLG8pfSxULnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEUubGVuZ3RoO24rKyl7dmFyIHI9RVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89RVtBXT1ULnJlc29sdmUodCxlKTtyZXR1cm4gQT0oQSsxKSVSLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFQucHJvdG90eXBlLE4pO3ZhciBFPVtdLEE9MCxSPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sRD17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtELnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxELmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sRC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sRC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxELmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxEKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLFA9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxzLmVtcHR5LHRoaXMubWFya3M9cnx8dS5ub25lfSxCPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07Qi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxCLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxQLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxQLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sUC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sUC5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sUC5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sQi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sUC5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sQi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sQi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LFAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxQLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sUC5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZwKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZ1LnNhbWVTZXQodGhpcy5tYXJrcyxufHx1Lm5vbmUpfSxQLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxQLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxQLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sUC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gbC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBsKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LFAucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB5KHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LFAucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LFAucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sUC5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sUC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gVC5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFAucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmUodGhpcyx0KX0sUC5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxCLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxCLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEIuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEIuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sQi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEIuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxCLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxQLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LFAucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj1zLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYT1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFhfHwhYS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGM9cjtjPG87YysrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChjKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFAucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sUC5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxQLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxQLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSxQLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPXMuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUC5wcm90b3R5cGUsQik7dmFyIEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFApO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgXz1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSwkPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07Xy5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBKKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiBfLmVtcHR5O3ZhciByPVYobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89UShYKHIpKTtyZXR1cm4gdHQobyxuKSxvfSxfLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sXy5wcm90b3R5cGUubWF0Y2hGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dC5jaGlsZENvdW50KTtmb3IodmFyIHI9dGhpcyxvPWU7ciYmbzxuO28rKylyPXIubWF0Y2hUeXBlKHQuY2hpbGQobykudHlwZSk7cmV0dXJuIHJ9LCQuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5leHRbMF07cmV0dXJuISF0JiZ0LmlzSW5saW5lfSwkLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxfLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWZvcih2YXIgbj0wO248dC5uZXh0Lmxlbmd0aDtuKz0yKWlmKHRoaXMubmV4dFtlXT09dC5uZXh0W25dKXJldHVybiEwO3JldHVybiExfSxfLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxhKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBzLmZyb20oYS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBoPTA7aDxpLm5leHQubGVuZ3RoO2grPTIpe3ZhciBwPWkubmV4dFtoXSx1PWkubmV4dFtoKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGY9byh1LGEuY29uY2F0KHApKTtpZihmKXJldHVybiBmfX19cmV0dXJuIG8odGhpcyxbXSl9LF8ucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMud3JhcENhY2hlLmxlbmd0aDtlKz0yKWlmKHRoaXMud3JhcENhY2hlW2VdPT10KXJldHVybiB0aGlzLndyYXBDYWNoZVtlKzFdO3ZhciBuPXRoaXMuY29tcHV0ZVdyYXBwaW5nKHQpO3JldHVybiB0aGlzLndyYXBDYWNoZS5wdXNoKHQsbiksbn0sXy5wcm90b3R5cGUuY29tcHV0ZVdyYXBwaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCksbj1be21hdGNoOnRoaXMsdHlwZTpudWxsLHZpYTpudWxsfV07d2hpbGUobi5sZW5ndGgpe3ZhciByPW4uc2hpZnQoKSxvPXIubWF0Y2g7aWYoby5tYXRjaFR5cGUodCkpe2Zvcih2YXIgaT1bXSxzPXI7cy50eXBlO3M9cy52aWEpaS5wdXNoKHMudHlwZSk7cmV0dXJuIGkucmV2ZXJzZSgpfWZvcih2YXIgYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV07Yy5pc0xlYWZ8fGMuaGFzUmVxdWlyZWRBdHRycygpfHxjLm5hbWUgaW4gZXx8ci50eXBlJiYhby5uZXh0W2ErMV0udmFsaWRFbmR8fChuLnB1c2goe21hdGNoOmMuY29udGVudE1hdGNoLHR5cGU6Yyx2aWE6cn0pLGVbYy5uYW1lXT0hMCl9fX0sJC5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LF8ucHJvdG90eXBlLmVkZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dDw8MTtpZihlPj10aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsJCksXy5lbXB0eT1uZXcgXyghMCk7dmFyIEo9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEw9e25leHQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFYodCl7dmFyIGU9W107ZG97ZS5wdXNoKHEodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBXKHQpe2Zvcih2YXIgZT1HKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPUsodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBIKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBLKHQsZSl7dmFyIG49SCh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0godCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIEcodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9Vih0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1VKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFgodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFkodCxlKXtyZXR1cm4gZS10fWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoWSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIFEodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gbihaKHQsMCkpO2Z1bmN0aW9uIG4ocil7dmFyIG89W107ci5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGVybSxyPWUudG87aWYobil7dmFyIGk9by5pbmRleE9mKG4pLHM9aT4tMSYmb1tpKzFdO1oodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgXyhyLmluZGV4T2YodC5sZW5ndGgtMSk+LTEpLHM9MDtzPG8ubGVuZ3RoO3MrPTIpe3ZhciBhPW9bcysxXS5zb3J0KFkpO2kubmV4dC5wdXNoKG9bc10sZVthLmpvaW4oIiwiKV18fG4oYSkpfXJldHVybiBpfX1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgbj0wLHI9W3RdO248ci5sZW5ndGg7bisrKXtmb3IodmFyIG89cltuXSxpPSFvLnZhbGlkRW5kLHM9W10sYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV0saD1vLm5leHRbYSsxXTtzLnB1c2goYy5uYW1lKSwhaXx8Yy5pc1RleHR8fGMuaGFzUmVxdWlyZWRBdHRycygpfHwoaT0hMSksLTE9PXIuaW5kZXhPZihoKSYmci5wdXNoKGgpfWkmJmUuZXJyKCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoIitzLmpvaW4oIiwgIikrIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiIpfX1mdW5jdGlvbiBldCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKCFyLmhhc0RlZmF1bHQpcmV0dXJuIG51bGw7ZVtuXT1yLmRlZmF1bHR9cmV0dXJuIGV9ZnVuY3Rpb24gbnQodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0KXt2YXIgbz1lJiZlW3JdO2lmKHZvaWQgMD09PW8pe3ZhciBpPXRbcl07aWYoIWkuaGFzRGVmYXVsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSAiK3IpO289aS5kZWZhdWx0fW5bcl09b31yZXR1cm4gbn1mdW5jdGlvbiBydCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQpZm9yKHZhciBuIGluIHQpZVtuXT1uZXcgc3QodFtuXSk7cmV0dXJuIGV9TC5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LEoucHJvdG90eXBlLmVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0PT10JiYodGhpcy5wb3MrK3x8ITApfSxKLnByb3RvdHlwZS5lcnI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKHQrIiAoaW4gY29udGVudCBleHByZXNzaW9uICciK3RoaXMuc3RyaW5nKyInKSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhKLnByb3RvdHlwZSxMKTt2YXIgb3Q9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPWUsdGhpcy5zcGVjPW4sdGhpcy5ncm91cHM9bi5ncm91cD9uLmdyb3VwLnNwbGl0KCIgIik6W10sdGhpcy5hdHRycz1ydChuLmF0dHJzKSx0aGlzLmRlZmF1bHRBdHRycz1ldCh0aGlzLmF0dHJzKSx0aGlzLmNvbnRlbnRNYXRjaD1udWxsLHRoaXMubWFya1NldD1udWxsLHRoaXMuaW5saW5lQ29udGVudD1udWxsLHRoaXMuaXNCbG9jaz0hKG4uaW5saW5lfHwidGV4dCI9PXQpLHRoaXMuaXNUZXh0PSJ0ZXh0Ij09dH0saXQ9e2lzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O2l0LmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzQmxvY2t9LGl0LmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQmxvY2smJnRoaXMuaW5saW5lQ29udGVudH0saXQuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaD09Xy5lbXB0eX0saXQuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZnx8dGhpcy5zcGVjLmF0b219LG90LnByb3RvdHlwZS5oYXNSZXF1aXJlZEF0dHJzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1t0XS5pc1JlcXVpcmVkKXJldHVybiEwO3JldHVybiExfSxvdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxvdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpudCh0aGlzLmF0dHJzLHQpfSxvdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLHMuZnJvbShlKSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1zLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsdS5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1zLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKHMuZW1wdHksITApO3JldHVybiBvP25ldyBQKHRoaXMsdCxlLmFwcGVuZChvKSx1LnNldEZyb20obikpOm51bGx9LG90LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTp1LmVtcHR5OnR9LG90LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgb3QodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob3QucHJvdG90eXBlLGl0KTt2YXIgc3Q9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sYXQ9e2lzUmVxdWlyZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2F0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3QucHJvdG90eXBlLGF0KTt2YXIgY3Q9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPXJ0KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1ldCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyB1KHRoaXMsbyl9O2N0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgdSh0aGlzLG50KHRoaXMuYXR0cnMsdCkpfSxjdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgY3QodCxyKyssZSxvKX0pKSxufSxjdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sY3QucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxjdC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIGh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9clsiYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPXJbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9b3QuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1jdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbyBpbiB0aGlzLm5vZGVzKXtpZihvIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IobysiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBpPXRoaXMubm9kZXNbb10scz1pLnNwZWMuY29udGVudHx8IiIsYT1pLnNwZWMubWFya3M7aS5jb250ZW50TWF0Y2g9bltzXXx8KG5bc109Xy5wYXJzZShzLHRoaXMubm9kZXMpKSxpLmlubGluZUNvbnRlbnQ9aS5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxpLm1hcmtTZXQ9Il8iPT1hP251bGw6YT9wdCh0aGlzLGEuc3BsaXQoIiAiKSk6IiIhPWEmJmkuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgYyBpbiB0aGlzLm1hcmtzKXt2YXIgaD10aGlzLm1hcmtzW2NdLHA9aC5zcGVjLmV4Y2x1ZGVzO2guZXhjbHVkZWQ9bnVsbD09cD9baF06IiI9PXA/W106cHQodGhpcyxwLnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiBwdCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1odC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2Ygb3QpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxodC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEYobixuLmRlZmF1bHRBdHRycyx0LHUuc2V0RnJvbShlKSl9LGh0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0saHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gUC5mcm9tSlNPTih0aGlzLHQpfSxodC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiB1LmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIHV0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTt1dC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0sdXQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbC5tYXhPcGVuKG4uZmluaXNoKCkpfSx1dC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoU3QodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSx1dC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSx1dC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUN0KHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LHV0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgdXQodCx1dC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sbHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sZHQ9e29sOiEwLHVsOiEwfSx2dD0xLG10PTIseXQ9NDtmdW5jdGlvbiBndCh0KXtyZXR1cm4odD92dDowKXwoImZ1bGwiPT09dD9tdDowKX12YXIgd3Q9ZnVuY3Rpb24odCxlLG4scixvLGkscyl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9byx0aGlzLm1hdGNoPWl8fChzJnl0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1zLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz11Lm5vbmUsdGhpcy5wZW5kaW5nTWFya3M9cn07d3QucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUocy5mcm9tKHQpKTtpZighZSl7dmFyIG4scj10aGlzLnR5cGUuY29udGVudE1hdGNoO3JldHVybihuPXIuZmluZFdyYXBwaW5nKHQudHlwZSkpPyh0aGlzLm1hdGNoPXIsbik6bnVsbH10aGlzLm1hdGNoPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKX1yZXR1cm4gdGhpcy5tYXRjaC5maW5kV3JhcHBpbmcodC50eXBlKX0sd3QucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbih0KXtpZighKHRoaXMub3B0aW9ucyZ2dCkpe3ZhciBlLG49dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV07biYmbi5pc1RleHQmJihlPS9bIFx0XHJcblx1MDAwY10rJC8uZXhlYyhuLnRleHQpKSYmKG4udGV4dC5sZW5ndGg9PWVbMF0ubGVuZ3RoP3RoaXMuY29udGVudC5wb3AoKTp0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXT1uLndpdGhUZXh0KG4udGV4dC5zbGljZSgwLG4udGV4dC5sZW5ndGgtZVswXS5sZW5ndGgpKSl9dmFyIHI9cy5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShzLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfSx3dC5wcm90b3R5cGUuYXBwbHlQZW5kaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5wZW5kaW5nTWFya3M7ZTxuLmxlbmd0aDtlKyspe3ZhciByPW5bZV07KHRoaXMudHlwZT90aGlzLnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKTpNdChyLnR5cGUsdCkpJiYhci5pc0luU2V0KHRoaXMuYWN0aXZlTWFya3MpJiYodGhpcy5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHRoaXMuYWN0aXZlTWFya3MpLHRoaXMucGVuZGluZ01hcmtzPXIucmVtb3ZlRnJvbVNldCh0aGlzLnBlbmRpbmdNYXJrcykpfX07dmFyIHh0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW47dmFyIHIsbz1lLnRvcE5vZGUsaT1ndChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/eXQ6MCk7cj1vP25ldyB3dChvLnR5cGUsby5hdHRycyx1Lm5vbmUsdS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IHd0KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLHUubm9uZSx1Lm5vbmUsITAsbnVsbCxpKSx0aGlzLm5vZGVzPVtyXSx0aGlzLm9wZW49MCx0aGlzLmZpbmQ9ZS5maW5kUG9zaXRpb25zLHRoaXMubmVlZHNCbG9jaz0hMX0sYnQ9e3RvcDp7Y29uZmlndXJhYmxlOiEwfSxjdXJyZW50UG9zOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBrdCh0KXtmb3IodmFyIGU9dC5maXJzdENoaWxkLG49bnVsbDtlO2U9ZS5uZXh0U2libGluZyl7dmFyIHI9MT09ZS5ub2RlVHlwZT9lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtyJiZkdC5oYXNPd25Qcm9wZXJ0eShyKSYmbj8obi5hcHBlbmRDaGlsZChlKSxlPW4pOiJsaSI9PXI/bj1lOnImJihuPW51bGwpfX1mdW5jdGlvbiBTdCh0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQubXNNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfWZ1bmN0aW9uIE90KHQpe3ZhciBlLG49L1xzKihbXHctXSspXHMqOlxzKihbXjtdKykvZyxyPVtdO3doaWxlKGU9bi5leGVjKHQpKXIucHVzaChlWzFdLGVbMl0udHJpbSgpKTtyZXR1cm4gcn1mdW5jdGlvbiBDdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gTXQodCxlKXt2YXIgbj1lLnNjaGVtYS5ub2RlcyxyPWZ1bmN0aW9uKHIpe3ZhciBvPW5bcl07aWYoby5hbGxvd3NNYXJrVHlwZSh0KSl7dmFyIGk9W10scz1mdW5jdGlvbih0KXtpLnB1c2godCk7Zm9yKHZhciBuPTA7bjx0LmVkZ2VDb3VudDtuKyspe3ZhciByPXQuZWRnZShuKSxvPXIudHlwZSxhPXIubmV4dDtpZihvPT1lKXJldHVybiEwO2lmKGkuaW5kZXhPZihhKTwwJiZzKGEpKXJldHVybiEwfX07cmV0dXJuIHMoby5jb250ZW50TWF0Y2gpP3t2OiEwfTp2b2lkIDB9fTtmb3IodmFyIG8gaW4gbil7dmFyIGk9cihvKTtpZihpKXJldHVybiBpLnZ9fWJ0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSx4dC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLG49ZT90aGlzLnJlYWRTdHlsZXMoT3QoZSkpOm51bGwscj10aGlzLnRvcDtpZihudWxsIT1uKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXRoaXMuYWRkUGVuZGluZ01hcmsobltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPW4pZm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhuW2ldLHIpfX0seHQucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJnZ0KW4ub3B0aW9ucyZtdHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ZHQuaGFzT3duUHJvcGVydHkoZSkmJmt0KHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpsdC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZihmdC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSx4dC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSx4dC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dS5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGksYSl9LHh0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmZnQuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0seHQucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSx4dC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDtuLmFwcGx5UGVuZGluZyh0LnR5cGUpLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LHh0LnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiZ0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pLHJ9LHh0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28uYXBwbHlQZW5kaW5nKHQpLG8ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+eXQ6Z3Qocik7by5vcHRpb25zJnl0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9eXQpLHRoaXMubm9kZXMucHVzaChuZXcgd3QodCxlLG8uYWN0aXZlTWFya3Msby5wZW5kaW5nTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30seHQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0seHQucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0sYnQuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LHh0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0seHQucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSx4dC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSx4dC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBoPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWh8fGgubmFtZSE9YyYmLTE9PWguZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LHh0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LHh0LnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnRvcC5wZW5kaW5nTWFya3M9dC5hZGRUb1NldCh0aGlzLnRvcC5wZW5kaW5nTWFya3MpfSx4dC5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5vcGVuO24+PTA7bi0tKXt2YXIgcj10aGlzLm5vZGVzW25dLG89ci5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYobz4tMT9yLnBlbmRpbmdNYXJrcz10LnJlbW92ZUZyb21TZXQoci5wZW5kaW5nTWFya3MpOnIuYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIuYWN0aXZlTWFya3MpLHI9PWUpYnJlYWt9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh4dC5wcm90b3R5cGUsYnQpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LFR0LnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJlR0LnJlbmRlclNwZWMoRXQobikscih0LGUpKX0sVHQucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49bnVsbCksInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciByPWVbMF0sbz1yLmluZGV4T2YoIiAiKTtvPjAmJihuPXIuc2xpY2UoMCxvKSxyPXIuc2xpY2UobysxKSk7dmFyIGk9bnVsbCxzPW4/dC5jcmVhdGVFbGVtZW50TlMobixyKTp0LmNyZWF0ZUVsZW1lbnQociksYT1lWzFdLGM9MTtpZihhJiYib2JqZWN0Ij09dHlwZW9mIGEmJm51bGw9PWEubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KGEpKWZvcih2YXIgaCBpbiBjPTIsYSlpZihudWxsIT1hW2hdKXt2YXIgcD1oLmluZGV4T2YoIiAiKTtwPjA/cy5zZXRBdHRyaWJ1dGVOUyhoLnNsaWNlKDAscCksaC5zbGljZShwKzEpLGFbaF0pOnMuc2V0QXR0cmlidXRlKGgsYVtoXSl9Zm9yKHZhciB1PWM7dTxlLmxlbmd0aDt1Kyspe3ZhciBmPWVbdV07aWYoMD09PWYpe2lmKHU8ZS5sZW5ndGgtMXx8dT5jKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOnMsY29udGVudERPTTpzfX12YXIgbD1UdC5yZW5kZXJTcGVjKHQsZixuKSxkPWwuZG9tLHY9bC5jb250ZW50RE9NO2lmKHMuYXBwZW5kQ2hpbGQoZCksdil7aWYoaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO2k9dn19cmV0dXJue2RvbTpzLGNvbnRlbnRET006aX19LFR0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyBUdCh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSxUdC5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9TnQodC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0sVHQubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBOdCh0Lm1hcmtzKX19LCIxYWZhIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImU3NmMiKSxvPW4ubihyKTtvLmF9LCIxYmU0IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDA2NiIpO3QuZXhwb3J0cz1yKCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIpfSwiMWMwYiI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKFN0cmluZyh0KSsiIGlzIG5vdCBhIGZ1bmN0aW9uIik7cmV0dXJuIHR9fSwiMWM0ZiI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLnIoZSksbi5kKGUsIkNvbnRlbnRNYXRjaCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF99KSksbi5kKGUsIkRPTVBhcnNlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV0fSkpLG4uZChlLCJET01TZXJpYWxpemVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gVHR9KSksbi5kKGUsIkZyYWdtZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSwiTWFyayIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSksbi5kKGUsIk1hcmtUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSksbi5kKGUsIk5vZGUiLChmdW5jdGlvbigpe3JldHVybiBQfSkpLG4uZChlLCJOb2RlUmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiB6fSkpLG4uZChlLCJOb2RlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG90fSkpLG4uZChlLCJSZXBsYWNlRXJyb3IiLChmdW5jdGlvbigpe3JldHVybiBmfSkpLG4uZChlLCJSZXNvbHZlZFBvcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR9KSksbi5kKGUsIlNjaGVtYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh0fSkpLG4uZChlLCJTbGljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSk7dmFyIHI9bigiMTNhZCIpO2Z1bmN0aW9uIG8odCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIGk9dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYoaSE9cyl7aWYoIWkuc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihpLmlzVGV4dCYmaS50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO2kudGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoaS5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1vKGkuY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPWkubm9kZVNpemV9ZWxzZSBuKz1pLm5vZGVTaXplfX1mdW5jdGlvbiBpKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQscz1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09cylyZXR1cm4gbz09cz9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0tcyksaD1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIHA9MCx1PU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUocDx1JiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1wLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1wLTFdKXArKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBmPWkoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihmKXJldHVybiBmfW4tPWgsci09aH1lbHNlIG4tPWgsci09aH19dmFyIHM9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuc2l6ZSs9dFtuXS5ub2RlU2l6ZX0sYT17Zmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIGg9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC1oKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWgpLG4scitoKX1zPWN9fSxzLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuc2l6ZSx0KX0scy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dmFyIG89IiIsaT0hMDtyZXR1cm4gdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihzLGEpe3MuaXNUZXh0PyhvKz1zLnRleHQuc2xpY2UoTWF0aC5tYXgodCxhKS1hLGUtYSksaT0hbik6cy5pc0xlYWYmJnI/KG8rPXIsaT0hbik6IWkmJnMuaXNCbG9jayYmKG8rPW4saT0hMCl9KSwwKSxvfSxzLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IHMocix0aGlzLnNpemUrdC5zaXplKX0scy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIG49W10scj0wO2lmKGU+dClmb3IodmFyIG89MCxpPTA7aTxlO28rKyl7dmFyIGE9dGhpcy5jb250ZW50W29dLGM9aSthLm5vZGVTaXplO2M+dCYmKChpPHR8fGM+ZSkmJihhPWEuaXNUZXh0P2EuY3V0KE1hdGgubWF4KDAsdC1pKSxNYXRoLm1pbihhLnRleHQubGVuZ3RoLGUtaSkpOmEuY3V0KE1hdGgubWF4KDAsdC1pLTEpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaS0xKSkpLG4ucHVzaChhKSxyKz1hLm5vZGVTaXplKSxpPWN9cmV0dXJuIG5ldyBzKG4scil9LHMucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9zLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgcyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LHMucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBzKHIsbyl9LHMucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmNvbnRlbnRbZV0uZXEodC5jb250ZW50W2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxhLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxhLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LHMucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxzLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LHMucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY29udGVudFtlXTt0KHIsbixlKSxuKz1yLm5vZGVTaXplfX0scy5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxvKHRoaXMsdCxlKX0scy5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSksaSh0aGlzLHQsZSxuKX0scy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIGgoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIGgodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIG49MCxyPTA7O24rKyl7dmFyIG89dGhpcy5jaGlsZChuKSxpPXIrby5ub2RlU2l6ZTtpZihpPj10KXJldHVybiBpPT10fHxlPjA/aChuKzEsaSk6aChuLHIpO3I9aX19LHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0scy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0scy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0scy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBzLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgcyhlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxzLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIHMuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBzKGV8fHQsbil9LHMuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gcy5lbXB0eTtpZih0IGluc3RhbmNlb2YgcylyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgcyhbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHMucHJvdG90eXBlLGEpO3ZhciBjPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBoKHQsZSl7cmV0dXJuIGMuaW5kZXg9dCxjLm9mZnNldD1lLGN9ZnVuY3Rpb24gcCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighcCh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhcCh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1zLmVtcHR5PW5ldyBzKFtdLDApO3ZhciB1PWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX11LnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sdS5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LHUucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4hMDtyZXR1cm4hMX0sdS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZwKHRoaXMuYXR0cnMsdC5hdHRycyl9LHUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0fSx1LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSx1LnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sdS5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gdS5ub25lO2lmKHQgaW5zdGFuY2VvZiB1KXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0sdS5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGw9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LGQ9e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHYodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGg9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGghPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHYocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIG0odCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz1tKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIHkodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiBnKHQsZSxuLDApfWZ1bmN0aW9uIGcodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPWcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPU0obix0KSxjPWEuc3RhcnQsaD1hLmVuZDtyZXR1cm4gUyhpLE8odCxjLGgsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIFMocCx1LmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQodS5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIFMoaSxDKHQsZSxyKSl9ZnVuY3Rpb24gdyh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24geCh0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB3KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGIodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBrKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGIodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKyliKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZiKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBTKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIE8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJngodCxlLG8rMSksYT1yLmRlcHRoPm8mJngobixyLG8rMSksYz1bXTtyZXR1cm4gayhudWxsLHQsbyxjKSxpJiZhJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh3KGksYSksYihTKGksTyh0LGUsbixyLG8rMSkpLGMpKTooaSYmYihTKGksQyh0LGUsbysxKSksYyksayhlLG4sbyxjKSxhJiZiKFMoYSxDKG4scixvKzEpKSxjKSksayhyLG51bGwsbyxjKSxuZXcgcyhjKX1mdW5jdGlvbiBDKHQsZSxuKXt2YXIgcj1bXTtpZihrKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89eCh0LGUsbisxKTtiKFMobyxDKHQsZSxuKzEpKSxyKX1yZXR1cm4gayhlLG51bGwsbixyKSxuZXcgcyhyKX1mdW5jdGlvbiBNKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KHMuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX1kLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sbC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBsKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sbC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgbCh2KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sbC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sbC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxsLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGwuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBsKHMuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGwubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGwodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsLnByb3RvdHlwZSxkKSxsLmVtcHR5PW5ldyBsKHMuZW1wdHksMCwwKTt2YXIgVD1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxOPXtwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZG9jOntjb25maWd1cmFibGU6ITB9LHRleHRPZmZzZXQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUFmdGVyOntjb25maWd1cmFibGU6ITB9LG5vZGVCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH19O1QucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sTi5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sTi5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sVC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxULnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LFQucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LFQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LFQucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LFQucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxULnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LE4udGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LE4ubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LE4ubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LFQucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIHUubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxULnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LFQucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LFQucHJvdG90eXBlLmJsb2NrUmFuZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgbj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtuPj0wO24tLSlpZih0LnBvczw9dGhpcy5lbmQobikmJighZXx8ZSh0aGlzLm5vZGUobikpKSlyZXR1cm4gbmV3IHoodGhpcyx0LG4pfSxULnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LFQucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxULnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sVC5yZXNvbHZlPWZ1bmN0aW9uKHQsZSl7aWYoIShlPj0wJiZlPD10LmNvbnRlbnQuc2l6ZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrZSsiIG91dCBvZiByYW5nZSIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLGk9dDs7KXt2YXIgcz1pLmNvbnRlbnQuZmluZEluZGV4KG8pLGE9cy5pbmRleCxjPXMub2Zmc2V0LGg9by1jO2lmKG4ucHVzaChpLGEscitjKSwhaClicmVhaztpZihpPWkuY2hpbGQoYSksaS5pc1RleHQpYnJlYWs7bz1oLTEscis9YysxfXJldHVybiBuZXcgVChlLG4sbyl9LFQucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248RS5sZW5ndGg7bisrKXt2YXIgcj1FW25dO2lmKHIucG9zPT1lJiZyLmRvYz09dClyZXR1cm4gcn12YXIgbz1FW0FdPVQucmVzb2x2ZSh0LGUpO3JldHVybiBBPShBKzEpJVIsb30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVC5wcm90b3R5cGUsTik7dmFyIEU9W10sQT0wLFI9MTIsej1mdW5jdGlvbih0LGUsbil7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWUsdGhpcy5kZXB0aD1ufSxEPXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O0Quc3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uYmVmb3JlKHRoaXMuZGVwdGgrMSl9LEQuZW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5hZnRlcih0aGlzLmRlcHRoKzEpfSxELnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxELnN0YXJ0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uaW5kZXgodGhpcy5kZXB0aCl9LEQuZW5kSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHoucHJvdG90eXBlLEQpO3ZhciBJPU9iamVjdC5jcmVhdGUobnVsbCksUD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fHMuZW1wdHksdGhpcy5tYXJrcz1yfHx1Lm5vbmV9LEI9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtCLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZj8xOjIrdGhpcy5jb250ZW50LnNpemV9LEIuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnR9LFAucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LFAucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKHQpfSxQLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3RoaXMuY29udGVudC5mb3JFYWNoKHQpfSxQLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxQLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLHQpfSxCLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsIiIpfSxQLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxCLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkfSxCLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZH0sUC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LFAucHJvdG90eXBlLnNhbWVNYXJrdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTWFya3VwKHQudHlwZSx0LmF0dHJzLHQubWFya3MpfSxQLnByb3RvdHlwZS5oYXNNYXJrdXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGU9PXQmJnAodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8SSkmJnUuc2FtZVNldCh0aGlzLm1hcmtzLG58fHUubm9uZSl9LFAucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PW51bGwpLHQ9PXRoaXMuY29udGVudD90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LFAucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLmNvbnRlbnQsdCl9LFAucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxQLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5jb250ZW50LnNpemUpLHZvaWQgMD09PW4mJihuPSExKSx0PT1lKXJldHVybiBsLmVtcHR5O3ZhciByPXRoaXMucmVzb2x2ZSh0KSxvPXRoaXMucmVzb2x2ZShlKSxpPW4/MDpyLnNoYXJlZERlcHRoKGUpLHM9ci5zdGFydChpKSxhPXIubm9kZShpKSxjPWEuY29udGVudC5jdXQoci5wb3MtcyxvLnBvcy1zKTtyZXR1cm4gbmV3IGwoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sUC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHkodGhpcy5yZXNvbHZlKHQpLHRoaXMucmVzb2x2ZShlKSxuKX0sUC5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sUC5wcm90b3R5cGUuY2hpbGRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O3JldHVybntub2RlOnRoaXMuY29udGVudC5tYXliZUNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9fSxQLnByb3RvdHlwZS5jaGlsZEJlZm9yZT1mdW5jdGlvbih0KXtpZigwPT10KXJldHVybntub2RlOm51bGwsaW5kZXg6MCxvZmZzZXQ6MH07dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtpZihyPHQpcmV0dXJue25vZGU6dGhpcy5jb250ZW50LmNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9O3ZhciBvPXRoaXMuY29udGVudC5jaGlsZChuLTEpO3JldHVybntub2RlOm8saW5kZXg6bi0xLG9mZnNldDpyLW8ubm9kZVNpemV9fSxQLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmVDYWNoZWQodGhpcyx0KX0sUC5wcm90b3R5cGUucmVzb2x2ZU5vQ2FjaGU9ZnVuY3Rpb24odCl7cmV0dXJuIFQucmVzb2x2ZSh0aGlzLHQpfSxQLnByb3RvdHlwZS5yYW5nZUhhc01hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSExO3JldHVybiBlPnQmJnRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaXNJblNldCh0Lm1hcmtzKSYmKHI9ITApLCFyfSkpLHJ9LEIuaXNCbG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQmxvY2t9LEIuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sQi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudH0sQi5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lfSxCLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sQi5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0xlYWZ9LEIuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNBdG9tfSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxqKHRoaXMubWFya3MsdCl9LFAucHJvdG90eXBlLmNvbnRlbnRNYXRjaEF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsMCx0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxlZCBjb250ZW50TWF0Y2hBdCBvbiBhIG5vZGUgd2l0aCBpbnZhbGlkIGNvbnRlbnQiKTtyZXR1cm4gZX0sUC5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPXMuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIGk9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxhPWkmJmkubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWF8fCFhLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgYz1yO2M8bztjKyspaWYoIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGMpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sUC5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxQLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LFAucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LFAucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LFAuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9cy5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQLnByb3RvdHlwZSxCKTt2YXIgRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oUCk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciBfPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LCQ9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtfLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEoodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIF8uZW1wdHk7dmFyIHI9VihuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz1RKFgocikpO3JldHVybiB0dChvLG4pLG99LF8ucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxfLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sJC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LCQuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LF8ucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LF8ucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLGEpe3ZhciBjPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGMmJighZXx8Yy52YWxpZEVuZCkpcmV0dXJuIHMuZnJvbShhLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGg9MDtoPGkubmV4dC5sZW5ndGg7aCs9Mil7dmFyIHA9aS5uZXh0W2hdLHU9aS5uZXh0W2grMV07aWYoIXAuaXNUZXh0JiYhcC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YodSkpe3IucHVzaCh1KTt2YXIgZj1vKHUsYS5jb25jYXQocCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0sXy5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxfLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSwkLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sXy5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSwkKSxfLmVtcHR5PW5ldyBfKCEwKTt2YXIgSj1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sTD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gVih0KXt2YXIgZT1bXTtkb3tlLnB1c2gocSh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gcSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goVyh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPUcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9Syh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEgodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIEsodCxlKXt2YXIgbj1IKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/SCh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gRyh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1WKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVUodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gWCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgaD1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksaCksbyhpKHQuZXhwcixoKSxoKSxbcihoKV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgcD1lLHU9MDt1PHQubWluO3UrKyl7dmFyIGY9bigpO28oaSh0LmV4cHIscCksZikscD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLHApLHApO2Vsc2UgZm9yKHZhciBsPXQubWluO2w8dC5tYXg7bCsrKXt2YXIgZD1uKCk7cihwLGQpLG8oaSh0LmV4cHIscCksZCkscD1kfXJldHVybltyKHApXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWSh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChZKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gUSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBfKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoWSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHR0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIGV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBzdCh0W25dKTtyZXR1cm4gZX1MLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sSi5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEoucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEoucHJvdG90eXBlLEwpO3ZhciBvdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXJ0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWV0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxpdD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aXQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saXQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxpdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1fLmVtcHR5fSxpdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sb3QucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LG90LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LG90LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOm50KHRoaXMuYXR0cnMsdCl9LG90LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCkscy5mcm9tKGUpLHUuc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPXMuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPXMuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IFAodGhpcyx0LGUuYXBwZW5kKG8pLHUuc2V0RnJvbShuKSk6bnVsbH0sb3QucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sb3QucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOnUuZW1wdHk6dH0sb3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBvdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvdC5wcm90b3R5cGUsaXQpO3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxhdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07YXQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdC5wcm90b3R5cGUsYXQpO3ZhciBjdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9cnQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWV0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IHUodGhpcyxvKX07Y3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyB1KHRoaXMsbnQodGhpcy5hdHRycyx0KSl9LGN0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBjdCh0LHIrKyxlLG8pfSkpLG59LGN0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxjdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGN0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgaHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz1yWyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9clsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1vdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWN0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBvIGluIHRoaXMubm9kZXMpe2lmKG8gaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihvKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIGk9dGhpcy5ub2Rlc1tvXSxzPWkuc3BlYy5jb250ZW50fHwiIixhPWkuc3BlYy5tYXJrcztpLmNvbnRlbnRNYXRjaD1uW3NdfHwobltzXT1fLnBhcnNlKHMsdGhpcy5ub2RlcykpLGkuaW5saW5lQ29udGVudD1pLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LGkubWFya1NldD0iXyI9PWE/bnVsbDphP3B0KHRoaXMsYS5zcGxpdCgiICIpKToiIiE9YSYmaS5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBjIGluIHRoaXMubWFya3Mpe3ZhciBoPXRoaXMubWFya3NbY10scD1oLnNwZWMuZXhjbHVkZXM7aC5leGNsdWRlZD1udWxsPT1wP1toXToiIj09cD9bXTpwdCh0aGlzLHAuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHB0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufWh0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LGh0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgRihuLG4uZGVmYXVsdEF0dHJzLHQsdS5zZXRGcm9tKGUpKX0saHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxodC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBQLmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIHUuZnJvbUpTT04odGhpcyx0KX0saHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O3V0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSx1dC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxsLm1heE9wZW4obi5maW5pc2goKSl9LHV0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihTdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LHV0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LHV0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1DdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0sdXQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyB1dCh0LHV0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxsdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxkdD17b2w6ITAsdWw6ITB9LHZ0PTEsbXQ9Mix5dD00O2Z1bmN0aW9uIGd0KHQpe3JldHVybih0P3Z0OjApfCgiZnVsbCI9PT10P210OjApfXZhciB3dD1mdW5jdGlvbih0LGUsbixyLG8saSxzKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1vLHRoaXMubWF0Y2g9aXx8KHMmeXQ/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPXMsdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPXUubm9uZSx0aGlzLnBlbmRpbmdNYXJrcz1yfTt3dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShzLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx3dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnZ0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1zLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKHMuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9LHd0LnByb3RvdHlwZS5hcHBseVBlbmRpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBlbmRpbmdNYXJrcztlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTsodGhpcy50eXBlP3RoaXMudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpOk10KHIudHlwZSx0KSkmJiFyLmlzSW5TZXQodGhpcy5hY3RpdmVNYXJrcykmJih0aGlzLmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodGhpcy5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3M9ci5yZW1vdmVGcm9tU2V0KHRoaXMucGVuZGluZ01hcmtzKSl9fTt2YXIgeHQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bjt2YXIgcixvPWUudG9wTm9kZSxpPWd0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj95dDowKTtyPW8/bmV3IHd0KG8udHlwZSxvLmF0dHJzLHUubm9uZSx1Lm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgd3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsdS5ub25lLHUubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxidD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGt0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmR0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gT3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIEN0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBNdCh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19YnQudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LHh0LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhPdChlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSx4dC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmdnQpbi5vcHRpb25zJm10fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtkdC5oYXNPd25Qcm9wZXJ0eShlKSYma3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmx0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LHh0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LHh0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT11Lm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSxhKX0seHQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSx4dC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LHh0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO24uYXBwbHlQZW5kaW5nKHQudHlwZSksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0seHQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJnRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikscn0seHQucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5hcHBseVBlbmRpbmcodCksby5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn55dDpndChyKTtvLm9wdGlvbnMmeXQmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD15dCksdGhpcy5ub2Rlcy5wdXNoKG5ldyB3dCh0LGUsby5hY3RpdmVNYXJrcyxvLnBlbmRpbmdNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSx4dC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LHh0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSx4dC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSxidC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0seHQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHh0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LHh0LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LHh0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGg9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighaHx8aC5uYW1lIT1jJiYtMT09aC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0seHQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0seHQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMudG9wLnBlbmRpbmdNYXJrcz10LmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyl9LHh0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm9wZW47bj49MDtuLS0pe3ZhciByPXRoaXMubm9kZXNbbl0sbz1yLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihvPi0xP3IucGVuZGluZ01hcmtzPXQucmVtb3ZlRnJvbVNldChyLnBlbmRpbmdNYXJrcyk6ci5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQoci5hY3RpdmVNYXJrcykscj09ZSlicmVha319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHh0LnByb3RvdHlwZSxidCk7dmFyIFR0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBOdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEV0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9VHQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1FdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10saD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2gmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGguZG9tKSxvPWguY29udGVudERPTXx8aC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1UdC5yZW5kZXJTcGVjKEV0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj1udWxsKSwic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIHI9ZVswXSxvPXIuaW5kZXhPZigiICIpO28+MCYmKG49ci5zbGljZSgwLG8pLHI9ci5zbGljZShvKzEpKTt2YXIgaT1udWxsLHM9bj90LmNyZWF0ZUVsZW1lbnROUyhuLHIpOnQuY3JlYXRlRWxlbWVudChyKSxhPWVbMV0sYz0xO2lmKGEmJiJvYmplY3QiPT10eXBlb2YgYSYmbnVsbD09YS5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBoIGluIGM9MixhKWlmKG51bGwhPWFbaF0pe3ZhciBwPWguaW5kZXhPZigiICIpO3A+MD9zLnNldEF0dHJpYnV0ZU5TKGguc2xpY2UoMCxwKSxoLnNsaWNlKHArMSksYVtoXSk6cy5zZXRBdHRyaWJ1dGUoaCxhW2hdKX1mb3IodmFyIHU9Yzt1PGUubGVuZ3RoO3UrKyl7dmFyIGY9ZVt1XTtpZigwPT09Zil7aWYodTxlLmxlbmd0aC0xfHx1PmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206cyxjb250ZW50RE9NOnN9fXZhciBsPVR0LnJlbmRlclNwZWModCxmLG4pLGQ9bC5kb20sdj1sLmNvbnRlbnRET007aWYocy5hcHBlbmRDaGlsZChkKSx2KXtpZihpKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7aT12fX1yZXR1cm57ZG9tOnMsY29udGVudERPTTppfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfX0sIjFjN2UiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJiNjIyIiksbz1yKCJpdGVyYXRvciIpLGk9ITE7dHJ5e3ZhciBzPTAsYT17bmV4dDpmdW5jdGlvbigpe3JldHVybntkb25lOiEhcysrfX0scmV0dXJuOmZ1bmN0aW9uKCl7aT0hMH19O2Fbb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sQXJyYXkuZnJvbShhLChmdW5jdGlvbigpe3Rocm93IDJ9KSl9Y2F0Y2goYyl7fXQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFlJiYhaSlyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIHI9e307cltvXT1mdW5jdGlvbigpe3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19fX0sdChyKX1jYXRjaChjKXt9cmV0dXJuIG59fSwiMWQ4MCI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT10KXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIit0KTtyZXR1cm4gdH19LCIxZGRlIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpLG89bigiYjYyMiIpLGk9bigiMmQwMCIpLHM9bygic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaT49NTF8fCFyKChmdW5jdGlvbigpe3ZhciBlPVtdLG49ZS5jb25zdHJ1Y3Rvcj17fTtyZXR1cm4gbltzXT1mdW5jdGlvbigpe3JldHVybntmb286MX19LDEhPT1lW3RdKEJvb2xlYW4pLmZvb30pKX19LCIyM2NiIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYTY5MSIpLG89TWF0aC5tYXgsaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj1yKHQpO3JldHVybiBuPDA/byhuK2UsMCk6aShuLGUpfX0sIjIzZTciOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCIwNmNmIikuZixpPW4oIjkxMTIiKSxzPW4oIjZlZWIiKSxhPW4oImNlNGUiKSxjPW4oImU4OTMiKSxoPW4oIjk0Y2EiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbixwLHUsZixsLGQsdj10LnRhcmdldCxtPXQuZ2xvYmFsLHk9dC5zdGF0O2lmKHA9bT9yOnk/clt2XXx8YSh2LHt9KTooclt2XXx8e30pLnByb3RvdHlwZSxwKWZvcih1IGluIGUpe2lmKGw9ZVt1XSx0Lm5vVGFyZ2V0R2V0PyhkPW8ocCx1KSxmPWQmJmQudmFsdWUpOmY9cFt1XSxuPWgobT91OnYrKHk/Ii4iOiIjIikrdSx0LmZvcmNlZCksIW4mJnZvaWQgMCE9PWYpe2lmKHR5cGVvZiBsPT09dHlwZW9mIGYpY29udGludWU7YyhsLGYpfSh0LnNoYW18fGYmJmYuc2hhbSkmJmkobCwic2hhbSIsITApLHMocCx1LGwsdCl9fX0sIjI0MWMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjYTg0Iiksbz1uKCI3ODM5IiksaT1vLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7ZS5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LGkpfX0sIjI1ZjAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiNmVlYiIpLG89bigiODI1YSIpLGk9bigiZDAzOSIpLHM9bigiYWQ2ZCIpLGE9InRvU3RyaW5nIixjPVJlZ0V4cC5wcm90b3R5cGUsaD1jW2FdLHA9aSgoZnVuY3Rpb24oKXtyZXR1cm4iL2EvYiIhPWguY2FsbCh7c291cmNlOiJhIixmbGFnczoiYiJ9KX0pKSx1PWgubmFtZSE9YTsocHx8dSkmJnIoUmVnRXhwLnByb3RvdHlwZSxhLChmdW5jdGlvbigpe3ZhciB0PW8odGhpcyksZT1TdHJpbmcodC5zb3VyY2UpLG49dC5mbGFncyxyPVN0cmluZyh2b2lkIDA9PT1uJiZ0IGluc3RhbmNlb2YgUmVnRXhwJiYhKCJmbGFncyJpbiBjKT9zLmNhbGwodCk6bik7cmV0dXJuIi8iK2UrIi8iK3J9KSx7dW5zYWZlOiEwfSl9LCIyZDAwIjpmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpPW4oImRhODQiKSxzPW4oIjM0MmYiKSxhPWkucHJvY2VzcyxjPWEmJmEudmVyc2lvbnMsaD1jJiZjLnY4O2g/KHI9aC5zcGxpdCgiLiIpLG89clswXStyWzFdKTpzJiYocj1zLm1hdGNoKC9FZGdlXC8oXGQrKS8pLCghcnx8clsxXT49NzQpJiYocj1zLm1hdGNoKC9DaHJvbWVcLyhcZCspLyksciYmKG89clsxXSkpKSx0LmV4cG9ydHM9byYmK299LCIyZDFiIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOC41NTkgMy45MzJhNC45NDIgNC45NDIgMCAxMDAgOS44ODMgNC42MDkgNC42MDkgMCAwMDEuMTE1LS4xNDEuMjUuMjUgMCAwMS4yNzYuMzY4IDYuODMgNi44MyAwIDAxLTUuODc4IDMuNTIzIDEuMjUgMS4yNSAwIDAwMCAyLjUgOS43MSA5LjcxIDAgMDA5LjQyOC05Ljk1VjguODczYTQuOTQ3IDQuOTQ3IDAgMDAtNC45NDEtNC45NDF6TTYuMjM2IDMuOTMyYTQuOTQyIDQuOTQyIDAgMDAwIDkuODgzIDQuNiA0LjYgMCAwMDEuMTE1LS4xNDEuMjUuMjUgMCAwMS4yNzcuMzY4IDYuODMgNi44MyAwIDAxLTUuODc4IDMuNTIzIDEuMjUgMS4yNSAwIDAwMCAyLjUgOS43MTEgOS43MTEgMCAwMDkuNDI4LTkuOTVWOC44NzNhNC45NDcgNC45NDcgMCAwMC00Ljk0Mi00Ljk0MXoifX0pXSkpfX19LCIzMDRhIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIiwoZnVuY3Rpb24oKXtyZXR1cm4gdXR9KSksbi5kKGUsImIiLChmdW5jdGlvbigpe3JldHVybiBNdH0pKSxuLmQoZSwiYyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSksbi5kKGUsImQiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLG4uZChlLCJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSksbi5kKGUsImYiLChmdW5jdGlvbigpe3JldHVybiBQfSkpLG4uZChlLCJnIiwoZnVuY3Rpb24oKXtyZXR1cm4gen0pKSxuLmQoZSwiaCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSksbi5kKGUsImkiLChmdW5jdGlvbigpe3JldHVybiBsfSkpO3ZhciByPW4oIjEzYWQiKTtmdW5jdGlvbiBvKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBpPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKGkhPXMpe2lmKCFpLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoaS5pc1RleHQmJmkudGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtpLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKGkuY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9byhpLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1pLm5vZGVTaXplfWVsc2Ugbis9aS5ub2RlU2l6ZX19ZnVuY3Rpb24gaSh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LHM9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PXMpcmV0dXJuIG89PXM/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLXMpLGg9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgZj1pKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoZilyZXR1cm4gZn1uLT1oLHItPWh9ZWxzZSBuLT1oLHItPWh9fXZhciBzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LGE9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O3MucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciBoPXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtaCksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1oKSxuLHIraCl9cz1jfX0scy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LHMucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30scy5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBzKHIsdGhpcy5zaXplK3Quc2l6ZSl9LHMucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBhPXRoaXMuY29udGVudFtvXSxjPWkrYS5ub2RlU2l6ZTtjPnQmJigoaTx0fHxjPmUpJiYoYT1hLmlzVGV4dD9hLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxlLWkpKTphLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2goYSkscis9YS5ub2RlU2l6ZSksaT1jfXJldHVybiBuZXcgcyhuLHIpfSxzLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/cy5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IHModGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxzLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgcyhyLG8pfSxzLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LGEuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0sYS5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0sYS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxzLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0scy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSxzLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LHMucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbyh0aGlzLHQsZSl9LHMucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLGkodGhpcyx0LGUsbil9LHMucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiBoKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBoKHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP2gobisxLGkpOmgobixyKTtyPWl9fSxzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LHMucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcy5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHMoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0scy5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBzLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgcyhlfHx0LG4pfSxzLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHMuZW1wdHk7aWYodCBpbnN0YW5jZW9mIHMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IHMoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKTt2YXIgYz17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gaCh0LGUpe3JldHVybiBjLmluZGV4PXQsYy5vZmZzZXQ9ZSxjfWZ1bmN0aW9uIHAodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXAodFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IXAodFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9cy5lbXB0eT1uZXcgcyhbXSwwKTt2YXIgdT1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24gZih0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWYucHJvdG90eXBlLGV9dS5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LHUucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSx1LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LHUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmcCh0aGlzLmF0dHJzLHQuYXR0cnMpfSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sdS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sdS5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LHUuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIHUubm9uZTtpZih0IGluc3RhbmNlb2YgdSlyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LHUubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxkPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB2KHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxoPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihoIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh2KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBtKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9bShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiB5KHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gZyh0LGUsbiwwKX1mdW5jdGlvbiBnKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz1nKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1NKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIFMoaSxPKHQsYyxoLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBTKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBTKGksQyh0LGUscikpfWZ1bmN0aW9uIHcodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIHgodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gdyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBiKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gayh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihiKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspYihvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmYihlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gUyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZ4KHQsZSxvKzEpLGE9ci5kZXB0aD5vJiZ4KG4scixvKzEpLGM9W107cmV0dXJuIGsobnVsbCx0LG8sYyksaSYmYSYmZS5pbmRleChvKT09bi5pbmRleChvKT8odyhpLGEpLGIoUyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmIoUyhpLEModCxlLG8rMSkpLGMpLGsoZSxuLG8sYyksYSYmYihTKGEsQyhuLHIsbysxKSksYykpLGsocixudWxsLG8sYyksbmV3IHMoYyl9ZnVuY3Rpb24gQyh0LGUsbil7dmFyIHI9W107aWYoayhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPXgodCxlLG4rMSk7YihTKG8sQyh0LGUsbisxKSkscil9cmV0dXJuIGsoZSxudWxsLG4sciksbmV3IHMocil9ZnVuY3Rpb24gTSh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShzLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19ZC5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGwucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgbChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGwodih0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGwucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sbC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBsLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgbChzLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxsLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBsKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobC5wcm90b3R5cGUsZCksbC5lbXB0eT1uZXcgbChzLmVtcHR5LDAsMCk7dmFyIFQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sTj17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtULnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LE4ucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LE4uZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LFQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sVC5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxULnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxULnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxULnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxULnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sVC5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxOLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxOLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxOLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxULnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiB1Lm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sVC5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxULnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSxULnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyB6KHRoaXMsdCxuKX0sVC5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxULnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LFQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LFQucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IFQoZSxuLG8pfSxULnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEUubGVuZ3RoO24rKyl7dmFyIHI9RVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89RVtBXT1ULnJlc29sdmUodCxlKTtyZXR1cm4gQT0oQSsxKSVSLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFQucHJvdG90eXBlLE4pO3ZhciBFPVtdLEE9MCxSPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sRD17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtELnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxELmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sRC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sRC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxELmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxEKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLFA9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxzLmVtcHR5LHRoaXMubWFya3M9cnx8dS5ub25lfSxCPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07Qi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxCLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxQLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxQLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sUC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sUC5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sUC5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sQi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sUC5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sQi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sQi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LFAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxQLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sUC5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZwKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZ1LnNhbWVTZXQodGhpcy5tYXJrcyxufHx1Lm5vbmUpfSxQLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxQLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxQLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sUC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gbC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBsKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LFAucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB5KHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LFAucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LFAucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sUC5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sUC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gVC5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFAucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmUodGhpcyx0KX0sUC5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxCLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxCLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEIuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEIuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sQi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEIuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxCLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxQLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LFAucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj1zLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYT1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFhfHwhYS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGM9cjtjPG87YysrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChjKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFAucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sUC5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxQLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LFAucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LFAucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LFAuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9cy5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQLnByb3RvdHlwZSxCKTt2YXIgRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oUCk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciBfPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LCQ9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtfLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEoodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIF8uZW1wdHk7dmFyIHI9VihuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz1RKFgocikpO3JldHVybiB0dChvLG4pLG99LF8ucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxfLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sJC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LCQuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LF8ucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LF8ucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLGEpe3ZhciBjPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGMmJighZXx8Yy52YWxpZEVuZCkpcmV0dXJuIHMuZnJvbShhLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGg9MDtoPGkubmV4dC5sZW5ndGg7aCs9Mil7dmFyIHA9aS5uZXh0W2hdLHU9aS5uZXh0W2grMV07aWYoIXAuaXNUZXh0JiYhcC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YodSkpe3IucHVzaCh1KTt2YXIgZj1vKHUsYS5jb25jYXQocCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0sXy5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxfLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSwkLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sXy5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSwkKSxfLmVtcHR5PW5ldyBfKCEwKTt2YXIgSj1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sTD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gVih0KXt2YXIgZT1bXTtkb3tlLnB1c2gocSh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gcSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goVyh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPUcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9Syh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEgodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIEsodCxlKXt2YXIgbj1IKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/SCh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gRyh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1WKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVUodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gWCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgaD1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksaCksbyhpKHQuZXhwcixoKSxoKSxbcihoKV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgcD1lLHU9MDt1PHQubWluO3UrKyl7dmFyIGY9bigpO28oaSh0LmV4cHIscCksZikscD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLHApLHApO2Vsc2UgZm9yKHZhciBsPXQubWluO2w8dC5tYXg7bCsrKXt2YXIgZD1uKCk7cihwLGQpLG8oaSh0LmV4cHIscCksZCkscD1kfXJldHVybltyKHApXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWSh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChZKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gUSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBfKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoWSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHR0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIGV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBzdCh0W25dKTtyZXR1cm4gZX1MLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sSi5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEoucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEoucHJvdG90eXBlLEwpO3ZhciBvdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXJ0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWV0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxpdD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aXQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saXQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxpdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1fLmVtcHR5fSxpdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sb3QucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1tlXS5pc1JlcXVpcmVkJiYoIXR8fCEoZSBpbiB0KSkpcmV0dXJuITA7cmV0dXJuITF9LG90LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LG90LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOm50KHRoaXMuYXR0cnMsdCl9LG90LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCkscy5mcm9tKGUpLHUuc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPXMuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPXMuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IFAodGhpcyx0LGUuYXBwZW5kKG8pLHUuc2V0RnJvbShuKSk6bnVsbH0sb3QucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sb3QucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOnUuZW1wdHk6dH0sb3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBvdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvdC5wcm90b3R5cGUsaXQpO3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxhdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07YXQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdC5wcm90b3R5cGUsYXQpO3ZhciBjdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9cnQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWV0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IHUodGhpcyxvKX07Y3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyB1KHRoaXMsbnQodGhpcy5hdHRycyx0KSl9LGN0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBjdCh0LHIrKyxlLG8pfSkpLG59LGN0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxjdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGN0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgaHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz1yWyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9clsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1vdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWN0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBvIGluIHRoaXMubm9kZXMpe2lmKG8gaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihvKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIGk9dGhpcy5ub2Rlc1tvXSxzPWkuc3BlYy5jb250ZW50fHwiIixhPWkuc3BlYy5tYXJrcztpLmNvbnRlbnRNYXRjaD1uW3NdfHwobltzXT1fLnBhcnNlKHMsdGhpcy5ub2RlcykpLGkuaW5saW5lQ29udGVudD1pLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LGkubWFya1NldD0iXyI9PWE/bnVsbDphP3B0KHRoaXMsYS5zcGxpdCgiICIpKToiIiE9YSYmaS5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBjIGluIHRoaXMubWFya3Mpe3ZhciBoPXRoaXMubWFya3NbY10scD1oLnNwZWMuZXhjbHVkZXM7aC5leGNsdWRlZD1udWxsPT1wP1toXToiIj09cD9bXTpwdCh0aGlzLHAuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHB0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufWh0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LGh0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgRihuLG4uZGVmYXVsdEF0dHJzLHQsdS5zZXRGcm9tKGUpKX0saHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxodC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBQLmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIHUuZnJvbUpTT04odGhpcyx0KX0saHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O3V0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSx1dC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxsLm1heE9wZW4obi5maW5pc2goKSl9LHV0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihTdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LHV0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LHV0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1DdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0sdXQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyB1dCh0LHV0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxsdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxkdD17b2w6ITAsdWw6ITB9LHZ0PTEsbXQ9Mix5dD00O2Z1bmN0aW9uIGd0KHQpe3JldHVybih0P3Z0OjApfCgiZnVsbCI9PT10P210OjApfXZhciB3dD1mdW5jdGlvbih0LGUsbixyLG8saSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9cix0aGlzLm1hdGNoPW98fChpJnl0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1pLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz11Lm5vbmV9O3d0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHMuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHd0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmdnQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPXMuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUocy5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIHh0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT1ndChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/eXQ6MCk7cj1vP25ldyB3dChvLnR5cGUsby5hdHRycyx1Lm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgd3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsdS5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGJ0PXt0b3A6e2NvbmZpZ3VyYWJsZTohMH0sY3VycmVudFBvczp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24ga3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmZHQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gU3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQ3QodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWJ0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSx4dC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLG49ZT90aGlzLnJlYWRTdHlsZXMoT3QoZSkpOm51bGw7aWYobnVsbCE9bilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKyl0aGlzLmFkZFBlbmRpbmdNYXJrKG5bcl0pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1uKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXRoaXMucmVtb3ZlUGVuZGluZ01hcmsobltvXSl9fSx4dC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmdnQpbi5vcHRpb25zJm10fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtkdC5oYXNPd25Qcm9wZXJ0eShlKSYma3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmx0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LHh0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LHh0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT11Lm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LHh0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmZnQuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0seHQucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSx4dC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LHh0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGVuZGluZ01hcmtzW2VdO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShuLnR5cGUpfHxuLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPW4uYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUtLSwxKSl9fSx4dC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LHh0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+eXQ6Z3Qocik7by5vcHRpb25zJnl0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9eXQpLHRoaXMubm9kZXMucHVzaChuZXcgd3QodCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30seHQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0seHQucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0seHQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LHh0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxidC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0seHQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHh0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LHh0LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LHh0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGg9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighaHx8aC5uYW1lIT1jJiYtMT09aC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0seHQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeHQucHJvdG90eXBlLGJ0KTt2YXIgTXQ9ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGVzPXR8fHt9LHRoaXMubWFya3M9ZXx8e319O2Z1bmN0aW9uIFR0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dLnNwZWMudG9ET007ciYmKGVbbl09cil9cmV0dXJuIGV9ZnVuY3Rpb24gTnQodCl7cmV0dXJuIHQuZG9jdW1lbnR8fHdpbmRvdy5kb2N1bWVudH1NdC5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPU50KGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSxoPXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7aCYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQoaC5kb20pLG89aC5jb250ZW50RE9NfHxoLmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LE10LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPU10LnJlbmRlclNwZWMoTnQoZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LE10LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSxNdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZNdC5yZW5kZXJTcGVjKE50KG4pLHIodCxlKSl9LE10LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgaD1NdC5yZW5kZXJTcGVjKHQsYykscD1oLmRvbSx1PWguY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSxNdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgTXQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sTXQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPVR0KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LE10Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gVHQodC5tYXJrcyl9fSwiMzQyZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImQwNjYiKTt0LmV4cG9ydHM9cigibmF2aWdhdG9yIiwidXNlckFnZW50Iil8fCIifSwiMzVhMSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImY1ZGYiKSxvPW4oIjNmOGMiKSxpPW4oImI2MjIiKSxzPWkoIml0ZXJhdG9yIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtzXXx8dFsiQEBpdGVyYXRvciJdfHxvW3IodCldfX0sIjM2YzciOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5yKGUpLG4uZChlLCJDb250ZW50TWF0Y2giLChmdW5jdGlvbigpe3JldHVybiBffSkpLG4uZChlLCJET01QYXJzZXIiLChmdW5jdGlvbigpe3JldHVybiB1dH0pKSxuLmQoZSwiRE9NU2VyaWFsaXplciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFR0fSkpLG4uZChlLCJGcmFnbWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSksbi5kKGUsIk1hcmsiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLG4uZChlLCJNYXJrVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN0fSkpLG4uZChlLCJOb2RlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxuLmQoZSwiTm9kZVJhbmdlIiwoZnVuY3Rpb24oKXtyZXR1cm4gen0pKSxuLmQoZSwiTm9kZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiBvdH0pKSxuLmQoZSwiUmVwbGFjZUVycm9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gZn0pKSxuLmQoZSwiUmVzb2x2ZWRQb3MiLChmdW5jdGlvbigpe3JldHVybiBUfSkpLG4uZChlLCJTY2hlbWEiLChmdW5jdGlvbigpe3JldHVybiBodH0pKSxuLmQoZSwiU2xpY2UiLChmdW5jdGlvbigpe3JldHVybiBsfSkpO3ZhciByPW4oIjEzYWQiKTtmdW5jdGlvbiBvKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBpPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKGkhPXMpe2lmKCFpLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoaS5pc1RleHQmJmkudGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtpLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKGkuY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9byhpLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1pLm5vZGVTaXplfWVsc2Ugbis9aS5ub2RlU2l6ZX19ZnVuY3Rpb24gaSh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LHM9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PXMpcmV0dXJuIG89PXM/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLXMpLGg9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgZj1pKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoZilyZXR1cm4gZn1uLT1oLHItPWh9ZWxzZSBuLT1oLHItPWh9fXZhciBzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LGE9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O3MucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciBoPXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtaCksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1oKSxuLHIraCl9cz1jfX0scy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LHMucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30scy5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBzKHIsdGhpcy5zaXplK3Quc2l6ZSl9LHMucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBhPXRoaXMuY29udGVudFtvXSxjPWkrYS5ub2RlU2l6ZTtjPnQmJigoaTx0fHxjPmUpJiYoYT1hLmlzVGV4dD9hLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxlLWkpKTphLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2goYSkscis9YS5ub2RlU2l6ZSksaT1jfXJldHVybiBuZXcgcyhuLHIpfSxzLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/cy5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IHModGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxzLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgcyhyLG8pfSxzLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LGEuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0sYS5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0sYS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxzLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0scy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSxzLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LHMucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbyh0aGlzLHQsZSl9LHMucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLGkodGhpcyx0LGUsbil9LHMucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiBoKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBoKHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP2gobisxLGkpOmgobixyKTtyPWl9fSxzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LHMucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcy5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHMoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0scy5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBzLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgcyhlfHx0LG4pfSxzLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHMuZW1wdHk7aWYodCBpbnN0YW5jZW9mIHMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IHMoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKTt2YXIgYz17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gaCh0LGUpe3JldHVybiBjLmluZGV4PXQsYy5vZmZzZXQ9ZSxjfWZ1bmN0aW9uIHAodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXAodFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IXAodFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9cy5lbXB0eT1uZXcgcyhbXSwwKTt2YXIgdT1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24gZih0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWYucHJvdG90eXBlLGV9dS5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LHUucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSx1LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LHUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmcCh0aGlzLmF0dHJzLHQuYXR0cnMpfSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sdS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sdS5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LHUuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIHUubm9uZTtpZih0IGluc3RhbmNlb2YgdSlyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LHUubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxkPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB2KHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxoPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihoIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh2KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBtKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9bShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiB5KHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gZyh0LGUsbiwwKX1mdW5jdGlvbiBnKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz1nKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1NKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIFMoaSxPKHQsYyxoLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBTKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBTKGksQyh0LGUscikpfWZ1bmN0aW9uIHcodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIHgodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gdyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBiKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gayh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihiKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspYihvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmYihlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gUyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZ4KHQsZSxvKzEpLGE9ci5kZXB0aD5vJiZ4KG4scixvKzEpLGM9W107cmV0dXJuIGsobnVsbCx0LG8sYyksaSYmYSYmZS5pbmRleChvKT09bi5pbmRleChvKT8odyhpLGEpLGIoUyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmIoUyhpLEModCxlLG8rMSkpLGMpLGsoZSxuLG8sYyksYSYmYihTKGEsQyhuLHIsbysxKSksYykpLGsocixudWxsLG8sYyksbmV3IHMoYyl9ZnVuY3Rpb24gQyh0LGUsbil7dmFyIHI9W107aWYoayhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPXgodCxlLG4rMSk7YihTKG8sQyh0LGUsbisxKSkscil9cmV0dXJuIGsoZSxudWxsLG4sciksbmV3IHMocil9ZnVuY3Rpb24gTSh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShzLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19ZC5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGwucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgbChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGwodih0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGwucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sbC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBsLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgbChzLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxsLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBsKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobC5wcm90b3R5cGUsZCksbC5lbXB0eT1uZXcgbChzLmVtcHR5LDAsMCk7dmFyIFQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sTj17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtULnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LE4ucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LE4uZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LFQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sVC5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxULnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxULnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxULnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxULnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sVC5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxOLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxOLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxOLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxULnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiB1Lm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sVC5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxULnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSxULnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyB6KHRoaXMsdCxuKX0sVC5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxULnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LFQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LFQucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IFQoZSxuLG8pfSxULnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEUubGVuZ3RoO24rKyl7dmFyIHI9RVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89RVtBXT1ULnJlc29sdmUodCxlKTtyZXR1cm4gQT0oQSsxKSVSLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFQucHJvdG90eXBlLE4pO3ZhciBFPVtdLEE9MCxSPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sRD17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtELnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxELmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sRC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sRC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxELmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxEKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLFA9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxzLmVtcHR5LHRoaXMubWFya3M9cnx8dS5ub25lfSxCPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07Qi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxCLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxQLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxQLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sUC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sUC5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sUC5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sQi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sUC5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sQi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sQi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LFAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxQLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sUC5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZwKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZ1LnNhbWVTZXQodGhpcy5tYXJrcyxufHx1Lm5vbmUpfSxQLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxQLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxQLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sUC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gbC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBsKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LFAucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB5KHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LFAucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LFAucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sUC5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sUC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gVC5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFAucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmUodGhpcyx0KX0sUC5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxCLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxCLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEIuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEIuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sQi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEIuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxCLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxQLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LFAucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj1zLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYT1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFhfHwhYS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGM9cjtjPG87YysrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChjKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFAucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sUC5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxQLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxQLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSxQLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPXMuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUC5wcm90b3R5cGUsQik7dmFyIEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFApO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgXz1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSwkPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07Xy5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBKKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiBfLmVtcHR5O3ZhciByPVYobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89UShYKHIpKTtyZXR1cm4gdHQobyxuKSxvfSxfLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sXy5wcm90b3R5cGUubWF0Y2hGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dC5jaGlsZENvdW50KTtmb3IodmFyIHI9dGhpcyxvPWU7ciYmbzxuO28rKylyPXIubWF0Y2hUeXBlKHQuY2hpbGQobykudHlwZSk7cmV0dXJuIHJ9LCQuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5leHRbMF07cmV0dXJuISF0JiZ0LmlzSW5saW5lfSwkLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxfLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWZvcih2YXIgbj0wO248dC5uZXh0Lmxlbmd0aDtuKz0yKWlmKHRoaXMubmV4dFtlXT09dC5uZXh0W25dKXJldHVybiEwO3JldHVybiExfSxfLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxhKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBzLmZyb20oYS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBoPTA7aDxpLm5leHQubGVuZ3RoO2grPTIpe3ZhciBwPWkubmV4dFtoXSx1PWkubmV4dFtoKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGY9byh1LGEuY29uY2F0KHApKTtpZihmKXJldHVybiBmfX19cmV0dXJuIG8odGhpcyxbXSl9LF8ucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMud3JhcENhY2hlLmxlbmd0aDtlKz0yKWlmKHRoaXMud3JhcENhY2hlW2VdPT10KXJldHVybiB0aGlzLndyYXBDYWNoZVtlKzFdO3ZhciBuPXRoaXMuY29tcHV0ZVdyYXBwaW5nKHQpO3JldHVybiB0aGlzLndyYXBDYWNoZS5wdXNoKHQsbiksbn0sXy5wcm90b3R5cGUuY29tcHV0ZVdyYXBwaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCksbj1be21hdGNoOnRoaXMsdHlwZTpudWxsLHZpYTpudWxsfV07d2hpbGUobi5sZW5ndGgpe3ZhciByPW4uc2hpZnQoKSxvPXIubWF0Y2g7aWYoby5tYXRjaFR5cGUodCkpe2Zvcih2YXIgaT1bXSxzPXI7cy50eXBlO3M9cy52aWEpaS5wdXNoKHMudHlwZSk7cmV0dXJuIGkucmV2ZXJzZSgpfWZvcih2YXIgYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV07Yy5pc0xlYWZ8fGMuaGFzUmVxdWlyZWRBdHRycygpfHxjLm5hbWUgaW4gZXx8ci50eXBlJiYhby5uZXh0W2ErMV0udmFsaWRFbmR8fChuLnB1c2goe21hdGNoOmMuY29udGVudE1hdGNoLHR5cGU6Yyx2aWE6cn0pLGVbYy5uYW1lXT0hMCl9fX0sJC5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LF8ucHJvdG90eXBlLmVkZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dDw8MTtpZihlPj10aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsJCksXy5lbXB0eT1uZXcgXyghMCk7dmFyIEo9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEw9e25leHQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFYodCl7dmFyIGU9W107ZG97ZS5wdXNoKHEodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBXKHQpe2Zvcih2YXIgZT1HKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPUsodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBIKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBLKHQsZSl7dmFyIG49SCh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0godCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIEcodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9Vih0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1VKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFgodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFkodCxlKXtyZXR1cm4gZS10fWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoWSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIFEodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gbihaKHQsMCkpO2Z1bmN0aW9uIG4ocil7dmFyIG89W107ci5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGVybSxyPWUudG87aWYobil7dmFyIGk9by5pbmRleE9mKG4pLHM9aT4tMSYmb1tpKzFdO1oodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgXyhyLmluZGV4T2YodC5sZW5ndGgtMSk+LTEpLHM9MDtzPG8ubGVuZ3RoO3MrPTIpe3ZhciBhPW9bcysxXS5zb3J0KFkpO2kubmV4dC5wdXNoKG9bc10sZVthLmpvaW4oIiwiKV18fG4oYSkpfXJldHVybiBpfX1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgbj0wLHI9W3RdO248ci5sZW5ndGg7bisrKXtmb3IodmFyIG89cltuXSxpPSFvLnZhbGlkRW5kLHM9W10sYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV0saD1vLm5leHRbYSsxXTtzLnB1c2goYy5uYW1lKSwhaXx8Yy5pc1RleHR8fGMuaGFzUmVxdWlyZWRBdHRycygpfHwoaT0hMSksLTE9PXIuaW5kZXhPZihoKSYmci5wdXNoKGgpfWkmJmUuZXJyKCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoIitzLmpvaW4oIiwgIikrIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiIpfX1mdW5jdGlvbiBldCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKCFyLmhhc0RlZmF1bHQpcmV0dXJuIG51bGw7ZVtuXT1yLmRlZmF1bHR9cmV0dXJuIGV9ZnVuY3Rpb24gbnQodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0KXt2YXIgbz1lJiZlW3JdO2lmKHZvaWQgMD09PW8pe3ZhciBpPXRbcl07aWYoIWkuaGFzRGVmYXVsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSAiK3IpO289aS5kZWZhdWx0fW5bcl09b31yZXR1cm4gbn1mdW5jdGlvbiBydCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQpZm9yKHZhciBuIGluIHQpZVtuXT1uZXcgc3QodFtuXSk7cmV0dXJuIGV9TC5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LEoucHJvdG90eXBlLmVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0PT10JiYodGhpcy5wb3MrK3x8ITApfSxKLnByb3RvdHlwZS5lcnI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKHQrIiAoaW4gY29udGVudCBleHByZXNzaW9uICciK3RoaXMuc3RyaW5nKyInKSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhKLnByb3RvdHlwZSxMKTt2YXIgb3Q9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPWUsdGhpcy5zcGVjPW4sdGhpcy5ncm91cHM9bi5ncm91cD9uLmdyb3VwLnNwbGl0KCIgIik6W10sdGhpcy5hdHRycz1ydChuLmF0dHJzKSx0aGlzLmRlZmF1bHRBdHRycz1ldCh0aGlzLmF0dHJzKSx0aGlzLmNvbnRlbnRNYXRjaD1udWxsLHRoaXMubWFya1NldD1udWxsLHRoaXMuaW5saW5lQ29udGVudD1udWxsLHRoaXMuaXNCbG9jaz0hKG4uaW5saW5lfHwidGV4dCI9PXQpLHRoaXMuaXNUZXh0PSJ0ZXh0Ij09dH0saXQ9e2lzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O2l0LmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzQmxvY2t9LGl0LmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQmxvY2smJnRoaXMuaW5saW5lQ29udGVudH0saXQuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaD09Xy5lbXB0eX0saXQuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZnx8dGhpcy5zcGVjLmF0b219LG90LnByb3RvdHlwZS5oYXNSZXF1aXJlZEF0dHJzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1t0XS5pc1JlcXVpcmVkKXJldHVybiEwO3JldHVybiExfSxvdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxvdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpudCh0aGlzLmF0dHJzLHQpfSxvdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLHMuZnJvbShlKSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1zLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsdS5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1zLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKHMuZW1wdHksITApO3JldHVybiBvP25ldyBQKHRoaXMsdCxlLmFwcGVuZChvKSx1LnNldEZyb20obikpOm51bGx9LG90LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTp1LmVtcHR5OnR9LG90LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgb3QodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob3QucHJvdG90eXBlLGl0KTt2YXIgc3Q9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sYXQ9e2lzUmVxdWlyZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2F0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3QucHJvdG90eXBlLGF0KTt2YXIgY3Q9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPXJ0KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1ldCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyB1KHRoaXMsbyl9O2N0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgdSh0aGlzLG50KHRoaXMuYXR0cnMsdCkpfSxjdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgY3QodCxyKyssZSxvKX0pKSxufSxjdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sY3QucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxjdC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIGh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9clsiYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPXJbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9b3QuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1jdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbyBpbiB0aGlzLm5vZGVzKXtpZihvIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IobysiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBpPXRoaXMubm9kZXNbb10scz1pLnNwZWMuY29udGVudHx8IiIsYT1pLnNwZWMubWFya3M7aS5jb250ZW50TWF0Y2g9bltzXXx8KG5bc109Xy5wYXJzZShzLHRoaXMubm9kZXMpKSxpLmlubGluZUNvbnRlbnQ9aS5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxpLm1hcmtTZXQ9Il8iPT1hP251bGw6YT9wdCh0aGlzLGEuc3BsaXQoIiAiKSk6IiIhPWEmJmkuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgYyBpbiB0aGlzLm1hcmtzKXt2YXIgaD10aGlzLm1hcmtzW2NdLHA9aC5zcGVjLmV4Y2x1ZGVzO2guZXhjbHVkZWQ9bnVsbD09cD9baF06IiI9PXA/W106cHQodGhpcyxwLnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiBwdCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1odC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2Ygb3QpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxodC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEYobixuLmRlZmF1bHRBdHRycyx0LHUuc2V0RnJvbShlKSl9LGh0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0saHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gUC5mcm9tSlNPTih0aGlzLHQpfSxodC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiB1LmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIHV0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTt1dC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0sdXQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbC5tYXhPcGVuKG4uZmluaXNoKCkpfSx1dC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoU3QodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSx1dC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSx1dC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUN0KHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LHV0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgdXQodCx1dC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sbHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sZHQ9e29sOiEwLHVsOiEwfSx2dD0xLG10PTIseXQ9NDtmdW5jdGlvbiBndCh0KXtyZXR1cm4odD92dDowKXwoImZ1bGwiPT09dD9tdDowKX12YXIgd3Q9ZnVuY3Rpb24odCxlLG4scixvLGkscyl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9byx0aGlzLm1hdGNoPWl8fChzJnl0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1zLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz11Lm5vbmUsdGhpcy5wZW5kaW5nTWFya3M9cn07d3QucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUocy5mcm9tKHQpKTtpZighZSl7dmFyIG4scj10aGlzLnR5cGUuY29udGVudE1hdGNoO3JldHVybihuPXIuZmluZFdyYXBwaW5nKHQudHlwZSkpPyh0aGlzLm1hdGNoPXIsbik6bnVsbH10aGlzLm1hdGNoPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKX1yZXR1cm4gdGhpcy5tYXRjaC5maW5kV3JhcHBpbmcodC50eXBlKX0sd3QucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbih0KXtpZighKHRoaXMub3B0aW9ucyZ2dCkpe3ZhciBlLG49dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV07biYmbi5pc1RleHQmJihlPS9bIFx0XHJcblx1MDAwY10rJC8uZXhlYyhuLnRleHQpKSYmKG4udGV4dC5sZW5ndGg9PWVbMF0ubGVuZ3RoP3RoaXMuY29udGVudC5wb3AoKTp0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXT1uLndpdGhUZXh0KG4udGV4dC5zbGljZSgwLG4udGV4dC5sZW5ndGgtZVswXS5sZW5ndGgpKSl9dmFyIHI9cy5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShzLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfSx3dC5wcm90b3R5cGUuYXBwbHlQZW5kaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5wZW5kaW5nTWFya3M7ZTxuLmxlbmd0aDtlKyspe3ZhciByPW5bZV07KHRoaXMudHlwZT90aGlzLnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKTpNdChyLnR5cGUsdCkpJiYhci5pc0luU2V0KHRoaXMuYWN0aXZlTWFya3MpJiYodGhpcy5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHRoaXMuYWN0aXZlTWFya3MpLHRoaXMucGVuZGluZ01hcmtzPXIucmVtb3ZlRnJvbVNldCh0aGlzLnBlbmRpbmdNYXJrcykpfX07dmFyIHh0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW47dmFyIHIsbz1lLnRvcE5vZGUsaT1ndChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/eXQ6MCk7cj1vP25ldyB3dChvLnR5cGUsby5hdHRycyx1Lm5vbmUsdS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IHd0KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLHUubm9uZSx1Lm5vbmUsITAsbnVsbCxpKSx0aGlzLm5vZGVzPVtyXSx0aGlzLm9wZW49MCx0aGlzLmZpbmQ9ZS5maW5kUG9zaXRpb25zLHRoaXMubmVlZHNCbG9jaz0hMX0sYnQ9e3RvcDp7Y29uZmlndXJhYmxlOiEwfSxjdXJyZW50UG9zOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBrdCh0KXtmb3IodmFyIGU9dC5maXJzdENoaWxkLG49bnVsbDtlO2U9ZS5uZXh0U2libGluZyl7dmFyIHI9MT09ZS5ub2RlVHlwZT9lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtyJiZkdC5oYXNPd25Qcm9wZXJ0eShyKSYmbj8obi5hcHBlbmRDaGlsZChlKSxlPW4pOiJsaSI9PXI/bj1lOnImJihuPW51bGwpfX1mdW5jdGlvbiBTdCh0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQubXNNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfWZ1bmN0aW9uIE90KHQpe3ZhciBlLG49L1xzKihbXHctXSspXHMqOlxzKihbXjtdKykvZyxyPVtdO3doaWxlKGU9bi5leGVjKHQpKXIucHVzaChlWzFdLGVbMl0udHJpbSgpKTtyZXR1cm4gcn1mdW5jdGlvbiBDdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gTXQodCxlKXt2YXIgbj1lLnNjaGVtYS5ub2RlcyxyPWZ1bmN0aW9uKHIpe3ZhciBvPW5bcl07aWYoby5hbGxvd3NNYXJrVHlwZSh0KSl7dmFyIGk9W10scz1mdW5jdGlvbih0KXtpLnB1c2godCk7Zm9yKHZhciBuPTA7bjx0LmVkZ2VDb3VudDtuKyspe3ZhciByPXQuZWRnZShuKSxvPXIudHlwZSxhPXIubmV4dDtpZihvPT1lKXJldHVybiEwO2lmKGkuaW5kZXhPZihhKTwwJiZzKGEpKXJldHVybiEwfX07cmV0dXJuIHMoby5jb250ZW50TWF0Y2gpP3t2OiEwfTp2b2lkIDB9fTtmb3IodmFyIG8gaW4gbil7dmFyIGk9cihvKTtpZihpKXJldHVybiBpLnZ9fWJ0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSx4dC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLG49ZT90aGlzLnJlYWRTdHlsZXMoT3QoZSkpOm51bGwscj10aGlzLnRvcDtpZihudWxsIT1uKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXRoaXMuYWRkUGVuZGluZ01hcmsobltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPW4pZm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhuW2ldLHIpfX0seHQucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJnZ0KW4ub3B0aW9ucyZtdHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ZHQuaGFzT3duUHJvcGVydHkoZSkmJmt0KHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpsdC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZihmdC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSx4dC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSx4dC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dS5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGksYSl9LHh0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmZnQuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0seHQucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSx4dC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDtuLmFwcGx5UGVuZGluZyh0LnR5cGUpLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LHh0LnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiZ0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pLHJ9LHh0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28uYXBwbHlQZW5kaW5nKHQpLG8ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+eXQ6Z3Qocik7by5vcHRpb25zJnl0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9eXQpLHRoaXMubm9kZXMucHVzaChuZXcgd3QodCxlLG8uYWN0aXZlTWFya3Msby5wZW5kaW5nTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30seHQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0seHQucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0sYnQuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LHh0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0seHQucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSx4dC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSx4dC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBoPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWh8fGgubmFtZSE9YyYmLTE9PWguZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LHh0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LHh0LnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnRvcC5wZW5kaW5nTWFya3M9dC5hZGRUb1NldCh0aGlzLnRvcC5wZW5kaW5nTWFya3MpfSx4dC5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5vcGVuO24+PTA7bi0tKXt2YXIgcj10aGlzLm5vZGVzW25dLG89ci5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYobz4tMT9yLnBlbmRpbmdNYXJrcz10LnJlbW92ZUZyb21TZXQoci5wZW5kaW5nTWFya3MpOnIuYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIuYWN0aXZlTWFya3MpLHI9PWUpYnJlYWt9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh4dC5wcm90b3R5cGUsYnQpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LFR0LnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJlR0LnJlbmRlclNwZWMoRXQobikscih0LGUpKX0sVHQucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49bnVsbCksInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciByPWVbMF0sbz1yLmluZGV4T2YoIiAiKTtvPjAmJihuPXIuc2xpY2UoMCxvKSxyPXIuc2xpY2UobysxKSk7dmFyIGk9bnVsbCxzPW4/dC5jcmVhdGVFbGVtZW50TlMobixyKTp0LmNyZWF0ZUVsZW1lbnQociksYT1lWzFdLGM9MTtpZihhJiYib2JqZWN0Ij09dHlwZW9mIGEmJm51bGw9PWEubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KGEpKWZvcih2YXIgaCBpbiBjPTIsYSlpZihudWxsIT1hW2hdKXt2YXIgcD1oLmluZGV4T2YoIiAiKTtwPjA/cy5zZXRBdHRyaWJ1dGVOUyhoLnNsaWNlKDAscCksaC5zbGljZShwKzEpLGFbaF0pOnMuc2V0QXR0cmlidXRlKGgsYVtoXSl9Zm9yKHZhciB1PWM7dTxlLmxlbmd0aDt1Kyspe3ZhciBmPWVbdV07aWYoMD09PWYpe2lmKHU8ZS5sZW5ndGgtMXx8dT5jKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOnMsY29udGVudERPTTpzfX12YXIgbD1UdC5yZW5kZXJTcGVjKHQsZixuKSxkPWwuZG9tLHY9bC5jb250ZW50RE9NO2lmKHMuYXBwZW5kQ2hpbGQoZCksdil7aWYoaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO2k9dn19cmV0dXJue2RvbTpzLGNvbnRlbnRET006aX19LFR0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyBUdCh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSxUdC5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9TnQodC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0sVHQubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBOdCh0Lm1hcmtzKX19LCIzN2U4IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiOWJmMiIpLGk9bigiODI1YSIpLHM9bigiZGY3NSIpO3QuZXhwb3J0cz1yP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7aSh0KTt2YXIgbixyPXMoZSksYT1yLmxlbmd0aCxjPTA7d2hpbGUoYT5jKW8uZih0LG49cltjKytdLGVbbl0pO3JldHVybiB0fX0sMzkyMjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMSAwSDNhMyAzIDAgMDAtMyAzdjE4YTMgMyAwIDAwMyAzaDE4YTMgMyAwIDAwMy0zVjNhMyAzIDAgMDAtMy0zem0xIDIxYTEgMSAwIDAxLTEgMUgzYTEgMSAwIDAxLTEtMVYzYTEgMSAwIDAxMS0xaDE4YTEgMSAwIDAxMSAxeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMTEuMjQ5IDQuNWExLjI1MSAxLjI1MSAwIDAwLTEuNzUuMjVMNy4zNjUgNy42bC0uNDgyLS40ODFhMS4yNSAxLjI1IDAgMDAtMS43NjcgMS43NjRsMS41IDEuNWExLjI2MiAxLjI2MiAwIDAwMS44ODQtLjEzNGwzLTRhMS4yNSAxLjI1IDAgMDAtLjI1MS0xLjc0OXpNMTEuMjQ5IDEzLjVhMS4yNTEgMS4yNTEgMCAwMC0xLjc1LjI1TDcuMzY1IDE2LjZsLS40ODItLjQ4MWExLjI1IDEuMjUgMCAxMC0xLjc2NyAxLjc2OGwxLjUgMS41YTEuMjY1IDEuMjY1IDAgMDAxLjg4NC0uMTM4bDMtNGExLjI1IDEuMjUgMCAwMC0uMjUxLTEuNzQ5ek0xOC41IDcuNzQ5SDE0YTEuMjUgMS4yNSAwIDAwMCAyLjVoNC41YTEuMjUgMS4yNSAwIDAwMC0yLjV6TTE4LjUgMTUuNzQ5SDE0YTEuMjUgMS4yNSAwIDAwMCAyLjVoNC41YTEuMjUgMS4yNSAwIDEwMC0yLjV6In19KV0pKX19fSwiM2JiZSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjg2MWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIXIodCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcigiQ2FuJ3Qgc2V0ICIrU3RyaW5nKHQpKyIgYXMgYSBwcm90b3R5cGUiKTtyZXR1cm4gdH19LCIzY2EzIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjY1NDciKS5jaGFyQXQsbz1uKCI2OWYzIiksaT1uKCI3ZGQwIikscz0iU3RyaW5nIEl0ZXJhdG9yIixhPW8uc2V0LGM9by5nZXR0ZXJGb3Iocyk7aShTdHJpbmcsIlN0cmluZyIsKGZ1bmN0aW9uKHQpe2EodGhpcyx7dHlwZTpzLHN0cmluZzpTdHJpbmcodCksaW5kZXg6MH0pfSksKGZ1bmN0aW9uKCl7dmFyIHQsZT1jKHRoaXMpLG49ZS5zdHJpbmcsbz1lLmluZGV4O3JldHVybiBvPj1uLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PXIobixvKSxlLmluZGV4Kz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KSl9LCIzY2U0IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImQyYTIiKSxvPW4oIjA3M2UiKTtmdW5jdGlvbiBpKCl7fWkucHJvdG90eXBlPXI7dmFyIHM9bmV3IGk7dC5leHBvcnRzPXMscy5oaWdobGlnaHQ9UyxzLmhpZ2hsaWdodEF1dG89ayxzLnJlZ2lzdGVyTGFuZ3VhZ2U9TyxzLmxpc3RMYW5ndWFnZXM9QyxzLnJlZ2lzdGVyQWxpYXM9TSxzLmdldExhbmd1YWdlPVA7dmFyIGE9ci5pbmhlcml0LGM9e30uaGFzT3duUHJvcGVydHksaD0iaGxqcy0iLHA9ImNhc2VfaW5zZW5zaXRpdmUiLHU9ImNhY2hlZF92YXJpYW50cyIsZj0idGVybWluYXRvcl9lbmQiLGw9IiAiLGQ9InwiLHY9IigiLG09IikiLHk9IlxcIixnPVsib2YiLCJhbmQiLCJmb3IiLCJpbiIsIm5vdCIsIm9yIiwiaWYiLCJ0aGVuIl0sdz1bXSx4PXt9LGI9e307ZnVuY3Rpb24gayh0LGUpe3ZhciBuLHIsaSxzLGE9ZXx8e30sYz1hLnN1YnNldHx8dyxwPWEucHJlZml4LHU9Yy5sZW5ndGgsZj0tMTtpZihudWxsIT09cCYmdm9pZCAwIT09cHx8KHA9aCksInN0cmluZyIhPT10eXBlb2YgdCl0aHJvdyBvKCJFeHBlY3RlZCBgc3RyaW5nYCBmb3IgdmFsdWUsIGdvdCBgJXNgIix0KTtyPUQoe30pLG49RCh7fSk7d2hpbGUoKytmPHUpcz1jW2ZdLFAocykmJihpPUQoVChzLHQsITEscCkpLGkubGFuZ3VhZ2U9cyxpLnJlbGV2YW5jZT5yLnJlbGV2YW5jZSYmKHI9aSksaS5yZWxldmFuY2U+bi5yZWxldmFuY2UmJihyPW4sbj1pKSk7cmV0dXJuIHIubGFuZ3VhZ2UmJihuLnNlY29uZEJlc3Q9ciksbn1mdW5jdGlvbiBTKHQsZSxuKXt2YXIgcj1ufHx7fSxvPXIucHJlZml4O3JldHVybiBudWxsIT09byYmdm9pZCAwIT09b3x8KG89aCksRChUKHQsZSwhMCxvKSl9ZnVuY3Rpb24gTyh0LGUpe3ZhciBuPWUocyk7bi5yYXdEZWZpbml0aW9uPWUuYmluZChudWxsLHMpLHhbdF09bix3LnB1c2godCksbi5hbGlhc2VzJiZNKHQsbi5hbGlhc2VzKX1mdW5jdGlvbiBDKCl7cmV0dXJuIHcuY29uY2F0KCl9ZnVuY3Rpb24gTSh0LGUpe3ZhciBuLHIsbyxpLHM9dDtmb3IobiBpbiBlJiYocz17fSxzW3RdPWUpLHMpe3I9c1tuXSxyPSJzdHJpbmciPT09dHlwZW9mIHI/W3JdOnIsbz1yLmxlbmd0aCxpPS0xO3doaWxlKCsraTxvKWJbcltpXV09bn19ZnVuY3Rpb24gVCh0LGUsbixyLGkpe3ZhciBzLGEsaCx1LGYsbCxkLHYsbT17fSx5PXt9LGc9W10sdz0iIixiPTA7aWYoInN0cmluZyIhPT10eXBlb2YgdCl0aHJvdyBvKCJFeHBlY3RlZCBgc3RyaW5nYCBmb3IgbmFtZSwgZ290IGAlc2AiLHQpO2lmKCJzdHJpbmciIT09dHlwZW9mIGUpdGhyb3cgbygiRXhwZWN0ZWQgYHN0cmluZ2AgZm9yIHZhbHVlLCBnb3QgYCVzYCIsZSk7aWYocz1QKHQpLGE9aXx8cyx2PVtdLGg9YSx1PXYsIXMpdGhyb3cgbygiVW5rbm93biBsYW5ndWFnZTogYCVzYCBpcyBub3QgcmVnaXN0ZXJlZCIsdCk7TihzKTt0cnl7YS50ZXJtaW5hdG9ycy5sYXN0SW5kZXg9MCxmPTAsZD1hLnRlcm1pbmF0b3JzLmV4ZWMoZSk7d2hpbGUoZClsPU0oZS5zbGljZShmLGQuaW5kZXgpLGQpLGY9ZC5pbmRleCtsLGEudGVybWluYXRvcnMubGFzdEluZGV4PWYsZD1hLnRlcm1pbmF0b3JzLmV4ZWMoZSk7TShlLnNsaWNlKGYpKSxoPWE7d2hpbGUoaC5wYXJlbnQpaC5jbGFzc05hbWUmJkooKSxoPWgucGFyZW50O3JldHVybntyZWxldmFuY2U6Yix2YWx1ZTp1LGlsbGVnYWw6ITEsbGFuZ3VhZ2U6dCx0b3A6YX19Y2F0Y2goTCl7aWYoLTE9PT1MLm1lc3NhZ2UuaW5kZXhPZigiSWxsZWdhbCIpKXRocm93IEw7cmV0dXJue3JlbGV2YW5jZTowLGlsbGVnYWw6ITAsdmFsdWU6QihlLFtdKX19ZnVuY3Rpb24gUyh0KXtyZXR1cm4gbmV3IFJlZ0V4cCh0LnJlcGxhY2UoL1stL1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKSwibSIpfWZ1bmN0aW9uIE8odCl7dmFyIGU9dFswXSxuPXQucnVsZTtyZXR1cm4gbiYmbi5lbmRTYW1lQXNCZWdpbiYmKG4uZW5kUmU9UyhlKSksbi5za2lwP3crPWU6KG4uZXhjbHVkZUJlZ2luJiYodys9ZSksRChBKCksdSksbi5yZXR1cm5CZWdpbnx8bi5leGNsdWRlQmVnaW58fCh3PWUpKSxFKG4pLG4ucmV0dXJuQmVnaW4/MDplLmxlbmd0aH1mdW5jdGlvbiBDKHQpe3ZhciBuPXRbMF0scj1lLnNsaWNlKHQuaW5kZXgpLG89JChhLHIpO2lmKG8pe3ZhciBpPWE7aS5za2lwP3crPW46KGkucmV0dXJuRW5kfHxpLmV4Y2x1ZGVFbmR8fCh3Kz1uKSxEKEEoKSx1KSxpLmV4Y2x1ZGVFbmQmJih3PW4pKTtkb3thLmNsYXNzTmFtZSYmSigpLGEuc2tpcHx8YS5zdWJMYW5ndWFnZXx8KGIrPWEucmVsZXZhbmNlKSxhPWEucGFyZW50fXdoaWxlKGEhPT1vLnBhcmVudCk7cmV0dXJuIG8uc3RhcnRzJiYoby5lbmRTYW1lQXNCZWdpbiYmKG8uc3RhcnRzLmVuZFJlPW8uZW5kUmUpLEUoby5zdGFydHMpKSxpLnJldHVybkVuZD8wOm4ubGVuZ3RofX1mdW5jdGlvbiBNKHQscil7dmFyIGkscz1yJiZyWzBdO2lmKHcrPXQsdm9pZCAwPT09cylyZXR1cm4gRChBKCksdSksMDtpZigiYmVnaW4iPT09bS50eXBlJiYiZW5kIj09PXIudHlwZSYmbS5pbmRleD09PXIuaW5kZXgmJiIiPT09cylyZXR1cm4gdys9ZS5zbGljZShyLmluZGV4LHIuaW5kZXgrMSksMTtpZihtPXIsImJlZ2luIj09PXIudHlwZSlyZXR1cm4gTyhyKTtpZigiZW5kIj09PXIudHlwZSYmKGk9QyhyKSx2b2lkIDAhPT1pKSlyZXR1cm4gaTtpZigiaWxsZWdhbCI9PT1yLnR5cGUmJiFuKXRocm93IG8oJ0lsbGVnYWwgbGV4ZW1lICIlcyIgZm9yIG1vZGUgIiVzIicscyxhLmNsYXNzTmFtZXx8Ijx1bm5hbWVkPiIpO3JldHVybiB3Kz1zLHMubGVuZ3RofWZ1bmN0aW9uIEUodCl7dmFyIGU7dC5jbGFzc05hbWUmJihlPWoodC5jbGFzc05hbWUsW10pKSxlJiYodS5wdXNoKGUpLGcucHVzaCh1KSx1PWUuY2hpbGRyZW4pLGE9T2JqZWN0LmNyZWF0ZSh0LHtwYXJlbnQ6e3ZhbHVlOmF9fSl9ZnVuY3Rpb24gQSgpe3ZhciB0PWEuc3ViTGFuZ3VhZ2U/UigpOnooKTtyZXR1cm4gdz0iIix0fWZ1bmN0aW9uIFIoKXt2YXIgdCxlPSJzdHJpbmciPT09dHlwZW9mIGEuc3ViTGFuZ3VhZ2U7cmV0dXJuIGUmJiF4W2Euc3ViTGFuZ3VhZ2VdP0IodyxbXSk6KHQ9ZT9UKGEuc3ViTGFuZ3VhZ2UsdywhMCxyLHlbYS5zdWJMYW5ndWFnZV0pOmsodyx7c3Vic2V0OjA9PT1hLnN1Ykxhbmd1YWdlLmxlbmd0aD92b2lkIDA6YS5zdWJMYW5ndWFnZSxwcmVmaXg6cn0pLHQubGFuZ3VhZ2U/KGEucmVsZXZhbmNlPjAmJihiKz10LnJlbGV2YW5jZSksZSYmKHlbYS5zdWJMYW5ndWFnZV09dC50b3ApLFtqKHQubGFuZ3VhZ2UsdC52YWx1ZSwhMCldKTpbRih3KV0pfWZ1bmN0aW9uIHooKXt2YXIgdCxlLG4scixvPVtdO2lmKCFhLmtleXdvcmRzKXJldHVybiBCKHcsbyk7dD0wLGEubGV4ZW1lc1JlLmxhc3RJbmRleD0wLGU9YS5sZXhlbWVzUmUuZXhlYyh3KTt3aGlsZShlKUIody5zbGljZSh0LGUuaW5kZXgpLG8pLHI9XyhhLGUpLHI/KGIrPXJbMV0sbj1qKHJbMF0sW10pLG8ucHVzaChuKSxCKGVbMF0sbi5jaGlsZHJlbikpOkIoZVswXSxvKSx0PWEubGV4ZW1lc1JlLmxhc3RJbmRleCxlPWEubGV4ZW1lc1JlLmV4ZWModyk7cmV0dXJuIEIody5zbGljZSh0KSxvKSxvfWZ1bmN0aW9uIEQodCxlKXt2YXIgbixyPXQubGVuZ3RoLG89LTE7d2hpbGUoKytvPHIpbj10W29dLCJ0ZXh0Ij09PW4udHlwZT9CKG4udmFsdWUsZSk6ZS5wdXNoKG4pfWZ1bmN0aW9uIEIodCxlKXt2YXIgbjtyZXR1cm4gdCYmKG49ZVtlLmxlbmd0aC0xXSxuJiYidGV4dCI9PT1uLnR5cGU/bi52YWx1ZSs9dDplLnB1c2goRih0KSkpLGV9ZnVuY3Rpb24gRih0KXtyZXR1cm57dHlwZToidGV4dCIsdmFsdWU6dH19ZnVuY3Rpb24gaih0LGUsbil7cmV0dXJue3R5cGU6ImVsZW1lbnQiLHRhZ05hbWU6InNwYW4iLHByb3BlcnRpZXM6e2NsYXNzTmFtZTpbKG4/IiI6cikrdF19LGNoaWxkcmVuOmV9fWZ1bmN0aW9uIF8odCxlKXt2YXIgbj1lWzBdO3JldHVybiBzW3BdJiYobj1uLnRvTG93ZXJDYXNlKCkpLGMuY2FsbCh0LmtleXdvcmRzLG4pJiZ0LmtleXdvcmRzW25dfWZ1bmN0aW9uICQodCxlKXtpZihJKHQuZW5kUmUsZSkpe3doaWxlKHQuZW5kc1BhcmVudCYmdC5wYXJlbnQpdD10LnBhcmVudDtyZXR1cm4gdH1pZih0LmVuZHNXaXRoUGFyZW50KXJldHVybiAkKHQucGFyZW50LGUpfWZ1bmN0aW9uIEooKXt1PWcucG9wKCl8fHZ9fWZ1bmN0aW9uIE4odCl7ZnVuY3Rpb24gZShvLGEpe28uY29tcGlsZWR8fChvLmNvbXBpbGVkPSEwLG8ua2V5d29yZHM9by5rZXl3b3Jkc3x8by5iZWdpbktleXdvcmRzLG8ua2V5d29yZHMmJihvLmtleXdvcmRzPUUoby5rZXl3b3Jkcyx0W3BdKSksby5sZXhlbWVzUmU9aShvLmxleGVtZXN8fC9cdysvLCEwKSxhJiYoby5iZWdpbktleXdvcmRzJiYoby5iZWdpbj0iXFxiKCIrby5iZWdpbktleXdvcmRzLnNwbGl0KGwpLmpvaW4oZCkrIilcXGIiKSxvLmJlZ2lufHwoby5iZWdpbj0vXEJ8XGIvKSxvLmJlZ2luUmU9aShvLmJlZ2luKSxvLmVuZFNhbWVBc0JlZ2luJiYoby5lbmQ9by5iZWdpbiksby5lbmR8fG8uZW5kc1dpdGhQYXJlbnR8fChvLmVuZD0vXEJ8XGIvKSxvLmVuZCYmKG8uZW5kUmU9aShvLmVuZCkpLG9bZl09cyhvLmVuZCl8fCIiLG8uZW5kc1dpdGhQYXJlbnQmJmFbZl0mJihvW2ZdKz0oby5lbmQ/ZDoiIikrYVtmXSkpLG8uaWxsZWdhbCYmKG8uaWxsZWdhbFJlPWkoby5pbGxlZ2FsKSksdm9pZCAwPT09by5yZWxldmFuY2UmJihvLnJlbGV2YW5jZT0xKSxvLmNvbnRhaW5zPW4oby5jb250YWluc3x8W10sbyksby5zdGFydHMmJmUoby5zdGFydHMsYSksby50ZXJtaW5hdG9ycz1yKG8pKX1mdW5jdGlvbiBuKHQsbil7dmFyIHIsbz1bXSxpPXQubGVuZ3RoLHM9LTE7d2hpbGUoKytzPGkpcj10W3NdLG89by5jb25jYXQoUigic2VsZiI9PT1yP246cikpO2k9by5sZW5ndGgscz0tMTt3aGlsZSgrK3M8aSllKG9bc10sbik7cmV0dXJuIG99ZnVuY3Rpb24gcih0KXt2YXIgZSxuLHI9e30scz1bXSxhPXt9LGM9MSxoPXQuY29udGFpbnMscD1oLmxlbmd0aCx1PS0xLGw9W107d2hpbGUoKyt1PHApbj1oW3VdLG0obixuLmJlZ2luS2V5d29yZHM/IlxcLj8oPzoiK24uYmVnaW4rIilcXC4/IjpuLmJlZ2luKTt0W2ZdJiZtKCJlbmQiLHRbZl0pLHQuaWxsZWdhbCYmbSgiaWxsZWdhbCIsdC5pbGxlZ2FsKSxwPXMubGVuZ3RoLHU9LTE7d2hpbGUoKyt1PHApbFt1XT1zW3VdWzFdO3JldHVybiBlPWkobyhsLGQpLCEwKSxhPXtsYXN0SW5kZXg6MCxleGVjOnZ9LGE7ZnVuY3Rpb24gdihuKXt2YXIgbyxpLGMsaCxwO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gbnVsbDtpZihlLmxhc3RJbmRleD1hLmxhc3RJbmRleCxoPWUuZXhlYyhuKSwhaClyZXR1cm4gbnVsbDtvPWgubGVuZ3RoLGk9LTE7d2hpbGUoKytpPG8paWYocD1oW2ldLHZvaWQgMCE9PXAmJnZvaWQgMCE9PXJbaV0pe2M9cltpXTticmVha31yZXR1cm4ic3RyaW5nIj09PXR5cGVvZiBjPyhoLnR5cGU9YyxoLmV4dHJhPVt0LmlsbGVnYWwsdC50ZXJtaW5hdG9yX2VuZF0pOihoLnR5cGU9ImJlZ2luIixoLnJ1bGU9YyksaH1mdW5jdGlvbiBtKHQsZSl7cltjXT10LHMucHVzaChbdCxlXSksYys9bmV3IFJlZ0V4cChlLnRvU3RyaW5nKCkrZCkuZXhlYygiIikubGVuZ3RofX1mdW5jdGlvbiBvKHQsZSl7dmFyIG4scixvLGksYT0vXFsoPzpbXlxcXF1dfFxcLikqXF18XChcPz98XFwoWzEtOV1cZCopfFxcLi8sYz0wLGg9IiIscD10Lmxlbmd0aCx1PS0xO3doaWxlKCsrdTxwKXtuPXRbdV0sbz1zKG4pLGMrPTEscj1jLDAhPT11JiYoaCs9ZSksaCs9djt3aGlsZShvLmxlbmd0aD4wKXtpZihpPWEuZXhlYyhvKSxudWxsPT09aSl7aCs9bzticmVha31oKz1vLnNsaWNlKDAsaS5pbmRleCksbz1vLnNsaWNlKGkuaW5kZXgraVswXS5sZW5ndGgpLGlbMF1bMF09PT15JiZpWzFdP2grPXkrU3RyaW5nKE51bWJlcihpWzFdKStyKTooaCs9aVswXSxpWzBdPT09diYmYysrKX1oKz1tfXJldHVybiBofWZ1bmN0aW9uIGkoZSxuKXtyZXR1cm4gbmV3IFJlZ0V4cChzKGUpLCJtIisodFtwXT8iaSI6IiIpKyhuPyJnIjoiIikpfWZ1bmN0aW9uIHModCl7cmV0dXJuIHQmJnQuc291cmNlfHx0fWUodCl9ZnVuY3Rpb24gRSh0LGUpe3ZhciBuLHI9e307aWYoInN0cmluZyI9PT10eXBlb2YgdClvKCJrZXl3b3JkIix0KTtlbHNlIGZvcihuIGluIHQpbyhuLHRbbl0pO3JldHVybiByO2Z1bmN0aW9uIG8odCxuKXt2YXIgcj1lP24udG9Mb3dlckNhc2UoKTpuO2kodCxyLnNwbGl0KGwpKX1mdW5jdGlvbiBpKHQsZSl7dmFyIG4sbz1lLmxlbmd0aCxpPS0xO3doaWxlKCsraTxvKW49ZVtpXS5zcGxpdChkKSxyW25bMF1dPVt0LE51bWJlcihuWzFdKXx8QShuWzBdKT8wOjFdfX1mdW5jdGlvbiBBKHQpe3JldHVybi0xIT09Zy5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSl9ZnVuY3Rpb24gUih0KXt2YXIgZSxuLHIsbztpZih0LnZhcmlhbnRzJiYhdFt1XSl7cj10LnZhcmlhbnRzLGU9ci5sZW5ndGgsbj0tMSxvPVtdO3doaWxlKCsrbjxlKW9bbl09YSh0LHt2YXJpYW50czpudWxsfSxyW25dKTt0W3VdPW99cmV0dXJuIHQuY2FjaGVkX3ZhcmlhbnRzP3QuY2FjaGVkX3ZhcmlhbnRzOnoodCk/W2EodCx7c3RhcnRzOnQuc3RhcnRzP2EodC5zdGFydHMpOm51bGx9KV06W3RdfWZ1bmN0aW9uIHoodCl7cmV0dXJuISF0JiYodC5lbmRzV2l0aFBhcmVudHx8eih0LnN0YXJ0cykpfWZ1bmN0aW9uIEQodCl7cmV0dXJue3JlbGV2YW5jZTp0LnJlbGV2YW5jZXx8MCxsYW5ndWFnZTp0Lmxhbmd1YWdlfHxudWxsLHZhbHVlOnQudmFsdWV8fFtdfX1mdW5jdGlvbiBJKHQsZSl7dmFyIG49dCYmdC5leGVjKGUpO3JldHVybiBuJiYwPT09bi5pbmRleH1mdW5jdGlvbiBQKHQpe3JldHVybiB0PXQudG9Mb3dlckNhc2UoKSx4W3RdfHx4W2JbdF1dfX0sIjNlYjMiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6aCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGhdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE3LjE5NCAxMC45NjJBNi4yNzEgNi4yNzEgMCAwMDEyLjg0NC4yNDhINC4zYTEuMjUgMS4yNSAwIDAwMCAyLjVoMS4wMTNhLjI1LjI1IDAgMDEuMjUuMjVWMjFhLjI1LjI1IDAgMDEtLjI1LjI1SDQuM2ExLjI1IDEuMjUgMCAxMDAgMi41aDkuOTYzYTYuNzQyIDYuNzQyIDAgMDAyLjkzLTEyLjc4NnptLTQuMzUtOC4yMTRhMy43NjIgMy43NjIgMCAwMTAgNy41MjNIOC4zMTNhLjI1LjI1IDAgMDEtLjI1LS4yNVYzYS4yNS4yNSAwIDAxLjI1LS4yNXptMS40MiAxOC41SDguMzEzYS4yNS4yNSAwIDAxLS4yNS0uMjV2LTcuOTc3YS4yNS4yNSAwIDAxLjI1LS4yNUgxNC4yNjRhNC4yMzkgNC4yMzkgMCAwMTAgOC40Nzd6In19KV0pKX19fSwiM2Y4YyI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LCI0MGY3IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCJmMDJjIiksbz1uKCIxYzRmIiksaT1uKCI1NWJlIikscz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49Sih0KShlLnNlbGVjdGlvbik7cmV0dXJuIG4/UyhuLnBvcykoZSk6ZX19LGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7QXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKTtmb3IodmFyIHI9MCxvPXQubGVuZ3RoO3I8bztyKyspe3ZhciBpPUoodFtyXSkobi5zZWxlY3Rpb24pO2lmKGkpe3ZhciBzPWIoaS5wb3MsZSkobik7aWYocyE9PW4pcmV0dXJuIHN9fXJldHVybiBufX0sYz1mdW5jdGlvbih0KXtpZihnKHQuc2VsZWN0aW9uKSl7dmFyIGU9dC5zZWxlY3Rpb24uJGZyb20ucG9zLG49dC5zZWxlY3Rpb24uJHRvLnBvcztyZXR1cm4geCh0LmRlbGV0ZShlLG4pKX1yZXR1cm4gdH0saD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZyhlLnNlbGVjdGlvbikpe3ZhciBuPWUuc2VsZWN0aW9uLGk9bi4kZnJvbSxzPW4uJHRvO2lmKHQgaW5zdGFuY2VvZiBvLkZyYWdtZW50JiZpLnBhcmVudC5jYW5SZXBsYWNlKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0KXx8aS5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoaS5pbmRleCgpLGkuaW5kZXhBZnRlcigpLHQudHlwZSkpcmV0dXJuIHgoZS5yZXBsYWNlV2l0aChpLnBvcyxzLnBvcyx0KS5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihlLmRvYy5yZXNvbHZlKGkucG9zKSkpKX1yZXR1cm4gZX19LHA9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXIuU2VsZWN0aW9uLmZpbmRGcm9tKG4uZG9jLnJlc29sdmUodCksZSwhMCk7cmV0dXJuIG8/bi5zZXRTZWxlY3Rpb24obyk6bn19LHU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSYmdC50eXBlLnNwZWMuc2VsZWN0YWJsZX0sZj1mdW5jdGlvbih0KXtyZXR1cm4gdSh0KSYmdC50eXBlLmlzTGVhZn0sbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGYodCk/bi5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihuLmRvYy5yZXNvbHZlKGUpKSk6cChlKShuKX0sZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPSJudW1iZXIiPT09dHlwZW9mIGUsaT1yLnNlbGVjdGlvbi4kZnJvbSxzPW8/ci5kb2MucmVzb2x2ZShlKTpnKHIuc2VsZWN0aW9uKT9yLmRvYy5yZXNvbHZlKGkucG9zKzEpOmksYz1zLnBhcmVudDtpZihnKHIuc2VsZWN0aW9uKSYmbil7dmFyIHA9cjtpZihyPWgodCkocikscCE9PXIpcmV0dXJuIHJ9aWYoTShjKSl7dmFyIGY9cjtpZihyPWEoYy50eXBlLHQpKHIpLGYhPT1yKXt2YXIgZD11KHQpP3MuYmVmb3JlKHMuZGVwdGgpOnMucG9zO3JldHVybiBsKHQsZCxyKX19aWYoQyhzLHQpKXtyLmluc2VydChzLnBvcyx0KTt2YXIgdj1vP3MucG9zOnUodCk/ci5zZWxlY3Rpb24uJGFuY2hvci5wb3MtMTpyLnNlbGVjdGlvbi4kYW5jaG9yLnBvcztyZXR1cm4geChsKHQsdixyKSl9Zm9yKHZhciBtPXMuZGVwdGg7bT4wO20tLSl7dmFyIHk9cy5hZnRlcihtKSx3PXIuZG9jLnJlc29sdmUoeSk7aWYoQyh3LHQpKXJldHVybiByLmluc2VydCh5LHQpLHgobCh0LHkscikpfXJldHVybiByfX0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9Sih0KShvLnNlbGVjdGlvbik7cmV0dXJuIGk/eChvLnNldE5vZGVNYXJrdXAoaS5wb3MsZSxPYmplY3QuYXNzaWduKHt9LGkubm9kZS5hdHRycyxuKSxyKSk6b319LG09ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFnKGUuc2VsZWN0aW9uKSl7dmFyIG49Sih0KShlLnNlbGVjdGlvbik7aWYobilyZXR1cm4geChlLnNldFNlbGVjdGlvbihyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKGUuZG9jLG4ucG9zKSkpfXJldHVybiBlfX0seT1mdW5jdGlvbih0KXt2YXIgZT1IKHQuc2VsZWN0aW9uKTtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBlP1MoZSkodCk6dH0sZz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbn0sdz1mdW5jdGlvbih0LGUpe3JldHVybiBBcnJheS5pc0FycmF5KHQpJiZ0LmluZGV4T2YoZS50eXBlKT4tMXx8ZS50eXBlPT09dH0seD1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHQpLHQpLnNldFRpbWUoRGF0ZS5ub3coKSl9LGI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bi5kb2Mubm9kZUF0KHQpLG89bi5kb2MucmVzb2x2ZSh0KTtpZihrKG8sZSkpe249bi5yZXBsYWNlV2l0aCh0LHQrci5ub2RlU2l6ZSxlKTt2YXIgaT1uLnNlbGVjdGlvbi4kZnJvbS5wb3MtMTtyZXR1cm4gbj1wKE1hdGgubWF4KGksMCksLTEpKG4pLG49cChuLnNlbGVjdGlvbi4kZnJvbS5zdGFydCgpKShuKSx4KG4pfXJldHVybiBufX0saz1mdW5jdGlvbih0LGUpe3ZhciBuPXQubm9kZSh0LmRlcHRoKTtyZXR1cm4gbiYmbi50eXBlLnZhbGlkQ29udGVudChlIGluc3RhbmNlb2Ygby5GcmFnbWVudD9lOm8uRnJhZ21lbnQuZnJvbShlKSl9LFM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuZG9jLm5vZGVBdCh0KTtyZXR1cm4geChlLmRlbGV0ZSh0LHQrbi5ub2RlU2l6ZSkpfX0sTz1mdW5jdGlvbih0KXtpZih0LmNhY2hlZC50YWJsZU5vZGVUeXBlcylyZXR1cm4gdC5jYWNoZWQudGFibGVOb2RlVHlwZXM7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQubm9kZXMpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciByPXQubm9kZXNbbl07ci5zcGVjLnRhYmxlUm9sZSYmKGVbci5zcGVjLnRhYmxlUm9sZV09cil9KSksdC5jYWNoZWQudGFibGVOb2RlVHlwZXM9ZSxlfSxDPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5pbmRleCgpO3JldHVybiBlIGluc3RhbmNlb2Ygby5GcmFnbWVudD90LnBhcmVudC5jYW5SZXBsYWNlKG4sbixlKTplIGluc3RhbmNlb2Ygby5Ob2RlJiZ0LnBhcmVudC5jYW5SZXBsYWNlV2l0aChuLG4sZS50eXBlKX0sTT1mdW5jdGlvbih0KXtyZXR1cm4hdHx8InBhcmFncmFwaCI9PT10LnR5cGUubmFtZSYmMj09PXQubm9kZVNpemV9LFQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmL3RhYmxlL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gaih0LGUpfSxOPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3JldHVybiBlP3QuY3JlYXRlQ2hlY2tlZChudWxsLGUpOnQuY3JlYXRlQW5kRmlsbCgpfSxFPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSkscj1lLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxvPW4uY2VsbHNJblJlY3QodCkscz1uLmNlbGxzSW5SZWN0KG4ucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3MtcixlLiRoZWFkQ2VsbC5wb3MtcikpLGE9MCxjPW8ubGVuZ3RoO2E8YzthKyspaWYoLTE9PT1zLmluZGV4T2Yob1thXSkpcmV0dXJuITE7cmV0dXJuITB9fSxBPWZ1bmN0aW9uKHQpe3JldHVybiB0WzBdLm1hcCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0W25dfSkpfSkpfSxSPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pLlRhYmxlTWFwLmdldCh0KSxuPVtdLHI9MDtyPGUuaGVpZ2h0O3IrKyl7Zm9yKHZhciBvPVtdLHM9e30sYT0wO2E8ZS53aWR0aDthKyspe3ZhciBjPWUubWFwW3IqZS53aWR0aCthXSxoPXQubm9kZUF0KGMpLHA9ZS5maW5kQ2VsbChjKTtzW2NdfHxwLnRvcCE9PXI/by5wdXNoKG51bGwpOihzW2NdPSEwLG8ucHVzaChoKSl9bi5wdXNoKG8pfXJldHVybiBufSx6PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9aS5UYWJsZU1hcC5nZXQodCksbz0wO288ci5oZWlnaHQ7bysrKXtmb3IodmFyIHM9dC5jaGlsZChvKSxhPVtdLGM9MDtjPHIud2lkdGg7YysrKWlmKGVbb11bY10pe3ZhciBoPXIubWFwW28qci53aWR0aCtjXSxwPWVbb11bY10sdT10Lm5vZGVBdChoKSxmPXUudHlwZS5jcmVhdGVDaGVja2VkKE9iamVjdC5hc3NpZ24oe30scC5hdHRycykscC5jb250ZW50LHAubWFya3MpO2EucHVzaChmKX1uLnB1c2gocy50eXBlLmNyZWF0ZUNoZWNrZWQocy5hdHRycyxhLHMubWFya3MpKX12YXIgbD10LnR5cGUuY3JlYXRlQ2hlY2tlZCh0LmF0dHJzLG4sdC5tYXJrcyk7cmV0dXJuIGx9LEQ9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89QShSKHQubm9kZSkpO3JldHVybiBvPVAobyxlLG4sciksbz1BKG8pLHoodC5ub2RlLG8pfSxJPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPVIodC5ub2RlKTtyZXR1cm4gbz1QKG8sZSxuLHIpLHoodC5ub2RlLG8pfSxQPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPWVbMF0+blswXT8tMToxLGk9dC5zcGxpY2UoZVswXSxlLmxlbmd0aCkscz1pLmxlbmd0aCUyPT09MD8xOjAsYT12b2lkIDA7cmV0dXJuIGE9LTE9PT1yJiYxPT09bz9uWzBdLTE6MT09PXImJi0xPT09bz9uW24ubGVuZ3RoLTFdLXMrMTotMT09PW8/blswXTpuW24ubGVuZ3RoLTFdLXMsdC5zcGxpY2UuYXBwbHkodCxbYSwwXS5jb25jYXQoaSkpLHR9LEI9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dD5lPy0xOjEsaT0iVGFyZ2V0IHBvc2l0aW9uIGlzIGludmFsaWQsIHlvdSBjYW4ndCBtb3ZlIHRoZSAiK3IrIiAiK3QrIiB0byAiK2UrIiwgdGhlIHRhcmdldCBjYW4ndCBiZSBzcGxpdC4gWW91IGNvdWxkIHVzZSB0cnlUb0ZpdCBvcHRpb24uIjtpZigxPT09byl7aWYoLTEhPT1uLnNsaWNlKDAsbi5sZW5ndGgtMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSl9ZWxzZSBpZigtMSE9PW4uc2xpY2UoMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSk7cmV0dXJuITB9LEY9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuJGZyb207cmV0dXJuIGoobix0KX19LGo9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5kZXB0aDtuPjA7bi0tKXt2YXIgcj10Lm5vZGUobik7aWYoZShyKSlyZXR1cm57cG9zOm4+MD90LmJlZm9yZShuKTowLHN0YXJ0OnQuc3RhcnQobiksZGVwdGg6bixub2RlOnJ9fX0sXz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1GKHQpKG4pO2lmKHIpcmV0dXJuIEsoci5wb3MsZSl9fSwkPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hIUYodCkoZSl9fSxKPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gRigoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LEw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaih0LChmdW5jdGlvbih0KXtyZXR1cm4gdyhlLHQpfSkpfSxWPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gJCgoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LHE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIF8oKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSxlKShuKX19LFc9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGcoZSkpe3ZhciBuPWUubm9kZSxyPWUuJGZyb207aWYodyh0LG4pKXJldHVybntub2RlOm4scG9zOnIucG9zLGRlcHRoOnIuZGVwdGh9fX19LEg9ZnVuY3Rpb24odCl7dmFyIGU9dC4kZnJvbS5ub2RlQmVmb3JlLG49ci5TZWxlY3Rpb24uZmluZEZyb20odC4kZnJvbSwtMSk7aWYobiYmZSl7dmFyIG89SihlLnR5cGUpKG4pO3JldHVybiBvP28ucG9zOm4uJGZyb20ucG9zfX0sSz1mdW5jdGlvbih0LGUpe3ZhciBuPWUodCkscj1uLm5vZGUuY2hpbGROb2Rlc1tuLm9mZnNldF07cmV0dXJuIG4ubm9kZS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP24ubm9kZS5wYXJlbnROb2RlOnImJnIubm9kZVR5cGUhPT1Ob2RlLlRFWFRfTk9ERT9yOm4ubm9kZX0sVT1mdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO2lmKCF0KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibm9kZSIgcGFyYW1ldGVyJyk7dmFyIG49W107cmV0dXJuIHQuZGVzY2VuZGFudHMoKGZ1bmN0aW9uKHQscil7aWYobi5wdXNoKHtub2RlOnQscG9zOnJ9KSwhZSlyZXR1cm4hMX0pKSxufSxHPWZ1bmN0aW9uKHQsZSxuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO2lmKCFlKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAicHJlZGljYXRlIiBwYXJhbWV0ZXInKTtyZXR1cm4gVSh0LG4pLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5ub2RlKX0pKX0sWD1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzVGV4dH0pLGUpfSxZPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNJbmxpbmV9KSxlKX0sWj1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzQmxvY2t9KSxlKX0sUT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuISFlKHQuYXR0cnMpfSksbil9LHR0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09ZX0pLG4pfSxldD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNJblNldCh0Lm1hcmtzKX0pLG4pfSxudD1mdW5jdGlvbih0LGUpe3JldHVybiEhdHQodCxlKS5sZW5ndGh9O2Z1bmN0aW9uIHJ0KHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX12YXIgb3Q9ZnVuY3Rpb24odCl7cmV0dXJuIEYoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJ0YWJsZSI9PT10LnR5cGUuc3BlYy50YWJsZVJvbGV9KSkodCl9LGl0PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgaS5DZWxsU2VsZWN0aW9ufSxzdD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9dC4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbj1pLlRhYmxlTWFwLmdldCh0LiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gbi5yZWN0QmV0d2Vlbih0LiRhbmNob3JDZWxsLnBvcy1lLHQuJGhlYWRDZWxsLnBvcy1lKX19LGF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihpdChlKSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6dCxyaWdodDp0KzEsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSkoZSl9cmV0dXJuITF9fSxjdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6dCxib3R0b206dCsxfSkoZSl9cmV0dXJuITF9fSxodD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6MCxyaWdodDplLndpZHRoLHRvcDowLGJvdHRvbTplLmhlaWdodH0pKHQpfXJldHVybiExfSxwdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKFt0XSk7cmV0dXJuIG8ucmVkdWNlKChmdW5jdGlvbih0LGUpe2lmKGU+PTAmJmU8PXIud2lkdGgtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDplLHJpZ2h0OmUrMSx0b3A6MCxib3R0b206ci5oZWlnaHR9KTtyZXR1cm4gdC5jb25jYXQoby5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPW4ubm9kZS5ub2RlQXQodCkscj10K24uc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOmV9fSkpKX19KSxbXSl9fX0sdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLmhlaWdodC0xKXt2YXIgbz1yLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6ci53aWR0aCx0b3A6ZSxib3R0b206ZSsxfSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LGZ0PWZ1bmN0aW9uKHQpe3ZhciBlPW90KHQpO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6MCxib3R0b206bi5oZWlnaHR9KTtyZXR1cm4gci5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBuPWUubm9kZS5ub2RlQXQodCkscj10K2Uuc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOm59fSkpfX0sbHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPW90KHIuc2VsZWN0aW9uKSxzPSJyb3ciPT09dDtpZihvKXt2YXIgYT1pLlRhYmxlTWFwLmdldChvLm5vZGUpO2lmKGU+PTAmJmU8KHM/YS5oZWlnaHQ6YS53aWR0aCkpe3ZhciBjPXM/MDplLGg9cz9lOjAscD1zP2Eud2lkdGg6ZSsxLHU9cz9lKzE6YS5oZWlnaHQ7aWYobil7dmFyIGY9SXQoci5zZWxlY3Rpb24uJGZyb20pO2lmKCFmKXJldHVybiByO3ZhciBsPWEuZmluZENlbGwoZi5wb3Mtby5zdGFydCk7cz8oaD1NYXRoLm1pbihoLGwudG9wKSx1PU1hdGgubWF4KHUsbC5ib3R0b20pKTooYz1NYXRoLm1pbihjLGwubGVmdCkscD1NYXRoLm1heChwLGwucmlnaHQpKX12YXIgZD1hLmNlbGxzSW5SZWN0KHtsZWZ0OmMsdG9wOmgscmlnaHQ6cz9wOmMrMSxib3R0b206cz9oKzE6dX0pLHY9dS1oPT09MT9kOmEuY2VsbHNJblJlY3Qoe2xlZnQ6cz9jOnAtMSx0b3A6cz91LTE6aCxyaWdodDpwLGJvdHRvbTp1fSksbT1vLnN0YXJ0K2RbMF0seT1vLnN0YXJ0K3Zbdi5sZW5ndGgtMV0sZz1yLmRvYy5yZXNvbHZlKG0pLHc9ci5kb2MucmVzb2x2ZSh5KTtyZXR1cm4geChyLnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKHcsZykpKX19cmV0dXJuIHJ9fX0sZHQ9bHQoImNvbHVtbiIpLHZ0PWx0KCJyb3ciKSxtdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0LnNlbGVjdGlvbik7aWYoZSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS5ub2RlKSxyPW4ubWFwO2lmKHImJnIubGVuZ3RoKXt2YXIgbz1lLnN0YXJ0K3JbMF0scz1lLnN0YXJ0K3Jbci5sZW5ndGgtMV0sYT10LmRvYy5yZXNvbHZlKG8pLGM9dC5kb2MucmVzb2x2ZShzKTtyZXR1cm4geCh0LnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKGMsYSkpKX19cmV0dXJuIHR9LHl0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKHQpe3ZhciByPU8oZSkuY2VsbC5jcmVhdGVBbmRGaWxsKCksbz1yLmNvbnRlbnQ7aWYoIXQubm9kZS5jb250ZW50LmVxKG8pKXJldHVybiBuLnJlcGxhY2VXaXRoKHQucG9zKzEsdC5wb3MrdC5ub2RlLm5vZGVTaXplLG8pLHgobil9cmV0dXJuIG59fSxndD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4geChpLmFkZENvbHVtbihlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSl9cmV0dXJuIGV9fSx3dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9anQodCkociksYz1hLmluZGV4ZXMsaD1qdChlKShyKSxwPWguaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJnAubGVuZ3RoPjEmJkIodCxlLHAsInJvdyIpO3ZhciB1PUkocyxjLHAsaS5kaXJlY3Rpb24pO3JldHVybiB4KHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSx1KX19LHh0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89e3RyeVRvRml0OiExLGRpcmVjdGlvbjowfSxpPU9iamVjdC5hc3NpZ24obyxuKSxzPW90KHIuc2VsZWN0aW9uKTtpZighcylyZXR1cm4gcjt2YXIgYT1GdCh0KShyKSxjPWEuaW5kZXhlcyxoPUZ0KGUpKHIpLHA9aC5pbmRleGVzO2lmKGMuaW5kZXhPZihlKT4tMSlyZXR1cm4gcjshaS50cnlUb0ZpdCYmcC5sZW5ndGg+MSYmQih0LGUscCwiY29sdW1uIik7dmFyIHU9RChzLGMscCxpLmRpcmVjdGlvbik7cmV0dXJuIHgocikucmVwbGFjZVdpdGgocy5wb3Mscy5wb3Mrcy5ub2RlLm5vZGVTaXplLHUpfX0sYnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9b3Qobi5zZWxlY3Rpb24pO2lmKHIpe3ZhciBvPWkuVGFibGVNYXAuZ2V0KHIubm9kZSkscz10LTE7aWYoZSYmcz49MClyZXR1cm4geChrdChzKShuKSk7aWYodD49MCYmdDw9by5oZWlnaHQpcmV0dXJuIHgoaS5hZGRSb3cobix7bWFwOm8sdGFibGVTdGFydDpyLnN0YXJ0LHRhYmxlOnIubm9kZX0sdCkpfXJldHVybiBufX0sa3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIuaGVpZ2h0KXtmb3IodmFyIG89bi5ub2RlLHM9TyhvLnR5cGUuc2NoZW1hKSxhPW4uc3RhcnQsYz0wO2M8dCsxO2MrKylhKz1vLmNoaWxkKGMpLm5vZGVTaXplO3ZhciBoPW8uY2hpbGQodCkscD1bXSx1PTA7aWYoaC5mb3JFYWNoKChmdW5jdGlvbih0KXsxPT09dC5hdHRycy5yb3dzcGFuJiYodSs9dC5hdHRycy5jb2xzcGFuLHAucHVzaChzW3QudHlwZS5zcGVjLnRhYmxlUm9sZV0uY3JlYXRlQW5kRmlsbCh0LmF0dHJzLHQubWFya3MpKSl9KSksdTxyLndpZHRoKXtmb3IodmFyIGY9W10sbD1mdW5jdGlvbihuKXt2YXIgcj1CdChuLChmdW5jdGlvbihlLHIpe3ZhciBvPWUubm9kZS5hdHRycy5yb3dzcGFuLGk9bitvO3JldHVybiBvPjEmJmk+dH0pKShlKTtmLnB1c2guYXBwbHkoZixydChyKSl9LHY9dDt2Pj0wO3YtLSlsKHYpO2YubGVuZ3RoJiZmLmZvckVhY2goKGZ1bmN0aW9uKHQpe2U9enQodCx7cm93c3Bhbjp0Lm5vZGUuYXR0cnMucm93c3BhbisxfSkoZSl9KSl9cmV0dXJuIGQocy5yb3cuY3JlYXRlKGguYXR0cnMscCksYSkoZSl9fXJldHVybiBlfX0sU3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKDA9PT10JiYxPT09ci53aWR0aClyZXR1cm4gQ3QoZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4gaS5yZW1vdmVDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkseChlKX1yZXR1cm4gZX19LE90PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIuaGVpZ2h0KXJldHVybiBDdChlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodClyZXR1cm4gaS5yZW1vdmVSb3coZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkseChlKX1yZXR1cm4gZX19LEN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnNlbGVjdGlvbi4kZnJvbSxuPWUuZGVwdGg7bj4wO24tLSl7dmFyIHI9ZS5ub2RlKG4pO2lmKCJ0YWJsZSI9PT1yLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuIHgodC5kZWxldGUoZS5iZWZvcmUobiksZS5hZnRlcihuKSkpfXJldHVybiB0fSxNdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZihodChlKSlyZXR1cm4gQ3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8ubGVmdCYmby5yaWdodD09ci53aWR0aClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLnJpZ2h0LTE7O2EtLSl7aWYoaS5yZW1vdmVDb2x1bW4odCxzLGEpLGE9PT1zLmxlZnQpYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4geCh0KX19cmV0dXJuIHR9LFR0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VsZWN0aW9uO2lmKGh0KGUpKXJldHVybiBDdCh0KTtpZihpdChlKSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPXIucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3Mtbi5zdGFydCxlLiRoZWFkQ2VsbC5wb3Mtbi5zdGFydCk7aWYoMD09by50b3AmJm8uYm90dG9tPT1yLmhlaWdodClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLmJvdHRvbS0xOzthLS0pe2lmKGkucmVtb3ZlUm93KHQscyxhKSxhPT09cy50b3ApYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4geCh0KX19cmV0dXJuIHR9LE50PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1QdCh0KTtyZXR1cm4gbj9TdChuLmxlZnQpKHAodC5wb3MpKGUpKTplfX0sRXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPVB0KHQpO3JldHVybiBuP090KG4udG9wKShwKHQucG9zKShlKSk6ZX19LEF0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9cHQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfXJldHVybiB4KG8pfXJldHVybiBvfX0sUnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT11dCh0KShvLnNlbGVjdGlvbik7aWYoaSl7Zm9yKHZhciBzPWkubGVuZ3RoLTE7cz49MDtzLS0pbz1lKGlbc10sbyk7aWYobil7dmFyIGE9by5kb2MucmVzb2x2ZShvLm1hcHBpbmcubWFwKGlbaS5sZW5ndGgtMV0ucG9zKSk7by5zZXRTZWxlY3Rpb24oci5TZWxlY3Rpb24ubmVhcihhKSl9fXJldHVybiBvfX0senQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQ/KG4uc2V0Tm9kZU1hcmt1cCh0LnBvcyxudWxsLE9iamVjdC5hc3NpZ24oe30sdC5ub2RlLmF0dHJzLGUpKSx4KG4pKTpufX0sRHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTozLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjMscj0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOm51bGwsaT1PKHQpLHM9aS5jZWxsLGE9aS5oZWFkZXJfY2VsbCxjPWkucm93LGg9aS50YWJsZSxwPVtdLHU9W10sZj0wO2Y8bjtmKyspcC5wdXNoKE4ocyxvKSksciYmdS5wdXNoKE4oYSxvKSk7Zm9yKHZhciBsPVtdLGQ9MDtkPGU7ZCsrKWwucHVzaChjLmNyZWF0ZUNoZWNrZWQobnVsbCxyJiYwPT09ZD91OnApKTtyZXR1cm4gaC5jcmVhdGVDaGVja2VkKG51bGwsbCl9LEl0PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi9jZWxsL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gaih0LGUpfSxQdD1mdW5jdGlvbih0KXt2YXIgZT1JdCh0KTtpZihlKXt2YXIgbj1UKHQpLHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPWUucG9zLW4uc3RhcnQ7cmV0dXJuIHIucmVjdEJldHdlZW4obyxvKX19LEJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPVtdLG89dXQodCkobi5zZWxlY3Rpb24pO2lmKG8pZm9yKHZhciBpPW8ubGVuZ3RoLTE7aT49MDtpLS0pZShvW2ldLG4pJiZyLnB1c2gob1tpXSk7cmV0dXJuIHJ9fSxGdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89cHQodCkoZS5zZWxlY3Rpb24pO28mJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLmNvbHNwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPXB0KHQpKGUuc2VsZWN0aW9uKTtuJiZuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtlLm5vZGUuYXR0cnMuY29sc3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9cHQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIGg9cHQobikoZS5zZWxlY3Rpb24pLHA9dXQoMCkoZS5zZWxlY3Rpb24pLHU9ZS5kb2MucmVzb2x2ZShoW2gubGVuZ3RoLTFdLnBvcyksZj12b2lkIDAsbD1yO2w+PW47bC0tKXt2YXIgZD1wdChsKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1wLmxlbmd0aC0xO3Y+PTA7di0tKWlmKHBbdl0ucG9zPT09ZFswXS5wb3Mpe2Y9ZFswXTticmVha31pZihmKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGYucG9zKTtyZXR1cm57JGFuY2hvcjp1LCRoZWFkOm0saW5kZXhlczphfX19LGp0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49dCxyPXQsbz1mdW5jdGlvbih0KXt2YXIgbz11dCh0KShlLnNlbGVjdGlvbik7by5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3Bhbit0LTE7bz49biYmKG49dCksbz5yJiYocj1vKX0pKX0saT10O2k+PTA7aS0tKW8oaSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49dXQodCkoZS5zZWxlY3Rpb24pO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO2Uubm9kZS5hdHRycy5yb3dzcGFuPjEmJm4+ciYmKHI9bil9KSl9O2ZvcihpPXQ7aTw9cjtpKyspcyhpKTt2YXIgYT1bXTtmb3IoaT1uO2k8PXI7aSsrKXt2YXIgYz11dChpKShlLnNlbGVjdGlvbik7YyYmYy5sZW5ndGgmJmEucHVzaChpKX1uPWFbMF0scj1hW2EubGVuZ3RoLTFdO2Zvcih2YXIgaD11dChuKShlLnNlbGVjdGlvbikscD1wdCgwKShlLnNlbGVjdGlvbiksdT1lLmRvYy5yZXNvbHZlKGhbaC5sZW5ndGgtMV0ucG9zKSxmPXZvaWQgMCxsPXI7bD49bjtsLS0pe3ZhciBkPXV0KGwpKGUuc2VsZWN0aW9uKTtpZihkJiZkLmxlbmd0aCl7Zm9yKHZhciB2PXAubGVuZ3RoLTE7dj49MDt2LS0paWYocFt2XS5wb3M9PT1kWzBdLnBvcyl7Zj1kWzBdO2JyZWFrfWlmKGYpYnJlYWt9fXZhciBtPWUuZG9jLnJlc29sdmUoZi5wb3MpO3JldHVybnskYW5jaG9yOnUsJGhlYWQ6bSxpbmRleGVzOmF9fX07ZS5pc05vZGVTZWxlY3Rpb249ZyxlLmNhbkluc2VydD1DLGUuY29udmVydFRhYmxlTm9kZVRvQXJyYXlPZlJvd3M9UixlLmNvbnZlcnRBcnJheU9mUm93c1RvVGFibGVOb2RlPXosZS5maW5kUGFyZW50Tm9kZT1GLGUuZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3M9aixlLmZpbmRQYXJlbnREb21SZWY9XyxlLmhhc1BhcmVudE5vZGU9JCxlLmZpbmRQYXJlbnROb2RlT2ZUeXBlPUosZS5maW5kUGFyZW50Tm9kZU9mVHlwZUNsb3Nlc3RUb1Bvcz1MLGUuaGFzUGFyZW50Tm9kZU9mVHlwZT1WLGUuZmluZFBhcmVudERvbVJlZk9mVHlwZT1xLGUuZmluZFNlbGVjdGVkTm9kZU9mVHlwZT1XLGUuZmluZFBvc2l0aW9uT2ZOb2RlQmVmb3JlPUgsZS5maW5kRG9tUmVmQXRQb3M9SyxlLmZsYXR0ZW49VSxlLmZpbmRDaGlsZHJlbj1HLGUuZmluZFRleHROb2Rlcz1YLGUuZmluZElubGluZU5vZGVzPVksZS5maW5kQmxvY2tOb2Rlcz1aLGUuZmluZENoaWxkcmVuQnlBdHRyPVEsZS5maW5kQ2hpbGRyZW5CeVR5cGU9dHQsZS5maW5kQ2hpbGRyZW5CeU1hcms9ZXQsZS5jb250YWlucz1udCxlLmZpbmRUYWJsZT1vdCxlLmlzQ2VsbFNlbGVjdGlvbj1pdCxlLmdldFNlbGVjdGlvblJlY3Q9c3QsZS5pc0NvbHVtblNlbGVjdGVkPWF0LGUuaXNSb3dTZWxlY3RlZD1jdCxlLmlzVGFibGVTZWxlY3RlZD1odCxlLmdldENlbGxzSW5Db2x1bW49cHQsZS5nZXRDZWxsc0luUm93PXV0LGUuZ2V0Q2VsbHNJblRhYmxlPWZ0LGUuc2VsZWN0Q29sdW1uPWR0LGUuc2VsZWN0Um93PXZ0LGUuc2VsZWN0VGFibGU9bXQsZS5lbXB0eUNlbGw9eXQsZS5hZGRDb2x1bW5BdD1ndCxlLm1vdmVSb3c9d3QsZS5tb3ZlQ29sdW1uPXh0LGUuYWRkUm93QXQ9YnQsZS5jbG9uZVJvd0F0PWt0LGUucmVtb3ZlQ29sdW1uQXQ9U3QsZS5yZW1vdmVSb3dBdD1PdCxlLnJlbW92ZVRhYmxlPUN0LGUucmVtb3ZlU2VsZWN0ZWRDb2x1bW5zPU10LGUucmVtb3ZlU2VsZWN0ZWRSb3dzPVR0LGUucmVtb3ZlQ29sdW1uQ2xvc2VzdFRvUG9zPU50LGUucmVtb3ZlUm93Q2xvc2VzdFRvUG9zPUV0LGUuZm9yRWFjaENlbGxJbkNvbHVtbj1BdCxlLmZvckVhY2hDZWxsSW5Sb3c9UnQsZS5zZXRDZWxsQXR0cnM9enQsZS5jcmVhdGVUYWJsZT1EdCxlLmZpbmRDZWxsQ2xvc2VzdFRvUG9zPUl0LGUuZmluZENlbGxSZWN0Q2xvc2VzdFRvUG9zPVB0LGUuZ2V0U2VsZWN0aW9uUmFuZ2VJbkNvbHVtbj1GdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Sb3c9anQsZS5yZW1vdmVQYXJlbnROb2RlT2ZUeXBlPXMsZS5yZXBsYWNlUGFyZW50Tm9kZU9mVHlwZT1hLGUucmVtb3ZlU2VsZWN0ZWROb2RlPWMsZS5yZXBsYWNlU2VsZWN0ZWROb2RlPWgsZS5zZXRUZXh0U2VsZWN0aW9uPXAsZS5zYWZlSW5zZXJ0PWQsZS5zZXRQYXJlbnROb2RlTWFya3VwPXYsZS5zZWxlY3RQYXJlbnROb2RlT2ZUeXBlPW0sZS5yZW1vdmVOb2RlQmVmb3JlPXl9LCI0MjhmIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpO3QuZXhwb3J0cz1yfSwiNDNjYSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNOS4xNDcgMjEuNTUyYTEuMjQ0IDEuMjQ0IDAgMDEtLjg5NS0uMzc4TC44NCAxMy41NjFhMi4yNTcgMi4yNTcgMCAwMTAtMy4xMjVsNy40MTItNy42MTNhMS4yNSAxLjI1IDAgMDExLjc5MSAxLjc0NGwtNi45IDcuMDgzYS41LjUgMCAwMDAgLjdsNi45IDcuMDgyYTEuMjUgMS4yNSAwIDAxLS45IDIuMTIyek0xNC44NTQgMjEuNTUyYTEuMjUgMS4yNSAwIDAxLS45LTIuMTIybDYuOS03LjA4M2EuNS41IDAgMDAwLS43bC02LjktNy4wODJhMS4yNSAxLjI1IDAgMDExLjc5MS0xLjc0NGw3LjQxMSA3LjYxMmEyLjI1NyAyLjI1NyAwIDAxMCAzLjEyNWwtNy40MTIgNy42MTRhMS4yNDQgMS4yNDQgMCAwMS0uODkuMzh6bTYuNTE0LTkuMzczeiJ9fSldKSl9fX0sIjQ0YWQiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDM5Iiksbz1uKCJjNmI2IiksaT0iIi5zcGxpdDt0LmV4cG9ydHM9cigoZnVuY3Rpb24oKXtyZXR1cm4hT2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCl9KSk/ZnVuY3Rpb24odCl7cmV0dXJuIlN0cmluZyI9PW8odCk/aS5jYWxsKHQsIiIpOk9iamVjdCh0KX06T2JqZWN0fSwiNDRkMiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImI2MjIiKSxvPW4oIjdjNzMiKSxpPW4oIjliZjIiKSxzPXIoInVuc2NvcGFibGVzIiksYT1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1hW3NdJiZpLmYoYSxzLHtjb25maWd1cmFibGU6ITAsdmFsdWU6byhudWxsKX0pLHQuZXhwb3J0cz1mdW5jdGlvbih0KXthW3NdW3RdPSEwfX0sNDkzMDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpO3QuZXhwb3J0cz0hIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMmJiFyKChmdW5jdGlvbigpe3JldHVybiFTdHJpbmcoU3ltYm9sKCkpfSkpfSwiNDk4YyI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNNy43NSA0LjVoMTVhMSAxIDAgMDAwLTJoLTE1YTEgMSAwIDAwMCAyek0yMi43NSAxMWgtMTVhMSAxIDAgMTAwIDJoMTVhMSAxIDAgMDAwLTJ6TTIyLjc1IDE5LjVoLTE1YTEgMSAwIDAwMCAyaDE1YTEgMSAwIDAwMC0yek0yLjIxMiAxNy4yNDhhMiAyIDAgMDAtMS45MzMgMS40ODQuNzUuNzUgMCAxMDEuNDUuMzg2LjUuNSAwIDExLjQ4My42My43NS43NSAwIDEwMCAxLjUuNS41IDAgMTEtLjQ4Mi42MzUuNzUuNzUgMCAxMC0xLjQ0NS40IDIgMiAwIDEwMy41ODktMS42NDguMjUxLjI1MSAwIDAxMC0uMjc4IDIgMiAwIDAwLTEuNjYyLTMuMTExek00LjI1IDEwLjc0OGEyIDIgMCAwMC00IDAgLjc1Ljc1IDAgMDAxLjUgMCAuNS41IDAgMDExIDAgMS4wMzEgMS4wMzEgMCAwMS0uMjI3LjY0NUwuNDE0IDE0LjAyOUEuNzUuNzUgMCAwMDEgMTUuMjQ4aDIuNWEuNzUuNzUgMCAwMDAtMS41aC0uNDE5YS4yNDkuMjQ5IDAgMDEtLjE5NS0uNDA2TDMuNyAxMi4zM2EyLjU0NCAyLjU0NCAwIDAwLjU1LTEuNTgyek00IDUuMjQ4aC0uMjVBLjI1LjI1IDAgMDEzLjUgNVYxLjYyM0ExLjM3NyAxLjM3NyAwIDAwMi4xMjUuMjQ4SDEuNWEuNzUuNzUgMCAwMDAgMS41aC4yNUEuMjUuMjUgMCAwMTIgMnYzYS4yNS4yNSAwIDAxLS4yNS4yNUgxLjVhLjc1Ljc1IDAgMDAwIDEuNUg0YS43NS43NSAwIDAwMC0xLjV6In19KV0pKX19fSwiNGQ2NCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImZjNmEiKSxvPW4oIjUwYzQiKSxpPW4oIjIzY2IiKSxzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4scyl7dmFyIGEsYz1yKGUpLGg9byhjLmxlbmd0aCkscD1pKHMsaCk7aWYodCYmbiE9bil7d2hpbGUoaD5wKWlmKGE9Y1twKytdLGEhPWEpcmV0dXJuITB9ZWxzZSBmb3IoO2g+cDtwKyspaWYoKHR8fHAgaW4gYykmJmNbcF09PT1uKXJldHVybiB0fHxwfHwwO3JldHVybiF0JiYtMX19O3QuZXhwb3J0cz17aW5jbHVkZXM6cyghMCksaW5kZXhPZjpzKCExKX19LCI0ZGY0IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjAzNjYiKSxvPW4oIjdiMGIiKSxpPW4oIjliZGQiKSxzPW4oImU5NWEiKSxhPW4oIjUwYzQiKSxjPW4oIjg0MTgiKSxoPW4oIjM1YTEiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUsbixwLHUsZixsLGQ9byh0KSx2PSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXksbT1hcmd1bWVudHMubGVuZ3RoLHk9bT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsZz12b2lkIDAhPT15LHc9aChkKSx4PTA7aWYoZyYmKHk9cih5LG0+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PXd8fHY9PUFycmF5JiZzKHcpKWZvcihlPWEoZC5sZW5ndGgpLG49bmV3IHYoZSk7ZT54O3grKylsPWc/eShkW3hdLHgpOmRbeF0sYyhuLHgsbCk7ZWxzZSBmb3IodT13LmNhbGwoZCksZj11Lm5leHQsbj1uZXcgdjshKHA9Zi5jYWxsKHUpKS5kb25lO3grKylsPWc/aSh1LHksW3AudmFsdWUseF0sITApOnAudmFsdWUsYyhuLHgsbCk7cmV0dXJuIG4ubGVuZ3RoPXgsbn19LCI0ZjM1IjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik01IDEzYTEgMSAwIDAxMC0yaDE0YTEgMSAwIDAxMCAySDV6In19KV0pKX19fSwiNGY2NiI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTIgLjVBMTEuNjM0IDExLjYzNCAwIDAwLjI2MiAxMiAxMS42MzQgMTEuNjM0IDAgMDAxMiAyMy41YTExLjgzNiAxMS44MzYgMCAwMDYuNjI0LTIgMS4yNSAxLjI1IDAgMTAtMS4zOTMtMi4wNzZBOS4zNCA5LjM0IDAgMDExMiAyMWE5LjEzMiA5LjEzMiAwIDAxLTkuMjM4LTlBOS4xMzIgOS4xMzIgMCAwMTEyIDNhOS4xMzIgOS4xMzIgMCAwMTkuMjM4IDl2Ljg5MWExLjk0MyAxLjk0MyAwIDAxLTMuODg0IDBWMTJBNS4zNTUgNS4zNTUgMCAxMDEyIDE3LjI2MWE1LjM3NiA1LjM3NiAwIDAwMy44NjEtMS42MzQgNC40MzggNC40MzggMCAwMDcuODc3LTIuNzM2VjEyQTExLjYzNCAxMS42MzQgMCAwMDEyIC41em0wIDE0LjI2MUEyLjc2MyAyLjc2MyAwIDExMTQuODU0IDEyIDIuODEyIDIuODEyIDAgMDExMiAxNC43NjF6In19KV0pKX19fSwiNGZhZCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjIzZTciKSxvPW4oIjZmNTMiKS5lbnRyaWVzO3Ioe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwfSx7ZW50cmllczpmdW5jdGlvbih0KXtyZXR1cm4gbyh0KX19KX0sIjUwYzQiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJhNjkxIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9vKHIodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LDUxMzU6ZnVuY3Rpb24odCxlKXt2YXIgbj17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jYWxsKHQsZSl9fSw1MzEzOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLChmdW5jdGlvbigpe3JldHVybiBsfSkpLG4uZChlLCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4gdX0pKSxuLmQoZSwiYyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSksbi5kKGUsImQiLChmdW5jdGlvbigpe3JldHVybiB6fSkpLG4uZChlLCJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSwiZiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN9KSksbi5kKGUsImciLChmdW5jdGlvbigpe3JldHVybiBofSkpO3ZhciByPW4oIjMwNGEiKSxvPW4oIjBhYzAiKSxpPU9iamVjdC5jcmVhdGUobnVsbCkscz1mdW5jdGlvbih0LGUsbil7dGhpcy5yYW5nZXM9bnx8W25ldyBjKHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSxhPXthbmNob3I6e2NvbmZpZ3VyYWJsZTohMH0saGVhZDp7Y29uZmlndXJhYmxlOiEwfSxmcm9tOntjb25maWd1cmFibGU6ITB9LHRvOntjb25maWd1cmFibGU6ITB9LCRmcm9tOntjb25maWd1cmFibGU6ITB9LCR0bzp7Y29uZmlndXJhYmxlOiEwfSxlbXB0eTp7Y29uZmlndXJhYmxlOiEwfX07YS5hbmNob3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3N9LGEuaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LGEuZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5wb3N9LGEudG8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLnBvc30sYS4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LGEuJHRvLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1swXS4kdG99LGEuZW1wdHkuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucmFuZ2VzLGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLiRmcm9tLnBvcyE9dFtlXS4kdG8ucG9zKXJldHVybiExO3JldHVybiEwfSxzLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LHMucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1yWyJpIl0uZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLG89bnVsbCxpPTA7aTxlLm9wZW5FbmQ7aSsrKW89bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgcz10LnN0ZXBzLmxlbmd0aCxhPXRoaXMucmFuZ2VzLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGg9YVtjXSxwPWguJGZyb20sdT1oLiR0byxmPXQubWFwcGluZy5zbGljZShzKTt0LnJlcGxhY2VSYW5nZShmLm1hcChwLnBvcyksZi5tYXAodS5wb3MpLGM/clsiaSJdLmVtcHR5OmUpLDA9PWMmJm0odCxzLChuP24uaXNJbmxpbmU6byYmby5pc1RleHRibG9jayk/LTE6MSl9fSxzLnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LnN0ZXBzLmxlbmd0aCxyPXRoaXMucmFuZ2VzLG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXSxzPWkuJGZyb20sYT1pLiR0byxjPXQubWFwcGluZy5zbGljZShuKSxoPWMubWFwKHMucG9zKSxwPWMubWFwKGEucG9zKTtvP3QuZGVsZXRlUmFuZ2UoaCxwKToodC5yZXBsYWNlUmFuZ2VXaXRoKGgscCxlKSxtKHQsbixlLmlzSW5saW5lPy0xOjEpKX19LHMuZmluZEZyb209ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQucGFyZW50LmlubGluZUNvbnRlbnQ/bmV3IGgodCk6dih0Lm5vZGUoMCksdC5wYXJlbnQsdC5wb3MsdC5pbmRleCgpLGUsbik7aWYocilyZXR1cm4gcjtmb3IodmFyIG89dC5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1lPDA/dih0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYmVmb3JlKG8rMSksdC5pbmRleChvKSxlLG4pOnYodC5ub2RlKDApLHQubm9kZShvKSx0LmFmdGVyKG8rMSksdC5pbmRleChvKSsxLGUsbik7aWYoaSlyZXR1cm4gaX19LHMubmVhcj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLmZpbmRGcm9tKHQsZSl8fHRoaXMuZmluZEZyb20odCwtZSl8fG5ldyBsKHQubm9kZSgwKSl9LHMuYXRTdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdih0LHQsMCwwLDEpfHxuZXcgbCh0KX0scy5hdEVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdih0LHQsdC5jb250ZW50LnNpemUsdC5jaGlsZENvdW50LC0xKXx8bmV3IGwodCl9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZXx8IWUudHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2VsZWN0aW9uLmZyb21KU09OIik7dmFyIG49aVtlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBzZWxlY3Rpb24gdHlwZSAiK2UudHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSxzLmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzZWxlY3Rpb24gSlNPTiBJRCAiK3QpO3JldHVybiBpW3RdPWUsZS5wcm90b3R5cGUuanNvbklEPXQsZX0scy5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gaC5iZXR3ZWVuKHRoaXMuJGFuY2hvcix0aGlzLiRoZWFkKS5nZXRCb29rbWFyaygpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKSxzLnByb3RvdHlwZS52aXNpYmxlPSEwO3ZhciBjPWZ1bmN0aW9uKHQsZSl7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWV9LGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpLHQuY2FsbCh0aGlzLGUsbil9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49eyRjdXJzb3I6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLiRjdXJzb3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3M9PXRoaXMuJGhlYWQucG9zP3RoaXMuJGhlYWQ6bnVsbH0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89bi5yZXNvbHZlKHIubWFwKHRoaXMuaGVhZCkpO2lmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiB0Lm5lYXIobyk7dmFyIGk9bi5yZXNvbHZlKHIubWFwKHRoaXMuYW5jaG9yKSk7cmV0dXJuIG5ldyBlKGkucGFyZW50LmlubGluZUNvbnRlbnQ/aTpvLG8pfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49clsiaSJdLmVtcHR5KSx0LnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcyxlLG4pLG49PXJbImkiXS5lbXB0eSl7dmFyIG89dGhpcy4kZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLiR0byk7byYmZS5lbnN1cmVNYXJrcyhvKX19LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5hbmNob3IsdGhpcy5oZWFkKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6InRleHQiLGFuY2hvcjp0aGlzLmFuY2hvcixoZWFkOnRoaXMuaGVhZH19LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yfHwibnVtYmVyIiE9dHlwZW9mIG4uaGVhZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgVGV4dFNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpLHQucmVzb2x2ZShuLmhlYWQpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXQucmVzb2x2ZShlKTtyZXR1cm4gbmV3IHRoaXMocixuPT1lP3I6dC5yZXNvbHZlKG4pKX0sZS5iZXR3ZWVuPWZ1bmN0aW9uKG4scixvKXt2YXIgaT1uLnBvcy1yLnBvcztpZihvJiYhaXx8KG89aT49MD8xOi0xKSwhci5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIHM9dC5maW5kRnJvbShyLG8sITApfHx0LmZpbmRGcm9tKHIsLW8sITApO2lmKCFzKXJldHVybiB0Lm5lYXIocixvKTtyPXMuJGhlYWR9cmV0dXJuIG4ucGFyZW50LmlubGluZUNvbnRlbnR8fCgwPT1pP249cjoobj0odC5maW5kRnJvbShuLC1vLCEwKXx8dC5maW5kRnJvbShuLG8sITApKS4kYW5jaG9yLG4ucG9zPHIucG9zIT1pPDAmJihuPXIpKSksbmV3IGUobixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0ocyk7cy5qc29uSUQoInRleHQiLGgpO3ZhciBwPWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07cC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcCh0Lm1hcCh0aGlzLmFuY2hvciksdC5tYXAodGhpcy5oZWFkKSl9LHAucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIGguYmV0d2Vlbih0LnJlc29sdmUodGhpcy5hbmNob3IpLHQucmVzb2x2ZSh0aGlzLmhlYWQpKX07dmFyIHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj1lLm5vZGVBZnRlcixyPWUubm9kZSgwKS5yZXNvbHZlKGUucG9zK24ubm9kZVNpemUpO3QuY2FsbCh0aGlzLGUsciksdGhpcy5ub2RlPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPXIubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxpPW8uZGVsZXRlZCxzPW8ucG9zLGE9bi5yZXNvbHZlKHMpO3JldHVybiBpP3QubmVhcihhKTpuZXcgZShhKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe3JldHVybiBuZXcgclsiaSJdKHJbImMiXS5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmFuY2hvcil9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlU2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvcikpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgdGhpcyh0LnJlc29sdmUoZSkpfSxlLmlzU2VsZWN0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4hdC5pc1RleHQmJiExIT09dC50eXBlLnNwZWMuc2VsZWN0YWJsZX0sZX0ocyk7dS5wcm90b3R5cGUudmlzaWJsZT0hMSxzLmpzb25JRCgibm9kZSIsdSk7dmFyIGY9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07Zi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxuPWUuZGVsZXRlZCxyPWUucG9zO3JldHVybiBuP25ldyBwKHIscik6bmV3IGYocil9LGYucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNvbHZlKHRoaXMuYW5jaG9yKSxuPWUubm9kZUFmdGVyO3JldHVybiBuJiZ1LmlzU2VsZWN0YWJsZShuKT9uZXcgdShlKTpzLm5lYXIoZSl9O3ZhciBsPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5yZXNvbHZlKDApLGUucmVzb2x2ZShlLmNvbnRlbnQuc2l6ZSkpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiYWxsIn19LGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LGV9KHMpO3MuanNvbklEKCJhbGwiLGwpO3ZhciBkPXttYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGwodCl9fTtmdW5jdGlvbiB2KHQsZSxuLHIsbyxpKXtpZihlLmlubGluZUNvbnRlbnQpcmV0dXJuIGguY3JlYXRlKHQsbik7Zm9yKHZhciBzPXItKG8+MD8wOjEpO28+MD9zPGUuY2hpbGRDb3VudDpzPj0wO3MrPW8pe3ZhciBhPWUuY2hpbGQocyk7aWYoYS5pc0F0b20pe2lmKCFpJiZ1LmlzU2VsZWN0YWJsZShhKSlyZXR1cm4gdS5jcmVhdGUodCxuLShvPDA/YS5ub2RlU2l6ZTowKSl9ZWxzZXt2YXIgYz12KHQsYSxuK28sbzwwP2EuY2hpbGRDb3VudDowLG8saSk7aWYoYylyZXR1cm4gY31uKz1hLm5vZGVTaXplKm99fWZ1bmN0aW9uIG0odCxlLG4pe3ZhciByPXQuc3RlcHMubGVuZ3RoLTE7aWYoIShyPGUpKXt2YXIgaT10LnN0ZXBzW3JdO2lmKGkgaW5zdGFuY2VvZiBvWyJjIl18fGkgaW5zdGFuY2VvZiBvWyJiIl0pe3ZhciBhLGM9dC5tYXBwaW5nLm1hcHNbcl07Yy5mb3JFYWNoKChmdW5jdGlvbih0LGUsbixyKXtudWxsPT1hJiYoYT1yKX0pKSx0LnNldFNlbGVjdGlvbihzLm5lYXIodC5kb2MucmVzb2x2ZShhKSxuKSl9fX12YXIgeT0xLGc9Mix3PTQseD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUuZG9jKSx0aGlzLnRpbWU9RGF0ZS5ub3coKSx0aGlzLmN1clNlbGVjdGlvbj1lLnNlbGVjdGlvbix0aGlzLmN1clNlbGVjdGlvbkZvcj0wLHRoaXMuc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcyx0aGlzLnVwZGF0ZWQ9MCx0aGlzLm1ldGE9T2JqZWN0LmNyZWF0ZShudWxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VsZWN0aW9uOntjb25maWd1cmFibGU6ITB9LHNlbGVjdGlvblNldDp7Y29uZmlndXJhYmxlOiEwfSxzdG9yZWRNYXJrc1NldDp7Y29uZmlndXJhYmxlOiEwfSxpc0dlbmVyaWM6e2NvbmZpZ3VyYWJsZTohMH0sc2Nyb2xsZWRJbnRvVmlldzp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uc2VsZWN0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1clNlbGVjdGlvbkZvcjx0aGlzLnN0ZXBzLmxlbmd0aCYmKHRoaXMuY3VyU2VsZWN0aW9uPXRoaXMuY3VyU2VsZWN0aW9uLm1hcCh0aGlzLmRvYyx0aGlzLm1hcHBpbmcuc2xpY2UodGhpcy5jdXJTZWxlY3Rpb25Gb3IpKSx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCksdGhpcy5jdXJTZWxlY3Rpb259LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0KXtpZih0LiRmcm9tLmRvYyE9dGhpcy5kb2MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNlbGVjdGlvbiBwYXNzZWQgdG8gc2V0U2VsZWN0aW9uIG11c3QgcG9pbnQgYXQgdGhlIGN1cnJlbnQgZG9jdW1lbnQiKTtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb249dCx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCx0aGlzLnVwZGF0ZWQ9KHRoaXMudXBkYXRlZHx5KSZ+Zyx0aGlzLnN0b3JlZE1hcmtzPW51bGwsdGhpc30sbi5zZWxlY3Rpb25TZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZ5KT4wfSxlLnByb3RvdHlwZS5zZXRTdG9yZWRNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdG9yZWRNYXJrcz10LHRoaXMudXBkYXRlZHw9Zyx0aGlzfSxlLnByb3RvdHlwZS5lbnN1cmVNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gclsiZCJdLnNhbWVTZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGZyb20ubWFya3MoKSx0KXx8dGhpcy5zZXRTdG9yZWRNYXJrcyh0KSx0aGlzfSxlLnByb3RvdHlwZS5hZGRTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQuYWRkVG9TZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpfSxlLnByb3RvdHlwZS5yZW1vdmVTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQucmVtb3ZlRnJvbVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LG4uc3RvcmVkTWFya3NTZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZnKT4wfSxlLnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKGUsbil7dC5wcm90b3R5cGUuYWRkU3RlcC5jYWxsKHRoaXMsZSxuKSx0aGlzLnVwZGF0ZWQ9dGhpcy51cGRhdGVkJn5nLHRoaXMuc3RvcmVkTWFya3M9bnVsbH0sZS5wcm90b3R5cGUuc2V0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aW1lPXQsdGhpc30sZS5wcm90b3R5cGUucmVwbGFjZVNlbGVjdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzLHQpLHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb25XaXRoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zZWxlY3Rpb247cmV0dXJuITEhPT1lJiYodD10Lm1hcmsodGhpcy5zdG9yZWRNYXJrc3x8KG4uZW1wdHk/bi4kZnJvbS5tYXJrcygpOm4uJGZyb20ubWFya3NBY3Jvc3Mobi4kdG8pfHxyWyJkIl0ubm9uZSkpKSxuLnJlcGxhY2VXaXRoKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUuZGVsZXRlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyksdGhpc30sZS5wcm90b3R5cGUuaW5zZXJ0VGV4dD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dGhpcy5kb2MudHlwZS5zY2hlbWE7aWYobnVsbD09ZSlyZXR1cm4gdD90aGlzLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHIudGV4dCh0KSwhMCk6dGhpcy5kZWxldGVTZWxlY3Rpb24oKTtpZighdClyZXR1cm4gdGhpcy5kZWxldGVSYW5nZShlLG4pO3ZhciBvPXRoaXMuc3RvcmVkTWFya3M7aWYoIW8pe3ZhciBpPXRoaXMuZG9jLnJlc29sdmUoZSk7bz1uPT1lP2kubWFya3MoKTppLm1hcmtzQWNyb3NzKHRoaXMuZG9jLnJlc29sdmUobikpfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZVdpdGgoZSxuLHIudGV4dCh0LG8pKSx0aGlzLnNlbGVjdGlvbi5lbXB0eXx8dGhpcy5zZXRTZWxlY3Rpb24ocy5uZWFyKHRoaXMuc2VsZWN0aW9uLiR0bykpLHRoaXN9LGUucHJvdG90eXBlLnNldE1ldGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XT1lLHRoaXN9LGUucHJvdG90eXBlLmdldE1ldGE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV19LG4uaXNHZW5lcmljLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLm1ldGEpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLnNjcm9sbEludG9WaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlZHw9dyx0aGlzfSxuLnNjcm9sbGVkSW50b1ZpZXcuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZ3KT4wfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShvWyJkIl0pO2Z1bmN0aW9uIGIodCxlKXtyZXR1cm4gZSYmdD90LmJpbmQoZSk6dH12YXIgaz1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5pbml0PWIoZS5pbml0LG4pLHRoaXMuYXBwbHk9YihlLmFwcGx5LG4pfSxTPVtuZXcgaygiZG9jIix7aW5pdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N8fHQuc2NoZW1hLnRvcE5vZGVUeXBlLmNyZWF0ZUFuZEZpbGwoKX0sYXBwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9jfX0pLG5ldyBrKCJzZWxlY3Rpb24iLHtpbml0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2VsZWN0aW9ufHxzLmF0U3RhcnQoZS5kb2MpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zZWxlY3Rpb259fSksbmV3IGsoInN0b3JlZE1hcmtzIix7aW5pdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5zdG9yZWRNYXJrc3x8bnVsbH0sYXBwbHk6ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHIuc2VsZWN0aW9uLiRjdXJzb3I/dC5zdG9yZWRNYXJrczpudWxsfX0pLG5ldyBrKCJzY3JvbGxUb1NlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sYXBwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zY3JvbGxlZEludG9WaWV3P2UrMTplfX0pXSxPPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMuZmllbGRzPVMuY29uY2F0KCksdGhpcy5wbHVnaW5zPVtdLHRoaXMucGx1Z2luc0J5S2V5PU9iamVjdC5jcmVhdGUobnVsbCksZSYmZS5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihuLnBsdWdpbnNCeUtleVt0LmtleV0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFkZGluZyBkaWZmZXJlbnQgaW5zdGFuY2VzIG9mIGEga2V5ZWQgcGx1Z2luICgiK3Qua2V5KyIpIik7bi5wbHVnaW5zLnB1c2godCksbi5wbHVnaW5zQnlLZXlbdC5rZXldPXQsdC5zcGVjLnN0YXRlJiZuLmZpZWxkcy5wdXNoKG5ldyBrKHQua2V5LHQuc3BlYy5zdGF0ZSx0KSl9KSl9LEM9ZnVuY3Rpb24odCl7dGhpcy5jb25maWc9dH0sTT17c2NoZW1hOntjb25maWd1cmFibGU6ITB9LHBsdWdpbnM6e2NvbmZpZ3VyYWJsZTohMH0sdHI6e2NvbmZpZ3VyYWJsZTohMH19O00uc2NoZW1hLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5zY2hlbWF9LE0ucGx1Z2lucy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcucGx1Z2luc30sQy5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXBwbHlUcmFuc2FjdGlvbih0KS5zdGF0ZX0sQy5wcm90b3R5cGUuZmlsdGVyVHJhbnNhY3Rpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0tMSk7Zm9yKHZhciBuPTA7bjx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtuKyspaWYobiE9ZSl7dmFyIHI9dGhpcy5jb25maWcucGx1Z2luc1tuXTtpZihyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24mJiFyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24uY2FsbChyLHQsdGhpcykpcmV0dXJuITF9cmV0dXJuITB9LEMucHJvdG90eXBlLmFwcGx5VHJhbnNhY3Rpb249ZnVuY3Rpb24odCl7aWYoIXRoaXMuZmlsdGVyVHJhbnNhY3Rpb24odCkpcmV0dXJue3N0YXRlOnRoaXMsdHJhbnNhY3Rpb25zOltdfTtmb3IodmFyIGU9W3RdLG49dGhpcy5hcHBseUlubmVyKHQpLHI9bnVsbDs7KXtmb3IodmFyIG89ITEsaT0wO2k8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLmNvbmZpZy5wbHVnaW5zW2ldO2lmKHMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbil7dmFyIGE9cj9yW2ldLm46MCxjPXI/cltpXS5zdGF0ZTp0aGlzLGg9YTxlLmxlbmd0aCYmcy5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uLmNhbGwocyxhP2Uuc2xpY2UoYSk6ZSxjLG4pO2lmKGgmJm4uZmlsdGVyVHJhbnNhY3Rpb24oaCxpKSl7aWYoaC5zZXRNZXRhKCJhcHBlbmRlZFRyYW5zYWN0aW9uIix0KSwhcil7cj1bXTtmb3IodmFyIHA9MDtwPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO3ArKylyLnB1c2gocDxpP3tzdGF0ZTpuLG46ZS5sZW5ndGh9OntzdGF0ZTp0aGlzLG46MH0pfWUucHVzaChoKSxuPW4uYXBwbHlJbm5lcihoKSxvPSEwfXImJihyW2ldPXtzdGF0ZTpuLG46ZS5sZW5ndGh9KX19aWYoIW8pcmV0dXJue3N0YXRlOm4sdHJhbnNhY3Rpb25zOmV9fX0sQy5wcm90b3R5cGUuYXBwbHlJbm5lcj1mdW5jdGlvbih0KXtpZighdC5iZWZvcmUuZXEodGhpcy5kb2MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBcHBseWluZyBhIG1pc21hdGNoZWQgdHJhbnNhY3Rpb24iKTtmb3IodmFyIGU9bmV3IEModGhpcy5jb25maWcpLG49dGhpcy5jb25maWcuZmllbGRzLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtlW28ubmFtZV09by5hcHBseSh0LHRoaXNbby5uYW1lXSx0aGlzLGUpfWZvcih2YXIgaT0wO2k8VC5sZW5ndGg7aSsrKVRbaV0odGhpcyx0LGUpO3JldHVybiBlfSxNLnRyLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgeCh0aGlzKX0sQy5jcmVhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBPKHQuc2NoZW1hfHx0LmRvYy50eXBlLnNjaGVtYSx0LnBsdWdpbnMpLG49bmV3IEMoZSkscj0wO3I8ZS5maWVsZHMubGVuZ3RoO3IrKyluW2UuZmllbGRzW3JdLm5hbWVdPWUuZmllbGRzW3JdLmluaXQodCxuKTtyZXR1cm4gbn0sQy5wcm90b3R5cGUucmVjb25maWd1cmU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBPKHQuc2NoZW1hfHx0aGlzLnNjaGVtYSx0LnBsdWdpbnMpLG49ZS5maWVsZHMscj1uZXcgQyhlKSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb10ubmFtZTtyW2ldPXRoaXMuaGFzT3duUHJvcGVydHkoaSk/dGhpc1tpXTpuW29dLmluaXQodCxyKX1yZXR1cm4gcn0sQy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKHQpe3ZhciBlPXtkb2M6dGhpcy5kb2MudG9KU09OKCksc2VsZWN0aW9uOnRoaXMuc2VsZWN0aW9uLnRvSlNPTigpfTtpZih0aGlzLnN0b3JlZE1hcmtzJiYoZS5zdG9yZWRNYXJrcz10aGlzLnN0b3JlZE1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHQmJiJvYmplY3QiPT10eXBlb2YgdClmb3IodmFyIG4gaW4gdCl7aWYoImRvYyI9PW58fCJzZWxlY3Rpb24iPT1uKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgSlNPTiBmaWVsZHMgYGRvY2AgYW5kIGBzZWxlY3Rpb25gIGFyZSByZXNlcnZlZCIpO3ZhciByPXRbbl0sbz1yLnNwZWMuc3RhdGU7byYmby50b0pTT04mJihlW25dPW8udG9KU09OLmNhbGwocix0aGlzW3Iua2V5XSkpfXJldHVybiBlfSxDLmZyb21KU09OPWZ1bmN0aW9uKHQsZSxuKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRWRpdG9yU3RhdGUuZnJvbUpTT04iKTtpZighdC5zY2hlbWEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlcXVpcmVkIGNvbmZpZyBmaWVsZCAnc2NoZW1hJyBtaXNzaW5nIik7dmFyIG89bmV3IE8odC5zY2hlbWEsdC5wbHVnaW5zKSxpPW5ldyBDKG8pO3JldHVybiBvLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbihvKXtpZigiZG9jIj09by5uYW1lKWkuZG9jPXJbImYiXS5mcm9tSlNPTih0LnNjaGVtYSxlLmRvYyk7ZWxzZSBpZigic2VsZWN0aW9uIj09by5uYW1lKWkuc2VsZWN0aW9uPXMuZnJvbUpTT04oaS5kb2MsZS5zZWxlY3Rpb24pO2Vsc2UgaWYoInN0b3JlZE1hcmtzIj09by5uYW1lKWUuc3RvcmVkTWFya3MmJihpLnN0b3JlZE1hcmtzPWUuc3RvcmVkTWFya3MubWFwKHQuc2NoZW1hLm1hcmtGcm9tSlNPTikpO2Vsc2V7aWYobilmb3IodmFyIGEgaW4gbil7dmFyIGM9blthXSxoPWMuc3BlYy5zdGF0ZTtpZihjLmtleT09by5uYW1lJiZoJiZoLmZyb21KU09OJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxhKSlyZXR1cm4gdm9pZChpW28ubmFtZV09aC5mcm9tSlNPTi5jYWxsKGMsdCxlW2FdLGkpKX1pW28ubmFtZV09by5pbml0KHQsaSl9fSkpLGl9LEMuYWRkQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXtULnB1c2godCl9LEMucmVtb3ZlQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT1ULmluZGV4T2YodCk7ZT4tMSYmVC5zcGxpY2UoZSwxKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQy5wcm90b3R5cGUsTSk7dmFyIFQ9W107ZnVuY3Rpb24gTih0LGUsbil7Zm9yKHZhciByIGluIHQpe3ZhciBvPXRbcl07byBpbnN0YW5jZW9mIEZ1bmN0aW9uP289by5iaW5kKGUpOiJoYW5kbGVET01FdmVudHMiPT1yJiYobz1OKG8sZSx7fSkpLG5bcl09b31yZXR1cm4gbn12YXIgRT1mdW5jdGlvbih0KXt0aGlzLnByb3BzPXt9LHQucHJvcHMmJk4odC5wcm9wcyx0aGlzLHRoaXMucHJvcHMpLHRoaXMuc3BlYz10LHRoaXMua2V5PXQua2V5P3Qua2V5LmtleTpSKCJwbHVnaW4iKX07RS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5rZXldfTt2YXIgQT1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIFIodCl7cmV0dXJuIHQgaW4gQT90KyIkIisgKytBW3RdOihBW3RdPTAsdCsiJCIpfXZhciB6PWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PSJrZXkiKSx0aGlzLmtleT1SKHQpfTt6LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29uZmlnLnBsdWdpbnNCeUtleVt0aGlzLmtleV19LHoucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX19LDU1MDQ6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMjMuNzUgMTIuOTUyQTEuMjUgMS4yNSAwIDAwMjIuNSAxMS43aC04LjkzNmEuNDkyLjQ5MiAwIDAxLS4yODItLjA5Yy0uNzIyLS41MTMtMS40ODItLjk4MS0yLjIxOC0xLjQzMi0yLjgtMS43MTUtNC41LTIuOS00LjUtNC44NjMgMC0yLjIzNSAyLjIwNy0yLjU2OSAzLjUyMy0yLjU2OWE0LjU0IDQuNTQgMCAwMTMuMDgxLjc2NCAyLjY2MiAyLjY2MiAwIDAxLjQ0NyAxLjk5di4zYTEuMjUgMS4yNSAwIDEwMi41IDB2LS4yNjhhNC44ODcgNC44ODcgMCAwMC0xLjE2NS0zLjc3N0MxMy45NDkuNzQxIDEyLjM1OS4yNDggMTAuMDkxLjI0OGMtMy42NTggMC02LjAyMyAxLjk4OS02LjAyMyA1LjA2OSAwIDIuNzczIDEuODkyIDQuNTEyIDQgNS45MjdhLjI1LjI1IDAgMDEtLjEzOS40NThIMS41YTEuMjUgMS4yNSAwIDAwMCAyLjVoMTAuOTc3YS4yNTEuMjUxIDAgMDEuMTU5LjA1OCA0LjMzOSA0LjMzOSAwIDAxMS45MzIgMy40NjZjMCAzLjI2OC0zLjQyNiAzLjUyMi00LjQ3NyAzLjUyMi0xLjgxNCAwLTMuMTM5LS40MDUtMy44MzQtMS4xNzNhMy4zOTQgMy4zOTQgMCAwMS0uNjUtMi43IDEuMjUgMS4yNSAwIDAwLTIuNDg4LS4yNDZBNS43NiA1Ljc2IDAgMDA0LjQgMjEuNzUzYzEuMiAxLjMyNCAzLjExNCAyIDUuNjg4IDIgNC4xNzQgMCA2Ljk3Ny0yLjQyIDYuOTc3LTYuMDIyYTYuMDU5IDYuMDU5IDAgMDAtLjg0OS0zLjE0Ny4yNS4yNSAwIDAxLjIxNi0uMzc3SDIyLjVhMS4yNSAxLjI1IDAgMDAxLjI1LTEuMjU1eiJ9fSldKSl9fX0sIjU1YmUiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5yKGUpLG4uZChlLCJDZWxsU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxuLmQoZSwiVGFibGVNYXAiLChmdW5jdGlvbigpe3JldHVybiB2fSkpLG4uZChlLCJfX2NsaXBDZWxscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV9KSksbi5kKGUsIl9faW5zZXJ0Q2VsbHMiLChmdW5jdGlvbigpe3JldHVybiBafSkpLG4uZChlLCJfX3Bhc3RlZENlbGxzIiwoZnVuY3Rpb24oKXtyZXR1cm4gV30pKSxuLmQoZSwiYWRkQ29sdW1uIiwoZnVuY3Rpb24oKXtyZXR1cm4gbXR9KSksbi5kKGUsImFkZENvbHVtbkFmdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3R9KSksbi5kKGUsImFkZENvbHVtbkJlZm9yZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHl0fSkpLG4uZChlLCJhZGRSb3ciLChmdW5jdGlvbigpe3JldHVybiBrdH0pKSxuLmQoZSwiYWRkUm93QWZ0ZXIiLChmdW5jdGlvbigpe3JldHVybiBPdH0pKSxuLmQoZSwiYWRkUm93QmVmb3JlIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3R9KSksbi5kKGUsImNlbGxBcm91bmQiLChmdW5jdGlvbigpe3JldHVybiBifSkpLG4uZChlLCJjb2xDb3VudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSksbi5kKGUsImNvbHVtblJlc2l6aW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gV3R9KSksbi5kKGUsImNvbHVtblJlc2l6aW5nUGx1Z2luS2V5IiwoZnVuY3Rpb24oKXtyZXR1cm4gcXR9KSksbi5kKGUsImRlbGV0ZUNvbHVtbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh0fSkpLG4uZChlLCJkZWxldGVSb3ciLChmdW5jdGlvbigpe3JldHVybiBNdH0pKSxuLmQoZSwiZGVsZXRlVGFibGUiLChmdW5jdGlvbigpe3JldHVybiBKdH0pKSxuLmQoZSwiZmluZENlbGwiLChmdW5jdGlvbigpe3JldHVybiBFfSkpLG4uZChlLCJmaXhUYWJsZXMiLChmdW5jdGlvbigpe3JldHVybiBmdH0pKSxuLmQoZSwiZml4VGFibGVzS2V5IiwoZnVuY3Rpb24oKXtyZXR1cm4gcHR9KSksbi5kKGUsImdvVG9OZXh0Q2VsbCIsKGZ1bmN0aW9uKCl7cmV0dXJuICR0fSkpLG4uZChlLCJoYW5kbGVQYXN0ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl0fSkpLG4uZChlLCJpblNhbWVUYWJsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIE59KSksbi5kKGUsImlzSW5UYWJsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSksbi5kKGUsIm1lcmdlQ2VsbHMiLChmdW5jdGlvbigpe3JldHVybiBFdH0pKSxuLmQoZSwibW92ZUNlbGxGb3J3YXJkIiwoZnVuY3Rpb24oKXtyZXR1cm4gVH0pKSxuLmQoZSwibmV4dENlbGwiLChmdW5jdGlvbigpe3JldHVybiBSfSkpLG4uZChlLCJyZW1vdmVDb2x1bW4iLChmdW5jdGlvbigpe3JldHVybiB3dH0pKSxuLmQoZSwicmVtb3ZlUm93IiwoZnVuY3Rpb24oKXtyZXR1cm4gQ3R9KSksbi5kKGUsInJvd0lzSGVhZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnR9KSksbi5kKGUsInNlbGVjdGVkUmVjdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR0fSkpLG4uZChlLCJzZWxlY3Rpb25DZWxsIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKSxuLmQoZSwic2V0Q2VsbEF0dHIiLChmdW5jdGlvbigpe3JldHVybiB6dH0pKSxuLmQoZSwic3BsaXRDZWxsIiwoZnVuY3Rpb24oKXtyZXR1cm4gQXR9KSksbi5kKGUsInNwbGl0Q2VsbFdpdGhUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnR9KSksbi5kKGUsInRhYmxlRWRpdGluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGllfSkpLG4uZChlLCJ0YWJsZUVkaXRpbmdLZXkiLChmdW5jdGlvbigpe3JldHVybiB4fSkpLG4uZChlLCJ0YWJsZU5vZGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gVn0pKSxuLmQoZSwidG9nZ2xlSGVhZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUHR9KSksbi5kKGUsInRvZ2dsZUhlYWRlckNlbGwiLChmdW5jdGlvbigpe3JldHVybiBqdH0pKSxuLmQoZSwidG9nZ2xlSGVhZGVyQ29sdW1uIiwoZnVuY3Rpb24oKXtyZXR1cm4gRnR9KSksbi5kKGUsInRvZ2dsZUhlYWRlclJvdyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJ0fSkpLG4uZChlLCJ1cGRhdGVDb2x1bW5zT25SZXNpemUiLChmdW5jdGlvbigpe3JldHVybiBWdH0pKTt2YXIgcixvLGk9bigiNTMxMyIpLHM9bigiMzA0YSIpLGE9bigiN2YwNiIpLGM9bigiNTc2YSIpLGg9bigiMGFjMCIpO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCl7dmFyIHA9bmV3IFdlYWtNYXA7cj1mdW5jdGlvbih0KXtyZXR1cm4gcC5nZXQodCl9LG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gcC5zZXQodCxlKSxlfX1lbHNle3ZhciB1PVtdLGY9MTAsbD0wO3I9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx1Lmxlbmd0aDtlKz0yKWlmKHVbZV09PXQpcmV0dXJuIHVbZSsxXX0sbz1mdW5jdGlvbih0LGUpe3JldHVybiBsPT1mJiYobD0wKSx1W2wrK109dCx1W2wrK109ZX19dmFyIGQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5sZWZ0PXQsdGhpcy50b3A9ZSx0aGlzLnJpZ2h0PW4sdGhpcy5ib3R0b209cn0sdj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLndpZHRoPXQsdGhpcy5oZWlnaHQ9ZSx0aGlzLm1hcD1uLHRoaXMucHJvYmxlbXM9cn07ZnVuY3Rpb24gbSh0KXtpZigidGFibGUiIT10LnR5cGUuc3BlYy50YWJsZVJvbGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vdCBhIHRhYmxlIG5vZGU6ICIrdC50eXBlLm5hbWUpO2Zvcih2YXIgZT15KHQpLG49dC5jaGlsZENvdW50LHI9W10sbz0wLGk9bnVsbCxzPVtdLGE9MCxjPWUqbjthPGM7YSsrKXJbYV09MDtmb3IodmFyIGg9MCxwPTA7aDxuO2grKyl7dmFyIHU9dC5jaGlsZChoKTtwKys7Zm9yKHZhciBmPTA7O2YrKyl7d2hpbGUobzxyLmxlbmd0aCYmMCE9cltvXSlvKys7aWYoZj09dS5jaGlsZENvdW50KWJyZWFrO2Zvcih2YXIgbD11LmNoaWxkKGYpLGQ9bC5hdHRycyxtPWQuY29sc3Bhbix3PWQucm93c3Bhbix4PWQuY29sd2lkdGgsYj0wO2I8dztiKyspe2lmKGIraD49bil7KGl8fChpPVtdKSkucHVzaCh7dHlwZToib3Zlcmxvbmdfcm93c3BhbiIscG9zOnAsbjp3LWJ9KTticmVha31mb3IodmFyIGs9bytiKmUsUz0wO1M8bTtTKyspezA9PXJbaytTXT9yW2srU109cDooaXx8KGk9W10pKS5wdXNoKHt0eXBlOiJjb2xsaXNpb24iLHJvdzpoLHBvczpwLG46bS1TfSk7dmFyIE89eCYmeFtTXTtpZihPKXt2YXIgQz0oaytTKSVlKjIsTT1zW0NdO251bGw9PU18fE0hPU8mJjE9PXNbQysxXT8oc1tDXT1PLHNbQysxXT0xKTpNPT1PJiZzW0MrMV0rK319fW8rPW0scCs9bC5ub2RlU2l6ZX12YXIgVD0oaCsxKSplLE49MDt3aGlsZShvPFQpMD09cltvKytdJiZOKys7TiYmKGl8fChpPVtdKSkucHVzaCh7dHlwZToibWlzc2luZyIscm93OmgsbjpOfSkscCsrfWZvcih2YXIgRT1uZXcgdihlLG4scixpKSxBPSExLFI9MDshQSYmUjxzLmxlbmd0aDtSKz0yKW51bGwhPXNbUl0mJnNbUisxXTxuJiYoQT0hMCk7cmV0dXJuIEEmJmcoRSxzLHQpLEV9ZnVuY3Rpb24geSh0KXtmb3IodmFyIGU9LTEsbj0hMSxyPTA7cjx0LmNoaWxkQ291bnQ7cisrKXt2YXIgbz10LmNoaWxkKHIpLGk9MDtpZihuKWZvcih2YXIgcz0wO3M8cjtzKyspZm9yKHZhciBhPXQuY2hpbGQocyksYz0wO2M8YS5jaGlsZENvdW50O2MrKyl7dmFyIGg9YS5jaGlsZChjKTtzK2guYXR0cnMucm93c3Bhbj5yJiYoaSs9aC5hdHRycy5jb2xzcGFuKX1mb3IodmFyIHA9MDtwPG8uY2hpbGRDb3VudDtwKyspe3ZhciB1PW8uY2hpbGQocCk7aSs9dS5hdHRycy5jb2xzcGFuLHUuYXR0cnMucm93c3Bhbj4xJiYobj0hMCl9LTE9PWU/ZT1pOmUhPWkmJihlPU1hdGgubWF4KGUsaSkpfXJldHVybiBlfWZ1bmN0aW9uIGcodCxlLG4pe3QucHJvYmxlbXN8fCh0LnByb2JsZW1zPVtdKTtmb3IodmFyIHI9MCxvPXt9O3I8dC5tYXAubGVuZ3RoO3IrKyl7dmFyIGk9dC5tYXBbcl07aWYoIW9baV0pe29baV09ITA7Zm9yKHZhciBzPW4ubm9kZUF0KGkpLGE9bnVsbCxjPTA7YzxzLmF0dHJzLmNvbHNwYW47YysrKXt2YXIgaD0ocitjKSV0LndpZHRoLHA9ZVsyKmhdO251bGw9PXB8fHMuYXR0cnMuY29sd2lkdGgmJnMuYXR0cnMuY29sd2lkdGhbY109PXB8fCgoYXx8KGE9dyhzLmF0dHJzKSkpW2NdPXApfWEmJnQucHJvYmxlbXMudW5zaGlmdCh7dHlwZToiY29sd2lkdGggbWlzbWF0Y2giLHBvczppLGNvbHdpZHRoOmF9KX19fWZ1bmN0aW9uIHcodCl7aWYodC5jb2x3aWR0aClyZXR1cm4gdC5jb2x3aWR0aC5zbGljZSgpO2Zvcih2YXIgZT1bXSxuPTA7bjx0LmNvbHNwYW47bisrKWUucHVzaCgwKTtyZXR1cm4gZX12LnByb3RvdHlwZS5maW5kQ2VsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubWFwLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMubWFwW2VdO2lmKG49PXQpe2Zvcih2YXIgcj1lJXRoaXMud2lkdGgsbz1lL3RoaXMud2lkdGh8MCxpPXIrMSxzPW8rMSxhPTE7aTx0aGlzLndpZHRoJiZ0aGlzLm1hcFtlK2FdPT1uO2ErKylpKys7Zm9yKHZhciBjPTE7czx0aGlzLmhlaWdodCYmdGhpcy5tYXBbZSt0aGlzLndpZHRoKmNdPT1uO2MrKylzKys7cmV0dXJuIG5ldyBkKHIsbyxpLHMpfX10aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gY2VsbCB3aXRoIG9mZnNldCAiK3QrIiBmb3VuZCIpfSx2LnByb3RvdHlwZS5jb2xDb3VudD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubWFwLmxlbmd0aDtlKyspaWYodGhpcy5tYXBbZV09PXQpcmV0dXJuIGUldGhpcy53aWR0aDt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gY2VsbCB3aXRoIG9mZnNldCAiK3QrIiBmb3VuZCIpfSx2LnByb3RvdHlwZS5uZXh0Q2VsbD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kQ2VsbCh0KSxvPXIubGVmdCxpPXIucmlnaHQscz1yLnRvcCxhPXIuYm90dG9tO3JldHVybiJob3JpeiI9PWU/KG48MD8wPT1vOmk9PXRoaXMud2lkdGgpP251bGw6dGhpcy5tYXBbcyp0aGlzLndpZHRoKyhuPDA/by0xOmkpXToobjwwPzA9PXM6YT09dGhpcy5oZWlnaHQpP251bGw6dGhpcy5tYXBbbyt0aGlzLndpZHRoKihuPDA/cy0xOmEpXX0sdi5wcm90b3R5cGUucmVjdEJldHdlZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmZpbmRDZWxsKHQpLHI9bi5sZWZ0LG89bi5yaWdodCxpPW4udG9wLHM9bi5ib3R0b20sYT10aGlzLmZpbmRDZWxsKGUpLGM9YS5sZWZ0LGg9YS5yaWdodCxwPWEudG9wLHU9YS5ib3R0b207cmV0dXJuIG5ldyBkKE1hdGgubWluKHIsYyksTWF0aC5taW4oaSxwKSxNYXRoLm1heChvLGgpLE1hdGgubWF4KHMsdSkpfSx2LnByb3RvdHlwZS5jZWxsc0luUmVjdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj17fSxyPXQudG9wO3I8dC5ib3R0b207cisrKWZvcih2YXIgbz10LmxlZnQ7bzx0LnJpZ2h0O28rKyl7dmFyIGk9cip0aGlzLndpZHRoK28scz10aGlzLm1hcFtpXTtuW3NdfHwobltzXT0hMCxvPT10LmxlZnQmJm8mJnRoaXMubWFwW2ktMV09PXN8fHI9PXQudG9wJiZyJiZ0aGlzLm1hcFtpLXRoaXMud2lkdGhdPT1zfHxlLnB1c2gocykpfXJldHVybiBlfSx2LnByb3RvdHlwZS5wb3NpdGlvbkF0PWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bytuLmNoaWxkKHIpLm5vZGVTaXplO2lmKHI9PXQpe3ZhciBzPWUrdCp0aGlzLndpZHRoLGE9KHQrMSkqdGhpcy53aWR0aDt3aGlsZShzPGEmJnRoaXMubWFwW3NdPG8pcysrO3JldHVybiBzPT1hP2ktMTp0aGlzLm1hcFtzXX1vPWl9fSx2LmdldD1mdW5jdGlvbih0KXtyZXR1cm4gcih0KXx8byh0LG0odCkpfTt2YXIgeD1uZXcgaVsiZCJdKCJzZWxlY3RpbmdDZWxscyIpO2Z1bmN0aW9uIGIodCl7Zm9yKHZhciBlPXQuZGVwdGgtMTtlPjA7ZS0tKWlmKCJyb3ciPT10Lm5vZGUoZSkudHlwZS5zcGVjLnRhYmxlUm9sZSlyZXR1cm4gdC5ub2RlKDApLnJlc29sdmUodC5iZWZvcmUoZSsxKSk7cmV0dXJuIG51bGx9ZnVuY3Rpb24gayh0KXtmb3IodmFyIGU9dC5kZXB0aDtlPjA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkudHlwZS5zcGVjLnRhYmxlUm9sZTtpZigiY2VsbCI9PT1ufHwiaGVhZGVyX2NlbGwiPT09bilyZXR1cm4gdC5ub2RlKGUpfXJldHVybiBudWxsfWZ1bmN0aW9uIFModCl7Zm9yKHZhciBlPXQuc2VsZWN0aW9uLiRoZWFkLG49ZS5kZXB0aDtuPjA7bi0tKWlmKCJyb3ciPT1lLm5vZGUobikudHlwZS5zcGVjLnRhYmxlUm9sZSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBPKHQpe3ZhciBlPXQuc2VsZWN0aW9uO3JldHVybiBlLiRhbmNob3JDZWxsP2UuJGFuY2hvckNlbGwucG9zPmUuJGhlYWRDZWxsLnBvcz9lLiRhbmNob3JDZWxsOmUuJGhlYWRDZWxsOmUubm9kZSYmImNlbGwiPT1lLm5vZGUudHlwZS5zcGVjLnRhYmxlUm9sZT9lLiRhbmNob3I6YihlLiRoZWFkKXx8QyhlLiRoZWFkKX1mdW5jdGlvbiBDKHQpe2Zvcih2YXIgZT10Lm5vZGVBZnRlcixuPXQucG9zO2U7ZT1lLmZpcnN0Q2hpbGQsbisrKXt2YXIgcj1lLnR5cGUuc3BlYy50YWJsZVJvbGU7aWYoImNlbGwiPT1yfHwiaGVhZGVyX2NlbGwiPT1yKXJldHVybiB0LmRvYy5yZXNvbHZlKG4pfWZvcih2YXIgbz10Lm5vZGVCZWZvcmUsaT10LnBvcztvO289by5sYXN0Q2hpbGQsaS0tKXt2YXIgcz1vLnR5cGUuc3BlYy50YWJsZVJvbGU7aWYoImNlbGwiPT1zfHwiaGVhZGVyX2NlbGwiPT1zKXJldHVybiB0LmRvYy5yZXNvbHZlKGktby5ub2RlU2l6ZSl9fWZ1bmN0aW9uIE0odCl7cmV0dXJuInJvdyI9PXQucGFyZW50LnR5cGUuc3BlYy50YWJsZVJvbGUmJnQubm9kZUFmdGVyfWZ1bmN0aW9uIFQodCl7cmV0dXJuIHQubm9kZSgwKS5yZXNvbHZlKHQucG9zK3Qubm9kZUFmdGVyLm5vZGVTaXplKX1mdW5jdGlvbiBOKHQsZSl7cmV0dXJuIHQuZGVwdGg9PWUuZGVwdGgmJnQucG9zPj1lLnN0YXJ0KC0xKSYmdC5wb3M8PWUuZW5kKC0xKX1mdW5jdGlvbiBFKHQpe3JldHVybiB2LmdldCh0Lm5vZGUoLTEpKS5maW5kQ2VsbCh0LnBvcy10LnN0YXJ0KC0xKSl9ZnVuY3Rpb24gQSh0KXtyZXR1cm4gdi5nZXQodC5ub2RlKC0xKSkuY29sQ291bnQodC5wb3MtdC5zdGFydCgtMSkpfWZ1bmN0aW9uIFIodCxlLG4pe3ZhciByPXQuc3RhcnQoLTEpLG89di5nZXQodC5ub2RlKC0xKSksaT1vLm5leHRDZWxsKHQucG9zLXIsZSxuKTtyZXR1cm4gbnVsbD09aT9udWxsOnQubm9kZSgwKS5yZXNvbHZlKHIraSl9ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9e307Zm9yKHZhciBvIGluIHQpcltvXT10W29dO3JldHVybiByW2VdPW4scn1mdW5jdGlvbiBEKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0xKTt2YXIgcj16KHQsImNvbHNwYW4iLHQuY29sc3Bhbi1uKTtyZXR1cm4gci5jb2x3aWR0aCYmKHIuY29sd2lkdGg9ci5jb2x3aWR0aC5zbGljZSgpLHIuY29sd2lkdGguc3BsaWNlKGUsbiksci5jb2x3aWR0aC5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4gdD4wfSkpfHwoci5jb2x3aWR0aD1udWxsKSkscn1mdW5jdGlvbiBJKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0xKTt2YXIgcj16KHQsImNvbHNwYW4iLHQuY29sc3BhbituKTtpZihyLmNvbHdpZHRoKXtyLmNvbHdpZHRoPXIuY29sd2lkdGguc2xpY2UoKTtmb3IodmFyIG89MDtvPG47bysrKXIuY29sd2lkdGguc3BsaWNlKGUsMCwwKX1yZXR1cm4gcn12YXIgUD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9ZS5ub2RlKC0xKSxvPXYuZ2V0KHIpLHM9ZS5zdGFydCgtMSksYT1vLnJlY3RCZXR3ZWVuKGUucG9zLXMsbi5wb3MtcyksYz1lLm5vZGUoMCksaD1vLmNlbGxzSW5SZWN0KGEpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQhPW4ucG9zLXN9KSk7aC51bnNoaWZ0KG4ucG9zLXMpO3ZhciBwPWgubWFwKChmdW5jdGlvbih0KXt2YXIgZT1yLm5vZGVBdCh0KSxuPXQrcysxO3JldHVybiBuZXcgaVsiZiJdKGMucmVzb2x2ZShuKSxjLnJlc29sdmUobitlLmNvbnRlbnQuc2l6ZSkpfSkpO3QuY2FsbCh0aGlzLHBbMF0uJGZyb20scFswXS4kdG8scCksdGhpcy4kYW5jaG9yQ2VsbD1lLHRoaXMuJGhlYWRDZWxsPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LG4pe3ZhciByPXQucmVzb2x2ZShuLm1hcCh0aGlzLiRhbmNob3JDZWxsLnBvcykpLG89dC5yZXNvbHZlKG4ubWFwKHRoaXMuJGhlYWRDZWxsLnBvcykpO2lmKE0ocikmJk0obykmJk4ocixvKSl7dmFyIHM9dGhpcy4kYW5jaG9yQ2VsbC5ub2RlKC0xKSE9ci5ub2RlKC0xKTtyZXR1cm4gcyYmdGhpcy5pc1Jvd1NlbGVjdGlvbigpP2Uucm93U2VsZWN0aW9uKHIsbyk6cyYmdGhpcy5pc0NvbFNlbGVjdGlvbigpP2UuY29sU2VsZWN0aW9uKHIsbyk6bmV3IGUocixvKX1yZXR1cm4gaVsiZyJdLmJldHdlZW4ocixvKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLiRhbmNob3JDZWxsLm5vZGUoLTEpLGU9di5nZXQodCksbj10aGlzLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxyPWUucmVjdEJldHdlZW4odGhpcy4kYW5jaG9yQ2VsbC5wb3Mtbix0aGlzLiRoZWFkQ2VsbC5wb3Mtbiksbz17fSxpPVtdLGE9ci50b3A7YTxyLmJvdHRvbTthKyspe2Zvcih2YXIgYz1bXSxoPWEqZS53aWR0aCtyLmxlZnQscD1yLmxlZnQ7cDxyLnJpZ2h0O3ArKyxoKyspe3ZhciB1PWUubWFwW2hdO2lmKCFvW3VdKXtvW3VdPSEwO3ZhciBmPWUuZmluZENlbGwodSksbD10Lm5vZGVBdCh1KSxkPXIubGVmdC1mLmxlZnQsbT1mLnJpZ2h0LXIucmlnaHQ7aWYoZD4wfHxtPjApe3ZhciB5PWwuYXR0cnM7ZD4wJiYoeT1EKHksMCxkKSksbT4wJiYoeT1EKHkseS5jb2xzcGFuLW0sbSkpLGw9Zi5sZWZ0PHIubGVmdD9sLnR5cGUuY3JlYXRlQW5kRmlsbCh5KTpsLnR5cGUuY3JlYXRlKHksbC5jb250ZW50KX1pZihmLnRvcDxyLnRvcHx8Zi5ib3R0b20+ci5ib3R0b20pe3ZhciBnPXoobC5hdHRycywicm93c3BhbiIsTWF0aC5taW4oZi5ib3R0b20sci5ib3R0b20pLU1hdGgubWF4KGYudG9wLHIudG9wKSk7bD1mLnRvcDxyLnRvcD9sLnR5cGUuY3JlYXRlQW5kRmlsbChnKTpsLnR5cGUuY3JlYXRlKGcsbC5jb250ZW50KX1jLnB1c2gobCl9fWkucHVzaCh0LmNoaWxkKGEpLmNvcHkoc1siYyJdLmZyb20oYykpKX12YXIgdz10aGlzLmlzQ29sU2VsZWN0aW9uKCkmJnRoaXMuaXNSb3dTZWxlY3Rpb24oKT90Omk7cmV0dXJuIG5ldyBzWyJpIl0oc1siYyJdLmZyb20odyksMSwxKX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe3ZvaWQgMD09PW4mJihuPXNbImkiXS5lbXB0eSk7Zm9yKHZhciByPWUuc3RlcHMubGVuZ3RoLG89dGhpcy5yYW5nZXMsaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldLGM9YS4kZnJvbSxoPWEuJHRvLHA9ZS5tYXBwaW5nLnNsaWNlKHIpO2UucmVwbGFjZShwLm1hcChjLnBvcykscC5tYXAoaC5wb3MpLGk/c1siaSJdLmVtcHR5Om4pfXZhciB1PXQuZmluZEZyb20oZS5kb2MucmVzb2x2ZShlLm1hcHBpbmcuc2xpY2UocikubWFwKHRoaXMudG8pKSwtMSk7dSYmZS5zZXRTZWxlY3Rpb24odSl9LGUucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSl7dGhpcy5yZXBsYWNlKHQsbmV3IHNbImkiXShzWyJjIl0uZnJvbShlKSwwLDApKX0sZS5wcm90b3R5cGUuZm9yRWFjaENlbGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuJGFuY2hvckNlbGwubm9kZSgtMSksbj12LmdldChlKSxyPXRoaXMuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG89bi5jZWxsc0luUmVjdChuLnJlY3RCZXR3ZWVuKHRoaXMuJGFuY2hvckNlbGwucG9zLXIsdGhpcy4kaGVhZENlbGwucG9zLXIpKSxpPTA7aTxvLmxlbmd0aDtpKyspdChlLm5vZGVBdChvW2ldKSxyK29baV0pfSxlLnByb3RvdHlwZS5pc0NvbFNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGFuY2hvckNlbGwuaW5kZXgoLTEpLGU9dGhpcy4kaGVhZENlbGwuaW5kZXgoLTEpO2lmKE1hdGgubWluKHQsZSk+MClyZXR1cm4hMTt2YXIgbj10K3RoaXMuJGFuY2hvckNlbGwubm9kZUFmdGVyLmF0dHJzLnJvd3NwYW4scj1lK3RoaXMuJGhlYWRDZWxsLm5vZGVBZnRlci5hdHRycy5yb3dzcGFuO3JldHVybiBNYXRoLm1heChuLHIpPT10aGlzLiRoZWFkQ2VsbC5ub2RlKC0xKS5jaGlsZENvdW50fSxlLmNvbFNlbGVjdGlvbj1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPXQpO3ZhciByPXYuZ2V0KHQubm9kZSgtMSkpLG89dC5zdGFydCgtMSksaT1yLmZpbmRDZWxsKHQucG9zLW8pLHM9ci5maW5kQ2VsbChuLnBvcy1vKSxhPXQubm9kZSgwKTtyZXR1cm4gaS50b3A8PXMudG9wPyhpLnRvcD4wJiYodD1hLnJlc29sdmUobytyLm1hcFtpLmxlZnRdKSkscy5ib3R0b208ci5oZWlnaHQmJihuPWEucmVzb2x2ZShvK3IubWFwW3Iud2lkdGgqKHIuaGVpZ2h0LTEpK3MucmlnaHQtMV0pKSk6KHMudG9wPjAmJihuPWEucmVzb2x2ZShvK3IubWFwW3MubGVmdF0pKSxpLmJvdHRvbTxyLmhlaWdodCYmKHQ9YS5yZXNvbHZlKG8rci5tYXBbci53aWR0aCooci5oZWlnaHQtMSkraS5yaWdodC0xXSkpKSxuZXcgZSh0LG4pfSxlLnByb3RvdHlwZS5pc1Jvd1NlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciB0PXYuZ2V0KHRoaXMuJGFuY2hvckNlbGwubm9kZSgtMSkpLGU9dGhpcy4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbj10LmNvbENvdW50KHRoaXMuJGFuY2hvckNlbGwucG9zLWUpLHI9dC5jb2xDb3VudCh0aGlzLiRoZWFkQ2VsbC5wb3MtZSk7aWYoTWF0aC5taW4obixyKT4wKXJldHVybiExO3ZhciBvPW4rdGhpcy4kYW5jaG9yQ2VsbC5ub2RlQWZ0ZXIuYXR0cnMuY29sc3BhbixpPXIrdGhpcy4kaGVhZENlbGwubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW47cmV0dXJuIE1hdGgubWF4KG8saSk9PXQud2lkdGh9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC4kYW5jaG9yQ2VsbC5wb3M9PXRoaXMuJGFuY2hvckNlbGwucG9zJiZ0LiRoZWFkQ2VsbC5wb3M9PXRoaXMuJGhlYWRDZWxsLnBvc30sZS5yb3dTZWxlY3Rpb249ZnVuY3Rpb24odCxuKXt2b2lkIDA9PT1uJiYobj10KTt2YXIgcj12LmdldCh0Lm5vZGUoLTEpKSxvPXQuc3RhcnQoLTEpLGk9ci5maW5kQ2VsbCh0LnBvcy1vKSxzPXIuZmluZENlbGwobi5wb3MtbyksYT10Lm5vZGUoMCk7cmV0dXJuIGkubGVmdDw9cy5sZWZ0PyhpLmxlZnQ+MCYmKHQ9YS5yZXNvbHZlKG8rci5tYXBbaS50b3Aqci53aWR0aF0pKSxzLnJpZ2h0PHIud2lkdGgmJihuPWEucmVzb2x2ZShvK3IubWFwW3Iud2lkdGgqKHMudG9wKzEpLTFdKSkpOihzLmxlZnQ+MCYmKG49YS5yZXNvbHZlKG8rci5tYXBbcy50b3Aqci53aWR0aF0pKSxpLnJpZ2h0PHIud2lkdGgmJih0PWEucmVzb2x2ZShvK3IubWFwW3Iud2lkdGgqKGkudG9wKzEpLTFdKSkpLG5ldyBlKHQsbil9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJjZWxsIixhbmNob3I6dGhpcy4kYW5jaG9yQ2VsbC5wb3MsaGVhZDp0aGlzLiRoZWFkQ2VsbC5wb3N9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvciksdC5yZXNvbHZlKG4uaGVhZCkpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scil7cmV0dXJuIHZvaWQgMD09PXImJihyPW4pLG5ldyBlKHQucmVzb2x2ZShuKSx0LnJlc29sdmUocikpfSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgQih0aGlzLiRhbmNob3JDZWxsLnBvcyx0aGlzLiRoZWFkQ2VsbC5wb3MpfSxlfShpWyJlIl0pO1AucHJvdG90eXBlLnZpc2libGU9ITEsaVsiZSJdLmpzb25JRCgiY2VsbCIsUCk7dmFyIEI9ZnVuY3Rpb24odCxlKXt0aGlzLmFuY2hvcj10LHRoaXMuaGVhZD1lfTtmdW5jdGlvbiBGKHQpe2lmKCEodC5zZWxlY3Rpb24gaW5zdGFuY2VvZiBQKSlyZXR1cm4gbnVsbDt2YXIgZT1bXTtyZXR1cm4gdC5zZWxlY3Rpb24uZm9yRWFjaENlbGwoKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKGNbImEiXS5ub2RlKG4sbit0Lm5vZGVTaXplLHtjbGFzczoic2VsZWN0ZWRDZWxsIn0pKX0pKSxjWyJiIl0uY3JlYXRlKHQuZG9jLGUpfWZ1bmN0aW9uIGoodCl7dmFyIGU9dC4kZnJvbSxuPXQuJHRvO2lmKGUucG9zPT1uLnBvc3x8ZS5wb3M8ZS5wb3MtNilyZXR1cm4hMTtmb3IodmFyIHI9ZS5wb3Msbz1uLnBvcyxpPWUuZGVwdGg7aT49MDtpLS0scisrKWlmKGUuYWZ0ZXIoaSsxKTxlLmVuZChpKSlicmVhaztmb3IodmFyIHM9bi5kZXB0aDtzPj0wO3MtLSxvLS0paWYobi5iZWZvcmUocysxKT5uLnN0YXJ0KHMpKWJyZWFrO3JldHVybiByPT1vJiYvcm93fHRhYmxlLy50ZXN0KGUubm9kZShpKS50eXBlLnNwZWMudGFibGVSb2xlKX1mdW5jdGlvbiBfKHQpe2Zvcih2YXIgZSxuLHI9dC4kZnJvbSxvPXQuJHRvLGk9ci5kZXB0aDtpPjA7aS0tKXt2YXIgcz1yLm5vZGUoaSk7aWYoImNlbGwiPT09cy50eXBlLnNwZWMudGFibGVSb2xlfHwiaGVhZGVyX2NlbGwiPT09cy50eXBlLnNwZWMudGFibGVSb2xlKXtlPXM7YnJlYWt9fWZvcih2YXIgYT1vLmRlcHRoO2E+MDthLS0pe3ZhciBjPW8ubm9kZShhKTtpZigiY2VsbCI9PT1jLnR5cGUuc3BlYy50YWJsZVJvbGV8fCJoZWFkZXJfY2VsbCI9PT1jLnR5cGUuc3BlYy50YWJsZVJvbGUpe249YzticmVha319cmV0dXJuIGUhPT1uJiYwPT09by5wYXJlbnRPZmZzZXR9ZnVuY3Rpb24gJCh0LGUsbil7dmFyIHIsbyxzPShlfHx0KS5zZWxlY3Rpb24sYT0oZXx8dCkuZG9jO2lmKHMgaW5zdGFuY2VvZiBpWyJiIl0mJihvPXMubm9kZS50eXBlLnNwZWMudGFibGVSb2xlKSl7aWYoImNlbGwiPT1vfHwiaGVhZGVyX2NlbGwiPT1vKXI9UC5jcmVhdGUoYSxzLmZyb20pO2Vsc2UgaWYoInJvdyI9PW8pe3ZhciBjPWEucmVzb2x2ZShzLmZyb20rMSk7cj1QLnJvd1NlbGVjdGlvbihjLGMpfWVsc2UgaWYoIW4pe3ZhciBoPXYuZ2V0KHMubm9kZSkscD1zLmZyb20rMSx1PXAraC5tYXBbaC53aWR0aCpoLmhlaWdodC0xXTtyPVAuY3JlYXRlKGEscCsxLHUpfX1lbHNlIHMgaW5zdGFuY2VvZiBpWyJnIl0mJmoocyk/cj1pWyJnIl0uY3JlYXRlKGEscy5mcm9tKTpzIGluc3RhbmNlb2YgaVsiZyJdJiZfKHMpJiYocj1pWyJnIl0uY3JlYXRlKGEscy4kZnJvbS5zdGFydCgpLHMuJGZyb20uZW5kKCkpKTtyZXR1cm4gciYmKGV8fChlPXQudHIpKS5zZXRTZWxlY3Rpb24ociksZX1mdW5jdGlvbiBKKHQsZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoImRhdGEtY29sd2lkdGgiKSxyPW4mJi9eXGQrKCxcZCspKiQvLnRlc3Qobik/bi5zcGxpdCgiLCIpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0KX0pKTpudWxsLG89TnVtYmVyKHQuZ2V0QXR0cmlidXRlKCJjb2xzcGFuIil8fDEpLGk9e2NvbHNwYW46byxyb3dzcGFuOk51bWJlcih0LmdldEF0dHJpYnV0ZSgicm93c3BhbiIpfHwxKSxjb2x3aWR0aDpyJiZyLmxlbmd0aD09bz9yOm51bGx9O2Zvcih2YXIgcyBpbiBlKXt2YXIgYT1lW3NdLmdldEZyb21ET00sYz1hJiZhKHQpO251bGwhPWMmJihpW3NdPWMpfXJldHVybiBpfWZ1bmN0aW9uIEwodCxlKXt2YXIgbj17fTtmb3IodmFyIHIgaW4gMSE9dC5hdHRycy5jb2xzcGFuJiYobi5jb2xzcGFuPXQuYXR0cnMuY29sc3BhbiksMSE9dC5hdHRycy5yb3dzcGFuJiYobi5yb3dzcGFuPXQuYXR0cnMucm93c3BhbiksdC5hdHRycy5jb2x3aWR0aCYmKG5bImRhdGEtY29sd2lkdGgiXT10LmF0dHJzLmNvbHdpZHRoLmpvaW4oIiwiKSksZSl7dmFyIG89ZVtyXS5zZXRET01BdHRyO28mJm8odC5hdHRyc1tyXSxuKX1yZXR1cm4gbn1mdW5jdGlvbiBWKHQpe3ZhciBlPXQuY2VsbEF0dHJpYnV0ZXN8fHt9LG49e2NvbHNwYW46e2RlZmF1bHQ6MX0scm93c3Bhbjp7ZGVmYXVsdDoxfSxjb2x3aWR0aDp7ZGVmYXVsdDpudWxsfX07Zm9yKHZhciByIGluIGUpbltyXT17ZGVmYXVsdDplW3JdLmRlZmF1bHR9O3JldHVybnt0YWJsZTp7Y29udGVudDoidGFibGVfcm93KyIsdGFibGVSb2xlOiJ0YWJsZSIsaXNvbGF0aW5nOiEwLGdyb3VwOnQudGFibGVHcm91cCxwYXJzZURPTTpbe3RhZzoidGFibGUifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInRhYmxlIixbInRib2R5IiwwXV19fSx0YWJsZV9yb3c6e2NvbnRlbnQ6Iih0YWJsZV9jZWxsIHwgdGFibGVfaGVhZGVyKSoiLHRhYmxlUm9sZToicm93IixwYXJzZURPTTpbe3RhZzoidHIifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInRyIiwwXX19LHRhYmxlX2NlbGw6e2NvbnRlbnQ6dC5jZWxsQ29udGVudCxhdHRyczpuLHRhYmxlUm9sZToiY2VsbCIsaXNvbGF0aW5nOiEwLHBhcnNlRE9NOlt7dGFnOiJ0ZCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuIEoodCxlKX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm5bInRkIixMKHQsZSksMF19fSx0YWJsZV9oZWFkZXI6e2NvbnRlbnQ6dC5jZWxsQ29udGVudCxhdHRyczpuLHRhYmxlUm9sZToiaGVhZGVyX2NlbGwiLGlzb2xhdGluZzohMCxwYXJzZURPTTpbe3RhZzoidGgiLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybiBKKHQsZSl9fV0sdG9ET006ZnVuY3Rpb24odCl7cmV0dXJuWyJ0aCIsTCh0LGUpLDBdfX19fWZ1bmN0aW9uIHEodCl7dmFyIGU9dC5jYWNoZWQudGFibGVOb2RlVHlwZXM7aWYoIWUpZm9yKHZhciBuIGluIGU9dC5jYWNoZWQudGFibGVOb2RlVHlwZXM9e30sdC5ub2Rlcyl7dmFyIHI9dC5ub2Rlc1tuXSxvPXIuc3BlYy50YWJsZVJvbGU7byYmKGVbb109cil9cmV0dXJuIGV9ZnVuY3Rpb24gVyh0KXtpZighdC5zaXplKXJldHVybiBudWxsO3ZhciBlPXQuY29udGVudCxuPXQub3BlblN0YXJ0LHI9dC5vcGVuRW5kO3doaWxlKDE9PWUuY2hpbGRDb3VudCYmKG4+MCYmcj4wfHwidGFibGUiPT1lLmZpcnN0Q2hpbGQudHlwZS5zcGVjLnRhYmxlUm9sZSkpbi0tLHItLSxlPWUuZmlyc3RDaGlsZC5jb250ZW50O3ZhciBvPWUuZmlyc3RDaGlsZCxpPW8udHlwZS5zcGVjLnRhYmxlUm9sZSxhPW8udHlwZS5zY2hlbWEsYz1bXTtpZigicm93Ij09aSlmb3IodmFyIGg9MDtoPGUuY2hpbGRDb3VudDtoKyspe3ZhciBwPWUuY2hpbGQoaCkuY29udGVudCx1PWg/MDpNYXRoLm1heCgwLG4tMSksZj1oPGUuY2hpbGRDb3VudC0xPzA6TWF0aC5tYXgoMCxyLTEpOyh1fHxmKSYmKHA9SyhxKGEpLnJvdyxuZXcgc1siaSJdKHAsdSxmKSkuY29udGVudCksYy5wdXNoKHApfWVsc2V7aWYoImNlbGwiIT1pJiYiaGVhZGVyX2NlbGwiIT1pKXJldHVybiBudWxsO2MucHVzaChufHxyP0socShhKS5yb3csbmV3IHNbImkiXShlLG4scikpLmNvbnRlbnQ6ZSl9cmV0dXJuIEgoYSxjKX1mdW5jdGlvbiBIKHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIG89ZVtyXSxpPW8uY2hpbGRDb3VudC0xO2k+PTA7aS0tKWZvcih2YXIgYT1vLmNoaWxkKGkpLmF0dHJzLGM9YS5yb3dzcGFuLGg9YS5jb2xzcGFuLHA9cjtwPHIrYztwKyspbltwXT0obltwXXx8MCkraDtmb3IodmFyIHU9MCxmPTA7ZjxuLmxlbmd0aDtmKyspdT1NYXRoLm1heCh1LG5bZl0pO2Zvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCsrKWlmKGw+PWUubGVuZ3RoJiZlLnB1c2goc1siYyJdLmVtcHR5KSxuW2xdPHUpe2Zvcih2YXIgZD1xKHQpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLHY9W10sbT1uW2xdO208dTttKyspdi5wdXNoKGQpO2VbbF09ZVtsXS5hcHBlbmQoc1siYyJdLmZyb20odikpfXJldHVybntoZWlnaHQ6ZS5sZW5ndGgsd2lkdGg6dSxyb3dzOmV9fWZ1bmN0aW9uIEsodCxlKXt2YXIgbj10LmNyZWF0ZUFuZEZpbGwoKSxyPW5ldyBoWyJkIl0obikucmVwbGFjZSgwLG4uY29udGVudC5zaXplLGUpO3JldHVybiByLmRvY31mdW5jdGlvbiBVKHQsZSxuKXt2YXIgcj10LndpZHRoLG89dC5oZWlnaHQsaT10LnJvd3M7aWYociE9ZSl7Zm9yKHZhciBhPVtdLGM9W10saD0wO2g8aS5sZW5ndGg7aCsrKXtmb3IodmFyIHA9aVtoXSx1PVtdLGY9YVtoXXx8MCxsPTA7ZjxlO2wrKyl7dmFyIGQ9cC5jaGlsZChsJXAuY2hpbGRDb3VudCk7ZitkLmF0dHJzLmNvbHNwYW4+ZSYmKGQ9ZC50eXBlLmNyZWF0ZShEKGQuYXR0cnMsZC5hdHRycy5jb2xzcGFuLGYrZC5hdHRycy5jb2xzcGFuLWUpLGQuY29udGVudCkpLHUucHVzaChkKSxmKz1kLmF0dHJzLmNvbHNwYW47Zm9yKHZhciB2PTE7djxkLmF0dHJzLnJvd3NwYW47disrKWFbaCt2XT0oYVtoK3ZdfHwwKStkLmF0dHJzLmNvbHNwYW59Yy5wdXNoKHNbImMiXS5mcm9tKHUpKX1pPWMscj1lfWlmKG8hPW4pe2Zvcih2YXIgbT1bXSx5PTAsZz0wO3k8bjt5KyssZysrKXtmb3IodmFyIHc9W10seD1pW2clb10sYj0wO2I8eC5jaGlsZENvdW50O2IrKyl7dmFyIGs9eC5jaGlsZChiKTt5K2suYXR0cnMucm93c3Bhbj5uJiYoaz1rLnR5cGUuY3JlYXRlKHooay5hdHRycywicm93c3BhbiIsbi1rLmF0dHJzLnJvd3NwYW4pLGsuY29udGVudCkpLHcucHVzaChrKX1tLnB1c2goc1siYyJdLmZyb20odykpfWk9bSxvPW59cmV0dXJue3dpZHRoOnIsaGVpZ2h0Om8scm93czppfX1mdW5jdGlvbiBHKHQsZSxuLHIsbyxpLGEpe3ZhciBjLGgscD10LmRvYy50eXBlLnNjaGVtYSx1PXEocCk7aWYobz5lLndpZHRoKWZvcih2YXIgZj0wLGw9MDtmPGUuaGVpZ2h0O2YrKyl7dmFyIGQ9bi5jaGlsZChmKTtsKz1kLm5vZGVTaXplO3ZhciB2PVtdLG09dm9pZCAwO209bnVsbD09ZC5sYXN0Q2hpbGR8fGQubGFzdENoaWxkLnR5cGU9PXUuY2VsbD9jfHwoYz11LmNlbGwuY3JlYXRlQW5kRmlsbCgpKTpofHwoaD11LmhlYWRlcl9jZWxsLmNyZWF0ZUFuZEZpbGwoKSk7Zm9yKHZhciB5PWUud2lkdGg7eTxvO3krKyl2LnB1c2gobSk7dC5pbnNlcnQodC5tYXBwaW5nLnNsaWNlKGEpLm1hcChsLTErciksdil9aWYoaT5lLmhlaWdodCl7Zm9yKHZhciBnPVtdLHc9MCx4PShlLmhlaWdodC0xKSplLndpZHRoO3c8TWF0aC5tYXgoZS53aWR0aCxvKTt3Kyspe3ZhciBiPSEodz49ZS53aWR0aCkmJm4ubm9kZUF0KGUubWFwW3grd10pLnR5cGU9PXUuaGVhZGVyX2NlbGw7Zy5wdXNoKGI/aHx8KGg9dS5oZWFkZXJfY2VsbC5jcmVhdGVBbmRGaWxsKCkpOmN8fChjPXUuY2VsbC5jcmVhdGVBbmRGaWxsKCkpKX1mb3IodmFyIGs9dS5yb3cuY3JlYXRlKG51bGwsc1siYyJdLmZyb20oZykpLFM9W10sTz1lLmhlaWdodDtPPGk7TysrKVMucHVzaChrKTt0Lmluc2VydCh0Lm1hcHBpbmcuc2xpY2UoYSkubWFwKHIrbi5ub2RlU2l6ZS0yKSxTKX1yZXR1cm4hKCFjJiYhaCl9ZnVuY3Rpb24gWCh0LGUsbixyLG8saSxzLGEpe2lmKDA9PXN8fHM9PWUuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgYz0hMSxoPW87aDxpO2grKyl7dmFyIHA9cyplLndpZHRoK2gsdT1lLm1hcFtwXTtpZihlLm1hcFtwLWUud2lkdGhdPT11KXtjPSEwO3ZhciBmPW4ubm9kZUF0KHUpLGw9ZS5maW5kQ2VsbCh1KSxkPWwudG9wLHY9bC5sZWZ0O3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcuc2xpY2UoYSkubWFwKHUrciksbnVsbCx6KGYuYXR0cnMsInJvd3NwYW4iLHMtZCkpLHQuaW5zZXJ0KHQubWFwcGluZy5zbGljZShhKS5tYXAoZS5wb3NpdGlvbkF0KHMsdixuKSksZi50eXBlLmNyZWF0ZUFuZEZpbGwoeihmLmF0dHJzLCJyb3dzcGFuIixkK2YuYXR0cnMucm93c3Bhbi1zKSkpLGgrPWYuYXR0cnMuY29sc3Bhbi0xfX1yZXR1cm4gY31mdW5jdGlvbiBZKHQsZSxuLHIsbyxpLHMsYSl7aWYoMD09c3x8cz09ZS53aWR0aClyZXR1cm4hMTtmb3IodmFyIGM9ITEsaD1vO2g8aTtoKyspe3ZhciBwPWgqZS53aWR0aCtzLHU9ZS5tYXBbcF07aWYoZS5tYXBbcC0xXT09dSl7Yz0hMDt2YXIgZj1uLm5vZGVBdCh1KSxsPWUuY29sQ291bnQodSksZD10Lm1hcHBpbmcuc2xpY2UoYSkubWFwKHUrcik7dC5zZXROb2RlTWFya3VwKGQsbnVsbCxEKGYuYXR0cnMscy1sLGYuYXR0cnMuY29sc3Bhbi0ocy1sKSkpLHQuaW5zZXJ0KGQrZi5ub2RlU2l6ZSxmLnR5cGUuY3JlYXRlQW5kRmlsbChEKGYuYXR0cnMsMCxzLWwpKSksaCs9Zi5hdHRycy5yb3dzcGFuLTF9fXJldHVybiBjfWZ1bmN0aW9uIFoodCxlLG4scixvKXt2YXIgaT1uP3QuZG9jLm5vZGVBdChuLTEpOnQuZG9jLGE9di5nZXQoaSksYz1yLnRvcCxoPXIubGVmdCxwPWgrby53aWR0aCx1PWMrby5oZWlnaHQsZj10LnRyLGw9MDtmdW5jdGlvbiBkKCl7aT1uP2YuZG9jLm5vZGVBdChuLTEpOmYuZG9jLGE9di5nZXQoaSksbD1mLm1hcHBpbmcubWFwcy5sZW5ndGh9RyhmLGEsaSxuLHAsdSxsKSYmZCgpLFgoZixhLGksbixoLHAsYyxsKSYmZCgpLFgoZixhLGksbixoLHAsdSxsKSYmZCgpLFkoZixhLGksbixjLHUsaCxsKSYmZCgpLFkoZixhLGksbixjLHUscCxsKSYmZCgpO2Zvcih2YXIgbT1jO208dTttKyspe3ZhciB5PWEucG9zaXRpb25BdChtLGgsaSksZz1hLnBvc2l0aW9uQXQobSxwLGkpO2YucmVwbGFjZShmLm1hcHBpbmcuc2xpY2UobCkubWFwKHkrbiksZi5tYXBwaW5nLnNsaWNlKGwpLm1hcChnK24pLG5ldyBzWyJpIl0oby5yb3dzW20tY10sMCwwKSl9ZCgpLGYuc2V0U2VsZWN0aW9uKG5ldyBQKGYuZG9jLnJlc29sdmUobithLnBvc2l0aW9uQXQoYyxoLGkpKSxmLmRvYy5yZXNvbHZlKG4rYS5wb3NpdGlvbkF0KHUtMSxwLTEsaSkpKSksZShmKX1CLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBCKHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0sQi5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5hbmNob3IpLG49dC5yZXNvbHZlKHRoaXMuaGVhZCk7cmV0dXJuInJvdyI9PWUucGFyZW50LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJyb3ciPT1uLnBhcmVudC50eXBlLnNwZWMudGFibGVSb2xlJiZlLmluZGV4KCk8ZS5wYXJlbnQuY2hpbGRDb3VudCYmbi5pbmRleCgpPG4ucGFyZW50LmNoaWxkQ291bnQmJk4oZSxuKT9uZXcgUChlLG4pOmlbImUiXS5uZWFyKG4sMSl9O3ZhciBRPU9iamVjdChhWyJhIl0pKHtBcnJvd0xlZnQ6ZXQoImhvcml6IiwtMSksQXJyb3dSaWdodDpldCgiaG9yaXoiLDEpLEFycm93VXA6ZXQoInZlcnQiLC0xKSxBcnJvd0Rvd246ZXQoInZlcnQiLDEpLCJTaGlmdC1BcnJvd0xlZnQiOm50KCJob3JpeiIsLTEpLCJTaGlmdC1BcnJvd1JpZ2h0IjpudCgiaG9yaXoiLDEpLCJTaGlmdC1BcnJvd1VwIjpudCgidmVydCIsLTEpLCJTaGlmdC1BcnJvd0Rvd24iOm50KCJ2ZXJ0IiwxKSxCYWNrc3BhY2U6cnQsIk1vZC1CYWNrc3BhY2UiOnJ0LERlbGV0ZTpydCwiTW9kLURlbGV0ZSI6cnR9KTtmdW5jdGlvbiB0dCh0LGUsbil7cmV0dXJuIW4uZXEodC5zZWxlY3Rpb24pJiYoZSYmZSh0LnRyLnNldFNlbGVjdGlvbihuKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gZXQodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyLG8pe3ZhciBzPW4uc2VsZWN0aW9uO2lmKHMgaW5zdGFuY2VvZiBQKXJldHVybiB0dChuLHIsaVsiZSJdLm5lYXIocy4kaGVhZENlbGwsZSkpO2lmKCJob3JpeiIhPXQmJiFzLmVtcHR5KXJldHVybiExO3ZhciBhPWF0KG8sdCxlKTtpZihudWxsPT1hKXJldHVybiExO2lmKCJob3JpeiI9PXQpcmV0dXJuIHR0KG4scixpWyJlIl0ubmVhcihuLmRvYy5yZXNvbHZlKHMuaGVhZCtlKSxlKSk7dmFyIGMsaD1uLmRvYy5yZXNvbHZlKGEpLHA9UihoLHQsZSk7cmV0dXJuIGM9cD9pWyJlIl0ubmVhcihwLDEpOmU8MD9pWyJlIl0ubmVhcihuLmRvYy5yZXNvbHZlKGguYmVmb3JlKC0xKSksLTEpOmlbImUiXS5uZWFyKG4uZG9jLnJlc29sdmUoaC5hZnRlcigtMSkpLDEpLHR0KG4scixjKX19ZnVuY3Rpb24gbnQodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyLG8pe3ZhciBpPW4uc2VsZWN0aW9uO2lmKCEoaSBpbnN0YW5jZW9mIFApKXt2YXIgcz1hdChvLHQsZSk7aWYobnVsbD09cylyZXR1cm4hMTtpPW5ldyBQKG4uZG9jLnJlc29sdmUocykpfXZhciBhPVIoaS4kaGVhZENlbGwsdCxlKTtyZXR1cm4hIWEmJnR0KG4scixuZXcgUChpLiRhbmNob3JDZWxsLGEpKX19ZnVuY3Rpb24gcnQodCxlKXt2YXIgbj10LnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiBQKSlyZXR1cm4hMTtpZihlKXt2YXIgcj10LnRyLG89cSh0LnNjaGVtYSkuY2VsbC5jcmVhdGVBbmRGaWxsKCkuY29udGVudDtuLmZvckVhY2hDZWxsKChmdW5jdGlvbih0LGUpe3QuY29udGVudC5lcShvKXx8ci5yZXBsYWNlKHIubWFwcGluZy5tYXAoZSsxKSxyLm1hcHBpbmcubWFwKGUrdC5ub2RlU2l6ZS0xKSxuZXcgc1siaSJdKG8sMCwwKSl9KSksci5kb2NDaGFuZ2VkJiZlKHIpfXJldHVybiEwfWZ1bmN0aW9uIG90KHQsZSl7dmFyIG49dC5zdGF0ZS5kb2Mscj1iKG4ucmVzb2x2ZShlKSk7cmV0dXJuISFyJiYodC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgUChyKSkpLCEwKX1mdW5jdGlvbiBpdCh0LGUsbil7aWYoIVModC5zdGF0ZSkpcmV0dXJuITE7dmFyIHI9VyhuKSxvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiBQKXtyfHwocj17d2lkdGg6MSxoZWlnaHQ6MSxyb3dzOltzWyJjIl0uZnJvbShLKHEodC5zdGF0ZS5zY2hlbWEpLmNlbGwsbikpXX0pO3ZhciBpPW8uJGFuY2hvckNlbGwubm9kZSgtMSksYT1vLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxjPXYuZ2V0KGkpLnJlY3RCZXR3ZWVuKG8uJGFuY2hvckNlbGwucG9zLWEsby4kaGVhZENlbGwucG9zLWEpO3JldHVybiByPVUocixjLnJpZ2h0LWMubGVmdCxjLmJvdHRvbS1jLnRvcCksWih0LnN0YXRlLHQuZGlzcGF0Y2gsYSxjLHIpLCEwfWlmKHIpe3ZhciBoPU8odC5zdGF0ZSkscD1oLnN0YXJ0KC0xKTtyZXR1cm4gWih0LnN0YXRlLHQuZGlzcGF0Y2gscCx2LmdldChoLm5vZGUoLTEpKS5maW5kQ2VsbChoLnBvcy1wKSxyKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBzdCh0LGUpe2lmKCFlLmN0cmxLZXkmJiFlLm1ldGFLZXkpe3ZhciBuLHI9Y3QodCxlLnRhcmdldCk7aWYoZS5zaGlmdEtleSYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBQKW8odC5zdGF0ZS5zZWxlY3Rpb24uJGFuY2hvckNlbGwsZSksZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoZS5zaGlmdEtleSYmciYmbnVsbCE9KG49Yih0LnN0YXRlLnNlbGVjdGlvbi4kYW5jaG9yKSkmJmh0KHQsZSkucG9zIT1uLnBvcylvKG4sZSksZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoIXIpcmV0dXJuO3Qucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ3N0YXJ0IixpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixzKX1mdW5jdGlvbiBvKGUsbil7dmFyIHI9aHQodCxuKSxvPW51bGw9PXguZ2V0U3RhdGUodC5zdGF0ZSk7aWYoIXJ8fCFOKGUscikpe2lmKCFvKXJldHVybjtyPWV9dmFyIGk9bmV3IFAoZSxyKTtpZihvfHwhdC5zdGF0ZS5zZWxlY3Rpb24uZXEoaSkpe3ZhciBzPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGkpO28mJnMuc2V0TWV0YSh4LGUucG9zKSx0LmRpc3BhdGNoKHMpfX1mdW5jdGlvbiBpKCl7dC5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLGkpLHQucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJkcmFnc3RhcnQiLGkpLHQucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHMpLG51bGwhPXguZ2V0U3RhdGUodC5zdGF0ZSkmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRNZXRhKHgsLTEpKX1mdW5jdGlvbiBzKG4pe3ZhciBzLGE9eC5nZXRTdGF0ZSh0LnN0YXRlKTtpZihudWxsIT1hKXM9dC5zdGF0ZS5kb2MucmVzb2x2ZShhKTtlbHNlIGlmKGN0KHQsbi50YXJnZXQpIT1yJiYocz1odCh0LGUpLCFzKSlyZXR1cm4gaSgpO3MmJm8ocyxuKX19ZnVuY3Rpb24gYXQodCxlLG4pe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBpWyJnIl0pKXJldHVybiBudWxsO2Zvcih2YXIgcj10LnN0YXRlLnNlbGVjdGlvbixvPXIuJGhlYWQscz1vLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPW8ubm9kZShzKSxjPW48MD9vLmluZGV4KHMpOm8uaW5kZXhBZnRlcihzKTtpZihjIT0objwwPzA6YS5jaGlsZENvdW50KSlyZXR1cm4gbnVsbDtpZigiY2VsbCI9PWEudHlwZS5zcGVjLnRhYmxlUm9sZXx8ImhlYWRlcl9jZWxsIj09YS50eXBlLnNwZWMudGFibGVSb2xlKXt2YXIgaD1vLmJlZm9yZShzKSxwPSJ2ZXJ0Ij09ZT9uPjA/ImRvd24iOiJ1cCI6bj4wPyJyaWdodCI6ImxlZnQiO3JldHVybiB0LmVuZE9mVGV4dGJsb2NrKHApP2g6bnVsbH19cmV0dXJuIG51bGx9ZnVuY3Rpb24gY3QodCxlKXtmb3IoO2UmJmUhPXQuZG9tO2U9ZS5wYXJlbnROb2RlKWlmKCJURCI9PWUubm9kZU5hbWV8fCJUSCI9PWUubm9kZU5hbWUpcmV0dXJuIGV9ZnVuY3Rpb24gaHQodCxlKXt2YXIgbj10LnBvc0F0Q29vcmRzKHtsZWZ0OmUuY2xpZW50WCx0b3A6ZS5jbGllbnRZfSk7cmV0dXJuIG4mJm4/Yih0LnN0YXRlLmRvYy5yZXNvbHZlKG4ucG9zKSk6bnVsbH12YXIgcHQ9bmV3IGlbImQiXSgiZml4LXRhYmxlcyIpO2Z1bmN0aW9uIHV0KHQsZSxuLHIpe3ZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDt0OmZvcih2YXIgcz0wLGE9MDtzPGk7cysrKXtmb3IodmFyIGM9ZS5jaGlsZChzKSxoPWEscD1NYXRoLm1pbihvLHMrMyk7aDxwO2grKylpZih0LmNoaWxkKGgpPT1jKXthPWgrMSxuKz1jLm5vZGVTaXplO2NvbnRpbnVlIHR9cihjLG4pLGE8byYmdC5jaGlsZChhKS5zYW1lTWFya3VwKGMpP3V0KHQuY2hpbGQoYSksYyxuKzEscik6Yy5ub2Rlc0JldHdlZW4oMCxjLmNvbnRlbnQuc2l6ZSxyLG4rMSksbis9Yy5ub2RlU2l6ZX19ZnVuY3Rpb24gZnQodCxlKXt2YXIgbixyPWZ1bmN0aW9uKGUscil7InRhYmxlIj09ZS50eXBlLnNwZWMudGFibGVSb2xlJiYobj1sdCh0LGUscixuKSl9O3JldHVybiBlP2UuZG9jIT10LmRvYyYmdXQoZS5kb2MsdC5kb2MsMCxyKTp0LmRvYy5kZXNjZW5kYW50cyhyKSxufWZ1bmN0aW9uIGx0KHQsZSxuLHIpe3ZhciBvPXYuZ2V0KGUpO2lmKCFvLnByb2JsZW1zKXJldHVybiByO3J8fChyPXQudHIpO2Zvcih2YXIgaSxzLGE9W10sYz0wO2M8by5oZWlnaHQ7YysrKWEucHVzaCgwKTtmb3IodmFyIGg9MDtoPG8ucHJvYmxlbXMubGVuZ3RoO2grKyl7dmFyIHA9by5wcm9ibGVtc1toXTtpZigiY29sbGlzaW9uIj09cC50eXBlKXtmb3IodmFyIHU9ZS5ub2RlQXQocC5wb3MpLGY9MDtmPHUuYXR0cnMucm93c3BhbjtmKyspYVtwLnJvdytmXSs9cC5uO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCxEKHUuYXR0cnMsdS5hdHRycy5jb2xzcGFuLXAubixwLm4pKX1lbHNlIGlmKCJtaXNzaW5nIj09cC50eXBlKWFbcC5yb3ddKz1wLm47ZWxzZSBpZigib3Zlcmxvbmdfcm93c3BhbiI9PXAudHlwZSl7dmFyIGw9ZS5ub2RlQXQocC5wb3MpO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCx6KGwuYXR0cnMsInJvd3NwYW4iLGwuYXR0cnMucm93c3Bhbi1wLm4pKX1lbHNlIGlmKCJjb2x3aWR0aCBtaXNtYXRjaCI9PXAudHlwZSl7dmFyIGQ9ZS5ub2RlQXQocC5wb3MpO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCx6KGQuYXR0cnMsImNvbHdpZHRoIixwLmNvbHdpZHRoKSl9fWZvcih2YXIgbT0wO208YS5sZW5ndGg7bSsrKWFbbV0mJihudWxsPT1pJiYoaT1tKSxzPW0pO2Zvcih2YXIgeT0wLGc9bisxO3k8by5oZWlnaHQ7eSsrKXt2YXIgdz1lLmNoaWxkKHkpLHg9Zyt3Lm5vZGVTaXplLGI9YVt5XTtpZihiPjApe3ZhciBrPSJjZWxsIjt3LmZpcnN0Q2hpbGQmJihrPXcuZmlyc3RDaGlsZC50eXBlLnNwZWMudGFibGVSb2xlKTtmb3IodmFyIFM9W10sTz0wO088YjtPKyspUy5wdXNoKHEodC5zY2hlbWEpW2tdLmNyZWF0ZUFuZEZpbGwoKSk7dmFyIEM9MCE9eSYmaSE9eS0xfHxzIT15P3gtMTpnKzE7ci5pbnNlcnQoci5tYXBwaW5nLm1hcChDKSxTKX1nPXh9cmV0dXJuIHIuc2V0TWV0YShwdCx7Zml4VGFibGVzOiEwfSl9ZnVuY3Rpb24gZHQodCl7dmFyIGUsbj10LnNlbGVjdGlvbixyPU8odCksbz1yLm5vZGUoLTEpLGk9ci5zdGFydCgtMSkscz12LmdldChvKTtyZXR1cm4gZT1uIGluc3RhbmNlb2YgUD9zLnJlY3RCZXR3ZWVuKG4uJGFuY2hvckNlbGwucG9zLWksbi4kaGVhZENlbGwucG9zLWkpOnMuZmluZENlbGwoci5wb3MtaSksZS50YWJsZVN0YXJ0PWksZS5tYXA9cyxlLnRhYmxlPW8sZX1mdW5jdGlvbiB2dCh0LGUsbil7Zm9yKHZhciByPXEoZS50eXBlLnNjaGVtYSkuaGVhZGVyX2NlbGwsbz0wO288dC5oZWlnaHQ7bysrKWlmKGUubm9kZUF0KHQubWFwW24rbyp0LndpZHRoXSkudHlwZSE9cilyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtdCh0LGUsbil7dmFyIHI9ZS5tYXAsbz1lLnRhYmxlU3RhcnQsaT1lLnRhYmxlLHM9bj4wPy0xOjA7dnQocixpLG4rcykmJihzPTA9PW58fG49PXIud2lkdGg/bnVsbDowKTtmb3IodmFyIGE9MDthPHIuaGVpZ2h0O2ErKyl7dmFyIGM9YSpyLndpZHRoK247aWYobj4wJiZuPHIud2lkdGgmJnIubWFwW2MtMV09PXIubWFwW2NdKXt2YXIgaD1yLm1hcFtjXSxwPWkubm9kZUF0KGgpO3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcubWFwKG8raCksbnVsbCxJKHAuYXR0cnMsbi1yLmNvbENvdW50KGgpKSksYSs9cC5hdHRycy5yb3dzcGFuLTF9ZWxzZXt2YXIgdT1udWxsPT1zP3EoaS50eXBlLnNjaGVtYSkuY2VsbDppLm5vZGVBdChyLm1hcFtjK3NdKS50eXBlLGY9ci5wb3NpdGlvbkF0KGEsbixpKTt0Lmluc2VydCh0Lm1hcHBpbmcubWFwKG8rZiksdS5jcmVhdGVBbmRGaWxsKCkpfX1yZXR1cm4gdH1mdW5jdGlvbiB5dCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpO2UobXQodC50cixuLG4ubGVmdCkpfXJldHVybiEwfWZ1bmN0aW9uIGd0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShtdCh0LnRyLG4sbi5yaWdodCkpfXJldHVybiEwfWZ1bmN0aW9uIHd0KHQsZSxuKXtmb3IodmFyIHI9ZS5tYXAsbz1lLnRhYmxlLGk9ZS50YWJsZVN0YXJ0LHM9dC5tYXBwaW5nLm1hcHMubGVuZ3RoLGE9MDthPHIuaGVpZ2h0Oyl7dmFyIGM9YSpyLndpZHRoK24saD1yLm1hcFtjXSxwPW8ubm9kZUF0KGgpO2lmKG4+MCYmci5tYXBbYy0xXT09aHx8bjxyLndpZHRoLTEmJnIubWFwW2MrMV09PWgpdC5zZXROb2RlTWFya3VwKHQubWFwcGluZy5zbGljZShzKS5tYXAoaStoKSxudWxsLEQocC5hdHRycyxuLXIuY29sQ291bnQoaCkpKTtlbHNle3ZhciB1PXQubWFwcGluZy5zbGljZShzKS5tYXAoaStoKTt0LmRlbGV0ZSh1LHUrcC5ub2RlU2l6ZSl9YSs9cC5hdHRycy5yb3dzcGFufX1mdW5jdGlvbiB4dCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpLHI9dC50cjtpZigwPT1uLmxlZnQmJm4ucmlnaHQ9PW4ubWFwLndpZHRoKXJldHVybiExO2Zvcih2YXIgbz1uLnJpZ2h0LTE7O28tLSl7aWYod3QocixuLG8pLG89PW4ubGVmdClicmVhaztuLnRhYmxlPW4udGFibGVTdGFydD9yLmRvYy5ub2RlQXQobi50YWJsZVN0YXJ0LTEpOnIuZG9jLG4ubWFwPXYuZ2V0KG4udGFibGUpfWUocil9cmV0dXJuITB9ZnVuY3Rpb24gYnQodCxlLG4pe2Zvcih2YXIgcj1xKGUudHlwZS5zY2hlbWEpLmhlYWRlcl9jZWxsLG89MDtvPHQud2lkdGg7bysrKWlmKGUubm9kZUF0KHQubWFwW28rbip0LndpZHRoXSkudHlwZSE9cilyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBrdCh0LGUsbil7Zm9yKHZhciByPWUubWFwLG89ZS50YWJsZVN0YXJ0LGk9ZS50YWJsZSxzPW8sYT0wO2E8bjthKyspcys9aS5jaGlsZChhKS5ub2RlU2l6ZTt2YXIgYz1bXSxoPW4+MD8tMTowO2J0KHIsaSxuK2gpJiYoaD0wPT1ufHxuPT1yLmhlaWdodD9udWxsOjApO2Zvcih2YXIgcD0wLHU9ci53aWR0aCpuO3A8ci53aWR0aDtwKyssdSsrKWlmKG4+MCYmbjxyLmhlaWdodCYmci5tYXBbdV09PXIubWFwW3Utci53aWR0aF0pe3ZhciBmPXIubWFwW3VdLGw9aS5ub2RlQXQoZikuYXR0cnM7dC5zZXROb2RlTWFya3VwKG8rZixudWxsLHoobCwicm93c3BhbiIsbC5yb3dzcGFuKzEpKSxwKz1sLmNvbHNwYW4tMX1lbHNle3ZhciBkPW51bGw9PWg/cShpLnR5cGUuc2NoZW1hKS5jZWxsOmkubm9kZUF0KHIubWFwW3UraCpyLndpZHRoXSkudHlwZTtjLnB1c2goZC5jcmVhdGVBbmRGaWxsKCkpfXJldHVybiB0Lmluc2VydChzLHEoaS50eXBlLnNjaGVtYSkucm93LmNyZWF0ZShudWxsLGMpKSx0fWZ1bmN0aW9uIFN0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShrdCh0LnRyLG4sbi50b3ApKX1yZXR1cm4hMH1mdW5jdGlvbiBPdCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpO2Uoa3QodC50cixuLG4uYm90dG9tKSl9cmV0dXJuITB9ZnVuY3Rpb24gQ3QodCxlLG4pe2Zvcih2YXIgcj1lLm1hcCxvPWUudGFibGUsaT1lLnRhYmxlU3RhcnQscz0wLGE9MDthPG47YSsrKXMrPW8uY2hpbGQoYSkubm9kZVNpemU7dmFyIGM9cytvLmNoaWxkKG4pLm5vZGVTaXplLGg9dC5tYXBwaW5nLm1hcHMubGVuZ3RoO3QuZGVsZXRlKHMraSxjK2kpO2Zvcih2YXIgcD0wLHU9bipyLndpZHRoO3A8ci53aWR0aDtwKyssdSsrKXt2YXIgZj1yLm1hcFt1XTtpZihuPjAmJmY9PXIubWFwW3Utci53aWR0aF0pe3ZhciBsPW8ubm9kZUF0KGYpLmF0dHJzO3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcuc2xpY2UoaCkubWFwKGYraSksbnVsbCx6KGwsInJvd3NwYW4iLGwucm93c3Bhbi0xKSkscCs9bC5jb2xzcGFuLTF9ZWxzZSBpZihuPHIud2lkdGgmJmY9PXIubWFwW3Urci53aWR0aF0pe3ZhciBkPW8ubm9kZUF0KGYpLHY9ZC50eXBlLmNyZWF0ZSh6KGQuYXR0cnMsInJvd3NwYW4iLGQuYXR0cnMucm93c3Bhbi0xKSxkLmNvbnRlbnQpLG09ci5wb3NpdGlvbkF0KG4rMSxwLG8pO3QuaW5zZXJ0KHQubWFwcGluZy5zbGljZShoKS5tYXAoaSttKSx2KSxwKz1kLmF0dHJzLmNvbHNwYW4tMX19fWZ1bmN0aW9uIE10KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCkscj10LnRyO2lmKDA9PW4udG9wJiZuLmJvdHRvbT09bi5tYXAuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgbz1uLmJvdHRvbS0xOztvLS0pe2lmKEN0KHIsbixvKSxvPT1uLnRvcClicmVhaztuLnRhYmxlPW4udGFibGVTdGFydD9yLmRvYy5ub2RlQXQobi50YWJsZVN0YXJ0LTEpOnIuZG9jLG4ubWFwPXYuZ2V0KG4udGFibGUpfWUocil9cmV0dXJuITB9ZnVuY3Rpb24gVHQodCl7dmFyIGU9dC5jb250ZW50O3JldHVybiAxPT1lLmNoaWxkQ291bnQmJmUuZmlyc3RDaGlsZC5pc1RleHRibG9jayYmMD09ZS5maXJzdENoaWxkLmNoaWxkQ291bnR9ZnVuY3Rpb24gTnQodCxlKXtmb3IodmFyIG49dC53aWR0aCxyPXQuaGVpZ2h0LG89dC5tYXAsaT1lLnRvcCpuK2UubGVmdCxzPWksYT0oZS5ib3R0b20tMSkqbitlLmxlZnQsYz1pKyhlLnJpZ2h0LWUubGVmdC0xKSxoPWUudG9wO2g8ZS5ib3R0b207aCsrKXtpZihlLmxlZnQ+MCYmb1tzXT09b1tzLTFdfHxlLnJpZ2h0PG4mJm9bY109PW9bYysxXSlyZXR1cm4hMDtzKz1uLGMrPW59Zm9yKHZhciBwPWUubGVmdDtwPGUucmlnaHQ7cCsrKXtpZihlLnRvcD4wJiZvW2ldPT1vW2ktbl18fGUuYm90dG9tPHImJm9bYV09PW9bYStuXSlyZXR1cm4hMDtpKyssYSsrfXJldHVybiExfWZ1bmN0aW9uIEV0KHQsZSl7dmFyIG49dC5zZWxlY3Rpb247aWYoIShuIGluc3RhbmNlb2YgUCl8fG4uJGFuY2hvckNlbGwucG9zPT1uLiRoZWFkQ2VsbC5wb3MpcmV0dXJuITE7dmFyIHI9ZHQodCksbz1yLm1hcDtpZihOdChvLHIpKXJldHVybiExO2lmKGUpe2Zvcih2YXIgaSxhLGM9dC50cixoPXt9LHA9c1siYyJdLmVtcHR5LHU9ci50b3A7dTxyLmJvdHRvbTt1KyspZm9yKHZhciBmPXIubGVmdDtmPHIucmlnaHQ7ZisrKXt2YXIgbD1vLm1hcFt1Km8ud2lkdGgrZl0sZD1yLnRhYmxlLm5vZGVBdChsKTtpZighaFtsXSlpZihoW2xdPSEwLG51bGw9PWkpaT1sLGE9ZDtlbHNle1R0KGQpfHwocD1wLmFwcGVuZChkLmNvbnRlbnQpKTt2YXIgdj1jLm1hcHBpbmcubWFwKGwrci50YWJsZVN0YXJ0KTtjLmRlbGV0ZSh2LHYrZC5ub2RlU2l6ZSl9fWlmKGMuc2V0Tm9kZU1hcmt1cChpK3IudGFibGVTdGFydCxudWxsLHooSShhLmF0dHJzLGEuYXR0cnMuY29sc3BhbixyLnJpZ2h0LXIubGVmdC1hLmF0dHJzLmNvbHNwYW4pLCJyb3dzcGFuIixyLmJvdHRvbS1yLnRvcCkpLHAuc2l6ZSl7dmFyIG09aSsxK2EuY29udGVudC5zaXplLHk9VHQoYSk/aSsxOm07Yy5yZXBsYWNlV2l0aCh5K3IudGFibGVTdGFydCxtK3IudGFibGVTdGFydCxwKX1jLnNldFNlbGVjdGlvbihuZXcgUChjLmRvYy5yZXNvbHZlKGkrci50YWJsZVN0YXJ0KSkpLGUoYyl9cmV0dXJuITB9ZnVuY3Rpb24gQXQodCxlKXt2YXIgbj1xKHQuc2NoZW1hKTtyZXR1cm4gUnQoKGZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZTtyZXR1cm4gbltlLnR5cGUuc3BlYy50YWJsZVJvbGVdfSkpKHQsZSl9ZnVuY3Rpb24gUnQodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHIsbyxpPWUuc2VsZWN0aW9uO2lmKGkgaW5zdGFuY2VvZiBQKXtpZihpLiRhbmNob3JDZWxsLnBvcyE9aS4kaGVhZENlbGwucG9zKXJldHVybiExO3I9aS4kYW5jaG9yQ2VsbC5ub2RlQWZ0ZXIsbz1pLiRhbmNob3JDZWxsLnBvc31lbHNle2lmKHI9ayhpLiRmcm9tKSwhcilyZXR1cm4hMTtvPWIoaS4kZnJvbSkucG9zfWlmKDE9PXIuYXR0cnMuY29sc3BhbiYmMT09ci5hdHRycy5yb3dzcGFuKXJldHVybiExO2lmKG4pe3ZhciBzPXIuYXR0cnMsYT1bXSxjPXMuY29sd2lkdGg7cy5yb3dzcGFuPjEmJihzPXoocywicm93c3BhbiIsMSkpLHMuY29sc3Bhbj4xJiYocz16KHMsImNvbHNwYW4iLDEpKTtmb3IodmFyIGgscD1kdChlKSx1PWUudHIsZj0wO2Y8cC5yaWdodC1wLmxlZnQ7ZisrKWEucHVzaChjP3oocywiY29sd2lkdGgiLGMmJmNbZl0/W2NbZl1dOm51bGwpOnMpO2Zvcih2YXIgbD1wLnRvcDtsPHAuYm90dG9tO2wrKyl7dmFyIGQ9cC5tYXAucG9zaXRpb25BdChsLHAubGVmdCxwLnRhYmxlKTtsPT1wLnRvcCYmKGQrPXIubm9kZVNpemUpO2Zvcih2YXIgdj1wLmxlZnQsbT0wO3Y8cC5yaWdodDt2KyssbSsrKXY9PXAubGVmdCYmbD09cC50b3B8fHUuaW5zZXJ0KGg9dS5tYXBwaW5nLm1hcChkK3AudGFibGVTdGFydCwxKSx0KHtub2RlOnIscm93OmwsY29sOnZ9KS5jcmVhdGVBbmRGaWxsKGFbbV0pKX11LnNldE5vZGVNYXJrdXAobyx0KHtub2RlOnIscm93OnAudG9wLGNvbDpwLmxlZnR9KSxhWzBdKSxpIGluc3RhbmNlb2YgUCYmdS5zZXRTZWxlY3Rpb24obmV3IFAodS5kb2MucmVzb2x2ZShpLiRhbmNob3JDZWxsLnBvcyksaCYmdS5kb2MucmVzb2x2ZShoKSkpLG4odSl9cmV0dXJuITB9fWZ1bmN0aW9uIHp0KHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7aWYoIVMobikpcmV0dXJuITE7dmFyIG89TyhuKTtpZihvLm5vZGVBZnRlci5hdHRyc1t0XT09PWUpcmV0dXJuITE7aWYocil7dmFyIGk9bi50cjtuLnNlbGVjdGlvbiBpbnN0YW5jZW9mIFA/bi5zZWxlY3Rpb24uZm9yRWFjaENlbGwoKGZ1bmN0aW9uKG4scil7bi5hdHRyc1t0XSE9PWUmJmkuc2V0Tm9kZU1hcmt1cChyLG51bGwseihuLmF0dHJzLHQsZSkpfSkpOmkuc2V0Tm9kZU1hcmt1cChvLnBvcyxudWxsLHooby5ub2RlQWZ0ZXIuYXR0cnMsdCxlKSkscihpKX1yZXR1cm4hMH19ZnVuY3Rpb24gRHQodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoIVMoZSkpcmV0dXJuITE7aWYobil7Zm9yKHZhciByPXEoZS5zY2hlbWEpLG89ZHQoZSksaT1lLnRyLHM9by5tYXAuY2VsbHNJblJlY3QoImNvbHVtbiI9PXQ/bmV3IGQoby5sZWZ0LDAsby5yaWdodCxvLm1hcC5oZWlnaHQpOiJyb3ciPT10P25ldyBkKDAsby50b3Asby5tYXAud2lkdGgsby5ib3R0b20pOm8pLGE9cy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBvLnRhYmxlLm5vZGVBdCh0KX0pKSxjPTA7YzxzLmxlbmd0aDtjKyspYVtjXS50eXBlPT1yLmhlYWRlcl9jZWxsJiZpLnNldE5vZGVNYXJrdXAoby50YWJsZVN0YXJ0K3NbY10sci5jZWxsLGFbY10uYXR0cnMpO2lmKDA9PWkuc3RlcHMubGVuZ3RoKWZvcih2YXIgaD0wO2g8cy5sZW5ndGg7aCsrKWkuc2V0Tm9kZU1hcmt1cChvLnRhYmxlU3RhcnQrc1toXSxyLmhlYWRlcl9jZWxsLGFbaF0uYXR0cnMpO24oaSl9cmV0dXJuITB9fWZ1bmN0aW9uIEl0KHQsZSxuKXtmb3IodmFyIHI9ZS5tYXAuY2VsbHNJblJlY3Qoe2xlZnQ6MCx0b3A6MCxyaWdodDoicm93Ij09dD9lLm1hcC53aWR0aDoxLGJvdHRvbToiY29sdW1uIj09dD9lLm1hcC5oZWlnaHQ6MX0pLG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9ZS50YWJsZS5ub2RlQXQocltvXSk7aWYoaSYmaS50eXBlIT09bi5oZWFkZXJfY2VsbClyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBQdCh0LGUpe3JldHVybiBlPWV8fHt1c2VEZXByZWNhdGVkTG9naWM6ITF9LGUudXNlRGVwcmVjYXRlZExvZ2ljP0R0KHQpOmZ1bmN0aW9uKGUsbil7aWYoIVMoZSkpcmV0dXJuITE7aWYobil7dmFyIHI9cShlLnNjaGVtYSksbz1kdChlKSxpPWUudHIscz1JdCgicm93IixvLHIpLGE9SXQoImNvbHVtbiIsbyxyKSxjPSJjb2x1bW4iPT09dD9zOiJyb3ciPT09dCYmYSxoPWM/MTowLHA9ImNvbHVtbiI9PXQ/bmV3IGQoMCxoLDEsby5tYXAuaGVpZ2h0KToicm93Ij09dD9uZXcgZChoLDAsby5tYXAud2lkdGgsMSk6byx1PSJjb2x1bW4iPT10P2E/ci5jZWxsOnIuaGVhZGVyX2NlbGw6InJvdyI9PXQ/cz9yLmNlbGw6ci5oZWFkZXJfY2VsbDpyLmNlbGw7by5tYXAuY2VsbHNJblJlY3QocCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIGU9dCtvLnRhYmxlU3RhcnQsbj1pLmRvYy5ub2RlQXQoZSk7biYmaS5zZXROb2RlTWFya3VwKGUsdSxuLmF0dHJzKX0pKSxuKGkpfXJldHVybiEwfX12YXIgQnQ9UHQoInJvdyIse3VzZURlcHJlY2F0ZWRMb2dpYzohMH0pLEZ0PVB0KCJjb2x1bW4iLHt1c2VEZXByZWNhdGVkTG9naWM6ITB9KSxqdD1QdCgiY2VsbCIse3VzZURlcHJlY2F0ZWRMb2dpYzohMH0pO2Z1bmN0aW9uIF90KHQsZSl7aWYoZTwwKXt2YXIgbj10Lm5vZGVCZWZvcmU7aWYobilyZXR1cm4gdC5wb3Mtbi5ub2RlU2l6ZTtmb3IodmFyIHI9dC5pbmRleCgtMSktMSxvPXQuYmVmb3JlKCk7cj49MDtyLS0pe3ZhciBpPXQubm9kZSgtMSkuY2hpbGQocik7aWYoaS5jaGlsZENvdW50KXJldHVybiBvLTEtaS5sYXN0Q2hpbGQubm9kZVNpemU7by09aS5ub2RlU2l6ZX19ZWxzZXtpZih0LmluZGV4KCk8dC5wYXJlbnQuY2hpbGRDb3VudC0xKXJldHVybiB0LnBvcyt0Lm5vZGVBZnRlci5ub2RlU2l6ZTtmb3IodmFyIHM9dC5ub2RlKC0xKSxhPXQuaW5kZXhBZnRlcigtMSksYz10LmFmdGVyKCk7YTxzLmNoaWxkQ291bnQ7YSsrKXt2YXIgaD1zLmNoaWxkKGEpO2lmKGguY2hpbGRDb3VudClyZXR1cm4gYysxO2MrPWgubm9kZVNpemV9fX1mdW5jdGlvbiAkdCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtpZighUyhlKSlyZXR1cm4hMTt2YXIgcj1fdChPKGUpLHQpO2lmKG51bGwhPXIpe2lmKG4pe3ZhciBvPWUuZG9jLnJlc29sdmUocik7bihlLnRyLnNldFNlbGVjdGlvbihpWyJnIl0uYmV0d2VlbihvLFQobykpKS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19fWZ1bmN0aW9uIEp0KHQsZSl7Zm9yKHZhciBuPXQuc2VsZWN0aW9uLiRhbmNob3Iscj1uLmRlcHRoO3I+MDtyLS0pe3ZhciBvPW4ubm9kZShyKTtpZigidGFibGUiPT1vLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuIGUmJmUodC50ci5kZWxldGUobi5iZWZvcmUociksbi5hZnRlcihyKSkuc2Nyb2xsSW50b1ZpZXcoKSksITB9cmV0dXJuITF9dmFyIEx0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2RlPXQsdGhpcy5jZWxsTWluV2lkdGg9ZSx0aGlzLmRvbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmRvbS5jbGFzc05hbWU9InRhYmxlV3JhcHBlciIsdGhpcy50YWJsZT10aGlzLmRvbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpKSx0aGlzLmNvbGdyb3VwPXRoaXMudGFibGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY29sZ3JvdXAiKSksVnQodCx0aGlzLmNvbGdyb3VwLHRoaXMudGFibGUsZSksdGhpcy5jb250ZW50RE9NPXRoaXMudGFibGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSl9O2Z1bmN0aW9uIFZ0KHQsZSxuLHIsbyxpKXtmb3IodmFyIHM9MCxhPSEwLGM9ZS5maXJzdENoaWxkLGg9dC5maXJzdENoaWxkLHA9MCx1PTA7cDxoLmNoaWxkQ291bnQ7cCsrKWZvcih2YXIgZj1oLmNoaWxkKHApLmF0dHJzLGw9Zi5jb2xzcGFuLGQ9Zi5jb2x3aWR0aCx2PTA7djxsO3YrKyx1Kyspe3ZhciBtPW89PXU/aTpkJiZkW3ZdLHk9bT9tKyJweCI6IiI7cys9bXx8cixtfHwoYT0hMSksYz8oYy5zdHlsZS53aWR0aCE9eSYmKGMuc3R5bGUud2lkdGg9eSksYz1jLm5leHRTaWJsaW5nKTplLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNvbCIpKS5zdHlsZS53aWR0aD15fXdoaWxlKGMpe3ZhciBnPWMubmV4dFNpYmxpbmc7Yy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpLGM9Z31hPyhuLnN0eWxlLndpZHRoPXMrInB4IixuLnN0eWxlLm1pbldpZHRoPSIiKToobi5zdHlsZS53aWR0aD0iIixuLnN0eWxlLm1pbldpZHRoPXMrInB4Iil9THQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT10aGlzLm5vZGUudHlwZSYmKHRoaXMubm9kZT10LFZ0KHQsdGhpcy5jb2xncm91cCx0aGlzLnRhYmxlLHRoaXMuY2VsbE1pbldpZHRoKSwhMCl9LEx0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZSYmKHQudGFyZ2V0PT10aGlzLnRhYmxlfHx0aGlzLmNvbGdyb3VwLmNvbnRhaW5zKHQudGFyZ2V0KSl9O3ZhciBxdD1uZXcgaVsiZCJdKCJ0YWJsZUNvbHVtblJlc2l6aW5nIik7ZnVuY3Rpb24gV3QodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBlPXQuaGFuZGxlV2lkdGg7dm9pZCAwPT09ZSYmKGU9NSk7dmFyIG49dC5jZWxsTWluV2lkdGg7dm9pZCAwPT09biYmKG49MjUpO3ZhciByPXQuVmlldzt2b2lkIDA9PT1yJiYocj1MdCk7dmFyIG89dC5sYXN0Q29sdW1uUmVzaXphYmxlO3ZvaWQgMD09PW8mJihvPSEwKTt2YXIgcz1uZXcgaVsiYyJdKHtrZXk6cXQsc3RhdGU6e2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zcGVjLnByb3BzLm5vZGVWaWV3c1txKGUuc2NoZW1hKS50YWJsZS5uYW1lXT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgcih0LG4sZSl9LG5ldyBIdCgtMSwhMSl9LGFwcGx5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuYXBwbHkodCl9fSxwcm9wczp7YXR0cmlidXRlczpmdW5jdGlvbih0KXt2YXIgZT1xdC5nZXRTdGF0ZSh0KTtyZXR1cm4gZS5hY3RpdmVIYW5kbGU+LTE/e2NsYXNzOiJyZXNpemUtY3Vyc29yIn06bnVsbH0saGFuZGxlRE9NRXZlbnRzOnttb3VzZW1vdmU6ZnVuY3Rpb24odCxyKXtLdCh0LHIsZSxuLG8pfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKHQpe1V0KHQpfSxtb3VzZWRvd246ZnVuY3Rpb24odCxlKXtHdCh0LGUsbil9fSxkZWNvcmF0aW9uczpmdW5jdGlvbih0KXt2YXIgZT1xdC5nZXRTdGF0ZSh0KTtpZihlLmFjdGl2ZUhhbmRsZT4tMSlyZXR1cm4gb2UodCxlLmFjdGl2ZUhhbmRsZSl9LG5vZGVWaWV3czp7fX19KTtyZXR1cm4gc312YXIgSHQ9ZnVuY3Rpb24odCxlKXt0aGlzLmFjdGl2ZUhhbmRsZT10LHRoaXMuZHJhZ2dpbmc9ZX07ZnVuY3Rpb24gS3QodCxlLG4scixvKXt2YXIgaT1xdC5nZXRTdGF0ZSh0LnN0YXRlKTtpZighaS5kcmFnZ2luZyl7dmFyIHM9WXQoZS50YXJnZXQpLGE9LTE7aWYocyl7dmFyIGM9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxoPWMubGVmdCxwPWMucmlnaHQ7ZS5jbGllbnRYLWg8PW4/YT1adCh0LGUsImxlZnQiKTpwLWUuY2xpZW50WDw9biYmKGE9WnQodCxlLCJyaWdodCIpKX1pZihhIT1pLmFjdGl2ZUhhbmRsZSl7aWYoIW8mJi0xIT09YSl7dmFyIHU9dC5zdGF0ZS5kb2MucmVzb2x2ZShhKSxmPXUubm9kZSgtMSksbD12LmdldChmKSxkPXUuc3RhcnQoLTEpLG09bC5jb2xDb3VudCh1LnBvcy1kKSt1Lm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLTE7aWYobT09bC53aWR0aC0xKXJldHVybn10ZSh0LGEpfX19ZnVuY3Rpb24gVXQodCl7dmFyIGU9cXQuZ2V0U3RhdGUodC5zdGF0ZSk7ZS5hY3RpdmVIYW5kbGU+LTEmJiFlLmRyYWdnaW5nJiZ0ZSh0LC0xKX1mdW5jdGlvbiBHdCh0LGUsbil7dmFyIHI9cXQuZ2V0U3RhdGUodC5zdGF0ZSk7aWYoLTE9PXIuYWN0aXZlSGFuZGxlfHxyLmRyYWdnaW5nKXJldHVybiExO3ZhciBvPXQuc3RhdGUuZG9jLm5vZGVBdChyLmFjdGl2ZUhhbmRsZSksaT1YdCh0LHIuYWN0aXZlSGFuZGxlLG8uYXR0cnMpO2Z1bmN0aW9uIHMoZSl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHMpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGEpO3ZhciByPXF0LmdldFN0YXRlKHQuc3RhdGUpO3IuZHJhZ2dpbmcmJihlZSh0LHIuYWN0aXZlSGFuZGxlLFF0KHIuZHJhZ2dpbmcsZSxuKSksdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldE1ldGEocXQse3NldERyYWdnaW5nOm51bGx9KSkpfWZ1bmN0aW9uIGEoZSl7aWYoIWUud2hpY2gpcmV0dXJuIHMoZSk7dmFyIHI9cXQuZ2V0U3RhdGUodC5zdGF0ZSksbz1RdChyLmRyYWdnaW5nLGUsbik7bmUodCxyLmFjdGl2ZUhhbmRsZSxvLG4pfXJldHVybiB0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0TWV0YShxdCx7c2V0RHJhZ2dpbmc6e3N0YXJ0WDplLmNsaWVudFgsc3RhcnRXaWR0aDppfX0pKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIscyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsYSksZS5wcmV2ZW50RGVmYXVsdCgpLCEwfWZ1bmN0aW9uIFh0KHQsZSxuKXt2YXIgcj1uLmNvbHNwYW4sbz1uLmNvbHdpZHRoLGk9byYmb1tvLmxlbmd0aC0xXTtpZihpKXJldHVybiBpO3ZhciBzPXQuZG9tQXRQb3MoZSksYT1zLm5vZGUuY2hpbGROb2Rlc1tzLm9mZnNldF0sYz1hLm9mZnNldFdpZHRoLGg9cjtpZihvKWZvcih2YXIgcD0wO3A8cjtwKyspb1twXSYmKGMtPW9bcF0saC0tKTtyZXR1cm4gYy9ofWZ1bmN0aW9uIFl0KHQpe3doaWxlKHQmJiJURCIhPXQubm9kZU5hbWUmJiJUSCIhPXQubm9kZU5hbWUpdD10LmNsYXNzTGlzdC5jb250YWlucygiUHJvc2VNaXJyb3IiKT9udWxsOnQucGFyZW50Tm9kZTtyZXR1cm4gdH1mdW5jdGlvbiBadCh0LGUsbil7dmFyIHI9dC5wb3NBdENvb3Jkcyh7bGVmdDplLmNsaWVudFgsdG9wOmUuY2xpZW50WX0pLG89ci5wb3MsaT1iKHQuc3RhdGUuZG9jLnJlc29sdmUobykpO2lmKCFpKXJldHVybi0xO2lmKCJyaWdodCI9PW4pcmV0dXJuIGkucG9zO3ZhciBzPXYuZ2V0KGkubm9kZSgtMSkpLGE9aS5zdGFydCgtMSksYz1zLm1hcC5pbmRleE9mKGkucG9zLWEpO3JldHVybiBjJXMud2lkdGg9PTA/LTE6YStzLm1hcFtjLTFdfWZ1bmN0aW9uIFF0KHQsZSxuKXt2YXIgcj1lLmNsaWVudFgtdC5zdGFydFg7cmV0dXJuIE1hdGgubWF4KG4sdC5zdGFydFdpZHRoK3IpfWZ1bmN0aW9uIHRlKHQsZSl7dC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldE1ldGEocXQse3NldEhhbmRsZTplfSkpfWZ1bmN0aW9uIGVlKHQsZSxuKXtmb3IodmFyIHI9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxvPXIubm9kZSgtMSksaT12LmdldChvKSxzPXIuc3RhcnQoLTEpLGE9aS5jb2xDb3VudChyLnBvcy1zKStyLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLTEsYz10LnN0YXRlLnRyLGg9MDtoPGkuaGVpZ2h0O2grKyl7dmFyIHA9aCppLndpZHRoK2E7aWYoIWh8fGkubWFwW3BdIT1pLm1hcFtwLWkud2lkdGhdKXt2YXIgdT1pLm1hcFtwXSxmPW8ubm9kZUF0KHUpLGw9Zi5hdHRycyxkPTE9PWwuY29sc3Bhbj8wOmEtaS5jb2xDb3VudCh1KTtpZighbC5jb2x3aWR0aHx8bC5jb2x3aWR0aFtkXSE9bil7dmFyIG09bC5jb2x3aWR0aD9sLmNvbHdpZHRoLnNsaWNlKCk6cmUobC5jb2xzcGFuKTttW2RdPW4sYy5zZXROb2RlTWFya3VwKHMrdSxudWxsLHoobCwiY29sd2lkdGgiLG0pKX19fWMuZG9jQ2hhbmdlZCYmdC5kaXNwYXRjaChjKX1mdW5jdGlvbiBuZSh0LGUsbixyKXt2YXIgbz10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLGk9by5ub2RlKC0xKSxzPW8uc3RhcnQoLTEpLGE9di5nZXQoaSkuY29sQ291bnQoby5wb3Mtcykrby5ub2RlQWZ0ZXIuYXR0cnMuY29sc3Bhbi0xLGM9dC5kb21BdFBvcyhvLnN0YXJ0KC0xKSkubm9kZTt3aGlsZSgiVEFCTEUiIT1jLm5vZGVOYW1lKWM9Yy5wYXJlbnROb2RlO1Z0KGksYy5maXJzdENoaWxkLGMscixhLG4pfWZ1bmN0aW9uIHJlKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2goMCk7cmV0dXJuIGV9ZnVuY3Rpb24gb2UodCxlKXtmb3IodmFyIG49W10scj10LmRvYy5yZXNvbHZlKGUpLG89ci5ub2RlKC0xKSxpPXYuZ2V0KG8pLHM9ci5zdGFydCgtMSksYT1pLmNvbENvdW50KHIucG9zLXMpK3Iubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW4saD0wO2g8aS5oZWlnaHQ7aCsrKXt2YXIgcD1hK2gqaS53aWR0aC0xO2lmKChhPT1pLndpZHRofHxpLm1hcFtwXSE9aS5tYXBbcCsxXSkmJigwPT1ofHxpLm1hcFtwLTFdIT1pLm1hcFtwLTEtaS53aWR0aF0pKXt2YXIgdT1pLm1hcFtwXSxmPXMrdStvLm5vZGVBdCh1KS5ub2RlU2l6ZS0xLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5jbGFzc05hbWU9ImNvbHVtbi1yZXNpemUtaGFuZGxlIixuLnB1c2goY1siYSJdLndpZGdldChmLGwpKX19cmV0dXJuIGNbImIiXS5jcmVhdGUodC5kb2Msbil9ZnVuY3Rpb24gaWUodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBlPXQuYWxsb3dUYWJsZU5vZGVTZWxlY3Rpb247cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSxuZXcgaVsiYyJdKHtrZXk6eCxzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhcHBseTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWV0YSh4KTtpZihudWxsIT1uKXJldHVybi0xPT1uP251bGw6bjtpZihudWxsPT1lfHwhdC5kb2NDaGFuZ2VkKXJldHVybiBlO3ZhciByPXQubWFwcGluZy5tYXBSZXN1bHQoZSksbz1yLmRlbGV0ZWQsaT1yLnBvcztyZXR1cm4gbz9udWxsOml9fSxwcm9wczp7ZGVjb3JhdGlvbnM6RixoYW5kbGVET01FdmVudHM6e21vdXNlZG93bjpzdH0sY3JlYXRlU2VsZWN0aW9uQmV0d2VlbjpmdW5jdGlvbih0KXtpZihudWxsIT14LmdldFN0YXRlKHQuc3RhdGUpKXJldHVybiB0LnN0YXRlLnNlbGVjdGlvbn0saGFuZGxlVHJpcGxlQ2xpY2s6b3QsaGFuZGxlS2V5RG93bjpRLGhhbmRsZVBhc3RlOml0fSxhcHBlbmRUcmFuc2FjdGlvbjpmdW5jdGlvbih0LG4scil7cmV0dXJuICQocixmdChyLG4pLGUpfX0pfUh0LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5nZXRNZXRhKHF0KTtpZihuJiZudWxsIT1uLnNldEhhbmRsZSlyZXR1cm4gbmV3IEh0KG4uc2V0SGFuZGxlLG51bGwpO2lmKG4mJnZvaWQgMCE9PW4uc2V0RHJhZ2dpbmcpcmV0dXJuIG5ldyBIdChlLmFjdGl2ZUhhbmRsZSxuLnNldERyYWdnaW5nKTtpZihlLmFjdGl2ZUhhbmRsZT4tMSYmdC5kb2NDaGFuZ2VkKXt2YXIgcj10Lm1hcHBpbmcubWFwKGUuYWN0aXZlSGFuZGxlLC0xKTtNKHQuZG9jLnJlc29sdmUocikpfHwocj1udWxsKSxlPW5ldyBIdChyLGUuZHJhZ2dpbmcpfXJldHVybiBlfX0sNTY5MjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYzQzMCIpLG89bigiYzZjZCIpOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb1t0XXx8KG9bdF09dm9pZCAwIT09ZT9lOnt9KX0pKCJ2ZXJzaW9ucyIsW10pLnB1c2goe3ZlcnNpb246IjMuNi41Iixtb2RlOnI/InB1cmUiOiJnbG9iYWwiLGNvcHlyaWdodDoiwqkgMjAyMCBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSJ9KX0sIjU2ZWYiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDY2Iiksbz1uKCIyNDFjIiksaT1uKCI3NDE4Iikscz1uKCI4MjVhIik7dC5leHBvcnRzPXIoIlJlZmxlY3QiLCJvd25LZXlzIil8fGZ1bmN0aW9uKHQpe3ZhciBlPW8uZihzKHQpKSxuPWkuZjtyZXR1cm4gbj9lLmNvbmNhdChuKHQpKTplfX0sIjU3NmEiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLChmdW5jdGlvbigpe3JldHVybiBkbn0pKSxuLmQoZSwiYiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdufSkpO3ZhciByPW4oIjUzMTMiKSxvPW4oIjMwNGEiKSxpPW4oIjBhYzAiKSxzPXt9O2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50KXt2YXIgYT0vRWRnZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCksYz0vTVNJRSBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxoPS9UcmlkZW50XC8oPzpbNy05XXxcZHsyLH0pXC4uKnJ2OihcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO3MubWFjPS9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTt2YXIgcD1zLmllPSEhKGN8fGh8fGEpO3MuaWVfdmVyc2lvbj1jP2RvY3VtZW50LmRvY3VtZW50TW9kZXx8NjpoPytoWzFdOmE/K2FbMV06bnVsbCxzLmdlY2tvPSFwJiYvZ2Vja29cLyhcZCspL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzLmdlY2tvX3ZlcnNpb249cy5nZWNrbyYmKygvRmlyZWZveFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXTt2YXIgdT0hcCYmL0Nocm9tZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7cy5jaHJvbWU9ISF1LHMuY2hyb21lX3ZlcnNpb249dSYmK3VbMV0scy5pb3M9IXAmJi9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmL01vYmlsZVwvXHcrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHMuYW5kcm9pZD0vQW5kcm9pZCBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzLndlYmtpdD0hcCYmIldlYmtpdEFwcGVhcmFuY2UiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLHMuc2FmYXJpPS9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSxzLndlYmtpdF92ZXJzaW9uPXMud2Via2l0JiYrKC9cYkFwcGxlV2ViS2l0XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdfXZhciBmPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wOztlKyspaWYodD10LnByZXZpb3VzU2libGluZywhdClyZXR1cm4gZX0sbD1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGU7cmV0dXJuIGUmJjExPT1lLm5vZGVUeXBlP2UuaG9zdDplfSxkPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiByLnNldEVuZCh0LG51bGw9PW4/dC5ub2RlVmFsdWUubGVuZ3RoOm4pLHIuc2V0U3RhcnQodCxlfHwwKSxyfSx2PWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuJiYoeSh0LGUsbixyLC0xKXx8eSh0LGUsbixyLDEpKX0sbT0vXihpbWd8YnJ8aW5wdXR8dGV4dGFyZWF8aHIpJC9pO2Z1bmN0aW9uIHkodCxlLG4scixvKXtmb3IoOzspe2lmKHQ9PW4mJmU9PXIpcmV0dXJuITA7aWYoZT09KG88MD8wOmcodCkpKXt2YXIgaT10LnBhcmVudE5vZGU7aWYoMSE9aS5ub2RlVHlwZXx8dyh0KXx8bS50ZXN0KHQubm9kZU5hbWUpfHwiZmFsc2UiPT10LmNvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMTtlPWYodCkrKG88MD8wOjEpLHQ9aX1lbHNle2lmKDEhPXQubm9kZVR5cGUpcmV0dXJuITE7dD10LmNoaWxkTm9kZXNbZSsobzwwPy0xOjApXSxlPW88MD9nKHQpOjB9fX1mdW5jdGlvbiBnKHQpe3JldHVybiAzPT10Lm5vZGVUeXBlP3Qubm9kZVZhbHVlLmxlbmd0aDp0LmNoaWxkTm9kZXMubGVuZ3RofWZ1bmN0aW9uIHcodCl7Zm9yKHZhciBlLG49dDtuO249bi5wYXJlbnROb2RlKWlmKGU9bi5wbVZpZXdEZXNjKWJyZWFrO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrJiYoZS5kb209PXR8fGUuY29udGVudERPTT09dCl9dmFyIHg9ZnVuY3Rpb24odCl7dmFyIGU9dC5pc0NvbGxhcHNlZDtyZXR1cm4gZSYmcy5jaHJvbWUmJnQucmFuZ2VDb3VudCYmIXQuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQmJihlPSExKSxlfTtmdW5jdGlvbiBiKHQsZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIG4uaW5pdEV2ZW50KCJrZXlkb3duIiwhMCwhMCksbi5rZXlDb2RlPXQsbi5rZXk9bi5jb2RlPWUsbn1mdW5jdGlvbiBrKHQpe3JldHVybntsZWZ0OjAscmlnaHQ6dC5pbm5lcldpZHRoLHRvcDowLGJvdHRvbTp0LmlubmVySGVpZ2h0fX1mdW5jdGlvbiBTKHQsZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P3Q6dFtlXX1mdW5jdGlvbiBPKHQsZSxuKXtmb3IodmFyIHI9dC5zb21lUHJvcCgic2Nyb2xsVGhyZXNob2xkIil8fDAsbz10LnNvbWVQcm9wKCJzY3JvbGxNYXJnaW4iKXx8NSxpPXQuZG9tLm93bmVyRG9jdW1lbnQscz1pLmRlZmF1bHRWaWV3LGE9bnx8dC5kb207O2E9bChhKSl7aWYoIWEpYnJlYWs7aWYoMT09YS5ub2RlVHlwZSl7dmFyIGM9YT09aS5ib2R5fHwxIT1hLm5vZGVUeXBlLGg9Yz9rKHMpOmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscD0wLHU9MDtpZihlLnRvcDxoLnRvcCtTKHIsInRvcCIpP3U9LShoLnRvcC1lLnRvcCtTKG8sInRvcCIpKTplLmJvdHRvbT5oLmJvdHRvbS1TKHIsImJvdHRvbSIpJiYodT1lLmJvdHRvbS1oLmJvdHRvbStTKG8sImJvdHRvbSIpKSxlLmxlZnQ8aC5sZWZ0K1MociwibGVmdCIpP3A9LShoLmxlZnQtZS5sZWZ0K1MobywibGVmdCIpKTplLnJpZ2h0PmgucmlnaHQtUyhyLCJyaWdodCIpJiYocD1lLnJpZ2h0LWgucmlnaHQrUyhvLCJyaWdodCIpKSwocHx8dSkmJihjP3Muc2Nyb2xsQnkocCx1KToodSYmKGEuc2Nyb2xsVG9wKz11KSxwJiYoYS5zY3JvbGxMZWZ0Kz1wKSkpLGMpYnJlYWt9fX1mdW5jdGlvbiBDKHQpe2Zvcih2YXIgZSxuLHI9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1NYXRoLm1heCgwLHIudG9wKSxpPShyLmxlZnQrci5yaWdodCkvMixzPW8rMTtzPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTtzKz01KXt2YXIgYT10LnJvb3QuZWxlbWVudEZyb21Qb2ludChpLHMpO2lmKGEhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhhKSl7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihjLnRvcD49by0yMCl7ZT1hLG49Yy50b3A7YnJlYWt9fX1yZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6TSh0LmRvbSl9fWZ1bmN0aW9uIE0odCl7Zm9yKHZhciBlPVtdLG49dC5vd25lckRvY3VtZW50O3Q7dD1sKHQpKWlmKGUucHVzaCh7ZG9tOnQsdG9wOnQuc2Nyb2xsVG9wLGxlZnQ6dC5zY3JvbGxMZWZ0fSksdD09bilicmVhaztyZXR1cm4gZX1mdW5jdGlvbiBUKHQpe3ZhciBlPXQucmVmRE9NLG49dC5yZWZUb3Ascj10LnN0YWNrLG89ZT9lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDowO04ociwwPT1vPzA6by1uKX1mdW5jdGlvbiBOKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0sbz1yLmRvbSxpPXIudG9wLHM9ci5sZWZ0O28uc2Nyb2xsVG9wIT1pK2UmJihvLnNjcm9sbFRvcD1pK2UpLG8uc2Nyb2xsTGVmdCE9cyYmKG8uc2Nyb2xsTGVmdD1zKX19dmFyIEU9bnVsbDtmdW5jdGlvbiBBKHQpe2lmKHQuc2V0QWN0aXZlKXJldHVybiB0LnNldEFjdGl2ZSgpO2lmKEUpcmV0dXJuIHQuZm9jdXMoRSk7dmFyIGU9TSh0KTt0LmZvY3VzKG51bGw9PUU/e2dldCBwcmV2ZW50U2Nyb2xsKCl7cmV0dXJuIEU9e3ByZXZlbnRTY3JvbGw6ITB9LCEwfX06dm9pZCAwKSxFfHwoRT0hMSxOKGUsMCkpfWZ1bmN0aW9uIFIodCxlKXtmb3IodmFyIG4scixvPTJlOCxpPTAscz1lLnRvcCxhPWUudG9wLGM9dC5maXJzdENoaWxkLGg9MDtjO2M9Yy5uZXh0U2libGluZyxoKyspe3ZhciBwPXZvaWQgMDtpZigxPT1jLm5vZGVUeXBlKXA9Yy5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9Yy5ub2RlVHlwZSljb250aW51ZTtwPWQoYykuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIHU9MDt1PHAubGVuZ3RoO3UrKyl7dmFyIGY9cFt1XTtpZihmLnRvcDw9cyYmZi5ib3R0b20+PWEpe3M9TWF0aC5tYXgoZi5ib3R0b20scyksYT1NYXRoLm1pbihmLnRvcCxhKTt2YXIgbD1mLmxlZnQ+ZS5sZWZ0P2YubGVmdC1lLmxlZnQ6Zi5yaWdodDxlLmxlZnQ/ZS5sZWZ0LWYucmlnaHQ6MDtpZihsPG8pe249YyxvPWwscj1sJiYzPT1uLm5vZGVUeXBlP3tsZWZ0OmYucmlnaHQ8ZS5sZWZ0P2YucmlnaHQ6Zi5sZWZ0LHRvcDplLnRvcH06ZSwxPT1jLm5vZGVUeXBlJiZsJiYoaT1oKyhlLmxlZnQ+PShmLmxlZnQrZi5yaWdodCkvMj8xOjApKTtjb250aW51ZX19IW4mJihlLmxlZnQ+PWYucmlnaHQmJmUudG9wPj1mLnRvcHx8ZS5sZWZ0Pj1mLmxlZnQmJmUudG9wPj1mLmJvdHRvbSkmJihpPWgrMSl9fXJldHVybiBuJiYzPT1uLm5vZGVUeXBlP3oobixyKTohbnx8byYmMT09bi5ub2RlVHlwZT97bm9kZTp0LG9mZnNldDppfTpSKG4scil9ZnVuY3Rpb24geih0LGUpe2Zvcih2YXIgbj10Lm5vZGVWYWx1ZS5sZW5ndGgscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLG89MDtvPG47bysrKXtyLnNldEVuZCh0LG8rMSksci5zZXRTdGFydCh0LG8pO3ZhciBpPV8ociwxKTtpZihpLnRvcCE9aS5ib3R0b20mJkQoZSxpKSlyZXR1cm57bm9kZTp0LG9mZnNldDpvKyhlLmxlZnQ+PShpLmxlZnQraS5yaWdodCkvMj8xOjApfX1yZXR1cm57bm9kZTp0LG9mZnNldDowfX1mdW5jdGlvbiBEKHQsZSl7cmV0dXJuIHQubGVmdD49ZS5sZWZ0LTEmJnQubGVmdDw9ZS5yaWdodCsxJiZ0LnRvcD49ZS50b3AtMSYmdC50b3A8PWUuYm90dG9tKzF9ZnVuY3Rpb24gSSh0LGUpe3ZhciBuPXQucGFyZW50Tm9kZTtyZXR1cm4gbiYmL15saSQvaS50ZXN0KG4ubm9kZU5hbWUpJiZlLmxlZnQ8dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0P246dH1mdW5jdGlvbiBQKHQsZSxuKXt2YXIgcj1SKGUsbiksbz1yLm5vZGUsaT1yLm9mZnNldCxzPS0xO2lmKDE9PW8ubm9kZVR5cGUmJiFvLmZpcnN0Q2hpbGQpe3ZhciBhPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cz1hLmxlZnQhPWEucmlnaHQmJm4ubGVmdD4oYS5sZWZ0K2EucmlnaHQpLzI/MTotMX1yZXR1cm4gdC5kb2NWaWV3LnBvc0Zyb21ET00obyxpLHMpfWZ1bmN0aW9uIEIodCxlLG4scil7Zm9yKHZhciBvPS0xLGk9ZTs7KXtpZihpPT10LmRvbSlicmVhazt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoaSwhMCk7aWYoIXMpcmV0dXJuIG51bGw7aWYocy5ub2RlLmlzQmxvY2smJnMucGFyZW50KXt2YXIgYT1zLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihhLmxlZnQ+ci5sZWZ0fHxhLnRvcD5yLnRvcClvPXMucG9zQmVmb3JlO2Vsc2V7aWYoIShhLnJpZ2h0PHIubGVmdHx8YS5ib3R0b208ci50b3ApKWJyZWFrO289cy5wb3NBZnRlcn19aT1zLmRvbS5wYXJlbnROb2RlfXJldHVybiBvPi0xP286dC5kb2NWaWV3LnBvc0Zyb21ET00oZSxuKX1mdW5jdGlvbiBGKHQsZSxuKXt2YXIgcj10LmNoaWxkTm9kZXMubGVuZ3RoO2lmKHImJm4udG9wPG4uYm90dG9tKWZvcih2YXIgbz1NYXRoLm1heCgwLE1hdGgubWluKHItMSxNYXRoLmZsb29yKHIqKGUudG9wLW4udG9wKS8obi5ib3R0b20tbi50b3ApKS0yKSksaT1vOzspe3ZhciBzPXQuY2hpbGROb2Rlc1tpXTtpZigxPT1zLm5vZGVUeXBlKWZvcih2YXIgYT1zLmdldENsaWVudFJlY3RzKCksYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgaD1hW2NdO2lmKEQoZSxoKSlyZXR1cm4gRihzLGUsaCl9aWYoKGk9KGkrMSklcik9PW8pYnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gaih0LGUpe3ZhciBuLHIsbyxpLGE9dC5yb290O2lmKGEuY2FyZXRQb3NpdGlvbkZyb21Qb2ludCl0cnl7dmFyIGM9YS5jYXJldFBvc2l0aW9uRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7YyYmKG49YyxvPW4ub2Zmc2V0Tm9kZSxpPW4ub2Zmc2V0KX1jYXRjaChtKXt9aWYoIW8mJmEuY2FyZXRSYW5nZUZyb21Qb2ludCl7dmFyIGg9YS5jYXJldFJhbmdlRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7aCYmKHI9aCxvPXIuc3RhcnRDb250YWluZXIsaT1yLnN0YXJ0T2Zmc2V0KX12YXIgcCx1PWEuZWxlbWVudEZyb21Qb2ludChlLmxlZnQsZS50b3ArMSk7aWYoIXV8fCF0LmRvbS5jb250YWlucygxIT11Lm5vZGVUeXBlP3UucGFyZW50Tm9kZTp1KSl7dmFyIGY9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIUQoZSxmKSlyZXR1cm4gbnVsbDtpZih1PUYodC5kb20sZSxmKSwhdSlyZXR1cm4gbnVsbH1pZih1PUkodSxlKSxvKXtpZihzLmdlY2tvJiYxPT1vLm5vZGVUeXBlJiYoaT1NYXRoLm1pbihpLG8uY2hpbGROb2Rlcy5sZW5ndGgpLGk8by5jaGlsZE5vZGVzLmxlbmd0aCkpe3ZhciBsLGQ9by5jaGlsZE5vZGVzW2ldOyJJTUciPT1kLm5vZGVOYW1lJiYobD1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS5yaWdodDw9ZS5sZWZ0JiZsLmJvdHRvbT5lLnRvcCYmaSsrfW89PXQuZG9tJiZpPT1vLmNoaWxkTm9kZXMubGVuZ3RoLTEmJjE9PW8ubGFzdENoaWxkLm5vZGVUeXBlJiZlLnRvcD5vLmxhc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20/cD10LnN0YXRlLmRvYy5jb250ZW50LnNpemU6MCE9aSYmMT09by5ub2RlVHlwZSYmIkJSIj09by5jaGlsZE5vZGVzW2ktMV0ubm9kZU5hbWV8fChwPUIodCxvLGksZSkpfW51bGw9PXAmJihwPVAodCx1LGUpKTt2YXIgdj10LmRvY1ZpZXcubmVhcmVzdERlc2ModSwhMCk7cmV0dXJue3BvczpwLGluc2lkZTp2P3YucG9zQXRTdGFydC12LmJvcmRlcjotMX19ZnVuY3Rpb24gXyh0LGUpe3ZhciBuPXQuZ2V0Q2xpZW50UmVjdHMoKTtyZXR1cm4gbi5sZW5ndGg/bltlPDA/MDpuLmxlbmd0aC0xXTp0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uICQodCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0O2lmKDM9PXIubm9kZVR5cGUmJihzLmNocm9tZXx8cy5nZWNrbykpe3ZhciBpPV8oZChyLG8sbyksMCk7aWYocy5nZWNrbyYmbyYmL1xzLy50ZXN0KHIubm9kZVZhbHVlW28tMV0pJiZvPHIubm9kZVZhbHVlLmxlbmd0aCl7dmFyIGE9XyhkKHIsby0xLG8tMSksLTEpO2lmKE1hdGguYWJzKGEubGVmdC1pLmxlZnQpPDEmJmEudG9wPT1pLnRvcCl7dmFyIGM9XyhkKHIsbyxvKzEpLC0xKTtyZXR1cm4gSihjLGMubGVmdDxhLmxlZnQpfX1yZXR1cm4gaX1pZigxPT1yLm5vZGVUeXBlJiYhdC5zdGF0ZS5kb2MucmVzb2x2ZShlKS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGgscD0hMDtpZihvPHIuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciB1PXIuY2hpbGROb2Rlc1tvXTsxPT11Lm5vZGVUeXBlJiYoaD11LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1pZighaCYmbyl7dmFyIGY9ci5jaGlsZE5vZGVzW28tMV07MT09Zi5ub2RlVHlwZSYmKGg9Zi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPSExKX1yZXR1cm4gTChofHxyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHApfWZvcih2YXIgbD0tMTtsPDI7bCs9MilpZihsPDAmJm8pe3ZhciB2PXZvaWQgMCxtPTM9PXIubm9kZVR5cGU/ZChyLG8tMSxvKTozPT0odj1yLmNoaWxkTm9kZXNbby0xXSkubm9kZVR5cGU/ZCh2KToxPT12Lm5vZGVUeXBlJiYiQlIiIT12Lm5vZGVOYW1lP3Y6bnVsbDtpZihtKXt2YXIgeT1fKG0sMSk7aWYoeS50b3A8eS5ib3R0b20pcmV0dXJuIEooeSwhMSl9fWVsc2UgaWYobD4wJiZvPGcocikpe3ZhciB3PXZvaWQgMCx4PTM9PXIubm9kZVR5cGU/ZChyLG8sbysxKTozPT0odz1yLmNoaWxkTm9kZXNbb10pLm5vZGVUeXBlP2Qodyk6MT09dy5ub2RlVHlwZT93Om51bGw7aWYoeCl7dmFyIGI9Xyh4LC0xKTtpZihiLnRvcDxiLmJvdHRvbSlyZXR1cm4gSihiLCEwKX19cmV0dXJuIEooXygzPT1yLm5vZGVUeXBlP2Qocik6ciwwKSwhMSl9ZnVuY3Rpb24gSih0LGUpe2lmKDA9PXQud2lkdGgpcmV0dXJuIHQ7dmFyIG49ZT90LmxlZnQ6dC5yaWdodDtyZXR1cm57dG9wOnQudG9wLGJvdHRvbTp0LmJvdHRvbSxsZWZ0Om4scmlnaHQ6bn19ZnVuY3Rpb24gTCh0LGUpe2lmKDA9PXQuaGVpZ2h0KXJldHVybiB0O3ZhciBuPWU/dC50b3A6dC5ib3R0b207cmV0dXJue3RvcDpuLGJvdHRvbTpuLGxlZnQ6dC5sZWZ0LHJpZ2h0OnQucmlnaHR9fWZ1bmN0aW9uIFYodCxlLG4pe3ZhciByPXQuc3RhdGUsbz10LnJvb3QuYWN0aXZlRWxlbWVudDtyIT1lJiZ0LnVwZGF0ZVN0YXRlKGUpLG8hPXQuZG9tJiZ0LmZvY3VzKCk7dHJ5e3JldHVybiBuKCl9ZmluYWxseXtyIT1lJiZ0LnVwZGF0ZVN0YXRlKHIpLG8hPXQuZG9tJiZvLmZvY3VzKCl9fWZ1bmN0aW9uIHEodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89InVwIj09bj9yLiRhbmNob3IubWluKHIuJGhlYWQpOnIuJGFuY2hvci5tYXgoci4kaGVhZCk7cmV0dXJuIFYodCxlLChmdW5jdGlvbigpe2Zvcih2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyhvLnBvcykscj1lLm5vZGU7Oyl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHIsITApO2lmKCFpKWJyZWFrO2lmKGkubm9kZS5pc0Jsb2NrKXtyPWkuZG9tO2JyZWFrfXI9aS5kb20ucGFyZW50Tm9kZX1mb3IodmFyIHM9JCh0LG8ucG9zKSxhPXIuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7dmFyIGM9dm9pZCAwO2lmKDE9PWEubm9kZVR5cGUpYz1hLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1hLm5vZGVUeXBlKWNvbnRpbnVlO2M9ZChhLDAsYS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpfWZvcih2YXIgaD0wO2g8Yy5sZW5ndGg7aCsrKXt2YXIgcD1jW2hdO2lmKHAuYm90dG9tPnAudG9wJiYoInVwIj09bj9wLmJvdHRvbTxzLnRvcCsxOnAudG9wPnMuYm90dG9tLTEpKXJldHVybiExfX1yZXR1cm4hMH0pKX12YXIgVz0vW1x1MDU5MC1cdTA4YWNdLztmdW5jdGlvbiBIKHQsZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGhlYWQ7aWYoIW8ucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBpPW8ucGFyZW50T2Zmc2V0LHM9IWksYT1pPT1vLnBhcmVudC5jb250ZW50LnNpemUsYz1nZXRTZWxlY3Rpb24oKTtyZXR1cm4gVy50ZXN0KG8ucGFyZW50LnRleHRDb250ZW50KSYmYy5tb2RpZnk/Vih0LGUsKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRSYW5nZUF0KDApLHI9Yy5mb2N1c05vZGUsaT1jLmZvY3VzT2Zmc2V0LHM9Yy5jYXJldEJpZGlMZXZlbDtjLm1vZGlmeSgibW92ZSIsbiwiY2hhcmFjdGVyIik7dmFyIGE9by5kZXB0aD90LmRvY1ZpZXcuZG9tQWZ0ZXJQb3Moby5iZWZvcmUoKSk6dC5kb20saD0hYS5jb250YWlucygxPT1jLmZvY3VzTm9kZS5ub2RlVHlwZT9jLmZvY3VzTm9kZTpjLmZvY3VzTm9kZS5wYXJlbnROb2RlKXx8cj09Yy5mb2N1c05vZGUmJmk9PWMuZm9jdXNPZmZzZXQ7cmV0dXJuIGMucmVtb3ZlQWxsUmFuZ2VzKCksYy5hZGRSYW5nZShlKSxudWxsIT1zJiYoYy5jYXJldEJpZGlMZXZlbD1zKSxofSkpOiJsZWZ0Ij09bnx8ImJhY2t3YXJkIj09bj9zOmF9dmFyIEs9bnVsbCxVPW51bGwsRz0hMTtmdW5jdGlvbiBYKHQsZSxuKXtyZXR1cm4gSz09ZSYmVT09bj9HOihLPWUsVT1uLEc9InVwIj09bnx8ImRvd24iPT1uP3EodCxlLG4pOkgodCxlLG4pKX12YXIgWT0wLFo9MSxRPTIsdHQ9MyxldD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRyZW49ZSx0aGlzLmRvbT1uLG4ucG1WaWV3RGVzYz10aGlzLHRoaXMuY29udGVudERPTT1yLHRoaXMuZGlydHk9WX0sbnQ9e2JlZm9yZVBvc2l0aW9uOntjb25maWd1cmFibGU6ITB9LHNpemU6e2NvbmZpZ3VyYWJsZTohMH0sYm9yZGVyOntjb25maWd1cmFibGU6ITB9LHBvc0JlZm9yZTp7Y29uZmlndXJhYmxlOiEwfSxwb3NBdFN0YXJ0Ontjb25maWd1cmFibGU6ITB9LHBvc0FmdGVyOntjb25maWd1cmFibGU6ITB9LHBvc0F0RW5kOntjb25maWd1cmFibGU6ITB9LGNvbnRlbnRMb3N0Ontjb25maWd1cmFibGU6ITB9fTtldC5wcm90b3R5cGUubWF0Y2hlc1dpZGdldD1mdW5jdGlvbigpe3JldHVybiExfSxldC5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZXQucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGV0LnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiExfSxudC5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZXQucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxldC5wcm90b3R5cGUuc3RvcEV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuITF9LG50LnNpemUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXQrPXRoaXMuY2hpbGRyZW5bZV0uc2l6ZTtyZXR1cm4gdH0sbnQuYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiAwfSxldC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucGFyZW50PW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz09dGhpcyYmKHRoaXMuZG9tLnBtVmlld0Rlc2M9bnVsbCk7Zm9yKHZhciB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0KyspdGhpcy5jaGlsZHJlblt0XS5kZXN0cm95KCl9LGV0LnByb3RvdHlwZS5wb3NCZWZvcmVDaGlsZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucG9zQXRTdGFydDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jaGlsZHJlbltlXTtpZihyPT10KXJldHVybiBuO24rPXIuc2l6ZX19LG50LnBvc0JlZm9yZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQodGhpcyl9LG50LnBvc0F0U3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpK3RoaXMuYm9yZGVyOjB9LG50LnBvc0FmdGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc0JlZm9yZSt0aGlzLnNpemV9LG50LnBvc0F0RW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc0F0U3RhcnQrdGhpcy5zaXplLTIqdGhpcy5ib3JkZXJ9LGV0LnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpKXtpZihuPDApe3ZhciByLG87aWYodD09dGhpcy5jb250ZW50RE9NKXI9dC5jaGlsZE5vZGVzW2UtMV07ZWxzZXt3aGlsZSh0LnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSl0PXQucGFyZW50Tm9kZTtyPXQucHJldmlvdXNTaWJsaW5nfXdoaWxlKHImJighKG89ci5wbVZpZXdEZXNjKXx8by5wYXJlbnQhPXRoaXMpKXI9ci5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIHI/dGhpcy5wb3NCZWZvcmVDaGlsZChvKStvLnNpemU6dGhpcy5wb3NBdFN0YXJ0fXZhciBpLHM7aWYodD09dGhpcy5jb250ZW50RE9NKWk9dC5jaGlsZE5vZGVzW2VdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7aT10Lm5leHRTaWJsaW5nfXdoaWxlKGkmJighKHM9aS5wbVZpZXdEZXNjKXx8cy5wYXJlbnQhPXRoaXMpKWk9aS5uZXh0U2libGluZztyZXR1cm4gaT90aGlzLnBvc0JlZm9yZUNoaWxkKHMpOnRoaXMucG9zQXRFbmR9dmFyIGE7aWYodGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiZ0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pKWE9MiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuY29udGVudERPTSk7ZWxzZSBpZih0aGlzLmRvbS5maXJzdENoaWxkKXtpZigwPT1lKWZvcih2YXIgYz10OztjPWMucGFyZW50Tm9kZSl7aWYoYz09dGhpcy5kb20pe2E9ITE7YnJlYWt9aWYoYy5wYXJlbnROb2RlLmZpcnN0Q2hpbGQhPWMpYnJlYWt9aWYobnVsbD09YSYmZT09dC5jaGlsZE5vZGVzLmxlbmd0aClmb3IodmFyIGg9dDs7aD1oLnBhcmVudE5vZGUpe2lmKGg9PXRoaXMuZG9tKXthPSEwO2JyZWFrfWlmKGgucGFyZW50Tm9kZS5sYXN0Q2hpbGQhPWgpYnJlYWt9fXJldHVybihudWxsPT1hP24+MDphKT90aGlzLnBvc0F0RW5kOnRoaXMucG9zQXRTdGFydH0sZXQucHJvdG90eXBlLm5lYXJlc3REZXNjPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPSEwLHI9dDtyO3I9ci5wYXJlbnROb2RlKXt2YXIgbz10aGlzLmdldERlc2Mocik7aWYobyYmKCFlfHxvLm5vZGUpKXtpZighbnx8IW8ubm9kZURPTXx8KDE9PW8ubm9kZURPTS5ub2RlVHlwZT9vLm5vZGVET00uY29udGFpbnModCk6by5ub2RlRE9NPT10KSlyZXR1cm4gbztuPSExfX19LGV0LnByb3RvdHlwZS5nZXREZXNjPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnBtVmlld0Rlc2Msbj1lO247bj1uLnBhcmVudClpZihuPT10aGlzKXJldHVybiBlfSxldC5wcm90b3R5cGUucG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXQ7O3I9ci5wYXJlbnROb2RlKXt2YXIgbz10aGlzLmdldERlc2Mocik7aWYobylyZXR1cm4gby5sb2NhbFBvc0Zyb21ET00odCxlLG4pfX0sZXQucHJvdG90eXBlLmRlc2NBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY2hpbGRyZW5bZV0sbz1uK3Iuc2l6ZTtpZihuPT10JiZvIT1uKXt3aGlsZSghci5ib3JkZXImJnIuY2hpbGRyZW4ubGVuZ3RoKXI9ci5jaGlsZHJlblswXTtyZXR1cm4gcn1pZih0PG8pcmV0dXJuIHIuZGVzY0F0KHQtbi1yLmJvcmRlcik7bj1vfX0sZXQucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY29udGVudERPTSlyZXR1cm57bm9kZTp0aGlzLmRvbSxvZmZzZXQ6MH07Zm9yKHZhciBlPTAsbj0wOztuKyspe2lmKGU9PXQpe3doaWxlKG48dGhpcy5jaGlsZHJlbi5sZW5ndGgmJih0aGlzLmNoaWxkcmVuW25dLmJlZm9yZVBvc2l0aW9ufHx0aGlzLmNoaWxkcmVuW25dLmRvbS5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pKW4rKztyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sb2Zmc2V0Om49PXRoaXMuY2hpbGRyZW4ubGVuZ3RoP3RoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aDpmKHRoaXMuY2hpbGRyZW5bbl0uZG9tKX19aWYobj09dGhpcy5jaGlsZHJlbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBvc2l0aW9uICIrdCk7dmFyIHI9dGhpcy5jaGlsZHJlbltuXSxvPWUrci5zaXplO2lmKHQ8bylyZXR1cm4gci5kb21Gcm9tUG9zKHQtZS1yLmJvcmRlcik7ZT1vfX0sZXQucHJvdG90eXBlLnBhcnNlUmFuZ2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPTApLDA9PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OjAsdG9PZmZzZXQ6dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RofTtmb3IodmFyIHI9LTEsbz0tMSxpPW4scz0wOztzKyspe3ZhciBhPXRoaXMuY2hpbGRyZW5bc10sYz1pK2Euc2l6ZTtpZigtMT09ciYmdDw9Yyl7dmFyIGg9aSthLmJvcmRlcjtpZih0Pj1oJiZlPD1jLWEuYm9yZGVyJiZhLm5vZGUmJmEuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKGEuY29udGVudERPTSkpcmV0dXJuIGEucGFyc2VSYW5nZSh0LGUsaCk7dD1pO2Zvcih2YXIgcD1zO3A+MDtwLS0pe3ZhciB1PXRoaXMuY2hpbGRyZW5bcC0xXTtpZih1LnNpemUmJnUuZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSYmIXUuZW1wdHlDaGlsZEF0KDEpKXtyPWYodS5kb20pKzE7YnJlYWt9dC09dS5zaXplfS0xPT1yJiYocj0wKX1pZihyPi0xJiZlPD1jKXtlPWM7Zm9yKHZhciBsPXMrMTtsPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2wrKyl7dmFyIGQ9dGhpcy5jaGlsZHJlbltsXTtpZihkLnNpemUmJmQuZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSYmIWQuZW1wdHlDaGlsZEF0KC0xKSl7bz1mKGQuZG9tKTticmVha31lKz1kLnNpemV9LTE9PW8mJihvPXRoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWt9aT1jfXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OnIsdG9PZmZzZXQ6b319LGV0LnByb3RvdHlwZS5lbXB0eUNoaWxkQXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5ib3JkZXJ8fCF0aGlzLmNvbnRlbnRET018fCF0aGlzLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTt2YXIgZT10aGlzLmNoaWxkcmVuW3Q8MD8wOnRoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdO3JldHVybiAwPT1lLnNpemV8fGUuZW1wdHlDaGlsZEF0KHQpfSxldC5wcm90b3R5cGUuZG9tQWZ0ZXJQb3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb21Gcm9tUG9zKHQpLG49ZS5ub2RlLHI9ZS5vZmZzZXQ7aWYoMSE9bi5ub2RlVHlwZXx8cj09bi5jaGlsZE5vZGVzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gbm9kZSBhZnRlciBwb3MgIit0KTtyZXR1cm4gbi5jaGlsZE5vZGVzW3JdfSxldC5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1NYXRoLm1pbih0LGUpLGk9TWF0aC5tYXgodCxlKSxzPTAsYT0wO3M8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cysrKXt2YXIgYz10aGlzLmNoaWxkcmVuW3NdLGg9YStjLnNpemU7aWYobz5hJiZpPGgpcmV0dXJuIGMuc2V0U2VsZWN0aW9uKHQtYS1jLmJvcmRlcixlLWEtYy5ib3JkZXIsbixyKTthPWh9dmFyIHA9dGhpcy5kb21Gcm9tUG9zKHQpLHU9dGhpcy5kb21Gcm9tUG9zKGUpLGY9bi5nZXRTZWxlY3Rpb24oKSxsPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7aWYocnx8IXYocC5ub2RlLHAub2Zmc2V0LGYuYW5jaG9yTm9kZSxmLmFuY2hvck9mZnNldCl8fCF2KHUubm9kZSx1Lm9mZnNldCxmLmZvY3VzTm9kZSxmLmZvY3VzT2Zmc2V0KSl7aWYoZi5leHRlbmQpbC5zZXRFbmQocC5ub2RlLHAub2Zmc2V0KSxsLmNvbGxhcHNlKCExKTtlbHNle2lmKHQ+ZSl7dmFyIGQ9cDtwPXUsdT1kfWwuc2V0RW5kKHUubm9kZSx1Lm9mZnNldCksbC5zZXRTdGFydChwLm5vZGUscC5vZmZzZXQpfWYucmVtb3ZlQWxsUmFuZ2VzKCksZi5hZGRSYW5nZShsKSxmLmV4dGVuZCYmZi5leHRlbmQodS5ub2RlLHUub2Zmc2V0KX19LGV0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NfSxudC5jb250ZW50TG9zdC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiYhdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKX0sZXQucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9MDtyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5jaGlsZHJlbltyXSxpPW4rby5zaXplO2lmKG49PWk/dDw9aSYmZT49bjp0PGkmJmU+bil7dmFyIHM9bitvLmJvcmRlcixhPWktby5ib3JkZXI7aWYodD49cyYmZTw9YSlyZXR1cm4gdGhpcy5kaXJ0eT10PT1ufHxlPT1pP1E6Wix2b2lkKHQhPXN8fGUhPWF8fCFvLmNvbnRlbnRMb3N0JiZvLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00/by5tYXJrRGlydHkodC1zLGUtcyk6by5kaXJ0eT10dCk7by5kaXJ0eT10dH1uPWl9dGhpcy5kaXJ0eT1RfSxldC5wcm90b3R5cGUubWFya1BhcmVudHNEaXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhcmVudDt0O3Q9dC5wYXJlbnQpe3ZhciBlPVE7dC5kaXJ0eTxlJiYodC5kaXJ0eT1lKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV0LnByb3RvdHlwZSxudCk7dmFyIHJ0PVtdLG90PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dmFyIGkscz1uLnR5cGUudG9ET007aWYoImZ1bmN0aW9uIj09dHlwZW9mIHMmJihzPXMociwoZnVuY3Rpb24oKXtyZXR1cm4gaT9pLnBhcmVudD9pLnBhcmVudC5wb3NCZWZvcmVDaGlsZChpKTp2b2lkIDA6b30pKSksIW4udHlwZS5zcGVjLnJhdyl7aWYoMSE9cy5ub2RlVHlwZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2EuYXBwZW5kQ2hpbGQocykscz1hfXMuY29udGVudEVkaXRhYmxlPSExLHMuY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itd2lkZ2V0Iil9dC5jYWxsKHRoaXMsZSxydCxzLG51bGwpLHRoaXMud2lkZ2V0PW4saT10aGlzfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtiZWZvcmVQb3NpdGlvbjp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkZ2V0LnR5cGUuc2lkZTwwfSxlLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5PT1ZJiZ0LnR5cGUuZXEodGhpcy53aWRnZXQudHlwZSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWRnZXQuc3BlYy5zdG9wRXZlbnQ7cmV0dXJuISFlJiZlKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShldCksaXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLHJ0LG4sbnVsbCksdGhpcy50ZXh0RE9NPXIsdGhpcy50ZXh0PW99dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUpe3JldHVybiB0IT10aGlzLnRleHRET00/dGhpcy5wb3NBdFN0YXJ0KyhlP3RoaXMuc2l6ZTowKTp0aGlzLnBvc0F0U3RhcnQrZX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLnRleHRET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSI9PT10LnR5cGUmJnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oZXQpLHN0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpKXt2YXIgcz1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0sYT1zJiZzKG4saSxyKTtyZXR1cm4gYSYmYS5kb218fChhPW9bImIiXS5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4scikpKSxuZXcgZSh0LG4sYS5kb20sYS5jb250ZW50RE9NfHxhLmRvbSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybnttYXJrOnRoaXMubWFyay50eXBlLm5hbWUsYXR0cnM6dGhpcy5tYXJrLmF0dHJzLGNvbnRlbnRFbGVtZW50OnRoaXMuY29udGVudERPTX19LGUucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5IT10dCYmdGhpcy5tYXJrLmVxKHQpfSxlLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oZSxuKXtpZih0LnByb3RvdHlwZS5tYXJrRGlydHkuY2FsbCh0aGlzLGUsbiksdGhpcy5kaXJ0eSE9WSl7dmFyIHI9dGhpcy5wYXJlbnQ7d2hpbGUoIXIubm9kZSlyPXIucGFyZW50O3IuZGlydHk8dGhpcy5kaXJ0eSYmKHIuZGlydHk9dGhpcy5kaXJ0eSksdGhpcy5kaXJ0eT1ZfX0sZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPWUuY3JlYXRlKHRoaXMucGFyZW50LHRoaXMubWFyaywhMCxyKSxpPXRoaXMuY2hpbGRyZW4scz10aGlzLnNpemU7bjxzJiYoaT1OdChpLG4scyxyKSksdD4wJiYoaT1OdChpLDAsdCxyKSk7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKyspaVthXS5wYXJlbnQ9bztyZXR1cm4gby5jaGlsZHJlbj1pLG99LGV9KGV0KSxhdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyxoKXt0LmNhbGwodGhpcyxlLG4uaXNMZWFmP3J0OltdLGkscyksdGhpcy5ub2RlRE9NPWEsdGhpcy5ub2RlPW4sdGhpcy5vdXRlckRlY289cix0aGlzLmlubmVyRGVjbz1vLHMmJnRoaXMudXBkYXRlQ2hpbGRyZW4oYyxoKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxib3JkZXI6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpLHMsYSl7dmFyIGMsaCxwPXMubm9kZVZpZXdzW24udHlwZS5uYW1lXSx1PXAmJnAobixzLChmdW5jdGlvbigpe3JldHVybiBoP2gucGFyZW50P2gucGFyZW50LnBvc0JlZm9yZUNoaWxkKGgpOnZvaWQgMDphfSksciksZj11JiZ1LmRvbSxsPXUmJnUuY29udGVudERPTTtpZihuLmlzVGV4dClpZihmKXtpZigzIT1mLm5vZGVUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJUZXh0IG11c3QgYmUgcmVuZGVyZWQgYXMgYSBET00gdGV4dCBub2RlIil9ZWxzZSBmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4udGV4dCk7ZWxzZSBmfHwoYz1vWyJiIl0ucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuKSksZj1jLmRvbSxsPWMuY29udGVudERPTSk7bHx8bi5pc1RleHR8fCJCUiI9PWYubm9kZU5hbWV8fChmLmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fChmLmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYoZi5kcmFnZ2FibGU9ITApKTt2YXIgZD1mO3JldHVybiBmPWd0KGYscixuKSx1P2g9bmV3IHV0KHQsbixyLGksZixsLGQsdSxzLGErMSk6bi5pc1RleHQ/bmV3IGh0KHQsbixyLGksZixkLHMpOm5ldyBlKHQsbixyLGksZixsLGQscyxhKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP29bImMiXS5lbXB0eTp0Lm5vZGUuY29udGVudH0sZX0sZS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRpcnR5PT1ZJiZ0LmVxKHRoaXMubm9kZSkmJnd0KGUsdGhpcy5vdXRlckRlY28pJiZuLmVxKHRoaXMuaW5uZXJEZWNvKX0sbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVNpemV9LG4uYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuaXNMZWFmPzA6MX0sZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5ub2RlLmlubGluZUNvbnRlbnQsaT1lLHM9ciYmdC5jb21wb3NpbmcmJnRoaXMubG9jYWxDb21wb3NpdGlvbk5vZGUodCxlKSxhPW5ldyBidCh0aGlzLHMmJnMubm9kZSk7T3QodGhpcy5ub2RlLHRoaXMuaW5uZXJEZWNvLChmdW5jdGlvbihlLHMpe2Uuc3BlYy5tYXJrcz9hLnN5bmNUb01hcmtzKGUuc3BlYy5tYXJrcyxyLHQpOmUudHlwZS5zaWRlPj0wJiZhLnN5bmNUb01hcmtzKHM9PW4ubm9kZS5jaGlsZENvdW50P29bImQiXS5ub25lOm4ubm9kZS5jaGlsZChzKS5tYXJrcyxyLHQpLGEucGxhY2VXaWRnZXQoZSx0LGkpfSksKGZ1bmN0aW9uKGUsbixvLHMpe2Euc3luY1RvTWFya3MoZS5tYXJrcyxyLHQpLGEuZmluZE5vZGVNYXRjaChlLG4sbyxzKXx8YS51cGRhdGVOZXh0Tm9kZShlLG4sbyx0LHMpfHxhLmFkZE5vZGUoZSxuLG8sdCxpKSxpKz1lLm5vZGVTaXplfSkpLGEuc3luY1RvTWFya3MocnQscix0KSx0aGlzLm5vZGUuaXNUZXh0YmxvY2smJmEuYWRkVGV4dGJsb2NrSGFja3MoKSxhLmRlc3Ryb3lSZXN0KCksKGEuY2hhbmdlZHx8dGhpcy5kaXJ0eT09USkmJihzJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQscyksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXtmdCh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbikscy5pb3MmJkN0KHRoaXMuZG9tKX0sZS5wcm90b3R5cGUubG9jYWxDb21wb3NpdGlvbk5vZGU9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixvPW4uZnJvbSxpPW4udG87aWYoISghKHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiZyJdKXx8bzxlfHxpPmUrdGhpcy5ub2RlLmNvbnRlbnQuc2l6ZSkpe3ZhciBzPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxhPU10KHMuZm9jdXNOb2RlLHMuZm9jdXNPZmZzZXQpO2lmKGEmJnRoaXMuZG9tLmNvbnRhaW5zKGEucGFyZW50Tm9kZSkpe3ZhciBjPWEubm9kZVZhbHVlLGg9VHQodGhpcy5ub2RlLmNvbnRlbnQsYyxvLWUsaS1lKTtyZXR1cm4gaDwwP251bGw6e25vZGU6YSxwb3M6aCx0ZXh0OmN9fX19LGUucHJvdG90eXBlLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5ub2RlLHI9ZS5wb3Msbz1lLnRleHQ7aWYoIXRoaXMuZ2V0RGVzYyhuKSl7Zm9yKHZhciBpPW47O2k9aS5wYXJlbnROb2RlKXtpZihpLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSlicmVhazt3aGlsZShpLnByZXZpb3VzU2libGluZylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaS5wcmV2aW91c1NpYmxpbmcpO3doaWxlKGkubmV4dFNpYmxpbmcpaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkubmV4dFNpYmxpbmcpO2kucG1WaWV3RGVzYyYmKGkucG1WaWV3RGVzYz1udWxsKX12YXIgcz1uZXcgaXQodGhpcyxpLG4sbyk7dC5jb21wb3NpdGlvbk5vZGVzLnB1c2gocyksdGhpcy5jaGlsZHJlbj1OdCh0aGlzLmNoaWxkcmVuLHIscitvLmxlbmd0aCx0LHMpfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiEodGhpcy5kaXJ0eT09dHR8fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZUlubmVyKHQsZSxuLHIpLCEwKX0sZS5wcm90b3R5cGUudXBkYXRlSW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5ub2RlPXQsdGhpcy5pbm5lckRlY289bix0aGlzLmNvbnRlbnRET00mJnRoaXMudXBkYXRlQ2hpbGRyZW4ocix0aGlzLnBvc0F0U3RhcnQpLHRoaXMuZGlydHk9WX0sZS5wcm90b3R5cGUudXBkYXRlT3V0ZXJEZWNvPWZ1bmN0aW9uKHQpe2lmKCF3dCh0LHRoaXMub3V0ZXJEZWNvKSl7dmFyIGU9MSE9dGhpcy5ub2RlRE9NLm5vZGVUeXBlLG49dGhpcy5kb207dGhpcy5kb209bXQodGhpcy5kb20sdGhpcy5ub2RlRE9NLHZ0KHRoaXMub3V0ZXJEZWNvLHRoaXMubm9kZSxlKSx2dCh0LHRoaXMubm9kZSxlKSksdGhpcy5kb20hPW4mJihuLnBtVmlld0Rlc2M9bnVsbCx0aGlzLmRvbS5wbVZpZXdEZXNjPXRoaXMpLHRoaXMub3V0ZXJEZWNvPXR9fSxlLnByb3RvdHlwZS5zZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5ub2RlRE9NLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSIpLCF0aGlzLmNvbnRlbnRET00mJnRoaXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHwodGhpcy5kb20uZHJhZ2dhYmxlPSEwKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5ub2RlRE9NLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSIpLCF0aGlzLmNvbnRlbnRET00mJnRoaXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHwodGhpcy5kb20uZHJhZ2dhYmxlPSExKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oZXQpO2Z1bmN0aW9uIGN0KHQsZSxuLHIsbyl7cmV0dXJuIGd0KHIsZSx0KSxuZXcgYXQobnVsbCx0LGUsbixyLHIscixvLDApfXZhciBodD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxudWxsLHMsYSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntza2lwOnRoaXMubm9kZURPTS5wYXJlbnROb2RlfHwhMH19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiEodGhpcy5kaXJ0eT09dHR8fHRoaXMuZGlydHkhPVkmJiF0aGlzLmluUGFyZW50KCl8fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLmRpcnR5PT1ZJiZ0LnRleHQ9PXRoaXMubm9kZS50ZXh0fHx0LnRleHQ9PXRoaXMubm9kZURPTS5ub2RlVmFsdWV8fCh0aGlzLm5vZGVET00ubm9kZVZhbHVlPXQudGV4dCksdGhpcy5ub2RlPXQsdGhpcy5kaXJ0eT1ZLCEwKX0sZS5wcm90b3R5cGUuaW5QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQuY29udGVudERPTSxlPXRoaXMubm9kZURPTTtlO2U9ZS5wYXJlbnROb2RlKWlmKGU9PXQpcmV0dXJuITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy5ub2RlRE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gZT09dGhpcy5ub2RlRE9NP3RoaXMucG9zQXRTdGFydCtNYXRoLm1pbihuLHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk6dC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIiE9dC50eXBlJiYic2VsZWN0aW9uIiE9dC50eXBlfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89dGhpcy5ub2RlLmN1dCh0LG4pLGk9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KTtyZXR1cm4gbmV3IGUodGhpcy5wYXJlbnQsbyx0aGlzLm91dGVyRGVjbyx0aGlzLmlubmVyRGVjbyxpLGkscil9LGV9KGF0KSxwdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcnR5PT1ZfSxlfShldCksdXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsaCxwKXt0LmNhbGwodGhpcyxlLG4scixvLGkscyxhLGgscCksdGhpcy5zcGVjPWN9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLG4scixvKXtpZih0aGlzLmRpcnR5PT10dClyZXR1cm4hMTtpZih0aGlzLnNwZWMudXBkYXRlKXt2YXIgaT10aGlzLnNwZWMudXBkYXRlKGUsbik7cmV0dXJuIGkmJnRoaXMudXBkYXRlSW5uZXIoZSxuLHIsbyksaX1yZXR1cm4hKCF0aGlzLmNvbnRlbnRET00mJiFlLmlzTGVhZikmJnQucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuc2VsZWN0Tm9kZT90aGlzLnNwZWMuc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLnNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZT90aGlzLnNwZWMuZGVzZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuZGVzZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLG4scixvKXt0aGlzLnNwZWMuc2V0U2VsZWN0aW9uP3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24oZSxuLHIpOnQucHJvdG90eXBlLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzdHJveSYmdGhpcy5zcGVjLmRlc3Ryb3koKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuc3BlYy5zdG9wRXZlbnQmJnRoaXMuc3BlYy5zdG9wRXZlbnQodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwZWMuaWdub3JlTXV0YXRpb24/dGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uKGUpOnQucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uLmNhbGwodGhpcyxlKX0sZX0oYXQpO2Z1bmN0aW9uIGZ0KHQsZSl7Zm9yKHZhciBuPXQuZmlyc3RDaGlsZCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1vLmRvbTtpZihpLnBhcmVudE5vZGU9PXQpe3doaWxlKGkhPW4pbj14dChuKTtuPW4ubmV4dFNpYmxpbmd9ZWxzZSB0Lmluc2VydEJlZm9yZShpLG4pO2lmKG8gaW5zdGFuY2VvZiBzdCl7dmFyIHM9bj9uLnByZXZpb3VzU2libGluZzp0Lmxhc3RDaGlsZDtmdChvLmNvbnRlbnRET00sby5jaGlsZHJlbiksbj1zP3MubmV4dFNpYmxpbmc6dC5maXJzdENoaWxkfX13aGlsZShuKW49eHQobil9ZnVuY3Rpb24gbHQodCl7dCYmKHRoaXMubm9kZU5hbWU9dCl9bHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGR0PVtuZXcgbHRdO2Z1bmN0aW9uIHZ0KHQsZSxuKXtpZigwPT10Lmxlbmd0aClyZXR1cm4gZHQ7Zm9yKHZhciByPW4/ZHRbMF06bmV3IGx0LG89W3JdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIHM9dFtpXS50eXBlLmF0dHJzLGE9cjtpZihzKWZvcih2YXIgYyBpbiBzLm5vZGVOYW1lJiZvLnB1c2goYT1uZXcgbHQocy5ub2RlTmFtZSkpLHMpe3ZhciBoPXNbY107bnVsbCE9aCYmKG4mJjE9PW8ubGVuZ3RoJiZvLnB1c2goYT1yPW5ldyBsdChlLmlzSW5saW5lPyJzcGFuIjoiZGl2IikpLCJjbGFzcyI9PWM/YS5jbGFzcz0oYS5jbGFzcz9hLmNsYXNzKyIgIjoiIikraDoic3R5bGUiPT1jP2Euc3R5bGU9KGEuc3R5bGU/YS5zdHlsZSsiOyI6IiIpK2g6Im5vZGVOYW1lIiE9YyYmKGFbY109aCkpfX1yZXR1cm4gb31mdW5jdGlvbiBtdCh0LGUsbixyKXtpZihuPT1kdCYmcj09ZHQpcmV0dXJuIGU7Zm9yKHZhciBvPWUsaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldLGE9bltpXTtpZihpKXt2YXIgYz12b2lkIDA7YSYmYS5ub2RlTmFtZT09cy5ub2RlTmFtZSYmbyE9dCYmKGM9by5wYXJlbnROb2RlKSYmYy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PXMubm9kZU5hbWV8fChjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocy5ub2RlTmFtZSksYy5hcHBlbmRDaGlsZChvKSxhPWR0WzBdKSxvPWN9eXQobyxhfHxkdFswXSxzKX1yZXR1cm4gb31mdW5jdGlvbiB5dCh0LGUsbil7Zm9yKHZhciByIGluIGUpImNsYXNzIj09cnx8InN0eWxlIj09cnx8Im5vZGVOYW1lIj09cnx8ciBpbiBufHx0LnJlbW92ZUF0dHJpYnV0ZShyKTtmb3IodmFyIG8gaW4gbikiY2xhc3MiIT1vJiYic3R5bGUiIT1vJiYibm9kZU5hbWUiIT1vJiZuW29dIT1lW29dJiZ0LnNldEF0dHJpYnV0ZShvLG5bb10pO2lmKGUuY2xhc3MhPW4uY2xhc3Mpe2Zvcih2YXIgaT1lLmNsYXNzP2UuY2xhc3Muc3BsaXQoIiAiKTpydCxzPW4uY2xhc3M/bi5jbGFzcy5zcGxpdCgiICIpOnJ0LGE9MDthPGkubGVuZ3RoO2ErKyktMT09cy5pbmRleE9mKGlbYV0pJiZ0LmNsYXNzTGlzdC5yZW1vdmUoaVthXSk7Zm9yKHZhciBjPTA7YzxzLmxlbmd0aDtjKyspLTE9PWkuaW5kZXhPZihzW2NdKSYmdC5jbGFzc0xpc3QuYWRkKHNbY10pfWlmKGUuc3R5bGUhPW4uc3R5bGUpe2lmKGUuc3R5bGUpe3ZhciBoLHA9L1xzKihbXHdcLVx4YTEtXHVmZmZmXSspXHMqOig/OiIoPzpcXC58W14iXSkqInwnKD86XFwufFteJ10pKid8XCguKj9cKXxbXjtdKSovZzt3aGlsZShoPXAuZXhlYyhlLnN0eWxlKSl0LnN0eWxlLnJlbW92ZVByb3BlcnR5KGhbMV0pfW4uc3R5bGUmJih0LnN0eWxlLmNzc1RleHQrPW4uc3R5bGUpfX1mdW5jdGlvbiBndCh0LGUsbil7cmV0dXJuIG10KHQsdCxkdCx2dChlLG4sMSE9dC5ub2RlVHlwZSkpfWZ1bmN0aW9uIHd0KHQsZSl7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLnR5cGUuZXEoZVtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB4dCh0KXt2YXIgZT10Lm5leHRTaWJsaW5nO3JldHVybiB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksZX12YXIgYnQ9ZnVuY3Rpb24odCxlKXt0aGlzLnRvcD10LHRoaXMubG9jaz1lLHRoaXMuaW5kZXg9MCx0aGlzLnN0YWNrPVtdLHRoaXMuY2hhbmdlZD0hMTt2YXIgbj1rdCh0Lm5vZGUuY29udGVudCx0LmNoaWxkcmVuKTt0aGlzLnByZU1hdGNoZWQ9bi5ub2Rlcyx0aGlzLnByZU1hdGNoT2Zmc2V0PW4ub2Zmc2V0fTtmdW5jdGlvbiBrdCh0LGUpe2Zvcih2YXIgbj1bXSxyPXQuY2hpbGRDb3VudCxvPWUubGVuZ3RoLTE7cj4wJiZvPj0wO28tLSl7dmFyIGk9ZVtvXSxzPWkubm9kZTtpZihzKXtpZihzIT10LmNoaWxkKHItMSkpYnJlYWs7bi5wdXNoKGkpLC0tcn19cmV0dXJue25vZGVzOm4ucmV2ZXJzZSgpLG9mZnNldDpyfX1mdW5jdGlvbiBTdCh0LGUpe3JldHVybiB0LnR5cGUuc2lkZS1lLnR5cGUuc2lkZX1mdW5jdGlvbiBPdCh0LGUsbixyKXt2YXIgbz1lLmxvY2Fscyh0KSxpPTA7aWYoMCE9by5sZW5ndGgpZm9yKHZhciBzPTAsYT1bXSxjPW51bGwsaD0wOzspe2lmKHM8by5sZW5ndGgmJm9bc10udG89PWkpe3ZhciBwPW9bcysrXSx1PXZvaWQgMDt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKSh1fHwodT1bcF0pKS5wdXNoKG9bcysrXSk7aWYodSl7dS5zb3J0KFN0KTtmb3IodmFyIGY9MDtmPHUubGVuZ3RoO2YrKyluKHVbZl0saCl9ZWxzZSBuKHAsaCl9dmFyIGw9dm9pZCAwLGQ9dm9pZCAwO2lmKGMpZD0tMSxsPWMsYz1udWxsO2Vsc2V7aWYoIShoPHQuY2hpbGRDb3VudCkpYnJlYWs7ZD1oLGw9dC5jaGlsZChoKyspfWZvcih2YXIgdj0wO3Y8YS5sZW5ndGg7disrKWFbdl0udG88PWkmJmEuc3BsaWNlKHYtLSwxKTt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLmZyb209PWkpYS5wdXNoKG9bcysrXSk7dmFyIG09aStsLm5vZGVTaXplO2lmKGwuaXNUZXh0KXt2YXIgeT1tO3M8by5sZW5ndGgmJm9bc10uZnJvbTx5JiYoeT1vW3NdLmZyb20pO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWFbZ10udG88eSYmKHk9YVtnXS50byk7eTxtJiYoYz1sLmN1dCh5LWkpLGw9bC5jdXQoMCx5LWkpLG09eSxkPS0xKX1yKGwsYS5sZW5ndGg/YS5zbGljZSgpOnJ0LGUuZm9yQ2hpbGQoaSxsKSxkKSxpPW19ZWxzZSBmb3IodmFyIHc9MDt3PHQuY2hpbGRDb3VudDt3Kyspe3ZhciB4PXQuY2hpbGQodyk7cih4LG8sZS5mb3JDaGlsZChpLHgpLHcpLGkrPXgubm9kZVNpemV9fWZ1bmN0aW9uIEN0KHQpe2lmKCJVTCI9PXQubm9kZU5hbWV8fCJPTCI9PXQubm9kZU5hbWUpe3ZhciBlPXQuc3R5bGUuY3NzVGV4dDt0LnN0eWxlLmNzc1RleHQ9ZSsiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudCIsd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkubGlzdFN0eWxlLHQuc3R5bGUuY3NzVGV4dD1lfX1mdW5jdGlvbiBNdCh0LGUpe2Zvcig7Oyl7aWYoMz09dC5ub2RlVHlwZSlyZXR1cm4gdDtpZigxPT10Lm5vZGVUeXBlJiZlPjApe2lmKHQuY2hpbGROb2Rlcy5sZW5ndGg+ZSYmMz09dC5jaGlsZE5vZGVzW2VdLm5vZGVUeXBlKXJldHVybiB0LmNoaWxkTm9kZXNbZV07dD10LmNoaWxkTm9kZXNbZS0xXSxlPWcodCl9ZWxzZXtpZighKDE9PXQubm9kZVR5cGUmJmU8dC5jaGlsZE5vZGVzLmxlbmd0aCkpcmV0dXJuIG51bGw7dD10LmNoaWxkTm9kZXNbZV0sZT0wfX19ZnVuY3Rpb24gVHQodCxlLG4scil7Zm9yKHZhciBvPSIiLGk9MCxzPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgYT10LmNoaWxkKGkpLGM9cythLm5vZGVTaXplO2lmKGEuaXNUZXh0KXtpZihvKz1hLnRleHQsYz49cil7dmFyIGg9Yy1vLmxlbmd0aCxwPW8ubGFzdEluZGV4T2YoZSk7d2hpbGUocD4tMSYmaCtwPm4pcD1vLmxhc3RJbmRleE9mKGUscC0xKTtpZihwPi0xJiZoK3ArZS5sZW5ndGg+PXIpcmV0dXJuIGgrcDtpZihjPnIpYnJlYWt9fWVsc2Ugbz0iIjtzPWN9cmV0dXJuLTF9ZnVuY3Rpb24gTnQodCxlLG4scixvKXtmb3IodmFyIGk9W10scz0wLGE9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGM9dFtzXSxoPWEscD1hKz1jLnNpemU7aD49bnx8cDw9ZT9pLnB1c2goYyk6KGg8ZSYmaS5wdXNoKGMuc2xpY2UoMCxlLWgscikpLG8mJihpLnB1c2gobyksbz1udWxsKSxwPm4mJmkucHVzaChjLnNsaWNlKG4taCxjLnNpemUscikpKX1yZXR1cm4gaX1mdW5jdGlvbiBFdCh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLG89bi4kYW5jaG9yLGk9bi4kaGVhZCxzPWU+MD9vLm1heChpKTpvLm1pbihpKSxhPXMucGFyZW50LmlubGluZUNvbnRlbnQ/cy5kZXB0aD90LmRvYy5yZXNvbHZlKGU+MD9zLmFmdGVyKCk6cy5iZWZvcmUoKSk6bnVsbDpzO3JldHVybiBhJiZyWyJlIl0uZmluZEZyb20oYSxlKX1mdW5jdGlvbiBBdCh0LGUpe3JldHVybiB0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpLnNjcm9sbEludG9WaWV3KCkpLCEwfWZ1bmN0aW9uIFJ0KHQsZSxuKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbjtpZihvIGluc3RhbmNlb2YgclsiZyJdKXtpZighby5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/InJpZ2h0IjoibGVmdCIpKXt2YXIgaT1FdCh0LnN0YXRlLGUpO3JldHVybiEhKGkmJmkgaW5zdGFuY2VvZiByWyJiIl0pJiZBdCh0LGkpfXZhciBhLGM9by4kaGVhZCxoPWMudGV4dE9mZnNldD9udWxsOmU8MD9jLm5vZGVCZWZvcmU6Yy5ub2RlQWZ0ZXI7aWYoIWh8fGguaXNUZXh0KXJldHVybiExO3ZhciBwPWU8MD9jLnBvcy1oLm5vZGVTaXplOmMucG9zO3JldHVybiEhKGguaXNBdG9tfHwoYT10LmRvY1ZpZXcuZGVzY0F0KHApKSYmIWEuY29udGVudERPTSkmJihyWyJiIl0uaXNTZWxlY3RhYmxlKGgpP0F0KHQsbmV3IHJbImIiXShlPDA/dC5zdGF0ZS5kb2MucmVzb2x2ZShjLnBvcy1oLm5vZGVTaXplKTpjKSk6ISFzLndlYmtpdCYmQXQodCxuZXcgclsiZyJdKHQuc3RhdGUuZG9jLnJlc29sdmUoZTwwP3A6cCtoLm5vZGVTaXplKSkpKX1pZihvIGluc3RhbmNlb2YgclsiYiJdJiZvLm5vZGUuaXNJbmxpbmUpcmV0dXJuIEF0KHQsbmV3IHJbImciXShlPjA/by4kdG86by4kZnJvbSkpO3ZhciB1PUV0KHQuc3RhdGUsZSk7cmV0dXJuISF1JiZBdCh0LHUpfWZ1bmN0aW9uIHp0KHQpe3JldHVybiAzPT10Lm5vZGVUeXBlP3Qubm9kZVZhbHVlLmxlbmd0aDp0LmNoaWxkTm9kZXMubGVuZ3RofWZ1bmN0aW9uIER0KHQpe3ZhciBlPXQucG1WaWV3RGVzYztyZXR1cm4gZSYmMD09ZS5zaXplJiYodC5uZXh0U2libGluZ3x8IkJSIiE9dC5ub2RlTmFtZSl9ZnVuY3Rpb24gSXQodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4pe3ZhciBvLGksYT0hMTtmb3Iocy5nZWNrbyYmMT09bi5ub2RlVHlwZSYmcjx6dChuKSYmRHQobi5jaGlsZE5vZGVzW3JdKSYmKGE9ITApOzspaWYocj4wKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBjPW4uY2hpbGROb2Rlc1tyLTFdO2lmKER0KGMpKW89bixpPS0tcjtlbHNle2lmKDMhPWMubm9kZVR5cGUpYnJlYWs7bj1jLHI9bi5ub2RlVmFsdWUubGVuZ3RofX1lbHNle2lmKEJ0KG4pKWJyZWFrO3ZhciBoPW4ucHJldmlvdXNTaWJsaW5nO3doaWxlKGgmJkR0KGgpKW89bi5wYXJlbnROb2RlLGk9ZihoKSxoPWgucHJldmlvdXNTaWJsaW5nO2lmKGgpbj1oLHI9enQobik7ZWxzZXtpZihuPW4ucGFyZW50Tm9kZSxuPT10LmRvbSlicmVhaztyPTB9fWE/RnQodCxlLG4scik6byYmRnQodCxlLG8saSl9fWZ1bmN0aW9uIFB0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXtmb3IodmFyIG8saSxzPXp0KG4pOzspaWYocjxzKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyXTtpZighRHQoYSkpYnJlYWs7bz1uLGk9KytyfWVsc2V7aWYoQnQobikpYnJlYWs7dmFyIGM9bi5uZXh0U2libGluZzt3aGlsZShjJiZEdChjKSlvPWMucGFyZW50Tm9kZSxpPWYoYykrMSxjPWMubmV4dFNpYmxpbmc7aWYoYyluPWMscj0wLHM9enQobik7ZWxzZXtpZihuPW4ucGFyZW50Tm9kZSxuPT10LmRvbSlicmVhaztyPXM9MH19byYmRnQodCxlLG8saSl9fWZ1bmN0aW9uIEJ0KHQpe3ZhciBlPXQucG1WaWV3RGVzYztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9ja31mdW5jdGlvbiBGdCh0LGUsbixyKXtpZih4KGUpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0RW5kKG4sciksby5zZXRTdGFydChuLHIpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShvKX1lbHNlIGUuZXh0ZW5kJiZlLmV4dGVuZChuLHIpO3QuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCl9ZnVuY3Rpb24ganQodCxlLG4pe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiByWyJnIl0mJiFvLmVtcHR5fHxuLmluZGV4T2YoInMiKT4tMSlyZXR1cm4hMTt2YXIgaT1vLiRmcm9tLHM9by4kdG87aWYoIWkucGFyZW50LmlubGluZUNvbnRlbnR8fHQuZW5kT2ZUZXh0YmxvY2soZTwwPyJ1cCI6ImRvd24iKSl7dmFyIGE9RXQodC5zdGF0ZSxlKTtpZihhJiZhIGluc3RhbmNlb2YgclsiYiJdKXJldHVybiBBdCh0LGEpfWlmKCFpLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgYz1yWyJlIl0uZmluZEZyb20oZTwwP2k6cyxlKTtyZXR1cm4hY3x8QXQodCxjKX1yZXR1cm4hMX1mdW5jdGlvbiBfdCh0LGUpe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByWyJnIl0pKXJldHVybiEwO3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLG89bi4kaGVhZCxpPW4uJGFuY2hvcixzPW4uZW1wdHk7aWYoIW8uc2FtZVBhcmVudChpKSlyZXR1cm4hMDtpZighcylyZXR1cm4hMTtpZih0LmVuZE9mVGV4dGJsb2NrKGU+MD8iZm9yd2FyZCI6ImJhY2t3YXJkIikpcmV0dXJuITA7dmFyIGE9IW8udGV4dE9mZnNldCYmKGU8MD9vLm5vZGVCZWZvcmU6by5ub2RlQWZ0ZXIpO2lmKGEmJiFhLmlzVGV4dCl7dmFyIGM9dC5zdGF0ZS50cjtyZXR1cm4gZTwwP2MuZGVsZXRlKG8ucG9zLWEubm9kZVNpemUsby5wb3MpOmMuZGVsZXRlKG8ucG9zLG8ucG9zK2Eubm9kZVNpemUpLHQuZGlzcGF0Y2goYyksITB9cmV0dXJuITF9ZnVuY3Rpb24gJHQodCxlLG4pe3QuZG9tT2JzZXJ2ZXIuc3RvcCgpLGUuY29udGVudEVkaXRhYmxlPW4sdC5kb21PYnNlcnZlci5zdGFydCgpfWZ1bmN0aW9uIEp0KHQpe2lmKHMuY2hyb21lJiYhKHQuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldD4wKSl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4mJjE9PW4ubm9kZVR5cGUmJjA9PXImJm4uZmlyc3RDaGlsZCYmImZhbHNlIj09bi5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSl7dmFyIG89bi5maXJzdENoaWxkOyR0KHQsbywhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gJHQodCxvLCExKX0pLDIwKX19fWZ1bmN0aW9uIEx0KHQpe3ZhciBlPSIiO3JldHVybiB0LmN0cmxLZXkmJihlKz0iYyIpLHQubWV0YUtleSYmKGUrPSJtIiksdC5hbHRLZXkmJihlKz0iYSIpLHQuc2hpZnRLZXkmJihlKz0icyIpLGV9ZnVuY3Rpb24gVnQodCxlKXt2YXIgbj1lLmtleUNvZGUscj1MdChlKTtyZXR1cm4gOD09bnx8cy5tYWMmJjcyPT1uJiYiYyI9PXI/X3QodCwtMSl8fEl0KHQpOjQ2PT1ufHxzLm1hYyYmNjg9PW4mJiJjIj09cj9fdCh0LDEpfHxQdCh0KToxMz09bnx8Mjc9PW58fCgzNz09bj9SdCh0LC0xLHIpfHxJdCh0KTozOT09bj9SdCh0LDEscil8fFB0KHQpOjM4PT1uP2p0KHQsLTEscil8fEl0KHQpOjQwPT1uP0p0KHQpfHxqdCh0LDEscil8fFB0KHQpOnI9PShzLm1hYz8ibSI6ImMiKSYmKDY2PT1ufHw3Mz09bnx8ODk9PW58fDkwPT1uKSl9ZnVuY3Rpb24gcXQodCxlKXt2YXIgbixvLGk9dC5yb290LmdldFNlbGVjdGlvbigpLHM9dC5zdGF0ZS5kb2MsYT10LmRvY1ZpZXcubmVhcmVzdERlc2MoaS5mb2N1c05vZGUpLGM9YSYmMD09YS5zaXplLGg9dC5kb2NWaWV3LnBvc0Zyb21ET00oaS5mb2N1c05vZGUsaS5mb2N1c09mZnNldCkscD1zLnJlc29sdmUoaCk7aWYoeChpKSl7bj1wO3doaWxlKGEmJiFhLm5vZGUpYT1hLnBhcmVudDtpZihhJiZhLm5vZGUuaXNBdG9tJiZyWyJiIl0uaXNTZWxlY3RhYmxlKGEubm9kZSkmJmEucGFyZW50KXt2YXIgdT1hLnBvc0JlZm9yZTtvPW5ldyByWyJiIl0oaD09dT9wOnMucmVzb2x2ZSh1KSl9fWVsc2Ugbj1zLnJlc29sdmUodC5kb2NWaWV3LnBvc0Zyb21ET00oaS5hbmNob3JOb2RlLGkuYW5jaG9yT2Zmc2V0KSk7aWYoIW8pe3ZhciBmPSJwb2ludGVyIj09ZXx8dC5zdGF0ZS5zZWxlY3Rpb24uaGVhZDxwLnBvcyYmIWM/MTotMTtvPVp0KHQsbixwLGYpfXJldHVybiBvfWZ1bmN0aW9uIFd0KHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb247aWYoWHQodCxuKSx0LmVkaXRhYmxlP3QuaGFzRm9jdXMoKTp0ZSh0KSYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jb250YWlucyh0LmRvbSkpe2lmKHQuZG9tT2JzZXJ2ZXIuZGlzY29ubmVjdFNlbGVjdGlvbigpLHQuY3Vyc29yV3JhcHBlcilHdCh0KTtlbHNle3ZhciBvLGkscz1uLmFuY2hvcixhPW4uaGVhZDshSHR8fG4gaW5zdGFuY2VvZiByWyJnIl18fChuLiRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50fHwobz1LdCh0LG4uZnJvbSkpLG4uZW1wdHl8fG4uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChpPUt0KHQsbi50bykpKSx0LmRvY1ZpZXcuc2V0U2VsZWN0aW9uKHMsYSx0LnJvb3QsZSksSHQmJihvJiYoby5jb250ZW50RWRpdGFibGU9ImZhbHNlIiksaSYmKGkuY29udGVudEVkaXRhYmxlPSJmYWxzZSIpKSxuLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOnMhPWEmJih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZVdCh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX19YnQucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LGJ0LnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe2lmKHQhPWUpe2Zvcih2YXIgbj10O248ZTtuKyspdGhpcy50b3AuY2hpbGRyZW5bbl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0sYnQucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LGJ0LnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MCxvPXRoaXMuc3RhY2subGVuZ3RoPj4xLGk9TWF0aC5taW4obyx0Lmxlbmd0aCk7d2hpbGUocjxpJiYocj09by0xP3RoaXMudG9wOnRoaXMuc3RhY2tbcisxPDwxXSkubWF0Y2hlc01hcmsodFtyXSkmJiExIT09dFtyXS50eXBlLnNwZWMuc3Bhbm5pbmcpcisrO3doaWxlKHI8byl0aGlzLmRlc3Ryb3lSZXN0KCksdGhpcy50b3AuZGlydHk9WSx0aGlzLmluZGV4PXRoaXMuc3RhY2sucG9wKCksdGhpcy50b3A9dGhpcy5zdGFjay5wb3AoKSxvLS07d2hpbGUobzx0Lmxlbmd0aCl7dGhpcy5zdGFjay5wdXNoKHRoaXMudG9wLHRoaXMuaW5kZXgrMSk7Zm9yKHZhciBzPS0xLGE9dGhpcy5pbmRleDthPE1hdGgubWluKHRoaXMuaW5kZXgrMyx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpO2ErKylpZih0aGlzLnRvcC5jaGlsZHJlblthXS5tYXRjaGVzTWFyayh0W29dKSl7cz1hO2JyZWFrfWlmKHM+LTEpcz50aGlzLmluZGV4JiYodGhpcy5jaGFuZ2VkPSEwLHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxzKSksdGhpcy50b3A9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF07ZWxzZXt2YXIgYz1zdC5jcmVhdGUodGhpcy50b3AsdFtvXSxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4LDAsYyksdGhpcy50b3A9Yyx0aGlzLmNoYW5nZWQ9ITB9dGhpcy5pbmRleD0wLG8rK319LGJ0LnByb3RvdHlwZS5maW5kTm9kZU1hdGNoPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPS0xLGk9cjwwP3ZvaWQgMDp0aGlzLmdldFByZU1hdGNoKHIpLHM9dGhpcy50b3AuY2hpbGRyZW47aWYoaSYmaS5tYXRjaGVzTm9kZSh0LGUsbikpbz1zLmluZGV4T2YoaSk7ZWxzZSBmb3IodmFyIGE9dGhpcy5pbmRleCxjPU1hdGgubWluKHMubGVuZ3RoLGErNSk7YTxjO2ErKyl7dmFyIGg9c1thXTtpZihoLm1hdGNoZXNOb2RlKHQsZSxuKSYmdGhpcy5wcmVNYXRjaGVkLmluZGV4T2YoaCk8MCl7bz1hO2JyZWFrfX1yZXR1cm4hKG88MCkmJih0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsbyksdGhpcy5pbmRleCsrLCEwKX0sYnQucHJvdG90eXBlLnVwZGF0ZU5leHROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7aWYodGhpcy5pbmRleD09dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO3ZhciBpPXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdO2lmKGkgaW5zdGFuY2VvZiBhdCl7dmFyIHM9dGhpcy5wcmVNYXRjaGVkLmluZGV4T2YoaSk7aWYocz4tMSYmcyt0aGlzLnByZU1hdGNoT2Zmc2V0IT1vKXJldHVybiExO3ZhciBhPWkuZG9tLGM9dGhpcy5sb2NrJiYoYT09dGhpcy5sb2NrfHwxPT1hLm5vZGVUeXBlJiZhLmNvbnRhaW5zKHRoaXMubG9jay5wYXJlbnROb2RlKSkmJiEodC5pc1RleHQmJmkubm9kZSYmaS5ub2RlLmlzVGV4dCYmaS5ub2RlRE9NLm5vZGVWYWx1ZT09dC50ZXh0JiZpLmRpcnR5IT10dCYmd3QoZSxpLm91dGVyRGVjbykpO2lmKCFjJiZpLnVwZGF0ZSh0LGUsbixyKSlyZXR1cm4gaS5kb20hPWEmJih0aGlzLmNoYW5nZWQ9ITApLHRoaXMuaW5kZXgrKywhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4scixvKXt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsYXQuY3JlYXRlKHRoaXMudG9wLHQsZSxuLHIsbykpLHRoaXMuY2hhbmdlZD0hMH0sYnQucHJvdG90eXBlLnBsYWNlV2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCYmdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0ubWF0Y2hlc1dpZGdldCh0KSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgcj1uZXcgb3QodGhpcy50b3AsdCxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxyKSx0aGlzLmNoYW5nZWQ9ITB9fSxidC5wcm90b3R5cGUuYWRkVGV4dGJsb2NrSGFja3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4LTFdO3doaWxlKHQgaW5zdGFuY2VvZiBzdCl0PXQuY2hpbGRyZW5bdC5jaGlsZHJlbi5sZW5ndGgtMV07aWYoIXR8fCEodCBpbnN0YW5jZW9mIGh0KXx8L1xuJC8udGVzdCh0Lm5vZGUudGV4dCkpaWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNIYWNrKCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsbmV3IHB0KHRoaXMudG9wLHJ0LGUsbnVsbCkpLHRoaXMuY2hhbmdlZD0hMH19O3ZhciBIdD1zLnNhZmFyaXx8cy5jaHJvbWUmJnMuY2hyb21lX3ZlcnNpb248NjM7ZnVuY3Rpb24gS3QodCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0LGk9bzxyLmNoaWxkTm9kZXMubGVuZ3RoP3IuY2hpbGROb2Rlc1tvXTpudWxsLHM9bz9yLmNoaWxkTm9kZXNbby0xXTpudWxsO2lmKCghaXx8ImZhbHNlIj09aS5jb250ZW50RWRpdGFibGUpJiYoIXN8fCJmYWxzZSI9PXMuY29udGVudEVkaXRhYmxlKSl7aWYoaSlyZXR1cm4gaS5jb250ZW50RWRpdGFibGU9InRydWUiLGk7aWYocylyZXR1cm4gcy5jb250ZW50RWRpdGFibGU9InRydWUiLHN9fWZ1bmN0aW9uIFV0KHQpe3ZhciBlPXQuZG9tLm93bmVyRG9jdW1lbnQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkKTt2YXIgbj10LnJvb3QuZ2V0U2VsZWN0aW9uKCkscj1uLmFuY2hvck5vZGUsbz1uLmFuY2hvck9mZnNldDtlLmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQ9ZnVuY3Rpb24oKXtuLmFuY2hvck5vZGU9PXImJm4uYW5jaG9yT2Zmc2V0PT1vfHwoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkKSx0LmRvbS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIikpfSl9ZnVuY3Rpb24gR3QodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxyPXQuY3Vyc29yV3JhcHBlci5kb20sbz0iSU1HIj09ci5ub2RlTmFtZTtvP24uc2V0RW5kKHIucGFyZW50Tm9kZSxmKHIpKzEpOm4uc2V0RW5kKHIsMCksbi5jb2xsYXBzZSghMSksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG4pLCFvJiYhdC5zdGF0ZS5zZWxlY3Rpb24udmlzaWJsZSYmcy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmKHIuZGlzYWJsZWQ9ITAsci5kaXNhYmxlZD0hMSl9ZnVuY3Rpb24gWHQodCxlKXtpZihlIGluc3RhbmNlb2YgclsiYiJdKXt2YXIgbj10LmRvY1ZpZXcuZGVzY0F0KGUuZnJvbSk7biE9dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKFl0KHQpLG4mJm4uc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bil9ZWxzZSBZdCh0KX1mdW5jdGlvbiBZdCh0KXt0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjJiYodC5sYXN0U2VsZWN0ZWRWaWV3RGVzYy5wYXJlbnQmJnQubGFzdFNlbGVjdGVkVmlld0Rlc2MuZGVzZWxlY3ROb2RlKCksdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsKX1mdW5jdGlvbiBadCh0LGUsbixvKXtyZXR1cm4gdC5zb21lUHJvcCgiY3JlYXRlU2VsZWN0aW9uQmV0d2VlbiIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxuKX0pKXx8clsiZyJdLmJldHdlZW4oZSxuLG8pfWZ1bmN0aW9uIFF0KHQpe3JldHVybighdC5lZGl0YWJsZXx8dC5yb290LmFjdGl2ZUVsZW1lbnQ9PXQuZG9tKSYmdGUodCl9ZnVuY3Rpb24gdGUodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpO2lmKCFlLmFuY2hvck5vZGUpcmV0dXJuITE7dHJ5e3JldHVybiB0LmRvbS5jb250YWlucygzPT1lLmFuY2hvck5vZGUubm9kZVR5cGU/ZS5hbmNob3JOb2RlLnBhcmVudE5vZGU6ZS5hbmNob3JOb2RlKSYmKHQuZWRpdGFibGV8fHQuZG9tLmNvbnRhaW5zKDM9PWUuZm9jdXNOb2RlLm5vZGVUeXBlP2UuZm9jdXNOb2RlLnBhcmVudE5vZGU6ZS5mb2N1c05vZGUpKX1jYXRjaChuKXtyZXR1cm4hMX19ZnVuY3Rpb24gZWUodCl7dmFyIGU9dC5kb2NWaWV3LmRvbUZyb21Qb3ModC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yKSxuPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtyZXR1cm4gdihlLm5vZGUsZS5vZmZzZXQsbi5hbmNob3JOb2RlLG4uYW5jaG9yT2Zmc2V0KX1mdW5jdGlvbiBuZSh0LGUsbil7dmFyIHI9dC5kb2NWaWV3LnBhcnNlUmFuZ2UoZSxuKSxpPXIubm9kZSxhPXIuZnJvbU9mZnNldCxjPXIudG9PZmZzZXQsaD1yLmZyb20scD1yLnRvLHU9dC5yb290LmdldFNlbGVjdGlvbigpLGY9bnVsbCxsPXUuYW5jaG9yTm9kZTtpZihsJiZ0LmRvbS5jb250YWlucygxPT1sLm5vZGVUeXBlP2w6bC5wYXJlbnROb2RlKSYmKGY9W3tub2RlOmwsb2Zmc2V0OnUuYW5jaG9yT2Zmc2V0fV0seCh1KXx8Zi5wdXNoKHtub2RlOnUuZm9jdXNOb2RlLG9mZnNldDp1LmZvY3VzT2Zmc2V0fSkpLHMuY2hyb21lJiY4PT09dC5sYXN0S2V5Q29kZSlmb3IodmFyIGQ9YztkPmE7ZC0tKXt2YXIgdj1pLmNoaWxkTm9kZXNbZC0xXSxtPXYucG1WaWV3RGVzYztpZigiQlIiPT12Lm5vZGVUeXBlJiYhbSl7Yz1kO2JyZWFrfWlmKCFtfHxtLnNpemUpYnJlYWt9dmFyIHk9dC5zdGF0ZS5kb2MsZz10LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8b1siYSJdLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpLHc9eS5yZXNvbHZlKGgpLGI9bnVsbCxrPWcucGFyc2UoaSx7dG9wTm9kZTp3LnBhcmVudCx0b3BNYXRjaDp3LnBhcmVudC5jb250ZW50TWF0Y2hBdCh3LmluZGV4KCkpLHRvcE9wZW46ITAsZnJvbTphLHRvOmMscHJlc2VydmVXaGl0ZXNwYWNlOiF3LnBhcmVudC50eXBlLnNwZWMuY29kZXx8ImZ1bGwiLGVkaXRhYmxlQ29udGVudDohMCxmaW5kUG9zaXRpb25zOmYscnVsZUZyb21Ob2RlOnJlLGNvbnRleHQ6d30pO2lmKGYmJm51bGwhPWZbMF0ucG9zKXt2YXIgUz1mWzBdLnBvcyxPPWZbMV0mJmZbMV0ucG9zO251bGw9PU8mJihPPVMpLGI9e2FuY2hvcjpTK2gsaGVhZDpPK2h9fXJldHVybntkb2M6ayxzZWw6Yixmcm9tOmgsdG86cH19ZnVuY3Rpb24gcmUodCl7dmFyIGU9dC5wbVZpZXdEZXNjO2lmKGUpcmV0dXJuIGUucGFyc2VSdWxlKCk7aWYoIkJSIj09dC5ub2RlTmFtZSYmdC5wYXJlbnROb2RlKXtpZihzLnNhZmFyaSYmL14odWx8b2wpJC9pLnRlc3QodC5wYXJlbnROb2RlLm5vZGVOYW1lKSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSkse3NraXA6bn19aWYodC5wYXJlbnROb2RlLmxhc3RDaGlsZD09dHx8cy5zYWZhcmkmJi9eKHRyfHRhYmxlKSQvaS50ZXN0KHQucGFyZW50Tm9kZS5ub2RlTmFtZSkpcmV0dXJue2lnbm9yZTohMH19ZWxzZSBpZigiSU1HIj09dC5ub2RlTmFtZSYmdC5nZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiKSlyZXR1cm57aWdub3JlOiEwfX1mdW5jdGlvbiBvZSh0LGUsbixvKXtpZihlPDApe3ZhciBpPXQubGFzdFNlbGVjdGlvblRpbWU+RGF0ZS5ub3coKS01MD90Lmxhc3RTZWxlY3Rpb25PcmlnaW46bnVsbCxhPXF0KHQsaSk7aWYoIXQuc3RhdGUuc2VsZWN0aW9uLmVxKGEpKXt2YXIgYz10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihhKTsicG9pbnRlciI9PWk/Yy5zZXRNZXRhKCJwb2ludGVyIiwhMCk6ImtleSI9PWkmJmMuc2Nyb2xsSW50b1ZpZXcoKSx0LmRpc3BhdGNoKGMpfX1lbHNle3ZhciBoPXQuc3RhdGUuZG9jLnJlc29sdmUoZSkscD1oLnNoYXJlZERlcHRoKG4pO2U9aC5iZWZvcmUocCsxKSxuPXQuc3RhdGUuZG9jLnJlc29sdmUobikuYWZ0ZXIocCsxKTt2YXIgdSxmLGw9dC5zdGF0ZS5zZWxlY3Rpb24sZD1uZSh0LGUsbiksdj10LnN0YXRlLmRvYyxtPXYuc2xpY2UoZC5mcm9tLGQudG8pOzg9PT10Lmxhc3RLZXlDb2RlJiZEYXRlLm5vdygpLTEwMDx0Lmxhc3RLZXlDb2RlVGltZT8odT10LnN0YXRlLnNlbGVjdGlvbi50byxmPSJlbmQiKToodT10LnN0YXRlLnNlbGVjdGlvbi5mcm9tLGY9InN0YXJ0IiksdC5sYXN0S2V5Q29kZT1udWxsO3ZhciB5PWhlKG0uY29udGVudCxkLmRvYy5jb250ZW50LGQuZnJvbSx1LGYpO2lmKCF5KXtpZighKG8mJmwgaW5zdGFuY2VvZiByWyJnIl0mJiFsLmVtcHR5JiZsLiRoZWFkLnNhbWVQYXJlbnQobC4kYW5jaG9yKSl8fHQuY29tcG9zaW5nfHxkLnNlbCYmZC5zZWwuYW5jaG9yIT1kLnNlbC5oZWFkKXtpZihkLnNlbCl7dmFyIGc9aWUodCx0LnN0YXRlLmRvYyxkLnNlbCk7ZyYmIWcuZXEodC5zdGF0ZS5zZWxlY3Rpb24pJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGcpKX1yZXR1cm59eT17c3RhcnQ6bC5mcm9tLGVuZEE6bC50byxlbmRCOmwudG99fXQuZG9tQ2hhbmdlQ291bnQrKyx0LnN0YXRlLnNlbGVjdGlvbi5mcm9tPHQuc3RhdGUuc2VsZWN0aW9uLnRvJiZ5LnN0YXJ0PT15LmVuZEImJnQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiZyJdJiYoeS5zdGFydD50LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZ5LnN0YXJ0PD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tKzI/eS5zdGFydD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tOnkuZW5kQTx0LnN0YXRlLnNlbGVjdGlvbi50byYmeS5lbmRBPj10LnN0YXRlLnNlbGVjdGlvbi50by0yJiYoeS5lbmRCKz10LnN0YXRlLnNlbGVjdGlvbi50by15LmVuZEEseS5lbmRBPXQuc3RhdGUuc2VsZWN0aW9uLnRvKSkscy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmeS5lbmRCPT15LnN0YXJ0KzEmJnkuZW5kQT09eS5zdGFydCYmeS5zdGFydD5kLmZyb20mJiIgwqAiPT1kLmRvYy50ZXh0QmV0d2Vlbih5LnN0YXJ0LWQuZnJvbS0xLHkuc3RhcnQtZC5mcm9tKzEpJiYoeS5zdGFydC0tLHkuZW5kQS0tLHkuZW5kQi0tKTt2YXIgdyx4PWQuZG9jLnJlc29sdmVOb0NhY2hlKHkuc3RhcnQtZC5mcm9tKSxrPWQuZG9jLnJlc29sdmVOb0NhY2hlKHkuZW5kQi1kLmZyb20pO2lmKCEoIXguc2FtZVBhcmVudChrKSYmeC5wb3M8ZC5kb2MuY29udGVudC5zaXplJiYodz1yWyJlIl0uZmluZEZyb20oZC5kb2MucmVzb2x2ZSh4LnBvcysxKSwxLCEwKSkmJncuaGVhZD09ay5wb3MmJnQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LGIoMTMsIkVudGVyIikpfSkpKSlpZih0LnN0YXRlLnNlbGVjdGlvbi5hbmNob3I+eS5zdGFydCYmYWUodix5LnN0YXJ0LHkuZW5kQSx4LGspJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxiKDgsIkJhY2tzcGFjZSIpKX0pKSlzLmFuZHJvaWQmJnMuY2hyb21lJiZ0LmRvbU9ic2VydmVyLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcygpO2Vsc2V7dmFyIFMsTyxDLE0sVD15LnN0YXJ0LE49eS5lbmRBO2lmKHguc2FtZVBhcmVudChrKSYmeC5wYXJlbnQuaW5saW5lQ29udGVudClpZih4LnBvcz09ay5wb3Mpcy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmMD09eC5wYXJlbnRPZmZzZXQmJih0LmRvbU9ic2VydmVyLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIFd0KHQpfSksMjApKSxTPXQuc3RhdGUudHIuZGVsZXRlKFQsTiksTz12LnJlc29sdmUoeS5zdGFydCkubWFya3NBY3Jvc3Modi5yZXNvbHZlKHkuZW5kQSkpO2Vsc2UgaWYoeS5lbmRBPT15LmVuZEImJihNPXYucmVzb2x2ZSh5LnN0YXJ0KSkmJihDPXNlKHgucGFyZW50LmNvbnRlbnQuY3V0KHgucGFyZW50T2Zmc2V0LGsucGFyZW50T2Zmc2V0KSxNLnBhcmVudC5jb250ZW50LmN1dChNLnBhcmVudE9mZnNldCx5LmVuZEEtTS5zdGFydCgpKSkpKVM9dC5zdGF0ZS50ciwiYWRkIj09Qy50eXBlP1MuYWRkTWFyayhULE4sQy5tYXJrKTpTLnJlbW92ZU1hcmsoVCxOLEMubWFyayk7ZWxzZSBpZih4LnBhcmVudC5jaGlsZCh4LmluZGV4KCkpLmlzVGV4dCYmeC5pbmRleCgpPT1rLmluZGV4KCktKGsudGV4dE9mZnNldD8wOjEpKXt2YXIgRT14LnBhcmVudC50ZXh0QmV0d2Vlbih4LnBhcmVudE9mZnNldCxrLnBhcmVudE9mZnNldCk7aWYodC5zb21lUHJvcCgiaGFuZGxlVGV4dElucHV0IiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxULE4sRSl9KSkpcmV0dXJuO1M9dC5zdGF0ZS50ci5pbnNlcnRUZXh0KEUsVCxOKX1pZihTfHwoUz10LnN0YXRlLnRyLnJlcGxhY2UoVCxOLGQuZG9jLnNsaWNlKHkuc3RhcnQtZC5mcm9tLHkuZW5kQi1kLmZyb20pKSksZC5zZWwpe3ZhciBBPWllKHQsUy5kb2MsZC5zZWwpO0EmJiEocy5jaHJvbWUmJnMuYW5kcm9pZCYmdC5jb21wb3NpbmcmJkEuZW1wdHkmJkEuaGVhZD09VHx8cy5pZSYmQS5lbXB0eSYmQS5oZWFkPT1UKSYmUy5zZXRTZWxlY3Rpb24oQSl9TyYmUy5lbnN1cmVNYXJrcyhPKSx0LmRpc3BhdGNoKFMuc2Nyb2xsSW50b1ZpZXcoKSl9fX1mdW5jdGlvbiBpZSh0LGUsbil7cmV0dXJuIE1hdGgubWF4KG4uYW5jaG9yLG4uaGVhZCk+ZS5jb250ZW50LnNpemU/bnVsbDpadCh0LGUucmVzb2x2ZShuLmFuY2hvciksZS5yZXNvbHZlKG4uaGVhZCkpfWZ1bmN0aW9uIHNlKHQsZSl7Zm9yKHZhciBuLHIsaSxzPXQuZmlyc3RDaGlsZC5tYXJrcyxhPWUuZmlyc3RDaGlsZC5tYXJrcyxjPXMsaD1hLHA9MDtwPGEubGVuZ3RoO3ArKyljPWFbcF0ucmVtb3ZlRnJvbVNldChjKTtmb3IodmFyIHU9MDt1PHMubGVuZ3RoO3UrKyloPXNbdV0ucmVtb3ZlRnJvbVNldChoKTtpZigxPT1jLmxlbmd0aCYmMD09aC5sZW5ndGgpcj1jWzBdLG49ImFkZCIsaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIuYWRkVG9TZXQodC5tYXJrcykpfTtlbHNle2lmKDAhPWMubGVuZ3RofHwxIT1oLmxlbmd0aClyZXR1cm4gbnVsbDtyPWhbMF0sbj0icmVtb3ZlIixpPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoci5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX19Zm9yKHZhciBmPVtdLGw9MDtsPGUuY2hpbGRDb3VudDtsKyspZi5wdXNoKGkoZS5jaGlsZChsKSkpO2lmKG9bImMiXS5mcm9tKGYpLmVxKHQpKXJldHVybnttYXJrOnIsdHlwZTpufX1mdW5jdGlvbiBhZSh0LGUsbixyLG8pe2lmKCFyLnBhcmVudC5pc1RleHRibG9ja3x8bi1lPD1vLnBvcy1yLnBvc3x8Y2UociwhMCwhMSk8by5wb3MpcmV0dXJuITE7dmFyIGk9dC5yZXNvbHZlKGUpO2lmKGkucGFyZW50T2Zmc2V0PGkucGFyZW50LmNvbnRlbnQuc2l6ZXx8IWkucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBzPXQucmVzb2x2ZShjZShpLCEwLCEwKSk7cmV0dXJuISghcy5wYXJlbnQuaXNUZXh0YmxvY2t8fHMucG9zPm58fGNlKHMsITAsITEpPG4pJiZyLnBhcmVudC5jb250ZW50LmN1dChyLnBhcmVudE9mZnNldCkuZXEocy5wYXJlbnQuY29udGVudCl9ZnVuY3Rpb24gY2UodCxlLG4pe3ZhciByPXQuZGVwdGgsbz1lP3QuZW5kKCk6dC5wb3M7d2hpbGUocj4wJiYoZXx8dC5pbmRleEFmdGVyKHIpPT10Lm5vZGUocikuY2hpbGRDb3VudCkpci0tLG8rKyxlPSExO2lmKG4pe3ZhciBpPXQubm9kZShyKS5tYXliZUNoaWxkKHQuaW5kZXhBZnRlcihyKSk7d2hpbGUoaSYmIWkuaXNMZWFmKWk9aS5maXJzdENoaWxkLG8rK31yZXR1cm4gb31mdW5jdGlvbiBoZSh0LGUsbixyLG8pe3ZhciBpPXQuZmluZERpZmZTdGFydChlLG4pO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHM9dC5maW5kRGlmZkVuZChlLG4rdC5zaXplLG4rZS5zaXplKSxhPXMuYSxjPXMuYjtpZigiZW5kIj09byl7dmFyIGg9TWF0aC5tYXgoMCxpLU1hdGgubWluKGEsYykpO3ItPWEraC1pfWlmKGE8aSYmdC5zaXplPGUuc2l6ZSl7dmFyIHA9cjw9aSYmcj49YT9pLXI6MDtpLT1wLGM9aSsoYy1hKSxhPWl9ZWxzZSBpZihjPGkpe3ZhciB1PXI8PWkmJnI+PWM/aS1yOjA7aS09dSxhPWkrKGEtYyksYz1pfXJldHVybntzdGFydDppLGVuZEE6YSxlbmRCOmN9fWZ1bmN0aW9uIHBlKHQsZSl7dmFyIG49W10scj1lLmNvbnRlbnQsaT1lLm9wZW5TdGFydCxzPWUub3BlbkVuZDt3aGlsZShpPjEmJnM+MSYmMT09ci5jaGlsZENvdW50JiYxPT1yLmZpcnN0Q2hpbGQuY2hpbGRDb3VudCl7aS0tLHMtLTt2YXIgYT1yLmZpcnN0Q2hpbGQ7bi5wdXNoKGEudHlwZS5uYW1lLGEudHlwZS5oYXNSZXF1aXJlZEF0dHJzKCk/YS5hdHRyczpudWxsKSxyPWEuY29udGVudH12YXIgYz10LnNvbWVQcm9wKCJjbGlwYm9hcmRTZXJpYWxpemVyIil8fG9bImIiXS5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSxoPXhlKCkscD1oLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3AuYXBwZW5kQ2hpbGQoYy5zZXJpYWxpemVGcmFnbWVudChyLHtkb2N1bWVudDpofSkpO3ZhciB1LGY9cC5maXJzdENoaWxkO3doaWxlKGYmJjE9PWYubm9kZVR5cGUmJih1PWdlW2Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXtmb3IodmFyIGw9dS5sZW5ndGgtMTtsPj0wO2wtLSl7dmFyIGQ9aC5jcmVhdGVFbGVtZW50KHVbbF0pO3doaWxlKHAuZmlyc3RDaGlsZClkLmFwcGVuZENoaWxkKHAuZmlyc3RDaGlsZCk7cC5hcHBlbmRDaGlsZChkKX1mPXAuZmlyc3RDaGlsZH1mJiYxPT1mLm5vZGVUeXBlJiZmLnNldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIsaSsiICIrcysiICIrSlNPTi5zdHJpbmdpZnkobikpO3ZhciB2PXQuc29tZVByb3AoImNsaXBib2FyZFRleHRTZXJpYWxpemVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSl8fGUuY29udGVudC50ZXh0QmV0d2VlbigwLGUuY29udGVudC5zaXplLCJcblxuIik7cmV0dXJue2RvbTpwLHRleHQ6dn19ZnVuY3Rpb24gdWUodCxlLG4scixpKXt2YXIgcyxhLGM9aS5wYXJlbnQudHlwZS5zcGVjLmNvZGU7aWYoIW4mJiFlKXJldHVybiBudWxsO3ZhciBoPWUmJihyfHxjfHwhbik7aWYoaCl7aWYodC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkVGV4dCIsKGZ1bmN0aW9uKHQpe2U9dChlKX0pKSxjKXJldHVybiBuZXcgb1siaSJdKG9bImMiXS5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIHA9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsaSl9KSk7cD9hPXA6KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLHM9YmUobik7dmFyIHU9cyYmcy5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSxmPXUmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyh1LmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighYSl7dmFyIGw9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHxvWyJhIl0uZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSk7YT1sLnBhcnNlU2xpY2Uocyx7cHJlc2VydmVXaGl0ZXNwYWNlOiEoIWgmJiFmKSxjb250ZXh0Oml9KX1yZXR1cm4gYT1mP2tlKHllKGEsK2ZbMV0sK2ZbMl0pLGZbM10pOm9bImkiXS5tYXhPcGVuKGZlKGEuY29udGVudCxpKSwhMSksdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkIiwoZnVuY3Rpb24odCl7YT10KGEpfSkpLGF9ZnVuY3Rpb24gZmUodCxlKXtpZih0LmNoaWxkQ291bnQ8MilyZXR1cm4gdDtmb3IodmFyIG49ZnVuY3Rpb24obil7dmFyIHI9ZS5ub2RlKG4pLGk9ci5jb250ZW50TWF0Y2hBdChlLmluZGV4KG4pKSxzPXZvaWQgMCxhPVtdO2lmKHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoYSl7dmFyIGUsbj1pLmZpbmRXcmFwcGluZyh0LnR5cGUpO2lmKCFuKXJldHVybiBhPW51bGw7aWYoZT1hLmxlbmd0aCYmcy5sZW5ndGgmJmRlKG4scyx0LGFbYS5sZW5ndGgtMV0sMCkpYVthLmxlbmd0aC0xXT1lO2Vsc2V7YS5sZW5ndGgmJihhW2EubGVuZ3RoLTFdPXZlKGFbYS5sZW5ndGgtMV0scy5sZW5ndGgpKTt2YXIgcj1sZSh0LG4pO2EucHVzaChyKSxpPWkubWF0Y2hUeXBlKHIudHlwZSxyLmF0dHJzKSxzPW59fX0pKSxhKXJldHVybnt2Om9bImMiXS5mcm9tKGEpfX0scj1lLmRlcHRoO3I+PTA7ci0tKXt2YXIgaT1uKHIpO2lmKGkpcmV0dXJuIGkudn1yZXR1cm4gdH1mdW5jdGlvbiBsZSh0LGUsbil7dm9pZCAwPT09biYmKG49MCk7Zm9yKHZhciByPWUubGVuZ3RoLTE7cj49bjtyLS0pdD1lW3JdLmNyZWF0ZShudWxsLG9bImMiXS5mcm9tKHQpKTtyZXR1cm4gdH1mdW5jdGlvbiBkZSh0LGUsbixyLGkpe2lmKGk8dC5sZW5ndGgmJmk8ZS5sZW5ndGgmJnRbaV09PWVbaV0pe3ZhciBzPWRlKHQsZSxuLHIubGFzdENoaWxkLGkrMSk7aWYocylyZXR1cm4gci5jb3B5KHIuY29udGVudC5yZXBsYWNlQ2hpbGQoci5jaGlsZENvdW50LTEscykpO3ZhciBhPXIuY29udGVudE1hdGNoQXQoci5jaGlsZENvdW50KTtpZihhLm1hdGNoVHlwZShpPT10Lmxlbmd0aC0xP24udHlwZTp0W2krMV0pKXJldHVybiByLmNvcHkoci5jb250ZW50LmFwcGVuZChvWyJjIl0uZnJvbShsZShuLHQsaSsxKSkpKX19ZnVuY3Rpb24gdmUodCxlKXtpZigwPT1lKXJldHVybiB0O3ZhciBuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsdmUodC5sYXN0Q2hpbGQsZS0xKSkscj10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvWyJjIl0uZW1wdHksITApO3JldHVybiB0LmNvcHkobi5hcHBlbmQocikpfWZ1bmN0aW9uIG1lKHQsZSxuLHIsaSxzKXt2YXIgYT1lPDA/dC5maXJzdENoaWxkOnQubGFzdENoaWxkLGM9YS5jb250ZW50O3JldHVybiBpPHItMSYmKGM9bWUoYyxlLG4scixpKzEscykpLGk+PW4mJihjPWU8MD9hLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUoYyx0LmNoaWxkQ291bnQ+MXx8czw9aSkuYXBwZW5kKGMpOmMuYXBwZW5kKGEuY29udGVudE1hdGNoQXQoYS5jaGlsZENvdW50KS5maWxsQmVmb3JlKG9bImMiXS5lbXB0eSwhMCkpKSx0LnJlcGxhY2VDaGlsZChlPDA/MDp0LmNoaWxkQ291bnQtMSxhLmNvcHkoYykpfWZ1bmN0aW9uIHllKHQsZSxuKXtyZXR1cm4gZTx0Lm9wZW5TdGFydCYmKHQ9bmV3IG9bImkiXShtZSh0LmNvbnRlbnQsLTEsZSx0Lm9wZW5TdGFydCwwLHQub3BlbkVuZCksZSx0Lm9wZW5FbmQpKSxuPHQub3BlbkVuZCYmKHQ9bmV3IG9bImkiXShtZSh0LmNvbnRlbnQsMSxuLHQub3BlbkVuZCwwLDApLHQub3BlblN0YXJ0LG4pKSx0fXZhciBnZT17dGhlYWQ6WyJ0YWJsZSJdLGNvbGdyb3VwOlsidGFibGUiXSxjb2w6WyJ0YWJsZSIsImNvbGdyb3VwIl0sdHI6WyJ0YWJsZSIsInRib2R5Il0sdGQ6WyJ0YWJsZSIsInRib2R5IiwidHIiXSx0aDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdfSx3ZT1udWxsO2Z1bmN0aW9uIHhlKCl7cmV0dXJuIHdlfHwod2U9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJ0aXRsZSIpKX1mdW5jdGlvbiBiZSh0KXt2YXIgZT0vKFxzKjxtZXRhIFtePl0qPikqLy5leGVjKHQpO2UmJih0PXQuc2xpY2UoZVswXS5sZW5ndGgpKTt2YXIgbixyPXhlKCkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz0vKD86PG1ldGEgW14+XSo+KSo8KFthLXpdW14+XHNdKykvaS5leGVjKHQpLGk9MDsobj1vJiZnZVtvWzFdLnRvTG93ZXJDYXNlKCldKSYmKHQ9bi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8Iit0KyI+In0pKS5qb2luKCIiKSt0K24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPC8iK3QrIj4ifSkpLnJldmVyc2UoKS5qb2luKCIiKSxpPW4ubGVuZ3RoKSxyLmlubmVySFRNTD10O2Zvcih2YXIgcz0wO3M8aTtzKyspcj1yLmZpcnN0Q2hpbGQ7cmV0dXJuIHJ9ZnVuY3Rpb24ga2UodCxlKXtpZighdC5zaXplKXJldHVybiB0O3ZhciBuLHI9dC5jb250ZW50LmZpcnN0Q2hpbGQudHlwZS5zY2hlbWE7dHJ5e249SlNPTi5wYXJzZShlKX1jYXRjaChwKXtyZXR1cm4gdH1mb3IodmFyIGk9dC5jb250ZW50LHM9dC5vcGVuU3RhcnQsYT10Lm9wZW5FbmQsYz1uLmxlbmd0aC0yO2M+PTA7Yy09Mil7dmFyIGg9ci5ub2Rlc1tuW2NdXTtpZighaHx8aC5oYXNSZXF1aXJlZEF0dHJzKCkpYnJlYWs7aT1vWyJjIl0uZnJvbShoLmNyZWF0ZShuW2MrMV0saSkpLHMrKyxhKyt9cmV0dXJuIG5ldyBvWyJpIl0oaSxzLGEpfXZhciBTZT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsc3VidHJlZTohMH0sT2U9cy5pZSYmcy5pZV92ZXJzaW9uPD0xMSxDZT1mdW5jdGlvbigpe3RoaXMuYW5jaG9yTm9kZT10aGlzLmFuY2hvck9mZnNldD10aGlzLmZvY3VzTm9kZT10aGlzLmZvY3VzT2Zmc2V0PW51bGx9O0NlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3JOb2RlPXQuYW5jaG9yTm9kZSx0aGlzLmFuY2hvck9mZnNldD10LmFuY2hvck9mZnNldCx0aGlzLmZvY3VzTm9kZT10LmZvY3VzTm9kZSx0aGlzLmZvY3VzT2Zmc2V0PXQuZm9jdXNPZmZzZXR9LENlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hbmNob3JOb2RlPT10aGlzLmFuY2hvck5vZGUmJnQuYW5jaG9yT2Zmc2V0PT10aGlzLmFuY2hvck9mZnNldCYmdC5mb2N1c05vZGU9PXRoaXMuZm9jdXNOb2RlJiZ0LmZvY3VzT2Zmc2V0PT10aGlzLmZvY3VzT2Zmc2V0fTt2YXIgTWU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMudmlldz10LHRoaXMuaGFuZGxlRE9NQ2hhbmdlPWUsdGhpcy5xdWV1ZT1bXSx0aGlzLmZsdXNoaW5nU29vbj0hMSx0aGlzLm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyJiZuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucXVldWUucHVzaCh0W2VdKTtzLmllJiZzLmllX3ZlcnNpb248PTExJiZ0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiJjaGlsZExpc3QiPT10LnR5cGUmJnQucmVtb3ZlZE5vZGVzLmxlbmd0aHx8ImNoYXJhY3RlckRhdGEiPT10LnR5cGUmJnQub2xkVmFsdWUubGVuZ3RoPnQudGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGh9KSk/bi5mbHVzaFNvb24oKTpuLmZsdXNoKCl9KSksdGhpcy5jdXJyZW50U2VsZWN0aW9uPW5ldyBDZSxPZSYmKHRoaXMub25DaGFyRGF0YT1mdW5jdGlvbih0KXtuLnF1ZXVlLnB1c2goe3RhcmdldDp0LnRhcmdldCx0eXBlOiJjaGFyYWN0ZXJEYXRhIixvbGRWYWx1ZTp0LnByZXZWYWx1ZX0pLG4uZmx1c2hTb29uKCl9KSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlPXRoaXMub25TZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX07TWUucHJvdG90eXBlLmZsdXNoU29vbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5mbHVzaGluZ1Nvb258fCh0aGlzLmZsdXNoaW5nU29vbj0hMCx3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZsdXNoaW5nU29vbj0hMSx0LmZsdXNoKCl9KSwyMCkpfSxNZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LmRvbSxTZSksT2UmJnRoaXMudmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuY29ubmVjdFNlbGVjdGlvbigpfSxNZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vYnNlcnZlcil7dmFyIGU9dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpO2lmKGUubGVuZ3RoKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0aGlzLnF1ZXVlLnB1c2goZVtuXSk7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goKX0pLDIwKX10aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKX1PZSYmdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5kaXNjb25uZWN0U2VsZWN0aW9uKCl9LE1lLnByb3RvdHlwZS5jb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LE1lLnByb3RvdHlwZS5kaXNjb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LE1lLnByb3RvdHlwZS5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfSksNTApfSxNZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZihRdCh0aGlzLnZpZXcpKXtpZih0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylyZXR1cm4gV3QodGhpcy52aWV3KTtpZihzLmllJiZzLmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJnYodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCx0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpKXJldHVybiB0aGlzLmZsdXNoU29vbigpfXRoaXMuZmx1c2goKX19LE1lLnByb3RvdHlwZS5zZXRDdXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpKX0sTWUucHJvdG90eXBlLmlnbm9yZVNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbih0KXtpZigwPT10LnJhbmdlQ291bnQpcmV0dXJuITA7dmFyIGU9dC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZSk7cmV0dXJuIG4mJm4uaWdub3JlTXV0YXRpb24oe3R5cGU6InNlbGVjdGlvbiIsdGFyZ2V0OjM9PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmV9KX0sTWUucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy52aWV3LmRvY1ZpZXcmJiF0aGlzLmZsdXNoaW5nU29vbil7dmFyIHQ9dGhpcy5vYnNlcnZlcj90aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk6W107dGhpcy5xdWV1ZS5sZW5ndGgmJih0PXRoaXMucXVldWUuY29uY2F0KHQpLHRoaXMucXVldWUubGVuZ3RoPTApO3ZhciBlPXRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpLG49IXRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzJiYhdGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKGUpJiZ0ZSh0aGlzLnZpZXcpJiYhdGhpcy5pZ25vcmVTZWxlY3Rpb25DaGFuZ2UoZSkscj0tMSxvPS0xLGk9ITEsYT1bXTtpZih0aGlzLnZpZXcuZWRpdGFibGUpZm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKyspe3ZhciBoPXRoaXMucmVnaXN0ZXJNdXRhdGlvbih0W2NdLGEpO2gmJihyPXI8MD9oLmZyb206TWF0aC5taW4oaC5mcm9tLHIpLG89bzwwP2gudG86TWF0aC5tYXgoaC50byxvKSxoLnR5cGVPdmVyJiYhdGhpcy52aWV3LmNvbXBvc2luZyYmKGk9ITApKX1pZihzLmdlY2tvJiZhLmxlbmd0aD4xKXt2YXIgcD1hLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIkJSIj09dC5ub2RlTmFtZX0pKTtpZigyPT1wLmxlbmd0aCl7dmFyIHU9cFswXSxmPXBbMV07dS5wYXJlbnROb2RlJiZ1LnBhcmVudE5vZGUucGFyZW50Tm9kZT09Zi5wYXJlbnROb2RlP2YucmVtb3ZlKCk6dS5yZW1vdmUoKX19KHI+LTF8fG4pJiYocj4tMSYmKHRoaXMudmlldy5kb2NWaWV3Lm1hcmtEaXJ0eShyLG8pLE5lKHRoaXMudmlldykpLHRoaXMuaGFuZGxlRE9NQ2hhbmdlKHIsbyxpKSx0aGlzLnZpZXcuZG9jVmlldy5kaXJ0eT90aGlzLnZpZXcudXBkYXRlU3RhdGUodGhpcy52aWV3LnN0YXRlKTp0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoZSl8fFd0KHRoaXMudmlldykpfX0sTWUucHJvdG90eXBlLnJlZ2lzdGVyTXV0YXRpb249ZnVuY3Rpb24odCxlKXtpZihlLmluZGV4T2YodC50YXJnZXQpPi0xKXJldHVybiBudWxsO3ZhciBuPXRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKHQudGFyZ2V0KTtpZigiYXR0cmlidXRlcyI9PXQudHlwZSYmKG49PXRoaXMudmlldy5kb2NWaWV3fHwiY29udGVudGVkaXRhYmxlIj09dC5hdHRyaWJ1dGVOYW1lfHwic3R5bGUiPT10LmF0dHJpYnV0ZU5hbWUmJiF0Lm9sZFZhbHVlJiYhdC50YXJnZXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSlyZXR1cm4gbnVsbDtpZighbnx8bi5pZ25vcmVNdXRhdGlvbih0KSlyZXR1cm4gbnVsbDtpZigiY2hpbGRMaXN0Ij09dC50eXBlKXt2YXIgcj10LnByZXZpb3VzU2libGluZyxvPXQubmV4dFNpYmxpbmc7aWYocy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmdC5hZGRlZE5vZGVzLmxlbmd0aClmb3IodmFyIGk9MDtpPHQuYWRkZWROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgYT10LmFkZGVkTm9kZXNbaV0sYz1hLnByZXZpb3VzU2libGluZyxoPWEubmV4dFNpYmxpbmc7KCFjfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxjKTwwKSYmKHI9YyksKCFofHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxoKTwwKSYmKG89aCl9Zm9yKHZhciBwPXImJnIucGFyZW50Tm9kZT09dC50YXJnZXQ/ZihyKSsxOjAsdT1uLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCxwLC0xKSxsPW8mJm8ucGFyZW50Tm9kZT09dC50YXJnZXQ/ZihvKTp0LnRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aCxkPTA7ZDx0LmFkZGVkTm9kZXMubGVuZ3RoO2QrKyllLnB1c2godC5hZGRlZE5vZGVzW2RdKTt2YXIgdj1uLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCxsLDEpO3JldHVybntmcm9tOnUsdG86dn19cmV0dXJuImF0dHJpYnV0ZXMiPT10LnR5cGU/e2Zyb206bi5wb3NBdFN0YXJ0LW4uYm9yZGVyLHRvOm4ucG9zQXRFbmQrbi5ib3JkZXJ9Ontmcm9tOm4ucG9zQXRTdGFydCx0bzpuLnBvc0F0RW5kLHR5cGVPdmVyOnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX19O3ZhciBUZT0hMTtmdW5jdGlvbiBOZSh0KXtUZXx8KFRlPSEwLCJub3JtYWwiPT1nZXRDb21wdXRlZFN0eWxlKHQuZG9tKS53aGl0ZVNwYWNlJiZjb25zb2xlWyJ3YXJuIl0oIlByb3NlTWlycm9yIGV4cGVjdHMgdGhlIENTUyB3aGl0ZS1zcGFjZSBwcm9wZXJ0eSB0byBiZSBzZXQsIHByZWZlcmFibHkgdG8gJ3ByZS13cmFwJy4gSXQgaXMgcmVjb21tZW5kZWQgdG8gbG9hZCBzdHlsZS9wcm9zZW1pcnJvci5jc3MgZnJvbSB0aGUgcHJvc2VtaXJyb3ItdmlldyBwYWNrYWdlLiIpKX12YXIgRWU9e30sQWU9e307ZnVuY3Rpb24gUmUodCl7dC5zaGlmdEtleT0hMSx0Lm1vdXNlRG93bj1udWxsLHQubGFzdEtleUNvZGU9bnVsbCx0Lmxhc3RLZXlDb2RlVGltZT0wLHQubGFzdENsaWNrPXt0aW1lOjAseDowLHk6MCx0eXBlOiIifSx0Lmxhc3RTZWxlY3Rpb25PcmlnaW49bnVsbCx0Lmxhc3RTZWxlY3Rpb25UaW1lPTAsdC5jb21wb3Npbmc9ITEsdC5jb21wb3NpbmdUaW1lb3V0PW51bGwsdC5jb21wb3NpdGlvbk5vZGVzPVtdLHQuY29tcG9zaXRpb25FbmRlZEF0PS0yZTgsdC5kb21PYnNlcnZlcj1uZXcgTWUodCwoZnVuY3Rpb24oZSxuLHIpe3JldHVybiBvZSh0LGUsbixyKX0pKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21DaGFuZ2VDb3VudD0wLHQuZXZlbnRIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciBuPUVlW2VdO3QuZG9tLmFkZEV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV09ZnVuY3Rpb24oZSl7IUJlKHQsZSl8fFBlKHQsZSl8fCF0LmVkaXRhYmxlJiZlLnR5cGUgaW4gQWV8fG4odCxlKX0pfTtmb3IodmFyIG4gaW4gRWUpZShuKTtzLnNhZmFyaSYmdC5kb20uYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpLEllKHQpfWZ1bmN0aW9uIHplKHQsZSl7dC5sYXN0U2VsZWN0aW9uT3JpZ2luPWUsdC5sYXN0U2VsZWN0aW9uVGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uIERlKHQpe2Zvcih2YXIgZSBpbiB0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmV2ZW50SGFuZGxlcnMpdC5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXSk7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCl9ZnVuY3Rpb24gSWUodCl7dC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpdC5ldmVudEhhbmRsZXJzW25dfHx0LmRvbS5hZGRFdmVudExpc3RlbmVyKG4sdC5ldmVudEhhbmRsZXJzW25dPWZ1bmN0aW9uKGUpe3JldHVybiBQZSh0LGUpfSl9KSl9ZnVuY3Rpb24gUGUodCxlKXtyZXR1cm4gdC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24obil7dmFyIHI9bltlLnR5cGVdO3JldHVybiEhciYmKHIodCxlKXx8ZS5kZWZhdWx0UHJldmVudGVkKX0pKX1mdW5jdGlvbiBCZSh0LGUpe2lmKCFlLmJ1YmJsZXMpcmV0dXJuITA7aWYoZS5kZWZhdWx0UHJldmVudGVkKXJldHVybiExO2Zvcih2YXIgbj1lLnRhcmdldDtuIT10LmRvbTtuPW4ucGFyZW50Tm9kZSlpZighbnx8MTE9PW4ubm9kZVR5cGV8fG4ucG1WaWV3RGVzYyYmbi5wbVZpZXdEZXNjLnN0b3BFdmVudChlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBGZSh0LGUpe1BlKHQsZSl8fCFFZVtlLnR5cGVdfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIEFlfHxFZVtlLnR5cGVdKHQsZSl9ZnVuY3Rpb24gamUodCl7cmV0dXJue2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9fWZ1bmN0aW9uIF9lKHQsZSl7dmFyIG49ZS54LXQuY2xpZW50WCxyPWUueS10LmNsaWVudFk7cmV0dXJuIG4qbityKnI8MTAwfWZ1bmN0aW9uICRlKHQsZSxuLHIsbyl7aWYoLTE9PXIpcmV0dXJuITE7Zm9yKHZhciBpPXQuc3RhdGUuZG9jLnJlc29sdmUocikscz1mdW5jdGlvbihyKXtpZih0LnNvbWVQcm9wKGUsKGZ1bmN0aW9uKGUpe3JldHVybiByPmkuZGVwdGg/ZSh0LG4saS5ub2RlQWZ0ZXIsaS5iZWZvcmUociksbywhMCk6ZSh0LG4saS5ub2RlKHIpLGkuYmVmb3JlKHIpLG8sITEpfSkpKXJldHVybnt2OiEwfX0sYT1pLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9cyhhKTtpZihjKXJldHVybiBjLnZ9cmV0dXJuITF9ZnVuY3Rpb24gSmUodCxlLG4pe3QuZm9jdXNlZHx8dC5mb2N1cygpO3ZhciByPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpOyJwb2ludGVyIj09biYmci5zZXRNZXRhKCJwb2ludGVyIiwhMCksdC5kaXNwYXRjaChyKX1mdW5jdGlvbiBMZSh0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksbz1uLm5vZGVBZnRlcjtyZXR1cm4hIShvJiZvLmlzQXRvbSYmclsiYiJdLmlzU2VsZWN0YWJsZShvKSkmJihKZSh0LG5ldyByWyJiIl0obiksInBvaW50ZXIiKSwhMCl9ZnVuY3Rpb24gVmUodCxlKXtpZigtMT09ZSlyZXR1cm4hMTt2YXIgbixvLGk9dC5zdGF0ZS5zZWxlY3Rpb247aSBpbnN0YW5jZW9mIHJbImIiXSYmKG49aS5ub2RlKTtmb3IodmFyIHM9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxhPXMuZGVwdGgrMTthPjA7YS0tKXt2YXIgYz1hPnMuZGVwdGg/cy5ub2RlQWZ0ZXI6cy5ub2RlKGEpO2lmKHJbImIiXS5pc1NlbGVjdGFibGUoYykpe289biYmaS4kZnJvbS5kZXB0aD4wJiZhPj1pLiRmcm9tLmRlcHRoJiZzLmJlZm9yZShpLiRmcm9tLmRlcHRoKzEpPT1pLiRmcm9tLnBvcz9zLmJlZm9yZShpLiRmcm9tLmRlcHRoKTpzLmJlZm9yZShhKTticmVha319cmV0dXJuIG51bGwhPW8mJihKZSh0LHJbImIiXS5jcmVhdGUodC5zdGF0ZS5kb2MsbyksInBvaW50ZXIiKSwhMCl9ZnVuY3Rpb24gcWUodCxlLG4scixvKXtyZXR1cm4gJGUodCwiaGFuZGxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKXx8KG8/VmUodCxuKTpMZSh0LG4pKX1mdW5jdGlvbiBXZSh0LGUsbixyKXtyZXR1cm4gJGUodCwiaGFuZGxlRG91YmxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVEb3VibGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKX1mdW5jdGlvbiBIZSh0LGUsbixyKXtyZXR1cm4gJGUodCwiaGFuZGxlVHJpcGxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVUcmlwbGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKXx8S2UodCxuKX1mdW5jdGlvbiBLZSh0LGUpe3ZhciBuPXQuc3RhdGUuZG9jO2lmKC0xPT1lKXJldHVybiEhbi5pbmxpbmVDb250ZW50JiYoSmUodCxyWyJnIl0uY3JlYXRlKG4sMCxuLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKSwhMCk7Zm9yKHZhciBvPW4ucmVzb2x2ZShlKSxpPW8uZGVwdGgrMTtpPjA7aS0tKXt2YXIgcz1pPm8uZGVwdGg/by5ub2RlQWZ0ZXI6by5ub2RlKGkpLGE9by5iZWZvcmUoaSk7aWYocy5pbmxpbmVDb250ZW50KUplKHQsclsiZyJdLmNyZWF0ZShuLGErMSxhKzErcy5jb250ZW50LnNpemUpLCJwb2ludGVyIik7ZWxzZXtpZighclsiYiJdLmlzU2VsZWN0YWJsZShzKSljb250aW51ZTtKZSh0LHJbImIiXS5jcmVhdGUobixhKSwicG9pbnRlciIpfXJldHVybiEwfX1mdW5jdGlvbiBVZSh0KXtyZXR1cm4gdG4odCl9QWUua2V5ZG93bj1mdW5jdGlvbih0LGUpe3Quc2hpZnRLZXk9MTY9PWUua2V5Q29kZXx8ZS5zaGlmdEtleSxZZSh0LGUpfHwodC5sYXN0S2V5Q29kZT1lLmtleUNvZGUsdC5sYXN0S2V5Q29kZVRpbWU9RGF0ZS5ub3coKSx0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKXx8VnQodCxlKT9lLnByZXZlbnREZWZhdWx0KCk6emUodCwia2V5IikpfSxBZS5rZXl1cD1mdW5jdGlvbih0LGUpezE2PT1lLmtleUNvZGUmJih0LnNoaWZ0S2V5PSExKX0sQWUua2V5cHJlc3M9ZnVuY3Rpb24odCxlKXtpZighKFllKHQsZSl8fCFlLmNoYXJDb2RlfHxlLmN0cmxLZXkmJiFlLmFsdEtleXx8cy5tYWMmJmUubWV0YUtleSkpaWYodC5zb21lUHJvcCgiaGFuZGxlS2V5UHJlc3MiLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUpfSkpKWUucHJldmVudERlZmF1bHQoKTtlbHNle3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uO2lmKCEobiBpbnN0YW5jZW9mIHJbImciXSl8fCFuLiRmcm9tLnNhbWVQYXJlbnQobi4kdG8pKXt2YXIgbz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGUpO3Quc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsbi4kZnJvbS5wb3Msbi4kdG8ucG9zLG8pfSkpfHx0LmRpc3BhdGNoKHQuc3RhdGUudHIuaW5zZXJ0VGV4dChvKS5zY3JvbGxJbnRvVmlldygpKSxlLnByZXZlbnREZWZhdWx0KCl9fX07dmFyIEdlPXMubWFjPyJtZXRhS2V5IjoiY3RybEtleSI7RWUubW91c2Vkb3duPWZ1bmN0aW9uKHQsZSl7dC5zaGlmdEtleT1lLnNoaWZ0S2V5O3ZhciBuPVVlKHQpLHI9RGF0ZS5ub3coKSxvPSJzaW5nbGVDbGljayI7ci10Lmxhc3RDbGljay50aW1lPDUwMCYmX2UoZSx0Lmxhc3RDbGljaykmJiFlW0dlXSYmKCJzaW5nbGVDbGljayI9PXQubGFzdENsaWNrLnR5cGU/bz0iZG91YmxlQ2xpY2siOiJkb3VibGVDbGljayI9PXQubGFzdENsaWNrLnR5cGUmJihvPSJ0cmlwbGVDbGljayIpKSx0Lmxhc3RDbGljaz17dGltZTpyLHg6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHR5cGU6b307dmFyIGk9dC5wb3NBdENvb3JkcyhqZShlKSk7aSYmKCJzaW5nbGVDbGljayI9PW8/dC5tb3VzZURvd249bmV3IFhlKHQsaSxlLG4pOigiZG91YmxlQ2xpY2siPT1vP1dlOkhlKSh0LGkucG9zLGkuaW5zaWRlLGUpP2UucHJldmVudERlZmF1bHQoKTp6ZSh0LCJwb2ludGVyIikpfTt2YXIgWGU9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGksYSxjPXRoaXM7aWYodGhpcy52aWV3PXQsdGhpcy5zdGFydERvYz10LnN0YXRlLmRvYyx0aGlzLnBvcz1lLHRoaXMuZXZlbnQ9bix0aGlzLmZsdXNoZWQ9byx0aGlzLnNlbGVjdE5vZGU9bltHZV0sdGhpcy5hbGxvd0RlZmF1bHQ9bi5zaGlmdEtleSxlLmluc2lkZT4tMSlpPXQuc3RhdGUuZG9jLm5vZGVBdChlLmluc2lkZSksYT1lLmluc2lkZTtlbHNle3ZhciBoPXQuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpO2k9aC5wYXJlbnQsYT1oLmRlcHRoP2guYmVmb3JlKCk6MH10aGlzLm1pZ2h0RHJhZz1udWxsO3ZhciBwPW8/bnVsbDpuLnRhcmdldCx1PXA/dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHAsITApOm51bGw7dGhpcy50YXJnZXQ9dT91LmRvbTpudWxsLChpLnR5cGUuc3BlYy5kcmFnZ2FibGUmJiExIT09aS50eXBlLnNwZWMuc2VsZWN0YWJsZXx8dC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByWyJiIl0mJmE9PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20pJiYodGhpcy5taWdodERyYWc9e25vZGU6aSxwb3M6YSxhZGRBdHRyOnRoaXMudGFyZ2V0JiYhdGhpcy50YXJnZXQuZHJhZ2dhYmxlLHNldFVuZWRpdGFibGU6dGhpcy50YXJnZXQmJnMuZ2Vja28mJiF0aGlzLnRhcmdldC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpfSksdGhpcy50YXJnZXQmJnRoaXMubWlnaHREcmFnJiYodGhpcy5taWdodERyYWcuYWRkQXR0cnx8dGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSkmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITApLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGMudGFyZ2V0LnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwiZmFsc2UiKX0pLDIwKSx0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RhcnQoKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXA9dGhpcy51cC5iaW5kKHRoaXMpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmU9dGhpcy5tb3ZlLmJpbmQodGhpcykpLHplKHQsInBvaW50ZXIiKX07ZnVuY3Rpb24gWWUodCxlKXtyZXR1cm4hIXQuY29tcG9zaW5nfHwhIShzLnNhZmFyaSYmTWF0aC5hYnMoZS50aW1lU3RhbXAtdC5jb21wb3NpdGlvbkVuZGVkQXQpPDUwMCkmJih0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LCEwKX1YZS5wcm90b3R5cGUuZG9uZT1mdW5jdGlvbigpe3RoaXMudmlldy5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXApLHRoaXMudmlldy5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlKSx0aGlzLm1pZ2h0RHJhZyYmdGhpcy50YXJnZXQmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITEpLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHRoaXMudmlldy5tb3VzZURvd249bnVsbH0sWGUucHJvdG90eXBlLnVwPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSgpLHRoaXMudmlldy5kb20uY29udGFpbnMoMz09dC50YXJnZXQubm9kZVR5cGU/dC50YXJnZXQucGFyZW50Tm9kZTp0LnRhcmdldCkpe3ZhciBlPXRoaXMucG9zO3RoaXMudmlldy5zdGF0ZS5kb2MhPXRoaXMuc3RhcnREb2MmJihlPXRoaXMudmlldy5wb3NBdENvb3JkcyhqZSh0KSkpLHRoaXMuYWxsb3dEZWZhdWx0fHwhZT96ZSh0aGlzLnZpZXcsInBvaW50ZXIiKTpxZSh0aGlzLnZpZXcsZS5wb3MsZS5pbnNpZGUsdCx0aGlzLnNlbGVjdE5vZGUpP3QucHJldmVudERlZmF1bHQoKTohdGhpcy5mbHVzaGVkJiYoIXMuY2hyb21lfHx0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiZyJdfHxlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50byk/emUodGhpcy52aWV3LCJwb2ludGVyIik6KEplKHRoaXMudmlldyxyWyJlIl0ubmVhcih0aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpKSwicG9pbnRlciIpLHQucHJldmVudERlZmF1bHQoKSl9fSxYZS5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXshdGhpcy5hbGxvd0RlZmF1bHQmJihNYXRoLmFicyh0aGlzLmV2ZW50LngtdC5jbGllbnRYKT40fHxNYXRoLmFicyh0aGlzLmV2ZW50LnktdC5jbGllbnRZKT40KSYmKHRoaXMuYWxsb3dEZWZhdWx0PSEwKSx6ZSh0aGlzLnZpZXcsInBvaW50ZXIiKX0sRWUudG91Y2hkb3duPWZ1bmN0aW9uKHQpe1VlKHQpLHplKHQsInBvaW50ZXIiKX0sRWUuY29udGV4dG1lbnU9ZnVuY3Rpb24odCl7cmV0dXJuIFVlKHQpfTt2YXIgWmU9cy5hbmRyb2lkPzVlMzotMTtmdW5jdGlvbiBRZSh0LGUpe2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpLGU+LTEmJih0LmNvbXBvc2luZ1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdG4odCl9KSxlKSl9ZnVuY3Rpb24gdG4odCxlKXt0LmNvbXBvc2luZz0hMTt3aGlsZSh0LmNvbXBvc2l0aW9uTm9kZXMubGVuZ3RoPjApdC5jb21wb3NpdGlvbk5vZGVzLnBvcCgpLm1hcmtQYXJlbnRzRGlydHkoKTtyZXR1cm4hKCFlJiYhdC5kb2NWaWV3LmRpcnR5KSYmKHQudXBkYXRlU3RhdGUodC5zdGF0ZSksITApfWZ1bmN0aW9uIGVuKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyLmFwcGVuZENoaWxkKGUpLHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4Ijt2YXIgbz1nZXRTZWxlY3Rpb24oKSxpPW4uY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGVDb250ZW50cyhlKSx0LmRvbS5ibHVyKCksby5yZW1vdmVBbGxSYW5nZXMoKSxvLmFkZFJhbmdlKGkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5ib2R5LnJlbW92ZUNoaWxkKHIpLHQuZm9jdXMoKX0pLDUwKX1BZS5jb21wb3NpdGlvbnN0YXJ0PUFlLmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmNvbXBvc2luZyl7dC5kb21PYnNlcnZlci5mbHVzaCgpO3ZhciBlPXQuc3RhdGUsbj1lLnNlbGVjdGlvbi4kZnJvbTtpZihlLnNlbGVjdGlvbi5lbXB0eSYmKGUuc3RvcmVkTWFya3N8fCFuLnRleHRPZmZzZXQmJm4ucGFyZW50T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3Muc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuITE9PT10LnR5cGUuc3BlYy5pbmNsdXNpdmV9KSkpKXQubWFya0N1cnNvcj10LnN0YXRlLnN0b3JlZE1hcmtzfHxuLm1hcmtzKCksdG4odCwhMCksdC5tYXJrQ3Vyc29yPW51bGw7ZWxzZSBpZih0bih0KSxzLmdlY2tvJiZlLnNlbGVjdGlvbi5lbXB0eSYmbi5wYXJlbnRPZmZzZXQmJiFuLnRleHRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5sZW5ndGgpZm9yKHZhciByPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxvPXIuZm9jdXNOb2RlLGk9ci5mb2N1c09mZnNldDtvJiYxPT1vLm5vZGVUeXBlJiYwIT1pOyl7dmFyIGE9aTwwP28ubGFzdENoaWxkOm8uY2hpbGROb2Rlc1tpLTFdO2lmKDM9PWEubm9kZVR5cGUpe3IuY29sbGFwc2UoYSxhLm5vZGVWYWx1ZS5sZW5ndGgpO2JyZWFrfW89YSxpPS0xfXQuY29tcG9zaW5nPSEwfVFlKHQsWmUpfSxBZS5jb21wb3NpdGlvbmVuZD1mdW5jdGlvbih0LGUpe3QuY29tcG9zaW5nJiYodC5jb21wb3Npbmc9ITEsdC5jb21wb3NpdGlvbkVuZGVkQXQ9ZS50aW1lU3RhbXAsUWUodCwyMCkpfTt2YXIgbm49cy5pZSYmcy5pZV92ZXJzaW9uPDE1fHxzLmlvcyYmcy53ZWJraXRfdmVyc2lvbjw2MDQ7ZnVuY3Rpb24gcm4odCl7cmV0dXJuIDA9PXQub3BlblN0YXJ0JiYwPT10Lm9wZW5FbmQmJjE9PXQuY29udGVudC5jaGlsZENvdW50P3QuY29udGVudC5maXJzdENoaWxkOm51bGx9ZnVuY3Rpb24gb24odCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9dC5zaGlmdEtleXx8dC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20ucGFyZW50LnR5cGUuc3BlYy5jb2RlLG89bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyPyJ0ZXh0YXJlYSI6ImRpdiIpKTtyfHwoby5jb250ZW50RWRpdGFibGU9InRydWUiKSxvLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCIsby5mb2N1cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mb2N1cygpLG4uYm9keS5yZW1vdmVDaGlsZChvKSxyP3NuKHQsby52YWx1ZSxudWxsLGUpOnNuKHQsby50ZXh0Q29udGVudCxvLmlubmVySFRNTCxlKX0pLDUwKX1mdW5jdGlvbiBzbih0LGUsbixyKXt2YXIgaT11ZSh0LGUsbix0LnNoaWZ0S2V5LHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tKTtpZighdC5zb21lUHJvcCgiaGFuZGxlUGFzdGUiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LHIsaXx8b1siaSJdLmVtcHR5KX0pKSYmaSl7dmFyIHM9cm4oaSksYT1zP3Quc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbldpdGgocyx0LnNoaWZ0S2V5KTp0LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb24oaSk7dC5kaXNwYXRjaChhLnNjcm9sbEludG9WaWV3KCkuc2V0TWV0YSgicGFzdGUiLCEwKS5zZXRNZXRhKCJ1aUV2ZW50IiwicGFzdGUiKSl9fUVlLmNvcHk9QWUuY3V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj0iY3V0Ij09ZS50eXBlO2lmKCFuLmVtcHR5KXt2YXIgbz1ubj9udWxsOmUuY2xpcGJvYXJkRGF0YSxpPW4uY29udGVudCgpLHM9cGUodCxpKSxhPXMuZG9tLGM9cy50ZXh0O28/KGUucHJldmVudERlZmF1bHQoKSxvLmNsZWFyRGF0YSgpLG8uc2V0RGF0YSgidGV4dC9odG1sIixhLmlubmVySFRNTCksby5zZXREYXRhKCJ0ZXh0L3BsYWluIixjKSk6ZW4odCxhKSxyJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlU2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJ1aUV2ZW50IiwiY3V0IikpfX0sQWUucGFzdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1ubj9udWxsOmUuY2xpcGJvYXJkRGF0YSxyPW4mJm4uZ2V0RGF0YSgidGV4dC9odG1sIiksbz1uJiZuLmdldERhdGEoInRleHQvcGxhaW4iKTtuJiYocnx8b3x8bi5maWxlcy5sZW5ndGgpPyhzbih0LG8scixlKSxlLnByZXZlbnREZWZhdWx0KCkpOm9uKHQsZSl9O3ZhciBhbj1mdW5jdGlvbih0LGUpe3RoaXMuc2xpY2U9dCx0aGlzLm1vdmU9ZX0sY249cy5tYWM/ImFsdEtleSI6ImN0cmxLZXkiO2Zvcih2YXIgaG4gaW4gRWUuZHJhZ3N0YXJ0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5tb3VzZURvd247aWYobiYmbi5kb25lKCksZS5kYXRhVHJhbnNmZXIpe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uLGk9by5lbXB0eT9udWxsOnQucG9zQXRDb29yZHMoamUoZSkpO2lmKGkmJmkucG9zPj1vLmZyb20mJmkucG9zPD0obyBpbnN0YW5jZW9mIHJbImIiXT9vLnRvLTE6by50bykpO2Vsc2UgaWYobiYmbi5taWdodERyYWcpdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihyWyJiIl0uY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighc3x8IXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxzPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oclsiYiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxzLnBvc0JlZm9yZSkpKX12YXIgYT10LnN0YXRlLnNlbGVjdGlvbi5jb250ZW50KCksYz1wZSh0LGEpLGg9Yy5kb20scD1jLnRleHQ7ZS5kYXRhVHJhbnNmZXIuY2xlYXJEYXRhKCksZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShubj8iVGV4dCI6InRleHQvaHRtbCIsaC5pbm5lckhUTUwpLG5ufHxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIixwKSx0LmRyYWdnaW5nPW5ldyBhbihhLCFlW2NuXSl9fSxFZS5kcmFnZW5kPWZ1bmN0aW9uKHQpe3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmRyYWdnaW5nPW51bGx9KSw1MCl9LEFlLmRyYWdvdmVyPUFlLmRyYWdlbnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCl9LEFlLmRyb3A9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmRyYWdnaW5nO2lmKHQuZHJhZ2dpbmc9bnVsbCxlLmRhdGFUcmFuc2Zlcil7dmFyIG89dC5wb3NBdENvb3JkcyhqZShlKSk7aWYobyl7dmFyIHM9dC5zdGF0ZS5kb2MucmVzb2x2ZShvLnBvcyk7aWYocyl7dmFyIGE9biYmbi5zbGljZXx8dWUodCxlLmRhdGFUcmFuc2Zlci5nZXREYXRhKG5uPyJUZXh0IjoidGV4dC9wbGFpbiIpLG5uP251bGw6ZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9odG1sIiksITEscyk7aWYoYSYmKGUucHJldmVudERlZmF1bHQoKSwhdC5zb21lUHJvcCgiaGFuZGxlRHJvcCIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxhLG4mJm4ubW92ZSl9KSkpKXt2YXIgYz1hP09iamVjdChpWyJnIl0pKHQuc3RhdGUuZG9jLHMucG9zLGEpOnMucG9zO251bGw9PWMmJihjPXMucG9zKTt2YXIgaD10LnN0YXRlLnRyO24mJm4ubW92ZSYmaC5kZWxldGVTZWxlY3Rpb24oKTt2YXIgcD1oLm1hcHBpbmcubWFwKGMpLHU9MD09YS5vcGVuU3RhcnQmJjA9PWEub3BlbkVuZCYmMT09YS5jb250ZW50LmNoaWxkQ291bnQsZj1oLmRvYztpZih1P2gucmVwbGFjZVJhbmdlV2l0aChwLHAsYS5jb250ZW50LmZpcnN0Q2hpbGQpOmgucmVwbGFjZVJhbmdlKHAscCxhKSwhaC5kb2MuZXEoZikpe3ZhciBsPWguZG9jLnJlc29sdmUocCk7dSYmclsiYiJdLmlzU2VsZWN0YWJsZShhLmNvbnRlbnQuZmlyc3RDaGlsZCkmJmwubm9kZUFmdGVyJiZsLm5vZGVBZnRlci5zYW1lTWFya3VwKGEuY29udGVudC5maXJzdENoaWxkKT9oLnNldFNlbGVjdGlvbihuZXcgclsiYiJdKGwpKTpoLnNldFNlbGVjdGlvbihadCh0LGwsaC5kb2MucmVzb2x2ZShoLm1hcHBpbmcubWFwKGMpKSkpLHQuZm9jdXMoKSx0LmRpc3BhdGNoKGguc2V0TWV0YSgidWlFdmVudCIsImRyb3AiKSl9fX19fX0sRWUuZm9jdXM9ZnVuY3Rpb24odCl7dC5mb2N1c2VkfHwodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmZvY3VzZWQ9ITApfSxFZS5ibHVyPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZCYmKHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLnNldCh7fSksdC5mb2N1c2VkPSExKX0sRWUuYmVmb3JlaW5wdXQ9ZnVuY3Rpb24odCxlKXtpZihzLmNocm9tZSYmcy5hbmRyb2lkJiYiZGVsZXRlQ29udGVudEJhY2t3YXJkIj09ZS5pbnB1dFR5cGUpe3ZhciBuPXQuZG9tQ2hhbmdlQ291bnQ7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZih0LmRvbUNoYW5nZUNvdW50PT1uJiYodC5kb20uYmx1cigpLHQuZm9jdXMoKSwhdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsYig4LCJCYWNrc3BhY2UiKSl9KSkpKXt2YXIgZT10LnN0YXRlLnNlbGVjdGlvbixyPWUuJGN1cnNvcjtyJiZyLnBvcz4wJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlKHIucG9zLTEsci5wb3MpLnNjcm9sbEludG9WaWV3KCkpfX0pLDUwKX19LEFlKUVlW2huXT1BZVtobl07ZnVuY3Rpb24gcG4odCxlKXtpZih0PT1lKXJldHVybiEwO2Zvcih2YXIgbiBpbiB0KWlmKHRbbl0hPT1lW25dKXJldHVybiExO2Zvcih2YXIgciBpbiBlKWlmKCEociBpbiB0KSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgdW49ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8eW4sdGhpcy5zaWRlPXRoaXMuc3BlYy5zaWRlfHwwLHRoaXMudG9ET009dH07dW4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcFJlc3VsdChlLmZyb20rcix0aGlzLnNpZGU8MD8tMToxKSxpPW8ucG9zLHM9by5kZWxldGVkO3JldHVybiBzP251bGw6bmV3IGRuKGktbixpLW4sdGhpcyl9LHVuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiEwfSx1bi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiB1biYmKHRoaXMuc3BlYy5rZXkmJnRoaXMuc3BlYy5rZXk9PXQuc3BlYy5rZXl8fHRoaXMudG9ET009PXQudG9ET00mJnBuKHRoaXMuc3BlYyx0LnNwZWMpKX07dmFyIGZuPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fHluLHRoaXMuYXR0cnM9dH07Zm4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcChlLmZyb20rcix0aGlzLnNwZWMuaW5jbHVzaXZlU3RhcnQ/LTE6MSktbixpPXQubWFwKGUudG8rcix0aGlzLnNwZWMuaW5jbHVzaXZlRW5kPzE6LTEpLW47cmV0dXJuIG8+PWk/bnVsbDpuZXcgZG4obyxpLHRoaXMpfSxmbi5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5mcm9tPGUudG99LGZuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIGZuJiZwbih0aGlzLmF0dHJzLHQuYXR0cnMpJiZwbih0aGlzLnNwZWMsdC5zcGVjKX0sZm4uaXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSBpbnN0YW5jZW9mIGZufTt2YXIgbG49ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8eW4sdGhpcy5hdHRycz10fTtsbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLDEpO2lmKG8uZGVsZXRlZClyZXR1cm4gbnVsbDt2YXIgaT10Lm1hcFJlc3VsdChlLnRvK3IsLTEpO3JldHVybiBpLmRlbGV0ZWR8fGkucG9zPD1vLnBvcz9udWxsOm5ldyBkbihvLnBvcy1uLGkucG9zLW4sdGhpcyl9LGxuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuY29udGVudC5maW5kSW5kZXgoZS5mcm9tKSxyPW4uaW5kZXgsbz1uLm9mZnNldDtyZXR1cm4gbz09ZS5mcm9tJiZvK3QuY2hpbGQocikubm9kZVNpemU9PWUudG99LGxuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIGxuJiZwbih0aGlzLmF0dHJzLHQuYXR0cnMpJiZwbih0aGlzLnNwZWMsdC5zcGVjKX07dmFyIGRuPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmZyb209dCx0aGlzLnRvPWUsdGhpcy50eXBlPW59LHZuPXtzcGVjOntjb25maWd1cmFibGU6ITB9fTtkbi5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZG4odCxlLHRoaXMudHlwZSl9LGRuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50eXBlLmVxKHQudHlwZSkmJnRoaXMuZnJvbT09dC5mcm9tJiZ0aGlzLnRvPT10LnRvfSxkbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlLm1hcCh0LHRoaXMsZSxuKX0sZG4ud2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IGRuKHQsdCxuZXcgdW4oZSxuKSl9LGRuLmlubGluZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IGRuKHQsZSxuZXcgZm4obixyKSl9LGRuLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG5ldyBkbih0LGUsbmV3IGxuKG4scikpfSx2bi5zcGVjLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlY30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZG4ucHJvdG90eXBlLHZuKTt2YXIgbW49W10seW49e30sZ249ZnVuY3Rpb24odCxlKXt0aGlzLmxvY2FsPXQmJnQubGVuZ3RoP3Q6bW4sdGhpcy5jaGlsZHJlbj1lJiZlLmxlbmd0aD9lOm1ufTtnbi5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/TW4oZSx0LDAseW4pOndufSxnbi5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9W107cmV0dXJuIHRoaXMuZmluZElubmVyKG51bGw9PXQ/MDp0LG51bGw9PWU/MWU5OmUsciwwLG4pLHJ9LGduLnByb3RvdHlwZS5maW5kSW5uZXI9ZnVuY3Rpb24odCxlLG4scixvKXtmb3IodmFyIGk9MDtpPHRoaXMubG9jYWwubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5sb2NhbFtpXTtzLmZyb208PWUmJnMudG8+PXQmJighb3x8byhzLnNwZWMpKSYmbi5wdXNoKHMuY29weShzLmZyb20rcixzLnRvK3IpKX1mb3IodmFyIGE9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErPTMpaWYodGhpcy5jaGlsZHJlblthXTxlJiZ0aGlzLmNoaWxkcmVuW2ErMV0+dCl7dmFyIGM9dGhpcy5jaGlsZHJlblthXSsxO3RoaXMuY2hpbGRyZW5bYSsyXS5maW5kSW5uZXIodC1jLGUtYyxuLHIrYyxvKX19LGduLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT13bnx8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHx5bil9LGduLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPTA7czx0aGlzLmxvY2FsLmxlbmd0aDtzKyspe3ZhciBhPXRoaXMubG9jYWxbc10ubWFwKHQsbixyKTthJiZhLnR5cGUudmFsaWQoZSxhKT8oaXx8KGk9W10pKS5wdXNoKGEpOm8ub25SZW1vdmUmJm8ub25SZW1vdmUodGhpcy5sb2NhbFtzXS5zcGVjKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/Ym4odGhpcy5jaGlsZHJlbixpLHQsZSxuLHIsbyk6aT9uZXcgZ24oaS5zb3J0KFRuKSk6d259LGduLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dGhpcz09d24/Z24uY3JlYXRlKHQsZSk6dGhpcy5hZGRJbm5lcih0LGUsMCk6dGhpc30sZ24ucHJvdG90eXBlLmFkZElubmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPXRoaXMsaT0wO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxzKXt2YXIgYSxjPXMrbjtpZihhPU9uKGUsdCxjKSl7cnx8KHI9by5jaGlsZHJlbi5zbGljZSgpKTt3aGlsZShpPHIubGVuZ3RoJiZyW2ldPHMpaSs9MztyW2ldPT1zP3JbaSsyXT1yW2krMl0uYWRkSW5uZXIodCxhLGMrMSk6ci5zcGxpY2UoaSwwLHMscyt0Lm5vZGVTaXplLE1uKGEsdCxjKzEseW4pKSxpKz0zfX0pKTt2YXIgcz1rbihpP0NuKGUpOmUsLW4pO3JldHVybiBuZXcgZ24ocy5sZW5ndGg/dGhpcy5sb2NhbC5jb25jYXQocykuc29ydChUbik6dGhpcy5sb2NhbCxyfHx0aGlzLmNoaWxkcmVuKX0sZ24ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09dC5sZW5ndGh8fHRoaXM9PXduP3RoaXM6dGhpcy5yZW1vdmVJbm5lcih0LDApfSxnbi5wcm90b3R5cGUucmVtb3ZlSW5uZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5jaGlsZHJlbixyPXRoaXMubG9jYWwsbz0wO288bi5sZW5ndGg7bys9Myl7Zm9yKHZhciBpPXZvaWQgMCxzPW5bb10rZSxhPW5bbysxXStlLGM9MCxoPXZvaWQgMDtjPHQubGVuZ3RoO2MrKykoaD10W2NdKSYmaC5mcm9tPnMmJmgudG88YSYmKHRbY109bnVsbCwoaXx8KGk9W10pKS5wdXNoKGgpKTtpZihpKXtuPT10aGlzLmNoaWxkcmVuJiYobj10aGlzLmNoaWxkcmVuLnNsaWNlKCkpO3ZhciBwPW5bbysyXS5yZW1vdmVJbm5lcihpLHMrMSk7cCE9d24/bltvKzJdPXA6KG4uc3BsaWNlKG8sMyksby09Myl9fWlmKHIubGVuZ3RoKWZvcih2YXIgdT0wLGY9dm9pZCAwO3U8dC5sZW5ndGg7dSsrKWlmKGY9dFt1XSlmb3IodmFyIGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdLnR5cGUuZXEoZi50eXBlKSYmKHI9PXRoaXMubG9jYWwmJihyPXRoaXMubG9jYWwuc2xpY2UoKSksci5zcGxpY2UobC0tLDEpKTtyZXR1cm4gbj09dGhpcy5jaGlsZHJlbiYmcj09dGhpcy5sb2NhbD90aGlzOnIubGVuZ3RofHxuLmxlbmd0aD9uZXcgZ24ocixuKTp3bn0sZ24ucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYodGhpcz09d24pcmV0dXJuIHRoaXM7aWYoZS5pc0xlYWYpcmV0dXJuIGduLmVtcHR5O2Zvcih2YXIgbixyLG89MDtvPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO28rPTMpaWYodGhpcy5jaGlsZHJlbltvXT49dCl7dGhpcy5jaGlsZHJlbltvXT09dCYmKG49dGhpcy5jaGlsZHJlbltvKzJdKTticmVha31mb3IodmFyIGk9dCsxLHM9aStlLmNvbnRlbnQuc2l6ZSxhPTA7YTx0aGlzLmxvY2FsLmxlbmd0aDthKyspe3ZhciBjPXRoaXMubG9jYWxbYV07aWYoYy5mcm9tPHMmJmMudG8+aSYmYy50eXBlIGluc3RhbmNlb2YgZm4pe3ZhciBoPU1hdGgubWF4KGksYy5mcm9tKS1pLHA9TWF0aC5taW4ocyxjLnRvKS1pO2g8cCYmKHJ8fChyPVtdKSkucHVzaChjLmNvcHkoaCxwKSl9fWlmKHIpe3ZhciB1PW5ldyBnbihyLnNvcnQoVG4pKTtyZXR1cm4gbj9uZXcgeG4oW3Usbl0pOnV9cmV0dXJuIG58fHdufSxnbi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcz09dClyZXR1cm4hMDtpZighKHQgaW5zdGFuY2VvZiBnbil8fHRoaXMubG9jYWwubGVuZ3RoIT10LmxvY2FsLmxlbmd0aHx8dGhpcy5jaGlsZHJlbi5sZW5ndGghPXQuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhbC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmxvY2FsW2VdLmVxKHQubG9jYWxbZV0pKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bis9MylpZih0aGlzLmNoaWxkcmVuW25dIT10LmNoaWxkcmVuW25dfHx0aGlzLmNoaWxkcmVuW24rMV0hPXQuY2hpbGRyZW5bbisxXXx8IXRoaXMuY2hpbGRyZW5bbisyXS5lcSh0LmNoaWxkcmVuW24rMl0pKXJldHVybiExO3JldHVybiEwfSxnbi5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe3JldHVybiBObih0aGlzLmxvY2Fsc0lubmVyKHQpKX0sZ24ucHJvdG90eXBlLmxvY2Fsc0lubmVyPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PXduKXJldHVybiBtbjtpZih0LmlubGluZUNvbnRlbnR8fCF0aGlzLmxvY2FsLnNvbWUoZm4uaXMpKXJldHVybiB0aGlzLmxvY2FsO2Zvcih2YXIgZT1bXSxuPTA7bjx0aGlzLmxvY2FsLmxlbmd0aDtuKyspdGhpcy5sb2NhbFtuXS50eXBlIGluc3RhbmNlb2YgZm58fGUucHVzaCh0aGlzLmxvY2FsW25dKTtyZXR1cm4gZX07dmFyIHduPW5ldyBnbjtnbi5lbXB0eT13bixnbi5yZW1vdmVPdmVybGFwPU5uO3ZhciB4bj1mdW5jdGlvbih0KXt0aGlzLm1lbWJlcnM9dH07ZnVuY3Rpb24gYm4odCxlLG4scixvLGkscyl7Zm9yKHZhciBhPXQuc2xpY2UoKSxjPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgcz0wO3M8YS5sZW5ndGg7cys9Myl7dmFyIGM9YVtzKzFdLGg9dm9pZCAwOy0xPT1jfHx0PmMraXx8KGU+PWFbc10raT9hW3MrMV09LTE6KGg9ci1uLShlLXQpKyhpLW8pKSYmKGFbc10rPWgsYVtzKzFdKz1oKSl9fSxoPTA7aDxuLm1hcHMubGVuZ3RoO2grKyluLm1hcHNbaF0uZm9yRWFjaChjKTtmb3IodmFyIHA9ITEsdT0wO3U8YS5sZW5ndGg7dSs9MylpZigtMT09YVt1KzFdKXt2YXIgZj1uLm1hcChhW3VdK2kpLGw9Zi1vO2lmKGw8MHx8bD49ci5jb250ZW50LnNpemUpe3A9ITA7Y29udGludWV9dmFyIGQ9bi5tYXAodFt1KzFdK2ksLTEpLHY9ZC1vLG09ci5jb250ZW50LmZpbmRJbmRleChsKSx5PW0uaW5kZXgsZz1tLm9mZnNldCx3PXIubWF5YmVDaGlsZCh5KTtpZih3JiZnPT1sJiZnK3cubm9kZVNpemU9PXYpe3ZhciB4PWFbdSsyXS5tYXBJbm5lcihuLHcsZisxLGFbdV0raSsxLHMpO3ghPXduPyhhW3VdPWwsYVt1KzFdPXYsYVt1KzJdPXgpOihhW3UrMV09LTIscD0hMCl9ZWxzZSBwPSEwfWlmKHApe3ZhciBiPVNuKGEsdCxlfHxbXSxuLG8saSxzKSxrPU1uKGIsciwwLHMpO2U9ay5sb2NhbDtmb3IodmFyIFM9MDtTPGEubGVuZ3RoO1MrPTMpYVtTKzFdPDAmJihhLnNwbGljZShTLDMpLFMtPTMpO2Zvcih2YXIgTz0wLEM9MDtPPGsuY2hpbGRyZW4ubGVuZ3RoO08rPTMpe3ZhciBNPWsuY2hpbGRyZW5bT107d2hpbGUoQzxhLmxlbmd0aCYmYVtDXTxNKUMrPTM7YS5zcGxpY2UoQywwLGsuY2hpbGRyZW5bT10say5jaGlsZHJlbltPKzFdLGsuY2hpbGRyZW5bTysyXSl9fXJldHVybiBuZXcgZ24oZSYmZS5zb3J0KFRuKSxhKX1mdW5jdGlvbiBrbih0LGUpe2lmKCFlfHwhdC5sZW5ndGgpcmV0dXJuIHQ7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuLnB1c2gobmV3IGRuKG8uZnJvbStlLG8udG8rZSxvLnR5cGUpKX1yZXR1cm4gbn1mdW5jdGlvbiBTbih0LGUsbixyLG8saSxzKXtmdW5jdGlvbiBhKHQsZSl7Zm9yKHZhciBpPTA7aTx0LmxvY2FsLmxlbmd0aDtpKyspe3ZhciBjPXQubG9jYWxbaV0ubWFwKHIsbyxlKTtjP24ucHVzaChjKTpzLm9uUmVtb3ZlJiZzLm9uUmVtb3ZlKHQubG9jYWxbaV0uc3BlYyl9Zm9yKHZhciBoPTA7aDx0LmNoaWxkcmVuLmxlbmd0aDtoKz0zKWEodC5jaGlsZHJlbltoKzJdLHQuY2hpbGRyZW5baF0rZSsxKX1mb3IodmFyIGM9MDtjPHQubGVuZ3RoO2MrPTMpLTE9PXRbYysxXSYmYSh0W2MrMl0sZVtjXStpKzEpO3JldHVybiBufWZ1bmN0aW9uIE9uKHQsZSxuKXtpZihlLmlzTGVhZilyZXR1cm4gbnVsbDtmb3IodmFyIHI9bitlLm5vZGVTaXplLG89bnVsbCxpPTAscz12b2lkIDA7aTx0Lmxlbmd0aDtpKyspKHM9dFtpXSkmJnMuZnJvbT5uJiZzLnRvPHImJigob3x8KG89W10pKS5wdXNoKHMpLHRbaV09bnVsbCk7cmV0dXJuIG99ZnVuY3Rpb24gQ24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyludWxsIT10W25dJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9ZnVuY3Rpb24gTW4odCxlLG4scil7dmFyIG89W10saT0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUscyl7dmFyIGE9T24odCxlLHMrbik7aWYoYSl7aT0hMDt2YXIgYz1NbihhLGUsbitzKzEscik7YyE9d24mJm8ucHVzaChzLHMrZS5ub2RlU2l6ZSxjKX19KSk7Zm9yKHZhciBzPWtuKGk/Q24odCk6dCwtbikuc29ydChUbiksYT0wO2E8cy5sZW5ndGg7YSsrKXNbYV0udHlwZS52YWxpZChlLHNbYV0pfHwoci5vblJlbW92ZSYmci5vblJlbW92ZShzW2FdLnNwZWMpLHMuc3BsaWNlKGEtLSwxKSk7cmV0dXJuIHMubGVuZ3RofHxvLmxlbmd0aD9uZXcgZ24ocyxvKTp3bn1mdW5jdGlvbiBUbih0LGUpe3JldHVybiB0LmZyb20tZS5mcm9tfHx0LnRvLWUudG99ZnVuY3Rpb24gTm4odCl7Zm9yKHZhciBlPXQsbj0wO248ZS5sZW5ndGgtMTtuKyspe3ZhciByPWVbbl07aWYoci5mcm9tIT1yLnRvKWZvcih2YXIgbz1uKzE7bzxlLmxlbmd0aDtvKyspe3ZhciBpPWVbb107aWYoaS5mcm9tIT1yLmZyb20pe2kuZnJvbTxyLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW25dPXIuY29weShyLmZyb20saS5mcm9tKSxFbihlLG8sci5jb3B5KGkuZnJvbSxyLnRvKSkpO2JyZWFrfWkudG8hPXIudG8mJihlPT10JiYoZT10LnNsaWNlKCkpLGVbb109aS5jb3B5KGkuZnJvbSxyLnRvKSxFbihlLG8rMSxpLmNvcHkoci50byxpLnRvKSkpfX1yZXR1cm4gZX1mdW5jdGlvbiBFbih0LGUsbil7d2hpbGUoZTx0Lmxlbmd0aCYmVG4obix0W2VdKT4wKWUrKzt0LnNwbGljZShlLDAsbil9ZnVuY3Rpb24gQW4odCl7dmFyIGU9W107cmV0dXJuIHQuc29tZVByb3AoImRlY29yYXRpb25zIiwoZnVuY3Rpb24obil7dmFyIHI9bih0LnN0YXRlKTtyJiZyIT13biYmZS5wdXNoKHIpfSkpLHQuY3Vyc29yV3JhcHBlciYmZS5wdXNoKGduLmNyZWF0ZSh0LnN0YXRlLmRvYyxbdC5jdXJzb3JXcmFwcGVyLmRlY29dKSkseG4uZnJvbShlKX14bi5wcm90b3R5cGUuZm9yQ2hpbGQ9ZnVuY3Rpb24odCxlKXtpZihlLmlzTGVhZilyZXR1cm4gZ24uZW1wdHk7Zm9yKHZhciBuPVtdLHI9MDtyPHRoaXMubWVtYmVycy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLm1lbWJlcnNbcl0uZm9yQ2hpbGQodCxlKTtvIT13biYmKG8gaW5zdGFuY2VvZiB4bj9uPW4uY29uY2F0KG8ubWVtYmVycyk6bi5wdXNoKG8pKX1yZXR1cm4geG4uZnJvbShuKX0seG4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIHhuKXx8dC5tZW1iZXJzLmxlbmd0aCE9dGhpcy5tZW1iZXJzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubWVtYmVycy5sZW5ndGg7ZSsrKWlmKCF0aGlzLm1lbWJlcnNbZV0uZXEodC5tZW1iZXJzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0seG4ucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMCxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmxvY2Fsc0lubmVyKHQpO2lmKG8ubGVuZ3RoKWlmKGUpe24mJihlPWUuc2xpY2UoKSxuPSExKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyllLnB1c2gob1tpXSl9ZWxzZSBlPW99cmV0dXJuIGU/Tm4obj9lOmUuc29ydChUbikpOm1ufSx4bi5mcm9tPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiB3bjtjYXNlIDE6cmV0dXJuIHRbMF07ZGVmYXVsdDpyZXR1cm4gbmV3IHhuKHQpfX07dmFyIFJuPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcHJvcHM9ZSx0aGlzLnN0YXRlPWUuc3RhdGUsdGhpcy5kaXNwYXRjaD10aGlzLmRpc3BhdGNoLmJpbmQodGhpcyksdGhpcy5fcm9vdD1udWxsLHRoaXMuZm9jdXNlZD0hMSx0aGlzLmRvbT10JiZ0Lm1vdW50fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0JiYodC5hcHBlbmRDaGlsZD90LmFwcGVuZENoaWxkKHRoaXMuZG9tKTp0LmFwcGx5P3QodGhpcy5kb20pOnQubW91bnQmJih0aGlzLm1vdW50ZWQ9ITApKSx0aGlzLmVkaXRhYmxlPVBuKHRoaXMpLHRoaXMubWFya0N1cnNvcj1udWxsLHRoaXMuY3Vyc29yV3JhcHBlcj1udWxsLEluKHRoaXMpLHRoaXMubm9kZVZpZXdzPUZuKHRoaXMpLHRoaXMuZG9jVmlldz1jdCh0aGlzLnN0YXRlLmRvYyxEbih0aGlzKSxBbih0aGlzKSx0aGlzLmRvbSx0aGlzKSx0aGlzLmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwsdGhpcy5kcmFnZ2luZz1udWxsLFJlKHRoaXMpLHRoaXMucGx1Z2luVmlld3M9W10sdGhpcy51cGRhdGVQbHVnaW5WaWV3cygpfSx6bj17cHJvcHM6e2NvbmZpZ3VyYWJsZTohMH0scm9vdDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gRG4odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZS5jbGFzcz0iUHJvc2VNaXJyb3IiLGUuY29udGVudGVkaXRhYmxlPVN0cmluZyh0LmVkaXRhYmxlKSx0LnNvbWVQcm9wKCJhdHRyaWJ1dGVzIiwoZnVuY3Rpb24obil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4mJihuPW4odC5zdGF0ZSkpLG4pZm9yKHZhciByIGluIG4pImNsYXNzIj09cj9lLmNsYXNzKz0iICIrbltyXTplW3JdfHwiY29udGVudGVkaXRhYmxlIj09cnx8Im5vZGVOYW1lIj09cnx8KGVbcl09U3RyaW5nKG5bcl0pKX0pKSxbZG4ubm9kZSgwLHQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZSxlKV19ZnVuY3Rpb24gSW4odCl7dmFyIGU9dC5zdGF0ZS5zZWxlY3Rpb24sbj1lLiRoZWFkLHI9ZS4kYW5jaG9yLG89ZS52aXNpYmxlO2lmKHQubWFya0N1cnNvcil7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7aS5zZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiLCJ0cnVlIiksdC5jdXJzb3JXcmFwcGVyPXtkb206aSxkZWNvOmRuLndpZGdldChuLnBvcyxpLHtyYXc6ITAsbWFya3M6dC5tYXJrQ3Vyc29yfSl9fWVsc2UgaWYob3x8bi5wb3MhPXIucG9zKXQuY3Vyc29yV3JhcHBlcj1udWxsO2Vsc2V7dmFyIHM7IXQuY3Vyc29yV3JhcHBlcnx8dC5jdXJzb3JXcmFwcGVyLmRvbS5jaGlsZE5vZGVzLmxlbmd0aD8ocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxzLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIscy5zdHlsZS5sZWZ0PSItMTAwMDAwcHgiKTp0LmN1cnNvcldyYXBwZXIuZGVjby5wb3MhPW4ucG9zJiYocz10LmN1cnNvcldyYXBwZXIuZG9tKSxzJiYodC5jdXJzb3JXcmFwcGVyPXtkb206cyxkZWNvOmRuLndpZGdldChuLnBvcyxzLHtyYXc6ITB9KX0pfX1mdW5jdGlvbiBQbih0KXtyZXR1cm4hdC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSl9ZnVuY3Rpb24gQm4odCxlKXt2YXIgbj1NYXRoLm1pbih0LiRhbmNob3Iuc2hhcmVkRGVwdGgodC5oZWFkKSxlLiRhbmNob3Iuc2hhcmVkRGVwdGgoZS5oZWFkKSk7cmV0dXJuIHQuJGFuY2hvci5ub2RlKG4pIT1lLiRhbmNob3Iubm9kZShuKX1mdW5jdGlvbiBGbih0KXt2YXIgZT17fTtyZXR1cm4gdC5zb21lUHJvcCgibm9kZVZpZXdzIiwoZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbil8fChlW25dPXRbbl0pfSkpLGV9ZnVuY3Rpb24gam4odCxlKXt2YXIgbj0wLHI9MDtmb3IodmFyIG8gaW4gdCl7aWYodFtvXSE9ZVtvXSlyZXR1cm4hMDtuKyt9Zm9yKHZhciBpIGluIGUpcisrO3JldHVybiBuIT1yfXpuLnByb3BzLmdldD1mdW5jdGlvbigpe2lmKHRoaXMuX3Byb3BzLnN0YXRlIT10aGlzLnN0YXRlKXt2YXIgdD10aGlzLl9wcm9wcztmb3IodmFyIGUgaW4gdGhpcy5fcHJvcHM9e30sdCl0aGlzLl9wcm9wc1tlXT10W2VdO3RoaXMuX3Byb3BzLnN0YXRlPXRoaXMuc3RhdGV9cmV0dXJuIHRoaXMuX3Byb3BzfSxSbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3QuaGFuZGxlRE9NRXZlbnRzIT10aGlzLl9wcm9wcy5oYW5kbGVET01FdmVudHMmJkllKHRoaXMpLHRoaXMuX3Byb3BzPXQsdGhpcy51cGRhdGVTdGF0ZUlubmVyKHQuc3RhdGUsITApfSxSbi5wcm90b3R5cGUuc2V0UHJvcHM9ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHRoaXMuX3Byb3BzKWVbbl09dGhpcy5fcHJvcHNbbl07Zm9yKHZhciByIGluIGUuc3RhdGU9dGhpcy5zdGF0ZSx0KWVbcl09dFtyXTt0aGlzLnVwZGF0ZShlKX0sUm4ucHJvdG90eXBlLnVwZGF0ZVN0YXRlPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlU3RhdGVJbm5lcih0LHRoaXMuc3RhdGUucGx1Z2lucyE9dC5wbHVnaW5zKX0sUm4ucHJvdG90eXBlLnVwZGF0ZVN0YXRlSW5uZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLG89dGhpcy5zdGF0ZSxpPSExO2lmKHRoaXMuc3RhdGU9dCxlKXt2YXIgYT1Gbih0aGlzKTtqbihhLHRoaXMubm9kZVZpZXdzKSYmKHRoaXMubm9kZVZpZXdzPWEsaT0hMCksSWUodGhpcyl9dGhpcy5lZGl0YWJsZT1Qbih0aGlzKSxJbih0aGlzKTt2YXIgYz1Bbih0aGlzKSxoPURuKHRoaXMpLHA9ZT8icmVzZXQiOnQuc2Nyb2xsVG9TZWxlY3Rpb24+by5zY3JvbGxUb1NlbGVjdGlvbj8idG8gc2VsZWN0aW9uIjoicHJlc2VydmUiLHU9aXx8IXRoaXMuZG9jVmlldy5tYXRjaGVzTm9kZSh0LmRvYyxoLGMpLGY9dXx8IXQuc2VsZWN0aW9uLmVxKG8uc2VsZWN0aW9uKSxsPSJwcmVzZXJ2ZSI9PXAmJmYmJm51bGw9PXRoaXMuZG9tLnN0eWxlLm92ZXJmbG93QW5jaG9yJiZDKHRoaXMpO2lmKGYpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpO3ZhciBkPXUmJihzLmllfHxzLmNocm9tZSkmJiFvLnNlbGVjdGlvbi5lbXB0eSYmIXQuc2VsZWN0aW9uLmVtcHR5JiZCbihvLnNlbGVjdGlvbix0LnNlbGVjdGlvbik7dSYmKCFpJiZ0aGlzLmRvY1ZpZXcudXBkYXRlKHQuZG9jLGgsYyx0aGlzKXx8KHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PWN0KHQuZG9jLGgsYyx0aGlzLmRvbSx0aGlzKSkpLGR8fCEodGhpcy5tb3VzZURvd24mJnRoaXMuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh0aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkpJiZlZSh0aGlzKSk/V3QodGhpcyxkKTooWHQodGhpcyx0LnNlbGVjdGlvbiksdGhpcy5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfWlmKHRoaXMudXBkYXRlUGx1Z2luVmlld3MobyksInJlc2V0Ij09cCl0aGlzLmRvbS5zY3JvbGxUb3A9MDtlbHNlIGlmKCJ0byBzZWxlY3Rpb24iPT1wKXt2YXIgdj10aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlO3RoaXMuc29tZVByb3AoImhhbmRsZVNjcm9sbFRvU2VsZWN0aW9uIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQobil9KSl8fCh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIHJbImIiXT9PKHRoaXMsdGhpcy5kb2NWaWV3LmRvbUFmdGVyUG9zKHQuc2VsZWN0aW9uLmZyb20pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHYpOk8odGhpcyx0aGlzLmNvb3Jkc0F0UG9zKHQuc2VsZWN0aW9uLmhlYWQpLHYpKX1lbHNlIGwmJlQobCl9LFJuLnByb3RvdHlwZS5kZXN0cm95UGx1Z2luVmlld3M9ZnVuY3Rpb24oKXt2YXIgdDt3aGlsZSh0PXRoaXMucGx1Z2luVmlld3MucG9wKCkpdC5kZXN0cm95JiZ0LmRlc3Ryb3koKX0sUm4ucHJvdG90eXBlLnVwZGF0ZVBsdWdpblZpZXdzPWZ1bmN0aW9uKHQpe2lmKHQmJnQucGx1Z2lucz09dGhpcy5zdGF0ZS5wbHVnaW5zKWZvcih2YXIgZT0wO2U8dGhpcy5wbHVnaW5WaWV3cy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLnBsdWdpblZpZXdzW2VdO24udXBkYXRlJiZuLnVwZGF0ZSh0aGlzLHQpfWVsc2V7dGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKTtmb3IodmFyIHI9MDtyPHRoaXMuc3RhdGUucGx1Z2lucy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0YXRlLnBsdWdpbnNbcl07by5zcGVjLnZpZXcmJnRoaXMucGx1Z2luVmlld3MucHVzaChvLnNwZWMudmlldyh0aGlzKSl9fX0sUm4ucHJvdG90eXBlLnNvbWVQcm9wPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj10aGlzLl9wcm9wcyYmdGhpcy5fcHJvcHNbdF07aWYobnVsbCE9ciYmKG49ZT9lKHIpOnIpKXJldHVybiBuO3ZhciBvPXRoaXMuc3RhdGUucGx1Z2lucztpZihvKWZvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLnByb3BzW3RdO2lmKG51bGwhPXMmJihuPWU/ZShzKTpzKSlyZXR1cm4gbn19LFJuLnByb3RvdHlwZS5oYXNGb2N1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3QuYWN0aXZlRWxlbWVudD09dGhpcy5kb219LFJuLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMuZWRpdGFibGUmJkEodGhpcy5kb20pLFd0KHRoaXMpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX0sem4ucm9vdC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yb290O2lmKG51bGw9PXQpZm9yKHZhciBlPXRoaXMuZG9tLnBhcmVudE5vZGU7ZTtlPWUucGFyZW50Tm9kZSlpZig5PT1lLm5vZGVUeXBlfHwxMT09ZS5ub2RlVHlwZSYmZS5ob3N0KXJldHVybiBlLmdldFNlbGVjdGlvbnx8KE9iamVjdC5nZXRQcm90b3R5cGVPZihlKS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCl9KSx0aGlzLl9yb290PWU7cmV0dXJuIHR8fGRvY3VtZW50fSxSbi5wcm90b3R5cGUucG9zQXRDb29yZHM9ZnVuY3Rpb24odCl7cmV0dXJuIGoodGhpcyx0KX0sUm4ucHJvdG90eXBlLmNvb3Jkc0F0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiAkKHRoaXMsdCl9LFJuLnByb3RvdHlwZS5kb21BdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb2NWaWV3LmRvbUZyb21Qb3ModCl9LFJuLnByb3RvdHlwZS5ub2RlRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9jVmlldy5kZXNjQXQodCk7cmV0dXJuIGU/ZS5ub2RlRE9NOm51bGx9LFJuLnByb3RvdHlwZS5wb3NBdERPTT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49LTEpO3ZhciByPXRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKHQsZSxuKTtpZihudWxsPT1yKXRocm93IG5ldyBSYW5nZUVycm9yKCJET00gcG9zaXRpb24gbm90IGluc2lkZSB0aGUgZWRpdG9yIik7cmV0dXJuIHJ9LFJuLnByb3RvdHlwZS5lbmRPZlRleHRibG9jaz1mdW5jdGlvbih0LGUpe3JldHVybiBYKHRoaXMsZXx8dGhpcy5zdGF0ZSx0KX0sUm4ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRvY1ZpZXcmJihEZSh0aGlzKSx0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpLHRoaXMubW91bnRlZD8odGhpcy5kb2NWaWV3LnVwZGF0ZSh0aGlzLnN0YXRlLmRvYyxbXSxBbih0aGlzKSx0aGlzKSx0aGlzLmRvbS50ZXh0Q29udGVudD0iIik6dGhpcy5kb20ucGFyZW50Tm9kZSYmdGhpcy5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbSksdGhpcy5kb2NWaWV3LmRlc3Ryb3koKSx0aGlzLmRvY1ZpZXc9bnVsbCl9LFJuLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBGZSh0aGlzLHQpfSxSbi5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcHJvcHMuZGlzcGF0Y2hUcmFuc2FjdGlvbjtlP2UuY2FsbCh0aGlzLHQpOnRoaXMudXBkYXRlU3RhdGUodGhpcy5zdGF0ZS5hcHBseSh0KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJuLnByb3RvdHlwZSx6bil9LCI1YmIxIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMy4yNTUgMTVhNi45NzIgNi45NzIgMCAwMC0uOTY1IDJINUE1IDUgMCAwMTUgN2gxNGE1IDUgMCAwMTQuNjcxIDYuNzg3IDcuMDEgNy4wMSAwIDAwLTEuNzQtMS4xNDZBMyAzIDAgMDAxOSA5SDVhMyAzIDAgMDAwIDZoOC4yNTV6TTE5IDE0YTUgNSAwIDExMCAxMCA1IDUgMCAwMTAtMTB6bS0yLjUgNS45MzhoNWEuOTM3LjkzNyAwIDEwMC0xLjg3NWgtNWEuOTM3LjkzNyAwIDEwMCAxLjg3NXoifX0pXSkpfX19LCI1YzZjIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX19LCI1ZDc1IjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMi40MDYgMTQuOTA1YTEgMSAwIDAwLS41NDMgMS4zMDcgMSAxIDAgMDEtLjIxNyAxLjA5bC0yLjgyOCAyLjgyOWEyIDIgMCAwMS0yLjgyOCAwTDMuODY4IDE4LjAxYTIgMiAwIDAxMC0yLjgyOUw2LjcgMTIuMzUzYTEuMDEzIDEuMDEzIDAgMDExLjA5MS0uMjE3IDEgMSAwIDAwLjc2My0xLjg0OSAzLjAzNCAzLjAzNCAwIDAwLTMuMjY4LjY1MmwtMi44MzIgMi44MjhhNC4wMDYgNC4wMDYgMCAwMDAgNS42NTdsMi4xMjIgMi4xMjFhNCA0IDAgMDA1LjY1NiAwbDIuODI5LTIuODI4YTMuMDA4IDMuMDA4IDAgMDAuNjUxLTMuMjcgMSAxIDAgMDAtMS4zMDYtLjU0MnoifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTcuNzU3IDE2LjI0MWExLjAxMSAxLjAxMSAwIDAwMS40MTQgMGw3Ljc3OS03Ljc3OGExIDEgMCAwMC0xLjQxNC0xLjQxNGwtNy43NzkgNy43NzhhMSAxIDAgMDAwIDEuNDE0eiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjEuNTQ2IDQuNTc0bC0yLjEyMS0yLjEyMWE0LjAwNiA0LjAwNiAwIDAwLTUuNjU3IDBsLTIuODI5IDIuODI4YTMuMDA2IDMuMDA2IDAgMDAtLjY1MSAzLjI2OSAxIDEgMCAxMDEuODQ5LS43NjQgMSAxIDAgMDEuMjE3LTEuMDg2bDIuODI4LTIuODI4YTIgMiAwIDAxMi44MjkgMGwyLjEyMSAyLjEyMWEyIDIgMCAwMTAgMi44MjlMMTcuMyAxMS42NDVhMS4wMTUgMS4wMTUgMCAwMS0xLjA5MS4yMTcgMSAxIDAgMDAtLjc2NSAxLjg0OSAzLjAyNiAzLjAyNiAwIDAwMy4yNy0uNjUxbDIuODI4LTIuODI4YTQuMDA3IDQuMDA3IDAgMDAuMDA0LTUuNjU4eiJ9fSldKSl9fX0sIjVkYmUiOmZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oKXt2YXIgZTtmdW5jdGlvbiBuKCl7Y29uc29sZS5sb2coby5hcHBseShudWxsLGFyZ3VtZW50cykpfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gby5hcHBseShudWxsLFt0XS5jb25jYXQoZSkpfWZ1bmN0aW9uIG8odCl7Zm9yKHZhciBlLG4scixvLGk9MSxzPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxhPTAsYz10Lmxlbmd0aCxoPSIiLHA9ITEsdT0hMSxmPWZ1bmN0aW9uKCl7cmV0dXJuIHNbaSsrXX0sbD1mdW5jdGlvbigpe3ZhciBuPSIiO3doaWxlKC9cZC8udGVzdCh0W2FdKSluKz10W2ErK10sZT10W2FdO3JldHVybiBuLmxlbmd0aD4wP3BhcnNlSW50KG4pOm51bGx9O2E8YzsrK2EpaWYoZT10W2FdLHApc3dpdGNoKHA9ITEsIi4iPT1lPyh1PSExLGU9dFsrK2FdKToiMCI9PWUmJiIuIj09dFthKzFdPyh1PSEwLGErPTIsZT10W2FdKTp1PSEwLG89bCgpLGUpe2Nhc2UiYiI6aCs9cGFyc2VJbnQoZigpLDEwKS50b1N0cmluZygyKTticmVhaztjYXNlImMiOm49ZigpLGgrPSJzdHJpbmciPT09dHlwZW9mIG58fG4gaW5zdGFuY2VvZiBTdHJpbmc/bjpTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG4sMTApKTticmVhaztjYXNlImQiOmgrPXBhcnNlSW50KGYoKSwxMCk7YnJlYWs7Y2FzZSJmIjpyPVN0cmluZyhwYXJzZUZsb2F0KGYoKSkudG9GaXhlZChvfHw2KSksaCs9dT9yOnIucmVwbGFjZSgvXjAvLCIiKTticmVhaztjYXNlImoiOmgrPUpTT04uc3RyaW5naWZ5KGYoKSk7YnJlYWs7Y2FzZSJvIjpoKz0iMCIrcGFyc2VJbnQoZigpLDEwKS50b1N0cmluZyg4KTticmVhaztjYXNlInMiOmgrPWYoKTticmVhaztjYXNlIngiOmgrPSIweCIrcGFyc2VJbnQoZigpLDEwKS50b1N0cmluZygxNik7YnJlYWs7Y2FzZSJYIjpoKz0iMHgiK3BhcnNlSW50KGYoKSwxMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7YnJlYWs7ZGVmYXVsdDpoKz1lO2JyZWFrfWVsc2UiJSI9PT1lP3A9ITA6aCs9ZTtyZXR1cm4gaH1lPXQuZXhwb3J0cz1vLGUuZm9ybWF0PW8sZS52c3ByaW50Zj1yLCJ1bmRlZmluZWQiIT09dHlwZW9mIGNvbnNvbGUmJiJmdW5jdGlvbiI9PT10eXBlb2YgY29uc29sZS5sb2cmJihlLnByaW50Zj1uKX0pKCl9LCI1ZmVkIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOSAwYTUgNSAwIDExMCAxMCA1IDUgMCAwMTAtMTB6bTIuNSA1LjkzOGEuOTM3LjkzNyAwIDEwMC0xLjg3NWgtMS4yNWEuMzEyLjMxMiAwIDAxLS4zMTMtLjMxM1YyLjVhLjkzNy45MzcgMCAxMC0xLjg3NSAwdjEuMjVjMCAuMTczLS4xNC4zMTMtLjMxMi4zMTNIMTYuNWEuOTM3LjkzNyAwIDEwMCAxLjg3NWgxLjI1Yy4xNzMgMCAuMzEzLjE0LjMxMy4zMTJWNy41YS45MzcuOTM3IDAgMTAxLjg3NSAwVjYuMjVjMC0uMTczLjE0LS4zMTMuMzEyLS4zMTNoMS4yNXpNNSAxNmEzIDMgMCAwMDAgNmgxNGEzIDMgMCAwMDAtNkg1em0wLTJoMTRhNSA1IDAgMDEwIDEwSDVhNSA1IDAgMDEwLTEweiJ9fSldKSl9fX0sNjU0NzpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYTY5MSIpLG89bigiMWQ4MCIpLGk9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGkscyxhPVN0cmluZyhvKGUpKSxjPXIobiksaD1hLmxlbmd0aDtyZXR1cm4gYzwwfHxjPj1oP3Q/IiI6dm9pZCAwOihpPWEuY2hhckNvZGVBdChjKSxpPDU1Mjk2fHxpPjU2MzE5fHxjKzE9PT1ofHwocz1hLmNoYXJDb2RlQXQoYysxKSk8NTYzMjB8fHM+NTczNDM/dD9hLmNoYXJBdChjKTppOnQ/YS5zbGljZShjLGMrMik6cy01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19O3QuZXhwb3J0cz17Y29kZUF0OmkoITEpLGNoYXJBdDppKCEwKX19LCI2NWYwIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODYxZCIpLG89bigiZThiNSIpLGk9bigiYjYyMiIpLHM9aSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBvKHQpJiYobj10LmNvbnN0cnVjdG9yLCJmdW5jdGlvbiIhPXR5cGVvZiBufHxuIT09QXJyYXkmJiFvKG4ucHJvdG90eXBlKT9yKG4pJiYobj1uW3NdLG51bGw9PT1uJiYobj12b2lkIDApKTpuPXZvaWQgMCksbmV3KHZvaWQgMD09PW4/QXJyYXk6bikoMD09PWU/MDplKX19LCI2OWYzIjpmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpLHM9bigiN2Y5YSIpLGE9bigiZGE4NCIpLGM9bigiODYxZCIpLGg9bigiOTExMiIpLHA9bigiNTEzNSIpLHU9bigiZjc3MiIpLGY9bigiZDAxMiIpLGw9YS5XZWFrTWFwLGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGkodCk/byh0KTpyKHQse30pfSx2PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbjtpZighYyhlKXx8KG49byhlKSkudHlwZSE9PXQpdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICIrdCsiIHJlcXVpcmVkIik7cmV0dXJuIG59fTtpZihzKXt2YXIgbT1uZXcgbCx5PW0uZ2V0LGc9bS5oYXMsdz1tLnNldDtyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHcuY2FsbChtLHQsZSksZX0sbz1mdW5jdGlvbih0KXtyZXR1cm4geS5jYWxsKG0sdCl8fHt9fSxpPWZ1bmN0aW9uKHQpe3JldHVybiBnLmNhbGwobSx0KX19ZWxzZXt2YXIgeD11KCJzdGF0ZSIpO2ZbeF09ITAscj1mdW5jdGlvbih0LGUpe3JldHVybiBoKHQseCxlKSxlfSxvPWZ1bmN0aW9uKHQpe3JldHVybiBwKHQseCk/dFt4XTp7fX0saT1mdW5jdGlvbih0KXtyZXR1cm4gcCh0LHgpfX10LmV4cG9ydHM9e3NldDpyLGdldDpvLGhhczppLGVuZm9yY2U6ZCxnZXR0ZXJGb3I6dn19LCI2ZDU0IjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6eyJmaWxsLXJ1bGUiOiJldmVub2RkIixkOiJNMTcgMTd2NWgyYTMgMyAwIDAwMy0zdi0yaC01em0tMiAwSDl2NWg2di01em0yLTJoNVY5aC01djZ6bS0yIDBWOUg5djZoNnptMi04aDVWNWEzIDMgMCAwMC0zLTNoLTJ2NXptLTIgMFYySDl2NWg2em05IDkuMTc3VjE5YTUgNSAwIDAxLTUgNUg1YTUgNSAwIDAxLTUtNVY1YTUgNSAwIDAxNS01aDE0YTUgNSAwIDAxNSA1djIuODIzYS44NDMuODQzIDAgMDEwIC4zNTR2Ny42NDZhLjg0My44NDMgMCAwMTAgLjM1NHpNNyAySDVhMyAzIDAgMDAtMyAzdjJoNVYyek0yIDl2Nmg1VjlIMnptMCA4djJhMyAzIDAgMDAzIDNoMnYtNUgyeiJ9fSldKSl9fX0sIjZlZWIiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCI5MTEyIiksaT1uKCI1MTM1Iikscz1uKCJjZTRlIiksYT1uKCI4OTI1IiksYz1uKCI2OWYzIiksaD1jLmdldCxwPWMuZW5mb3JjZSx1PVN0cmluZyhTdHJpbmcpLnNwbGl0KCJTdHJpbmciKTsodC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGEpe3ZhciBjPSEhYSYmISFhLnVuc2FmZSxoPSEhYSYmISFhLmVudW1lcmFibGUsZj0hIWEmJiEhYS5ub1RhcmdldEdldDsiZnVuY3Rpb24iPT10eXBlb2YgbiYmKCJzdHJpbmciIT10eXBlb2YgZXx8aShuLCJuYW1lIil8fG8obiwibmFtZSIsZSkscChuKS5zb3VyY2U9dS5qb2luKCJzdHJpbmciPT10eXBlb2YgZT9lOiIiKSksdCE9PXI/KGM/IWYmJnRbZV0mJihoPSEwKTpkZWxldGUgdFtlXSxoP3RbZV09bjpvKHQsZSxuKSk6aD90W2VdPW46cyhlLG4pfSkoRnVuY3Rpb24ucHJvdG90eXBlLCJ0b1N0cmluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMmJmgodGhpcykuc291cmNlfHxhKHRoaXMpfSkpfSwiNmY1MyI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgzYWIiKSxvPW4oImRmNzUiKSxpPW4oImZjNmEiKSxzPW4oImQxZTciKS5mLGE9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuLGE9aShlKSxjPW8oYSksaD1jLmxlbmd0aCxwPTAsdT1bXTt3aGlsZShoPnApbj1jW3ArK10sciYmIXMuY2FsbChhLG4pfHx1LnB1c2godD9bbixhW25dXTphW25dKTtyZXR1cm4gdX19O3QuZXhwb3J0cz17ZW50cmllczphKCEwKSx2YWx1ZXM6YSghMSl9fSwiNzBjNyI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNNSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0yLjUgNS45MzhhLjkzNy45MzcgMCAxMDAtMS44NzVINi4yNWEuMzEyLjMxMiAwIDAxLS4zMTMtLjMxM1YxNi41YS45MzcuOTM3IDAgMTAtMS44NzUgMHYxLjI1YzAgLjE3My0uMTQuMzEzLS4zMTIuMzEzSDIuNWEuOTM3LjkzNyAwIDEwMCAxLjg3NWgxLjI1Yy4xNzMgMCAuMzEzLjE0LjMxMy4zMTJ2MS4yNWEuOTM3LjkzNyAwIDEwMS44NzUgMHYtMS4yNWMwLS4xNzMuMTQtLjMxMy4zMTItLjMxM0g3LjV6TTE2IDE5YTMgMyAwIDAwNiAwVjVhMyAzIDAgMDAtNiAwdjE0em0tMiAwVjVhNSA1IDAgMDExMCAwdjE0YTUgNSAwIDAxLTEwIDB6In19KV0pKX19fSw3NDE4OmZ1bmN0aW9uKHQsZSl7ZS5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LCI3NDZmIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNDI4ZiIpLG89bigiNTEzNSIpLGk9bigiZTUzOCIpLHM9bigiOWJmMiIpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXIuU3ltYm9sfHwoci5TeW1ib2w9e30pO28oZSx0KXx8cyhlLHQse3ZhbHVlOmkuZih0KX0pfX0sNzgzOTpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1bImNvbnN0cnVjdG9yIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwidmFsdWVPZiJdfSwiN2IwYiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjFkODAiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChyKHQpKX19LCI3YzczIjpmdW5jdGlvbih0LGUsbil7dmFyIHIsbz1uKCI4MjVhIiksaT1uKCIzN2U4Iikscz1uKCI3ODM5IiksYT1uKCJkMDEyIiksYz1uKCIxYmU0IiksaD1uKCJjYzEyIikscD1uKCJmNzcyIiksdT0iPiIsZj0iPCIsbD0icHJvdG90eXBlIixkPSJzY3JpcHQiLHY9cCgiSUVfUFJPVE8iKSxtPWZ1bmN0aW9uKCl7fSx5PWZ1bmN0aW9uKHQpe3JldHVybiBmK2QrdSt0K2YrIi8iK2QrdX0sZz1mdW5jdGlvbih0KXt0LndyaXRlKHkoIiIpKSx0LmNsb3NlKCk7dmFyIGU9dC5wYXJlbnRXaW5kb3cuT2JqZWN0O3JldHVybiB0PW51bGwsZX0sdz1mdW5jdGlvbigpe3ZhciB0LGU9aCgiaWZyYW1lIiksbj0iamF2YSIrZCsiOiI7cmV0dXJuIGUuc3R5bGUuZGlzcGxheT0ibm9uZSIsYy5hcHBlbmRDaGlsZChlKSxlLnNyYz1TdHJpbmcobiksdD1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsdC5vcGVuKCksdC53cml0ZSh5KCJkb2N1bWVudC5GPU9iamVjdCIpKSx0LmNsb3NlKCksdC5GfSx4PWZ1bmN0aW9uKCl7dHJ5e3I9ZG9jdW1lbnQuZG9tYWluJiZuZXcgQWN0aXZlWE9iamVjdCgiaHRtbGZpbGUiKX1jYXRjaChlKXt9eD1yP2cocik6dygpO3ZhciB0PXMubGVuZ3RoO3doaWxlKHQtLSlkZWxldGUgeFtsXVtzW3RdXTtyZXR1cm4geCgpfTthW3ZdPSEwLHQuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8obVtsXT1vKHQpLG49bmV3IG0sbVtsXT1udWxsLG5bdl09dCk6bj14KCksdm9pZCAwPT09ZT9uOmkobixlKX19LCI3ZGQwIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjIzZTciKSxvPW4oIjllZDMiKSxpPW4oImUxNjMiKSxzPW4oImQyYmIiKSxhPW4oImQ0NGUiKSxjPW4oIjkxMTIiKSxoPW4oIjZlZWIiKSxwPW4oImI2MjIiKSx1PW4oImM0MzAiKSxmPW4oIjNmOGMiKSxsPW4oImFlOTMiKSxkPWwuSXRlcmF0b3JQcm90b3R5cGUsdj1sLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlMsbT1wKCJpdGVyYXRvciIpLHk9ImtleXMiLGc9InZhbHVlcyIsdz0iZW50cmllcyIseD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scCxsLGIsayl7byhuLGUscCk7dmFyIFMsTyxDLE09ZnVuY3Rpb24odCl7aWYodD09PWwmJlIpcmV0dXJuIFI7aWYoIXYmJnQgaW4gRSlyZXR1cm4gRVt0XTtzd2l0Y2godCl7Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfTtjYXNlIGc6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9O2Nhc2UgdzpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMpfX0sVD1lKyIgSXRlcmF0b3IiLE49ITEsRT10LnByb3RvdHlwZSxBPUVbbV18fEVbIkBAaXRlcmF0b3IiXXx8bCYmRVtsXSxSPSF2JiZBfHxNKGwpLHo9IkFycmF5Ij09ZSYmRS5lbnRyaWVzfHxBO2lmKHomJihTPWkoei5jYWxsKG5ldyB0KSksZCE9PU9iamVjdC5wcm90b3R5cGUmJlMubmV4dCYmKHV8fGkoUyk9PT1kfHwocz9zKFMsZCk6ImZ1bmN0aW9uIiE9dHlwZW9mIFNbbV0mJmMoUyxtLHgpKSxhKFMsVCwhMCwhMCksdSYmKGZbVF09eCkpKSxsPT1nJiZBJiZBLm5hbWUhPT1nJiYoTj0hMCxSPWZ1bmN0aW9uKCl7cmV0dXJuIEEuY2FsbCh0aGlzKX0pLHUmJiFrfHxFW21dPT09Unx8YyhFLG0sUiksZltlXT1SLGwpaWYoTz17dmFsdWVzOk0oZyksa2V5czpiP1I6TSh5KSxlbnRyaWVzOk0odyl9LGspZm9yKEMgaW4gTykodnx8Tnx8IShDIGluIEUpKSYmaChFLEMsT1tDXSk7ZWxzZSByKHt0YXJnZXQ6ZSxwcm90bzohMCxmb3JjZWQ6dnx8Tn0sTyk7cmV0dXJuIE99fSwiN2YwNiI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijtmb3IodmFyIHI9ezg6IkJhY2tzcGFjZSIsOToiVGFiIiwxMDoiRW50ZXIiLDEyOiJOdW1Mb2NrIiwxMzoiRW50ZXIiLDE2OiJTaGlmdCIsMTc6IkNvbnRyb2wiLDE4OiJBbHQiLDIwOiJDYXBzTG9jayIsMjc6IkVzY2FwZSIsMzI6IiAiLDMzOiJQYWdlVXAiLDM0OiJQYWdlRG93biIsMzU6IkVuZCIsMzY6IkhvbWUiLDM3OiJBcnJvd0xlZnQiLDM4OiJBcnJvd1VwIiwzOToiQXJyb3dSaWdodCIsNDA6IkFycm93RG93biIsNDQ6IlByaW50U2NyZWVuIiw0NToiSW5zZXJ0Iiw0NjoiRGVsZXRlIiw1OToiOyIsNjE6Ij0iLDkxOiJNZXRhIiw5MjoiTWV0YSIsMTA2OiIqIiwxMDc6IisiLDEwODoiLCIsMTA5OiItIiwxMTA6Ii4iLDExMToiLyIsMTQ0OiJOdW1Mb2NrIiwxNDU6IlNjcm9sbExvY2siLDE2MDoiU2hpZnQiLDE2MToiU2hpZnQiLDE2MjoiQ29udHJvbCIsMTYzOiJDb250cm9sIiwxNjQ6IkFsdCIsMTY1OiJBbHQiLDE3MzoiLSIsMTg2OiI7IiwxODc6Ij0iLDE4ODoiLCIsMTg5OiItIiwxOTA6Ii4iLDE5MToiLyIsMTkyOiJgIiwyMTk6IlsiLDIyMDoiXFwiLDIyMToiXSIsMjIyOiInIiwyMjk6InEifSxvPXIsaT17NDg6IikiLDQ5OiIhIiw1MDoiQCIsNTE6IiMiLDUyOiIkIiw1MzoiJSIsNTQ6Il4iLDU1OiImIiw1NjoiKiIsNTc6IigiLDU5OiI7Iiw2MToiKyIsMTczOiJfIiwxODY6IjoiLDE4NzoiKyIsMTg4OiI8IiwxODk6Il8iLDE5MDoiPiIsMTkxOiI/IiwxOTI6In4iLDIxOToieyIsMjIwOiJ8IiwyMjE6In0iLDIyMjonIicsMjI5OiJRIn0scz0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmL0Nocm9tZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCksYT0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpLGM9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9HZWNrb1wvXGQrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGg9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxwPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvTVNJRSBcZHxUcmlkZW50XC8oPzpbNy05XXxcZHsyLH0pXC4uKnJ2OihcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLHU9cyYmKGh8fCtzWzFdPDU3KXx8YyYmaCxmPTA7ZjwxMDtmKyspcls0OCtmXT1yWzk2K2ZdPVN0cmluZyhmKTtmb3IoZj0xO2Y8PTI0O2YrKylyW2YrMTExXT0iRiIrZjtmb3IoZj02NTtmPD05MDtmKyspcltmXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGYrMzIpLGlbZl09U3RyaW5nLmZyb21DaGFyQ29kZShmKTtmb3IodmFyIGwgaW4gcilpLmhhc093blByb3BlcnR5KGwpfHwoaVtsXT1yW2xdKTt2YXIgZD1mdW5jdGlvbih0KXt2YXIgZT11JiYodC5jdHJsS2V5fHx0LmFsdEtleXx8dC5tZXRhS2V5KXx8KGF8fHApJiZ0LnNoaWZ0S2V5JiZ0LmtleSYmMT09dC5rZXkubGVuZ3RoLG49IWUmJnQua2V5fHwodC5zaGlmdEtleT9pOnIpW3Qua2V5Q29kZV18fHQua2V5fHwiVW5pZGVudGlmaWVkIjtyZXR1cm4iRXNjIj09biYmKG49IkVzY2FwZSIpLCJEZWwiPT1uJiYobj0iRGVsZXRlIiksIkxlZnQiPT1uJiYobj0iQXJyb3dMZWZ0IiksIlVwIj09biYmKG49IkFycm93VXAiKSwiUmlnaHQiPT1uJiYobj0iQXJyb3dSaWdodCIpLCJEb3duIj09biYmKG49IkFycm93RG93biIpLG59LHY9bigiNTMxMyIpO24uZChlLCJhIiwoZnVuY3Rpb24oKXtyZXR1cm4gYn0pKSxuLmQoZSwiYiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh9KSk7dmFyIG09InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtmdW5jdGlvbiB5KHQpe3ZhciBlLG4scixvLGk9dC5zcGxpdCgvLSg/ISQpLykscz1pW2kubGVuZ3RoLTFdOyJTcGFjZSI9PXMmJihzPSIgIik7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aC0xO2ErKyl7dmFyIGM9aVthXTtpZigvXihjbWR8bWV0YXxtKSQvaS50ZXN0KGMpKW89ITA7ZWxzZSBpZigvXmEobHQpPyQvaS50ZXN0KGMpKWU9ITA7ZWxzZSBpZigvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChjKSluPSEwO2Vsc2UgaWYoL15zKGhpZnQpPyQvaS50ZXN0KGMpKXI9ITA7ZWxzZXtpZighL15tb2QkL2kudGVzdChjKSl0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiAiK2MpO20/bz0hMDpuPSEwfX1yZXR1cm4gZSYmKHM9IkFsdC0iK3MpLG4mJihzPSJDdHJsLSIrcyksbyYmKHM9Ik1ldGEtIitzKSxyJiYocz0iU2hpZnQtIitzKSxzfWZ1bmN0aW9uIGcodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCllW3kobildPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gdyh0LGUsbil7cmV0dXJuIGUuYWx0S2V5JiYodD0iQWx0LSIrdCksZS5jdHJsS2V5JiYodD0iQ3RybC0iK3QpLGUubWV0YUtleSYmKHQ9Ik1ldGEtIit0KSwhMSE9PW4mJmUuc2hpZnRLZXkmJih0PSJTaGlmdC0iK3QpLHR9ZnVuY3Rpb24geCh0KXtyZXR1cm4gbmV3IHZbImMiXSh7cHJvcHM6e2hhbmRsZUtleURvd246Yih0KX19KX1mdW5jdGlvbiBiKHQpe3ZhciBlPWcodCk7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIHIsaT1kKG4pLHM9MT09aS5sZW5ndGgmJiIgIiE9aSxhPWVbdyhpLG4sIXMpXTtpZihhJiZhKHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMDtpZihzJiYobi5zaGlmdEtleXx8bi5hbHRLZXl8fG4ubWV0YUtleSkmJihyPW9bbi5rZXlDb2RlXSkmJnIhPWkpe3ZhciBjPWVbdyhyLG4sITApXTtpZihjJiZjKHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMH1lbHNlIGlmKHMmJm4uc2hpZnRLZXkpe3ZhciBoPWVbdyhpLG4sITApXTtpZihoJiZoKHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMH1yZXR1cm4hMX19fSwiN2Y5YSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImRhODQiKSxvPW4oIjg5MjUiKSxpPXIuV2Vha01hcDt0LmV4cG9ydHM9ImZ1bmN0aW9uIj09PXR5cGVvZiBpJiYvbmF0aXZlIGNvZGUvLnRlc3QobyhpKSl9LCI4MjVhIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODYxZCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighcih0KSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKHQpKyIgaXMgbm90IGFuIG9iamVjdCIpO3JldHVybiB0fX0sIjgzYWIiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDM5Iik7dC5leHBvcnRzPSFyKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sMSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSlbMV19KSl9LDg0MTg6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCJjMDRlIiksbz1uKCI5YmYyIiksaT1uKCI1YzZjIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcz1yKGUpO3MgaW4gdD9vLmYodCxzLGkoMCxuKSk6dFtzXT1ufX0sIjg2MWQiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJvYmplY3QiPT09dHlwZW9mIHQ/bnVsbCE9PXQ6ImZ1bmN0aW9uIj09PXR5cGVvZiB0fX0sODg3NTpmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpOyhmdW5jdGlvbihuLHMpe289W10scj1zLGk9ImZ1bmN0aW9uIj09PXR5cGVvZiByP3IuYXBwbHkoZSxvKTpyLHZvaWQgMD09PWl8fCh0LmV4cG9ydHM9aSl9KSgidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmJiZzZWxmLChmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtpZihkb2N1bWVudC5jdXJyZW50U2NyaXB0KXJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0O3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2godSl7dmFyIHQsZSxuLHI9Ly4qYXQgW14oXSpcKCguKik6KC4rKTooLispXCkkL2dpLG89L0AoW15AXSopOihcZCspOihcZCspXHMqJC9naSxpPXIuZXhlYyh1LnN0YWNrKXx8by5leGVjKHUuc3RhY2spLHM9aSYmaVsxXXx8ITEsYT1pJiZpWzJdfHwhMSxjPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYucmVwbGFjZShkb2N1bWVudC5sb2NhdGlvbi5oYXNoLCIiKSxoPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKTtzPT09YyYmKHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTCxlPW5ldyBSZWdFeHAoIig/OlteXFxuXSs/XFxuKXswLCIrKGEtMikrIn1bXjxdKjxzY3JpcHQ+KFtcXGRcXERdKj8pPFxcL3NjcmlwdD5bXFxkXFxEXSoiLCJpIiksbj10LnJlcGxhY2UoZSwiJDEiKS50cmltKCkpO2Zvcih2YXIgcD0wO3A8aC5sZW5ndGg7cCsrKXtpZigiaW50ZXJhY3RpdmUiPT09aFtwXS5yZWFkeVN0YXRlKXJldHVybiBoW3BdO2lmKGhbcF0uc3JjPT09cylyZXR1cm4gaFtwXTtpZihzPT09YyYmaFtwXS5pbm5lckhUTUwmJmhbcF0uaW5uZXJIVE1MLnRyaW0oKT09PW4pcmV0dXJuIGhbcF19cmV0dXJuIG51bGx9fXJldHVybiB0fSkpfSw4OTI1OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjNmNkIiksbz1GdW5jdGlvbi50b1N0cmluZzsiZnVuY3Rpb24iIT10eXBlb2Ygci5pbnNwZWN0U291cmNlJiYoci5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiBvLmNhbGwodCl9KSx0LmV4cG9ydHM9ci5pbnNwZWN0U291cmNlfSwiOGJiZiI6ZnVuY3Rpb24oZSxuKXtlLmV4cG9ydHM9dH0sIjkwZTMiOmZ1bmN0aW9uKHQsZSl7dmFyIG49MCxyPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJTeW1ib2woIitTdHJpbmcodm9pZCAwPT09dD8iIjp0KSsiKV8iKygrK24rcikudG9TdHJpbmcoMzYpfX0sOTExMjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiOWJmMiIpLGk9bigiNWM2YyIpO3QuZXhwb3J0cz1yP2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gby5mKHQsZSxpKDEsbikpfTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bix0fX0sIjkyY2YiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6aCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGhdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE3Ljc4NiAzLjc3YTEyLjU0MiAxMi41NDIgMCAwMC0xMi45NjUtLjg2NS4yNDkuMjQ5IDAgMDEtLjI5Mi0uMDQ1TDEuOTM3LjI2OUEuNTA3LjUwNyAwIDAwMS4zOTIuMTZhLjUuNSAwIDAwLS4zMDguNDYydjYuN2EuNS41IDAgMDAuNS41aDYuN2EuNS41IDAgMDAuMzU0LS44NTRMNi43ODMgNS4xMTVhLjI1My4yNTMgMCAwMS0uMDY4LS4yMjguMjQ5LjI0OSAwIDAxLjE1Mi0uMTgxIDEwIDEwIDAgMDE5LjQ2NiAxLjEgOS43NTkgOS43NTkgMCAwMS4wOTQgMTUuODA5IDEuMjUgMS4yNSAwIDAwMS40NzMgMi4wMTYgMTIuMTIyIDEyLjEyMiAwIDAwNS4wMTMtOS45NjEgMTIuMTI1IDEyLjEyNSAwIDAwLTUuMTI3LTkuOXoifX0pXSkpfX19LCI5NGNhIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpLG89LyN8XC5wcm90b3R5cGVcLi8saT1mdW5jdGlvbih0LGUpe3ZhciBuPWFbcyh0KV07cmV0dXJuIG49PWh8fG4hPWMmJigiZnVuY3Rpb24iPT10eXBlb2YgZT9yKGUpOiEhZSl9LHM9aS5ub3JtYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIFN0cmluZyh0KS5yZXBsYWNlKG8sIi4iKS50b0xvd2VyQ2FzZSgpfSxhPWkuZGF0YT17fSxjPWkuTkFUSVZFPSJOIixoPWkuUE9MWUZJTEw9IlAiO3QuZXhwb3J0cz1pfSwiOWJkZCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgyNWEiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBvP2UocihuKVswXSxuWzFdKTplKG4pfWNhdGNoKHMpe3ZhciBpPXRbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PWkmJnIoaS5jYWxsKHQpKSxzfX19LCI5YmYyIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiMGNmYiIpLGk9bigiODI1YSIpLHM9bigiYzA0ZSIpLGE9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZj1yP2E6ZnVuY3Rpb24odCxlLG4pe2lmKGkodCksZT1zKGUsITApLGkobiksbyl0cnl7cmV0dXJuIGEodCxlLG4pfWNhdGNoKHIpe31pZigiZ2V0ImluIG58fCJzZXQiaW4gbil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIik7cmV0dXJuInZhbHVlImluIG4mJih0W2VdPW4udmFsdWUpLHR9fSwiOWVkMyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCJhZTkzIikuSXRlcmF0b3JQcm90b3R5cGUsbz1uKCI3YzczIiksaT1uKCI1YzZjIikscz1uKCJkNDRlIiksYT1uKCIzZjhjIiksYz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciBoPWUrIiBJdGVyYXRvciI7cmV0dXJuIHQucHJvdG90eXBlPW8ocix7bmV4dDppKDEsbil9KSxzKHQsaCwhMSwhMCksYVtoXT1jLHR9fSwiOWY2MSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigiY2lyY2xlIix7YXR0cnM6e2N4OiI5Ljc1IixjeToiNi4yNDciLHI6IjIuMjUifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTE2LjkxNiA4LjcxQTEuMDI3IDEuMDI3IDAgMDAxNiA4LjE1OGExLjAwNyAxLjAwNyAwIDAwLS44OTIuNTg2bC0xLjU1OCAzLjQzNGEuMjQ5LjI0OSAwIDAxLS40MjIuMDUzbC0uODItMS4wMjRhMSAxIDAgMDAtLjgxMy0uMzc2IDEuMDA3IDEuMDA3IDAgMDAtLjc4Ny40MjZMNy41OSAxNS43MWEuNS41IDAgMDAuNDEuNzloMTJhLjUuNSAwIDAwLjQyNS0uMjM3LjUuNSAwIDAwLjAyMi0uNDg2eiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjIgMEg1LjVhMiAyIDAgMDAtMiAydjE2LjVhMiAyIDAgMDAyIDJIMjJhMiAyIDAgMDAyLTJWMmEyIDIgMCAwMC0yLTJ6bS0uMTQ1IDE4LjM1NGEuNS41IDAgMDEtLjM1NC4xNDZINmEuNS41IDAgMDEtLjUtLjVWMi41QS41LjUgMCAwMTYgMmgxNS41YS41LjUgMCAwMS41LjVWMThhLjUuNSAwIDAxLS4xNDUuMzUxeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMTkuNSAyMmgtMTdhLjUuNSAwIDAxLS41LS41di0xN2ExIDEgMCAwMC0yIDBWMjJhMiAyIDAgMDAyIDJoMTcuNWExIDEgMCAwMDAtMnoifX0pXSkpfX19LGE0ZDM6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIyM2U3Iiksbz1uKCJkYTg0IiksaT1uKCJkMDY2Iikscz1uKCJjNDMwIiksYT1uKCI4M2FiIiksYz1uKCI0OTMwIiksaD1uKCJmZGJmIikscD1uKCJkMDM5IiksdT1uKCI1MTM1IiksZj1uKCJlOGI1IiksbD1uKCI4NjFkIiksZD1uKCI4MjVhIiksdj1uKCI3YjBiIiksbT1uKCJmYzZhIikseT1uKCJjMDRlIiksZz1uKCI1YzZjIiksdz1uKCI3YzczIikseD1uKCJkZjc1IiksYj1uKCIyNDFjIiksaz1uKCIwNTdmIiksUz1uKCI3NDE4IiksTz1uKCIwNmNmIiksQz1uKCI5YmYyIiksTT1uKCJkMWU3IiksVD1uKCI5MTEyIiksTj1uKCI2ZWViIiksRT1uKCI1NjkyIiksQT1uKCJmNzcyIiksUj1uKCJkMDEyIiksej1uKCI5MGUzIiksRD1uKCJiNjIyIiksST1uKCJlNTM4IiksUD1uKCI3NDZmIiksQj1uKCJkNDRlIiksRj1uKCI2OWYzIiksaj1uKCJiNzI3IikuZm9yRWFjaCxfPUEoImhpZGRlbiIpLCQ9IlN5bWJvbCIsSj0icHJvdG90eXBlIixMPUQoInRvUHJpbWl0aXZlIiksVj1GLnNldCxxPUYuZ2V0dGVyRm9yKCQpLFc9T2JqZWN0W0pdLEg9by5TeW1ib2wsSz1pKCJKU09OIiwic3RyaW5naWZ5IiksVT1PLmYsRz1DLmYsWD1rLmYsWT1NLmYsWj1FKCJzeW1ib2xzIiksUT1FKCJvcC1zeW1ib2xzIiksdHQ9RSgic3RyaW5nLXRvLXN5bWJvbC1yZWdpc3RyeSIpLGV0PUUoInN5bWJvbC10by1zdHJpbmctcmVnaXN0cnkiKSxudD1FKCJ3a3MiKSxydD1vLlFPYmplY3Qsb3Q9IXJ0fHwhcnRbSl18fCFydFtKXS5maW5kQ2hpbGQsaXQ9YSYmcCgoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dyhHKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEcodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSkpP2Z1bmN0aW9uKHQsZSxuKXt2YXIgcj1VKFcsZSk7ciYmZGVsZXRlIFdbZV0sRyh0LGUsbiksciYmdCE9PVcmJkcoVyxlLHIpfTpHLHN0PWZ1bmN0aW9uKHQsZSl7dmFyIG49Wlt0XT13KEhbSl0pO3JldHVybiBWKG4se3R5cGU6JCx0YWc6dCxkZXNjcmlwdGlvbjplfSksYXx8KG4uZGVzY3JpcHRpb249ZSksbn0sYXQ9aD9mdW5jdGlvbih0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QodClpbnN0YW5jZW9mIEh9LGN0PWZ1bmN0aW9uKHQsZSxuKXt0PT09VyYmY3QoUSxlLG4pLGQodCk7dmFyIHI9eShlLCEwKTtyZXR1cm4gZChuKSx1KFoscik/KG4uZW51bWVyYWJsZT8odSh0LF8pJiZ0W19dW3JdJiYodFtfXVtyXT0hMSksbj13KG4se2VudW1lcmFibGU6ZygwLCExKX0pKToodSh0LF8pfHxHKHQsXyxnKDEse30pKSx0W19dW3JdPSEwKSxpdCh0LHIsbikpOkcodCxyLG4pfSxodD1mdW5jdGlvbih0LGUpe2QodCk7dmFyIG49bShlKSxyPXgobikuY29uY2F0KGR0KG4pKTtyZXR1cm4gaihyLChmdW5jdGlvbihlKXthJiYhdXQuY2FsbChuLGUpfHxjdCh0LGUsbltlXSl9KSksdH0scHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT93KHQpOmh0KHcodCksZSl9LHV0PWZ1bmN0aW9uKHQpe3ZhciBlPXkodCwhMCksbj1ZLmNhbGwodGhpcyxlKTtyZXR1cm4hKHRoaXM9PT1XJiZ1KFosZSkmJiF1KFEsZSkpJiYoIShufHwhdSh0aGlzLGUpfHwhdShaLGUpfHx1KHRoaXMsXykmJnRoaXNbX11bZV0pfHxuKX0sZnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHQpLHI9eShlLCEwKTtpZihuIT09V3x8IXUoWixyKXx8dShRLHIpKXt2YXIgbz1VKG4scik7cmV0dXJuIW98fCF1KFoscil8fHUobixfKSYmbltfXVtyXXx8KG8uZW51bWVyYWJsZT0hMCksb319LGx0PWZ1bmN0aW9uKHQpe3ZhciBlPVgobSh0KSksbj1bXTtyZXR1cm4gaihlLChmdW5jdGlvbih0KXt1KFosdCl8fHUoUix0KXx8bi5wdXNoKHQpfSkpLG59LGR0PWZ1bmN0aW9uKHQpe3ZhciBlPXQ9PT1XLG49WChlP1E6bSh0KSkscj1bXTtyZXR1cm4gaihuLChmdW5jdGlvbih0KXshdShaLHQpfHxlJiYhdShXLHQpfHxyLnB1c2goWlt0XSl9KSkscn07aWYoY3x8KEg9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgSCl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3ZhciB0PWFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9TdHJpbmcoYXJndW1lbnRzWzBdKTp2b2lkIDAsZT16KHQpLG49ZnVuY3Rpb24odCl7dGhpcz09PVcmJm4uY2FsbChRLHQpLHUodGhpcyxfKSYmdSh0aGlzW19dLGUpJiYodGhpc1tfXVtlXT0hMSksaXQodGhpcyxlLGcoMSx0KSl9O3JldHVybiBhJiZvdCYmaXQoVyxlLHtjb25maWd1cmFibGU6ITAsc2V0Om59KSxzdChlLHQpfSxOKEhbSl0sInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gcSh0aGlzKS50YWd9KSksTihILCJ3aXRob3V0U2V0dGVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHN0KHoodCksdCl9KSksTS5mPXV0LEMuZj1jdCxPLmY9ZnQsYi5mPWsuZj1sdCxTLmY9ZHQsSS5mPWZ1bmN0aW9uKHQpe3JldHVybiBzdChEKHQpLHQpfSxhJiYoRyhIW0pdLCJkZXNjcmlwdGlvbiIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcSh0aGlzKS5kZXNjcmlwdGlvbn19KSxzfHxOKFcsInByb3BlcnR5SXNFbnVtZXJhYmxlIix1dCx7dW5zYWZlOiEwfSkpKSxyKHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6IWMsc2hhbTohY30se1N5bWJvbDpIfSksaih4KG50KSwoZnVuY3Rpb24odCl7UCh0KX0pKSxyKHt0YXJnZXQ6JCxzdGF0OiEwLGZvcmNlZDohY30se2ZvcjpmdW5jdGlvbih0KXt2YXIgZT1TdHJpbmcodCk7aWYodSh0dCxlKSlyZXR1cm4gdHRbZV07dmFyIG49SChlKTtyZXR1cm4gdHRbZV09bixldFtuXT1lLG59LGtleUZvcjpmdW5jdGlvbih0KXtpZighYXQodCkpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYSBzeW1ib2wiKTtpZih1KGV0LHQpKXJldHVybiBldFt0XX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7b3Q9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe290PSExfX0pLHIoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDohYyxzaGFtOiFhfSx7Y3JlYXRlOnB0LGRlZmluZVByb3BlcnR5OmN0LGRlZmluZVByb3BlcnRpZXM6aHQsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ0fSkscih7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOiFjfSx7Z2V0T3duUHJvcGVydHlOYW1lczpsdCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZHR9KSxyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMCxmb3JjZWQ6cCgoZnVuY3Rpb24oKXtTLmYoMSl9KSl9LHtnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZnVuY3Rpb24odCl7cmV0dXJuIFMuZih2KHQpKX19KSxLKXt2YXIgdnQ9IWN8fHAoKGZ1bmN0aW9uKCl7dmFyIHQ9SCgpO3JldHVybiJbbnVsbF0iIT1LKFt0XSl8fCJ7fSIhPUsoe2E6dH0pfHwie30iIT1LKE9iamVjdCh0KSl9KSk7cih7dGFyZ2V0OiJKU09OIixzdGF0OiEwLGZvcmNlZDp2dH0se3N0cmluZ2lmeTpmdW5jdGlvbih0LGUsbil7dmFyIHIsbz1bdF0saT0xO3doaWxlKGFyZ3VtZW50cy5sZW5ndGg+aSlvLnB1c2goYXJndW1lbnRzW2krK10pO2lmKHI9ZSwobChlKXx8dm9pZCAwIT09dCkmJiFhdCh0KSlyZXR1cm4gZihlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgciYmKGU9ci5jYWxsKHRoaXMsdCxlKSksIWF0KGUpKXJldHVybiBlfSksb1sxXT1lLEsuYXBwbHkobnVsbCxvKX19KX1IW0pdW0xdfHxUKEhbSl0sTCxIW0pdLnZhbHVlT2YpLEIoSCwkKSxSW19dPSEwfSxhNjMwOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIyM2U3Iiksbz1uKCI0ZGY0IiksaT1uKCIxYzdlIikscz0haSgoZnVuY3Rpb24odCl7QXJyYXkuZnJvbSh0KX0pKTtyKHt0YXJnZXQ6IkFycmF5IixzdGF0OiEwLGZvcmNlZDpzfSx7ZnJvbTpvfSl9LGE2OTE6ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSxhNzA3OmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6aCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGhdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIwLjQ4NSAzLjUxMUExMi4wMSAxMi4wMSAwIDEwMjQgMTJhMTIuMDA5IDEyLjAwOSAwIDAwLTMuNTE1LTguNDg5em0tMS43NjcgMTUuMjFBOS41MSA5LjUxIDAgMTEyMS41IDEyYTkuNTA4IDkuNTA4IDAgMDEtMi43ODIgNi43MjF6In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNi45ODcgNy4wMWExLjI3NSAxLjI3NSAwIDAwLTEuOCAwbC0zLjE3NyAzLjE3N0w4LjgyOSA3LjAxYTEuMjc3IDEuMjc3IDAgMDAtMS44MDUgMS44MDZsMy4xNzYgMy4xNzctMy4xNzYgMy4xNzhhMS4yNzcgMS4yNzcgMCAwMDEuODA1IDEuODA2bDMuMTc2LTMuMTc3IDMuMTc3IDMuMTc4YTEuMjc3IDEuMjc3IDAgMDAxLjgtMS44MDZsLTMuMTc2LTMuMTc4IDMuMTc2LTMuMTc3YTEuMjc4IDEuMjc4IDAgMDAuMDA1LTEuODA3eiJ9fSldKSl9fX0sYTcwZDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCA0NzQuNTU3IDQ3NC41NTciLHdpZHRoOiIyNCIsaGVpZ2h0OiIyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0wIDIuMDI4VjQ3Mi41M2g0NzQuNTU3VjIuMDI4SDB6bTQzNS40NzEgNDMxLjQzN0gzOS4xMDhWNDEuMTM2aDM5Ni4zNjN2MzkyLjMyOXoifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTEyNC45MTYgMjczLjYyNWMxLjI5NCA0LjUzIDIuMDA2IDE0LjQwOSAyLjAwNiAyOS41NzQgMCAxMy4wMDcuNjY5IDIyLjU2MyAyLjA3MSAyOC42MjQgMS40MDIgNi4wMTggNC4xNDIgMTEuMTc0IDguMjQgMTUuMjcyIDQuMDc3IDQuMDk4IDkuMDgxIDcuMDc1IDE1LjAxMyA4Ljg2NiA1Ljk1NCAxLjc2OSAxNC40OTYgMi42NTMgMjUuNjA1IDIuNjUzaDYuNTc5di0yOS42NmMtOC44NjYgMC0xNC42MjUtLjU2MS0xNy4zLTEuNjgyLTIuNjUzLTEuMTQzLTQuNjM4LTIuNzE4LTUuOTU0LTQuODk3LTEuMjk0LTIuMTU3LTEuOTQxLTUuOTEtMS45NDEtMTEuMzI1IDAtMy44NC0uMzQ1LTEyLjU3Ni0uOTkyLTI2LjI5NS0uNDk2LTguOTczLTEuNTc1LTE2LjEzNS0zLjIzNi0yMS40ODQtMS42MzktNS4zOTMtNC4wMTItOS45NDQtNy4xMTgtMTMuNjk3LTMuMDg1LTMuNzc1LTcuMDU0LTcuMDMyLTExLjkwNy05LjgxNSA1LjUwMS0zLjU4MSA5LjU3Ny02Ljk2NyAxMi4yNzQtMTAuMzExIDIuNjc1LTMuMjU3IDQuODc1LTcuNDQyIDYuNjAxLTEyLjUxMSAxLjcwNC01LjA2OSAyLjc4My0xMS42OTEgMy4yMTQtMTkuODQ1LjczMy0xNC40NTIgMS4xNDMtMjQuMjg5IDEuMTQzLTI5LjQ4NyAwLTUuMDkxLjYyNi04LjcxNSAxLjg1NS0xMC44MDcgMS4yNTEtMi4wNzEgMy4xNDktMy42NDUgNS43MzgtNC43MDIgMi41ODgtMS4wMTQgOC40NzctMS41MzIgMTcuNjIzLTEuNTMydi0yOS41MDloLTYuNTc5Yy0xMC44MDcgMC0xOC43MjMuNzU1LTIzLjcyOCAyLjI0My03LjQyIDIuMjIyLTEzLjA3MiA1LjI0Mi0xNi45NzYgOS4wNi0zLjg4MyAzLjg0LTYuNTU4IDguOTA5LTguMDQ2IDE1LjIyOS0xLjQ2NyA2LjI3Ny0yLjE3OSAxNy40MjktMi4xNzkgMzMuMzQ4IDAgOS44NTgtLjM2NyAxNi42NzQtMS4wMzUgMjAuNjQzLS44MiA1LjI2My0yLjM1MSA5LjY0Mi00LjU1MSAxMy4xNTgtMi4yNDMgMy41MTYtNC44MzIgNS45OTctNy45MTYgNy40ODUtMy4wMiAxLjQ0NS03LjUyOCAyLjM3My0xMy41NjggMi43Mzl2MjkuNjgxYzcuNTkzLjM4OCAxMy4yMDEgMi4wMjggMTYuODkgNC44OTcgMy42NDUgMi44MDYgNi4zODQgNy40ODcgOC4xNzQgMTQuMDg3ek0yMTIuMDg0IDMzMS4zOTJsNi43MyAxNC4zNjZjNy40Mi0yLjY1MyAxMy41NjgtNi4zMiAxOC40LTEwLjkxNSA0LjgzMi00LjU5NSA4LjA4OS05LjgxNSA5LjgxNS0xNS42MTcgMS43NDctNS44NDYgMi42MS0xMy44MDUgMi42MS0yMy44MTR2LTI0Ljc4NWgtMzQuNzUxdjM0LjcyOWgxNi43NjFjLS4xMjkgNi44MzgtMS43MjYgMTIuMjk1LTQuNjU5IDE2LjQ4LTIuOTU2IDQuMDM0LTcuOTM5IDcuMjY5LTE0LjkwNiA5LjU1NnpNMjE0Ljg4OCAxNzQuMDEyaDM0Ljc1MXYzNC43NzJoLTM0Ljc1MXpNMzExLjE4IDM1Ni4zNDljNy40NjQtMi4yNDMgMTMuMjAxLTUuMjIgMTcuMTA2LTkuMDgxIDMuODgzLTMuODE4IDYuNTM2LTguOTMgNy45MzgtMTUuMjcyIDEuNDAyLTYuMzYzIDIuMTc5LTE3LjUxNSAyLjE3OS0zMy40OTkgMC05Ljc1LjM2Ny0xNi42MDkgMS4wMTQtMjAuNTU3Ljg4NC01LjI2MyAyLjQzOC05LjY0MiA0LjY1OS0xMy4xMzcgMi4xNzktMy40OTQgNC43NjctNi4wMTggNy44MDktNy40ODUgMy4wNDItMS40NjcgNy41NS0yLjM3MyAxMy41NjgtMi42OTZoLS4wNDN2LTI5LjY2Yy03LjYxNS0uNDUzLTEzLjE4LTIuMDcxLTE2LjkzMy00LjkxOC0zLjY2Ny0yLjgyNi02LjQwNy03LjU3MS04LjI2Mi0xNC4xMDctMS4yNTEtNC42MTYtMS44NTUtMTQuNDUyLTEuODU1LTI5LjUwOSAwLTEzLjAyOS0uNzEyLTIyLjU0MS0yLjE1Ny0yOC41Ni0xLjQyNC02LjEwNS00LjE2My0xMS4xOTUtOC4xOTctMTUuMzU4LTQuMDU1LTQuMTQyLTkuMDM4LTcuMDU0LTE0Ljk3LTguODAxLTUuOTc1LTEuNzI2LTE0LjUxNy0yLjYxLTI1LjYyNi0yLjYxaC02LjU1N3YyOS40NjZjOS4zNCAwIDE1LjMzNy41NjEgMTcuOTkgMS42ODMgMi42OTYgMS4xIDQuNTUxIDIuNjc1IDUuNTY1IDQuNzI0IDEuMDU3IDIuMDQ5IDEuNTUzIDYuMTY5IDEuNjM5IDEyLjM2LjQ1MyAxOS42MDggMS4xODYgMzIuMjkxIDIuMDcxIDM4LjA3MiAxLjM4MSA4LjM2OSA0LjA1NSAxNS4yOTQgNy44NzMgMjAuNjg2IDIuODI2IDMuODQgNy4yNDggNy42NTggMTMuMzUyIDExLjYyNy00LjcwMiAyLjY5Ni04LjUyIDUuODQ2LTExLjU0IDkuNDQ4LTMuMDQxIDMuNTU5LTUuNDM2IDcuOTYtNy4yMDUgMTMuMDcyLTEuODEyIDUuMTc3LTIuOTU1IDEyLjA4LTMuMzIyIDIwLjYtLjY2OSAxNC4xNzItMS4xIDIzLjgxNC0xLjEgMjguODE5LS4wODYgNS4wMjYtLjY2OSA4LjU4NS0xLjk4NCAxMC42OTktMS4zMTYgMi4xMzYtMy4yNzkgMy43MS01Ljk3NSA0Ljg1My0yLjcxOCAxLjEyMi04LjUyIDEuNjM5LTE3LjM2NCAxLjYzOXYyOS42Nmg2LjYyMmMxMC43NDEuMDY0IDE4LjY3OS0uNzEyIDIzLjcwNS0yLjE1OHoifX0pXSkpfX19LGFjNGU6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMiAxOWEzIDMgMCAwMDMgM2gxNGEzIDMgMCAwMDMtM1Y1YTMgMyAwIDAwLTMtM0g1YTMgMyAwIDAwLTMgM3YxNHptLTIgMFY1YTUgNSAwIDAxNS01aDE0YTUgNSAwIDAxNSA1djE0YTUgNSAwIDAxLTUgNUg1YTUgNSAwIDAxLTUtNXptMTItOWExIDEgMCAwMTEgMXYyYTEgMSAwIDAxLTIgMHYtMmExIDEgMCAwMTEtMXptMCA2YTEgMSAwIDAxMSAxdjNhMSAxIDAgMDEtMiAwdi0zYTEgMSAwIDAxMS0xem0wLTEzYTEgMSAwIDAxMSAxdjNhMSAxIDAgMDEtMiAwVjRhMSAxIDAgMDExLTF6In19KV0pKX19fSxhZDZkOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiODI1YSIpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXIodGhpcyksZT0iIjtyZXR1cm4gdC5nbG9iYWwmJihlKz0iZyIpLHQuaWdub3JlQ2FzZSYmKGUrPSJpIiksdC5tdWx0aWxpbmUmJihlKz0ibSIpLHQuZG90QWxsJiYoZSs9InMiKSx0LnVuaWNvZGUmJihlKz0idSIpLHQuc3RpY2t5JiYoZSs9InkiKSxlfX0sYWQ2ZTpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMi42NDEgMjEuOTMxYTcuMDEgNy4wMSAwIDAwMS4xNDYgMS43NEE1IDUgMCAwMTcgMTlWNWE1IDUgMCAxMTEwIDB2Ny4yOWE2Ljk3MiA2Ljk3MiAwIDAwLTIgLjk2NVY1YTMgMyAwIDAwLTYgMHYxNGEzIDMgMCAwMDMuNjQxIDIuOTMxek0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0tMi41IDUuOTM4aDVhLjkzNy45MzcgMCAxMDAtMS44NzVoLTVhLjkzNy45MzcgMCAxMDAgMS44NzV6In19KV0pKX19fSxhZTQwOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4M2FiIiksbz1uKCJkMDM5IiksaT1uKCI1MTM1Iikscz1PYmplY3QuZGVmaW5lUHJvcGVydHksYT17fSxjPWZ1bmN0aW9uKHQpe3Rocm93IHR9O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKGkoYSx0KSlyZXR1cm4gYVt0XTtlfHwoZT17fSk7dmFyIG49W11bdF0saD0hIWkoZSwiQUNDRVNTT1JTIikmJmUuQUNDRVNTT1JTLHA9aShlLDApP2VbMF06Yyx1PWkoZSwxKT9lWzFdOnZvaWQgMDtyZXR1cm4gYVt0XT0hIW4mJiFvKChmdW5jdGlvbigpe2lmKGgmJiFyKXJldHVybiEwO3ZhciB0PXtsZW5ndGg6LTF9O2g/cyh0LDEse2VudW1lcmFibGU6ITAsZ2V0OmN9KTp0WzFdPTEsbi5jYWxsKHQscCx1KX0pKX19LGFlOTM6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixvLGkscz1uKCJlMTYzIiksYT1uKCI5MTEyIiksYz1uKCI1MTM1IiksaD1uKCJiNjIyIikscD1uKCJjNDMwIiksdT1oKCJpdGVyYXRvciIpLGY9ITEsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtbXS5rZXlzJiYoaT1bXS5rZXlzKCksIm5leHQiaW4gaT8obz1zKHMoaSkpLG8hPT1PYmplY3QucHJvdG90eXBlJiYocj1vKSk6Zj0hMCksdm9pZCAwPT1yJiYocj17fSkscHx8YyhyLHUpfHxhKHIsdSxsKSx0LmV4cG9ydHM9e0l0ZXJhdG9yUHJvdG90eXBlOnIsQlVHR1lfU0FGQVJJX0lURVJBVE9SUzpmfX0sYWVjMjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi41LjI0OEg3LjIyOGE2Ljk3NyA2Ljk3NyAwIDEwMCAxMy45NTRoMi4zMThhLjI1LjI1IDAgMDEuMjUuMjVWMjIuNWExLjI1IDEuMjUgMCAwMDIuNSAwVjNhLjI1LjI1IDAgMDEuMjUtLjI1aDMuNjgyYS4yNS4yNSAwIDAxLjI1LjI1djE5LjVhMS4yNSAxLjI1IDAgMDAyLjUgMFYzYS4yNDkuMjQ5IDAgMDEuMjUtLjI1SDIyLjVhMS4yNSAxLjI1IDAgMDAwLTIuNXpNOS44IDExLjQ1MmEuMjUuMjUgMCAwMS0uMjUuMjVINy4yMjhhNC40NzcgNC40NzcgMCAxMTAtOC45NTRoMi4zMThBLjI1LjI1IDAgMDE5LjggM3oifX0pXSkpfX19LGIwNDE6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIwMGVlIiksbz1uKCJmNWRmIik7dC5leHBvcnRzPXI/e30udG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCAiK28odGhpcykrIl0ifX0sYjBjMDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiOWJmMiIpLmYsaT1GdW5jdGlvbi5wcm90b3R5cGUscz1pLnRvU3RyaW5nLGE9L15ccypmdW5jdGlvbiAoW14gKF0qKS8sYz0ibmFtZSI7ciYmIShjIGluIGkpJiZvKGksYyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4gcy5jYWxsKHRoaXMpLm1hdGNoKGEpWzFdfWNhdGNoKHQpe3JldHVybiIifX19KX0sYjYyMjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiNTY5MiIpLGk9bigiNTEzNSIpLHM9bigiOTBlMyIpLGE9bigiNDkzMCIpLGM9bigiZmRiZiIpLGg9bygid2tzIikscD1yLlN5bWJvbCx1PWM/cDpwJiZwLndpdGhvdXRTZXR0ZXJ8fHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpKGgsdCl8fChhJiZpKHAsdCk/aFt0XT1wW3RdOmhbdF09dSgiU3ltYm9sLiIrdCkpLGhbdF19fSxiNzI3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIwMzY2Iiksbz1uKCI0NGFkIiksaT1uKCI3YjBiIikscz1uKCI1MGM0IiksYT1uKCI2NWYwIiksYz1bXS5wdXNoLGg9ZnVuY3Rpb24odCl7dmFyIGU9MT09dCxuPTI9PXQsaD0zPT10LHA9ND09dCx1PTY9PXQsZj01PT10fHx1O3JldHVybiBmdW5jdGlvbihsLGQsdixtKXtmb3IodmFyIHksZyx3PWkobCkseD1vKHcpLGI9cihkLHYsMyksaz1zKHgubGVuZ3RoKSxTPTAsTz1tfHxhLEM9ZT9PKGwsayk6bj9PKGwsMCk6dm9pZCAwO2s+UztTKyspaWYoKGZ8fFMgaW4geCkmJih5PXhbU10sZz1iKHksUyx3KSx0KSlpZihlKUNbU109ZztlbHNlIGlmKGcpc3dpdGNoKHQpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIHk7Y2FzZSA2OnJldHVybiBTO2Nhc2UgMjpjLmNhbGwoQyx5KX1lbHNlIGlmKHApcmV0dXJuITE7cmV0dXJuIHU/LTE6aHx8cD9wOkN9fTt0LmV4cG9ydHM9e2ZvckVhY2g6aCgwKSxtYXA6aCgxKSxmaWx0ZXI6aCgyKSxzb21lOmgoMyksZXZlcnk6aCg0KSxmaW5kOmgoNSksZmluZEluZGV4OmgoNil9fSxiYmM3OmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5yKGUpO3ZhciByPW4oIjEzYWQiKTtmdW5jdGlvbiBvKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBpPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKGkhPXMpe2lmKCFpLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoaS5pc1RleHQmJmkudGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtpLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKGkuY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9byhpLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1pLm5vZGVTaXplfWVsc2Ugbis9aS5ub2RlU2l6ZX19ZnVuY3Rpb24gaSh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LHM9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PXMpcmV0dXJuIG89PXM/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLXMpLGg9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgZj1pKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoZilyZXR1cm4gZn1uLT1oLHItPWh9ZWxzZSBuLT1oLHItPWh9fXZhciBzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LGE9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O3MucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciBoPXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtaCksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1oKSxuLHIraCl9cz1jfX0scy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LHMucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30scy5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBzKHIsdGhpcy5zaXplK3Quc2l6ZSl9LHMucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBhPXRoaXMuY29udGVudFtvXSxjPWkrYS5ub2RlU2l6ZTtjPnQmJigoaTx0fHxjPmUpJiYoYT1hLmlzVGV4dD9hLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxlLWkpKTphLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2goYSkscis9YS5ub2RlU2l6ZSksaT1jfXJldHVybiBuZXcgcyhuLHIpfSxzLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/cy5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IHModGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxzLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgcyhyLG8pfSxzLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LGEuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0sYS5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0sYS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxzLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0scy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSxzLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LHMucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbyh0aGlzLHQsZSl9LHMucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLGkodGhpcyx0LGUsbil9LHMucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiBoKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBoKHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP2gobisxLGkpOmgobixyKTtyPWl9fSxzLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LHMucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcy5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHMoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0scy5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBzLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgcyhlfHx0LG4pfSxzLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHMuZW1wdHk7aWYodCBpbnN0YW5jZW9mIHMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IHMoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKTt2YXIgYz17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gaCh0LGUpe3JldHVybiBjLmluZGV4PXQsYy5vZmZzZXQ9ZSxjfWZ1bmN0aW9uIHAodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXAodFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IXAodFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9cy5lbXB0eT1uZXcgcyhbXSwwKTt2YXIgdT1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24gZih0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWYucHJvdG90eXBlLGV9dS5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LHUucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSx1LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LHUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmcCh0aGlzLmF0dHJzLHQuYXR0cnMpfSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sdS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sdS5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LHUuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIHUubm9uZTtpZih0IGluc3RhbmNlb2YgdSlyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LHUubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxkPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB2KHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxoPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihoIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh2KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBtKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9bShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiB5KHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gZyh0LGUsbiwwKX1mdW5jdGlvbiBnKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz1nKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1NKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIFMoaSxPKHQsYyxoLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBTKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBTKGksQyh0LGUscikpfWZ1bmN0aW9uIHcodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIHgodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gdyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBiKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gayh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihiKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspYihvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmYihlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gUyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZ4KHQsZSxvKzEpLGE9ci5kZXB0aD5vJiZ4KG4scixvKzEpLGM9W107cmV0dXJuIGsobnVsbCx0LG8sYyksaSYmYSYmZS5pbmRleChvKT09bi5pbmRleChvKT8odyhpLGEpLGIoUyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmIoUyhpLEModCxlLG8rMSkpLGMpLGsoZSxuLG8sYyksYSYmYihTKGEsQyhuLHIsbysxKSksYykpLGsocixudWxsLG8sYyksbmV3IHMoYyl9ZnVuY3Rpb24gQyh0LGUsbil7dmFyIHI9W107aWYoayhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPXgodCxlLG4rMSk7YihTKG8sQyh0LGUsbisxKSkscil9cmV0dXJuIGsoZSxudWxsLG4sciksbmV3IHMocil9ZnVuY3Rpb24gTSh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShzLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19ZC5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGwucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49bSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgbChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGwodih0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGwucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sbC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBsLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgbChzLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxsLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBsKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobC5wcm90b3R5cGUsZCksbC5lbXB0eT1uZXcgbChzLmVtcHR5LDAsMCk7dmFyIFQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sTj17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtULnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LE4ucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LE4uZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LFQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sVC5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxULnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxULnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxULnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxULnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sVC5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxOLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxOLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxOLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxULnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiB1Lm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sVC5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxULnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSxULnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyB6KHRoaXMsdCxuKX0sVC5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxULnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LFQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LFQucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IFQoZSxuLG8pfSxULnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEUubGVuZ3RoO24rKyl7dmFyIHI9RVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89RVtBXT1ULnJlc29sdmUodCxlKTtyZXR1cm4gQT0oQSsxKSVSLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFQucHJvdG90eXBlLE4pO3ZhciBFPVtdLEE9MCxSPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sRD17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtELnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxELmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sRC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sRC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxELmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxEKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLFA9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxzLmVtcHR5LHRoaXMubWFya3M9cnx8dS5ub25lfSxCPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07Qi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxCLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxQLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxQLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sUC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sUC5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sUC5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sQi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sUC5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sQi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sQi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LFAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxQLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sUC5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZwKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZ1LnNhbWVTZXQodGhpcy5tYXJrcyxufHx1Lm5vbmUpfSxQLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxQLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxQLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sUC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gbC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBsKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LFAucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB5KHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LFAucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LFAucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sUC5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sUC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gVC5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFAucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmUodGhpcyx0KX0sUC5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxCLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxCLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEIuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEIuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sQi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEIuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxCLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxQLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LFAucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj1zLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYT1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFhfHwhYS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGM9cjtjPG87YysrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChjKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFAucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sUC5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxQLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LFAucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LFAucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LFAuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9cy5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQLnByb3RvdHlwZSxCKTt2YXIgRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oUCk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciBfPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LCQ9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtfLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEoodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIF8uZW1wdHk7dmFyIHI9VihuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz1RKFgocikpO3JldHVybiB0dChvLG4pLG99LF8ucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxfLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sJC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LCQuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LF8ucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LF8ucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLGEpe3ZhciBjPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGMmJighZXx8Yy52YWxpZEVuZCkpcmV0dXJuIHMuZnJvbShhLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGg9MDtoPGkubmV4dC5sZW5ndGg7aCs9Mil7dmFyIHA9aS5uZXh0W2hdLHU9aS5uZXh0W2grMV07aWYoIXAuaXNUZXh0JiYhcC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YodSkpe3IucHVzaCh1KTt2YXIgZj1vKHUsYS5jb25jYXQocCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0sXy5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxfLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSwkLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sXy5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSwkKSxfLmVtcHR5PW5ldyBfKCEwKTt2YXIgSj1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sTD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gVih0KXt2YXIgZT1bXTtkb3tlLnB1c2gocSh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gcSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goVyh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPUcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9Syh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEgodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIEsodCxlKXt2YXIgbj1IKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/SCh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gRyh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1WKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVUodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gWCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgaD1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksaCksbyhpKHQuZXhwcixoKSxoKSxbcihoKV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgcD1lLHU9MDt1PHQubWluO3UrKyl7dmFyIGY9bigpO28oaSh0LmV4cHIscCksZikscD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLHApLHApO2Vsc2UgZm9yKHZhciBsPXQubWluO2w8dC5tYXg7bCsrKXt2YXIgZD1uKCk7cihwLGQpLG8oaSh0LmV4cHIscCksZCkscD1kfXJldHVybltyKHApXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWSh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChZKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gUSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBfKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoWSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHR0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIGV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBzdCh0W25dKTtyZXR1cm4gZX1MLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sSi5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEoucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEoucHJvdG90eXBlLEwpO3ZhciBvdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXJ0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWV0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxpdD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aXQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saXQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxpdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1fLmVtcHR5fSxpdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sb3QucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1tlXS5pc1JlcXVpcmVkJiYoIXR8fCEoZSBpbiB0KSkpcmV0dXJuITA7cmV0dXJuITF9LG90LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LG90LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOm50KHRoaXMuYXR0cnMsdCl9LG90LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCkscy5mcm9tKGUpLHUuc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPXMuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBQKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPXMuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IFAodGhpcyx0LGUuYXBwZW5kKG8pLHUuc2V0RnJvbShuKSk6bnVsbH0sb3QucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sb3QucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOnUuZW1wdHk6dH0sb3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBvdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvdC5wcm90b3R5cGUsaXQpO3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxhdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07YXQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdC5wcm90b3R5cGUsYXQpO3ZhciBjdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9cnQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWV0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IHUodGhpcyxvKX07Y3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyB1KHRoaXMsbnQodGhpcy5hdHRycyx0KSl9LGN0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBjdCh0LHIrKyxlLG8pfSkpLG59LGN0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxjdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGN0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgaHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz1yWyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9clsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1vdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWN0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBvIGluIHRoaXMubm9kZXMpe2lmKG8gaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihvKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIGk9dGhpcy5ub2Rlc1tvXSxzPWkuc3BlYy5jb250ZW50fHwiIixhPWkuc3BlYy5tYXJrcztpLmNvbnRlbnRNYXRjaD1uW3NdfHwobltzXT1fLnBhcnNlKHMsdGhpcy5ub2RlcykpLGkuaW5saW5lQ29udGVudD1pLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LGkubWFya1NldD0iXyI9PWE/bnVsbDphP3B0KHRoaXMsYS5zcGxpdCgiICIpKToiIiE9YSYmaS5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBjIGluIHRoaXMubWFya3Mpe3ZhciBoPXRoaXMubWFya3NbY10scD1oLnNwZWMuZXhjbHVkZXM7aC5leGNsdWRlZD1udWxsPT1wP1toXToiIj09cD9bXTpwdCh0aGlzLHAuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHB0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufWh0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LGh0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgRihuLG4uZGVmYXVsdEF0dHJzLHQsdS5zZXRGcm9tKGUpKX0saHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxodC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBQLmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIHUuZnJvbUpTT04odGhpcyx0KX0saHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O3V0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSx1dC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgeHQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxsLm1heE9wZW4obi5maW5pc2goKSl9LHV0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihTdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LHV0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LHV0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1DdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0sdXQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyB1dCh0LHV0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxsdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxkdD17b2w6ITAsdWw6ITB9LHZ0PTEsbXQ9Mix5dD00O2Z1bmN0aW9uIGd0KHQpe3JldHVybih0P3Z0OjApfCgiZnVsbCI9PT10P210OjApfXZhciB3dD1mdW5jdGlvbih0LGUsbixyLG8saSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9cix0aGlzLm1hdGNoPW98fChpJnl0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1pLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz11Lm5vbmV9O3d0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHMuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHd0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmdnQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPXMuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUocy5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIHh0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT1ndChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/eXQ6MCk7cj1vP25ldyB3dChvLnR5cGUsby5hdHRycyx1Lm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgd3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsdS5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGJ0PXt0b3A6e2NvbmZpZ3VyYWJsZTohMH0sY3VycmVudFBvczp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24ga3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmZHQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gU3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQ3QodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWJ0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSx4dC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLG49ZT90aGlzLnJlYWRTdHlsZXMoT3QoZSkpOm51bGw7aWYobnVsbCE9bilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKyl0aGlzLmFkZFBlbmRpbmdNYXJrKG5bcl0pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1uKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXRoaXMucmVtb3ZlUGVuZGluZ01hcmsobltvXSl9fSx4dC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmdnQpbi5vcHRpb25zJm10fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtkdC5oYXNPd25Qcm9wZXJ0eShlKSYma3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmx0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LHh0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LHh0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT11Lm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LHh0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LHh0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmZnQuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0seHQucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSx4dC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LHh0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGVuZGluZ01hcmtzW2VdO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShuLnR5cGUpfHxuLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPW4uYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUtLSwxKSl9fSx4dC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LHh0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+eXQ6Z3Qocik7by5vcHRpb25zJnl0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9eXQpLHRoaXMubm9kZXMucHVzaChuZXcgd3QodCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30seHQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0seHQucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0seHQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LHh0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxidC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0seHQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHh0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LHh0LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LHh0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGg9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighaHx8aC5uYW1lIT1jJiYtMT09aC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0seHQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeHQucHJvdG90eXBlLGJ0KTt2YXIgTXQ9ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGVzPXR8fHt9LHRoaXMubWFya3M9ZXx8e319O2Z1bmN0aW9uIFR0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dLnNwZWMudG9ET007ciYmKGVbbl09cil9cmV0dXJuIGV9ZnVuY3Rpb24gTnQodCl7cmV0dXJuIHQuZG9jdW1lbnR8fHdpbmRvdy5kb2N1bWVudH1NdC5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPU50KGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSxoPXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7aCYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQoaC5kb20pLG89aC5jb250ZW50RE9NfHxoLmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LE10LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPU10LnJlbmRlclNwZWMoTnQoZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LE10LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSxNdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZNdC5yZW5kZXJTcGVjKE50KG4pLHIodCxlKSl9LE10LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgaD1NdC5yZW5kZXJTcGVjKHQsYykscD1oLmRvbSx1PWguY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSxNdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgTXQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sTXQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPVR0KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LE10Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gVHQodC5tYXJrcyl9O3ZhciBFdD1uKCIwYWMwIik7bi5kKGUsIkFsbFNlbGVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp0fSkpLG4uZChlLCJFZGl0b3JTdGF0ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFh0fSkpLG4uZChlLCJOb2RlU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnR9KSksbi5kKGUsIlBsdWdpbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRlfSkpLG4uZChlLCJQbHVnaW5LZXkiLChmdW5jdGlvbigpe3JldHVybiByZX0pKSxuLmQoZSwiU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnR9KSksbi5kKGUsIlNlbGVjdGlvblJhbmdlIiwoZnVuY3Rpb24oKXtyZXR1cm4gRHR9KSksbi5kKGUsIlRleHRTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBJdH0pKSxuLmQoZSwiVHJhbnNhY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBXdH0pKTt2YXIgQXQ9T2JqZWN0LmNyZWF0ZShudWxsKSxSdD1mdW5jdGlvbih0LGUsbil7dGhpcy5yYW5nZXM9bnx8W25ldyBEdCh0Lm1pbihlKSx0Lm1heChlKSldLHRoaXMuJGFuY2hvcj10LHRoaXMuJGhlYWQ9ZX0senQ9e2FuY2hvcjp7Y29uZmlndXJhYmxlOiEwfSxoZWFkOntjb25maWd1cmFibGU6ITB9LGZyb206e2NvbmZpZ3VyYWJsZTohMH0sdG86e2NvbmZpZ3VyYWJsZTohMH0sJGZyb206e2NvbmZpZ3VyYWJsZTohMH0sJHRvOntjb25maWd1cmFibGU6ITB9LGVtcHR5Ontjb25maWd1cmFibGU6ITB9fTt6dC5hbmNob3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3N9LHp0LmhlYWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGhlYWQucG9zfSx6dC5mcm9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLnBvc30senQudG8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLnBvc30senQuJGZyb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2VzWzBdLiRmcm9tfSx6dC4kdG8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2VzWzBdLiR0b30senQuZW1wdHkuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucmFuZ2VzLGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLiRmcm9tLnBvcyE9dFtlXS4kdG8ucG9zKXJldHVybiExO3JldHVybiEwfSxSdC5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUoMCkuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8sITApfSxSdC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPWwuZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLHI9bnVsbCxvPTA7bzxlLm9wZW5FbmQ7bysrKXI9bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgaT10LnN0ZXBzLmxlbmd0aCxzPXRoaXMucmFuZ2VzLGE9MDthPHMubGVuZ3RoO2ErKyl7dmFyIGM9c1thXSxoPWMuJGZyb20scD1jLiR0byx1PXQubWFwcGluZy5zbGljZShpKTt0LnJlcGxhY2VSYW5nZSh1Lm1hcChoLnBvcyksdS5tYXAocC5wb3MpLGE/bC5lbXB0eTplKSwwPT1hJiZKdCh0LGksKG4/bi5pc0lubGluZTpyJiZyLmlzVGV4dGJsb2NrKT8tMToxKX19LFJ0LnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LnN0ZXBzLmxlbmd0aCxyPXRoaXMucmFuZ2VzLG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXSxzPWkuJGZyb20sYT1pLiR0byxjPXQubWFwcGluZy5zbGljZShuKSxoPWMubWFwKHMucG9zKSxwPWMubWFwKGEucG9zKTtvP3QuZGVsZXRlUmFuZ2UoaCxwKToodC5yZXBsYWNlUmFuZ2VXaXRoKGgscCxlKSxKdCh0LG4sZS5pc0lubGluZT8tMToxKSl9fSxSdC5maW5kRnJvbT1mdW5jdGlvbih0LGUsbil7dmFyIHI9dC5wYXJlbnQuaW5saW5lQ29udGVudD9uZXcgSXQodCk6JHQodC5ub2RlKDApLHQucGFyZW50LHQucG9zLHQuaW5kZXgoKSxlLG4pO2lmKHIpcmV0dXJuIHI7Zm9yKHZhciBvPXQuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ZTwwPyR0KHQubm9kZSgwKSx0Lm5vZGUobyksdC5iZWZvcmUobysxKSx0LmluZGV4KG8pLGUsbik6JHQodC5ub2RlKDApLHQubm9kZShvKSx0LmFmdGVyKG8rMSksdC5pbmRleChvKSsxLGUsbik7aWYoaSlyZXR1cm4gaX19LFJ0Lm5lYXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5maW5kRnJvbSh0LGUpfHx0aGlzLmZpbmRGcm9tKHQsLWUpfHxuZXcganQodC5ub2RlKDApKX0sUnQuYXRTdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gJHQodCx0LDAsMCwxKXx8bmV3IGp0KHQpfSxSdC5hdEVuZD1mdW5jdGlvbih0KXtyZXR1cm4gJHQodCx0LHQuY29udGVudC5zaXplLHQuY2hpbGRDb3VudCwtMSl8fG5ldyBqdCh0KX0sUnQuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZXx8IWUudHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2VsZWN0aW9uLmZyb21KU09OIik7dmFyIG49QXRbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gc2VsZWN0aW9uIHR5cGUgIitlLnR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0sUnQuanNvbklEPWZ1bmN0aW9uKHQsZSl7aWYodCBpbiBBdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzZWxlY3Rpb24gSlNPTiBJRCAiK3QpO3JldHVybiBBdFt0XT1lLGUucHJvdG90eXBlLmpzb25JRD10LGV9LFJ0LnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBJdC5iZXR3ZWVuKHRoaXMuJGFuY2hvcix0aGlzLiRoZWFkKS5nZXRCb29rbWFyaygpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhSdC5wcm90b3R5cGUsenQpLFJ0LnByb3RvdHlwZS52aXNpYmxlPSEwO3ZhciBEdD1mdW5jdGlvbih0LGUpe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lfSxJdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dm9pZCAwPT09biYmKG49ZSksdC5jYWxsKHRoaXMsZSxuKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17JGN1cnNvcjp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uJGN1cnNvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvcz09dGhpcy4kaGVhZC5wb3M/dGhpcy4kaGVhZDpudWxsfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24obixyKXt2YXIgbz1uLnJlc29sdmUoci5tYXAodGhpcy5oZWFkKSk7aWYoIW8ucGFyZW50LmlubGluZUNvbnRlbnQpcmV0dXJuIHQubmVhcihvKTt2YXIgaT1uLnJlc29sdmUoci5tYXAodGhpcy5hbmNob3IpKTtyZXR1cm4gbmV3IGUoaS5wYXJlbnQuaW5saW5lQ29udGVudD9pOm8sbyl9LGUucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24oZSxuKXtpZih2b2lkIDA9PT1uJiYobj1sLmVtcHR5KSx0LnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcyxlLG4pLG49PWwuZW1wdHkpe3ZhciByPXRoaXMuJGZyb20ubWFya3NBY3Jvc3ModGhpcy4kdG8pO3ImJmUuZW5zdXJlTWFya3Mocil9fSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuYW5jaG9yPT10aGlzLmFuY2hvciYmdC5oZWFkPT10aGlzLmhlYWR9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQdCh0aGlzLmFuY2hvcix0aGlzLmhlYWQpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToidGV4dCIsYW5jaG9yOnRoaXMuYW5jaG9yLGhlYWQ6dGhpcy5oZWFkfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5hbmNob3J8fCJudW1iZXIiIT10eXBlb2Ygbi5oZWFkKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBUZXh0U2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvciksdC5yZXNvbHZlKG4uaGVhZCkpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dC5yZXNvbHZlKGUpO3JldHVybiBuZXcgdGhpcyhyLG49PWU/cjp0LnJlc29sdmUobikpfSxlLmJldHdlZW49ZnVuY3Rpb24obixyLG8pe3ZhciBpPW4ucG9zLXIucG9zO2lmKG8mJiFpfHwobz1pPj0wPzE6LTEpLCFyLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgcz10LmZpbmRGcm9tKHIsbywhMCl8fHQuZmluZEZyb20ociwtbywhMCk7aWYoIXMpcmV0dXJuIHQubmVhcihyLG8pO3I9cy4kaGVhZH1yZXR1cm4gbi5wYXJlbnQuaW5saW5lQ29udGVudHx8KDA9PWk/bj1yOihuPSh0LmZpbmRGcm9tKG4sLW8sITApfHx0LmZpbmRGcm9tKG4sbywhMCkpLiRhbmNob3Isbi5wb3M8ci5wb3MhPWk8MCYmKG49cikpKSxuZXcgZShuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShSdCk7UnQuanNvbklEKCJ0ZXh0IixJdCk7dmFyIFB0PWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07UHQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFB0KHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0sUHQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIEl0LmJldHdlZW4odC5yZXNvbHZlKHRoaXMuYW5jaG9yKSx0LnJlc29sdmUodGhpcy5oZWFkKSl9O3ZhciBCdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPWUubm9kZUFmdGVyLHI9ZS5ub2RlKDApLnJlc29sdmUoZS5wb3Mrbi5ub2RlU2l6ZSk7dC5jYWxsKHRoaXMsZSxyKSx0aGlzLm5vZGU9bn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89ci5tYXBSZXN1bHQodGhpcy5hbmNob3IpLGk9by5kZWxldGVkLHM9by5wb3MsYT1uLnJlc29sdmUocyk7cmV0dXJuIGk/dC5uZWFyKGEpOm5ldyBlKGEpfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBsKHMuZnJvbSh0aGlzLm5vZGUpLDAsMCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToibm9kZSIsYW5jaG9yOnRoaXMuYW5jaG9yfX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZ0KHRoaXMuYW5jaG9yKX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5hbmNob3IpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGVTZWxlY3Rpb24uZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4uYW5jaG9yKSl9LGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyB0aGlzKHQucmVzb2x2ZShlKSl9LGUuaXNTZWxlY3RhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiF0LmlzVGV4dCYmITEhPT10LnR5cGUuc3BlYy5zZWxlY3RhYmxlfSxlfShSdCk7QnQucHJvdG90eXBlLnZpc2libGU9ITEsUnQuanNvbklEKCJub2RlIixCdCk7dmFyIEZ0PWZ1bmN0aW9uKHQpe3RoaXMuYW5jaG9yPXR9O0Z0LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXBSZXN1bHQodGhpcy5hbmNob3IpLG49ZS5kZWxldGVkLHI9ZS5wb3M7cmV0dXJuIG4/bmV3IFB0KHIscik6bmV3IEZ0KHIpfSxGdC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5hbmNob3IpLG49ZS5ub2RlQWZ0ZXI7cmV0dXJuIG4mJkJ0LmlzU2VsZWN0YWJsZShuKT9uZXcgQnQoZSk6UnQubmVhcihlKX07dmFyIGp0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5yZXNvbHZlKDApLGUucmVzb2x2ZShlLmNvbnRlbnQuc2l6ZSkpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49bC5lbXB0eSksbj09bC5lbXB0eSl7ZS5kZWxldGUoMCxlLmRvYy5jb250ZW50LnNpemUpO3ZhciByPXQuYXRTdGFydChlLmRvYyk7ci5lcShlLnNlbGVjdGlvbil8fGUuc2V0U2VsZWN0aW9uKHIpfWVsc2UgdC5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHRoaXMsZSxuKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6ImFsbCJ9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBfdH0sZX0oUnQpO1J0Lmpzb25JRCgiYWxsIixqdCk7dmFyIF90PXttYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGp0KHQpfX07ZnVuY3Rpb24gJHQodCxlLG4scixvLGkpe2lmKGUuaW5saW5lQ29udGVudClyZXR1cm4gSXQuY3JlYXRlKHQsbik7Zm9yKHZhciBzPXItKG8+MD8wOjEpO28+MD9zPGUuY2hpbGRDb3VudDpzPj0wO3MrPW8pe3ZhciBhPWUuY2hpbGQocyk7aWYoYS5pc0F0b20pe2lmKCFpJiZCdC5pc1NlbGVjdGFibGUoYSkpcmV0dXJuIEJ0LmNyZWF0ZSh0LG4tKG88MD9hLm5vZGVTaXplOjApKX1lbHNle3ZhciBjPSR0KHQsYSxuK28sbzwwP2EuY2hpbGRDb3VudDowLG8saSk7aWYoYylyZXR1cm4gY31uKz1hLm5vZGVTaXplKm99fWZ1bmN0aW9uIEp0KHQsZSxuKXt2YXIgcj10LnN0ZXBzLmxlbmd0aC0xO2lmKCEocjxlKSl7dmFyIG89dC5zdGVwc1tyXTtpZihvIGluc3RhbmNlb2YgRXRbImMiXXx8byBpbnN0YW5jZW9mIEV0WyJiIl0pe3ZhciBpLHM9dC5tYXBwaW5nLm1hcHNbcl07cy5mb3JFYWNoKChmdW5jdGlvbih0LGUsbixyKXtudWxsPT1pJiYoaT1yKX0pKSx0LnNldFNlbGVjdGlvbihSdC5uZWFyKHQuZG9jLnJlc29sdmUoaSksbikpfX19dmFyIEx0PTEsVnQ9MixxdD00LFd0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5kb2MpLHRoaXMudGltZT1EYXRlLm5vdygpLHRoaXMuY3VyU2VsZWN0aW9uPWUuc2VsZWN0aW9uLHRoaXMuY3VyU2VsZWN0aW9uRm9yPTAsdGhpcy5zdG9yZWRNYXJrcz1lLnN0b3JlZE1hcmtzLHRoaXMudXBkYXRlZD0wLHRoaXMubWV0YT1PYmplY3QuY3JlYXRlKG51bGwpfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzZWxlY3Rpb246e2NvbmZpZ3VyYWJsZTohMH0sc2VsZWN0aW9uU2V0Ontjb25maWd1cmFibGU6ITB9LHN0b3JlZE1hcmtzU2V0Ontjb25maWd1cmFibGU6ITB9LGlzR2VuZXJpYzp7Y29uZmlndXJhYmxlOiEwfSxzY3JvbGxlZEludG9WaWV3Ontjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5zZWxlY3Rpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uRm9yPHRoaXMuc3RlcHMubGVuZ3RoJiYodGhpcy5jdXJTZWxlY3Rpb249dGhpcy5jdXJTZWxlY3Rpb24ubWFwKHRoaXMuZG9jLHRoaXMubWFwcGluZy5zbGljZSh0aGlzLmN1clNlbGVjdGlvbkZvcikpLHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoKSx0aGlzLmN1clNlbGVjdGlvbn0sZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQpe2lmKHQuJGZyb20uZG9jIT10aGlzLmRvYyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2VsZWN0aW9uIHBhc3NlZCB0byBzZXRTZWxlY3Rpb24gbXVzdCBwb2ludCBhdCB0aGUgY3VycmVudCBkb2N1bWVudCIpO3JldHVybiB0aGlzLmN1clNlbGVjdGlvbj10LHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoLHRoaXMudXBkYXRlZD0odGhpcy51cGRhdGVkfEx0KSZ+VnQsdGhpcy5zdG9yZWRNYXJrcz1udWxsLHRoaXN9LG4uc2VsZWN0aW9uU2V0LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmTHQpPjB9LGUucHJvdG90eXBlLnNldFN0b3JlZE1hcmtzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0b3JlZE1hcmtzPXQsdGhpcy51cGRhdGVkfD1WdCx0aGlzfSxlLnByb3RvdHlwZS5lbnN1cmVNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gdS5zYW1lU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCksdCl8fHRoaXMuc2V0U3RvcmVkTWFya3ModCksdGhpc30sZS5wcm90b3R5cGUuYWRkU3RvcmVkTWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyh0LmFkZFRvU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sZS5wcm90b3R5cGUucmVtb3ZlU3RvcmVkTWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyh0LnJlbW92ZUZyb21TZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpfSxuLnN0b3JlZE1hcmtzU2V0LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmVnQpPjB9LGUucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24oZSxuKXt0LnByb3RvdHlwZS5hZGRTdGVwLmNhbGwodGhpcyxlLG4pLHRoaXMudXBkYXRlZD10aGlzLnVwZGF0ZWQmflZ0LHRoaXMuc3RvcmVkTWFya3M9bnVsbH0sZS5wcm90b3R5cGUuc2V0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aW1lPXQsdGhpc30sZS5wcm90b3R5cGUucmVwbGFjZVNlbGVjdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzLHQpLHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb25XaXRoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zZWxlY3Rpb247cmV0dXJuITEhPT1lJiYodD10Lm1hcmsodGhpcy5zdG9yZWRNYXJrc3x8KG4uZW1wdHk/bi4kZnJvbS5tYXJrcygpOm4uJGZyb20ubWFya3NBY3Jvc3Mobi4kdG8pfHx1Lm5vbmUpKSksbi5yZXBsYWNlV2l0aCh0aGlzLHQpLHRoaXN9LGUucHJvdG90eXBlLmRlbGV0ZVNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMpLHRoaXN9LGUucHJvdG90eXBlLmluc2VydFRleHQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXRoaXMuZG9jLnR5cGUuc2NoZW1hO2lmKG51bGw9PWUpcmV0dXJuIHQ/dGhpcy5yZXBsYWNlU2VsZWN0aW9uV2l0aChyLnRleHQodCksITApOnRoaXMuZGVsZXRlU2VsZWN0aW9uKCk7aWYoIXQpcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UoZSxuKTt2YXIgbz10aGlzLnN0b3JlZE1hcmtzO2lmKCFvKXt2YXIgaT10aGlzLmRvYy5yZXNvbHZlKGUpO289bj09ZT9pLm1hcmtzKCk6aS5tYXJrc0Fjcm9zcyh0aGlzLmRvYy5yZXNvbHZlKG4pKX1yZXR1cm4gdGhpcy5yZXBsYWNlUmFuZ2VXaXRoKGUsbixyLnRleHQodCxvKSksdGhpcy5zZWxlY3Rpb24uZW1wdHl8fHRoaXMuc2V0U2VsZWN0aW9uKFJ0Lm5lYXIodGhpcy5zZWxlY3Rpb24uJHRvKSksdGhpc30sZS5wcm90b3R5cGUuc2V0TWV0YT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldPWUsdGhpc30sZS5wcm90b3R5cGUuZ2V0TWV0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XX0sbi5pc0dlbmVyaWMuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubWV0YSlyZXR1cm4hMTtyZXR1cm4hMH0sZS5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGVkfD1xdCx0aGlzfSxuLnNjcm9sbGVkSW50b1ZpZXcuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZxdCk+MH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oRXRbImQiXSk7ZnVuY3Rpb24gSHQodCxlKXtyZXR1cm4gZSYmdD90LmJpbmQoZSk6dH12YXIgS3Q9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuaW5pdD1IdChlLmluaXQsbiksdGhpcy5hcHBseT1IdChlLmFwcGx5LG4pfSxVdD1bbmV3IEt0KCJkb2MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY3x8dC5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N9fSksbmV3IEt0KCJzZWxlY3Rpb24iLHtpbml0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2VsZWN0aW9ufHxSdC5hdFN0YXJ0KGUuZG9jKX0sYXBwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2VsZWN0aW9ufX0pLG5ldyBLdCgic3RvcmVkTWFya3MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3JlZE1hcmtzfHxudWxsfSxhcHBseTpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gci5zZWxlY3Rpb24uJGN1cnNvcj90LnN0b3JlZE1hcmtzOm51bGx9fSksbmV3IEt0KCJzY3JvbGxUb1NlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sYXBwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zY3JvbGxlZEludG9WaWV3P2UrMTplfX0pXSxHdD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLmZpZWxkcz1VdC5jb25jYXQoKSx0aGlzLnBsdWdpbnM9W10sdGhpcy5wbHVnaW5zQnlLZXk9T2JqZWN0LmNyZWF0ZShudWxsKSxlJiZlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4ucGx1Z2luc0J5S2V5W3Qua2V5XSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKCIrdC5rZXkrIikiKTtuLnBsdWdpbnMucHVzaCh0KSxuLnBsdWdpbnNCeUtleVt0LmtleV09dCx0LnNwZWMuc3RhdGUmJm4uZmllbGRzLnB1c2gobmV3IEt0KHQua2V5LHQuc3BlYy5zdGF0ZSx0KSl9KSl9LFh0PWZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXR9LFl0PXtzY2hlbWE6e2NvbmZpZ3VyYWJsZTohMH0scGx1Z2luczp7Y29uZmlndXJhYmxlOiEwfSx0cjp7Y29uZmlndXJhYmxlOiEwfX07WXQuc2NoZW1hLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5zY2hlbWF9LFl0LnBsdWdpbnMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnBsdWdpbnN9LFh0LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHQpLnN0YXRlfSxYdC5wcm90b3R5cGUuZmlsdGVyVHJhbnNhY3Rpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0tMSk7Zm9yKHZhciBuPTA7bjx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtuKyspaWYobiE9ZSl7dmFyIHI9dGhpcy5jb25maWcucGx1Z2luc1tuXTtpZihyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24mJiFyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24uY2FsbChyLHQsdGhpcykpcmV0dXJuITF9cmV0dXJuITB9LFh0LnByb3RvdHlwZS5hcHBseVRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmZpbHRlclRyYW5zYWN0aW9uKHQpKXJldHVybntzdGF0ZTp0aGlzLHRyYW5zYWN0aW9uczpbXX07Zm9yKHZhciBlPVt0XSxuPXRoaXMuYXBwbHlJbm5lcih0KSxyPW51bGw7Oyl7Zm9yKHZhciBvPSExLGk9MDtpPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5jb25maWcucGx1Z2luc1tpXTtpZihzLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24pe3ZhciBhPXI/cltpXS5uOjAsYz1yP3JbaV0uc3RhdGU6dGhpcyxoPWE8ZS5sZW5ndGgmJnMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbi5jYWxsKHMsYT9lLnNsaWNlKGEpOmUsYyxuKTtpZihoJiZuLmZpbHRlclRyYW5zYWN0aW9uKGgsaSkpe2lmKGguc2V0TWV0YSgiYXBwZW5kZWRUcmFuc2FjdGlvbiIsdCksIXIpe3I9W107Zm9yKHZhciBwPTA7cDx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtwKyspci5wdXNoKHA8aT97c3RhdGU6bixuOmUubGVuZ3RofTp7c3RhdGU6dGhpcyxuOjB9KX1lLnB1c2goaCksbj1uLmFwcGx5SW5uZXIoaCksbz0hMH1yJiYocltpXT17c3RhdGU6bixuOmUubGVuZ3RofSl9fWlmKCFvKXJldHVybntzdGF0ZTpuLHRyYW5zYWN0aW9uczplfX19LFh0LnByb3RvdHlwZS5hcHBseUlubmVyPWZ1bmN0aW9uKHQpe2lmKCF0LmJlZm9yZS5lcSh0aGlzLmRvYykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFwcGx5aW5nIGEgbWlzbWF0Y2hlZCB0cmFuc2FjdGlvbiIpO2Zvcih2YXIgZT1uZXcgWHQodGhpcy5jb25maWcpLG49dGhpcy5jb25maWcuZmllbGRzLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtlW28ubmFtZV09by5hcHBseSh0LHRoaXNbby5uYW1lXSx0aGlzLGUpfWZvcih2YXIgaT0wO2k8WnQubGVuZ3RoO2krKyladFtpXSh0aGlzLHQsZSk7cmV0dXJuIGV9LFl0LnRyLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgV3QodGhpcyl9LFh0LmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEd0KHQuc2NoZW1hfHx0LmRvYy50eXBlLnNjaGVtYSx0LnBsdWdpbnMpLG49bmV3IFh0KGUpLHI9MDtyPGUuZmllbGRzLmxlbmd0aDtyKyspbltlLmZpZWxkc1tyXS5uYW1lXT1lLmZpZWxkc1tyXS5pbml0KHQsbik7cmV0dXJuIG59LFh0LnByb3RvdHlwZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEd0KHQuc2NoZW1hfHx0aGlzLnNjaGVtYSx0LnBsdWdpbnMpLG49ZS5maWVsZHMscj1uZXcgWHQoZSksbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dLm5hbWU7cltpXT10aGlzLmhhc093blByb3BlcnR5KGkpP3RoaXNbaV06bltvXS5pbml0KHQscil9cmV0dXJuIHJ9LFh0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7dmFyIGU9e2RvYzp0aGlzLmRvYy50b0pTT04oKSxzZWxlY3Rpb246dGhpcy5zZWxlY3Rpb24udG9KU09OKCl9O2lmKHRoaXMuc3RvcmVkTWFya3MmJihlLnN0b3JlZE1hcmtzPXRoaXMuc3RvcmVkTWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdCYmIm9iamVjdCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXtpZigiZG9jIj09bnx8InNlbGVjdGlvbiI9PW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSBKU09OIGZpZWxkcyBgZG9jYCBhbmQgYHNlbGVjdGlvbmAgYXJlIHJlc2VydmVkIik7dmFyIHI9dFtuXSxvPXIuc3BlYy5zdGF0ZTtvJiZvLnRvSlNPTiYmKGVbbl09by50b0pTT04uY2FsbChyLHRoaXNbci5rZXldKSl9cmV0dXJuIGV9LFh0LmZyb21KU09OPWZ1bmN0aW9uKHQsZSxuKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRWRpdG9yU3RhdGUuZnJvbUpTT04iKTtpZighdC5zY2hlbWEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlcXVpcmVkIGNvbmZpZyBmaWVsZCAnc2NoZW1hJyBtaXNzaW5nIik7dmFyIHI9bmV3IEd0KHQuc2NoZW1hLHQucGx1Z2lucyksbz1uZXcgWHQocik7cmV0dXJuIHIuZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKHIpe2lmKCJkb2MiPT1yLm5hbWUpby5kb2M9UC5mcm9tSlNPTih0LnNjaGVtYSxlLmRvYyk7ZWxzZSBpZigic2VsZWN0aW9uIj09ci5uYW1lKW8uc2VsZWN0aW9uPVJ0LmZyb21KU09OKG8uZG9jLGUuc2VsZWN0aW9uKTtlbHNlIGlmKCJzdG9yZWRNYXJrcyI9PXIubmFtZSllLnN0b3JlZE1hcmtzJiYoby5zdG9yZWRNYXJrcz1lLnN0b3JlZE1hcmtzLm1hcCh0LnNjaGVtYS5tYXJrRnJvbUpTT04pKTtlbHNle2lmKG4pZm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV0sYT1zLnNwZWMuc3RhdGU7aWYocy5rZXk9PXIubmFtZSYmYSYmYS5mcm9tSlNPTiYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpcmV0dXJuIHZvaWQob1tyLm5hbWVdPWEuZnJvbUpTT04uY2FsbChzLHQsZVtpXSxvKSl9b1tyLm5hbWVdPXIuaW5pdCh0LG8pfX0pKSxvfSxYdC5hZGRBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe1p0LnB1c2godCl9LFh0LnJlbW92ZUFwcGx5TGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9WnQuaW5kZXhPZih0KTtlPi0xJiZadC5zcGxpY2UoZSwxKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoWHQucHJvdG90eXBlLFl0KTt2YXIgWnQ9W107ZnVuY3Rpb24gUXQodCxlLG4pe2Zvcih2YXIgciBpbiB0KXt2YXIgbz10W3JdO28gaW5zdGFuY2VvZiBGdW5jdGlvbj9vPW8uYmluZChlKToiaGFuZGxlRE9NRXZlbnRzIj09ciYmKG89UXQobyxlLHt9KSksbltyXT1vfXJldHVybiBufXZhciB0ZT1mdW5jdGlvbih0KXt0aGlzLnByb3BzPXt9LHQucHJvcHMmJlF0KHQucHJvcHMsdGhpcyx0aGlzLnByb3BzKSx0aGlzLnNwZWM9dCx0aGlzLmtleT10LmtleT90LmtleS5rZXk6bmUoInBsdWdpbiIpfTt0ZS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5rZXldfTt2YXIgZWU9T2JqZWN0LmNyZWF0ZShudWxsKTtmdW5jdGlvbiBuZSh0KXtyZXR1cm4gdCBpbiBlZT90KyIkIisgKytlZVt0XTooZWVbdF09MCx0KyIkIil9dmFyIHJlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PSJrZXkiKSx0aGlzLmtleT1uZSh0KX07cmUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb25maWcucGx1Z2luc0J5S2V5W3RoaXMua2V5XX0scmUucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX19LGMwNGU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjg2MWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighcih0KSlyZXR1cm4gdDt2YXIgbixvO2lmKGUmJiJmdW5jdGlvbiI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87aWYoImZ1bmN0aW9uIj09dHlwZW9mKG49dC52YWx1ZU9mKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKCFlJiYiZnVuY3Rpb24iPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSxjNDMwOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSExfSxjNmI2OmZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxjNmNkOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCJjZTRlIiksaT0iX19jb3JlLWpzX3NoYXJlZF9fIixzPXJbaV18fG8oaSx7fSk7dC5leHBvcnRzPXN9LGM2ZWU6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTkgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptLTIuNSA1LjkzOGg1YS45MzcuOTM3IDAgMTAwLTEuODc1aC01YS45MzcuOTM3IDAgMTAwIDEuODc1ek0xMi4yOSAxN0g5djVoMy42NzRjLjM1Ni43NS44NDEgMS40MjYgMS40MjcgMkg1YTUgNSAwIDAxLTUtNVY1YTUgNSAwIDAxNS01aDE0YTUgNSAwIDAxNSA1djIuODIzYS44NDMuODQzIDAgMDEwIC4zNTRWMTQuMWE3LjAxOCA3LjAxOCAwIDAwLTItMS40MjdWOWgtNXYzLjI5YTYuOTcyIDYuOTcyIDAgMDAtMiAuOTY1VjlIOXY2aDQuMjU1YTYuOTcyIDYuOTcyIDAgMDAtLjk2NSAyek0xNyA3aDVWNWEzIDMgMCAwMC0zLTNoLTJ2NXptLTIgMFYySDl2NWg2ek03IDJINWEzIDMgMCAwMC0zIDN2Mmg1VjJ6TTIgOXY2aDVWOUgyem0wIDh2MmEzIDMgMCAwMDMgM2gydi01SDJ6In19KV0pKX19fSxjOGJhOmZ1bmN0aW9uKHQsZSl7dmFyIG47bj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXtuPW58fG5ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfWNhdGNoKHIpeyJvYmplY3QiPT09dHlwZW9mIHdpbmRvdyYmKG49d2luZG93KX10LmV4cG9ydHM9bn0sYzk0MzpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMS45OTkuNUM1LjY0OS41LjUgNS42NDguNSAxMmMwIDUuMDgyIDMuMjk0IDkuMzkyIDcuODY1IDEwLjkxNC41NzQuMTAzLjc1Ni0uMjM2Ljc1Ni0uNTQxIDAtLjI3NC4wMDYtMS4wMzcgMC0xLjk5Ny0zLjE5OC42OTQtMy44NjEtMS41MTUtMy44NjEtMS41MTUtLjUyMy0xLjMyOS0xLjI3NS0xLjY4Mi0xLjI3NS0xLjY4Mi0xLjA0NS0uNzE0LjA3Ny0uNjk5LjA3Ny0uNjk5IDEuMTUzLjA4IDEuNzYyIDEuMTg0IDEuNzYyIDEuMTg0IDEuMDI2IDEuNzU4IDIuNjkxIDEuMjUgMy4zNDYuOTU2LjEwNi0uNzQyLjQwMi0xLjI1MS43MzEtMS41MzYtMi41NTQtLjI5Mi01LjIzOC0xLjI3Ny01LjIzOC01LjY4NiAwLTEuMjU1LjQ0OC0yLjI4MSAxLjE4NC0zLjA4Ni0uMTE4LS4yODktLjUxNC0xLjQ2LjExMi0zLjA0MyAwIDAgLjk2Ny0uMzA5IDMuMTYyIDEuMThhMTEuMDExIDExLjAxMSAwIDAxMi44OC0uMzg4Yy45NzYuMDA1IDEuOTYuMTMyIDIuODguMzg4IDIuMTk1LTEuNDg4IDMuMTU5LTEuMTggMy4xNTktMS4xOC42MjcgMS41ODMuMjMyIDIuNzU0LjExNCAzLjA0My43MzYuODA1IDEuMTgzIDEuODMxIDEuMTgzIDMuMDg2IDAgNC40Mi0yLjY4OSA1LjM5MS01LjI1MSA1LjY3NC40MTIuMzU3Ljc4NyAxLjA0Ny43ODcgMi4xMnYzLjE4NGMwIC4zMDguMTg2LjY0Ny43Ny41MzZDMjAuMjA5IDIxLjM4OSAyMy41IDE3LjA4IDIzLjUgMTIgMjMuNSA1LjY0OCAxOC4zNTIuNSAxMS45OTkuNXoifX0pXSkpfX19LGNhODQ6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjUxMzUiKSxvPW4oImZjNmEiKSxpPW4oIjRkNjQiKS5pbmRleE9mLHM9bigiZDAxMiIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLGE9byh0KSxjPTAsaD1bXTtmb3IobiBpbiBhKSFyKHMsbikmJnIoYSxuKSYmaC5wdXNoKG4pO3doaWxlKGUubGVuZ3RoPmMpcihhLG49ZVtjKytdKSYmKH5pKGgsbil8fGgucHVzaChuKSk7cmV0dXJuIGh9fSxjYzEyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCI4NjFkIiksaT1yLmRvY3VtZW50LHM9byhpKSYmbyhpLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcz9pLmNyZWF0ZUVsZW1lbnQodCk6e319fSxjZTRlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCI5MTEyIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dHJ5e28ocix0LGUpfWNhdGNoKG4pe3JbdF09ZX1yZXR1cm4gZX19LGQwMTI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LGQwMzk6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKGUpe3JldHVybiEwfX19LGQwNjY6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjQyOGYiKSxvPW4oImRhODQiKSxpPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6dm9pZCAwfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP2koclt0XSl8fGkob1t0XSk6clt0XSYmclt0XVtlXXx8b1t0XSYmb1t0XVtlXX19LGQxZTc6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsaT1vJiYhci5jYWxsKHsxOjJ9LDEpO2UuZj1pP2Z1bmN0aW9uKHQpe3ZhciBlPW8odGhpcyx0KTtyZXR1cm4hIWUmJmUuZW51bWVyYWJsZX06cn0sZDI4YjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNzQ2ZiIpO3IoIml0ZXJhdG9yIil9LGQyYTI6ZnVuY3Rpb24odCxlLG4pe3ZhciByLG87KGZ1bmN0aW9uKG4pe3ZhciBpPSJvYmplY3QiPT09dHlwZW9mIHdpbmRvdyYmd2luZG93fHwib2JqZWN0Ij09PXR5cGVvZiBzZWxmJiZzZWxmO2Uubm9kZVR5cGU/aSYmKGkuaGxqcz1uKHt9KSxyPVtdLG89ZnVuY3Rpb24oKXtyZXR1cm4gaS5obGpzfS5hcHBseShlLHIpLHZvaWQgMD09PW98fCh0LmV4cG9ydHM9bykpOm4oZSl9KSgoZnVuY3Rpb24odCl7dmFyIGUsbj1bXSxyPU9iamVjdC5rZXlzLG89e30saT17fSxzPS9eKG5vLT9oaWdobGlnaHR8cGxhaW58dGV4dCkkL2ksYT0vXGJsYW5nKD86dWFnZSk/LShbXHctXSspXGIvaSxjPS8oKF4oPFtePl0rPnxcdHwpK3woPzpcbikpKS9nbSxoPSI8L3NwYW4+IixwPXtjbGFzc1ByZWZpeDoiaGxqcy0iLHRhYlJlcGxhY2U6bnVsbCx1c2VCUjohMSxsYW5ndWFnZXM6dm9pZCAwfSx1PSJvZiBhbmQgZm9yIGluIG5vdCBvciBpZiB0aGVuIi5zcGxpdCgiICIpO2Z1bmN0aW9uIGYodCl7cmV0dXJuIHQucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBkKHQsZSl7dmFyIG49dCYmdC5leGVjKGUpO3JldHVybiBuJiYwPT09bi5pbmRleH1mdW5jdGlvbiB2KHQpe3JldHVybiBzLnRlc3QodCl9ZnVuY3Rpb24gbSh0KXt2YXIgZSxuLHIsbyxpPXQuY2xhc3NOYW1lKyIgIjtpZihpKz10LnBhcmVudE5vZGU/dC5wYXJlbnROb2RlLmNsYXNzTmFtZToiIixuPWEuZXhlYyhpKSxuKXJldHVybiBGKG5bMV0pP25bMV06Im5vLWhpZ2hsaWdodCI7Zm9yKGk9aS5zcGxpdCgvXHMrLyksZT0wLHI9aS5sZW5ndGg7ZTxyO2UrKylpZihvPWlbZV0sdihvKXx8RihvKSlyZXR1cm4gb31mdW5jdGlvbiB5KHQpe3ZhciBlLG49e30scj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Zm9yKGUgaW4gdCluW2VdPXRbZV07cmV0dXJuIHIuZm9yRWFjaCgoZnVuY3Rpb24odCl7Zm9yKGUgaW4gdCluW2VdPXRbZV19KSksbn1mdW5jdGlvbiBnKHQpe3ZhciBlPVtdO3JldHVybiBmdW5jdGlvbiB0KG4scil7Zm9yKHZhciBvPW4uZmlyc3RDaGlsZDtvO289by5uZXh0U2libGluZykzPT09by5ub2RlVHlwZT9yKz1vLm5vZGVWYWx1ZS5sZW5ndGg6MT09PW8ubm9kZVR5cGUmJihlLnB1c2goe2V2ZW50OiJzdGFydCIsb2Zmc2V0OnIsbm9kZTpvfSkscj10KG8sciksbChvKS5tYXRjaCgvYnJ8aHJ8aW1nfGlucHV0Lyl8fGUucHVzaCh7ZXZlbnQ6InN0b3AiLG9mZnNldDpyLG5vZGU6b30pKTtyZXR1cm4gcn0odCwwKSxlfWZ1bmN0aW9uIHcodCxlLHIpe3ZhciBvPTAsaT0iIixzPVtdO2Z1bmN0aW9uIGEoKXtyZXR1cm4gdC5sZW5ndGgmJmUubGVuZ3RoP3RbMF0ub2Zmc2V0IT09ZVswXS5vZmZzZXQ/dFswXS5vZmZzZXQ8ZVswXS5vZmZzZXQ/dDplOiJzdGFydCI9PT1lWzBdLmV2ZW50P3Q6ZTp0Lmxlbmd0aD90OmV9ZnVuY3Rpb24gYyh0KXtmdW5jdGlvbiBlKHQpe3JldHVybiIgIit0Lm5vZGVOYW1lKyc9IicrZih0LnZhbHVlKS5yZXBsYWNlKCciJywiJnF1b3Q7IikrJyInfWkrPSI8IitsKHQpK24ubWFwLmNhbGwodC5hdHRyaWJ1dGVzLGUpLmpvaW4oIiIpKyI+In1mdW5jdGlvbiBoKHQpe2krPSI8LyIrbCh0KSsiPiJ9ZnVuY3Rpb24gcCh0KXsoInN0YXJ0Ij09PXQuZXZlbnQ/YzpoKSh0Lm5vZGUpfXdoaWxlKHQubGVuZ3RofHxlLmxlbmd0aCl7dmFyIHU9YSgpO2lmKGkrPWYoci5zdWJzdHJpbmcobyx1WzBdLm9mZnNldCkpLG89dVswXS5vZmZzZXQsdT09PXQpe3MucmV2ZXJzZSgpLmZvckVhY2goaCk7ZG97cCh1LnNwbGljZSgwLDEpWzBdKSx1PWEoKX13aGlsZSh1PT09dCYmdS5sZW5ndGgmJnVbMF0ub2Zmc2V0PT09byk7cy5yZXZlcnNlKCkuZm9yRWFjaChjKX1lbHNlInN0YXJ0Ij09PXVbMF0uZXZlbnQ/cy5wdXNoKHVbMF0ubm9kZSk6cy5wb3AoKSxwKHUuc3BsaWNlKDAsMSlbMF0pfXJldHVybiBpK2Yoci5zdWJzdHIobykpfWZ1bmN0aW9uIHgodCl7cmV0dXJuISF0JiYodC5lbmRzV2l0aFBhcmVudHx8eCh0LnN0YXJ0cykpfWZ1bmN0aW9uIGIodCl7cmV0dXJuIHQudmFyaWFudHMmJiF0LmNhY2hlZF92YXJpYW50cyYmKHQuY2FjaGVkX3ZhcmlhbnRzPXQudmFyaWFudHMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4geSh0LHt2YXJpYW50czpudWxsfSxlKX0pKSksdC5jYWNoZWRfdmFyaWFudHM/dC5jYWNoZWRfdmFyaWFudHM6eCh0KT9beSh0LHtzdGFydHM6dC5zdGFydHM/eSh0LnN0YXJ0cyk6bnVsbH0pXTpbdF19ZnVuY3Rpb24gayh0KXtpZihlJiYhdC5sYW5nQXBpUmVzdG9yZWQpe2Zvcih2YXIgbiBpbiB0LmxhbmdBcGlSZXN0b3JlZD0hMCxlKXRbbl0mJih0W2Vbbl1dPXRbbl0pOyh0LmNvbnRhaW5zfHxbXSkuY29uY2F0KHQudmFyaWFudHN8fFtdKS5mb3JFYWNoKGspfX1mdW5jdGlvbiBTKHQsZSl7dmFyIG49e307cmV0dXJuInN0cmluZyI9PT10eXBlb2YgdD9vKCJrZXl3b3JkIix0KTpyKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpe28oZSx0W2VdKX0pKSxuO2Z1bmN0aW9uIG8odCxyKXtlJiYocj1yLnRvTG93ZXJDYXNlKCkpLHIuc3BsaXQoIiAiKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1lLnNwbGl0KCJ8Iik7bltyWzBdXT1bdCxPKHJbMF0sclsxXSldfSkpfX1mdW5jdGlvbiBPKHQsZSl7cmV0dXJuIGU/TnVtYmVyKGUpOkModCk/MDoxfWZ1bmN0aW9uIEModCl7cmV0dXJuLTEhPXUuaW5kZXhPZih0LnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIE0odCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdCYmdC5zb3VyY2V8fHR9ZnVuY3Rpb24gbihuLHIpe3JldHVybiBuZXcgUmVnRXhwKGUobiksIm0iKyh0LmNhc2VfaW5zZW5zaXRpdmU/ImkiOiIiKSsocj8iZyI6IiIpKX1mdW5jdGlvbiByKHQpe3JldHVybiBuZXcgUmVnRXhwKHQudG9TdHJpbmcoKSsifCIpLmV4ZWMoIiIpLmxlbmd0aC0xfWZ1bmN0aW9uIG8odCxuKXtmb3IodmFyIHI9L1xbKD86W15cXFxdXXxcXC4pKlxdfFwoXD8/fFxcKFsxLTldWzAtOV0qKXxcXC4vLG89MCxpPSIiLHM9MDtzPHQubGVuZ3RoO3MrKyl7bys9MTt2YXIgYT1vLGM9ZSh0W3NdKTtzPjAmJihpKz1uKSxpKz0iKCI7d2hpbGUoYy5sZW5ndGg+MCl7dmFyIGg9ci5leGVjKGMpO2lmKG51bGw9PWgpe2krPWM7YnJlYWt9aSs9Yy5zdWJzdHJpbmcoMCxoLmluZGV4KSxjPWMuc3Vic3RyaW5nKGguaW5kZXgraFswXS5sZW5ndGgpLCJcXCI9PWhbMF1bMF0mJmhbMV0/aSs9IlxcIitTdHJpbmcoTnVtYmVyKGhbMV0pK2EpOihpKz1oWzBdLCIoIj09aFswXSYmbysrKX1pKz0iKSJ9cmV0dXJuIGl9ZnVuY3Rpb24gaSh0KXt2YXIgZSxpLHM9e30sYT1bXSxjPXt9LGg9MTtmdW5jdGlvbiBwKHQsZSl7c1toXT10LGEucHVzaChbdCxlXSksaCs9cihlKSsxfWZvcih2YXIgdT0wO3U8dC5jb250YWlucy5sZW5ndGg7dSsrKXt2YXIgZjtpPXQuY29udGFpbnNbdV0sZj1pLmJlZ2luS2V5d29yZHM/IlxcLj8oPzoiK2kuYmVnaW4rIilcXC4/IjppLmJlZ2luLHAoaSxmKX10LnRlcm1pbmF0b3JfZW5kJiZwKCJlbmQiLHQudGVybWluYXRvcl9lbmQpLHQuaWxsZWdhbCYmcCgiaWxsZWdhbCIsdC5pbGxlZ2FsKTt2YXIgbD1hLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHRbMV19KSk7cmV0dXJuIGU9bihvKGwsInwiKSwhMCksYy5sYXN0SW5kZXg9MCxjLmV4ZWM9ZnVuY3Rpb24obil7dmFyIHI7aWYoMD09PWEubGVuZ3RoKXJldHVybiBudWxsO2UubGFzdEluZGV4PWMubGFzdEluZGV4O3ZhciBvPWUuZXhlYyhuKTtpZighbylyZXR1cm4gbnVsbDtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKylpZih2b2lkIDAhPW9baV0mJnZvaWQgMCE9c1siIitpXSl7cj1zWyIiK2ldO2JyZWFrfXJldHVybiJzdHJpbmciPT09dHlwZW9mIHI/KG8udHlwZT1yLG8uZXh0cmE9W3QuaWxsZWdhbCx0LnRlcm1pbmF0b3JfZW5kXSk6KG8udHlwZT0iYmVnaW4iLG8ucnVsZT1yKSxvfSxjfWZ1bmN0aW9uIHMocixvKXtyLmNvbXBpbGVkfHwoci5jb21waWxlZD0hMCxyLmtleXdvcmRzPXIua2V5d29yZHN8fHIuYmVnaW5LZXl3b3JkcyxyLmtleXdvcmRzJiYoci5rZXl3b3Jkcz1TKHIua2V5d29yZHMsdC5jYXNlX2luc2Vuc2l0aXZlKSksci5sZXhlbWVzUmU9bihyLmxleGVtZXN8fC9cdysvLCEwKSxvJiYoci5iZWdpbktleXdvcmRzJiYoci5iZWdpbj0iXFxiKCIrci5iZWdpbktleXdvcmRzLnNwbGl0KCIgIikuam9pbigifCIpKyIpXFxiIiksci5iZWdpbnx8KHIuYmVnaW49L1xCfFxiLyksci5iZWdpblJlPW4oci5iZWdpbiksci5lbmRTYW1lQXNCZWdpbiYmKHIuZW5kPXIuYmVnaW4pLHIuZW5kfHxyLmVuZHNXaXRoUGFyZW50fHwoci5lbmQ9L1xCfFxiLyksci5lbmQmJihyLmVuZFJlPW4oci5lbmQpKSxyLnRlcm1pbmF0b3JfZW5kPWUoci5lbmQpfHwiIixyLmVuZHNXaXRoUGFyZW50JiZvLnRlcm1pbmF0b3JfZW5kJiYoci50ZXJtaW5hdG9yX2VuZCs9KHIuZW5kPyJ8IjoiIikrby50ZXJtaW5hdG9yX2VuZCkpLHIuaWxsZWdhbCYmKHIuaWxsZWdhbFJlPW4oci5pbGxlZ2FsKSksbnVsbD09ci5yZWxldmFuY2UmJihyLnJlbGV2YW5jZT0xKSxyLmNvbnRhaW5zfHwoci5jb250YWlucz1bXSksci5jb250YWlucz1BcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLHIuY29udGFpbnMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gYigic2VsZiI9PT10P3I6dCl9KSkpLHIuY29udGFpbnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7cyh0LHIpfSkpLHIuc3RhcnRzJiZzKHIuc3RhcnRzLG8pLHIudGVybWluYXRvcnM9aShyKSl9cyh0KX1mdW5jdGlvbiBUKHQsZSxuLHIpe2Z1bmN0aW9uIGkodCl7cmV0dXJuIG5ldyBSZWdFeHAodC5yZXBsYWNlKC9bLVwvXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpLCJtIil9ZnVuY3Rpb24gcyh0LGUpe2lmKGQodC5lbmRSZSxlKSl7d2hpbGUodC5lbmRzUGFyZW50JiZ0LnBhcmVudCl0PXQucGFyZW50O3JldHVybiB0fWlmKHQuZW5kc1dpdGhQYXJlbnQpcmV0dXJuIHModC5wYXJlbnQsZSl9ZnVuY3Rpb24gYSh0LGUpe3ZhciBuPWIuY2FzZV9pbnNlbnNpdGl2ZT9lWzBdLnRvTG93ZXJDYXNlKCk6ZVswXTtyZXR1cm4gdC5rZXl3b3Jkcy5oYXNPd25Qcm9wZXJ0eShuKSYmdC5rZXl3b3Jkc1tuXX1mdW5jdGlvbiBjKHQsZSxuLHIpe2lmKCFuJiYiIj09PWUpcmV0dXJuIiI7aWYoIXQpcmV0dXJuIGU7dmFyIG89cj8iIjpwLmNsYXNzUHJlZml4LGk9JzxzcGFuIGNsYXNzPSInK28scz1uPyIiOmg7cmV0dXJuIGkrPXQrJyI+JyxpK2Urc31mdW5jdGlvbiB1KCl7dmFyIHQsZSxuLHI7aWYoIVMua2V5d29yZHMpcmV0dXJuIGYoRSk7cj0iIixlPTAsUy5sZXhlbWVzUmUubGFzdEluZGV4PTAsbj1TLmxleGVtZXNSZS5leGVjKEUpO3doaWxlKG4pcis9ZihFLnN1YnN0cmluZyhlLG4uaW5kZXgpKSx0PWEoUyxuKSx0PyhBKz10WzFdLHIrPWModFswXSxmKG5bMF0pKSk6cis9ZihuWzBdKSxlPVMubGV4ZW1lc1JlLmxhc3RJbmRleCxuPVMubGV4ZW1lc1JlLmV4ZWMoRSk7cmV0dXJuIHIrZihFLnN1YnN0cihlKSl9ZnVuY3Rpb24gbCgpe3ZhciB0PSJzdHJpbmciPT09dHlwZW9mIFMuc3ViTGFuZ3VhZ2U7aWYodCYmIW9bUy5zdWJMYW5ndWFnZV0pcmV0dXJuIGYoRSk7dmFyIGU9dD9UKFMuc3ViTGFuZ3VhZ2UsRSwhMCxPW1Muc3ViTGFuZ3VhZ2VdKTpOKEUsUy5zdWJMYW5ndWFnZS5sZW5ndGg/Uy5zdWJMYW5ndWFnZTp2b2lkIDApO3JldHVybiBTLnJlbGV2YW5jZT4wJiYoQSs9ZS5yZWxldmFuY2UpLHQmJihPW1Muc3ViTGFuZ3VhZ2VdPWUudG9wKSxjKGUubGFuZ3VhZ2UsZS52YWx1ZSwhMSwhMCl9ZnVuY3Rpb24gdigpe0MrPW51bGwhPVMuc3ViTGFuZ3VhZ2U/bCgpOnUoKSxFPSIifWZ1bmN0aW9uIG0odCl7Qys9dC5jbGFzc05hbWU/Yyh0LmNsYXNzTmFtZSwiIiwhMCk6IiIsUz1PYmplY3QuY3JlYXRlKHQse3BhcmVudDp7dmFsdWU6U319KX1mdW5jdGlvbiB5KHQpe3ZhciBlPXRbMF0sbj10LnJ1bGU7cmV0dXJuIG4mJm4uZW5kU2FtZUFzQmVnaW4mJihuLmVuZFJlPWkoZSkpLG4uc2tpcD9FKz1lOihuLmV4Y2x1ZGVCZWdpbiYmKEUrPWUpLHYoKSxuLnJldHVybkJlZ2lufHxuLmV4Y2x1ZGVCZWdpbnx8KEU9ZSkpLG0obixlKSxuLnJldHVybkJlZ2luPzA6ZS5sZW5ndGh9ZnVuY3Rpb24gZyh0KXt2YXIgZT10WzBdLG49cyhTLGUpO2lmKG4pe3ZhciByPVM7ci5za2lwP0UrPWU6KHIucmV0dXJuRW5kfHxyLmV4Y2x1ZGVFbmR8fChFKz1lKSx2KCksci5leGNsdWRlRW5kJiYoRT1lKSk7ZG97Uy5jbGFzc05hbWUmJihDKz1oKSxTLnNraXB8fFMuc3ViTGFuZ3VhZ2V8fChBKz1TLnJlbGV2YW5jZSksUz1TLnBhcmVudH13aGlsZShTIT09bi5wYXJlbnQpO3JldHVybiBuLnN0YXJ0cyYmKG4uZW5kU2FtZUFzQmVnaW4mJihuLnN0YXJ0cy5lbmRSZT1uLmVuZFJlKSxtKG4uc3RhcnRzLCIiKSksci5yZXR1cm5FbmQ/MDplLmxlbmd0aH19dmFyIHc9e307ZnVuY3Rpb24geCh0LHIpe3ZhciBvPXImJnJbMF07aWYoRSs9dCxudWxsPT1vKXJldHVybiB2KCksMDtpZigiYmVnaW4iPT13LnR5cGUmJiJlbmQiPT1yLnR5cGUmJncuaW5kZXg9PXIuaW5kZXgmJiIiPT09bylyZXR1cm4gRSs9ZS5zbGljZShyLmluZGV4LHIuaW5kZXgrMSksMTtpZih3PXIsImJlZ2luIj09PXIudHlwZSlyZXR1cm4geShyKTtpZigiaWxsZWdhbCI9PT1yLnR5cGUmJiFuKXRocm93IG5ldyBFcnJvcignSWxsZWdhbCBsZXhlbWUgIicrbysnIiBmb3IgbW9kZSAiJysoUy5jbGFzc05hbWV8fCI8dW5uYW1lZD4iKSsnIicpO2lmKCJlbmQiPT09ci50eXBlKXt2YXIgaT1nKHIpO2lmKHZvaWQgMCE9aSlyZXR1cm4gaX1yZXR1cm4gRSs9byxvLmxlbmd0aH12YXIgYj1GKHQpO2lmKCFiKXRocm93IG5ldyBFcnJvcignVW5rbm93biBsYW5ndWFnZTogIicrdCsnIicpO00oYik7dmFyIGssUz1yfHxiLE89e30sQz0iIjtmb3Ioaz1TO2shPT1iO2s9ay5wYXJlbnQpay5jbGFzc05hbWUmJihDPWMoay5jbGFzc05hbWUsIiIsITApK0MpO3ZhciBFPSIiLEE9MDt0cnl7dmFyIFIseixEPTA7d2hpbGUoMSl7aWYoUy50ZXJtaW5hdG9ycy5sYXN0SW5kZXg9RCxSPVMudGVybWluYXRvcnMuZXhlYyhlKSwhUilicmVhazt6PXgoZS5zdWJzdHJpbmcoRCxSLmluZGV4KSxSKSxEPVIuaW5kZXgren1mb3IoeChlLnN1YnN0cihEKSksaz1TO2sucGFyZW50O2s9ay5wYXJlbnQpay5jbGFzc05hbWUmJihDKz1oKTtyZXR1cm57cmVsZXZhbmNlOkEsdmFsdWU6QyxpbGxlZ2FsOiExLGxhbmd1YWdlOnQsdG9wOlN9fWNhdGNoKEkpe2lmKEkubWVzc2FnZSYmLTEhPT1JLm1lc3NhZ2UuaW5kZXhPZigiSWxsZWdhbCIpKXJldHVybntpbGxlZ2FsOiEwLHJlbGV2YW5jZTowLHZhbHVlOmYoZSl9O3Rocm93IEl9fWZ1bmN0aW9uIE4odCxlKXtlPWV8fHAubGFuZ3VhZ2VzfHxyKG8pO3ZhciBuPXtyZWxldmFuY2U6MCx2YWx1ZTpmKHQpfSxpPW47cmV0dXJuIGUuZmlsdGVyKEYpLmZpbHRlcihqKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1UKGUsdCwhMSk7ci5sYW5ndWFnZT1lLHIucmVsZXZhbmNlPmkucmVsZXZhbmNlJiYoaT1yKSxyLnJlbGV2YW5jZT5uLnJlbGV2YW5jZSYmKGk9bixuPXIpfSkpLGkubGFuZ3VhZ2UmJihuLnNlY29uZF9iZXN0PWkpLG59ZnVuY3Rpb24gRSh0KXtyZXR1cm4gcC50YWJSZXBsYWNlfHxwLnVzZUJSP3QucmVwbGFjZShjLChmdW5jdGlvbih0LGUpe3JldHVybiBwLnVzZUJSJiYiXG4iPT09dD8iPGJyPiI6cC50YWJSZXBsYWNlP2UucmVwbGFjZSgvXHQvZyxwLnRhYlJlcGxhY2UpOiIifSkpOnR9ZnVuY3Rpb24gQSh0LGUsbil7dmFyIHI9ZT9pW2VdOm4sbz1bdC50cmltKCldO3JldHVybiB0Lm1hdGNoKC9cYmhsanNcYi8pfHxvLnB1c2goImhsanMiKSwtMT09PXQuaW5kZXhPZihyKSYmby5wdXNoKHIpLG8uam9pbigiICIpLnRyaW0oKX1mdW5jdGlvbiBSKHQpe3ZhciBlLG4scixvLGkscz1tKHQpO3Yocyl8fChwLnVzZUJSPyhlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsImRpdiIpLGUuaW5uZXJIVE1MPXQuaW5uZXJIVE1MLnJlcGxhY2UoL1xuL2csIiIpLnJlcGxhY2UoLzxiclsgXC9dKj4vZywiXG4iKSk6ZT10LGk9ZS50ZXh0Q29udGVudCxyPXM/VChzLGksITApOk4oaSksbj1nKGUpLG4ubGVuZ3RoJiYobz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLCJkaXYiKSxvLmlubmVySFRNTD1yLnZhbHVlLHIudmFsdWU9dyhuLGcobyksaSkpLHIudmFsdWU9RShyLnZhbHVlKSx0LmlubmVySFRNTD1yLnZhbHVlLHQuY2xhc3NOYW1lPUEodC5jbGFzc05hbWUscyxyLmxhbmd1YWdlKSx0LnJlc3VsdD17bGFuZ3VhZ2U6ci5sYW5ndWFnZSxyZTpyLnJlbGV2YW5jZX0sci5zZWNvbmRfYmVzdCYmKHQuc2Vjb25kX2Jlc3Q9e2xhbmd1YWdlOnIuc2Vjb25kX2Jlc3QubGFuZ3VhZ2UscmU6ci5zZWNvbmRfYmVzdC5yZWxldmFuY2V9KSl9ZnVuY3Rpb24geih0KXtwPXkocCx0KX1mdW5jdGlvbiBEKCl7aWYoIUQuY2FsbGVkKXtELmNhbGxlZD0hMDt2YXIgdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJwcmUgY29kZSIpO24uZm9yRWFjaC5jYWxsKHQsUil9fWZ1bmN0aW9uIEkoKXthZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixELCExKSxhZGRFdmVudExpc3RlbmVyKCJsb2FkIixELCExKX1mdW5jdGlvbiBQKGUsbil7dmFyIHI9b1tlXT1uKHQpO2sociksci5yYXdEZWZpbml0aW9uPW4uYmluZChudWxsLHQpLHIuYWxpYXNlcyYmci5hbGlhc2VzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lbdF09ZX0pKX1mdW5jdGlvbiBCKCl7cmV0dXJuIHIobyl9ZnVuY3Rpb24gRih0KXtyZXR1cm4gdD0odHx8IiIpLnRvTG93ZXJDYXNlKCksb1t0XXx8b1tpW3RdXX1mdW5jdGlvbiBqKHQpe3ZhciBlPUYodCk7cmV0dXJuIGUmJiFlLmRpc2FibGVBdXRvZGV0ZWN0fXJldHVybiB0LmhpZ2hsaWdodD1ULHQuaGlnaGxpZ2h0QXV0bz1OLHQuZml4TWFya3VwPUUsdC5oaWdobGlnaHRCbG9jaz1SLHQuY29uZmlndXJlPXosdC5pbml0SGlnaGxpZ2h0aW5nPUQsdC5pbml0SGlnaGxpZ2h0aW5nT25Mb2FkPUksdC5yZWdpc3Rlckxhbmd1YWdlPVAsdC5saXN0TGFuZ3VhZ2VzPUIsdC5nZXRMYW5ndWFnZT1GLHQuYXV0b0RldGVjdGlvbj1qLHQuaW5oZXJpdD15LHQuSURFTlRfUkU9IlthLXpBLVpdXFx3KiIsdC5VTkRFUlNDT1JFX0lERU5UX1JFPSJbYS16QS1aX11cXHcqIix0Lk5VTUJFUl9SRT0iXFxiXFxkKyhcXC5cXGQrKT8iLHQuQ19OVU1CRVJfUkU9IigtPykoXFxiMFt4WF1bYS1mQS1GMC05XSt8KFxcYlxcZCsoXFwuXFxkKik/fFxcLlxcZCspKFtlRV1bLStdP1xcZCspPykiLHQuQklOQVJZX05VTUJFUl9SRT0iXFxiKDBiWzAxXSspIix0LlJFX1NUQVJURVJTX1JFPSIhfCE9fCE9PXwlfCU9fCZ8JiZ8Jj18XFwqfFxcKj18XFwrfFxcKz18LHwtfC09fC89fC98Onw7fDw8fDw8PXw8PXw8fD09PXw9PXw9fD4+Pj18Pj49fD49fD4+Pnw+Pnw+fFxcP3xcXFt8XFx7fFxcKHxcXF58XFxePXxcXHx8XFx8PXxcXHxcXHx8fiIsdC5CQUNLU0xBU0hfRVNDQVBFPXtiZWdpbjoiXFxcXFtcXHNcXFNdIixyZWxldmFuY2U6MH0sdC5BUE9TX1NUUklOR19NT0RFPXtjbGFzc05hbWU6InN0cmluZyIsYmVnaW46IiciLGVuZDoiJyIsaWxsZWdhbDoiXFxuIixjb250YWluczpbdC5CQUNLU0xBU0hfRVNDQVBFXX0sdC5RVU9URV9TVFJJTkdfTU9ERT17Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiciJyxlbmQ6JyInLGlsbGVnYWw6IlxcbiIsY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRV19LHQuUEhSQVNBTF9XT1JEU19NT0RFPXtiZWdpbjovXGIoYXxhbnx0aGV8YXJlfEknbXxpc24ndHxkb24ndHxkb2Vzbid0fHdvbid0fGJ1dHxqdXN0fHNob3VsZHxwcmV0dHl8c2ltcGx5fGVub3VnaHxnb25uYXxnb2luZ3x3dGZ8c298c3VjaHx3aWxsfHlvdXx5b3VyfHRoZXl8bGlrZXxtb3JlKVxiL30sdC5DT01NRU5UPWZ1bmN0aW9uKGUsbixyKXt2YXIgbz10LmluaGVyaXQoe2NsYXNzTmFtZToiY29tbWVudCIsYmVnaW46ZSxlbmQ6bixjb250YWluczpbXX0scnx8e30pO3JldHVybiBvLmNvbnRhaW5zLnB1c2godC5QSFJBU0FMX1dPUkRTX01PREUpLG8uY29udGFpbnMucHVzaCh7Y2xhc3NOYW1lOiJkb2N0YWciLGJlZ2luOiIoPzpUT0RPfEZJWE1FfE5PVEV8QlVHfFhYWCk6IixyZWxldmFuY2U6MH0pLG99LHQuQ19MSU5FX0NPTU1FTlRfTU9ERT10LkNPTU1FTlQoIi8vIiwiJCIpLHQuQ19CTE9DS19DT01NRU5UX01PREU9dC5DT01NRU5UKCIvXFwqIiwiXFwqLyIpLHQuSEFTSF9DT01NRU5UX01PREU9dC5DT01NRU5UKCIjIiwiJCIpLHQuTlVNQkVSX01PREU9e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjp0Lk5VTUJFUl9SRSxyZWxldmFuY2U6MH0sdC5DX05VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5DX05VTUJFUl9SRSxyZWxldmFuY2U6MH0sdC5CSU5BUllfTlVNQkVSX01PREU9e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjp0LkJJTkFSWV9OVU1CRVJfUkUscmVsZXZhbmNlOjB9LHQuQ1NTX05VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5OVU1CRVJfUkUrIiglfGVtfGV4fGNofHJlbXx2d3x2aHx2bWlufHZtYXh8Y218bW18aW58cHR8cGN8cHh8ZGVnfGdyYWR8cmFkfHR1cm58c3xtc3xIenxrSHp8ZHBpfGRwY218ZHBweCk/IixyZWxldmFuY2U6MH0sdC5SRUdFWFBfTU9ERT17Y2xhc3NOYW1lOiJyZWdleHAiLGJlZ2luOi9cLy8sZW5kOi9cL1tnaW11eV0qLyxpbGxlZ2FsOi9cbi8sY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRSx7YmVnaW46L1xbLyxlbmQ6L1xdLyxyZWxldmFuY2U6MCxjb250YWluczpbdC5CQUNLU0xBU0hfRVNDQVBFXX1dfSx0LlRJVExFX01PREU9e2NsYXNzTmFtZToidGl0bGUiLGJlZ2luOnQuSURFTlRfUkUscmVsZXZhbmNlOjB9LHQuVU5ERVJTQ09SRV9USVRMRV9NT0RFPXtjbGFzc05hbWU6InRpdGxlIixiZWdpbjp0LlVOREVSU0NPUkVfSURFTlRfUkUscmVsZXZhbmNlOjB9LHQuTUVUSE9EX0dVQVJEPXtiZWdpbjoiXFwuXFxzKiIrdC5VTkRFUlNDT1JFX0lERU5UX1JFLHJlbGV2YW5jZTowfSx0fSkpfSxkMmJiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4MjVhIiksbz1uKCIzYmJlIik7dC5leHBvcnRzPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbigpe3ZhciB0LGU9ITEsbj17fTt0cnl7dD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCx0LmNhbGwobixbXSksZT1uIGluc3RhbmNlb2YgQXJyYXl9Y2F0Y2goaSl7fXJldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiByKG4pLG8oaSksZT90LmNhbGwobixpKTpuLl9fcHJvdG9fXz1pLG59fSgpOnZvaWQgMCl9LGQzYjc6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjAwZWUiKSxvPW4oIjZlZWIiKSxpPW4oImIwNDEiKTtyfHxvKE9iamVjdC5wcm90b3R5cGUsInRvU3RyaW5nIixpLHt1bnNhZmU6ITB9KX0sZDQ0ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiOWJmMiIpLmYsbz1uKCI1MTM1IiksaT1uKCJiNjIyIikscz1pKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIW8odD1uP3Q6dC5wcm90b3R5cGUscykmJnIodCxzLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sZDdiNjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi41LjI0OGgtNy42MzdhMS4yNSAxLjI1IDAgMDAwIDIuNWgxLjA4NmEuMjUuMjUgMCAwMS4yMTEuMzg0TDQuNzggMjEuMDE3YS41LjUgMCAwMS0uNDIyLjIzMUgxLjVhMS4yNSAxLjI1IDAgMDAwIDIuNWg3LjYzN2ExLjI1IDEuMjUgMCAwMDAtMi41SDguMDUxYS4yNS4yNSAwIDAxLS4yMTEtLjM4NEwxOS4yMiAyLjk4YS41LjUgMCAwMS40MjItLjIzMkgyMi41YTEuMjUgMS4yNSAwIDAwMC0yLjV6In19KV0pKX19fSxkYTg0OmZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuTWF0aD09TWF0aCYmdH07dC5leHBvcnRzPW4oIm9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzJiZnbG9iYWxUaGlzKXx8bigib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93KXx8bigib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYpfHxuKCJvYmplY3QiPT10eXBlb2YgZSYmZSl8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCl9KS5jYWxsKHRoaXMsbigiYzhiYSIpKX0sZGM0NDpmdW5jdGlvbih0LGUsbil7fSxkZGIwOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYTg0Iiksbz1uKCJmZGJjIiksaT1uKCJlMjYwIikscz1uKCI5MTEyIiksYT1uKCJiNjIyIiksYz1hKCJpdGVyYXRvciIpLGg9YSgidG9TdHJpbmdUYWciKSxwPWkudmFsdWVzO2Zvcih2YXIgdSBpbiBvKXt2YXIgZj1yW3VdLGw9ZiYmZi5wcm90b3R5cGU7aWYobCl7aWYobFtjXSE9PXApdHJ5e3MobCxjLHApfWNhdGNoKHYpe2xbY109cH1pZihsW2hdfHxzKGwsaCx1KSxvW3VdKWZvcih2YXIgZCBpbiBpKWlmKGxbZF0hPT1pW2RdKXRyeXtzKGwsZCxpW2RdKX1jYXRjaCh2KXtsW2RdPWlbZF19fX19LGRmNzU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImNhODQiKSxvPW4oIjc4MzkiKTt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsbyl9fSxlMDFhOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiMjNlNyIpLG89bigiODNhYiIpLGk9bigiZGE4NCIpLHM9bigiNTEzNSIpLGE9bigiODYxZCIpLGM9bigiOWJmMiIpLmYsaD1uKCJlODkzIikscD1pLlN5bWJvbDtpZihvJiYiZnVuY3Rpb24iPT10eXBlb2YgcCYmKCEoImRlc2NyaXB0aW9uImluIHAucHJvdG90eXBlKXx8dm9pZCAwIT09cCgpLmRlc2NyaXB0aW9uKSl7dmFyIHU9e30sZj1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8MXx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3ZvaWQgMDpTdHJpbmcoYXJndW1lbnRzWzBdKSxlPXRoaXMgaW5zdGFuY2VvZiBmP25ldyBwKHQpOnZvaWQgMD09PXQ/cCgpOnAodCk7cmV0dXJuIiI9PT10JiYodVtlXT0hMCksZX07aChmLHApO3ZhciBsPWYucHJvdG90eXBlPXAucHJvdG90eXBlO2wuY29uc3RydWN0b3I9Zjt2YXIgZD1sLnRvU3RyaW5nLHY9IlN5bWJvbCh0ZXN0KSI9PVN0cmluZyhwKCJ0ZXN0IikpLG09L15TeW1ib2xcKCguKilcKVteKV0rJC87YyhsLCJkZXNjcmlwdGlvbiIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1hKHRoaXMpP3RoaXMudmFsdWVPZigpOnRoaXMsZT1kLmNhbGwodCk7aWYocyh1LHQpKXJldHVybiIiO3ZhciBuPXY/ZS5zbGljZSg3LC0xKTplLnJlcGxhY2UobSwiJDEiKTtyZXR1cm4iIj09PW4/dm9pZCAwOm59fSkscih7Z2xvYmFsOiEwLGZvcmNlZDohMH0se1N5bWJvbDpmfSl9fSxlMTYzOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI1MTM1Iiksbz1uKCI3YjBiIiksaT1uKCJmNzcyIikscz1uKCJlMTc3IiksYT1pKCJJRV9QUk9UTyIpLGM9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9cz9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9byh0KSxyKHQsYSk/dFthXToiZnVuY3Rpb24iPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD9jOm51bGx9fSxlMTc3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDM5Iik7dC5leHBvcnRzPSFyKChmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPW51bGwsT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyB0KSE9PXQucHJvdG90eXBlfSkpfSxlMjYwOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiZmM2YSIpLG89bigiNDRkMiIpLGk9bigiM2Y4YyIpLHM9bigiNjlmMyIpLGE9bigiN2RkMCIpLGM9IkFycmF5IEl0ZXJhdG9yIixoPXMuc2V0LHA9cy5nZXR0ZXJGb3IoYyk7dC5leHBvcnRzPWEoQXJyYXksIkFycmF5IiwoZnVuY3Rpb24odCxlKXtoKHRoaXMse3R5cGU6Yyx0YXJnZXQ6cih0KSxpbmRleDowLGtpbmQ6ZX0pfSksKGZ1bmN0aW9uKCl7dmFyIHQ9cCh0aGlzKSxlPXQudGFyZ2V0LG49dC5raW5kLHI9dC5pbmRleCsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odC50YXJnZXQ9dm9pZCAwLHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pOiJrZXlzIj09bj97dmFsdWU6cixkb25lOiExfToidmFsdWVzIj09bj97dmFsdWU6ZVtyXSxkb25lOiExfTp7dmFsdWU6W3IsZVtyXV0sZG9uZTohMX19KSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxvKCJrZXlzIiksbygidmFsdWVzIiksbygiZW50cmllcyIpfSxlNDhjOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6aCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGhdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIyLjYwOC4xNjFhLjUuNSAwIDAwLS41NDUuMTA4TDE5LjQ3MiAyLjg2YS4yNS4yNSAwIDAxLS4yOTIuMDQ1IDEyLjUzNyAxMi41MzcgMCAwMC0xMi45NjYuODY1QTEyLjI1OSAxMi4yNTkgMCAwMDYuMSAyMy42MzJhMS4yNSAxLjI1IDAgMDAxLjQ3Ni0yLjAxOCA5Ljc1OSA5Ljc1OSAwIDAxLjA5MS0xNS44MDkgMTAgMTAgMCAwMTkuNDY2LTEuMS4yNS4yNSAwIDAxLjA4NC40MDlsLTEuODUgMS44NWEuNS41IDAgMDAuMzU0Ljg1M2g2LjdhLjUuNSAwIDAwLjUtLjVWLjYyM2EuNS41IDAgMDAtLjMxMy0uNDYyeiJ9fSldKSl9fX0sZTUzODpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYjYyMiIpO2UuZj1yfSxlNzZjOmZ1bmN0aW9uKHQsZSxuKXt9LGU3YTg6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLnIoZSk7dmFyIHI9bigiMTNhZCIpO2Z1bmN0aW9uIG8odCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIGk9dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYoaSE9cyl7aWYoIWkuc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihpLmlzVGV4dCYmaS50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO2kudGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoaS5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1vKGkuY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPWkubm9kZVNpemV9ZWxzZSBuKz1pLm5vZGVTaXplfX1mdW5jdGlvbiBpKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQscz1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09cylyZXR1cm4gbz09cz9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0tcyksaD1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIHA9MCx1PU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUocDx1JiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1wLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1wLTFdKXArKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBmPWkoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihmKXJldHVybiBmfW4tPWgsci09aH1lbHNlIG4tPWgsci09aH19dmFyIHM9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuc2l6ZSs9dFtuXS5ub2RlU2l6ZX0sYT17Zmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIGg9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC1oKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWgpLG4scitoKX1zPWN9fSxzLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuc2l6ZSx0KX0scy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dmFyIG89IiIsaT0hMDtyZXR1cm4gdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihzLGEpe3MuaXNUZXh0PyhvKz1zLnRleHQuc2xpY2UoTWF0aC5tYXgodCxhKS1hLGUtYSksaT0hbik6cy5pc0xlYWYmJnI/KG8rPXIsaT0hbik6IWkmJnMuaXNCbG9jayYmKG8rPW4saT0hMCl9KSwwKSxvfSxzLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IHMocix0aGlzLnNpemUrdC5zaXplKX0scy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIG49W10scj0wO2lmKGU+dClmb3IodmFyIG89MCxpPTA7aTxlO28rKyl7dmFyIGE9dGhpcy5jb250ZW50W29dLGM9aSthLm5vZGVTaXplO2M+dCYmKChpPHR8fGM+ZSkmJihhPWEuaXNUZXh0P2EuY3V0KE1hdGgubWF4KDAsdC1pKSxNYXRoLm1pbihhLnRleHQubGVuZ3RoLGUtaSkpOmEuY3V0KE1hdGgubWF4KDAsdC1pLTEpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaS0xKSkpLG4ucHVzaChhKSxyKz1hLm5vZGVTaXplKSxpPWN9cmV0dXJuIG5ldyBzKG4scil9LHMucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9zLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgcyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LHMucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBzKHIsbyl9LHMucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmNvbnRlbnRbZV0uZXEodC5jb250ZW50W2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxhLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxhLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LHMucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxzLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LHMucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY29udGVudFtlXTt0KHIsbixlKSxuKz1yLm5vZGVTaXplfX0scy5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxvKHRoaXMsdCxlKX0scy5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSksaSh0aGlzLHQsZSxuKX0scy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIGgoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIGgodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIG49MCxyPTA7O24rKyl7dmFyIG89dGhpcy5jaGlsZChuKSxpPXIrby5ub2RlU2l6ZTtpZihpPj10KXJldHVybiBpPT10fHxlPjA/aChuKzEsaSk6aChuLHIpO3I9aX19LHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0scy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0scy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0scy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBzLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgcyhlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxzLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIHMuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBzKGV8fHQsbil9LHMuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gcy5lbXB0eTtpZih0IGluc3RhbmNlb2YgcylyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgcyhbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHMucHJvdG90eXBlLGEpO3ZhciBjPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBoKHQsZSl7cmV0dXJuIGMuaW5kZXg9dCxjLm9mZnNldD1lLGN9ZnVuY3Rpb24gcCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighcCh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhcCh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1zLmVtcHR5PW5ldyBzKFtdLDApO3ZhciB1PWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX11LnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sdS5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LHUucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4hMDtyZXR1cm4hMX0sdS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZwKHRoaXMuYXR0cnMsdC5hdHRycyl9LHUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0fSx1LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSx1LnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sdS5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gdS5ub25lO2lmKHQgaW5zdGFuY2VvZiB1KXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0sdS5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGw9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LGQ9e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHYodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGg9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGghPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHYocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIG0odCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz1tKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIHkodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiBnKHQsZSxuLDApfWZ1bmN0aW9uIGcodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPWcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPU0obix0KSxjPWEuc3RhcnQsaD1hLmVuZDtyZXR1cm4gUyhpLE8odCxjLGgsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIFMocCx1LmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQodS5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIFMoaSxDKHQsZSxyKSl9ZnVuY3Rpb24gdyh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24geCh0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB3KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGIodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBrKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGIodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKyliKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZiKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBTKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIE8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJngodCxlLG8rMSksYT1yLmRlcHRoPm8mJngobixyLG8rMSksYz1bXTtyZXR1cm4gayhudWxsLHQsbyxjKSxpJiZhJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh3KGksYSksYihTKGksTyh0LGUsbixyLG8rMSkpLGMpKTooaSYmYihTKGksQyh0LGUsbysxKSksYyksayhlLG4sbyxjKSxhJiZiKFMoYSxDKG4scixvKzEpKSxjKSksayhyLG51bGwsbyxjKSxuZXcgcyhjKX1mdW5jdGlvbiBDKHQsZSxuKXt2YXIgcj1bXTtpZihrKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89eCh0LGUsbisxKTtiKFMobyxDKHQsZSxuKzEpKSxyKX1yZXR1cm4gayhlLG51bGwsbixyKSxuZXcgcyhyKX1mdW5jdGlvbiBNKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KHMuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX1kLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sbC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBsKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sbC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgbCh2KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGwucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sbC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sbC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxsLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGwuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBsKHMuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGwubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGwodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsLnByb3RvdHlwZSxkKSxsLmVtcHR5PW5ldyBsKHMuZW1wdHksMCwwKTt2YXIgVD1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxOPXtwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZG9jOntjb25maWd1cmFibGU6ITB9LHRleHRPZmZzZXQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUFmdGVyOntjb25maWd1cmFibGU6ITB9LG5vZGVCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH19O1QucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sTi5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sTi5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sVC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxULnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LFQucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LFQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LFQucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LFQucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxULnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LE4udGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LE4ubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LE4ubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LFQucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIHUubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxULnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LFQucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LFQucHJvdG90eXBlLmJsb2NrUmFuZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgbj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtuPj0wO24tLSlpZih0LnBvczw9dGhpcy5lbmQobikmJighZXx8ZSh0aGlzLm5vZGUobikpKSlyZXR1cm4gbmV3IHoodGhpcyx0LG4pfSxULnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LFQucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxULnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sVC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sVC5yZXNvbHZlPWZ1bmN0aW9uKHQsZSl7aWYoIShlPj0wJiZlPD10LmNvbnRlbnQuc2l6ZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrZSsiIG91dCBvZiByYW5nZSIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLGk9dDs7KXt2YXIgcz1pLmNvbnRlbnQuZmluZEluZGV4KG8pLGE9cy5pbmRleCxjPXMub2Zmc2V0LGg9by1jO2lmKG4ucHVzaChpLGEscitjKSwhaClicmVhaztpZihpPWkuY2hpbGQoYSksaS5pc1RleHQpYnJlYWs7bz1oLTEscis9YysxfXJldHVybiBuZXcgVChlLG4sbyl9LFQucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248RS5sZW5ndGg7bisrKXt2YXIgcj1FW25dO2lmKHIucG9zPT1lJiZyLmRvYz09dClyZXR1cm4gcn12YXIgbz1FW0FdPVQucmVzb2x2ZSh0LGUpO3JldHVybiBBPShBKzEpJVIsb30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVC5wcm90b3R5cGUsTik7dmFyIEU9W10sQT0wLFI9MTIsej1mdW5jdGlvbih0LGUsbil7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWUsdGhpcy5kZXB0aD1ufSxEPXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O0Quc3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uYmVmb3JlKHRoaXMuZGVwdGgrMSl9LEQuZW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5hZnRlcih0aGlzLmRlcHRoKzEpfSxELnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxELnN0YXJ0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uaW5kZXgodGhpcy5kZXB0aCl9LEQuZW5kSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHoucHJvdG90eXBlLEQpO3ZhciBJPU9iamVjdC5jcmVhdGUobnVsbCksUD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fHMuZW1wdHksdGhpcy5tYXJrcz1yfHx1Lm5vbmV9LEI9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtCLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZj8xOjIrdGhpcy5jb250ZW50LnNpemV9LEIuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnR9LFAucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LFAucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKHQpfSxQLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3RoaXMuY29udGVudC5mb3JFYWNoKHQpfSxQLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxQLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLHQpfSxCLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsIiIpfSxQLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxCLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkfSxCLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZH0sUC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LFAucHJvdG90eXBlLnNhbWVNYXJrdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTWFya3VwKHQudHlwZSx0LmF0dHJzLHQubWFya3MpfSxQLnByb3RvdHlwZS5oYXNNYXJrdXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGU9PXQmJnAodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8SSkmJnUuc2FtZVNldCh0aGlzLm1hcmtzLG58fHUubm9uZSl9LFAucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PW51bGwpLHQ9PXRoaXMuY29udGVudD90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LFAucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLmNvbnRlbnQsdCl9LFAucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxQLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5jb250ZW50LnNpemUpLHZvaWQgMD09PW4mJihuPSExKSx0PT1lKXJldHVybiBsLmVtcHR5O3ZhciByPXRoaXMucmVzb2x2ZSh0KSxvPXRoaXMucmVzb2x2ZShlKSxpPW4/MDpyLnNoYXJlZERlcHRoKGUpLHM9ci5zdGFydChpKSxhPXIubm9kZShpKSxjPWEuY29udGVudC5jdXQoci5wb3MtcyxvLnBvcy1zKTtyZXR1cm4gbmV3IGwoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sUC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHkodGhpcy5yZXNvbHZlKHQpLHRoaXMucmVzb2x2ZShlKSxuKX0sUC5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sUC5wcm90b3R5cGUuY2hpbGRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O3JldHVybntub2RlOnRoaXMuY29udGVudC5tYXliZUNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9fSxQLnByb3RvdHlwZS5jaGlsZEJlZm9yZT1mdW5jdGlvbih0KXtpZigwPT10KXJldHVybntub2RlOm51bGwsaW5kZXg6MCxvZmZzZXQ6MH07dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtpZihyPHQpcmV0dXJue25vZGU6dGhpcy5jb250ZW50LmNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9O3ZhciBvPXRoaXMuY29udGVudC5jaGlsZChuLTEpO3JldHVybntub2RlOm8saW5kZXg6bi0xLG9mZnNldDpyLW8ubm9kZVNpemV9fSxQLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBULnJlc29sdmVDYWNoZWQodGhpcyx0KX0sUC5wcm90b3R5cGUucmVzb2x2ZU5vQ2FjaGU9ZnVuY3Rpb24odCl7cmV0dXJuIFQucmVzb2x2ZSh0aGlzLHQpfSxQLnByb3RvdHlwZS5yYW5nZUhhc01hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSExO3JldHVybiBlPnQmJnRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaXNJblNldCh0Lm1hcmtzKSYmKHI9ITApLCFyfSkpLHJ9LEIuaXNCbG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQmxvY2t9LEIuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sQi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudH0sQi5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lfSxCLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sQi5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0xlYWZ9LEIuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNBdG9tfSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxqKHRoaXMubWFya3MsdCl9LFAucHJvdG90eXBlLmNvbnRlbnRNYXRjaEF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsMCx0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxlZCBjb250ZW50TWF0Y2hBdCBvbiBhIG5vZGUgd2l0aCBpbnZhbGlkIGNvbnRlbnQiKTtyZXR1cm4gZX0sUC5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPXMuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIGk9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxhPWkmJmkubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWF8fCFhLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgYz1yO2M8bztjKyspaWYoIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGMpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sUC5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxQLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LFAucHJvdG90eXBlLmRlZmF1bHRDb250ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2hBdCh0KS5kZWZhdWx0VHlwZX0sUC5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sUC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sUC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlLmZyb21KU09OIik7dmFyIG49bnVsbDtpZihlLm1hcmtzKXtpZighQXJyYXkuaXNBcnJheShlLm1hcmtzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBtYXJrIGRhdGEgZm9yIE5vZGUuZnJvbUpTT04iKTtuPWUubWFya3MubWFwKHQubWFya0Zyb21KU09OKX1pZigidGV4dCI9PWUudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdGV4dCBub2RlIGluIEpTT04iKTtyZXR1cm4gdC50ZXh0KGUudGV4dCxuKX12YXIgcj1zLmZyb21KU09OKHQsZS5jb250ZW50KTtyZXR1cm4gdC5ub2RlVHlwZShlLnR5cGUpLmNyZWF0ZShlLmF0dHJzLHIsbil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFAucHJvdG90eXBlLEIpO3ZhciBGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7aWYodC5jYWxsKHRoaXMsZSxuLG51bGwsbyksIXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkVtcHR5IHRleHQgbm9kZXMgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy50ZXh0PXJ9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3RleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LG5vZGVTaXplOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZz90aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpOmoodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShQKTtmdW5jdGlvbiBqKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pZT10W25dLnR5cGUubmFtZSsiKCIrZSsiKSI7cmV0dXJuIGV9dmFyIF89ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sJD17aW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxkZWZhdWx0VHlwZTp7Y29uZmlndXJhYmxlOiEwfSxlZGdlQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O18ucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgSih0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gXy5lbXB0eTt2YXIgcj1WKG4pO24ubmV4dCYmbi5lcnIoIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dCIpO3ZhciBvPVEoWChyKSk7cmV0dXJuIHR0KG8sbiksb30sXy5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWlmKHRoaXMubmV4dFtlXT09dClyZXR1cm4gdGhpcy5uZXh0W2UrMV07cmV0dXJuIG51bGx9LF8ucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSwkLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sJC5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMubmV4dC5sZW5ndGg7dCs9Mil7dmFyIGU9dGhpcy5uZXh0W3RdO2lmKCFlLmlzVGV4dCYmIWUuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiBlfX0sXy5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sXy5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGksYSl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gcy5mcm9tKGEubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgaD0wO2g8aS5uZXh0Lmxlbmd0aDtoKz0yKXt2YXIgcD1pLm5leHRbaF0sdT1pLm5leHRbaCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBmPW8odSxhLmNvbmNhdChwKSk7aWYoZilyZXR1cm4gZn19fXJldHVybiBvKHRoaXMsW10pfSxfLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LF8ucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LCQuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSxfLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxfLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKF8ucHJvdG90eXBlLCQpLF8uZW1wdHk9bmV3IF8oITApO3ZhciBKPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxMPXtuZXh0Ontjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBWKHQpe3ZhciBlPVtdO2Rve2UucHVzaChxKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gVyh0KXtmb3IodmFyIGU9Ryh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1LKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSCh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gSyh0LGUpe3ZhciBuPUgodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9IKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIFUodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBHKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPVYodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49VSh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBYKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBoPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxoKSxvKGkodC5leHByLGgpLGgpLFtyKGgpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgZj1uKCk7byhpKHQuZXhwcixwKSxmKSxwPWZ9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGw9dC5taW47bDx0Lm1heDtsKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBZKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFkpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiBRKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3IF8oci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChZKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gdHQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLGg9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YoaCkmJnIucHVzaChoKX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gZXQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIG50KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gcnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IHN0KHRbbl0pO3JldHVybiBlfUwubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxKLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sSi5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSi5wcm90b3R5cGUsTCk7dmFyIG90PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9cnQobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9ZXQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LGl0PXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtpdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxpdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LGl0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PV8uZW1wdHl9LGl0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxvdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW2VdLmlzUmVxdWlyZWQmJighdHx8IShlIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0sb3QucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0sb3QucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6bnQodGhpcy5hdHRycyx0KX0sb3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IFAodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxzLmZyb20oZSksdS5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9cy5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IFAodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLHUuc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9cy5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShzLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgUCh0aGlzLHQsZS5hcHBlbmQobyksdS5zZXRGcm9tKG4pKTpudWxsfSxvdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIWV8fCFlLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5jaGlsZENvdW50O24rKylpZighdGhpcy5hbGxvd3NNYXJrcyh0LmNoaWxkKG4pLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmFsbG93c01hcmtUeXBlKHRbZV0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgZSxuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5hbGxvd3NNYXJrVHlwZSh0W25dLnR5cGUpP2UmJmUucHVzaCh0W25dKTplfHwoZT10LnNsaWNlKDAsbikpO3JldHVybiBlP2UubGVuZ3RoP2U6dS5lbXB0eTp0fSxvdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IG90KHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG90LnByb3RvdHlwZSxpdCk7dmFyIHN0PWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LGF0PXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTthdC5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0LnByb3RvdHlwZSxhdCk7dmFyIGN0PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1ydChyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89ZXQodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgdSh0aGlzLG8pfTtjdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmluc3RhbmNlP3RoaXMuaW5zdGFuY2U6bmV3IHUodGhpcyxudCh0aGlzLmF0dHJzLHQpKX0sY3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCkscj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIG5bdF09bmV3IGN0KHQscisrLGUsbyl9KSksbn0sY3QucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGN0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdFtlXX0sY3QucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciBodD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcGVjPXt9LHQpdGhpcy5zcGVjW2VdPXRbZV07dGhpcy5zcGVjLm5vZGVzPXJbImEiXS5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1yWyJhIl0uZnJvbSh0Lm1hcmtzKSx0aGlzLm5vZGVzPW90LmNvbXBpbGUodGhpcy5zcGVjLm5vZGVzLHRoaXMpLHRoaXMubWFya3M9Y3QuY29tcGlsZSh0aGlzLnNwZWMubWFya3MsdGhpcyk7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG8gaW4gdGhpcy5ub2Rlcyl7aWYobyBpbiB0aGlzLm1hcmtzKXRocm93IG5ldyBSYW5nZUVycm9yKG8rIiBjYW4gbm90IGJlIGJvdGggYSBub2RlIGFuZCBhIG1hcmsiKTt2YXIgaT10aGlzLm5vZGVzW29dLHM9aS5zcGVjLmNvbnRlbnR8fCIiLGE9aS5zcGVjLm1hcmtzO2kuY29udGVudE1hdGNoPW5bc118fChuW3NdPV8ucGFyc2Uocyx0aGlzLm5vZGVzKSksaS5pbmxpbmVDb250ZW50PWkuY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsaS5tYXJrU2V0PSJfIj09YT9udWxsOmE/cHQodGhpcyxhLnNwbGl0KCIgIikpOiIiIT1hJiZpLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGMgaW4gdGhpcy5tYXJrcyl7dmFyIGg9dGhpcy5tYXJrc1tjXSxwPWguc3BlYy5leGNsdWRlcztoLmV4Y2x1ZGVkPW51bGw9PXA/W2hdOiIiPT1wP1tdOnB0KHRoaXMscC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gcHQodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59aHQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIG90KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0saHQucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBGKG4sbi5kZWZhdWx0QXR0cnMsdCx1LnNldEZyb20oZSkpfSxodC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5tYXJrc1t0XSksdC5jcmVhdGUoZSl9LGh0LnByb3RvdHlwZS5ub2RlRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIFAuZnJvbUpTT04odGhpcyx0KX0saHQucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gdS5mcm9tSlNPTih0aGlzLHQpfSxodC5wcm90b3R5cGUubm9kZVR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlc1t0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVW5rbm93biBub2RlIHR5cGU6ICIrdCk7cmV0dXJuIGV9O3ZhciB1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLnJ1bGVzPWUsdGhpcy50YWdzPVtdLHRoaXMuc3R5bGVzPVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC50YWc/bi50YWdzLnB1c2godCk6dC5zdHlsZSYmbi5zdHlsZXMucHVzaCh0KX0pKX07dXQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyB4dCh0aGlzLGUsITEpO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLG4uZmluaXNoKCl9LHV0LnByb3RvdHlwZS5wYXJzZVNsaWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyB4dCh0aGlzLGUsITApO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLGwubWF4T3BlbihuLmZpbmlzaCgpKX0sdXQucHJvdG90eXBlLm1hdGNoVGFnPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLnRhZ3MubGVuZ3RoO24rKyl7dmFyIHI9dGhpcy50YWdzW25dO2lmKFN0KHQsci50YWcpJiYodm9pZCAwPT09ci5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1yLm5hbWVzcGFjZSkmJighci5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KHIuY29udGV4dCkpKXtpZihyLmdldEF0dHJzKXt2YXIgbz1yLmdldEF0dHJzKHQpO2lmKCExPT09byljb250aW51ZTtyLmF0dHJzPW99cmV0dXJuIHJ9fX0sdXQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wO3I8dGhpcy5zdHlsZXMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5zdHlsZXNbcl07aWYoISgwIT1vLnN0eWxlLmluZGV4T2YodCl8fG8uY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KXx8by5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9by5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8by5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKGUpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0sdXQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1DdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUN0KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaSgpO3JldHVybiBlfSx1dC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21QYXJzZXJ8fCh0LmNhY2hlZC5kb21QYXJzZXI9bmV3IHV0KHQsdXQuc2NoZW1hUnVsZXModCkpKX07dmFyIGZ0PXthZGRyZXNzOiEwLGFydGljbGU6ITAsYXNpZGU6ITAsYmxvY2txdW90ZTohMCxjYW52YXM6ITAsZGQ6ITAsZGl2OiEwLGRsOiEwLGZpZWxkc2V0OiEwLGZpZ2NhcHRpb246ITAsZmlndXJlOiEwLGZvb3RlcjohMCxmb3JtOiEwLGgxOiEwLGgyOiEwLGgzOiEwLGg0OiEwLGg1OiEwLGg2OiEwLGhlYWRlcjohMCxoZ3JvdXA6ITAsaHI6ITAsbGk6ITAsbm9zY3JpcHQ6ITAsb2w6ITAsb3V0cHV0OiEwLHA6ITAscHJlOiEwLHNlY3Rpb246ITAsdGFibGU6ITAsdGZvb3Q6ITAsdWw6ITB9LGx0PXtoZWFkOiEwLG5vc2NyaXB0OiEwLG9iamVjdDohMCxzY3JpcHQ6ITAsc3R5bGU6ITAsdGl0bGU6ITB9LGR0PXtvbDohMCx1bDohMH0sdnQ9MSxtdD0yLHl0PTQ7ZnVuY3Rpb24gZ3QodCl7cmV0dXJuKHQ/dnQ6MCl8KCJmdWxsIj09PXQ/bXQ6MCl9dmFyIHd0PWZ1bmN0aW9uKHQsZSxuLHIsbyxpKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1yLHRoaXMubWF0Y2g9b3x8KGkmeXQ/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPWksdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPXUubm9uZX07d3QucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUocy5mcm9tKHQpKTtpZighZSl7dmFyIG4scj10aGlzLnR5cGUuY29udGVudE1hdGNoO3JldHVybihuPXIuZmluZFdyYXBwaW5nKHQudHlwZSkpPyh0aGlzLm1hdGNoPXIsbik6bnVsbH10aGlzLm1hdGNoPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKX1yZXR1cm4gdGhpcy5tYXRjaC5maW5kV3JhcHBpbmcodC50eXBlKX0sd3QucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbih0KXtpZighKHRoaXMub3B0aW9ucyZ2dCkpe3ZhciBlLG49dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV07biYmbi5pc1RleHQmJihlPS9bIFx0XHJcblx1MDAwY10rJC8uZXhlYyhuLnRleHQpKSYmKG4udGV4dC5sZW5ndGg9PWVbMF0ubGVuZ3RoP3RoaXMuY29udGVudC5wb3AoKTp0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXT1uLndpdGhUZXh0KG4udGV4dC5zbGljZSgwLG4udGV4dC5sZW5ndGgtZVswXS5sZW5ndGgpKSl9dmFyIHI9cy5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShzLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfTt2YXIgeHQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bix0aGlzLnBlbmRpbmdNYXJrcz1bXTt2YXIgcixvPWUudG9wTm9kZSxpPWd0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj95dDowKTtyPW8/bmV3IHd0KG8udHlwZSxvLmF0dHJzLHUubm9uZSwhMCxlLnRvcE1hdGNofHxvLnR5cGUuY29udGVudE1hdGNoLGkpOm5ldyB3dChuP251bGw6dC5zY2hlbWEudG9wTm9kZVR5cGUsbnVsbCx1Lm5vbmUsITAsbnVsbCxpKSx0aGlzLm5vZGVzPVtyXSx0aGlzLm9wZW49MCx0aGlzLmZpbmQ9ZS5maW5kUG9zaXRpb25zLHRoaXMubmVlZHNCbG9jaz0hMX0sYnQ9e3RvcDp7Y29uZmlndXJhYmxlOiEwfSxjdXJyZW50UG9zOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBrdCh0KXtmb3IodmFyIGU9dC5maXJzdENoaWxkLG49bnVsbDtlO2U9ZS5uZXh0U2libGluZyl7dmFyIHI9MT09ZS5ub2RlVHlwZT9lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtyJiZkdC5oYXNPd25Qcm9wZXJ0eShyKSYmbj8obi5hcHBlbmRDaGlsZChlKSxlPW4pOiJsaSI9PXI/bj1lOnImJihuPW51bGwpfX1mdW5jdGlvbiBTdCh0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQubXNNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfWZ1bmN0aW9uIE90KHQpe3ZhciBlLG49L1xzKihbXHctXSspXHMqOlxzKihbXjtdKykvZyxyPVtdO3doaWxlKGU9bi5leGVjKHQpKXIucHVzaChlWzFdLGVbMl0udHJpbSgpKTtyZXR1cm4gcn1mdW5jdGlvbiBDdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9YnQudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LHh0LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhPdChlKSk6bnVsbDtpZihudWxsIT1uKWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKXRoaXMuYWRkUGVuZGluZ01hcmsobltyXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhuW29dKX19LHh0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZ2dCluLm9wdGlvbnMmbXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0seHQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2R0Lmhhc093blByb3BlcnR5KGUpJiZrdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6bHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0seHQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0seHQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXUubm9uZSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXt2YXIgcj10aGlzLnBhcnNlci5tYXRjaFN0eWxlKHRbbl0sdFtuKzFdLHRoaXMpO2lmKHIpe2lmKHIuaWdub3JlKXJldHVybiBudWxsO2U9dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3IubWFya10uY3JlYXRlKHIuYXR0cnMpLmFkZFRvU2V0KGUpfX1yZXR1cm4gZX0seHQucHJvdG90eXBlLmFkZEVsZW1lbnRCeVJ1bGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxzPXRoaXM7ZS5ub2RlPyhyPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tlLm5vZGVdLHIuaXNMZWFmP3RoaXMuaW5zZXJ0Tm9kZShyLmNyZWF0ZShlLmF0dHJzKSl8fHRoaXMubGVhZkZhbGxiYWNrKHQpOm49dGhpcy5lbnRlcihyLGUuYXR0cnMsZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpKToobz10aGlzLnBhcnNlci5zY2hlbWEubWFya3NbZS5tYXJrXSxpPW8uY3JlYXRlKGUuYXR0cnMpLHRoaXMuYWRkUGVuZGluZ01hcmsoaSkpO3ZhciBhPXRoaXMudG9wO2lmKHImJnIuaXNMZWFmKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKGUuZ2V0Q29udGVudCl0aGlzLmZpbmRJbnNpZGUodCksZS5nZXRDb250ZW50KHQsdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gcy5pbnNlcnROb2RlKHQpfSkpO2Vsc2V7dmFyIGM9ZS5jb250ZW50RWxlbWVudDsic3RyaW5nIj09dHlwZW9mIGM/Yz10LnF1ZXJ5U2VsZWN0b3IoYyk6ImZ1bmN0aW9uIj09dHlwZW9mIGMmJihjPWModCkpLGN8fChjPXQpLHRoaXMuZmluZEFyb3VuZCh0LGMsITApLHRoaXMuYWRkQWxsKGMsbil9biYmKHRoaXMuc3luYyhhKSx0aGlzLm9wZW4tLSksaSYmdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhpKX0seHQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSx4dC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LHh0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0seHQucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5wZW5kaW5nTWFya3MubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5wZW5kaW5nTWFya3NbZV07dC50eXBlJiYhdC50eXBlLmFsbG93c01hcmtUeXBlKG4udHlwZSl8fG4uaXNJblNldCh0LmFjdGl2ZU1hcmtzKXx8KHQuYWN0aXZlTWFya3M9bi5hZGRUb1NldCh0LmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcy5zcGxpY2UoZS0tLDEpKX19LHh0LnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiYodGhpcy5hcHBseVBlbmRpbmdNYXJrcyh0aGlzLnRvcCksdGhpcy5lbnRlcklubmVyKHQsZSwhMCxuKSkscn0seHQucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn55dDpndChyKTtvLm9wdGlvbnMmeXQmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD15dCksdGhpcy5ub2Rlcy5wdXNoKG5ldyB3dCh0LGUsby5hY3RpdmVNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSx4dC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LHh0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSx4dC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSx4dC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0seHQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LGJ0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciB0PTAsZT10aGlzLm9wZW47ZT49MDtlLS0pe2Zvcih2YXIgbj10aGlzLm5vZGVzW2VdLmNvbnRlbnQscj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQrPW5bcl0ubm9kZVNpemU7ZSYmdCsrfXJldHVybiB0fSx4dC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyl0aGlzLmZpbmRbbl0ubm9kZT09dCYmdGhpcy5maW5kW25dLm9mZnNldD09ZSYmKHRoaXMuZmluZFtuXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0seHQucHJvdG90eXBlLmZpbmRJbnNpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspbnVsbD09dGhpcy5maW5kW2VdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbZV0ubm9kZSkmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHh0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXtpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciByPTA7cjx0aGlzLmZpbmQubGVuZ3RoO3IrKylpZihudWxsPT10aGlzLmZpbmRbcl0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtyXS5ub2RlKSl7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbcl0ubm9kZSk7byYobj8yOjQpJiYodGhpcy5maW5kW3JdLnBvcz10aGlzLmN1cnJlbnRQb3MpfX0seHQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspdGhpcy5maW5kW2VdLm5vZGU9PXQmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcy0odC5ub2RlVmFsdWUubGVuZ3RoLXRoaXMuZmluZFtlXS5vZmZzZXQpKX0seHQucHJvdG90eXBlLm1hdGNoZXNDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5pbmRleE9mKCJ8Iik+LTEpcmV0dXJuIHQuc3BsaXQoL1xzKlx8XHMqLykuc29tZSh0aGlzLm1hdGNoZXNDb250ZXh0LHRoaXMpO3ZhciBuPXQuc3BsaXQoIi8iKSxyPXRoaXMub3B0aW9ucy5jb250ZXh0LG89IXRoaXMuaXNPcGVuJiYoIXJ8fHIucGFyZW50LnR5cGU9PXRoaXMubm9kZXNbMF0udHlwZSksaT0tKHI/ci5kZXB0aCsxOjApKyhvPzA6MSkscz1mdW5jdGlvbih0LGEpe2Zvcig7dD49MDt0LS0pe3ZhciBjPW5bdF07aWYoIiI9PWMpe2lmKHQ9PW4ubGVuZ3RoLTF8fDA9PXQpY29udGludWU7Zm9yKDthPj1pO2EtLSlpZihzKHQtMSxhKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgaD1hPjB8fDA9PWEmJm8/ZS5ub2Rlc1thXS50eXBlOnImJmE+PWk/ci5ub2RlKGEtaSkudHlwZTpudWxsO2lmKCFofHxoLm5hbWUhPWMmJi0xPT1oLmdyb3Vwcy5pbmRleE9mKGMpKXJldHVybiExO2EtLX1yZXR1cm4hMH07cmV0dXJuIHMobi5sZW5ndGgtMSx0aGlzLm9wZW4pfSx4dC5wcm90b3R5cGUudGV4dGJsb2NrRnJvbUNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29udGV4dDtpZih0KWZvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5kZWZhdWx0VHlwZTtpZihuJiZuLmlzVGV4dGJsb2NrJiZuLmRlZmF1bHRBdHRycylyZXR1cm4gbn1mb3IodmFyIHIgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgbz10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbcl07aWYoby5pc1RleHRibG9jayYmby5kZWZhdWx0QXR0cnMpcmV0dXJuIG99fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh4dC5wcm90b3R5cGUsYnQpO3ZhciBNdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gVHQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBOdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fU10LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49TnQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sTXQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49TXQucmVuZGVyU3BlYyhOdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sTXQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LE10LnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJk10LnJlbmRlclNwZWMoTnQobikscih0LGUpKX0sTXQucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgbj10LmNyZWF0ZUVsZW1lbnQoZVswXSkscj1udWxsLG89ZVsxXSxpPTE7aWYobyYmIm9iamVjdCI9PXR5cGVvZiBvJiZudWxsPT1vLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShvKSlmb3IodmFyIHMgaW4gaT0yLG8pbnVsbCE9b1tzXSYmbi5zZXRBdHRyaWJ1dGUocyxvW3NdKTtmb3IodmFyIGE9aTthPGUubGVuZ3RoO2ErKyl7dmFyIGM9ZVthXTtpZigwPT09Yyl7aWYoYTxlLmxlbmd0aC0xfHxhPmkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206bixjb250ZW50RE9NOm59fXZhciBoPU10LnJlbmRlclNwZWModCxjKSxwPWguZG9tLHU9aC5jb250ZW50RE9NO2lmKG4uYXBwZW5kQ2hpbGQocCksdSl7aWYocil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO3I9dX19cmV0dXJue2RvbTpuLGNvbnRlbnRET006cn19LE10LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyBNdCh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSxNdC5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9VHQodC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0sTXQubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBUdCh0Lm1hcmtzKX07dmFyIEV0PW4oIjBhYzAiKTtuLmQoZSwiQWxsU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4ganR9KSksbi5kKGUsIkVkaXRvclN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gWHR9KSksbi5kKGUsIk5vZGVTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBCdH0pKSxuLmQoZSwiUGx1Z2luIiwoZnVuY3Rpb24oKXtyZXR1cm4gdGV9KSksbi5kKGUsIlBsdWdpbktleSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJlfSkpLG4uZChlLCJTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBSdH0pKSxuLmQoZSwiU2VsZWN0aW9uUmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiBEdH0pKSxuLmQoZSwiVGV4dFNlbGVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl0fSkpLG4uZChlLCJUcmFuc2FjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFd0fSkpO3ZhciBBdD1PYmplY3QuY3JlYXRlKG51bGwpLFJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJhbmdlcz1ufHxbbmV3IER0KHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSx6dD17YW5jaG9yOntjb25maWd1cmFibGU6ITB9LGhlYWQ6e2NvbmZpZ3VyYWJsZTohMH0sZnJvbTp7Y29uZmlndXJhYmxlOiEwfSx0bzp7Y29uZmlndXJhYmxlOiEwfSwkZnJvbTp7Y29uZmlndXJhYmxlOiEwfSwkdG86e2NvbmZpZ3VyYWJsZTohMH0sZW1wdHk6e2NvbmZpZ3VyYWJsZTohMH19O3p0LmFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvc30senQuaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LHp0LmZyb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ucG9zfSx6dC50by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8ucG9zfSx6dC4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LHp0LiR0by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJHRvfSx6dC5lbXB0eS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yYW5nZXMsZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0uJGZyb20ucG9zIT10W2VdLiR0by5wb3MpcmV0dXJuITE7cmV0dXJuITB9LFJ0LnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LFJ0LnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9bC5lbXB0eSk7Zm9yKHZhciBuPWUuY29udGVudC5sYXN0Q2hpbGQscj1udWxsLG89MDtvPGUub3BlbkVuZDtvKyspcj1uLG49bi5sYXN0Q2hpbGQ7Zm9yKHZhciBpPXQuc3RlcHMubGVuZ3RoLHM9dGhpcy5yYW5nZXMsYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgYz1zW2FdLGg9Yy4kZnJvbSxwPWMuJHRvLHU9dC5tYXBwaW5nLnNsaWNlKGkpO3QucmVwbGFjZVJhbmdlKHUubWFwKGgucG9zKSx1Lm1hcChwLnBvcyksYT9sLmVtcHR5OmUpLDA9PWEmJkp0KHQsaSwobj9uLmlzSW5saW5lOnImJnIuaXNUZXh0YmxvY2spPy0xOjEpfX0sUnQucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuc3RlcHMubGVuZ3RoLHI9dGhpcy5yYW5nZXMsbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dLHM9aS4kZnJvbSxhPWkuJHRvLGM9dC5tYXBwaW5nLnNsaWNlKG4pLGg9Yy5tYXAocy5wb3MpLHA9Yy5tYXAoYS5wb3MpO28/dC5kZWxldGVSYW5nZShoLHApOih0LnJlcGxhY2VSYW5nZVdpdGgoaCxwLGUpLEp0KHQsbixlLmlzSW5saW5lPy0xOjEpKX19LFJ0LmZpbmRGcm9tPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnBhcmVudC5pbmxpbmVDb250ZW50P25ldyBJdCh0KTokdCh0Lm5vZGUoMCksdC5wYXJlbnQsdC5wb3MsdC5pbmRleCgpLGUsbik7aWYocilyZXR1cm4gcjtmb3IodmFyIG89dC5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1lPDA/JHQodC5ub2RlKDApLHQubm9kZShvKSx0LmJlZm9yZShvKzEpLHQuaW5kZXgobyksZSxuKTokdCh0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYWZ0ZXIobysxKSx0LmluZGV4KG8pKzEsZSxuKTtpZihpKXJldHVybiBpfX0sUnQubmVhcj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLmZpbmRGcm9tKHQsZSl8fHRoaXMuZmluZEZyb20odCwtZSl8fG5ldyBqdCh0Lm5vZGUoMCkpfSxSdC5hdFN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiAkdCh0LHQsMCwwLDEpfHxuZXcganQodCl9LFJ0LmF0RW5kPWZ1bmN0aW9uKHQpe3JldHVybiAkdCh0LHQsdC5jb250ZW50LnNpemUsdC5jaGlsZENvdW50LC0xKXx8bmV3IGp0KHQpfSxSdC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlfHwhZS50eXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTZWxlY3Rpb24uZnJvbUpTT04iKTt2YXIgbj1BdFtlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBzZWxlY3Rpb24gdHlwZSAiK2UudHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSxSdC5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIEF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJEdXBsaWNhdGUgdXNlIG9mIHNlbGVjdGlvbiBKU09OIElEICIrdCk7cmV0dXJuIEF0W3RdPWUsZS5wcm90b3R5cGUuanNvbklEPXQsZX0sUnQucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIEl0LmJldHdlZW4odGhpcy4kYW5jaG9yLHRoaXMuJGhlYWQpLmdldEJvb2ttYXJrKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJ0LnByb3RvdHlwZSx6dCksUnQucHJvdG90eXBlLnZpc2libGU9ITA7dmFyIER0PWZ1bmN0aW9uKHQsZSl7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWV9LEl0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1uJiYobj1lKSx0LmNhbGwodGhpcyxlLG4pfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXskY3Vyc29yOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi4kY3Vyc29yLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbmNob3IucG9zPT10aGlzLiRoZWFkLnBvcz90aGlzLiRoZWFkOm51bGx9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmhlYWQpKTtpZighby5wYXJlbnQuaW5saW5lQ29udGVudClyZXR1cm4gdC5uZWFyKG8pO3ZhciBpPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmFuY2hvcikpO3JldHVybiBuZXcgZShpLnBhcmVudC5pbmxpbmVDb250ZW50P2k6byxvKX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPWwuZW1wdHkpLHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbiksbj09bC5lbXB0eSl7dmFyIHI9dGhpcy4kZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLiR0byk7ciYmZS5lbnN1cmVNYXJrcyhyKX19LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFB0KHRoaXMuYW5jaG9yLHRoaXMuaGVhZCl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJ0ZXh0IixhbmNob3I6dGhpcy5hbmNob3IsaGVhZDp0aGlzLmhlYWR9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcnx8Im51bWJlciIhPXR5cGVvZiBuLmhlYWQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFRleHRTZWxlY3Rpb24uZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4uYW5jaG9yKSx0LnJlc29sdmUobi5oZWFkKSl9LGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj10LnJlc29sdmUoZSk7cmV0dXJuIG5ldyB0aGlzKHIsbj09ZT9yOnQucmVzb2x2ZShuKSl9LGUuYmV0d2Vlbj1mdW5jdGlvbihuLHIsbyl7dmFyIGk9bi5wb3Mtci5wb3M7aWYobyYmIWl8fChvPWk+PTA/MTotMSksIXIucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBzPXQuZmluZEZyb20ocixvLCEwKXx8dC5maW5kRnJvbShyLC1vLCEwKTtpZighcylyZXR1cm4gdC5uZWFyKHIsbyk7cj1zLiRoZWFkfXJldHVybiBuLnBhcmVudC5pbmxpbmVDb250ZW50fHwoMD09aT9uPXI6KG49KHQuZmluZEZyb20obiwtbywhMCl8fHQuZmluZEZyb20obixvLCEwKSkuJGFuY2hvcixuLnBvczxyLnBvcyE9aTwwJiYobj1yKSkpLG5ldyBlKG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFJ0KTtSdC5qc29uSUQoInRleHQiLEl0KTt2YXIgUHQ9ZnVuY3Rpb24odCxlKXt0aGlzLmFuY2hvcj10LHRoaXMuaGVhZD1lfTtQdC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHQodC5tYXAodGhpcy5hbmNob3IpLHQubWFwKHRoaXMuaGVhZCkpfSxQdC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gSXQuYmV0d2Vlbih0LnJlc29sdmUodGhpcy5hbmNob3IpLHQucmVzb2x2ZSh0aGlzLmhlYWQpKX07dmFyIEJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49ZS5ub2RlQWZ0ZXIscj1lLm5vZGUoMCkucmVzb2x2ZShlLnBvcytuLm5vZGVTaXplKTt0LmNhbGwodGhpcyxlLHIpLHRoaXMubm9kZT1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24obixyKXt2YXIgbz1yLm1hcFJlc3VsdCh0aGlzLmFuY2hvciksaT1vLmRlbGV0ZWQscz1vLnBvcyxhPW4ucmVzb2x2ZShzKTtyZXR1cm4gaT90Lm5lYXIoYSk6bmV3IGUoYSl9LGUucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGwocy5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgRnQodGhpcy5hbmNob3IpfSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZVNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHRoaXModC5yZXNvbHZlKGUpKX0sZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNUZXh0JiYhMSE9PXQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGV9KFJ0KTtCdC5wcm90b3R5cGUudmlzaWJsZT0hMSxSdC5qc29uSUQoIm5vZGUiLEJ0KTt2YXIgRnQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07RnQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgZT10Lm1hcFJlc3VsdCh0aGlzLmFuY2hvciksbj1lLmRlbGV0ZWQscj1lLnBvcztyZXR1cm4gbj9uZXcgUHQocixyKTpuZXcgRnQocil9LEZ0LnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzb2x2ZSh0aGlzLmFuY2hvciksbj1lLm5vZGVBZnRlcjtyZXR1cm4gbiYmQnQuaXNTZWxlY3RhYmxlKG4pP25ldyBCdChlKTpSdC5uZWFyKGUpfTt2YXIganQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLnJlc29sdmUoMCksZS5yZXNvbHZlKGUuY29udGVudC5zaXplKSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24oZSxuKXtpZih2b2lkIDA9PT1uJiYobj1sLmVtcHR5KSxuPT1sLmVtcHR5KXtlLmRlbGV0ZSgwLGUuZG9jLmNvbnRlbnQuc2l6ZSk7dmFyIHI9dC5hdFN0YXJ0KGUuZG9jKTtyLmVxKGUuc2VsZWN0aW9uKXx8ZS5zZXRTZWxlY3Rpb24ocil9ZWxzZSB0LnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcyxlLG4pfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiYWxsIn19LGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIF90fSxlfShSdCk7UnQuanNvbklEKCJhbGwiLGp0KTt2YXIgX3Q9e21hcDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcganQodCl9fTtmdW5jdGlvbiAkdCh0LGUsbixyLG8saSl7aWYoZS5pbmxpbmVDb250ZW50KXJldHVybiBJdC5jcmVhdGUodCxuKTtmb3IodmFyIHM9ci0obz4wPzA6MSk7bz4wP3M8ZS5jaGlsZENvdW50OnM+PTA7cys9byl7dmFyIGE9ZS5jaGlsZChzKTtpZihhLmlzQXRvbSl7aWYoIWkmJkJ0LmlzU2VsZWN0YWJsZShhKSlyZXR1cm4gQnQuY3JlYXRlKHQsbi0obzwwP2Eubm9kZVNpemU6MCkpfWVsc2V7dmFyIGM9JHQodCxhLG4rbyxvPDA/YS5jaGlsZENvdW50OjAsbyxpKTtpZihjKXJldHVybiBjfW4rPWEubm9kZVNpemUqb319ZnVuY3Rpb24gSnQodCxlLG4pe3ZhciByPXQuc3RlcHMubGVuZ3RoLTE7aWYoIShyPGUpKXt2YXIgbz10LnN0ZXBzW3JdO2lmKG8gaW5zdGFuY2VvZiBFdFsiYyJdfHxvIGluc3RhbmNlb2YgRXRbImIiXSl7dmFyIGkscz10Lm1hcHBpbmcubWFwc1tyXTtzLmZvckVhY2goKGZ1bmN0aW9uKHQsZSxuLHIpe251bGw9PWkmJihpPXIpfSkpLHQuc2V0U2VsZWN0aW9uKFJ0Lm5lYXIodC5kb2MucmVzb2x2ZShpKSxuKSl9fX12YXIgTHQ9MSxWdD0yLHF0PTQsV3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLmRvYyksdGhpcy50aW1lPURhdGUubm93KCksdGhpcy5jdXJTZWxlY3Rpb249ZS5zZWxlY3Rpb24sdGhpcy5jdXJTZWxlY3Rpb25Gb3I9MCx0aGlzLnN0b3JlZE1hcmtzPWUuc3RvcmVkTWFya3MsdGhpcy51cGRhdGVkPTAsdGhpcy5tZXRhPU9iamVjdC5jcmVhdGUobnVsbCl9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NlbGVjdGlvbjp7Y29uZmlndXJhYmxlOiEwfSxzZWxlY3Rpb25TZXQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RvcmVkTWFya3NTZXQ6e2NvbmZpZ3VyYWJsZTohMH0saXNHZW5lcmljOntjb25maWd1cmFibGU6ITB9LHNjcm9sbGVkSW50b1ZpZXc6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLnNlbGVjdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb25Gb3I8dGhpcy5zdGVwcy5sZW5ndGgmJih0aGlzLmN1clNlbGVjdGlvbj10aGlzLmN1clNlbGVjdGlvbi5tYXAodGhpcy5kb2MsdGhpcy5tYXBwaW5nLnNsaWNlKHRoaXMuY3VyU2VsZWN0aW9uRm9yKSksdGhpcy5jdXJTZWxlY3Rpb25Gb3I9dGhpcy5zdGVwcy5sZW5ndGgpLHRoaXMuY3VyU2VsZWN0aW9ufSxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24odCl7aWYodC4kZnJvbS5kb2MhPXRoaXMuZG9jKXRocm93IG5ldyBSYW5nZUVycm9yKCJTZWxlY3Rpb24gcGFzc2VkIHRvIHNldFNlbGVjdGlvbiBtdXN0IHBvaW50IGF0IHRoZSBjdXJyZW50IGRvY3VtZW50Iik7cmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uPXQsdGhpcy5jdXJTZWxlY3Rpb25Gb3I9dGhpcy5zdGVwcy5sZW5ndGgsdGhpcy51cGRhdGVkPSh0aGlzLnVwZGF0ZWR8THQpJn5WdCx0aGlzLnN0b3JlZE1hcmtzPW51bGwsdGhpc30sbi5zZWxlY3Rpb25TZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZMdCk+MH0sZS5wcm90b3R5cGUuc2V0U3RvcmVkTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RvcmVkTWFya3M9dCx0aGlzLnVwZGF0ZWR8PVZ0LHRoaXN9LGUucHJvdG90eXBlLmVuc3VyZU1hcmtzPWZ1bmN0aW9uKHQpe3JldHVybiB1LnNhbWVTZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGZyb20ubWFya3MoKSx0KXx8dGhpcy5zZXRTdG9yZWRNYXJrcyh0KSx0aGlzfSxlLnByb3RvdHlwZS5hZGRTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQuYWRkVG9TZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpfSxlLnByb3RvdHlwZS5yZW1vdmVTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQucmVtb3ZlRnJvbVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LG4uc3RvcmVkTWFya3NTZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZWdCk+MH0sZS5wcm90b3R5cGUuYWRkU3RlcD1mdW5jdGlvbihlLG4pe3QucHJvdG90eXBlLmFkZFN0ZXAuY2FsbCh0aGlzLGUsbiksdGhpcy51cGRhdGVkPXRoaXMudXBkYXRlZCZ+VnQsdGhpcy5zdG9yZWRNYXJrcz1udWxsfSxlLnByb3RvdHlwZS5zZXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRpbWU9dCx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUucmVwbGFjZVNlbGVjdGlvbldpdGg9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnNlbGVjdGlvbjtyZXR1cm4hMSE9PWUmJih0PXQubWFyayh0aGlzLnN0b3JlZE1hcmtzfHwobi5lbXB0eT9uLiRmcm9tLm1hcmtzKCk6bi4kZnJvbS5tYXJrc0Fjcm9zcyhuLiR0byl8fHUubm9uZSkpKSxuLnJlcGxhY2VXaXRoKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUuZGVsZXRlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyksdGhpc30sZS5wcm90b3R5cGUuaW5zZXJ0VGV4dD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dGhpcy5kb2MudHlwZS5zY2hlbWE7aWYobnVsbD09ZSlyZXR1cm4gdD90aGlzLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHIudGV4dCh0KSwhMCk6dGhpcy5kZWxldGVTZWxlY3Rpb24oKTtpZighdClyZXR1cm4gdGhpcy5kZWxldGVSYW5nZShlLG4pO3ZhciBvPXRoaXMuc3RvcmVkTWFya3M7aWYoIW8pe3ZhciBpPXRoaXMuZG9jLnJlc29sdmUoZSk7bz1uPT1lP2kubWFya3MoKTppLm1hcmtzQWNyb3NzKHRoaXMuZG9jLnJlc29sdmUobikpfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZVdpdGgoZSxuLHIudGV4dCh0LG8pKSx0aGlzLnNlbGVjdGlvbi5lbXB0eXx8dGhpcy5zZXRTZWxlY3Rpb24oUnQubmVhcih0aGlzLnNlbGVjdGlvbi4kdG8pKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRNZXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV09ZSx0aGlzfSxlLnByb3RvdHlwZS5nZXRNZXRhPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldfSxuLmlzR2VuZXJpYy5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5tZXRhKXJldHVybiExO3JldHVybiEwfSxlLnByb3RvdHlwZS5zY3JvbGxJbnRvVmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVwZGF0ZWR8PXF0LHRoaXN9LG4uc2Nyb2xsZWRJbnRvVmlldy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJnF0KT4wfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShFdFsiZCJdKTtmdW5jdGlvbiBIdCh0LGUpe3JldHVybiBlJiZ0P3QuYmluZChlKTp0fXZhciBLdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5pbml0PUh0KGUuaW5pdCxuKSx0aGlzLmFwcGx5PUh0KGUuYXBwbHksbil9LFV0PVtuZXcgS3QoImRvYyIse2luaXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9jfHx0LnNjaGVtYS50b3BOb2RlVHlwZS5jcmVhdGVBbmRGaWxsKCl9LGFwcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY319KSxuZXcgS3QoInNlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zZWxlY3Rpb258fFJ0LmF0U3RhcnQoZS5kb2MpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zZWxlY3Rpb259fSksbmV3IEt0KCJzdG9yZWRNYXJrcyIse2luaXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RvcmVkTWFya3N8fG51bGx9LGFwcGx5OmZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiByLnNlbGVjdGlvbi4kY3Vyc29yP3Quc3RvcmVkTWFya3M6bnVsbH19KSxuZXcgS3QoInNjcm9sbFRvU2VsZWN0aW9uIix7aW5pdDpmdW5jdGlvbigpe3JldHVybiAwfSxhcHBseTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbGVkSW50b1ZpZXc/ZSsxOmV9fSldLEd0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMuZmllbGRzPVV0LmNvbmNhdCgpLHRoaXMucGx1Z2lucz1bXSx0aGlzLnBsdWdpbnNCeUtleT1PYmplY3QuY3JlYXRlKG51bGwpLGUmJmUuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYobi5wbHVnaW5zQnlLZXlbdC5rZXldKXRocm93IG5ldyBSYW5nZUVycm9yKCJBZGRpbmcgZGlmZmVyZW50IGluc3RhbmNlcyBvZiBhIGtleWVkIHBsdWdpbiAoIit0LmtleSsiKSIpO24ucGx1Z2lucy5wdXNoKHQpLG4ucGx1Z2luc0J5S2V5W3Qua2V5XT10LHQuc3BlYy5zdGF0ZSYmbi5maWVsZHMucHVzaChuZXcgS3QodC5rZXksdC5zcGVjLnN0YXRlLHQpKX0pKX0sWHQ9ZnVuY3Rpb24odCl7dGhpcy5jb25maWc9dH0sWXQ9e3NjaGVtYTp7Y29uZmlndXJhYmxlOiEwfSxwbHVnaW5zOntjb25maWd1cmFibGU6ITB9LHRyOntjb25maWd1cmFibGU6ITB9fTtZdC5zY2hlbWEuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnNjaGVtYX0sWXQucGx1Z2lucy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcucGx1Z2luc30sWHQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFwcGx5VHJhbnNhY3Rpb24odCkuc3RhdGV9LFh0LnByb3RvdHlwZS5maWx0ZXJUcmFuc2FjdGlvbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPS0xKTtmb3IodmFyIG49MDtuPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO24rKylpZihuIT1lKXt2YXIgcj10aGlzLmNvbmZpZy5wbHVnaW5zW25dO2lmKHIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbiYmIXIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbi5jYWxsKHIsdCx0aGlzKSlyZXR1cm4hMX1yZXR1cm4hMH0sWHQucHJvdG90eXBlLmFwcGx5VHJhbnNhY3Rpb249ZnVuY3Rpb24odCl7aWYoIXRoaXMuZmlsdGVyVHJhbnNhY3Rpb24odCkpcmV0dXJue3N0YXRlOnRoaXMsdHJhbnNhY3Rpb25zOltdfTtmb3IodmFyIGU9W3RdLG49dGhpcy5hcHBseUlubmVyKHQpLHI9bnVsbDs7KXtmb3IodmFyIG89ITEsaT0wO2k8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLmNvbmZpZy5wbHVnaW5zW2ldO2lmKHMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbil7dmFyIGE9cj9yW2ldLm46MCxjPXI/cltpXS5zdGF0ZTp0aGlzLGg9YTxlLmxlbmd0aCYmcy5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uLmNhbGwocyxhP2Uuc2xpY2UoYSk6ZSxjLG4pO2lmKGgmJm4uZmlsdGVyVHJhbnNhY3Rpb24oaCxpKSl7aWYoaC5zZXRNZXRhKCJhcHBlbmRlZFRyYW5zYWN0aW9uIix0KSwhcil7cj1bXTtmb3IodmFyIHA9MDtwPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO3ArKylyLnB1c2gocDxpP3tzdGF0ZTpuLG46ZS5sZW5ndGh9OntzdGF0ZTp0aGlzLG46MH0pfWUucHVzaChoKSxuPW4uYXBwbHlJbm5lcihoKSxvPSEwfXImJihyW2ldPXtzdGF0ZTpuLG46ZS5sZW5ndGh9KX19aWYoIW8pcmV0dXJue3N0YXRlOm4sdHJhbnNhY3Rpb25zOmV9fX0sWHQucHJvdG90eXBlLmFwcGx5SW5uZXI9ZnVuY3Rpb24odCl7aWYoIXQuYmVmb3JlLmVxKHRoaXMuZG9jKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXBwbHlpbmcgYSBtaXNtYXRjaGVkIHRyYW5zYWN0aW9uIik7Zm9yKHZhciBlPW5ldyBYdCh0aGlzLmNvbmZpZyksbj10aGlzLmNvbmZpZy5maWVsZHMscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO2Vbby5uYW1lXT1vLmFwcGx5KHQsdGhpc1tvLm5hbWVdLHRoaXMsZSl9Zm9yKHZhciBpPTA7aTxadC5sZW5ndGg7aSsrKVp0W2ldKHRoaXMsdCxlKTtyZXR1cm4gZX0sWXQudHIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBXdCh0aGlzKX0sWHQuY3JlYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgR3QodC5zY2hlbWF8fHQuZG9jLnR5cGUuc2NoZW1hLHQucGx1Z2lucyksbj1uZXcgWHQoZSkscj0wO3I8ZS5maWVsZHMubGVuZ3RoO3IrKyluW2UuZmllbGRzW3JdLm5hbWVdPWUuZmllbGRzW3JdLmluaXQodCxuKTtyZXR1cm4gbn0sWHQucHJvdG90eXBlLnJlY29uZmlndXJlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgR3QodC5zY2hlbWF8fHRoaXMuc2NoZW1hLHQucGx1Z2lucyksbj1lLmZpZWxkcyxyPW5ldyBYdChlKSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb10ubmFtZTtyW2ldPXRoaXMuaGFzT3duUHJvcGVydHkoaSk/dGhpc1tpXTpuW29dLmluaXQodCxyKX1yZXR1cm4gcn0sWHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbih0KXt2YXIgZT17ZG9jOnRoaXMuZG9jLnRvSlNPTigpLHNlbGVjdGlvbjp0aGlzLnNlbGVjdGlvbi50b0pTT04oKX07aWYodGhpcy5zdG9yZWRNYXJrcyYmKGUuc3RvcmVkTWFya3M9dGhpcy5zdG9yZWRNYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0JiYib2JqZWN0Ij09dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpe2lmKCJkb2MiPT1ufHwic2VsZWN0aW9uIj09bil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIEpTT04gZmllbGRzIGBkb2NgIGFuZCBgc2VsZWN0aW9uYCBhcmUgcmVzZXJ2ZWQiKTt2YXIgcj10W25dLG89ci5zcGVjLnN0YXRlO28mJm8udG9KU09OJiYoZVtuXT1vLnRvSlNPTi5jYWxsKHIsdGhpc1tyLmtleV0pKX1yZXR1cm4gZX0sWHQuZnJvbUpTT049ZnVuY3Rpb24odCxlLG4pe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBFZGl0b3JTdGF0ZS5mcm9tSlNPTiIpO2lmKCF0LnNjaGVtYSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVxdWlyZWQgY29uZmlnIGZpZWxkICdzY2hlbWEnIG1pc3NpbmciKTt2YXIgcj1uZXcgR3QodC5zY2hlbWEsdC5wbHVnaW5zKSxvPW5ldyBYdChyKTtyZXR1cm4gci5maWVsZHMuZm9yRWFjaCgoZnVuY3Rpb24ocil7aWYoImRvYyI9PXIubmFtZSlvLmRvYz1QLmZyb21KU09OKHQuc2NoZW1hLGUuZG9jKTtlbHNlIGlmKCJzZWxlY3Rpb24iPT1yLm5hbWUpby5zZWxlY3Rpb249UnQuZnJvbUpTT04oby5kb2MsZS5zZWxlY3Rpb24pO2Vsc2UgaWYoInN0b3JlZE1hcmtzIj09ci5uYW1lKWUuc3RvcmVkTWFya3MmJihvLnN0b3JlZE1hcmtzPWUuc3RvcmVkTWFya3MubWFwKHQuc2NoZW1hLm1hcmtGcm9tSlNPTikpO2Vsc2V7aWYobilmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXSxhPXMuc3BlYy5zdGF0ZTtpZihzLmtleT09ci5uYW1lJiZhJiZhLmZyb21KU09OJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSlyZXR1cm4gdm9pZChvW3IubmFtZV09YS5mcm9tSlNPTi5jYWxsKHMsdCxlW2ldLG8pKX1vW3IubmFtZV09ci5pbml0KHQsbyl9fSkpLG99LFh0LmFkZEFwcGx5TGlzdGVuZXI9ZnVuY3Rpb24odCl7WnQucHVzaCh0KX0sWHQucmVtb3ZlQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT1adC5pbmRleE9mKHQpO2U+LTEmJlp0LnNwbGljZShlLDEpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhYdC5wcm90b3R5cGUsWXQpO3ZhciBadD1bXTtmdW5jdGlvbiBRdCh0LGUsbil7Zm9yKHZhciByIGluIHQpe3ZhciBvPXRbcl07byBpbnN0YW5jZW9mIEZ1bmN0aW9uP289by5iaW5kKGUpOiJoYW5kbGVET01FdmVudHMiPT1yJiYobz1RdChvLGUse30pKSxuW3JdPW99cmV0dXJuIG59dmFyIHRlPWZ1bmN0aW9uKHQpe3RoaXMucHJvcHM9e30sdC5wcm9wcyYmUXQodC5wcm9wcyx0aGlzLHRoaXMucHJvcHMpLHRoaXMuc3BlYz10LHRoaXMua2V5PXQua2V5P3Qua2V5LmtleTpuZSgicGx1Z2luIil9O3RlLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciBlZT1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIG5lKHQpe3JldHVybiB0IGluIGVlP3QrIiQiKyArK2VlW3RdOihlZVt0XT0wLHQrIiQiKX12YXIgcmU9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ImtleSIpLHRoaXMua2V5PW5lKHQpfTtyZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbmZpZy5wbHVnaW5zQnlLZXlbdGhpcy5rZXldfSxyZS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5rZXldfX0sZTg5MzpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNTEzNSIpLG89bigiNTZlZiIpLGk9bigiMDZjZiIpLHM9bigiOWJmMiIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1vKGUpLGE9cy5mLGM9aS5mLGg9MDtoPG4ubGVuZ3RoO2grKyl7dmFyIHA9bltoXTtyKHQscCl8fGEodCxwLGMoZSxwKSl9fX0sZThiNTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYzZiNiIpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm4iQXJyYXkiPT1yKHQpfX0sZTk1YTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYjYyMiIpLG89bigiM2Y4YyIpLGk9cigiaXRlcmF0b3IiKSxzPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihvLkFycmF5PT09dHx8c1tpXT09PXQpfX0sZWQ1MzpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0yLjUgNS45MzhhLjkzNy45MzcgMCAxMDAtMS44NzVoLTEuMjVhLjMxMi4zMTIgMCAwMS0uMzEzLS4zMTNWMTYuNWEuOTM3LjkzNyAwIDEwLTEuODc1IDB2MS4yNWMwIC4xNzMtLjE0LjMxMy0uMzEyLjMxM0gxNi41YS45MzcuOTM3IDAgMTAwIDEuODc1aDEuMjVjLjE3MyAwIC4zMTMuMTQuMzEzLjMxMnYxLjI1YS45MzcuOTM3IDAgMTAxLjg3NSAwdi0xLjI1YzAtLjE3My4xNC0uMzEzLjMxMi0uMzEzaDEuMjV6TTIgMTlhMyAzIDAgMDA2IDBWNWEzIDMgMCAxMC02IDB2MTR6bS0yIDBWNWE1IDUgMCAxMTEwIDB2MTRhNSA1IDAgMDEtMTAgMHoifX0pXSkpfX19LGVlN2Y6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiZTdhOCIpLG89bigiMTU1YyIpLGk9bigiNTViZSIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPUoodCkoZS5zZWxlY3Rpb24pO3JldHVybiBuP1Mobi5wb3MpKGUpOmV9fSxhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKXt2YXIgaT1KKHRbcl0pKG4uc2VsZWN0aW9uKTtpZihpKXt2YXIgcz1iKGkucG9zLGUpKG4pO2lmKHMhPT1uKXJldHVybiBzfX1yZXR1cm4gbn19LGM9ZnVuY3Rpb24odCl7aWYoZyh0LnNlbGVjdGlvbikpe3ZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLnBvcyxuPXQuc2VsZWN0aW9uLiR0by5wb3M7cmV0dXJuIHgodC5kZWxldGUoZSxuKSl9cmV0dXJuIHR9LGg9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGcoZS5zZWxlY3Rpb24pKXt2YXIgbj1lLnNlbGVjdGlvbixpPW4uJGZyb20scz1uLiR0bztpZih0IGluc3RhbmNlb2Ygby5GcmFnbWVudCYmaS5wYXJlbnQuY2FuUmVwbGFjZShpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdCl8fGkucGFyZW50LmNhblJlcGxhY2VXaXRoKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0LnR5cGUpKXJldHVybiB4KGUucmVwbGFjZVdpdGgoaS5wb3Mscy5wb3MsdCkuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZS5kb2MucmVzb2x2ZShpLnBvcykpKSl9cmV0dXJuIGV9fSxwPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBmdW5jdGlvbihuKXt2YXIgbz1yLlNlbGVjdGlvbi5maW5kRnJvbShuLmRvYy5yZXNvbHZlKHQpLGUsITApO3JldHVybiBvP24uc2V0U2VsZWN0aW9uKG8pOm59fSx1PWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUmJnQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGY9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJnQudHlwZS5pc0xlYWZ9LGw9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmKHQpP24uc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24obi5kb2MucmVzb2x2ZShlKSkpOnAoZSkobil9LGQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz0ibnVtYmVyIj09PXR5cGVvZiBlLGk9ci5zZWxlY3Rpb24uJGZyb20scz1vP3IuZG9jLnJlc29sdmUoZSk6ZyhyLnNlbGVjdGlvbik/ci5kb2MucmVzb2x2ZShpLnBvcysxKTppLGM9cy5wYXJlbnQ7aWYoZyhyLnNlbGVjdGlvbikmJm4pe3ZhciBwPXI7aWYocj1oKHQpKHIpLHAhPT1yKXJldHVybiByfWlmKE0oYykpe3ZhciBmPXI7aWYocj1hKGMudHlwZSx0KShyKSxmIT09cil7dmFyIGQ9dSh0KT9zLmJlZm9yZShzLmRlcHRoKTpzLnBvcztyZXR1cm4gbCh0LGQscil9fWlmKEMocyx0KSl7ci5pbnNlcnQocy5wb3MsdCk7dmFyIHY9bz9zLnBvczp1KHQpP3Iuc2VsZWN0aW9uLiRhbmNob3IucG9zLTE6ci5zZWxlY3Rpb24uJGFuY2hvci5wb3M7cmV0dXJuIHgobCh0LHYscikpfWZvcih2YXIgbT1zLmRlcHRoO20+MDttLS0pe3ZhciB5PXMuYWZ0ZXIobSksdz1yLmRvYy5yZXNvbHZlKHkpO2lmKEModyx0KSlyZXR1cm4gci5pbnNlcnQoeSx0KSx4KGwodCx5LHIpKX1yZXR1cm4gcn19LHY9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPUoodCkoby5zZWxlY3Rpb24pO3JldHVybiBpP3goby5zZXROb2RlTWFya3VwKGkucG9zLGUsT2JqZWN0LmFzc2lnbih7fSxpLm5vZGUuYXR0cnMsbikscikpOm99fSxtPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZighZyhlLnNlbGVjdGlvbikpe3ZhciBuPUoodCkoZS5zZWxlY3Rpb24pO2lmKG4pcmV0dXJuIHgoZS5zZXRTZWxlY3Rpb24oci5Ob2RlU2VsZWN0aW9uLmNyZWF0ZShlLmRvYyxuLnBvcykpKX1yZXR1cm4gZX19LHk9ZnVuY3Rpb24odCl7dmFyIGU9SCh0LnNlbGVjdGlvbik7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgZT9TKGUpKHQpOnR9LGc9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb259LHc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdC5pbmRleE9mKGUudHlwZSk+LTF8fGUudHlwZT09PXR9LHg9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0KSx0KS5zZXRUaW1lKERhdGUubm93KCkpfSxiPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW4uZG9jLm5vZGVBdCh0KSxvPW4uZG9jLnJlc29sdmUodCk7aWYoayhvLGUpKXtuPW4ucmVwbGFjZVdpdGgodCx0K3Iubm9kZVNpemUsZSk7dmFyIGk9bi5zZWxlY3Rpb24uJGZyb20ucG9zLTE7cmV0dXJuIG49cChNYXRoLm1heChpLDApLC0xKShuKSxuPXAobi5zZWxlY3Rpb24uJGZyb20uc3RhcnQoKSkobikseChuKX1yZXR1cm4gbn19LGs9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vZGUodC5kZXB0aCk7cmV0dXJuIG4mJm4udHlwZS52YWxpZENvbnRlbnQoZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/ZTpvLkZyYWdtZW50LmZyb20oZSkpfSxTPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLmRvYy5ub2RlQXQodCk7cmV0dXJuIHgoZS5kZWxldGUodCx0K24ubm9kZVNpemUpKX19LE89ZnVuY3Rpb24odCl7aWYodC5jYWNoZWQudGFibGVOb2RlVHlwZXMpcmV0dXJuIHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzO3ZhciBlPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Lm5vZGVzKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj10Lm5vZGVzW25dO3Iuc3BlYy50YWJsZVJvbGUmJihlW3Iuc3BlYy50YWJsZVJvbGVdPXIpfSkpLHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzPWUsZX0sQz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuaW5kZXgoKTtyZXR1cm4gZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/dC5wYXJlbnQuY2FuUmVwbGFjZShuLG4sZSk6ZSBpbnN0YW5jZW9mIG8uTm9kZSYmdC5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobixuLGUudHlwZSl9LE09ZnVuY3Rpb24odCl7cmV0dXJuIXR8fCJwYXJhZ3JhcGgiPT09dC50eXBlLm5hbWUmJjI9PT10Lm5vZGVTaXplfSxUPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi90YWJsZS9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIGoodCxlKX0sTj1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyZXR1cm4gZT90LmNyZWF0ZUNoZWNrZWQobnVsbCxlKTp0LmNyZWF0ZUFuZEZpbGwoKX0sRT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpLHI9ZS4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbz1uLmNlbGxzSW5SZWN0KHQpLHM9bi5jZWxsc0luUmVjdChuLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLXIsZS4kaGVhZENlbGwucG9zLXIpKSxhPTAsYz1vLmxlbmd0aDthPGM7YSsrKWlmKC0xPT09cy5pbmRleE9mKG9bYV0pKXJldHVybiExO3JldHVybiEwfX0sQT1mdW5jdGlvbih0KXtyZXR1cm4gdFswXS5tYXAoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdFtuXX0pKX0pKX0sUj1mdW5jdGlvbih0KXtmb3IodmFyIGU9aS5UYWJsZU1hcC5nZXQodCksbj1bXSxyPTA7cjxlLmhlaWdodDtyKyspe2Zvcih2YXIgbz1bXSxzPXt9LGE9MDthPGUud2lkdGg7YSsrKXt2YXIgYz1lLm1hcFtyKmUud2lkdGgrYV0saD10Lm5vZGVBdChjKSxwPWUuZmluZENlbGwoYyk7c1tjXXx8cC50b3AhPT1yP28ucHVzaChudWxsKTooc1tjXT0hMCxvLnB1c2goaCkpfW4ucHVzaChvKX1yZXR1cm4gbn0sej1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPWkuVGFibGVNYXAuZ2V0KHQpLG89MDtvPHIuaGVpZ2h0O28rKyl7Zm9yKHZhciBzPXQuY2hpbGQobyksYT1bXSxjPTA7YzxyLndpZHRoO2MrKylpZihlW29dW2NdKXt2YXIgaD1yLm1hcFtvKnIud2lkdGgrY10scD1lW29dW2NdLHU9dC5ub2RlQXQoaCksZj11LnR5cGUuY3JlYXRlQ2hlY2tlZChPYmplY3QuYXNzaWduKHt9LHAuYXR0cnMpLHAuY29udGVudCxwLm1hcmtzKTthLnB1c2goZil9bi5wdXNoKHMudHlwZS5jcmVhdGVDaGVja2VkKHMuYXR0cnMsYSxzLm1hcmtzKSl9dmFyIGw9dC50eXBlLmNyZWF0ZUNoZWNrZWQodC5hdHRycyxuLHQubWFya3MpO3JldHVybiBsfSxEPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPUEoUih0Lm5vZGUpKTtyZXR1cm4gbz1QKG8sZSxuLHIpLG89QShvKSx6KHQubm9kZSxvKX0sST1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1SKHQubm9kZSk7cmV0dXJuIG89UChvLGUsbixyKSx6KHQubm9kZSxvKX0sUD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1lWzBdPm5bMF0/LTE6MSxpPXQuc3BsaWNlKGVbMF0sZS5sZW5ndGgpLHM9aS5sZW5ndGglMj09PTA/MTowLGE9dm9pZCAwO3JldHVybiBhPS0xPT09ciYmMT09PW8/blswXS0xOjE9PT1yJiYtMT09PW8/bltuLmxlbmd0aC0xXS1zKzE6LTE9PT1vP25bMF06bltuLmxlbmd0aC0xXS1zLHQuc3BsaWNlLmFwcGx5KHQsW2EsMF0uY29uY2F0KGkpKSx0fSxCPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQ+ZT8tMToxLGk9IlRhcmdldCBwb3NpdGlvbiBpcyBpbnZhbGlkLCB5b3UgY2FuJ3QgbW92ZSB0aGUgIityKyIgIit0KyIgdG8gIitlKyIsIHRoZSB0YXJnZXQgY2FuJ3QgYmUgc3BsaXQuIFlvdSBjb3VsZCB1c2UgdHJ5VG9GaXQgb3B0aW9uLiI7aWYoMT09PW8pe2lmKC0xIT09bi5zbGljZSgwLG4ubGVuZ3RoLTEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpfWVsc2UgaWYoLTEhPT1uLnNsaWNlKDEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpO3JldHVybiEwfSxGPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLiRmcm9tO3JldHVybiBqKG4sdCl9fSxqPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZGVwdGg7bj4wO24tLSl7dmFyIHI9dC5ub2RlKG4pO2lmKGUocikpcmV0dXJue3BvczpuPjA/dC5iZWZvcmUobik6MCxzdGFydDp0LnN0YXJ0KG4pLGRlcHRoOm4sbm9kZTpyfX19LF89ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9Rih0KShuKTtpZihyKXJldHVybiBLKHIucG9zLGUpfX0sJD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFGKHQpKGUpfX0sSj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIEYoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxMPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGoodCwoZnVuY3Rpb24odCl7cmV0dXJuIHcoZSx0KX0pKX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuICQoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBfKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSksZSkobil9fSxXPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihnKGUpKXt2YXIgbj1lLm5vZGUscj1lLiRmcm9tO2lmKHcodCxuKSlyZXR1cm57bm9kZTpuLHBvczpyLnBvcyxkZXB0aDpyLmRlcHRofX19fSxIPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGZyb20ubm9kZUJlZm9yZSxuPXIuU2VsZWN0aW9uLmZpbmRGcm9tKHQuJGZyb20sLTEpO2lmKG4mJmUpe3ZhciBvPUooZS50eXBlKShuKTtyZXR1cm4gbz9vLnBvczpuLiRmcm9tLnBvc319LEs9ZnVuY3Rpb24odCxlKXt2YXIgbj1lKHQpLHI9bi5ub2RlLmNoaWxkTm9kZXNbbi5vZmZzZXRdO3JldHVybiBuLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT9uLm5vZGUucGFyZW50Tm9kZTpyJiZyLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREU/cjpuLm5vZGV9LFU9ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO3ZhciBuPVtdO3JldHVybiB0LmRlc2NlbmRhbnRzKChmdW5jdGlvbih0LHIpe2lmKG4ucHVzaCh7bm9kZTp0LHBvczpyfSksIWUpcmV0dXJuITF9KSksbn0sRz1mdW5jdGlvbih0LGUsbil7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInByZWRpY2F0ZSIgcGFyYW1ldGVyJyk7cmV0dXJuIFUodCxuKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQubm9kZSl9KSl9LFg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1RleHR9KSxlKX0sWT1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSW5saW5lfSksZSl9LFo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0Jsb2NrfSksZSl9LFE9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiEhZSh0LmF0dHJzKX0pLG4pfSx0dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9KSxuKX0sZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlzSW5TZXQodC5tYXJrcyl9KSxuKX0sbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXR0KHQsZSkubGVuZ3RofTtmdW5jdGlvbiBydCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9dmFyIG90PWZ1bmN0aW9uKHQpe3JldHVybiBGKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYidGFibGUiPT09dC50eXBlLnNwZWMudGFibGVSb2xlfSkpKHQpfSxpdD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGkuQ2VsbFNlbGVjdGlvbn0sc3Q9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPXQuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG49aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIG4ucmVjdEJldHdlZW4odC4kYW5jaG9yQ2VsbC5wb3MtZSx0LiRoZWFkQ2VsbC5wb3MtZSl9fSxhdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OnQscmlnaHQ6dCsxLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pKGUpfXJldHVybiExfX0sY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOnQsYm90dG9tOnQrMX0pKGUpfXJldHVybiExfX0saHQ9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OjAscmlnaHQ6ZS53aWR0aCx0b3A6MCxib3R0b206ZS5oZWlnaHR9KSh0KX1yZXR1cm4hMX0scHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLndpZHRoLTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6ZSxyaWdodDplKzEsdG9wOjAsYm90dG9tOnIuaGVpZ2h0fSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LHV0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci5oZWlnaHQtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0OnIud2lkdGgsdG9wOmUsYm90dG9tOmUrMX0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSxmdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0KTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSk7cmV0dXJuIHIubWFwKChmdW5jdGlvbih0KXt2YXIgbj1lLm5vZGUubm9kZUF0KHQpLHI9dCtlLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTpufX0pKX19LGx0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz1vdChyLnNlbGVjdGlvbikscz0icm93Ij09PXQ7aWYobyl7dmFyIGE9aS5UYWJsZU1hcC5nZXQoby5ub2RlKTtpZihlPj0wJiZlPChzP2EuaGVpZ2h0OmEud2lkdGgpKXt2YXIgYz1zPzA6ZSxoPXM/ZTowLHA9cz9hLndpZHRoOmUrMSx1PXM/ZSsxOmEuaGVpZ2h0O2lmKG4pe3ZhciBmPUl0KHIuc2VsZWN0aW9uLiRmcm9tKTtpZighZilyZXR1cm4gcjt2YXIgbD1hLmZpbmRDZWxsKGYucG9zLW8uc3RhcnQpO3M/KGg9TWF0aC5taW4oaCxsLnRvcCksdT1NYXRoLm1heCh1LGwuYm90dG9tKSk6KGM9TWF0aC5taW4oYyxsLmxlZnQpLHA9TWF0aC5tYXgocCxsLnJpZ2h0KSl9dmFyIGQ9YS5jZWxsc0luUmVjdCh7bGVmdDpjLHRvcDpoLHJpZ2h0OnM/cDpjKzEsYm90dG9tOnM/aCsxOnV9KSx2PXUtaD09PTE/ZDphLmNlbGxzSW5SZWN0KHtsZWZ0OnM/YzpwLTEsdG9wOnM/dS0xOmgscmlnaHQ6cCxib3R0b206dX0pLG09by5zdGFydCtkWzBdLHk9by5zdGFydCt2W3YubGVuZ3RoLTFdLGc9ci5kb2MucmVzb2x2ZShtKSx3PXIuZG9jLnJlc29sdmUoeSk7cmV0dXJuIHgoci5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbih3LGcpKSl9fXJldHVybiByfX19LGR0PWx0KCJjb2x1bW4iKSx2dD1sdCgicm93IiksbXQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodC5zZWxlY3Rpb24pO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLm1hcDtpZihyJiZyLmxlbmd0aCl7dmFyIG89ZS5zdGFydCtyWzBdLHM9ZS5zdGFydCtyW3IubGVuZ3RoLTFdLGE9dC5kb2MucmVzb2x2ZShvKSxjPXQuZG9jLnJlc29sdmUocyk7cmV0dXJuIHgodC5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbihjLGEpKSl9fXJldHVybiB0fSx5dD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtpZih0KXt2YXIgcj1PKGUpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLG89ci5jb250ZW50O2lmKCF0Lm5vZGUuY29udGVudC5lcShvKSlyZXR1cm4gbi5yZXBsYWNlV2l0aCh0LnBvcysxLHQucG9zK3Qubm9kZS5ub2RlU2l6ZSxvKSx4KG4pfXJldHVybiBufX0sZ3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIHgoaS5hZGRDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkpfXJldHVybiBlfX0sd3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPWp0KHQpKHIpLGM9YS5pbmRleGVzLGg9anQoZSkocikscD1oLmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZwLmxlbmd0aD4xJiZCKHQsZSxwLCJyb3ciKTt2YXIgdT1JKHMsYyxwLGkuZGlyZWN0aW9uKTtyZXR1cm4geChyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsdSl9fSx4dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9RnQodCkociksYz1hLmluZGV4ZXMsaD1GdChlKShyKSxwPWguaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJnAubGVuZ3RoPjEmJkIodCxlLHAsImNvbHVtbiIpO3ZhciB1PUQocyxjLHAsaS5kaXJlY3Rpb24pO3JldHVybiB4KHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSx1KX19LGJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW90KG4uc2VsZWN0aW9uKTtpZihyKXt2YXIgbz1pLlRhYmxlTWFwLmdldChyLm5vZGUpLHM9dC0xO2lmKGUmJnM+PTApcmV0dXJuIHgoa3QocykobikpO2lmKHQ+PTAmJnQ8PW8uaGVpZ2h0KXJldHVybiB4KGkuYWRkUm93KG4se21hcDpvLHRhYmxlU3RhcnQ6ci5zdGFydCx0YWJsZTpyLm5vZGV9LHQpKX1yZXR1cm4gbn19LGt0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodCl7Zm9yKHZhciBvPW4ubm9kZSxzPU8oby50eXBlLnNjaGVtYSksYT1uLnN0YXJ0LGM9MDtjPHQrMTtjKyspYSs9by5jaGlsZChjKS5ub2RlU2l6ZTt2YXIgaD1vLmNoaWxkKHQpLHA9W10sdT0wO2lmKGguZm9yRWFjaCgoZnVuY3Rpb24odCl7MT09PXQuYXR0cnMucm93c3BhbiYmKHUrPXQuYXR0cnMuY29sc3BhbixwLnB1c2goc1t0LnR5cGUuc3BlYy50YWJsZVJvbGVdLmNyZWF0ZUFuZEZpbGwodC5hdHRycyx0Lm1hcmtzKSkpfSkpLHU8ci53aWR0aCl7Zm9yKHZhciBmPVtdLGw9ZnVuY3Rpb24obil7dmFyIHI9QnQobiwoZnVuY3Rpb24oZSxyKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3BhbixpPW4rbztyZXR1cm4gbz4xJiZpPnR9KSkoZSk7Zi5wdXNoLmFwcGx5KGYscnQocikpfSx2PXQ7dj49MDt2LS0pbCh2KTtmLmxlbmd0aCYmZi5mb3JFYWNoKChmdW5jdGlvbih0KXtlPXp0KHQse3Jvd3NwYW46dC5ub2RlLmF0dHJzLnJvd3NwYW4rMX0pKGUpfSkpfXJldHVybiBkKHMucm93LmNyZWF0ZShoLmF0dHJzLHApLGEpKGUpfX1yZXR1cm4gZX19LFN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIud2lkdGgpcmV0dXJuIEN0KGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGkucmVtb3ZlQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLHgoZSl9cmV0dXJuIGV9fSxPdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLmhlaWdodClyZXR1cm4gQ3QoZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpcmV0dXJuIGkucmVtb3ZlUm93KGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLHgoZSl9cmV0dXJuIGV9fSxDdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zZWxlY3Rpb24uJGZyb20sbj1lLmRlcHRoO24+MDtuLS0pe3ZhciByPWUubm9kZShuKTtpZigidGFibGUiPT09ci50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiB4KHQuZGVsZXRlKGUuYmVmb3JlKG4pLGUuYWZ0ZXIobikpKX1yZXR1cm4gdH0sTXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYoaHQoZSkpcmV0dXJuIEN0KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLmxlZnQmJm8ucmlnaHQ9PXIud2lkdGgpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5yaWdodC0xOzthLS0pe2lmKGkucmVtb3ZlQ29sdW1uKHQscyxhKSxhPT09cy5sZWZ0KWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIHgodCl9fXJldHVybiB0fSxUdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZihodChlKSlyZXR1cm4gQ3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8udG9wJiZvLmJvdHRvbT09ci5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5ib3R0b20tMTs7YS0tKXtpZihpLnJlbW92ZVJvdyh0LHMsYSksYT09PXMudG9wKWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIHgodCl9fXJldHVybiB0fSxOdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49UHQodCk7cmV0dXJuIG4/U3Qobi5sZWZ0KShwKHQucG9zKShlKSk6ZX19LEV0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1QdCh0KTtyZXR1cm4gbj9PdChuLnRvcCkocCh0LnBvcykoZSkpOmV9fSxBdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPXB0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX1yZXR1cm4geChvKX1yZXR1cm4gb319LFJ0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9dXQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfX1yZXR1cm4gb319LHp0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0PyhuLnNldE5vZGVNYXJrdXAodC5wb3MsbnVsbCxPYmplY3QuYXNzaWduKHt9LHQubm9kZS5hdHRycyxlKSkseChuKSk6bn19LER0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MyxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTozLHI9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTpudWxsLGk9Tyh0KSxzPWkuY2VsbCxhPWkuaGVhZGVyX2NlbGwsYz1pLnJvdyxoPWkudGFibGUscD1bXSx1PVtdLGY9MDtmPG47ZisrKXAucHVzaChOKHMsbykpLHImJnUucHVzaChOKGEsbykpO2Zvcih2YXIgbD1bXSxkPTA7ZDxlO2QrKylsLnB1c2goYy5jcmVhdGVDaGVja2VkKG51bGwsciYmMD09PWQ/dTpwKSk7cmV0dXJuIGguY3JlYXRlQ2hlY2tlZChudWxsLGwpfSxJdD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvY2VsbC9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIGoodCxlKX0sUHQ9ZnVuY3Rpb24odCl7dmFyIGU9SXQodCk7aWYoZSl7dmFyIG49VCh0KSxyPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1lLnBvcy1uLnN0YXJ0O3JldHVybiByLnJlY3RCZXR3ZWVuKG8sbyl9fSxCdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1bXSxvPXV0KHQpKG4uc2VsZWN0aW9uKTtpZihvKWZvcih2YXIgaT1vLmxlbmd0aC0xO2k+PTA7aS0tKWUob1tpXSxuKSYmci5wdXNoKG9baV0pO3JldHVybiByfX0sRnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPXB0KHQpKGUuc2VsZWN0aW9uKTtvJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj1wdCh0KShlLnNlbGVjdGlvbik7biYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7ZS5ub2RlLmF0dHJzLmNvbHNwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPXB0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciBoPXB0KG4pKGUuc2VsZWN0aW9uKSxwPXV0KDApKGUuc2VsZWN0aW9uKSx1PWUuZG9jLnJlc29sdmUoaFtoLmxlbmd0aC0xXS5wb3MpLGY9dm9pZCAwLGw9cjtsPj1uO2wtLSl7dmFyIGQ9cHQobCkoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9cC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihwW3ZdLnBvcz09PWRbMF0ucG9zKXtmPWRbMF07YnJlYWt9aWYoZilicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShmLnBvcyk7cmV0dXJueyRhbmNob3I6dSwkaGVhZDptLGluZGV4ZXM6YX19fSxqdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89dXQodCkoZS5zZWxlY3Rpb24pO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPXV0KHQpKGUuc2VsZWN0aW9uKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtlLm5vZGUuYXR0cnMucm93c3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9dXQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIGg9dXQobikoZS5zZWxlY3Rpb24pLHA9cHQoMCkoZS5zZWxlY3Rpb24pLHU9ZS5kb2MucmVzb2x2ZShoW2gubGVuZ3RoLTFdLnBvcyksZj12b2lkIDAsbD1yO2w+PW47bC0tKXt2YXIgZD11dChsKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1wLmxlbmd0aC0xO3Y+PTA7di0tKWlmKHBbdl0ucG9zPT09ZFswXS5wb3Mpe2Y9ZFswXTticmVha31pZihmKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGYucG9zKTtyZXR1cm57JGFuY2hvcjp1LCRoZWFkOm0saW5kZXhlczphfX19O2UuaXNOb2RlU2VsZWN0aW9uPWcsZS5jYW5JbnNlcnQ9QyxlLmNvbnZlcnRUYWJsZU5vZGVUb0FycmF5T2ZSb3dzPVIsZS5jb252ZXJ0QXJyYXlPZlJvd3NUb1RhYmxlTm9kZT16LGUuZmluZFBhcmVudE5vZGU9RixlLmZpbmRQYXJlbnROb2RlQ2xvc2VzdFRvUG9zPWosZS5maW5kUGFyZW50RG9tUmVmPV8sZS5oYXNQYXJlbnROb2RlPSQsZS5maW5kUGFyZW50Tm9kZU9mVHlwZT1KLGUuZmluZFBhcmVudE5vZGVPZlR5cGVDbG9zZXN0VG9Qb3M9TCxlLmhhc1BhcmVudE5vZGVPZlR5cGU9VixlLmZpbmRQYXJlbnREb21SZWZPZlR5cGU9cSxlLmZpbmRTZWxlY3RlZE5vZGVPZlR5cGU9VyxlLmZpbmRQb3NpdGlvbk9mTm9kZUJlZm9yZT1ILGUuZmluZERvbVJlZkF0UG9zPUssZS5mbGF0dGVuPVUsZS5maW5kQ2hpbGRyZW49RyxlLmZpbmRUZXh0Tm9kZXM9WCxlLmZpbmRJbmxpbmVOb2Rlcz1ZLGUuZmluZEJsb2NrTm9kZXM9WixlLmZpbmRDaGlsZHJlbkJ5QXR0cj1RLGUuZmluZENoaWxkcmVuQnlUeXBlPXR0LGUuZmluZENoaWxkcmVuQnlNYXJrPWV0LGUuY29udGFpbnM9bnQsZS5maW5kVGFibGU9b3QsZS5pc0NlbGxTZWxlY3Rpb249aXQsZS5nZXRTZWxlY3Rpb25SZWN0PXN0LGUuaXNDb2x1bW5TZWxlY3RlZD1hdCxlLmlzUm93U2VsZWN0ZWQ9Y3QsZS5pc1RhYmxlU2VsZWN0ZWQ9aHQsZS5nZXRDZWxsc0luQ29sdW1uPXB0LGUuZ2V0Q2VsbHNJblJvdz11dCxlLmdldENlbGxzSW5UYWJsZT1mdCxlLnNlbGVjdENvbHVtbj1kdCxlLnNlbGVjdFJvdz12dCxlLnNlbGVjdFRhYmxlPW10LGUuZW1wdHlDZWxsPXl0LGUuYWRkQ29sdW1uQXQ9Z3QsZS5tb3ZlUm93PXd0LGUubW92ZUNvbHVtbj14dCxlLmFkZFJvd0F0PWJ0LGUuY2xvbmVSb3dBdD1rdCxlLnJlbW92ZUNvbHVtbkF0PVN0LGUucmVtb3ZlUm93QXQ9T3QsZS5yZW1vdmVUYWJsZT1DdCxlLnJlbW92ZVNlbGVjdGVkQ29sdW1ucz1NdCxlLnJlbW92ZVNlbGVjdGVkUm93cz1UdCxlLnJlbW92ZUNvbHVtbkNsb3Nlc3RUb1Bvcz1OdCxlLnJlbW92ZVJvd0Nsb3Nlc3RUb1Bvcz1FdCxlLmZvckVhY2hDZWxsSW5Db2x1bW49QXQsZS5mb3JFYWNoQ2VsbEluUm93PVJ0LGUuc2V0Q2VsbEF0dHJzPXp0LGUuY3JlYXRlVGFibGU9RHQsZS5maW5kQ2VsbENsb3Nlc3RUb1Bvcz1JdCxlLmZpbmRDZWxsUmVjdENsb3Nlc3RUb1Bvcz1QdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Db2x1bW49RnQsZS5nZXRTZWxlY3Rpb25SYW5nZUluUm93PWp0LGUucmVtb3ZlUGFyZW50Tm9kZU9mVHlwZT1zLGUucmVwbGFjZVBhcmVudE5vZGVPZlR5cGU9YSxlLnJlbW92ZVNlbGVjdGVkTm9kZT1jLGUucmVwbGFjZVNlbGVjdGVkTm9kZT1oLGUuc2V0VGV4dFNlbGVjdGlvbj1wLGUuc2FmZUluc2VydD1kLGUuc2V0UGFyZW50Tm9kZU1hcmt1cD12LGUuc2VsZWN0UGFyZW50Tm9kZU9mVHlwZT1tLGUucmVtb3ZlTm9kZUJlZm9yZT15fSxlZmRmOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oImJiYzciKSxvPW4oIjM2YzciKSxpPW4oIjU1YmUiKSxzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1KKHQpKGUuc2VsZWN0aW9uKTtyZXR1cm4gbj9TKG4ucG9zKShlKTplfX0sYT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pO2Zvcih2YXIgcj0wLG89dC5sZW5ndGg7cjxvO3IrKyl7dmFyIGk9Sih0W3JdKShuLnNlbGVjdGlvbik7aWYoaSl7dmFyIHM9YihpLnBvcyxlKShuKTtpZihzIT09bilyZXR1cm4gc319cmV0dXJuIG59fSxjPWZ1bmN0aW9uKHQpe2lmKGcodC5zZWxlY3Rpb24pKXt2YXIgZT10LnNlbGVjdGlvbi4kZnJvbS5wb3Msbj10LnNlbGVjdGlvbi4kdG8ucG9zO3JldHVybiB4KHQuZGVsZXRlKGUsbikpfXJldHVybiB0fSxoPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihnKGUuc2VsZWN0aW9uKSl7dmFyIG49ZS5zZWxlY3Rpb24saT1uLiRmcm9tLHM9bi4kdG87aWYodCBpbnN0YW5jZW9mIG8uRnJhZ21lbnQmJmkucGFyZW50LmNhblJlcGxhY2UoaS5pbmRleCgpLGkuaW5kZXhBZnRlcigpLHQpfHxpLnBhcmVudC5jYW5SZXBsYWNlV2l0aChpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdC50eXBlKSlyZXR1cm4geChlLnJlcGxhY2VXaXRoKGkucG9zLHMucG9zLHQpLnNldFNlbGVjdGlvbihuZXcgci5Ob2RlU2VsZWN0aW9uKGUuZG9jLnJlc29sdmUoaS5wb3MpKSkpfXJldHVybiBlfX0scD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG89ci5TZWxlY3Rpb24uZmluZEZyb20obi5kb2MucmVzb2x2ZSh0KSxlLCEwKTtyZXR1cm4gbz9uLnNldFNlbGVjdGlvbihvKTpufX0sdT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlJiZ0LnR5cGUuc3BlYy5zZWxlY3RhYmxlfSxmPWZ1bmN0aW9uKHQpe3JldHVybiB1KHQpJiZ0LnR5cGUuaXNMZWFmfSxsPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZih0KT9uLnNldFNlbGVjdGlvbihuZXcgci5Ob2RlU2VsZWN0aW9uKG4uZG9jLnJlc29sdmUoZSkpKTpwKGUpKG4pfSxkPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89Im51bWJlciI9PT10eXBlb2YgZSxpPXIuc2VsZWN0aW9uLiRmcm9tLHM9bz9yLmRvYy5yZXNvbHZlKGUpOmcoci5zZWxlY3Rpb24pP3IuZG9jLnJlc29sdmUoaS5wb3MrMSk6aSxjPXMucGFyZW50O2lmKGcoci5zZWxlY3Rpb24pJiZuKXt2YXIgcD1yO2lmKHI9aCh0KShyKSxwIT09cilyZXR1cm4gcn1pZihNKGMpKXt2YXIgZj1yO2lmKHI9YShjLnR5cGUsdCkociksZiE9PXIpe3ZhciBkPXUodCk/cy5iZWZvcmUocy5kZXB0aCk6cy5wb3M7cmV0dXJuIGwodCxkLHIpfX1pZihDKHMsdCkpe3IuaW5zZXJ0KHMucG9zLHQpO3ZhciB2PW8/cy5wb3M6dSh0KT9yLnNlbGVjdGlvbi4kYW5jaG9yLnBvcy0xOnIuc2VsZWN0aW9uLiRhbmNob3IucG9zO3JldHVybiB4KGwodCx2LHIpKX1mb3IodmFyIG09cy5kZXB0aDttPjA7bS0tKXt2YXIgeT1zLmFmdGVyKG0pLHc9ci5kb2MucmVzb2x2ZSh5KTtpZihDKHcsdCkpcmV0dXJuIHIuaW5zZXJ0KHksdCkseChsKHQseSxyKSl9cmV0dXJuIHJ9fSx2PWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT1KKHQpKG8uc2VsZWN0aW9uKTtyZXR1cm4gaT94KG8uc2V0Tm9kZU1hcmt1cChpLnBvcyxlLE9iamVjdC5hc3NpZ24oe30saS5ub2RlLmF0dHJzLG4pLHIpKTpvfX0sbT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWcoZS5zZWxlY3Rpb24pKXt2YXIgbj1KKHQpKGUuc2VsZWN0aW9uKTtpZihuKXJldHVybiB4KGUuc2V0U2VsZWN0aW9uKHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUoZS5kb2Msbi5wb3MpKSl9cmV0dXJuIGV9fSx5PWZ1bmN0aW9uKHQpe3ZhciBlPUgodC5zZWxlY3Rpb24pO3JldHVybiJudW1iZXIiPT09dHlwZW9mIGU/UyhlKSh0KTp0fSxnPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9ufSx3PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJnQuaW5kZXhPZihlLnR5cGUpPi0xfHxlLnR5cGU9PT10fSx4PWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUodCksdCkuc2V0VGltZShEYXRlLm5vdygpKX0sYj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1uLmRvYy5ub2RlQXQodCksbz1uLmRvYy5yZXNvbHZlKHQpO2lmKGsobyxlKSl7bj1uLnJlcGxhY2VXaXRoKHQsdCtyLm5vZGVTaXplLGUpO3ZhciBpPW4uc2VsZWN0aW9uLiRmcm9tLnBvcy0xO3JldHVybiBuPXAoTWF0aC5tYXgoaSwwKSwtMSkobiksbj1wKG4uc2VsZWN0aW9uLiRmcm9tLnN0YXJ0KCkpKG4pLHgobil9cmV0dXJuIG59fSxrPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5ub2RlKHQuZGVwdGgpO3JldHVybiBuJiZuLnR5cGUudmFsaWRDb250ZW50KGUgaW5zdGFuY2VvZiBvLkZyYWdtZW50P2U6by5GcmFnbWVudC5mcm9tKGUpKX0sUz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZS5kb2Mubm9kZUF0KHQpO3JldHVybiB4KGUuZGVsZXRlKHQsdCtuLm5vZGVTaXplKSl9fSxPPWZ1bmN0aW9uKHQpe2lmKHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzKXJldHVybiB0LmNhY2hlZC50YWJsZU5vZGVUeXBlczt2YXIgZT17fTtyZXR1cm4gT2JqZWN0LmtleXModC5ub2RlcykuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9dC5ub2Rlc1tuXTtyLnNwZWMudGFibGVSb2xlJiYoZVtyLnNwZWMudGFibGVSb2xlXT1yKX0pKSx0LmNhY2hlZC50YWJsZU5vZGVUeXBlcz1lLGV9LEM9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmluZGV4KCk7cmV0dXJuIGUgaW5zdGFuY2VvZiBvLkZyYWdtZW50P3QucGFyZW50LmNhblJlcGxhY2UobixuLGUpOmUgaW5zdGFuY2VvZiBvLk5vZGUmJnQucGFyZW50LmNhblJlcGxhY2VXaXRoKG4sbixlLnR5cGUpfSxNPWZ1bmN0aW9uKHQpe3JldHVybiF0fHwicGFyYWdyYXBoIj09PXQudHlwZS5uYW1lJiYyPT09dC5ub2RlU2l6ZX0sVD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvdGFibGUvaS50ZXN0KHQudHlwZS5zcGVjLnRhYmxlUm9sZSl9O3JldHVybiBqKHQsZSl9LE49ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7cmV0dXJuIGU/dC5jcmVhdGVDaGVja2VkKG51bGwsZSk6dC5jcmVhdGVBbmRGaWxsKCl9LEU9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKSxyPWUuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG89bi5jZWxsc0luUmVjdCh0KSxzPW4uY2VsbHNJblJlY3Qobi5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1yLGUuJGhlYWRDZWxsLnBvcy1yKSksYT0wLGM9by5sZW5ndGg7YTxjO2ErKylpZigtMT09PXMuaW5kZXhPZihvW2FdKSlyZXR1cm4hMTtyZXR1cm4hMH19LEE9ZnVuY3Rpb24odCl7cmV0dXJuIHRbMF0ubWFwKChmdW5jdGlvbihlLG4pe3JldHVybiB0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHRbbl19KSl9KSl9LFI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWkuVGFibGVNYXAuZ2V0KHQpLG49W10scj0wO3I8ZS5oZWlnaHQ7cisrKXtmb3IodmFyIG89W10scz17fSxhPTA7YTxlLndpZHRoO2ErKyl7dmFyIGM9ZS5tYXBbciplLndpZHRoK2FdLGg9dC5ub2RlQXQoYykscD1lLmZpbmRDZWxsKGMpO3NbY118fHAudG9wIT09cj9vLnB1c2gobnVsbCk6KHNbY109ITAsby5wdXNoKGgpKX1uLnB1c2gobyl9cmV0dXJuIG59LHo9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10scj1pLlRhYmxlTWFwLmdldCh0KSxvPTA7bzxyLmhlaWdodDtvKyspe2Zvcih2YXIgcz10LmNoaWxkKG8pLGE9W10sYz0wO2M8ci53aWR0aDtjKyspaWYoZVtvXVtjXSl7dmFyIGg9ci5tYXBbbypyLndpZHRoK2NdLHA9ZVtvXVtjXSx1PXQubm9kZUF0KGgpLGY9dS50eXBlLmNyZWF0ZUNoZWNrZWQoT2JqZWN0LmFzc2lnbih7fSxwLmF0dHJzKSxwLmNvbnRlbnQscC5tYXJrcyk7YS5wdXNoKGYpfW4ucHVzaChzLnR5cGUuY3JlYXRlQ2hlY2tlZChzLmF0dHJzLGEscy5tYXJrcykpfXZhciBsPXQudHlwZS5jcmVhdGVDaGVja2VkKHQuYXR0cnMsbix0Lm1hcmtzKTtyZXR1cm4gbH0sRD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1BKFIodC5ub2RlKSk7cmV0dXJuIG89UChvLGUsbixyKSxvPUEobykseih0Lm5vZGUsbyl9LEk9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89Uih0Lm5vZGUpO3JldHVybiBvPVAobyxlLG4scikseih0Lm5vZGUsbyl9LFA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89ZVswXT5uWzBdPy0xOjEsaT10LnNwbGljZShlWzBdLGUubGVuZ3RoKSxzPWkubGVuZ3RoJTI9PT0wPzE6MCxhPXZvaWQgMDtyZXR1cm4gYT0tMT09PXImJjE9PT1vP25bMF0tMToxPT09ciYmLTE9PT1vP25bbi5sZW5ndGgtMV0tcysxOi0xPT09bz9uWzBdOm5bbi5sZW5ndGgtMV0tcyx0LnNwbGljZS5hcHBseSh0LFthLDBdLmNvbmNhdChpKSksdH0sQj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10PmU/LTE6MSxpPSJUYXJnZXQgcG9zaXRpb24gaXMgaW52YWxpZCwgeW91IGNhbid0IG1vdmUgdGhlICIrcisiICIrdCsiIHRvICIrZSsiLCB0aGUgdGFyZ2V0IGNhbid0IGJlIHNwbGl0LiBZb3UgY291bGQgdXNlIHRyeVRvRml0IG9wdGlvbi4iO2lmKDE9PT1vKXtpZigtMSE9PW4uc2xpY2UoMCxuLmxlbmd0aC0xKS5pbmRleE9mKGUpKXRocm93IG5ldyBFcnJvcihpKX1lbHNlIGlmKC0xIT09bi5zbGljZSgxKS5pbmRleE9mKGUpKXRocm93IG5ldyBFcnJvcihpKTtyZXR1cm4hMH0sRj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZS4kZnJvbTtyZXR1cm4gaihuLHQpfX0saj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmRlcHRoO24+MDtuLS0pe3ZhciByPXQubm9kZShuKTtpZihlKHIpKXJldHVybntwb3M6bj4wP3QuYmVmb3JlKG4pOjAsc3RhcnQ6dC5zdGFydChuKSxkZXB0aDpuLG5vZGU6cn19fSxfPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPUYodCkobik7aWYocilyZXR1cm4gSyhyLnBvcyxlKX19LCQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiEhRih0KShlKX19LEo9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBGKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSkpKGUpfX0sTD1mdW5jdGlvbih0LGUpe3JldHVybiBqKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB3KGUsdCl9KSl9LFY9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiAkKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSkpKGUpfX0scT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gXygoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pLGUpKG4pfX0sVz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZyhlKSl7dmFyIG49ZS5ub2RlLHI9ZS4kZnJvbTtpZih3KHQsbikpcmV0dXJue25vZGU6bixwb3M6ci5wb3MsZGVwdGg6ci5kZXB0aH19fX0sSD1mdW5jdGlvbih0KXt2YXIgZT10LiRmcm9tLm5vZGVCZWZvcmUsbj1yLlNlbGVjdGlvbi5maW5kRnJvbSh0LiRmcm9tLC0xKTtpZihuJiZlKXt2YXIgbz1KKGUudHlwZSkobik7cmV0dXJuIG8/by5wb3M6bi4kZnJvbS5wb3N9fSxLPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZSh0KSxyPW4ubm9kZS5jaGlsZE5vZGVzW24ub2Zmc2V0XTtyZXR1cm4gbi5ub2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/bi5ub2RlLnBhcmVudE5vZGU6ciYmci5ub2RlVHlwZSE9PU5vZGUuVEVYVF9OT0RFP3I6bi5ub2RlfSxVPWZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTt2YXIgbj1bXTtyZXR1cm4gdC5kZXNjZW5kYW50cygoZnVuY3Rpb24odCxyKXtpZihuLnB1c2goe25vZGU6dCxwb3M6cn0pLCFlKXJldHVybiExfSkpLG59LEc9ZnVuY3Rpb24odCxlLG4pe2lmKCF0KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibm9kZSIgcGFyYW1ldGVyJyk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJwcmVkaWNhdGUiIHBhcmFtZXRlcicpO3JldHVybiBVKHQsbikuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0Lm5vZGUpfSkpfSxYPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNUZXh0fSksZSl9LFk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0lubGluZX0pLGUpfSxaPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNCbG9ja30pLGUpfSxRPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4hIWUodC5hdHRycyl9KSxuKX0sdHQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGU9PT1lfSksbil9LGV0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gZS5pc0luU2V0KHQubWFya3MpfSksbil9LG50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0dCh0LGUpLmxlbmd0aH07ZnVuY3Rpb24gcnQodCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfXZhciBvdD1mdW5jdGlvbih0KXtyZXR1cm4gRigoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmInRhYmxlIj09PXQudHlwZS5zcGVjLnRhYmxlUm9sZX0pKSh0KX0saXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBpLkNlbGxTZWxlY3Rpb259LHN0PWZ1bmN0aW9uKHQpe2lmKGl0KHQpKXt2YXIgZT10LiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxuPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBuLnJlY3RCZXR3ZWVuKHQuJGFuY2hvckNlbGwucG9zLWUsdC4kaGVhZENlbGwucG9zLWUpfX0sYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDp0LHJpZ2h0OnQrMSx0b3A6MCxib3R0b206bi5oZWlnaHR9KShlKX1yZXR1cm4hMX19LGN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihpdChlKSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6MCxyaWdodDpuLndpZHRoLHRvcDp0LGJvdHRvbTp0KzF9KShlKX1yZXR1cm4hMX19LGh0PWZ1bmN0aW9uKHQpe2lmKGl0KHQpKXt2YXIgZT1pLlRhYmxlTWFwLmdldCh0LiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDowLHJpZ2h0OmUud2lkdGgsdG9wOjAsYm90dG9tOmUuaGVpZ2h0fSkodCl9cmV0dXJuITF9LHB0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci53aWR0aC0xKXt2YXIgbz1yLmNlbGxzSW5SZWN0KHtsZWZ0OmUscmlnaHQ6ZSsxLHRvcDowLGJvdHRvbTpyLmhlaWdodH0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSx1dD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKFt0XSk7cmV0dXJuIG8ucmVkdWNlKChmdW5jdGlvbih0LGUpe2lmKGU+PTAmJmU8PXIuaGVpZ2h0LTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6MCxyaWdodDpyLndpZHRoLHRvcDplLGJvdHRvbTplKzF9KTtyZXR1cm4gdC5jb25jYXQoby5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPW4ubm9kZS5ub2RlQXQodCkscj10K24uc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOmV9fSkpKX19KSxbXSl9fX0sZnQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodCk7aWYoZSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS5ub2RlKSxyPW4uY2VsbHNJblJlY3Qoe2xlZnQ6MCxyaWdodDpuLndpZHRoLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pO3JldHVybiByLm1hcCgoZnVuY3Rpb24odCl7dmFyIG49ZS5ub2RlLm5vZGVBdCh0KSxyPXQrZS5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6bn19KSl9fSxsdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89b3Qoci5zZWxlY3Rpb24pLHM9InJvdyI9PT10O2lmKG8pe3ZhciBhPWkuVGFibGVNYXAuZ2V0KG8ubm9kZSk7aWYoZT49MCYmZTwocz9hLmhlaWdodDphLndpZHRoKSl7dmFyIGM9cz8wOmUsaD1zP2U6MCxwPXM/YS53aWR0aDplKzEsdT1zP2UrMTphLmhlaWdodDtpZihuKXt2YXIgZj1JdChyLnNlbGVjdGlvbi4kZnJvbSk7aWYoIWYpcmV0dXJuIHI7dmFyIGw9YS5maW5kQ2VsbChmLnBvcy1vLnN0YXJ0KTtzPyhoPU1hdGgubWluKGgsbC50b3ApLHU9TWF0aC5tYXgodSxsLmJvdHRvbSkpOihjPU1hdGgubWluKGMsbC5sZWZ0KSxwPU1hdGgubWF4KHAsbC5yaWdodCkpfXZhciBkPWEuY2VsbHNJblJlY3Qoe2xlZnQ6Yyx0b3A6aCxyaWdodDpzP3A6YysxLGJvdHRvbTpzP2grMTp1fSksdj11LWg9PT0xP2Q6YS5jZWxsc0luUmVjdCh7bGVmdDpzP2M6cC0xLHRvcDpzP3UtMTpoLHJpZ2h0OnAsYm90dG9tOnV9KSxtPW8uc3RhcnQrZFswXSx5PW8uc3RhcnQrdlt2Lmxlbmd0aC0xXSxnPXIuZG9jLnJlc29sdmUobSksdz1yLmRvYy5yZXNvbHZlKHkpO3JldHVybiB4KHIuc2V0U2VsZWN0aW9uKG5ldyBpLkNlbGxTZWxlY3Rpb24odyxnKSkpfX1yZXR1cm4gcn19fSxkdD1sdCgiY29sdW1uIiksdnQ9bHQoInJvdyIpLG10PWZ1bmN0aW9uKHQpe3ZhciBlPW90KHQuc2VsZWN0aW9uKTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5tYXA7aWYociYmci5sZW5ndGgpe3ZhciBvPWUuc3RhcnQrclswXSxzPWUuc3RhcnQrcltyLmxlbmd0aC0xXSxhPXQuZG9jLnJlc29sdmUobyksYz10LmRvYy5yZXNvbHZlKHMpO3JldHVybiB4KHQuc2V0U2VsZWN0aW9uKG5ldyBpLkNlbGxTZWxlY3Rpb24oYyxhKSkpfX1yZXR1cm4gdH0seXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7aWYodCl7dmFyIHI9TyhlKS5jZWxsLmNyZWF0ZUFuZEZpbGwoKSxvPXIuY29udGVudDtpZighdC5ub2RlLmNvbnRlbnQuZXEobykpcmV0dXJuIG4ucmVwbGFjZVdpdGgodC5wb3MrMSx0LnBvcyt0Lm5vZGUubm9kZVNpemUsbykseChuKX1yZXR1cm4gbn19LGd0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLndpZHRoKXJldHVybiB4KGkuYWRkQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpKX1yZXR1cm4gZX19LHd0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89e3RyeVRvRml0OiExLGRpcmVjdGlvbjowfSxpPU9iamVjdC5hc3NpZ24obyxuKSxzPW90KHIuc2VsZWN0aW9uKTtpZighcylyZXR1cm4gcjt2YXIgYT1qdCh0KShyKSxjPWEuaW5kZXhlcyxoPWp0KGUpKHIpLHA9aC5pbmRleGVzO2lmKGMuaW5kZXhPZihlKT4tMSlyZXR1cm4gcjshaS50cnlUb0ZpdCYmcC5sZW5ndGg+MSYmQih0LGUscCwicm93Iik7dmFyIHU9SShzLGMscCxpLmRpcmVjdGlvbik7cmV0dXJuIHgocikucmVwbGFjZVdpdGgocy5wb3Mscy5wb3Mrcy5ub2RlLm5vZGVTaXplLHUpfX0seHQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPUZ0KHQpKHIpLGM9YS5pbmRleGVzLGg9RnQoZSkocikscD1oLmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZwLmxlbmd0aD4xJiZCKHQsZSxwLCJjb2x1bW4iKTt2YXIgdT1EKHMsYyxwLGkuZGlyZWN0aW9uKTtyZXR1cm4geChyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsdSl9fSxidD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1vdChuLnNlbGVjdGlvbik7aWYocil7dmFyIG89aS5UYWJsZU1hcC5nZXQoci5ub2RlKSxzPXQtMTtpZihlJiZzPj0wKXJldHVybiB4KGt0KHMpKG4pKTtpZih0Pj0wJiZ0PD1vLmhlaWdodClyZXR1cm4geChpLmFkZFJvdyhuLHttYXA6byx0YWJsZVN0YXJ0OnIuc3RhcnQsdGFibGU6ci5ub2RlfSx0KSl9cmV0dXJuIG59fSxrdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpe2Zvcih2YXIgbz1uLm5vZGUscz1PKG8udHlwZS5zY2hlbWEpLGE9bi5zdGFydCxjPTA7Yzx0KzE7YysrKWErPW8uY2hpbGQoYykubm9kZVNpemU7dmFyIGg9by5jaGlsZCh0KSxwPVtdLHU9MDtpZihoLmZvckVhY2goKGZ1bmN0aW9uKHQpezE9PT10LmF0dHJzLnJvd3NwYW4mJih1Kz10LmF0dHJzLmNvbHNwYW4scC5wdXNoKHNbdC50eXBlLnNwZWMudGFibGVSb2xlXS5jcmVhdGVBbmRGaWxsKHQuYXR0cnMsdC5tYXJrcykpKX0pKSx1PHIud2lkdGgpe2Zvcih2YXIgZj1bXSxsPWZ1bmN0aW9uKG4pe3ZhciByPUJ0KG4sKGZ1bmN0aW9uKGUscil7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4saT1uK287cmV0dXJuIG8+MSYmaT50fSkpKGUpO2YucHVzaC5hcHBseShmLHJ0KHIpKX0sdj10O3Y+PTA7di0tKWwodik7Zi5sZW5ndGgmJmYuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZT16dCh0LHtyb3dzcGFuOnQubm9kZS5hdHRycy5yb3dzcGFuKzF9KShlKX0pKX1yZXR1cm4gZChzLnJvdy5jcmVhdGUoaC5hdHRycyxwKSxhKShlKX19cmV0dXJuIGV9fSxTdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLndpZHRoKXJldHVybiBDdChlKTtpZih0Pj0wJiZ0PD1yLndpZHRoKXJldHVybiBpLnJlbW92ZUNvbHVtbihlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSx4KGUpfXJldHVybiBlfX0sT3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKDA9PT10JiYxPT09ci5oZWlnaHQpcmV0dXJuIEN0KGUpO2lmKHQ+PTAmJnQ8PXIuaGVpZ2h0KXJldHVybiBpLnJlbW92ZVJvdyhlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSx4KGUpfXJldHVybiBlfX0sQ3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLG49ZS5kZXB0aDtuPjA7bi0tKXt2YXIgcj1lLm5vZGUobik7aWYoInRhYmxlIj09PXIudHlwZS5zcGVjLnRhYmxlUm9sZSlyZXR1cm4geCh0LmRlbGV0ZShlLmJlZm9yZShuKSxlLmFmdGVyKG4pKSl9cmV0dXJuIHR9LE10PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VsZWN0aW9uO2lmKGh0KGUpKXJldHVybiBDdCh0KTtpZihpdChlKSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPXIucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3Mtbi5zdGFydCxlLiRoZWFkQ2VsbC5wb3Mtbi5zdGFydCk7aWYoMD09by5sZWZ0JiZvLnJpZ2h0PT1yLndpZHRoKXJldHVybiExO2Zvcih2YXIgcz1PYmplY3QuYXNzaWduKHt9LG8se21hcDpyLHRhYmxlOm4ubm9kZSx0YWJsZVN0YXJ0Om4uc3RhcnR9KSxhPXMucmlnaHQtMTs7YS0tKXtpZihpLnJlbW92ZUNvbHVtbih0LHMsYSksYT09PXMubGVmdClicmVhaztzLnRhYmxlPXMudGFibGVTdGFydD90LmRvYy5ub2RlQXQocy50YWJsZVN0YXJ0LTEpOnQuZG9jLHMubWFwPWkuVGFibGVNYXAuZ2V0KHMudGFibGUpfXJldHVybiB4KHQpfX1yZXR1cm4gdH0sVHQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYoaHQoZSkpcmV0dXJuIEN0KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLnRvcCYmby5ib3R0b209PXIuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgcz1PYmplY3QuYXNzaWduKHt9LG8se21hcDpyLHRhYmxlOm4ubm9kZSx0YWJsZVN0YXJ0Om4uc3RhcnR9KSxhPXMuYm90dG9tLTE7O2EtLSl7aWYoaS5yZW1vdmVSb3codCxzLGEpLGE9PT1zLnRvcClicmVhaztzLnRhYmxlPXMudGFibGVTdGFydD90LmRvYy5ub2RlQXQocy50YWJsZVN0YXJ0LTEpOnQuZG9jLHMubWFwPWkuVGFibGVNYXAuZ2V0KHMudGFibGUpfXJldHVybiB4KHQpfX1yZXR1cm4gdH0sTnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPVB0KHQpO3JldHVybiBuP1N0KG4ubGVmdCkocCh0LnBvcykoZSkpOmV9fSxFdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49UHQodCk7cmV0dXJuIG4/T3Qobi50b3ApKHAodC5wb3MpKGUpKTplfX0sQXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT1wdCh0KShvLnNlbGVjdGlvbik7aWYoaSl7Zm9yKHZhciBzPWkubGVuZ3RoLTE7cz49MDtzLS0pbz1lKGlbc10sbyk7aWYobil7dmFyIGE9by5kb2MucmVzb2x2ZShvLm1hcHBpbmcubWFwKGlbaS5sZW5ndGgtMV0ucG9zKSk7by5zZXRTZWxlY3Rpb24oci5TZWxlY3Rpb24ubmVhcihhKSl9cmV0dXJuIHgobyl9cmV0dXJuIG99fSxSdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPXV0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX19cmV0dXJuIG99fSx6dD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdD8obi5zZXROb2RlTWFya3VwKHQucG9zLG51bGwsT2JqZWN0LmFzc2lnbih7fSx0Lm5vZGUuYXR0cnMsZSkpLHgobikpOm59fSxEdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjMsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MyxyPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10sbz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06bnVsbCxpPU8odCkscz1pLmNlbGwsYT1pLmhlYWRlcl9jZWxsLGM9aS5yb3csaD1pLnRhYmxlLHA9W10sdT1bXSxmPTA7ZjxuO2YrKylwLnB1c2goTihzLG8pKSxyJiZ1LnB1c2goTihhLG8pKTtmb3IodmFyIGw9W10sZD0wO2Q8ZTtkKyspbC5wdXNoKGMuY3JlYXRlQ2hlY2tlZChudWxsLHImJjA9PT1kP3U6cCkpO3JldHVybiBoLmNyZWF0ZUNoZWNrZWQobnVsbCxsKX0sSXQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmL2NlbGwvaS50ZXN0KHQudHlwZS5zcGVjLnRhYmxlUm9sZSl9O3JldHVybiBqKHQsZSl9LFB0PWZ1bmN0aW9uKHQpe3ZhciBlPUl0KHQpO2lmKGUpe3ZhciBuPVQodCkscj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ZS5wb3Mtbi5zdGFydDtyZXR1cm4gci5yZWN0QmV0d2VlbihvLG8pfX0sQnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9W10sbz11dCh0KShuLnNlbGVjdGlvbik7aWYobylmb3IodmFyIGk9by5sZW5ndGgtMTtpPj0wO2ktLSllKG9baV0sbikmJnIucHVzaChvW2ldKTtyZXR1cm4gcn19LEZ0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49dCxyPXQsbz1mdW5jdGlvbih0KXt2YXIgbz1wdCh0KShlLnNlbGVjdGlvbik7byYmby5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7bz49biYmKG49dCksbz5yJiYocj1vKX0pKX0saT10O2k+PTA7aS0tKW8oaSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49cHQodCkoZS5zZWxlY3Rpb24pO24mJm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ub2RlLmF0dHJzLmNvbHNwYW4rdC0xO2Uubm9kZS5hdHRycy5jb2xzcGFuPjEmJm4+ciYmKHI9bil9KSl9O2ZvcihpPXQ7aTw9cjtpKyspcyhpKTt2YXIgYT1bXTtmb3IoaT1uO2k8PXI7aSsrKXt2YXIgYz1wdChpKShlLnNlbGVjdGlvbik7YyYmYy5sZW5ndGgmJmEucHVzaChpKX1uPWFbMF0scj1hW2EubGVuZ3RoLTFdO2Zvcih2YXIgaD1wdChuKShlLnNlbGVjdGlvbikscD11dCgwKShlLnNlbGVjdGlvbiksdT1lLmRvYy5yZXNvbHZlKGhbaC5sZW5ndGgtMV0ucG9zKSxmPXZvaWQgMCxsPXI7bD49bjtsLS0pe3ZhciBkPXB0KGwpKGUuc2VsZWN0aW9uKTtpZihkJiZkLmxlbmd0aCl7Zm9yKHZhciB2PXAubGVuZ3RoLTE7dj49MDt2LS0paWYocFt2XS5wb3M9PT1kWzBdLnBvcyl7Zj1kWzBdO2JyZWFrfWlmKGYpYnJlYWt9fXZhciBtPWUuZG9jLnJlc29sdmUoZi5wb3MpO3JldHVybnskYW5jaG9yOnUsJGhlYWQ6bSxpbmRleGVzOmF9fX0sanQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPXV0KHQpKGUuc2VsZWN0aW9uKTtvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj11dCh0KShlLnNlbGVjdGlvbik7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMucm93c3Bhbit0LTE7ZS5ub2RlLmF0dHJzLnJvd3NwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPXV0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciBoPXV0KG4pKGUuc2VsZWN0aW9uKSxwPXB0KDApKGUuc2VsZWN0aW9uKSx1PWUuZG9jLnJlc29sdmUoaFtoLmxlbmd0aC0xXS5wb3MpLGY9dm9pZCAwLGw9cjtsPj1uO2wtLSl7dmFyIGQ9dXQobCkoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9cC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihwW3ZdLnBvcz09PWRbMF0ucG9zKXtmPWRbMF07YnJlYWt9aWYoZilicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShmLnBvcyk7cmV0dXJueyRhbmNob3I6dSwkaGVhZDptLGluZGV4ZXM6YX19fTtlLmlzTm9kZVNlbGVjdGlvbj1nLGUuY2FuSW5zZXJ0PUMsZS5jb252ZXJ0VGFibGVOb2RlVG9BcnJheU9mUm93cz1SLGUuY29udmVydEFycmF5T2ZSb3dzVG9UYWJsZU5vZGU9eixlLmZpbmRQYXJlbnROb2RlPUYsZS5maW5kUGFyZW50Tm9kZUNsb3Nlc3RUb1Bvcz1qLGUuZmluZFBhcmVudERvbVJlZj1fLGUuaGFzUGFyZW50Tm9kZT0kLGUuZmluZFBhcmVudE5vZGVPZlR5cGU9SixlLmZpbmRQYXJlbnROb2RlT2ZUeXBlQ2xvc2VzdFRvUG9zPUwsZS5oYXNQYXJlbnROb2RlT2ZUeXBlPVYsZS5maW5kUGFyZW50RG9tUmVmT2ZUeXBlPXEsZS5maW5kU2VsZWN0ZWROb2RlT2ZUeXBlPVcsZS5maW5kUG9zaXRpb25PZk5vZGVCZWZvcmU9SCxlLmZpbmREb21SZWZBdFBvcz1LLGUuZmxhdHRlbj1VLGUuZmluZENoaWxkcmVuPUcsZS5maW5kVGV4dE5vZGVzPVgsZS5maW5kSW5saW5lTm9kZXM9WSxlLmZpbmRCbG9ja05vZGVzPVosZS5maW5kQ2hpbGRyZW5CeUF0dHI9USxlLmZpbmRDaGlsZHJlbkJ5VHlwZT10dCxlLmZpbmRDaGlsZHJlbkJ5TWFyaz1ldCxlLmNvbnRhaW5zPW50LGUuZmluZFRhYmxlPW90LGUuaXNDZWxsU2VsZWN0aW9uPWl0LGUuZ2V0U2VsZWN0aW9uUmVjdD1zdCxlLmlzQ29sdW1uU2VsZWN0ZWQ9YXQsZS5pc1Jvd1NlbGVjdGVkPWN0LGUuaXNUYWJsZVNlbGVjdGVkPWh0LGUuZ2V0Q2VsbHNJbkNvbHVtbj1wdCxlLmdldENlbGxzSW5Sb3c9dXQsZS5nZXRDZWxsc0luVGFibGU9ZnQsZS5zZWxlY3RDb2x1bW49ZHQsZS5zZWxlY3RSb3c9dnQsZS5zZWxlY3RUYWJsZT1tdCxlLmVtcHR5Q2VsbD15dCxlLmFkZENvbHVtbkF0PWd0LGUubW92ZVJvdz13dCxlLm1vdmVDb2x1bW49eHQsZS5hZGRSb3dBdD1idCxlLmNsb25lUm93QXQ9a3QsZS5yZW1vdmVDb2x1bW5BdD1TdCxlLnJlbW92ZVJvd0F0PU90LGUucmVtb3ZlVGFibGU9Q3QsZS5yZW1vdmVTZWxlY3RlZENvbHVtbnM9TXQsZS5yZW1vdmVTZWxlY3RlZFJvd3M9VHQsZS5yZW1vdmVDb2x1bW5DbG9zZXN0VG9Qb3M9TnQsZS5yZW1vdmVSb3dDbG9zZXN0VG9Qb3M9RXQsZS5mb3JFYWNoQ2VsbEluQ29sdW1uPUF0LGUuZm9yRWFjaENlbGxJblJvdz1SdCxlLnNldENlbGxBdHRycz16dCxlLmNyZWF0ZVRhYmxlPUR0LGUuZmluZENlbGxDbG9zZXN0VG9Qb3M9SXQsZS5maW5kQ2VsbFJlY3RDbG9zZXN0VG9Qb3M9UHQsZS5nZXRTZWxlY3Rpb25SYW5nZUluQ29sdW1uPUZ0LGUuZ2V0U2VsZWN0aW9uUmFuZ2VJblJvdz1qdCxlLnJlbW92ZVBhcmVudE5vZGVPZlR5cGU9cyxlLnJlcGxhY2VQYXJlbnROb2RlT2ZUeXBlPWEsZS5yZW1vdmVTZWxlY3RlZE5vZGU9YyxlLnJlcGxhY2VTZWxlY3RlZE5vZGU9aCxlLnNldFRleHRTZWxlY3Rpb249cCxlLnNhZmVJbnNlcnQ9ZCxlLnNldFBhcmVudE5vZGVNYXJrdXA9dixlLnNlbGVjdFBhcmVudE5vZGVPZlR5cGU9bSxlLnJlbW92ZU5vZGVCZWZvcmU9eX0sZjAyYzpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKTt2YXIgcj1uKCIxM2FkIik7ZnVuY3Rpb24gbyh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgaT10LmNoaWxkKHIpLHM9ZS5jaGlsZChyKTtpZihpIT1zKXtpZighaS5zYW1lTWFya3VwKHMpKXJldHVybiBuO2lmKGkuaXNUZXh0JiZpLnRleHQhPXMudGV4dCl7Zm9yKHZhciBhPTA7aS50ZXh0W2FdPT1zLnRleHRbYV07YSsrKW4rKztyZXR1cm4gbn1pZihpLmNvbnRlbnQuc2l6ZXx8cy5jb250ZW50LnNpemUpe3ZhciBjPW8oaS5jb250ZW50LHMuY29udGVudCxuKzEpO2lmKG51bGwhPWMpcmV0dXJuIGN9bis9aS5ub2RlU2l6ZX1lbHNlIG4rPWkubm9kZVNpemV9fWZ1bmN0aW9uIGkodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxzPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1zKXJldHVybiBvPT1zP251bGw6e2E6bixiOnJ9O3ZhciBhPXQuY2hpbGQoLS1vKSxjPWUuY2hpbGQoLS1zKSxoPWEubm9kZVNpemU7aWYoYSE9Yyl7aWYoIWEuc2FtZU1hcmt1cChjKSlyZXR1cm57YTpuLGI6cn07aWYoYS5pc1RleHQmJmEudGV4dCE9Yy50ZXh0KXt2YXIgcD0wLHU9TWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxjLnRleHQubGVuZ3RoKTt3aGlsZShwPHUmJmEudGV4dFthLnRleHQubGVuZ3RoLXAtMV09PWMudGV4dFtjLnRleHQubGVuZ3RoLXAtMV0pcCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKGEuY29udGVudC5zaXplfHxjLmNvbnRlbnQuc2l6ZSl7dmFyIGY9aShhLmNvbnRlbnQsYy5jb250ZW50LG4tMSxyLTEpO2lmKGYpcmV0dXJuIGZ9bi09aCxyLT1ofWVsc2Ugbi09aCxyLT1ofX12YXIgcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5zaXplKz10W25dLm5vZGVTaXplfSxhPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtzLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGE9dGhpcy5jb250ZW50W2ldLGM9cythLm5vZGVTaXplO2lmKGM+dCYmITEhPT1uKGEscitzLG8saSkmJmEuY29udGVudC5zaXplKXt2YXIgaD1zKzE7YS5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LWgpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaCksbixyK2gpfXM9Y319LHMucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxzLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LHMucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgcyhyLHRoaXMuc2l6ZSt0LnNpemUpfSxzLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgYT10aGlzLmNvbnRlbnRbb10sYz1pK2Eubm9kZVNpemU7Yz50JiYoKGk8dHx8Yz5lKSYmKGE9YS5pc1RleHQ/YS5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKGEudGV4dC5sZW5ndGgsZS1pKSk6YS5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKGEpLHIrPWEubm9kZVNpemUpLGk9Y31yZXR1cm4gbmV3IHMobixyKX0scy5wcm90b3R5cGUuY3V0QnlJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lP3MuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBzKHRoaXMuY29udGVudC5zbGljZSh0LGUpKX0scy5wcm90b3R5cGUucmVwbGFjZUNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jb250ZW50W3RdO2lmKG49PWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz10aGlzLnNpemUrZS5ub2RlU2l6ZS1uLm5vZGVTaXplO3JldHVybiByW3RdPWUsbmV3IHMocixvKX0scy5wcm90b3R5cGUuYWRkVG9TdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHMoW3RdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHRoaXMuY29udGVudC5jb25jYXQodCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspaWYoIXRoaXMuY29udGVudFtlXS5lcSh0LmNvbnRlbnRbZV0pKXJldHVybiExO3JldHVybiEwfSxhLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGEubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGEuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0scy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LHMucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0scy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jb250ZW50W2VdO3QocixuLGUpLG4rPXIubm9kZVNpemV9fSxzLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLG8odGhpcyx0LGUpfSxzLnByb3RvdHlwZS5maW5kRGlmZkVuZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMuc2l6ZSksdm9pZCAwPT09biYmKG49dC5zaXplKSxpKHRoaXMsdCxlLG4pfSxzLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gaCgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gaCh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9oKG4rMSxpKTpoKG4scik7cj1pfX0scy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxzLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxzLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxzLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHMuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBzKGUubWFwKHQubm9kZUZyb21KU09OKSl9LHMuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gcy5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IHMoZXx8dCxuKX0scy5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBzLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBzKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBzKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocy5wcm90b3R5cGUsYSk7dmFyIGM9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIGgodCxlKXtyZXR1cm4gYy5pbmRleD10LGMub2Zmc2V0PWUsY31mdW5jdGlvbiBwKHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCFwKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCFwKHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfXMuZW1wdHk9bmV3IHMoW10sMCk7dmFyIHU9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfXUucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPSExLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtpZih0aGlzLmVxKG8pKXJldHVybiB0O2lmKHRoaXMudHlwZS5leGNsdWRlcyhvLnR5cGUpKWV8fChlPXQuc2xpY2UoMCxyKSk7ZWxzZXtpZihvLnR5cGUuZXhjbHVkZXModGhpcy50eXBlKSlyZXR1cm4gdDshbiYmby50eXBlLnJhbms+dGhpcy50eXBlLnJhbmsmJihlfHwoZT10LnNsaWNlKDAscikpLGUucHVzaCh0aGlzKSxuPSEwKSxlJiZlLnB1c2gobyl9fXJldHVybiBlfHwoZT10LnNsaWNlKCkpLG58fGUucHVzaCh0aGlzKSxlfSx1LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sdS5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSx1LnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJnAodGhpcy5hdHRycyx0LmF0dHJzKX0sdS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LHUuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTWFyay5mcm9tSlNPTiIpO3ZhciBuPXQubWFya3NbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gbWFyayB0eXBlICIrZS50eXBlKyIgaW4gdGhpcyBzY2hlbWEiKTtyZXR1cm4gbi5jcmVhdGUoZS5hdHRycyl9LHUuc2FtZVNldD1mdW5jdGlvbih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxKGVbbl0pKXJldHVybiExO3JldHVybiEwfSx1LnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiB1Lm5vbmU7aWYodCBpbnN0YW5jZW9mIHUpcmV0dXJuW3RdO3ZhciBlPXQuc2xpY2UoKTtyZXR1cm4gZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGUucmFuay1lLnR5cGUucmFua30pKSxlfSx1Lm5vbmU9W10sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGYucHJvdG90eXBlLmNvbnN0cnVjdG9yPWYsZi5wcm90b3R5cGUubmFtZT0iUmVwbGFjZUVycm9yIjt2YXIgbD1mdW5jdGlvbih0LGUsbil7dGhpcy5jb250ZW50PXQsdGhpcy5vcGVuU3RhcnQ9ZSx0aGlzLm9wZW5FbmQ9bn0sZD17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gdih0LGUsbil7dmFyIHI9dC5maW5kSW5kZXgoZSksbz1yLmluZGV4LGk9ci5vZmZzZXQscz10Lm1heWJlQ2hpbGQobyksYT10LmZpbmRJbmRleChuKSxjPWEuaW5kZXgsaD1hLm9mZnNldDtpZihpPT1lfHxzLmlzVGV4dCl7aWYoaCE9biYmIXQuY2hpbGQoYykuaXNUZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LmN1dCgwLGUpLmFwcGVuZCh0LmN1dChuKSl9aWYobyE9Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5yZXBsYWNlQ2hpbGQobyxzLmNvcHkodihzLmNvbnRlbnQsZS1pLTEsbi1pLTEpKSl9ZnVuY3Rpb24gbSh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPW0oYS5jb250ZW50LGUtcy0xLG4pO3JldHVybiBjJiZ0LnJlcGxhY2VDaGlsZChpLGEuY29weShjKSl9ZnVuY3Rpb24geSh0LGUsbil7aWYobi5vcGVuU3RhcnQ+dC5kZXB0aCl0aHJvdyBuZXcgZigiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgZigiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzIik7cmV0dXJuIGcodCxlLG4sMCl9ZnVuY3Rpb24gZyh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9Zyh0LGUsbixyKzEpO3JldHVybiBpLmNvcHkoaS5jb250ZW50LnJlcGxhY2VDaGlsZChvLHMpKX1pZihuLmNvbnRlbnQuc2l6ZSl7aWYobi5vcGVuU3RhcnR8fG4ub3BlbkVuZHx8dC5kZXB0aCE9cnx8ZS5kZXB0aCE9cil7dmFyIGE9TShuLHQpLGM9YS5zdGFydCxoPWEuZW5kO3JldHVybiBTKGksTyh0LGMsaCxlLHIpKX12YXIgcD10LnBhcmVudCx1PXAuY29udGVudDtyZXR1cm4gUyhwLHUuY3V0KDAsdC5wYXJlbnRPZmZzZXQpLmFwcGVuZChuLmNvbnRlbnQpLmFwcGVuZCh1LmN1dChlLnBhcmVudE9mZnNldCkpKX1yZXR1cm4gUyhpLEModCxlLHIpKX1mdW5jdGlvbiB3KHQsZSl7aWYoIWUudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpKXRocm93IG5ldyBmKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiB4KHQsZSxuKXt2YXIgcj10Lm5vZGUobik7cmV0dXJuIHcocixlLm5vZGUobikpLHJ9ZnVuY3Rpb24gYih0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIGsodCxlLG4scil7dmFyIG89KGV8fHQpLm5vZGUobiksaT0wLHM9ZT9lLmluZGV4KG4pOm8uY2hpbGRDb3VudDt0JiYoaT10LmluZGV4KG4pLHQuZGVwdGg+bj9pKys6dC50ZXh0T2Zmc2V0JiYoYih0Lm5vZGVBZnRlcixyKSxpKyspKTtmb3IodmFyIGE9aTthPHM7YSsrKWIoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJmIoZS5ub2RlQmVmb3JlLHIpfWZ1bmN0aW9uIFModCxlKXtpZighdC50eXBlLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgZigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gTyh0LGUsbixyLG8pe3ZhciBpPXQuZGVwdGg+byYmeCh0LGUsbysxKSxhPXIuZGVwdGg+byYmeChuLHIsbysxKSxjPVtdO3JldHVybiBrKG51bGwsdCxvLGMpLGkmJmEmJmUuaW5kZXgobyk9PW4uaW5kZXgobyk/KHcoaSxhKSxiKFMoaSxPKHQsZSxuLHIsbysxKSksYykpOihpJiZiKFMoaSxDKHQsZSxvKzEpKSxjKSxrKGUsbixvLGMpLGEmJmIoUyhhLEMobixyLG8rMSkpLGMpKSxrKHIsbnVsbCxvLGMpLG5ldyBzKGMpfWZ1bmN0aW9uIEModCxlLG4pe3ZhciByPVtdO2lmKGsobnVsbCx0LG4sciksdC5kZXB0aD5uKXt2YXIgbz14KHQsZSxuKzEpO2IoUyhvLEModCxlLG4rMSkpLHIpfXJldHVybiBrKGUsbnVsbCxuLHIpLG5ldyBzKHIpfWZ1bmN0aW9uIE0odCxlKXtmb3IodmFyIG49ZS5kZXB0aC10Lm9wZW5TdGFydCxyPWUubm9kZShuKSxvPXIuY29weSh0LmNvbnRlbnQpLGk9bi0xO2k+PTA7aS0tKW89ZS5ub2RlKGkpLmNvcHkocy5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fWQuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUtdGhpcy5vcGVuU3RhcnQtdGhpcy5vcGVuRW5kfSxsLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUpe3ZhciBuPW0odGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IGwobix0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxsLnByb3RvdHlwZS5yZW1vdmVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBsKHYodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSt0aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sbC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpJiZ0aGlzLm9wZW5TdGFydD09dC5vcGVuU3RhcnQmJnRoaXMub3BlbkVuZD09dC5vcGVuRW5kfSxsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtpZighdGhpcy5jb250ZW50LnNpemUpcmV0dXJuIG51bGw7dmFyIHQ9e2NvbnRlbnQ6dGhpcy5jb250ZW50LnRvSlNPTigpfTtyZXR1cm4gdGhpcy5vcGVuU3RhcnQ+MCYmKHQub3BlblN0YXJ0PXRoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5FbmQ+MCYmKHQub3BlbkVuZD10aGlzLm9wZW5FbmQpLHR9LGwuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gbC5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGwocy5mcm9tSlNPTih0LGUuY29udGVudCksZS5vcGVuU3RhcnR8fDAsZS5vcGVuRW5kfHwwKX0sbC5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgbCh0LG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGwucHJvdG90eXBlLGQpLGwuZW1wdHk9bmV3IGwocy5lbXB0eSwwLDApO3ZhciBUPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBvcz10LHRoaXMucGF0aD1lLHRoaXMuZGVwdGg9ZS5sZW5ndGgvMy0xLHRoaXMucGFyZW50T2Zmc2V0PW59LE49e3BhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxkb2M6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dE9mZnNldDp7Y29uZmlndXJhYmxlOiEwfSxub2RlQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUJlZm9yZTp7Y29uZmlndXJhYmxlOiEwfX07VC5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxOLnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuZGVwdGgpfSxOLmRvYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKDApfSxULnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LFQucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KSsxXX0sVC5wcm90b3R5cGUuaW5kZXhBZnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLmluZGV4KHQpKyh0IT10aGlzLmRlcHRofHx0aGlzLnRleHRPZmZzZXQ/MTowKX0sVC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sVC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuc3RhcnQodCkrdGhpcy5ub2RlKHQpLmNvbnRlbnQuc2l6ZX0sVC5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGJlZm9yZSB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV19LFQucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sTi50ZXh0T2Zmc2V0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXX0sTi5ub2RlQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KHRoaXMuZGVwdGgpO2lmKGU9PXQuY2hpbGRDb3VudClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSxyPXQuY2hpbGQoZSk7cmV0dXJuIG4/dC5jaGlsZChlKS5jdXQobik6cn0sTi5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sVC5wcm90b3R5cGUubWFya3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgoKTtpZigwPT10LmNvbnRlbnQuc2l6ZSlyZXR1cm4gdS5ub25lO2lmKHRoaXMudGV4dE9mZnNldClyZXR1cm4gdC5jaGlsZChlKS5tYXJrczt2YXIgbj10Lm1heWJlQ2hpbGQoZS0xKSxyPXQubWF5YmVDaGlsZChlKTtpZighbil7dmFyIG89bjtuPXIscj1vfWZvcih2YXIgaT1uLm1hcmtzLHM9MDtzPGkubGVuZ3RoO3MrKykhMSE9PWlbc10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmaVtzXS5pc0luU2V0KHIubWFya3MpfHwoaT1pW3MtLV0ucmVtb3ZlRnJvbVNldChpKSk7cmV0dXJuIGl9LFQucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sVC5wcm90b3R5cGUuc2hhcmVkRGVwdGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZGVwdGg7ZT4wO2UtLSlpZih0aGlzLnN0YXJ0KGUpPD10JiZ0aGlzLmVuZChlKT49dClyZXR1cm4gZTtyZXR1cm4gMH0sVC5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMpLHQucG9zPHRoaXMucG9zKXJldHVybiB0LmJsb2NrUmFuZ2UodGhpcyk7Zm9yKHZhciBuPXRoaXMuZGVwdGgtKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnR8fHRoaXMucG9zPT10LnBvcz8xOjApO24+PTA7bi0tKWlmKHQucG9zPD10aGlzLmVuZChuKSYmKCFlfHxlKHRoaXMubm9kZShuKSkpKXJldHVybiBuZXcgeih0aGlzLHQsbil9LFQucHJvdG90eXBlLnNhbWVQYXJlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGFyZW50T2Zmc2V0PT10LnBvcy10LnBhcmVudE9mZnNldH0sVC5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvcz50aGlzLnBvcz90OnRoaXN9LFQucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxULnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTE7ZTw9dGhpcy5kZXB0aDtlKyspdCs9KHQ/Ii8iOiIiKSt0aGlzLm5vZGUoZSkudHlwZS5uYW1lKyJfIit0aGlzLmluZGV4KGUtMSk7cmV0dXJuIHQrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxULnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsaD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFoKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWgtMSxyKz1jKzF9cmV0dXJuIG5ldyBUKGUsbixvKX0sVC5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxFLmxlbmd0aDtuKyspe3ZhciByPUVbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUVbQV09VC5yZXNvbHZlKHQsZSk7cmV0dXJuIEE9KEErMSklUixvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhULnByb3RvdHlwZSxOKTt2YXIgRT1bXSxBPTAsUj0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LEQ9e3N0YXJ0Ontjb25maWd1cmFibGU6ITB9LGVuZDp7Y29uZmlndXJhYmxlOiEwfSxwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxlbmRJbmRleDp7Y29uZmlndXJhYmxlOiEwfX07RC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sRC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LEQucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LEQuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sRC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsRCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxQPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8cy5lbXB0eSx0aGlzLm1hcmtzPXJ8fHUubm9uZX0sQj17bm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxpc0Jsb2NrOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0saXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0Ontjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O0Iubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sQi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sUC5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sUC5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LFAucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LFAucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LFAucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEIudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LFAucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEIuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEIubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxQLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sUC5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LFAucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmcCh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmdS5zYW1lU2V0KHRoaXMubWFya3Msbnx8dS5ub25lKX0sUC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sUC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sUC5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LFAucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGwuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgbChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxQLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4geSh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxQLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxQLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LFAucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LFAucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIFQucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxQLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gVC5yZXNvbHZlKHRoaXMsdCl9LFAucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sQi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sQi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxCLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxCLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEIuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxCLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sQi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sUC5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxQLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09biYmKG49cy5lbXB0eSksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89bi5jaGlsZENvdW50KTt2YXIgaT10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoRnJhZ21lbnQobixyLG8pLGE9aSYmaS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtpZighYXx8IWEudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBjPXI7YzxvO2MrKylpZighdGhpcy50eXBlLmFsbG93c01hcmtzKG4uY2hpbGQoYykubWFya3MpKXJldHVybiExO3JldHVybiEwfSxQLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LFAucHJvdG90eXBlLmNhbkFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250ZW50LnNpemU/dGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCx0aGlzLmNoaWxkQ291bnQsdC5jb250ZW50KTp0aGlzLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKX0sUC5wcm90b3R5cGUuZGVmYXVsdENvbnRlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaEF0KHQpLmRlZmF1bHRUeXBlfSxQLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxQLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSxQLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPXMuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUC5wcm90b3R5cGUsQik7dmFyIEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFApO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgXz1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSwkPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07Xy5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBKKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiBfLmVtcHR5O3ZhciByPVYobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89UShYKHIpKTtyZXR1cm4gdHQobyxuKSxvfSxfLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sXy5wcm90b3R5cGUubWF0Y2hGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dC5jaGlsZENvdW50KTtmb3IodmFyIHI9dGhpcyxvPWU7ciYmbzxuO28rKylyPXIubWF0Y2hUeXBlKHQuY2hpbGQobykudHlwZSk7cmV0dXJuIHJ9LCQuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5leHRbMF07cmV0dXJuISF0JiZ0LmlzSW5saW5lfSwkLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxfLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWZvcih2YXIgbj0wO248dC5uZXh0Lmxlbmd0aDtuKz0yKWlmKHRoaXMubmV4dFtlXT09dC5uZXh0W25dKXJldHVybiEwO3JldHVybiExfSxfLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxhKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBzLmZyb20oYS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBoPTA7aDxpLm5leHQubGVuZ3RoO2grPTIpe3ZhciBwPWkubmV4dFtoXSx1PWkubmV4dFtoKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGY9byh1LGEuY29uY2F0KHApKTtpZihmKXJldHVybiBmfX19cmV0dXJuIG8odGhpcyxbXSl9LF8ucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMud3JhcENhY2hlLmxlbmd0aDtlKz0yKWlmKHRoaXMud3JhcENhY2hlW2VdPT10KXJldHVybiB0aGlzLndyYXBDYWNoZVtlKzFdO3ZhciBuPXRoaXMuY29tcHV0ZVdyYXBwaW5nKHQpO3JldHVybiB0aGlzLndyYXBDYWNoZS5wdXNoKHQsbiksbn0sXy5wcm90b3R5cGUuY29tcHV0ZVdyYXBwaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCksbj1be21hdGNoOnRoaXMsdHlwZTpudWxsLHZpYTpudWxsfV07d2hpbGUobi5sZW5ndGgpe3ZhciByPW4uc2hpZnQoKSxvPXIubWF0Y2g7aWYoby5tYXRjaFR5cGUodCkpe2Zvcih2YXIgaT1bXSxzPXI7cy50eXBlO3M9cy52aWEpaS5wdXNoKHMudHlwZSk7cmV0dXJuIGkucmV2ZXJzZSgpfWZvcih2YXIgYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV07Yy5pc0xlYWZ8fGMuaGFzUmVxdWlyZWRBdHRycygpfHxjLm5hbWUgaW4gZXx8ci50eXBlJiYhby5uZXh0W2ErMV0udmFsaWRFbmR8fChuLnB1c2goe21hdGNoOmMuY29udGVudE1hdGNoLHR5cGU6Yyx2aWE6cn0pLGVbYy5uYW1lXT0hMCl9fX0sJC5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LF8ucHJvdG90eXBlLmVkZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dDw8MTtpZihlPj10aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsJCksXy5lbXB0eT1uZXcgXyghMCk7dmFyIEo9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEw9e25leHQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFYodCl7dmFyIGU9W107ZG97ZS5wdXNoKHEodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBXKHQpe2Zvcih2YXIgZT1HKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPUsodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBIKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBLKHQsZSl7dmFyIG49SCh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0godCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIEcodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9Vih0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1VKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFgodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFkodCxlKXtyZXR1cm4gZS10fWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoWSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIFEodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gbihaKHQsMCkpO2Z1bmN0aW9uIG4ocil7dmFyIG89W107ci5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGVybSxyPWUudG87aWYobil7dmFyIGk9by5pbmRleE9mKG4pLHM9aT4tMSYmb1tpKzFdO1oodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgXyhyLmluZGV4T2YodC5sZW5ndGgtMSk+LTEpLHM9MDtzPG8ubGVuZ3RoO3MrPTIpe3ZhciBhPW9bcysxXS5zb3J0KFkpO2kubmV4dC5wdXNoKG9bc10sZVthLmpvaW4oIiwiKV18fG4oYSkpfXJldHVybiBpfX1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgbj0wLHI9W3RdO248ci5sZW5ndGg7bisrKXtmb3IodmFyIG89cltuXSxpPSFvLnZhbGlkRW5kLHM9W10sYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV0saD1vLm5leHRbYSsxXTtzLnB1c2goYy5uYW1lKSwhaXx8Yy5pc1RleHR8fGMuaGFzUmVxdWlyZWRBdHRycygpfHwoaT0hMSksLTE9PXIuaW5kZXhPZihoKSYmci5wdXNoKGgpfWkmJmUuZXJyKCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoIitzLmpvaW4oIiwgIikrIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiIpfX1mdW5jdGlvbiBldCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKCFyLmhhc0RlZmF1bHQpcmV0dXJuIG51bGw7ZVtuXT1yLmRlZmF1bHR9cmV0dXJuIGV9ZnVuY3Rpb24gbnQodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0KXt2YXIgbz1lJiZlW3JdO2lmKHZvaWQgMD09PW8pe3ZhciBpPXRbcl07aWYoIWkuaGFzRGVmYXVsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSAiK3IpO289aS5kZWZhdWx0fW5bcl09b31yZXR1cm4gbn1mdW5jdGlvbiBydCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQpZm9yKHZhciBuIGluIHQpZVtuXT1uZXcgc3QodFtuXSk7cmV0dXJuIGV9TC5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LEoucHJvdG90eXBlLmVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0PT10JiYodGhpcy5wb3MrK3x8ITApfSxKLnByb3RvdHlwZS5lcnI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKHQrIiAoaW4gY29udGVudCBleHByZXNzaW9uICciK3RoaXMuc3RyaW5nKyInKSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhKLnByb3RvdHlwZSxMKTt2YXIgb3Q9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPWUsdGhpcy5zcGVjPW4sdGhpcy5ncm91cHM9bi5ncm91cD9uLmdyb3VwLnNwbGl0KCIgIik6W10sdGhpcy5hdHRycz1ydChuLmF0dHJzKSx0aGlzLmRlZmF1bHRBdHRycz1ldCh0aGlzLmF0dHJzKSx0aGlzLmNvbnRlbnRNYXRjaD1udWxsLHRoaXMubWFya1NldD1udWxsLHRoaXMuaW5saW5lQ29udGVudD1udWxsLHRoaXMuaXNCbG9jaz0hKG4uaW5saW5lfHwidGV4dCI9PXQpLHRoaXMuaXNUZXh0PSJ0ZXh0Ij09dH0saXQ9e2lzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O2l0LmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzQmxvY2t9LGl0LmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQmxvY2smJnRoaXMuaW5saW5lQ29udGVudH0saXQuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaD09Xy5lbXB0eX0saXQuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZnx8dGhpcy5zcGVjLmF0b219LG90LnByb3RvdHlwZS5oYXNSZXF1aXJlZEF0dHJzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbZV0uaXNSZXF1aXJlZCYmKCF0fHwhKGUgaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxvdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxvdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpudCh0aGlzLmF0dHJzLHQpfSxvdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLHMuZnJvbShlKSx1LnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1zLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgUCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsdS5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1zLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKHMuZW1wdHksITApO3JldHVybiBvP25ldyBQKHRoaXMsdCxlLmFwcGVuZChvKSx1LnNldEZyb20obikpOm51bGx9LG90LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTp1LmVtcHR5OnR9LG90LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgb3QodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob3QucHJvdG90eXBlLGl0KTt2YXIgc3Q9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sYXQ9e2lzUmVxdWlyZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2F0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3QucHJvdG90eXBlLGF0KTt2YXIgY3Q9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPXJ0KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1ldCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyB1KHRoaXMsbyl9O2N0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgdSh0aGlzLG50KHRoaXMuYXR0cnMsdCkpfSxjdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgY3QodCxyKyssZSxvKX0pKSxufSxjdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sY3QucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxjdC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIGh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9clsiYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPXJbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9b3QuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1jdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbyBpbiB0aGlzLm5vZGVzKXtpZihvIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IobysiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBpPXRoaXMubm9kZXNbb10scz1pLnNwZWMuY29udGVudHx8IiIsYT1pLnNwZWMubWFya3M7aS5jb250ZW50TWF0Y2g9bltzXXx8KG5bc109Xy5wYXJzZShzLHRoaXMubm9kZXMpKSxpLmlubGluZUNvbnRlbnQ9aS5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxpLm1hcmtTZXQ9Il8iPT1hP251bGw6YT9wdCh0aGlzLGEuc3BsaXQoIiAiKSk6IiIhPWEmJmkuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgYyBpbiB0aGlzLm1hcmtzKXt2YXIgaD10aGlzLm1hcmtzW2NdLHA9aC5zcGVjLmV4Y2x1ZGVzO2guZXhjbHVkZWQ9bnVsbD09cD9baF06IiI9PXA/W106cHQodGhpcyxwLnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiBwdCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1odC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2Ygb3QpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxodC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEYobixuLmRlZmF1bHRBdHRycyx0LHUuc2V0RnJvbShlKSl9LGh0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0saHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gUC5mcm9tSlNPTih0aGlzLHQpfSxodC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiB1LmZyb21KU09OKHRoaXMsdCl9LGh0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIHV0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTt1dC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0sdXQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IHh0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbC5tYXhPcGVuKG4uZmluaXNoKCkpfSx1dC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoU3QodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSx1dC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSx1dC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUN0KHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9Q3QodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LHV0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgdXQodCx1dC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sbHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sZHQ9e29sOiEwLHVsOiEwfSx2dD0xLG10PTIseXQ9NDtmdW5jdGlvbiBndCh0KXtyZXR1cm4odD92dDowKXwoImZ1bGwiPT09dD9tdDowKX12YXIgd3Q9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZ5dD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9dS5ub25lfTt3dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShzLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx3dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnZ0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1zLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKHMuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9O3ZhciB4dD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uLHRoaXMucGVuZGluZ01hcmtzPVtdO3ZhciByLG89ZS50b3BOb2RlLGk9Z3QoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP3l0OjApO3I9bz9uZXcgd3Qoby50eXBlLG8uYXR0cnMsdS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IHd0KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLHUubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxidD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGt0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmR0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gT3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIEN0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1idC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0seHQucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKE90KGUpKTpudWxsO2lmKG51bGwhPW4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW3JdKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5bb10pfX0seHQucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJnZ0KW4ub3B0aW9ucyZtdHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ZHQuaGFzT3duUHJvcGVydHkoZSkmJmt0KHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpsdC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZihmdC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSx4dC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSx4dC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dS5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSx4dC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSx4dC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1ufHwwLGk9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLHM9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtpIT1zO2k9aS5uZXh0U2libGluZywrK28pdGhpcy5maW5kQXRQb2ludCh0LG8pLHRoaXMuYWRkRE9NKGkpLGUmJmZ0Lmhhc093blByb3BlcnR5KGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnRoaXMuc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsbyl9LHh0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLm9wZW47cj49MDtyLS0pe3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLmZpbmRXcmFwcGluZyh0KTtpZihpJiYoIWV8fGUubGVuZ3RoPmkubGVuZ3RoKSYmKGU9aSxuPW8sIWkubGVuZ3RoKSlicmVhaztpZihvLnNvbGlkKWJyZWFrfWlmKCFlKXJldHVybiExO3RoaXMuc3luYyhuKTtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl0aGlzLmVudGVySW5uZXIoZVtzXSxudWxsLCExKTtyZXR1cm4hMH0seHQucHJvdG90eXBlLmluc2VydE5vZGU9ZnVuY3Rpb24odCl7aWYodC5pc0lubGluZSYmdGhpcy5uZWVkc0Jsb2NrJiYhdGhpcy50b3AudHlwZSl7dmFyIGU9dGhpcy50ZXh0YmxvY2tGcm9tQ29udGV4dCgpO2UmJnRoaXMuZW50ZXJJbm5lcihlKX1pZih0aGlzLmZpbmRQbGFjZSh0KSl7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG49dGhpcy50b3A7dGhpcy5hcHBseVBlbmRpbmdNYXJrcyhuKSxuLm1hdGNoJiYobi5tYXRjaD1uLm1hdGNoLm1hdGNoVHlwZSh0LnR5cGUpKTtmb3IodmFyIHI9bi5hY3RpdmVNYXJrcyxvPTA7bzx0Lm1hcmtzLmxlbmd0aDtvKyspbi50eXBlJiYhbi50eXBlLmFsbG93c01hcmtUeXBlKHQubWFya3Nbb10udHlwZSl8fChyPXQubWFya3Nbb10uYWRkVG9TZXQocikpO3JldHVybiBuLmNvbnRlbnQucHVzaCh0Lm1hcmsocikpLCEwfXJldHVybiExfSx4dC5wcm90b3R5cGUuYXBwbHlQZW5kaW5nTWFya3M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLnBlbmRpbmdNYXJrc1tlXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKXx8bi5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1uLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLHRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLS0sMSkpfX0seHQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSx4dC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfnl0Omd0KHIpO28ub3B0aW9ucyZ5dCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PXl0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHd0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LHh0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYoZT50aGlzLm9wZW4pe2Zvcig7ZT50aGlzLm9wZW47ZS0tKXRoaXMubm9kZXNbZS0xXS5jb250ZW50LnB1c2godGhpcy5ub2Rlc1tlXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0seHQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LHh0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm9wZW47ZT49MDtlLS0paWYodGhpcy5ub2Rlc1tlXT09dClyZXR1cm4gdm9pZCh0aGlzLm9wZW49ZSl9LHh0LnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnBlbmRpbmdNYXJrcy5wdXNoKHQpfSx4dC5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYoZT4tMSl0aGlzLnBlbmRpbmdNYXJrcy5zcGxpY2UoZSwxKTtlbHNle3ZhciBuPXRoaXMudG9wO24uYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KG4uYWN0aXZlTWFya3MpfX0sYnQuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LHh0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4dC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0seHQucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSx4dC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSx4dC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBoPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWh8fGgubmFtZSE9YyYmLTE9PWguZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LHh0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHh0LnByb3RvdHlwZSxidCk7dmFyIE10PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBUdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIE50KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9TXQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1OdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10saD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2gmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGguZG9tKSxvPWguY29udGVudERPTXx8aC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxNdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1NdC5yZW5kZXJTcGVjKE50KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxNdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sTXQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmTXQucmVuZGVyU3BlYyhOdChuKSxyKHQsZSkpfSxNdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGg9TXQucmVuZGVyU3BlYyh0LGMpLHA9aC5kb20sdT1oLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sTXQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IE10KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LE10Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1UdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxNdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIFR0KHQubWFya3MpfTt2YXIgRXQ9NjU1MzUsQXQ9TWF0aC5wb3coMiwxNik7ZnVuY3Rpb24gUnQodCxlKXtyZXR1cm4gdCtlKkF0fWZ1bmN0aW9uIHp0KHQpe3JldHVybiB0JkV0fWZ1bmN0aW9uIER0KHQpe3JldHVybih0LSh0JkV0KSkvQXR9dmFyIEl0PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49bnVsbCksdGhpcy5wb3M9dCx0aGlzLmRlbGV0ZWQ9ZSx0aGlzLnJlY292ZXI9bn0sUHQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy5yYW5nZXM9dCx0aGlzLmludmVydGVkPWV9O1B0LnByb3RvdHlwZS5yZWNvdmVyPWZ1bmN0aW9uKHQpe3ZhciBlPTAsbj16dCh0KTtpZighdGhpcy5pbnZlcnRlZClmb3IodmFyIHI9MDtyPG47cisrKWUrPXRoaXMucmFuZ2VzWzMqcisyXS10aGlzLnJhbmdlc1szKnIrMV07cmV0dXJuIHRoaXMucmFuZ2VzWzMqbl0rZStEdCh0KX0sUHQucHJvdG90eXBlLm1hcFJlc3VsdD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9tYXAodCxlLCExKX0sUHQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9tYXAodCxlLCEwKX0sUHQucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wLG89dGhpcy5pbnZlcnRlZD8yOjEsaT10aGlzLmludmVydGVkPzE6MixzPTA7czx0aGlzLnJhbmdlcy5sZW5ndGg7cys9Myl7dmFyIGE9dGhpcy5yYW5nZXNbc10tKHRoaXMuaW52ZXJ0ZWQ/cjowKTtpZihhPnQpYnJlYWs7dmFyIGM9dGhpcy5yYW5nZXNbcytvXSxoPXRoaXMucmFuZ2VzW3MraV0scD1hK2M7aWYodDw9cCl7dmFyIHU9Yz90PT1hPy0xOnQ9PXA/MTplOmUsZj1hK3IrKHU8MD8wOmgpO2lmKG4pcmV0dXJuIGY7dmFyIGw9UnQocy8zLHQtYSk7cmV0dXJuIG5ldyBJdChmLGU8MD90IT1hOnQhPXAsbCl9cis9aC1jfXJldHVybiBuP3QrcjpuZXcgSXQodCtyKX0sUHQucHJvdG90eXBlLnRvdWNoZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxyPXp0KGUpLG89dGhpcy5pbnZlcnRlZD8yOjEsaT10aGlzLmludmVydGVkPzE6MixzPTA7czx0aGlzLnJhbmdlcy5sZW5ndGg7cys9Myl7dmFyIGE9dGhpcy5yYW5nZXNbc10tKHRoaXMuaW52ZXJ0ZWQ/bjowKTtpZihhPnQpYnJlYWs7dmFyIGM9dGhpcy5yYW5nZXNbcytvXSxoPWErYztpZih0PD1oJiZzPT0zKnIpcmV0dXJuITA7bis9dGhpcy5yYW5nZXNbcytpXS1jfXJldHVybiExfSxQdC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pbnZlcnRlZD8yOjEsbj10aGlzLmludmVydGVkPzE6MixyPTAsbz0wO3I8dGhpcy5yYW5nZXMubGVuZ3RoO3IrPTMpe3ZhciBpPXRoaXMucmFuZ2VzW3JdLHM9aS0odGhpcy5pbnZlcnRlZD9vOjApLGE9aSsodGhpcy5pbnZlcnRlZD8wOm8pLGM9dGhpcy5yYW5nZXNbcitlXSxoPXRoaXMucmFuZ2VzW3Irbl07dChzLHMrYyxhLGEraCksbys9aC1jfX0sUHQucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgUHQodGhpcy5yYW5nZXMsIXRoaXMuaW52ZXJ0ZWQpfSxQdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pbnZlcnRlZD8iLSI6IiIpK0pTT04uc3RyaW5naWZ5KHRoaXMucmFuZ2VzKX0sUHQub2Zmc2V0PWZ1bmN0aW9uKHQpe3JldHVybiAwPT10P1B0LmVtcHR5Om5ldyBQdCh0PDA/WzAsLXQsMF06WzAsMCx0XSl9LFB0LmVtcHR5PW5ldyBQdChbXSk7dmFyIEJ0PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubWFwcz10fHxbXSx0aGlzLmZyb209bnx8MCx0aGlzLnRvPW51bGw9PXI/dGhpcy5tYXBzLmxlbmd0aDpyLHRoaXMubWlycm9yPWV9O2Z1bmN0aW9uIEZ0KHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189RnQucHJvdG90eXBlLGV9QnQucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubWFwcy5sZW5ndGgpLG5ldyBCdCh0aGlzLm1hcHMsdGhpcy5taXJyb3IsdCxlKX0sQnQucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEJ0KHRoaXMubWFwcy5zbGljZSgpLHRoaXMubWlycm9yJiZ0aGlzLm1pcnJvci5zbGljZSgpLHRoaXMuZnJvbSx0aGlzLnRvKX0sQnQucHJvdG90eXBlLmFwcGVuZE1hcD1mdW5jdGlvbih0LGUpe3RoaXMudG89dGhpcy5tYXBzLnB1c2godCksbnVsbCE9ZSYmdGhpcy5zZXRNaXJyb3IodGhpcy5tYXBzLmxlbmd0aC0xLGUpfSxCdC5wcm90b3R5cGUuYXBwZW5kTWFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMubWFwcy5sZW5ndGg7ZTx0Lm1hcHMubGVuZ3RoO2UrKyl7dmFyIHI9dC5nZXRNaXJyb3IoZSk7dGhpcy5hcHBlbmRNYXAodC5tYXBzW2VdLG51bGwhPXImJnI8ZT9uK3I6bnVsbCl9fSxCdC5wcm90b3R5cGUuZ2V0TWlycm9yPWZ1bmN0aW9uKHQpe2lmKHRoaXMubWlycm9yKWZvcih2YXIgZT0wO2U8dGhpcy5taXJyb3IubGVuZ3RoO2UrKylpZih0aGlzLm1pcnJvcltlXT09dClyZXR1cm4gdGhpcy5taXJyb3JbZSsoZSUyPy0xOjEpXX0sQnQucHJvdG90eXBlLnNldE1pcnJvcj1mdW5jdGlvbih0LGUpe3RoaXMubWlycm9yfHwodGhpcy5taXJyb3I9W10pLHRoaXMubWlycm9yLnB1c2godCxlKX0sQnQucHJvdG90eXBlLmFwcGVuZE1hcHBpbmdJbnZlcnRlZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5tYXBzLmxlbmd0aC0xLG49dGhpcy5tYXBzLmxlbmd0aCt0Lm1hcHMubGVuZ3RoO2U+PTA7ZS0tKXt2YXIgcj10LmdldE1pcnJvcihlKTt0aGlzLmFwcGVuZE1hcCh0Lm1hcHNbZV0uaW52ZXJ0KCksbnVsbCE9ciYmcj5lP24tci0xOm51bGwpfX0sQnQucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3ZhciB0PW5ldyBCdDtyZXR1cm4gdC5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQodGhpcyksdH0sQnQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPTEpLHRoaXMubWlycm9yKXJldHVybiB0aGlzLl9tYXAodCxlLCEwKTtmb3IodmFyIG49dGhpcy5mcm9tO248dGhpcy50bztuKyspdD10aGlzLm1hcHNbbl0ubWFwKHQsZSk7cmV0dXJuIHR9LEJ0LnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LEJ0LnByb3RvdHlwZS5fbWFwPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9ITEsbz1udWxsLGk9dGhpcy5mcm9tO2k8dGhpcy50bztpKyspe3ZhciBzPXRoaXMubWFwc1tpXSxhPW8mJm9baV07aWYobnVsbCE9YSYmcy50b3VjaGVzKHQsYSkpdD1zLnJlY292ZXIoYSk7ZWxzZXt2YXIgYz1zLm1hcFJlc3VsdCh0LGUpO2lmKG51bGwhPWMucmVjb3Zlcil7dmFyIGg9dGhpcy5nZXRNaXJyb3IoaSk7aWYobnVsbCE9aCYmaD5pJiZoPHRoaXMudG8pe2lmKGMuZGVsZXRlZCl7aT1oLHQ9dGhpcy5tYXBzW2hdLnJlY292ZXIoYy5yZWNvdmVyKTtjb250aW51ZX0ob3x8KG89T2JqZWN0LmNyZWF0ZShudWxsKSkpW2hdPWMucmVjb3Zlcn19Yy5kZWxldGVkJiYocj0hMCksdD1jLnBvc319cmV0dXJuIG4/dDpuZXcgSXQodCxyKX0sRnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxGdC5wcm90b3R5cGUuY29uc3RydWN0b3I9RnQsRnQucHJvdG90eXBlLm5hbWU9IlRyYW5zZm9ybUVycm9yIjt2YXIganQ9ZnVuY3Rpb24odCl7dGhpcy5kb2M9dCx0aGlzLnN0ZXBzPVtdLHRoaXMuZG9jcz1bXSx0aGlzLm1hcHBpbmc9bmV3IEJ0fSxfdD17YmVmb3JlOntjb25maWd1cmFibGU6ITB9LGRvY0NoYW5nZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uICR0KCl7dGhyb3cgbmV3IEVycm9yKCJPdmVycmlkZSBtZSIpfV90LmJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2NzLmxlbmd0aD90aGlzLmRvY3NbMF06dGhpcy5kb2N9LGp0LnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWF5YmVTdGVwKHQpO2lmKGUuZmFpbGVkKXRocm93IG5ldyBGdChlLmZhaWxlZCk7cmV0dXJuIHRoaXN9LGp0LnByb3RvdHlwZS5tYXliZVN0ZXA9ZnVuY3Rpb24odCl7dmFyIGU9dC5hcHBseSh0aGlzLmRvYyk7cmV0dXJuIGUuZmFpbGVkfHx0aGlzLmFkZFN0ZXAodCxlLmRvYyksZX0sX3QuZG9jQ2hhbmdlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwcy5sZW5ndGg+MH0sanQucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24odCxlKXt0aGlzLmRvY3MucHVzaCh0aGlzLmRvYyksdGhpcy5zdGVwcy5wdXNoKHQpLHRoaXMubWFwcGluZy5hcHBlbmRNYXAodC5nZXRNYXAoKSksdGhpcy5kb2M9ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoanQucHJvdG90eXBlLF90KTt2YXIgSnQ9T2JqZWN0LmNyZWF0ZShudWxsKSxMdD1mdW5jdGlvbigpe307THQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiAkdCgpfSxMdC5wcm90b3R5cGUuZ2V0TWFwPWZ1bmN0aW9uKCl7cmV0dXJuIFB0LmVtcHR5fSxMdC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiAkdCgpfSxMdC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiAkdCgpfSxMdC5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGx9LEx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gJHQoKX0sTHQuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZXx8IWUuc3RlcFR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFN0ZXAuZnJvbUpTT04iKTt2YXIgbj1KdFtlLnN0ZXBUeXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gc3RlcCB0eXBlICIrZS5zdGVwVHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSxMdC5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIEp0KXRocm93IG5ldyBSYW5nZUVycm9yKCJEdXBsaWNhdGUgdXNlIG9mIHN0ZXAgSlNPTiBJRCAiK3QpO3JldHVybiBKdFt0XT1lLGUucHJvdG90eXBlLmpzb25JRD10LGV9O3ZhciBWdD1mdW5jdGlvbih0LGUpe3RoaXMuZG9jPXQsdGhpcy5mYWlsZWQ9ZX07VnQub2s9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBWdCh0LG51bGwpfSxWdC5mYWlsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVnQobnVsbCx0KX0sVnQuZnJvbVJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scil7dHJ5e3JldHVybiBWdC5vayh0LnJlcGxhY2UoZSxuLHIpKX1jYXRjaChvKXtpZihvIGluc3RhbmNlb2YgZilyZXR1cm4gVnQuZmFpbChvLm1lc3NhZ2UpO3Rocm93IG99fTt2YXIgcXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMuc2xpY2U9cix0aGlzLnN0cnVjdHVyZT0hIW99cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0cnVjdHVyZSYmSHQodCx0aGlzLmZyb20sdGhpcy50byk/VnQuZmFpbCgiU3RydWN0dXJlIHJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTpWdC5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMuc2xpY2UpfSxlLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFB0KFt0aGlzLmZyb20sdGhpcy50by10aGlzLmZyb20sdGhpcy5zbGljZS5zaXplXSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUsdC5zbGljZSh0aGlzLmZyb20sdGhpcy50bykpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkP251bGw6bmV3IGUobi5wb3MsTWF0aC5tYXgobi5wb3Msci5wb3MpLHRoaXMuc2xpY2UpfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBlKXx8dC5zdHJ1Y3R1cmUhPXRoaXMuc3RydWN0dXJlKXJldHVybiBudWxsO2lmKHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUhPXQuZnJvbXx8dGhpcy5zbGljZS5vcGVuRW5kfHx0LnNsaWNlLm9wZW5TdGFydCl7aWYodC50byE9dGhpcy5mcm9tfHx0aGlzLnNsaWNlLm9wZW5TdGFydHx8dC5zbGljZS5vcGVuRW5kKXJldHVybiBudWxsO3ZhciBuPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/bC5lbXB0eTpuZXcgbCh0LnNsaWNlLmNvbnRlbnQuYXBwZW5kKHRoaXMuc2xpY2UuY29udGVudCksdC5zbGljZS5vcGVuU3RhcnQsdGhpcy5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodC5mcm9tLHRoaXMudG8sbix0aGlzLnN0cnVjdHVyZSl9dmFyIHI9dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9sLmVtcHR5Om5ldyBsKHRoaXMuc2xpY2UuY29udGVudC5hcHBlbmQodC5zbGljZS5jb250ZW50KSx0aGlzLnNsaWNlLm9wZW5TdGFydCx0LnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy50bysodC50by10LmZyb20pLHIsdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2UiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxsLmZyb21KU09OKHQsbi5zbGljZSksISFuLnN0cnVjdHVyZSl9LGV9KEx0KTtMdC5qc29uSUQoInJlcGxhY2UiLHF0KTt2YXIgV3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMuZ2FwRnJvbT1yLHRoaXMuZ2FwVG89byx0aGlzLnNsaWNlPWksdGhpcy5pbnNlcnQ9cyx0aGlzLnN0cnVjdHVyZT0hIWF9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RydWN0dXJlJiYoSHQodCx0aGlzLmZyb20sdGhpcy5nYXBGcm9tKXx8SHQodCx0aGlzLmdhcFRvLHRoaXMudG8pKSlyZXR1cm4gVnQuZmFpbCgiU3RydWN0dXJlIGdhcC1yZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50Iik7dmFyIGU9dC5zbGljZSh0aGlzLmdhcEZyb20sdGhpcy5nYXBUbyk7aWYoZS5vcGVuU3RhcnR8fGUub3BlbkVuZClyZXR1cm4gVnQuZmFpbCgiR2FwIGlzIG5vdCBhIGZsYXQgcmFuZ2UiKTt2YXIgbj10aGlzLnNsaWNlLmluc2VydEF0KHRoaXMuaW5zZXJ0LGUuY29udGVudCk7cmV0dXJuIG4/VnQuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxuKTpWdC5mYWlsKCJDb250ZW50IGRvZXMgbm90IGZpdCBpbiBnYXAiKX0sZS5wcm90b3R5cGUuZ2V0TWFwPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQdChbdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5pbnNlcnQsdGhpcy5nYXBUbyx0aGlzLnRvLXRoaXMuZ2FwVG8sdGhpcy5zbGljZS5zaXplLXRoaXMuaW5zZXJ0XSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXt2YXIgbj10aGlzLmdhcFRvLXRoaXMuZ2FwRnJvbTtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUrbix0aGlzLmZyb20rdGhpcy5pbnNlcnQsdGhpcy5mcm9tK3RoaXMuaW5zZXJ0K24sdC5zbGljZSh0aGlzLmZyb20sdGhpcy50bykucmVtb3ZlQmV0d2Vlbih0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuZ2FwVG8tdGhpcy5mcm9tKSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpLG89dC5tYXAodGhpcy5nYXBGcm9tLC0xKSxpPXQubWFwKHRoaXMuZ2FwVG8sMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxvPG4ucG9zfHxpPnIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsbyxpLHRoaXMuc2xpY2UsdGhpcy5pbnNlcnQsdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2VBcm91bmQiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG8sZ2FwRnJvbTp0aGlzLmdhcEZyb20sZ2FwVG86dGhpcy5nYXBUbyxpbnNlcnQ6dGhpcy5pbnNlcnR9O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvfHwibnVtYmVyIiE9dHlwZW9mIG4uZ2FwRnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLmdhcFRvfHwibnVtYmVyIiE9dHlwZW9mIG4uaW5zZXJ0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlQXJvdW5kU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxuLmdhcEZyb20sbi5nYXBUbyxsLmZyb21KU09OKHQsbi5zbGljZSksbi5pbnNlcnQsISFuLnN0cnVjdHVyZSl9LGV9KEx0KTtmdW5jdGlvbiBIdCh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpLG89bi1lLGk9ci5kZXB0aDt3aGlsZShvPjAmJmk+MCYmci5pbmRleEFmdGVyKGkpPT1yLm5vZGUoaSkuY2hpbGRDb3VudClpLS0sby0tO2lmKG8+MCl7dmFyIHM9ci5ub2RlKGkpLm1heWJlQ2hpbGQoci5pbmRleEFmdGVyKGkpKTt3aGlsZShvPjApe2lmKCFzfHxzLmlzTGVhZilyZXR1cm4hMDtzPXMuZmlyc3RDaGlsZCxvLS19fXJldHVybiExfWZ1bmN0aW9uIEt0KHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSksbz1yLmluZGV4KCk7cmV0dXJuIHIucGFyZW50LmNhblJlcGxhY2VXaXRoKG8sbysxLG4pfWZ1bmN0aW9uIFV0KHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSk7aWYoci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoci5pbmRleCgpLHIuaW5kZXgoKSxuKSlyZXR1cm4gZTtpZigwPT1yLnBhcmVudE9mZnNldClmb3IodmFyIG89ci5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1yLmluZGV4KG8pO2lmKHIubm9kZShvKS5jYW5SZXBsYWNlV2l0aChpLGksbikpcmV0dXJuIHIuYmVmb3JlKG8rMSk7aWYoaT4wKXJldHVybiBudWxsfWlmKHIucGFyZW50T2Zmc2V0PT1yLnBhcmVudC5jb250ZW50LnNpemUpZm9yKHZhciBzPXIuZGVwdGgtMTtzPj0wO3MtLSl7dmFyIGE9ci5pbmRleEFmdGVyKHMpO2lmKHIubm9kZShzKS5jYW5SZXBsYWNlV2l0aChhLGEsbikpcmV0dXJuIHIuYWZ0ZXIocysxKTtpZihhPHIubm9kZShzKS5jaGlsZENvdW50KXJldHVybiBudWxsfX1mdW5jdGlvbiBHdCh0LGUsbil7Zm9yKHZhciByPVtdLG89MDtvPHQuY2hpbGRDb3VudDtvKyspe3ZhciBpPXQuY2hpbGQobyk7aS5jb250ZW50LnNpemUmJihpPWkuY29weShHdChpLmNvbnRlbnQsZSxpKSkpLGkuaXNJbmxpbmUmJihpPWUoaSxuLG8pKSxyLnB1c2goaSl9cmV0dXJuIHMuZnJvbUFycmF5KHIpfUx0Lmpzb25JRCgicmVwbGFjZUFyb3VuZCIsV3QpLGp0LnByb3RvdHlwZS5saWZ0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuJGZyb20scj10LiR0byxvPXQuZGVwdGgsaT1uLmJlZm9yZShvKzEpLGE9ci5hZnRlcihvKzEpLGM9aSxoPWEscD1zLmVtcHR5LHU9MCxmPW8sZD0hMTtmPmU7Zi0tKWR8fG4uaW5kZXgoZik+MD8oZD0hMCxwPXMuZnJvbShuLm5vZGUoZikuY29weShwKSksdSsrKTpjLS07Zm9yKHZhciB2PXMuZW1wdHksbT0wLHk9byxnPSExO3k+ZTt5LS0pZ3x8ci5hZnRlcih5KzEpPHIuZW5kKHkpPyhnPSEwLHY9cy5mcm9tKHIubm9kZSh5KS5jb3B5KHYpKSxtKyspOmgrKztyZXR1cm4gdGhpcy5zdGVwKG5ldyBXdChjLGgsaSxhLG5ldyBsKHAuYXBwZW5kKHYpLHUsbSkscC5zaXplLXUsITApKX0sanQucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49cy5lbXB0eSxyPWUubGVuZ3RoLTE7cj49MDtyLS0pbj1zLmZyb20oZVtyXS50eXBlLmNyZWF0ZShlW3JdLmF0dHJzLG4pKTt2YXIgbz10LnN0YXJ0LGk9dC5lbmQ7cmV0dXJuIHRoaXMuc3RlcChuZXcgV3QobyxpLG8saSxuZXcgbChuLDAsMCksZS5sZW5ndGgsITApKX0sanQucHJvdG90eXBlLnNldEJsb2NrVHlwZT1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10aGlzO2lmKHZvaWQgMD09PWUmJihlPXQpLCFuLmlzVGV4dGJsb2NrKXRocm93IG5ldyBSYW5nZUVycm9yKCJUeXBlIGdpdmVuIHRvIHNldEJsb2NrVHlwZSBzaG91bGQgYmUgYSB0ZXh0YmxvY2siKTt2YXIgaT10aGlzLnN0ZXBzLmxlbmd0aDtyZXR1cm4gdGhpcy5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCxlKXtpZih0LmlzVGV4dGJsb2NrJiYhdC5oYXNNYXJrdXAobixyKSYmS3Qoby5kb2Msby5tYXBwaW5nLnNsaWNlKGkpLm1hcChlKSxuKSl7by5jbGVhckluY29tcGF0aWJsZShvLm1hcHBpbmcuc2xpY2UoaSkubWFwKGUsMSksbik7dmFyIGE9by5tYXBwaW5nLnNsaWNlKGkpLGM9YS5tYXAoZSwxKSxoPWEubWFwKGUrdC5ub2RlU2l6ZSwxKTtyZXR1cm4gby5zdGVwKG5ldyBXdChjLGgsYysxLGgtMSxuZXcgbChzLmZyb20obi5jcmVhdGUocixudWxsLHQubWFya3MpKSwwLDApLDEsITApKSwhMX19KSksdGhpc30sanQucHJvdG90eXBlLnNldE5vZGVNYXJrdXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcy5kb2Mubm9kZUF0KHQpO2lmKCFvKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBub2RlIGF0IGdpdmVuIHBvc2l0aW9uIik7ZXx8KGU9by50eXBlKTt2YXIgaT1lLmNyZWF0ZShuLG51bGwscnx8by5tYXJrcyk7aWYoby5pc0xlYWYpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0K28ubm9kZVNpemUsaSk7aWYoIWUudmFsaWRDb250ZW50KG8uY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSB0eXBlICIrZS5uYW1lKTtyZXR1cm4gdGhpcy5zdGVwKG5ldyBXdCh0LHQrby5ub2RlU2l6ZSx0KzEsdCtvLm5vZGVTaXplLTEsbmV3IGwocy5mcm9tKGkpLDAsMCksMSwhMCkpfSxqdC5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTEpO2Zvcih2YXIgcj10aGlzLmRvYy5yZXNvbHZlKHQpLG89cy5lbXB0eSxpPXMuZW1wdHksYT1yLmRlcHRoLGM9ci5kZXB0aC1lLGg9ZS0xO2E+YzthLS0saC0tKXtvPXMuZnJvbShyLm5vZGUoYSkuY29weShvKSk7dmFyIHA9biYmbltoXTtpPXMuZnJvbShwP3AudHlwZS5jcmVhdGUocC5hdHRycyxpKTpyLm5vZGUoYSkuY29weShpKSl9cmV0dXJuIHRoaXMuc3RlcChuZXcgcXQodCx0LG5ldyBsKG8uYXBwZW5kKGkpLGUsZSksITApKX0sanQucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xKTt2YXIgbj1uZXcgcXQodC1lLHQrZSxsLmVtcHR5LCEwKTtyZXR1cm4gdGhpcy5zdGVwKG4pfTt2YXIgWHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLm1hcms9cn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLHI9dC5yZXNvbHZlKHRoaXMuZnJvbSksbz1yLm5vZGUoci5zaGFyZWREZXB0aCh0aGlzLnRvKSksaT1uZXcgbChHdChuLmNvbnRlbnQsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4udHlwZS5hbGxvd3NNYXJrVHlwZShlLm1hcmsudHlwZSk/dC5tYXJrKGUubWFyay5hZGRUb1NldCh0Lm1hcmtzKSk6dH0pLG8pLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIFZ0LmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8saSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgWXQodGhpcy5mcm9tLHRoaXMudG8sdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bi5wb3M+PXIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGUmJnQubWFyay5lcSh0aGlzLm1hcmspJiZ0aGlzLmZyb208PXQudG8mJnRoaXMudG8+PXQuZnJvbSlyZXR1cm4gbmV3IGUoTWF0aC5taW4odGhpcy5mcm9tLHQuZnJvbSksTWF0aC5tYXgodGhpcy50byx0LnRvKSx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcFR5cGU6ImFkZE1hcmsiLG1hcms6dGhpcy5tYXJrLnRvSlNPTigpLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgQWRkTWFya1N0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sdC5tYXJrRnJvbUpTT04obi5tYXJrKSl9LGV9KEx0KTtMdC5qc29uSUQoImFkZE1hcmsiLFh0KTt2YXIgWXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLm1hcms9cn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLHI9bmV3IGwoR3Qobi5jb250ZW50LChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKGUubWFyay5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX0pKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBWdC5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLHIpfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFh0KHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG4ucG9zPj1yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBlJiZ0Lm1hcmsuZXEodGhpcy5tYXJrKSYmdGhpcy5mcm9tPD10LnRvJiZ0aGlzLnRvPj10LmZyb20pcmV0dXJuIG5ldyBlKE1hdGgubWluKHRoaXMuZnJvbSx0LmZyb20pLE1hdGgubWF4KHRoaXMudG8sdC50byksdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3N0ZXBUeXBlOiJyZW1vdmVNYXJrIixtYXJrOnRoaXMubWFyay50b0pTT04oKSxmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFJlbW92ZU1hcmtTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLHQubWFya0Zyb21KU09OKG4ubWFyaykpfSxlfShMdCk7ZnVuY3Rpb24gWnQodCxlLG4scil7aWYodm9pZCAwPT09biYmKG49ZSksdm9pZCAwPT09ciYmKHI9bC5lbXB0eSksZT09biYmIXIuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgbz10LnJlc29sdmUoZSksaT10LnJlc29sdmUobik7aWYoc2UobyxpLHIpKXJldHVybiBuZXcgcXQoZSxuLHIpO3ZhciBzPWhlKG8sciksYT10ZShvLHMpLGM9aWUobyxpLGEpO2lmKCFjKXJldHVybiBudWxsO2lmKGEuc2l6ZSE9Yy5zaXplJiZhZShvLGksYSkpe3ZhciBoPWkuZGVwdGgscD1pLmFmdGVyKGgpO3doaWxlKGg+MSYmcD09aS5lbmQoLS1oKSkrK3A7dmFyIHU9aWUobyx0LnJlc29sdmUocCksYSk7aWYodSlyZXR1cm4gbmV3IFd0KGUscCxuLGkuZW5kKCksdSxhLnNpemUpfXJldHVybiBjLnNpemV8fGUhPW4/bmV3IHF0KGUsbixjKTpudWxsfWZ1bmN0aW9uIFF0KHQsZSxuLHIpe3ZhciBvPXMuZW1wdHksaT0wLGE9bltlXTtpZih0LmRlcHRoPmUpe3ZhciBjPVF0KHQsZSsxLG4scnx8YSk7aT1jLm9wZW5FbmQrMSxvPXMuZnJvbSh0Lm5vZGUoZSsxKS5jb3B5KGMuY29udGVudCkpfXJldHVybiBhJiYobz1vLmFwcGVuZChhLmNvbnRlbnQpLGk9YS5vcGVuRW5kKSxyJiYobz1vLmFwcGVuZCh0Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5maWxsQmVmb3JlKHMuZW1wdHksITApKSxpPTApLHtjb250ZW50Om8sb3BlbkVuZDppfX1mdW5jdGlvbiB0ZSh0LGUpe3ZhciBuPVF0KHQsMCxlLCExKSxyPW4uY29udGVudCxvPW4ub3BlbkVuZDtyZXR1cm4gbmV3IGwocix0LmRlcHRoLG98fDApfWZ1bmN0aW9uIGVlKHQsZSxuLHIsbyxpLHMpe3ZhciBhLGM9dC5jaGlsZENvdW50LGg9Yy0ocz4wPzE6MCkscD1pPDA/ZTpuLm5vZGUobyk7YT1pPDA/cC5jb250ZW50TWF0Y2hBdChoKToxPT1jJiZzPjA/cC5jb250ZW50TWF0Y2hBdChpP24uaW5kZXgobyk6bi5pbmRleEFmdGVyKG8pKTpwLmNvbnRlbnRNYXRjaEF0KG4uaW5kZXhBZnRlcihvKSkubWF0Y2hGcmFnbWVudCh0LGM+MCYmaT8xOjAsaCk7dmFyIHU9ci5ub2RlKG8pO2lmKHM+MCYmbzxyLmRlcHRoKXt2YXIgZj11LmNvbnRlbnQuY3V0QnlJbmRleChyLmluZGV4QWZ0ZXIobykpLmFkZFRvU3RhcnQodC5sYXN0Q2hpbGQpLGw9YS5maWxsQmVmb3JlKGYsITApO2lmKGwmJmwuc2l6ZSYmaT4wJiYxPT1jJiYobD1udWxsKSxsKXt2YXIgZD1lZSh0Lmxhc3RDaGlsZC5jb250ZW50LHQubGFzdENoaWxkLG4scixvKzEsMT09Yz9pLTE6LTEscy0xKTtpZihkKXt2YXIgdj10Lmxhc3RDaGlsZC5jb3B5KGQpO3JldHVybiBsLnNpemU/dC5jdXRCeUluZGV4KDAsYy0xKS5hcHBlbmQobCkuYWRkVG9FbmQodik6dC5yZXBsYWNlQ2hpbGQoYy0xLHYpfX19cz4wJiYoYT1hLm1hdGNoVHlwZSgoMT09YyYmaT4wP24ubm9kZShvKzEpOnQubGFzdENoaWxkKS50eXBlKSk7dmFyIG09ci5pbmRleChvKTtpZihtPT11LmNoaWxkQ291bnQmJiF1LnR5cGUuY29tcGF0aWJsZUNvbnRlbnQoZS50eXBlKSlyZXR1cm4gbnVsbDtmb3IodmFyIHk9YS5maWxsQmVmb3JlKHUuY29udGVudCwhMCxtKSxnPW07eSYmZzx1LmNvbnRlbnQuY2hpbGRDb3VudDtnKyspcC50eXBlLmFsbG93c01hcmtzKHUuY29udGVudC5jaGlsZChnKS5tYXJrcyl8fCh5PW51bGwpO2lmKCF5KXJldHVybiBudWxsO2lmKHM+MCl7dmFyIHc9bmUodC5sYXN0Q2hpbGQscy0xLG4sbysxLDE9PWM/aS0xOi0xKTt0PXQucmVwbGFjZUNoaWxkKGMtMSx3KX1yZXR1cm4gdD10LmFwcGVuZCh5KSxyLmRlcHRoPm8mJih0PXQuYWRkVG9FbmQocmUocixvKzEpKSksdH1mdW5jdGlvbiBuZSh0LGUsbixyLG8pe3ZhciBpLGE9dC5jb250ZW50LGM9YS5jaGlsZENvdW50O2lmKGk9bz49MD9uLm5vZGUocikuY29udGVudE1hdGNoQXQobi5pbmRleEFmdGVyKHIpKS5tYXRjaEZyYWdtZW50KGEsbz4wPzE6MCxjKTp0LmNvbnRlbnRNYXRjaEF0KGMpLGU+MCl7dmFyIGg9bmUoYS5sYXN0Q2hpbGQsZS0xLG4scisxLDE9PWM/by0xOi0xKTthPWEucmVwbGFjZUNoaWxkKGMtMSxoKX1yZXR1cm4gdC5jb3B5KGEuYXBwZW5kKGkuZmlsbEJlZm9yZShzLmVtcHR5LCEwKSkpfWZ1bmN0aW9uIHJlKHQsZSl7dmFyIG49dC5ub2RlKGUpLHI9bi5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKG4uY29udGVudCwhMCx0LmluZGV4KGUpKTtyZXR1cm4gdC5kZXB0aD5lJiYocj1yLmFkZFRvRW5kKHJlKHQsZSsxKSkpLG4uY29weShyKX1mdW5jdGlvbiBvZSh0LGUsbil7d2hpbGUoZT4wJiZuPjAmJjE9PXQuY2hpbGRDb3VudCl0PXQuZmlyc3RDaGlsZC5jb250ZW50LGUtLSxuLS07cmV0dXJuIG5ldyBsKHQsZSxuKX1mdW5jdGlvbiBpZSh0LGUsbil7dmFyIHI9ZWUobi5jb250ZW50LHQubm9kZSgwKSx0LGUsMCxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiByP29lKHIsbi5vcGVuU3RhcnQsZS5kZXB0aCk6bnVsbH1mdW5jdGlvbiBzZSh0LGUsbil7cmV0dXJuIW4ub3BlblN0YXJ0JiYhbi5vcGVuRW5kJiZ0LnN0YXJ0KCk9PWUuc3RhcnQoKSYmdC5wYXJlbnQuY2FuUmVwbGFjZSh0LmluZGV4KCksZS5pbmRleCgpLG4uY29udGVudCl9ZnVuY3Rpb24gYWUodCxlLG4pe2lmKCFlLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgcixvPW4ub3BlbkVuZD9jZShuLmNvbnRlbnQsbi5vcGVuRW5kKTp0Lm5vZGUodC5kZXB0aC0obi5vcGVuU3RhcnQtbi5vcGVuRW5kKSk7aWYoIW8uaXNUZXh0YmxvY2spcmV0dXJuITE7Zm9yKHZhciBpPWUuaW5kZXgoKTtpPGUucGFyZW50LmNoaWxkQ291bnQ7aSsrKWlmKCFvLnR5cGUuYWxsb3dzTWFya3MoZS5wYXJlbnQuY2hpbGQoaSkubWFya3MpKXJldHVybiExO3JldHVybiBuLm9wZW5FbmQ/cj1vLmNvbnRlbnRNYXRjaEF0KG8uY2hpbGRDb3VudCk6KHI9by5jb250ZW50TWF0Y2hBdChvLmNoaWxkQ291bnQpLG4uc2l6ZSYmKHI9ci5tYXRjaEZyYWdtZW50KG4uY29udGVudCxuLm9wZW5TdGFydD8xOjApKSkscj1yLm1hdGNoRnJhZ21lbnQoZS5wYXJlbnQuY29udGVudCxlLmluZGV4KCkpLHImJnIudmFsaWRFbmR9ZnVuY3Rpb24gY2UodCxlKXtmb3IodmFyIG49MTtuPGU7bisrKXQ9dC5sYXN0Q2hpbGQuY29udGVudDtyZXR1cm4gdC5sYXN0Q2hpbGR9ZnVuY3Rpb24gaGUodCxlKXtmb3IodmFyIG49bmV3IHBlKHQpLHI9MTtlLnNpemUmJnI8PTM7cisrKXt2YXIgbz1uLnBsYWNlU2xpY2UoZS5jb250ZW50LGUub3BlblN0YXJ0LGUub3BlbkVuZCxyKTszPT1yJiZvIT1lJiZvLnNpemUmJihyPTApLGU9b313aGlsZShuLm9wZW4ubGVuZ3RoKW4uY2xvc2VOb2RlKCk7cmV0dXJuIG4ucGxhY2VkfUx0Lmpzb25JRCgicmVtb3ZlTWFyayIsWXQpLGp0LnByb3RvdHlwZS5hZGRNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89W10saT1bXSxzPW51bGwsYT1udWxsO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLGMsaCl7aWYoci5pc0lubGluZSl7dmFyIHA9ci5tYXJrcztpZighbi5pc0luU2V0KHApJiZoLnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKSl7Zm9yKHZhciB1PU1hdGgubWF4KGMsdCksZj1NYXRoLm1pbihjK3Iubm9kZVNpemUsZSksbD1uLmFkZFRvU2V0KHApLGQ9MDtkPHAubGVuZ3RoO2QrKylwW2RdLmlzSW5TZXQobCl8fChzJiZzLnRvPT11JiZzLm1hcmsuZXEocFtkXSk/cy50bz1mOm8ucHVzaChzPW5ldyBZdCh1LGYscFtkXSkpKTthJiZhLnRvPT11P2EudG89ZjppLnB1c2goYT1uZXcgWHQodSxmLG4pKX19fSkpLG8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcCh0KX0pKSxpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAodCl9KSksdGhpc30sanQucHJvdG90eXBlLnJlbW92ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCk7dmFyIG89W10saT0wO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLHMpe2lmKHIuaXNJbmxpbmUpe2krKzt2YXIgYT1udWxsO2lmKG4gaW5zdGFuY2VvZiBjdCl7dmFyIGM9bi5pc0luU2V0KHIubWFya3MpO2MmJihhPVtjXSl9ZWxzZSBuP24uaXNJblNldChyLm1hcmtzKSYmKGE9W25dKTphPXIubWFya3M7aWYoYSYmYS5sZW5ndGgpZm9yKHZhciBoPU1hdGgubWluKHMrci5ub2RlU2l6ZSxlKSxwPTA7cDxhLmxlbmd0aDtwKyspe2Zvcih2YXIgdT1hW3BdLGY9dm9pZCAwLGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIGQ9b1tsXTtkLnN0ZXA9PWktMSYmdS5lcShvW2xdLnN0eWxlKSYmKGY9ZCl9Zj8oZi50bz1oLGYuc3RlcD1pKTpvLnB1c2goe3N0eWxlOnUsZnJvbTpNYXRoLm1heChzLHQpLHRvOmgsc3RlcDppfSl9fX0pKSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAobmV3IFl0KHQuZnJvbSx0LnRvLHQuc3R5bGUpKX0pKSx0aGlzfSxqdC5wcm90b3R5cGUuY2xlYXJJbmNvbXBhdGlibGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUuY29udGVudE1hdGNoKTtmb3IodmFyIHI9dGhpcy5kb2Mubm9kZUF0KHQpLG89W10saT10KzEsYT0wO2E8ci5jaGlsZENvdW50O2ErKyl7dmFyIGM9ci5jaGlsZChhKSxoPWkrYy5ub2RlU2l6ZSxwPW4ubWF0Y2hUeXBlKGMudHlwZSxjLmF0dHJzKTtpZihwKXtuPXA7Zm9yKHZhciB1PTA7dTxjLm1hcmtzLmxlbmd0aDt1KyspZS5hbGxvd3NNYXJrVHlwZShjLm1hcmtzW3VdLnR5cGUpfHx0aGlzLnN0ZXAobmV3IFl0KGksaCxjLm1hcmtzW3VdKSl9ZWxzZSBvLnB1c2gobmV3IHF0KGksaCxsLmVtcHR5KSk7aT1ofWlmKCFuLnZhbGlkRW5kKXt2YXIgZj1uLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7dGhpcy5yZXBsYWNlKGksaSxuZXcgbChmLDAsMCkpfWZvcih2YXIgZD1vLmxlbmd0aC0xO2Q+PTA7ZC0tKXRoaXMuc3RlcChvW2RdKTtyZXR1cm4gdGhpc30sanQucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPXQpLHZvaWQgMD09PW4mJihuPWwuZW1wdHkpO3ZhciByPVp0KHRoaXMuZG9jLHQsZSxuKTtyZXR1cm4gciYmdGhpcy5zdGVwKHIpLHRoaXN9LGp0LnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsbmV3IGwocy5mcm9tKG4pLDAsMCkpfSxqdC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsbC5lbXB0eSl9LGp0LnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQsZSl9O3ZhciBwZT1mdW5jdGlvbih0KXt0aGlzLm9wZW49W107Zm9yKHZhciBlPTA7ZTw9dC5kZXB0aDtlKyspe3ZhciBuPXQubm9kZShlKSxyPW4uY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKTt0aGlzLm9wZW4ucHVzaCh7cGFyZW50Om4sbWF0Y2g6cixjb250ZW50OnMuZW1wdHksd3JhcHBlcjohMSxvcGVuRW5kOjAsZGVwdGg6ZX0pfXRoaXMucGxhY2VkPVtdfTtmdW5jdGlvbiB1ZSh0LGUsbil7dmFyIHI9dC5jb250ZW50O2lmKGU+MSl7dmFyIG89dWUodC5maXJzdENoaWxkLGUtMSwxPT10LmNoaWxkQ291bnQ/bi0xOjApO3I9dC5jb250ZW50LnJlcGxhY2VDaGlsZCgwLG8pfXZhciBpPXQudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShyLDA9PW4pO3JldHVybiB0LmNvcHkoaS5hcHBlbmQocikpfWZ1bmN0aW9uIGZlKHQsZSl7dmFyIG49dC5jb250ZW50O2lmKGU+MSl7dmFyIHI9ZmUodC5sYXN0Q2hpbGQsZS0xKTtuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEscil9dmFyIG89dC5jb250ZW50TWF0Y2hBdCh0LmNoaWxkQ291bnQpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIHQuY29weShuLmFwcGVuZChvKSl9ZnVuY3Rpb24gbGUodCxlKXtyZXR1cm4gZT90LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSxmZSh0Lmxhc3RDaGlsZCxlKSk6dH1mdW5jdGlvbiBkZSh0LGUsbixyLG8pe2lmKGU8bil7dmFyIGk9dC5maXJzdENoaWxkO3Q9dC5yZXBsYWNlQ2hpbGQoMCxpLmNvcHkoZGUoaS5jb250ZW50LGUrMSxuLHIsaSkpKX1pZihlPnIpe3ZhciBhPW8uY29udGVudE1hdGNoQXQoMCksYz1hLmZpbGxCZWZvcmUodCkuYXBwZW5kKHQpO3Q9Yy5hcHBlbmQoYS5tYXRjaEZyYWdtZW50KGMpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCkpfXJldHVybiB0fWZ1bmN0aW9uIHZlKHQsZSl7Zm9yKHZhciBuPVtdLHI9TWF0aC5taW4odC5kZXB0aCxlLmRlcHRoKSxvPXI7bz49MDtvLS0pe3ZhciBpPXQuc3RhcnQobyk7aWYoaTx0LnBvcy0odC5kZXB0aC1vKXx8ZS5lbmQobyk+ZS5wb3MrKGUuZGVwdGgtbyl8fHQubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nfHxlLm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZylicmVhaztpPT1lLnN0YXJ0KG8pJiZuLnB1c2gobyl9cmV0dXJuIG59cGUucHJvdG90eXBlLnBsYWNlU2xpY2U9ZnVuY3Rpb24odCxlLG4scixvKXtpZihlPjApe3ZhciBpPXQuZmlyc3RDaGlsZCxhPXRoaXMucGxhY2VTbGljZShpLmNvbnRlbnQsTWF0aC5tYXgoMCxlLTEpLG4mJjE9PXQuY2hpbGRDb3VudD9uLTE6MCxyLGkpO2EuY29udGVudCE9aS5jb250ZW50JiYoYS5jb250ZW50LnNpemU/KHQ9dC5yZXBsYWNlQ2hpbGQoMCxpLmNvcHkoYS5jb250ZW50KSksZT1hLm9wZW5TdGFydCsxKTooMT09dC5jaGlsZENvdW50JiYobj0wKSx0PXQuY3V0QnlJbmRleCgxKSxlPTApKX12YXIgYz10aGlzLnBsYWNlQ29udGVudCh0LGUsbixyLG8pO2lmKHI+MiYmYy5zaXplJiYwPT1lKXt2YXIgaD1jLmNvbnRlbnQuZmlyc3RDaGlsZCxwPTE9PWMuY29udGVudC5jaGlsZENvdW50O3RoaXMucGxhY2VDb250ZW50KGguY29udGVudCwwLG4mJnA/bi0xOjAscixoKSxjPXA/cy5lbXB0eTpuZXcgbChjLmNvbnRlbnQuY3V0QnlJbmRleCgxKSwwLG4pfXJldHVybiBjfSxwZS5wcm90b3R5cGUucGxhY2VDb250ZW50PWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXtmb3IodmFyIGE9dC5jaGlsZChpKSxjPSExLGg9aT09dC5jaGlsZENvdW50LTEscD10aGlzLm9wZW4ubGVuZ3RoLTE7cD49MDtwLS0pe3ZhciB1PXRoaXMub3BlbltwXSxmPXZvaWQgMDtpZihyPjEmJihmPXUubWF0Y2guZmluZFdyYXBwaW5nKGEudHlwZSkpJiYoIW98fCFmLmxlbmd0aHx8ZltmLmxlbmd0aC0xXSE9by50eXBlKSl7d2hpbGUodGhpcy5vcGVuLmxlbmd0aC0xPnApdGhpcy5jbG9zZU5vZGUoKTtmb3IodmFyIGQ9MDtkPGYubGVuZ3RoO2QrKyl1Lm1hdGNoPXUubWF0Y2gubWF0Y2hUeXBlKGZbZF0pLHArKyx1PXtwYXJlbnQ6ZltkXS5jcmVhdGUoKSxtYXRjaDpmW2RdLmNvbnRlbnRNYXRjaCxjb250ZW50OnMuZW1wdHksd3JhcHBlcjohMCxvcGVuRW5kOjAsZGVwdGg6cCtkfSx0aGlzLm9wZW4ucHVzaCh1KX12YXIgdj11Lm1hdGNoLm1hdGNoVHlwZShhLnR5cGUpO2lmKCF2KXt2YXIgbT11Lm1hdGNoLmZpbGxCZWZvcmUocy5mcm9tKGEpKTtpZighbSl7aWYobyYmdS5tYXRjaC5tYXRjaFR5cGUoby50eXBlKSlicmVhaztjb250aW51ZX1mb3IodmFyIHk9MDt5PG0uY2hpbGRDb3VudDt5Kyspe3ZhciBnPW0uY2hpbGQoeSk7dGhpcy5hZGROb2RlKHUsZywwKSx2PXUubWF0Y2gubWF0Y2hGcmFnbWVudChnKX19d2hpbGUodGhpcy5vcGVuLmxlbmd0aC0xPnApdGhpcy5jbG9zZU5vZGUoKTthPWEubWFyayh1LnBhcmVudC50eXBlLmFsbG93ZWRNYXJrcyhhLm1hcmtzKSksZSYmKGE9dWUoYSxlLGg/bjowKSxlPTApLHRoaXMuYWRkTm9kZSh1LGEsaD9uOjApLHUubWF0Y2g9dixoJiYobj0wKSxjPSEwO2JyZWFrfWlmKCFjKWJyZWFrfXJldHVybiB0aGlzLm9wZW4ubGVuZ3RoPjEmJihpPjAmJmk9PXQuY2hpbGRDb3VudHx8byYmdGhpcy5vcGVuW3RoaXMub3Blbi5sZW5ndGgtMV0ucGFyZW50LnR5cGU9PW8udHlwZSkmJnRoaXMuY2xvc2VOb2RlKCksbmV3IGwodC5jdXRCeUluZGV4KGkpLGUsbil9LHBlLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuKXt0LmNvbnRlbnQ9bGUodC5jb250ZW50LHQub3BlbkVuZCkuYWRkVG9FbmQoZSksdC5vcGVuRW5kPW59LHBlLnByb3RvdHlwZS5jbG9zZU5vZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wZW4ucG9wKCk7MD09dC5jb250ZW50LnNpemV8fCh0LndyYXBwZXI/dGhpcy5hZGROb2RlKHRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLHQucGFyZW50LmNvcHkodC5jb250ZW50KSx0Lm9wZW5FbmQrMSk6dGhpcy5wbGFjZWRbdC5kZXB0aF09e2RlcHRoOnQuZGVwdGgsY29udGVudDp0LmNvbnRlbnQsb3BlbkVuZDp0Lm9wZW5FbmR9KX0sanQucHJvdG90eXBlLnJlcGxhY2VSYW5nZT1mdW5jdGlvbih0LGUsbil7aWYoIW4uc2l6ZSlyZXR1cm4gdGhpcy5kZWxldGVSYW5nZSh0LGUpO3ZhciByPXRoaXMuZG9jLnJlc29sdmUodCksbz10aGlzLmRvYy5yZXNvbHZlKGUpO2lmKHNlKHIsbyxuKSlyZXR1cm4gdGhpcy5zdGVwKG5ldyBxdCh0LGUsbikpO3ZhciBpPXZlKHIsdGhpcy5kb2MucmVzb2x2ZShlKSk7MD09aVtpLmxlbmd0aC0xXSYmaS5wb3AoKTt2YXIgcz0tKHIuZGVwdGgrMSk7aS51bnNoaWZ0KHMpO2Zvcih2YXIgYT1yLmRlcHRoLGM9ci5wb3MtMTthPjA7YS0tLGMtLSl7dmFyIGg9ci5ub2RlKGEpLnR5cGUuc3BlYztpZihoLmRlZmluaW5nfHxoLmlzb2xhdGluZylicmVhaztpLmluZGV4T2YoYSk+LTE/cz1hOnIuYmVmb3JlKGEpPT1jJiZpLnNwbGljZSgxLDAsLWEpfWZvcih2YXIgcD1pLmluZGV4T2YocyksdT1bXSxmPW4ub3BlblN0YXJ0LGQ9bi5jb250ZW50LHY9MDs7disrKXt2YXIgbT1kLmZpcnN0Q2hpbGQ7aWYodS5wdXNoKG0pLHY9PW4ub3BlblN0YXJ0KWJyZWFrO2Q9bS5jb250ZW50fWY+MCYmdVtmLTFdLnR5cGUuc3BlYy5kZWZpbmluZyYmci5ub2RlKHApLnR5cGUhPXVbZi0xXS50eXBlP2YtPTE6Zj49MiYmdVtmLTFdLmlzVGV4dGJsb2NrJiZ1W2YtMl0udHlwZS5zcGVjLmRlZmluaW5nJiZyLm5vZGUocCkudHlwZSE9dVtmLTJdLnR5cGUmJihmLT0yKTtmb3IodmFyIHk9bi5vcGVuU3RhcnQ7eT49MDt5LS0pe3ZhciBnPSh5K2YrMSklKG4ub3BlblN0YXJ0KzEpLHc9dVtnXTtpZih3KWZvcih2YXIgeD0wO3g8aS5sZW5ndGg7eCsrKXt2YXIgYj1pWyh4K3ApJWkubGVuZ3RoXSxrPSEwO2I8MCYmKGs9ITEsYj0tYik7dmFyIFM9ci5ub2RlKGItMSksTz1yLmluZGV4KGItMSk7aWYoUy5jYW5SZXBsYWNlV2l0aChPLE8sdy50eXBlLHcubWFya3MpKXJldHVybiB0aGlzLnJlcGxhY2Uoci5iZWZvcmUoYiksaz9vLmFmdGVyKGIpOmUsbmV3IGwoZGUobi5jb250ZW50LDAsbi5vcGVuU3RhcnQsZyksZyxuLm9wZW5FbmQpKX19Zm9yKHZhciBDPXRoaXMuc3RlcHMubGVuZ3RoLE09aS5sZW5ndGgtMTtNPj0wO00tLSl7aWYodGhpcy5yZXBsYWNlKHQsZSxuKSx0aGlzLnN0ZXBzLmxlbmd0aD5DKWJyZWFrO3ZhciBUPWlbTV07TTwwfHwodD1yLmJlZm9yZShUKSxlPW8uYWZ0ZXIoVCkpfXJldHVybiB0aGlzfSxqdC5wcm90b3R5cGUucmVwbGFjZVJhbmdlV2l0aD1mdW5jdGlvbih0LGUsbil7aWYoIW4uaXNJbmxpbmUmJnQ9PWUmJnRoaXMuZG9jLnJlc29sdmUodCkucGFyZW50LmNvbnRlbnQuc2l6ZSl7dmFyIHI9VXQodGhpcy5kb2MsdCxuLnR5cGUpO251bGwhPXImJih0PWU9cil9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlKHQsZSxuZXcgbChzLmZyb20obiksMCwwKSl9LGp0LnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmRvYy5yZXNvbHZlKHQpLHI9dGhpcy5kb2MucmVzb2x2ZShlKSxvPXZlKG4sciksaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9aT09by5sZW5ndGgtMTtpZihhJiYwPT1zfHxuLm5vZGUocykudHlwZS5jb250ZW50TWF0Y2gudmFsaWRFbmQpcmV0dXJuIHRoaXMuZGVsZXRlKG4uc3RhcnQocyksci5lbmQocykpO2lmKHM+MCYmKGF8fG4ubm9kZShzLTEpLmNhblJlcGxhY2Uobi5pbmRleChzLTEpLHIuaW5kZXhBZnRlcihzLTEpKSkpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKHMpLHIuYWZ0ZXIocykpfWZvcih2YXIgYz0xO2M8PW4uZGVwdGgmJmM8PXIuZGVwdGg7YysrKWlmKHQtbi5zdGFydChjKT09bi5kZXB0aC1jJiZlPm4uZW5kKGMpJiZyLmVuZChjKS1lIT1yLmRlcHRoLWMpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKGMpLGUpO3JldHVybiB0aGlzLmRlbGV0ZSh0LGUpfSxuLmQoZSwiQWxsU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gT2V9KSksbi5kKGUsIkVkaXRvclN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmV9KSksbi5kKGUsIk5vZGVTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBrZX0pKSxuLmQoZSwiUGx1Z2luIiwoZnVuY3Rpb24oKXtyZXR1cm4gJGV9KSksbi5kKGUsIlBsdWdpbktleSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZlfSkpLG4uZChlLCJTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiB5ZX0pKSxuLmQoZSwiU2VsZWN0aW9uUmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiB3ZX0pKSxuLmQoZSwiVGV4dFNlbGVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhlfSkpLG4uZChlLCJUcmFuc2FjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJlfSkpO3ZhciBtZT1PYmplY3QuY3JlYXRlKG51bGwpLHllPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJhbmdlcz1ufHxbbmV3IHdlKHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSxnZT17YW5jaG9yOntjb25maWd1cmFibGU6ITB9LGhlYWQ6e2NvbmZpZ3VyYWJsZTohMH0sZnJvbTp7Y29uZmlndXJhYmxlOiEwfSx0bzp7Y29uZmlndXJhYmxlOiEwfSwkZnJvbTp7Y29uZmlndXJhYmxlOiEwfSwkdG86e2NvbmZpZ3VyYWJsZTohMH0sZW1wdHk6e2NvbmZpZ3VyYWJsZTohMH19O2dlLmFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvc30sZ2UuaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LGdlLmZyb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ucG9zfSxnZS50by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8ucG9zfSxnZS4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LGdlLiR0by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJHRvfSxnZS5lbXB0eS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yYW5nZXMsZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0uJGZyb20ucG9zIT10W2VdLiR0by5wb3MpcmV0dXJuITE7cmV0dXJuITB9LHllLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LHllLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9bC5lbXB0eSk7Zm9yKHZhciBuPWUuY29udGVudC5sYXN0Q2hpbGQscj1udWxsLG89MDtvPGUub3BlbkVuZDtvKyspcj1uLG49bi5sYXN0Q2hpbGQ7Zm9yKHZhciBpPXQuc3RlcHMubGVuZ3RoLHM9dGhpcy5yYW5nZXMsYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgYz1zW2FdLGg9Yy4kZnJvbSxwPWMuJHRvLHU9dC5tYXBwaW5nLnNsaWNlKGkpO3QucmVwbGFjZVJhbmdlKHUubWFwKGgucG9zKSx1Lm1hcChwLnBvcyksYT9sLmVtcHR5OmUpLDA9PWEmJlRlKHQsaSwobj9uLmlzSW5saW5lOnImJnIuaXNUZXh0YmxvY2spPy0xOjEpfX0seWUucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuc3RlcHMubGVuZ3RoLHI9dGhpcy5yYW5nZXMsbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dLHM9aS4kZnJvbSxhPWkuJHRvLGM9dC5tYXBwaW5nLnNsaWNlKG4pLGg9Yy5tYXAocy5wb3MpLHA9Yy5tYXAoYS5wb3MpO28/dC5kZWxldGVSYW5nZShoLHApOih0LnJlcGxhY2VSYW5nZVdpdGgoaCxwLGUpLFRlKHQsbixlLmlzSW5saW5lPy0xOjEpKX19LHllLmZpbmRGcm9tPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnBhcmVudC5pbmxpbmVDb250ZW50P25ldyB4ZSh0KTpNZSh0Lm5vZGUoMCksdC5wYXJlbnQsdC5wb3MsdC5pbmRleCgpLGUsbik7aWYocilyZXR1cm4gcjtmb3IodmFyIG89dC5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1lPDA/TWUodC5ub2RlKDApLHQubm9kZShvKSx0LmJlZm9yZShvKzEpLHQuaW5kZXgobyksZSxuKTpNZSh0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYWZ0ZXIobysxKSx0LmluZGV4KG8pKzEsZSxuKTtpZihpKXJldHVybiBpfX0seWUubmVhcj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLmZpbmRGcm9tKHQsZSl8fHRoaXMuZmluZEZyb20odCwtZSl8fG5ldyBPZSh0Lm5vZGUoMCkpfSx5ZS5hdFN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBNZSh0LHQsMCwwLDEpfHxuZXcgT2UodCl9LHllLmF0RW5kPWZ1bmN0aW9uKHQpe3JldHVybiBNZSh0LHQsdC5jb250ZW50LnNpemUsdC5jaGlsZENvdW50LC0xKXx8bmV3IE9lKHQpfSx5ZS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlfHwhZS50eXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTZWxlY3Rpb24uZnJvbUpTT04iKTt2YXIgbj1tZVtlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBzZWxlY3Rpb24gdHlwZSAiK2UudHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSx5ZS5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIG1lKXRocm93IG5ldyBSYW5nZUVycm9yKCJEdXBsaWNhdGUgdXNlIG9mIHNlbGVjdGlvbiBKU09OIElEICIrdCk7cmV0dXJuIG1lW3RdPWUsZS5wcm90b3R5cGUuanNvbklEPXQsZX0seWUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIHhlLmJldHdlZW4odGhpcy4kYW5jaG9yLHRoaXMuJGhlYWQpLmdldEJvb2ttYXJrKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHllLnByb3RvdHlwZSxnZSkseWUucHJvdG90eXBlLnZpc2libGU9ITA7dmFyIHdlPWZ1bmN0aW9uKHQsZSl7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWV9LHhlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1uJiYobj1lKSx0LmNhbGwodGhpcyxlLG4pfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXskY3Vyc29yOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi4kY3Vyc29yLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbmNob3IucG9zPT10aGlzLiRoZWFkLnBvcz90aGlzLiRoZWFkOm51bGx9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmhlYWQpKTtpZighby5wYXJlbnQuaW5saW5lQ29udGVudClyZXR1cm4gdC5uZWFyKG8pO3ZhciBpPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmFuY2hvcikpO3JldHVybiBuZXcgZShpLnBhcmVudC5pbmxpbmVDb250ZW50P2k6byxvKX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPWwuZW1wdHkpLHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbiksbj09bC5lbXB0eSl7dmFyIHI9dGhpcy4kZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLiR0byk7ciYmZS5lbnN1cmVNYXJrcyhyKX19LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGJlKHRoaXMuYW5jaG9yLHRoaXMuaGVhZCl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJ0ZXh0IixhbmNob3I6dGhpcy5hbmNob3IsaGVhZDp0aGlzLmhlYWR9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcnx8Im51bWJlciIhPXR5cGVvZiBuLmhlYWQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFRleHRTZWxlY3Rpb24uZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4uYW5jaG9yKSx0LnJlc29sdmUobi5oZWFkKSl9LGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj10LnJlc29sdmUoZSk7cmV0dXJuIG5ldyB0aGlzKHIsbj09ZT9yOnQucmVzb2x2ZShuKSl9LGUuYmV0d2Vlbj1mdW5jdGlvbihuLHIsbyl7dmFyIGk9bi5wb3Mtci5wb3M7aWYobyYmIWl8fChvPWk+PTA/MTotMSksIXIucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBzPXQuZmluZEZyb20ocixvLCEwKXx8dC5maW5kRnJvbShyLC1vLCEwKTtpZighcylyZXR1cm4gdC5uZWFyKHIsbyk7cj1zLiRoZWFkfXJldHVybiBuLnBhcmVudC5pbmxpbmVDb250ZW50fHwoMD09aT9uPXI6KG49KHQuZmluZEZyb20obiwtbywhMCl8fHQuZmluZEZyb20obixvLCEwKSkuJGFuY2hvcixuLnBvczxyLnBvcyE9aTwwJiYobj1yKSkpLG5ldyBlKG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KHllKTt5ZS5qc29uSUQoInRleHQiLHhlKTt2YXIgYmU9ZnVuY3Rpb24odCxlKXt0aGlzLmFuY2hvcj10LHRoaXMuaGVhZD1lfTtiZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYmUodC5tYXAodGhpcy5hbmNob3IpLHQubWFwKHRoaXMuaGVhZCkpfSxiZS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4geGUuYmV0d2Vlbih0LnJlc29sdmUodGhpcy5hbmNob3IpLHQucmVzb2x2ZSh0aGlzLmhlYWQpKX07dmFyIGtlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49ZS5ub2RlQWZ0ZXIscj1lLm5vZGUoMCkucmVzb2x2ZShlLnBvcytuLm5vZGVTaXplKTt0LmNhbGwodGhpcyxlLHIpLHRoaXMubm9kZT1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24obixyKXt2YXIgbz1yLm1hcFJlc3VsdCh0aGlzLmFuY2hvciksaT1vLmRlbGV0ZWQscz1vLnBvcyxhPW4ucmVzb2x2ZShzKTtyZXR1cm4gaT90Lm5lYXIoYSk6bmV3IGUoYSl9LGUucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGwocy5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgU2UodGhpcy5hbmNob3IpfSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZVNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHRoaXModC5yZXNvbHZlKGUpKX0sZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNUZXh0JiYhMSE9PXQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGV9KHllKTtrZS5wcm90b3R5cGUudmlzaWJsZT0hMSx5ZS5qc29uSUQoIm5vZGUiLGtlKTt2YXIgU2U9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07U2UucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgZT10Lm1hcFJlc3VsdCh0aGlzLmFuY2hvciksbj1lLmRlbGV0ZWQscj1lLnBvcztyZXR1cm4gbj9uZXcgYmUocixyKTpuZXcgU2Uocil9LFNlLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzb2x2ZSh0aGlzLmFuY2hvciksbj1lLm5vZGVBZnRlcjtyZXR1cm4gbiYma2UuaXNTZWxlY3RhYmxlKG4pP25ldyBrZShlKTp5ZS5uZWFyKGUpfTt2YXIgT2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLnJlc29sdmUoMCksZS5yZXNvbHZlKGUuY29udGVudC5zaXplKSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24oZSxuKXtpZih2b2lkIDA9PT1uJiYobj1sLmVtcHR5KSxuPT1sLmVtcHR5KXtlLmRlbGV0ZSgwLGUuZG9jLmNvbnRlbnQuc2l6ZSk7dmFyIHI9dC5hdFN0YXJ0KGUuZG9jKTtyLmVxKGUuc2VsZWN0aW9uKXx8ZS5zZXRTZWxlY3Rpb24ocil9ZWxzZSB0LnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcyxlLG4pfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiYWxsIn19LGUuZnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIENlfSxlfSh5ZSk7eWUuanNvbklEKCJhbGwiLE9lKTt2YXIgQ2U9e21hcDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgT2UodCl9fTtmdW5jdGlvbiBNZSh0LGUsbixyLG8saSl7aWYoZS5pbmxpbmVDb250ZW50KXJldHVybiB4ZS5jcmVhdGUodCxuKTtmb3IodmFyIHM9ci0obz4wPzA6MSk7bz4wP3M8ZS5jaGlsZENvdW50OnM+PTA7cys9byl7dmFyIGE9ZS5jaGlsZChzKTtpZihhLmlzQXRvbSl7aWYoIWkmJmtlLmlzU2VsZWN0YWJsZShhKSlyZXR1cm4ga2UuY3JlYXRlKHQsbi0obzwwP2Eubm9kZVNpemU6MCkpfWVsc2V7dmFyIGM9TWUodCxhLG4rbyxvPDA/YS5jaGlsZENvdW50OjAsbyxpKTtpZihjKXJldHVybiBjfW4rPWEubm9kZVNpemUqb319ZnVuY3Rpb24gVGUodCxlLG4pe3ZhciByPXQuc3RlcHMubGVuZ3RoLTE7aWYoIShyPGUpKXt2YXIgbz10LnN0ZXBzW3JdO2lmKG8gaW5zdGFuY2VvZiBxdHx8byBpbnN0YW5jZW9mIFd0KXt2YXIgaSxzPXQubWFwcGluZy5tYXBzW3JdO3MuZm9yRWFjaCgoZnVuY3Rpb24odCxlLG4scil7bnVsbD09aSYmKGk9cil9KSksdC5zZXRTZWxlY3Rpb24oeWUubmVhcih0LmRvYy5yZXNvbHZlKGkpLG4pKX19fXZhciBOZT0xLEVlPTIsQWU9NCxSZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUuZG9jKSx0aGlzLnRpbWU9RGF0ZS5ub3coKSx0aGlzLmN1clNlbGVjdGlvbj1lLnNlbGVjdGlvbix0aGlzLmN1clNlbGVjdGlvbkZvcj0wLHRoaXMuc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcyx0aGlzLnVwZGF0ZWQ9MCx0aGlzLm1ldGE9T2JqZWN0LmNyZWF0ZShudWxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VsZWN0aW9uOntjb25maWd1cmFibGU6ITB9LHNlbGVjdGlvblNldDp7Y29uZmlndXJhYmxlOiEwfSxzdG9yZWRNYXJrc1NldDp7Y29uZmlndXJhYmxlOiEwfSxpc0dlbmVyaWM6e2NvbmZpZ3VyYWJsZTohMH0sc2Nyb2xsZWRJbnRvVmlldzp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uc2VsZWN0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1clNlbGVjdGlvbkZvcjx0aGlzLnN0ZXBzLmxlbmd0aCYmKHRoaXMuY3VyU2VsZWN0aW9uPXRoaXMuY3VyU2VsZWN0aW9uLm1hcCh0aGlzLmRvYyx0aGlzLm1hcHBpbmcuc2xpY2UodGhpcy5jdXJTZWxlY3Rpb25Gb3IpKSx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCksdGhpcy5jdXJTZWxlY3Rpb259LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0KXtpZih0LiRmcm9tLmRvYyE9dGhpcy5kb2MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNlbGVjdGlvbiBwYXNzZWQgdG8gc2V0U2VsZWN0aW9uIG11c3QgcG9pbnQgYXQgdGhlIGN1cnJlbnQgZG9jdW1lbnQiKTtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb249dCx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCx0aGlzLnVwZGF0ZWQ9KHRoaXMudXBkYXRlZHxOZSkmfkVlLHRoaXMuc3RvcmVkTWFya3M9bnVsbCx0aGlzfSxuLnNlbGVjdGlvblNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJk5lKT4wfSxlLnByb3RvdHlwZS5zZXRTdG9yZWRNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdG9yZWRNYXJrcz10LHRoaXMudXBkYXRlZHw9RWUsdGhpc30sZS5wcm90b3R5cGUuZW5zdXJlTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIHUuc2FtZVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kZnJvbS5tYXJrcygpLHQpfHx0aGlzLnNldFN0b3JlZE1hcmtzKHQpLHRoaXN9LGUucHJvdG90eXBlLmFkZFN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5hZGRUb1NldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LGUucHJvdG90eXBlLnJlbW92ZVN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5yZW1vdmVGcm9tU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sbi5zdG9yZWRNYXJrc1NldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJkVlKT4wfSxlLnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKGUsbil7dC5wcm90b3R5cGUuYWRkU3RlcC5jYWxsKHRoaXMsZSxuKSx0aGlzLnVwZGF0ZWQ9dGhpcy51cGRhdGVkJn5FZSx0aGlzLnN0b3JlZE1hcmtzPW51bGx9LGUucHJvdG90eXBlLnNldFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGltZT10LHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uV2l0aD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc2VsZWN0aW9uO3JldHVybiExIT09ZSYmKHQ9dC5tYXJrKHRoaXMuc3RvcmVkTWFya3N8fChuLmVtcHR5P24uJGZyb20ubWFya3MoKTpuLiRmcm9tLm1hcmtzQWNyb3NzKG4uJHRvKXx8dS5ub25lKSkpLG4ucmVwbGFjZVdpdGgodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5kZWxldGVTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzKSx0aGlzfSxlLnByb3RvdHlwZS5pbnNlcnRUZXh0PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj10aGlzLmRvYy50eXBlLnNjaGVtYTtpZihudWxsPT1lKXJldHVybiB0P3RoaXMucmVwbGFjZVNlbGVjdGlvbldpdGgoci50ZXh0KHQpLCEwKTp0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO2lmKCF0KXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKGUsbik7dmFyIG89dGhpcy5zdG9yZWRNYXJrcztpZighbyl7dmFyIGk9dGhpcy5kb2MucmVzb2x2ZShlKTtvPW49PWU/aS5tYXJrcygpOmkubWFya3NBY3Jvc3ModGhpcy5kb2MucmVzb2x2ZShuKSl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlV2l0aChlLG4sci50ZXh0KHQsbykpLHRoaXMuc2VsZWN0aW9uLmVtcHR5fHx0aGlzLnNldFNlbGVjdGlvbih5ZS5uZWFyKHRoaXMuc2VsZWN0aW9uLiR0bykpLHRoaXN9LGUucHJvdG90eXBlLnNldE1ldGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XT1lLHRoaXN9LGUucHJvdG90eXBlLmdldE1ldGE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV19LG4uaXNHZW5lcmljLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLm1ldGEpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLnNjcm9sbEludG9WaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlZHw9QWUsdGhpc30sbi5zY3JvbGxlZEludG9WaWV3LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmQWUpPjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KGp0KTtmdW5jdGlvbiB6ZSh0LGUpe3JldHVybiBlJiZ0P3QuYmluZChlKTp0fXZhciBEZT1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5pbml0PXplKGUuaW5pdCxuKSx0aGlzLmFwcGx5PXplKGUuYXBwbHksbil9LEllPVtuZXcgRGUoImRvYyIse2luaXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9jfHx0LnNjaGVtYS50b3BOb2RlVHlwZS5jcmVhdGVBbmRGaWxsKCl9LGFwcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY319KSxuZXcgRGUoInNlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zZWxlY3Rpb258fHllLmF0U3RhcnQoZS5kb2MpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zZWxlY3Rpb259fSksbmV3IERlKCJzdG9yZWRNYXJrcyIse2luaXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RvcmVkTWFya3N8fG51bGx9LGFwcGx5OmZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiByLnNlbGVjdGlvbi4kY3Vyc29yP3Quc3RvcmVkTWFya3M6bnVsbH19KSxuZXcgRGUoInNjcm9sbFRvU2VsZWN0aW9uIix7aW5pdDpmdW5jdGlvbigpe3JldHVybiAwfSxhcHBseTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbGVkSW50b1ZpZXc/ZSsxOmV9fSldLFBlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMuZmllbGRzPUllLmNvbmNhdCgpLHRoaXMucGx1Z2lucz1bXSx0aGlzLnBsdWdpbnNCeUtleT1PYmplY3QuY3JlYXRlKG51bGwpLGUmJmUuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYobi5wbHVnaW5zQnlLZXlbdC5rZXldKXRocm93IG5ldyBSYW5nZUVycm9yKCJBZGRpbmcgZGlmZmVyZW50IGluc3RhbmNlcyBvZiBhIGtleWVkIHBsdWdpbiAoIit0LmtleSsiKSIpO24ucGx1Z2lucy5wdXNoKHQpLG4ucGx1Z2luc0J5S2V5W3Qua2V5XT10LHQuc3BlYy5zdGF0ZSYmbi5maWVsZHMucHVzaChuZXcgRGUodC5rZXksdC5zcGVjLnN0YXRlLHQpKX0pKX0sQmU9ZnVuY3Rpb24odCl7dGhpcy5jb25maWc9dH0sRmU9e3NjaGVtYTp7Y29uZmlndXJhYmxlOiEwfSxwbHVnaW5zOntjb25maWd1cmFibGU6ITB9LHRyOntjb25maWd1cmFibGU6ITB9fTtGZS5zY2hlbWEuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnNjaGVtYX0sRmUucGx1Z2lucy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcucGx1Z2luc30sQmUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFwcGx5VHJhbnNhY3Rpb24odCkuc3RhdGV9LEJlLnByb3RvdHlwZS5maWx0ZXJUcmFuc2FjdGlvbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPS0xKTtmb3IodmFyIG49MDtuPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO24rKylpZihuIT1lKXt2YXIgcj10aGlzLmNvbmZpZy5wbHVnaW5zW25dO2lmKHIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbiYmIXIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbi5jYWxsKHIsdCx0aGlzKSlyZXR1cm4hMX1yZXR1cm4hMH0sQmUucHJvdG90eXBlLmFwcGx5VHJhbnNhY3Rpb249ZnVuY3Rpb24odCl7aWYoIXRoaXMuZmlsdGVyVHJhbnNhY3Rpb24odCkpcmV0dXJue3N0YXRlOnRoaXMsdHJhbnNhY3Rpb25zOltdfTtmb3IodmFyIGU9W3RdLG49dGhpcy5hcHBseUlubmVyKHQpLHI9bnVsbDs7KXtmb3IodmFyIG89ITEsaT0wO2k8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLmNvbmZpZy5wbHVnaW5zW2ldO2lmKHMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbil7dmFyIGE9cj9yW2ldLm46MCxjPXI/cltpXS5zdGF0ZTp0aGlzLGg9YTxlLmxlbmd0aCYmcy5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uLmNhbGwocyxhP2Uuc2xpY2UoYSk6ZSxjLG4pO2lmKGgmJm4uZmlsdGVyVHJhbnNhY3Rpb24oaCxpKSl7aWYoaC5zZXRNZXRhKCJhcHBlbmRlZFRyYW5zYWN0aW9uIix0KSwhcil7cj1bXTtmb3IodmFyIHA9MDtwPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO3ArKylyLnB1c2gocDxpP3tzdGF0ZTpuLG46ZS5sZW5ndGh9OntzdGF0ZTp0aGlzLG46MH0pfWUucHVzaChoKSxuPW4uYXBwbHlJbm5lcihoKSxvPSEwfXImJihyW2ldPXtzdGF0ZTpuLG46ZS5sZW5ndGh9KX19aWYoIW8pcmV0dXJue3N0YXRlOm4sdHJhbnNhY3Rpb25zOmV9fX0sQmUucHJvdG90eXBlLmFwcGx5SW5uZXI9ZnVuY3Rpb24odCl7aWYoIXQuYmVmb3JlLmVxKHRoaXMuZG9jKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXBwbHlpbmcgYSBtaXNtYXRjaGVkIHRyYW5zYWN0aW9uIik7Zm9yKHZhciBlPW5ldyBCZSh0aGlzLmNvbmZpZyksbj10aGlzLmNvbmZpZy5maWVsZHMscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO2Vbby5uYW1lXT1vLmFwcGx5KHQsdGhpc1tvLm5hbWVdLHRoaXMsZSl9Zm9yKHZhciBpPTA7aTxqZS5sZW5ndGg7aSsrKWplW2ldKHRoaXMsdCxlKTtyZXR1cm4gZX0sRmUudHIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBSZSh0aGlzKX0sQmUuY3JlYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgUGUodC5zY2hlbWF8fHQuZG9jLnR5cGUuc2NoZW1hLHQucGx1Z2lucyksbj1uZXcgQmUoZSkscj0wO3I8ZS5maWVsZHMubGVuZ3RoO3IrKyluW2UuZmllbGRzW3JdLm5hbWVdPWUuZmllbGRzW3JdLmluaXQodCxuKTtyZXR1cm4gbn0sQmUucHJvdG90eXBlLnJlY29uZmlndXJlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgUGUodC5zY2hlbWF8fHRoaXMuc2NoZW1hLHQucGx1Z2lucyksbj1lLmZpZWxkcyxyPW5ldyBCZShlKSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb10ubmFtZTtyW2ldPXRoaXMuaGFzT3duUHJvcGVydHkoaSk/dGhpc1tpXTpuW29dLmluaXQodCxyKX1yZXR1cm4gcn0sQmUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbih0KXt2YXIgZT17ZG9jOnRoaXMuZG9jLnRvSlNPTigpLHNlbGVjdGlvbjp0aGlzLnNlbGVjdGlvbi50b0pTT04oKX07aWYodGhpcy5zdG9yZWRNYXJrcyYmKGUuc3RvcmVkTWFya3M9dGhpcy5zdG9yZWRNYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0JiYib2JqZWN0Ij09dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpe2lmKCJkb2MiPT1ufHwic2VsZWN0aW9uIj09bil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIEpTT04gZmllbGRzIGBkb2NgIGFuZCBgc2VsZWN0aW9uYCBhcmUgcmVzZXJ2ZWQiKTt2YXIgcj10W25dLG89ci5zcGVjLnN0YXRlO28mJm8udG9KU09OJiYoZVtuXT1vLnRvSlNPTi5jYWxsKHIsdGhpc1tyLmtleV0pKX1yZXR1cm4gZX0sQmUuZnJvbUpTT049ZnVuY3Rpb24odCxlLG4pe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBFZGl0b3JTdGF0ZS5mcm9tSlNPTiIpO2lmKCF0LnNjaGVtYSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVxdWlyZWQgY29uZmlnIGZpZWxkICdzY2hlbWEnIG1pc3NpbmciKTt2YXIgcj1uZXcgUGUodC5zY2hlbWEsdC5wbHVnaW5zKSxvPW5ldyBCZShyKTtyZXR1cm4gci5maWVsZHMuZm9yRWFjaCgoZnVuY3Rpb24ocil7aWYoImRvYyI9PXIubmFtZSlvLmRvYz1QLmZyb21KU09OKHQuc2NoZW1hLGUuZG9jKTtlbHNlIGlmKCJzZWxlY3Rpb24iPT1yLm5hbWUpby5zZWxlY3Rpb249eWUuZnJvbUpTT04oby5kb2MsZS5zZWxlY3Rpb24pO2Vsc2UgaWYoInN0b3JlZE1hcmtzIj09ci5uYW1lKWUuc3RvcmVkTWFya3MmJihvLnN0b3JlZE1hcmtzPWUuc3RvcmVkTWFya3MubWFwKHQuc2NoZW1hLm1hcmtGcm9tSlNPTikpO2Vsc2V7aWYobilmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXSxhPXMuc3BlYy5zdGF0ZTtpZihzLmtleT09ci5uYW1lJiZhJiZhLmZyb21KU09OJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSlyZXR1cm4gdm9pZChvW3IubmFtZV09YS5mcm9tSlNPTi5jYWxsKHMsdCxlW2ldLG8pKX1vW3IubmFtZV09ci5pbml0KHQsbyl9fSkpLG99LEJlLmFkZEFwcGx5TGlzdGVuZXI9ZnVuY3Rpb24odCl7amUucHVzaCh0KX0sQmUucmVtb3ZlQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT1qZS5pbmRleE9mKHQpO2U+LTEmJmplLnNwbGljZShlLDEpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhCZS5wcm90b3R5cGUsRmUpO3ZhciBqZT1bXTtmdW5jdGlvbiBfZSh0LGUsbil7Zm9yKHZhciByIGluIHQpe3ZhciBvPXRbcl07byBpbnN0YW5jZW9mIEZ1bmN0aW9uP289by5iaW5kKGUpOiJoYW5kbGVET01FdmVudHMiPT1yJiYobz1fZShvLGUse30pKSxuW3JdPW99cmV0dXJuIG59dmFyICRlPWZ1bmN0aW9uKHQpe3RoaXMucHJvcHM9e30sdC5wcm9wcyYmX2UodC5wcm9wcyx0aGlzLHRoaXMucHJvcHMpLHRoaXMuc3BlYz10LHRoaXMua2V5PXQua2V5P3Qua2V5LmtleTpMZSgicGx1Z2luIil9OyRlLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciBKZT1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIExlKHQpe3JldHVybiB0IGluIEplP3QrIiQiKyArK0plW3RdOihKZVt0XT0wLHQrIiQiKX12YXIgVmU9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ImtleSIpLHRoaXMua2V5PUxlKHQpfTtWZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbmZpZy5wbHVnaW5zQnlLZXlbdGhpcy5rZXldfSxWZS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5rZXldfX0sZjVkZjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiMDBlZSIpLG89bigiYzZiNiIpLGk9bigiYjYyMiIpLHM9aSgidG9TdHJpbmdUYWciKSxhPSJBcmd1bWVudHMiPT1vKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksYz1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gdFtlXX1jYXRjaChuKXt9fTt0LmV4cG9ydHM9cj9vOmZ1bmN0aW9uKHQpe3ZhciBlLG4scjtyZXR1cm4gdm9pZCAwPT09dD8iVW5kZWZpbmVkIjpudWxsPT09dD8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihuPWMoZT1PYmplY3QodCkscykpP246YT9vKGUpOiJPYmplY3QiPT0ocj1vKGUpKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2FsbGVlPyJBcmd1bWVudHMiOnJ9fSxmNzcyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI1NjkyIiksbz1uKCI5MGUzIiksaT1yKCJrZXlzIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpW3RdfHwoaVt0XT1vKHQpKX19LGY5Mzk6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpoLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsaF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTkgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptMi41IDUuOTM4YS45MzcuOTM3IDAgMTAwLTEuODc1aC0xLjI1YS4zMTIuMzEyIDAgMDEtLjMxMy0uMzEzVjE2LjVhLjkzNy45MzcgMCAxMC0xLjg3NSAwdjEuMjVjMCAuMTczLS4xNC4zMTMtLjMxMi4zMTNIMTYuNWEuOTM3LjkzNyAwIDEwMCAxLjg3NWgxLjI1Yy4xNzMgMCAuMzEzLjE0LjMxMy4zMTJ2MS4yNWEuOTM3LjkzNyAwIDEwMS44NzUgMHYtMS4yNWMwLS4xNzMuMTQtLjMxMy4zMTItLjMxM2gxLjI1ek01IDJhMyAzIDAgMTAwIDZoMTRhMyAzIDAgMDAwLTZINXptMC0yaDE0YTUgNSAwIDAxMCAxMEg1QTUgNSAwIDExNSAweiJ9fSldKSl9fX0sZmEwYjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmgsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxoXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi41IDIxLjI0OGgtMjFhMS4yNSAxLjI1IDAgMDAwIDIuNWgyMWExLjI1IDEuMjUgMCAwMDAtMi41ek0xLjk3OCAyLjc0OGgxLjM2M2EuMjUuMjUgMCAwMS4yNS4yNXY4LjUyM2E4LjQwOSA4LjQwOSAwIDAwMTYuODE4IDBWM2EuMjUuMjUgMCAwMS4yNS0uMjVoMS4zNjNhMS4yNSAxLjI1IDAgMDAwLTIuNUgxNi4zYTEuMjUgMS4yNSAwIDAwMCAyLjVoMS4zNjNhLjI1LjI1IDAgMDEuMjUuMjV2OC41MjNhNS45MDkgNS45MDkgMCAwMS0xMS44MTggMFYzYS4yNS4yNSAwIDAxLjI1LS4yNUg3LjdhMS4yNSAxLjI1IDAgMTAwLTIuNUgxLjk3OGExLjI1IDEuMjUgMCAwMDAgMi41eiJ9fSldKSl9fX0sZmFlMzpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2lmKG4ucihlKSwidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cpe3ZhciByPXdpbmRvdy5kb2N1bWVudC5jdXJyZW50U2NyaXB0LG89bigiODg3NSIpO3I9bygpLCJjdXJyZW50U2NyaXB0ImluIGRvY3VtZW50fHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImN1cnJlbnRTY3JpcHQiLHtnZXQ6b30pO3ZhciBpPXImJnIuc3JjLm1hdGNoKC8oLitcLylbXi9dK1wuanMoXD8uKik/JC8pO2kmJihuLnA9aVsxXSl9dmFyIHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC4kY3JlYXRlRWxlbWVudCxuPXQuX3NlbGYuX2N8fGU7cmV0dXJuIG4oImRpdiIse3N0YXRpY0NsYXNzOiJ0aXB0YXAtZWRpdG9yIn0sW24oImVkaXRvci1tZW51LWJhciIse2F0dHJzOntlZGl0b3I6dC5lZGl0b3J9LHNjb3BlZFNsb3RzOnQuX3UoW3trZXk6ImRlZmF1bHQiLGZuOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29tbWFuZHMsbz1lLmlzQWN0aXZlO3JldHVybltuKCJkaXYiLHtzdGF0aWNDbGFzczoibWVudWJhciJ9LFtuKCJkaXYiLHtzdGF0aWNDbGFzczoidG9vbGJhciJ9LFtuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5oZWFkaW5nKHtsZXZlbDoxfSl9LG9uOntjbGljazpmdW5jdGlvbih0KXtyZXR1cm4gci5oZWFkaW5nKHtsZXZlbDoxfSl9fX0sW3QuX3YoIiBIMSAiKV0pLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmhlYWRpbmcoe2xldmVsOjJ9KX0sb246e2NsaWNrOmZ1bmN0aW9uKHQpe3JldHVybiByLmhlYWRpbmcoe2xldmVsOjJ9KX19fSxbdC5fdigiIEgyICIpXSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uaGVhZGluZyh7bGV2ZWw6M30pfSxvbjp7Y2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHIuaGVhZGluZyh7bGV2ZWw6M30pfX19LFt0Ll92KCIgSDMgIildKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5idWxsZXRfbGlzdCgpfSxvbjp7Y2xpY2s6ci5idWxsZXRfbGlzdH19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6InVsIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8ub3JkZXJlZF9saXN0KCl9LG9uOntjbGljazpyLm9yZGVyZWRfbGlzdH19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6Im9sIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uYm9sZCgpfSxvbjp7Y2xpY2s6ci5ib2xkfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYm9sZCJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLml0YWxpYygpfSxvbjp7Y2xpY2s6ci5pdGFsaWN9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJpdGFsaWMifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5zdHJpa2UoKX0sb246e2NsaWNrOnIuc3RyaWtlfX0sW24oImljb24iLHthdHRyczp7bmFtZToic3RyaWtlIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8udW5kZXJsaW5lKCl9LG9uOntjbGljazpyLnVuZGVybGluZX19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6InVuZGVybGluZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmNvZGUoKX0sb246e2NsaWNrOnIuY29kZX19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImNvZGUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5wYXJhZ3JhcGgoKX0sb246e2NsaWNrOnIucGFyYWdyYXBofX0sW24oImljb24iLHthdHRyczp7bmFtZToicGFyYWdyYXBoIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uYmxvY2txdW90ZSgpfSxvbjp7Y2xpY2s6ci5ibG9ja3F1b3RlfX0sW24oImljb24iLHthdHRyczp7bmFtZToicXVvdGUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5jb2RlX2Jsb2NrKCl9LG9uOntjbGljazpyLmNvZGVfYmxvY2t9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJjb2RlX2Jsb2NrIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOmZ1bmN0aW9uKHQpe3JldHVybiByLmNyZWF0ZVRhYmxlKHtyb3dzQ291bnQ6Myxjb2xzQ291bnQ6Myx3aXRoSGVhZGVyUm93OiExfSl9fX0sW24oImljb24iLHthdHRyczp7bmFtZToidGFibGUifX0pXSwxKSxvLnRhYmxlKCk/bigic3BhbiIsW24oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmRlbGV0ZVRhYmxlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiZGVsZXRlX3RhYmxlIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIuYWRkQ29sdW1uQmVmb3JlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX2NvbF9iZWZvcmUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRDb2x1bW5BZnRlcn19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImFkZF9jb2xfYWZ0ZXIifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5kZWxldGVDb2x1bW59fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJkZWxldGVfY29sIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIuYWRkUm93QmVmb3JlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX3Jvd19iZWZvcmUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRSb3dBZnRlcn19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImFkZF9yb3dfYWZ0ZXIifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5kZWxldGVSb3d9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJkZWxldGVfcm93In19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIudG9nZ2xlQ2VsbE1lcmdlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiY29tYmluZV9jZWxscyJ9fSldLDEpXSk6dC5fZSgpXSldKV19fV0pfSksbigiZWRpdG9yLWNvbnRlbnQiLHtzdGF0aWNDbGFzczoidGlwdGFwLWVkaXRvcl9fY29udGVudCIsYXR0cnM6e2VkaXRvcjp0LmVkaXRvcn19KV0sMSl9LGE9W10sYz0obigiZGM0NCIpLG4oIjEzYWQiKSk7ZnVuY3Rpb24gaCh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgbz10LmNoaWxkKHIpLGk9ZS5jaGlsZChyKTtpZihvIT1pKXtpZighby5zYW1lTWFya3VwKGkpKXJldHVybiBuO2lmKG8uaXNUZXh0JiZvLnRleHQhPWkudGV4dCl7Zm9yKHZhciBzPTA7by50ZXh0W3NdPT1pLnRleHRbc107cysrKW4rKztyZXR1cm4gbn1pZihvLmNvbnRlbnQuc2l6ZXx8aS5jb250ZW50LnNpemUpe3ZhciBhPWgoby5jb250ZW50LGkuY29udGVudCxuKzEpO2lmKG51bGwhPWEpcmV0dXJuIGF9bis9by5ub2RlU2l6ZX1lbHNlIG4rPW8ubm9kZVNpemV9fWZ1bmN0aW9uIHAodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1pKXJldHVybiBvPT1pP251bGw6e2E6bixiOnJ9O3ZhciBzPXQuY2hpbGQoLS1vKSxhPWUuY2hpbGQoLS1pKSxjPXMubm9kZVNpemU7aWYocyE9YSl7aWYoIXMuc2FtZU1hcmt1cChhKSlyZXR1cm57YTpuLGI6cn07aWYocy5pc1RleHQmJnMudGV4dCE9YS50ZXh0KXt2YXIgaD0wLHU9TWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxhLnRleHQubGVuZ3RoKTt3aGlsZShoPHUmJnMudGV4dFtzLnRleHQubGVuZ3RoLWgtMV09PWEudGV4dFthLnRleHQubGVuZ3RoLWgtMV0paCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKHMuY29udGVudC5zaXplfHxhLmNvbnRlbnQuc2l6ZSl7dmFyIGY9cChzLmNvbnRlbnQsYS5jb250ZW50LG4tMSxyLTEpO2lmKGYpcmV0dXJuIGZ9bi09YyxyLT1jfWVsc2Ugbi09YyxyLT1jfX12YXIgdT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5zaXplKz10W25dLm5vZGVTaXplfSxmPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTt1LnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGE9dGhpcy5jb250ZW50W2ldLGM9cythLm5vZGVTaXplO2lmKGM+dCYmITEhPT1uKGEscitzLG8saSkmJmEuY29udGVudC5zaXplKXt2YXIgaD1zKzE7YS5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LWgpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaCksbixyK2gpfXM9Y319LHUucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSx1LnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LHUucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgdShyLHRoaXMuc2l6ZSt0LnNpemUpfSx1LnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgcz10aGlzLmNvbnRlbnRbb10sYT1pK3Mubm9kZVNpemU7YT50JiYoKGk8dHx8YT5lKSYmKHM9cy5pc1RleHQ/cy5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKHMudGV4dC5sZW5ndGgsZS1pKSk6cy5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4ocy5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKHMpLHIrPXMubm9kZVNpemUpLGk9YX1yZXR1cm4gbmV3IHUobixyKX0sdS5wcm90b3R5cGUuY3V0QnlJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lP3UuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyB1KHRoaXMuY29udGVudC5zbGljZSh0LGUpKX0sdS5wcm90b3R5cGUucmVwbGFjZUNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jb250ZW50W3RdO2lmKG49PWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz10aGlzLnNpemUrZS5ub2RlU2l6ZS1uLm5vZGVTaXplO3JldHVybiByW3RdPWUsbmV3IHUocixvKX0sdS5wcm90b3R5cGUuYWRkVG9TdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHUoW3RdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sdS5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB1KHRoaXMuY29udGVudC5jb25jYXQodCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSx1LnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspaWYoIXRoaXMuY29udGVudFtlXS5lcSh0LmNvbnRlbnRbZV0pKXJldHVybiExO3JldHVybiEwfSxmLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGYuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0sdS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LHUucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0sdS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jb250ZW50W2VdO3QocixuLGUpLG4rPXIubm9kZVNpemV9fSx1LnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLGgodGhpcyx0LGUpfSx1LnByb3RvdHlwZS5maW5kRGlmZkVuZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMuc2l6ZSksdm9pZCAwPT09biYmKG49dC5zaXplKSxwKHRoaXMsdCxlLG4pfSx1LnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gZCgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gZCh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9kKG4rMSxpKTpkKG4scik7cj1pfX0sdS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSx1LnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSx1LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHUuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyB1KGUubWFwKHQubm9kZUZyb21KU09OKSl9LHUuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gdS5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IHUoZXx8dCxuKX0sdS5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiB1LmVtcHR5O2lmKHQgaW5zdGFuY2VvZiB1KXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyB1KFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModS5wcm90b3R5cGUsZik7dmFyIGw9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIGQodCxlKXtyZXR1cm4gbC5pbmRleD10LGwub2Zmc2V0PWUsbH1mdW5jdGlvbiB2KHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF2KHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF2KHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfXUuZW1wdHk9bmV3IHUoW10sMCk7dmFyIG09ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIHkodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz15LnByb3RvdHlwZSxlfW0ucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPSExLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtpZih0aGlzLmVxKG8pKXJldHVybiB0O2lmKHRoaXMudHlwZS5leGNsdWRlcyhvLnR5cGUpKWV8fChlPXQuc2xpY2UoMCxyKSk7ZWxzZXtpZihvLnR5cGUuZXhjbHVkZXModGhpcy50eXBlKSlyZXR1cm4gdDshbiYmby50eXBlLnJhbms+dGhpcy50eXBlLnJhbmsmJihlfHwoZT10LnNsaWNlKDAscikpLGUucHVzaCh0aGlzKSxuPSEwKSxlJiZlLnB1c2gobyl9fXJldHVybiBlfHwoZT10LnNsaWNlKCkpLG58fGUucHVzaCh0aGlzKSxlfSxtLnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sbS5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxtLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJnYodGhpcy5hdHRycyx0LmF0dHJzKX0sbS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LG0uZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTWFyay5mcm9tSlNPTiIpO3ZhciBuPXQubWFya3NbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gbWFyayB0eXBlICIrZS50eXBlKyIgaW4gdGhpcyBzY2hlbWEiKTtyZXR1cm4gbi5jcmVhdGUoZS5hdHRycyl9LG0uc2FtZVNldD1mdW5jdGlvbih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxKGVbbl0pKXJldHVybiExO3JldHVybiEwfSxtLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBtLm5vbmU7aWYodCBpbnN0YW5jZW9mIG0pcmV0dXJuW3RdO3ZhciBlPXQuc2xpY2UoKTtyZXR1cm4gZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGUucmFuay1lLnR5cGUucmFua30pKSxlfSxtLm5vbmU9W10seS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHkucHJvdG90eXBlLmNvbnN0cnVjdG9yPXkseS5wcm90b3R5cGUubmFtZT0iUmVwbGFjZUVycm9yIjt2YXIgZz1mdW5jdGlvbih0LGUsbil7dGhpcy5jb250ZW50PXQsdGhpcy5vcGVuU3RhcnQ9ZSx0aGlzLm9wZW5FbmQ9bn0sdz17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24geCh0LGUsbil7dmFyIHI9dC5maW5kSW5kZXgoZSksbz1yLmluZGV4LGk9ci5vZmZzZXQscz10Lm1heWJlQ2hpbGQobyksYT10LmZpbmRJbmRleChuKSxjPWEuaW5kZXgsaD1hLm9mZnNldDtpZihpPT1lfHxzLmlzVGV4dCl7aWYoaCE9biYmIXQuY2hpbGQoYykuaXNUZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LmN1dCgwLGUpLmFwcGVuZCh0LmN1dChuKSl9aWYobyE9Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5yZXBsYWNlQ2hpbGQobyxzLmNvcHkoeChzLmNvbnRlbnQsZS1pLTEsbi1pLTEpKSl9ZnVuY3Rpb24gYih0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPWIoYS5jb250ZW50LGUtcy0xLG4pO3JldHVybiBjJiZ0LnJlcGxhY2VDaGlsZChpLGEuY29weShjKSl9ZnVuY3Rpb24gayh0LGUsbil7aWYobi5vcGVuU3RhcnQ+dC5kZXB0aCl0aHJvdyBuZXcgeSgiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgeSgiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzIik7cmV0dXJuIFModCxlLG4sMCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9Uyh0LGUsbixyKzEpO3JldHVybiBpLmNvcHkoaS5jb250ZW50LnJlcGxhY2VDaGlsZChvLHMpKX1pZihuLmNvbnRlbnQuc2l6ZSl7aWYobi5vcGVuU3RhcnR8fG4ub3BlbkVuZHx8dC5kZXB0aCE9cnx8ZS5kZXB0aCE9cil7dmFyIGE9UihuLHQpLGM9YS5zdGFydCxoPWEuZW5kO3JldHVybiBOKGksRSh0LGMsaCxlLHIpKX12YXIgcD10LnBhcmVudCx1PXAuY29udGVudDtyZXR1cm4gTihwLHUuY3V0KDAsdC5wYXJlbnRPZmZzZXQpLmFwcGVuZChuLmNvbnRlbnQpLmFwcGVuZCh1LmN1dChlLnBhcmVudE9mZnNldCkpKX1yZXR1cm4gTihpLEEodCxlLHIpKX1mdW5jdGlvbiBPKHQsZSl7aWYoIWUudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpKXRocm93IG5ldyB5KCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBDKHQsZSxuKXt2YXIgcj10Lm5vZGUobik7cmV0dXJuIE8ocixlLm5vZGUobikpLHJ9ZnVuY3Rpb24gTSh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIFQodCxlLG4scil7dmFyIG89KGV8fHQpLm5vZGUobiksaT0wLHM9ZT9lLmluZGV4KG4pOm8uY2hpbGRDb3VudDt0JiYoaT10LmluZGV4KG4pLHQuZGVwdGg+bj9pKys6dC50ZXh0T2Zmc2V0JiYoTSh0Lm5vZGVBZnRlcixyKSxpKyspKTtmb3IodmFyIGE9aTthPHM7YSsrKU0oby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJk0oZS5ub2RlQmVmb3JlLHIpfWZ1bmN0aW9uIE4odCxlKXtpZighdC50eXBlLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgeSgiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gRSh0LGUsbixyLG8pe3ZhciBpPXQuZGVwdGg+byYmQyh0LGUsbysxKSxzPXIuZGVwdGg+byYmQyhuLHIsbysxKSxhPVtdO3JldHVybiBUKG51bGwsdCxvLGEpLGkmJnMmJmUuaW5kZXgobyk9PW4uaW5kZXgobyk/KE8oaSxzKSxNKE4oaSxFKHQsZSxuLHIsbysxKSksYSkpOihpJiZNKE4oaSxBKHQsZSxvKzEpKSxhKSxUKGUsbixvLGEpLHMmJk0oTihzLEEobixyLG8rMSkpLGEpKSxUKHIsbnVsbCxvLGEpLG5ldyB1KGEpfWZ1bmN0aW9uIEEodCxlLG4pe3ZhciByPVtdO2lmKFQobnVsbCx0LG4sciksdC5kZXB0aD5uKXt2YXIgbz1DKHQsZSxuKzEpO00oTihvLEEodCxlLG4rMSkpLHIpfXJldHVybiBUKGUsbnVsbCxuLHIpLG5ldyB1KHIpfWZ1bmN0aW9uIFIodCxlKXtmb3IodmFyIG49ZS5kZXB0aC10Lm9wZW5TdGFydCxyPWUubm9kZShuKSxvPXIuY29weSh0LmNvbnRlbnQpLGk9bi0xO2k+PTA7aS0tKW89ZS5ub2RlKGkpLmNvcHkodS5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fXcuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUtdGhpcy5vcGVuU3RhcnQtdGhpcy5vcGVuRW5kfSxnLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUpe3ZhciBuPWIodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IGcobix0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxnLnByb3RvdHlwZS5yZW1vdmVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBnKHgodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSt0aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sZy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpJiZ0aGlzLm9wZW5TdGFydD09dC5vcGVuU3RhcnQmJnRoaXMub3BlbkVuZD09dC5vcGVuRW5kfSxnLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxnLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtpZighdGhpcy5jb250ZW50LnNpemUpcmV0dXJuIG51bGw7dmFyIHQ9e2NvbnRlbnQ6dGhpcy5jb250ZW50LnRvSlNPTigpfTtyZXR1cm4gdGhpcy5vcGVuU3RhcnQ+MCYmKHQub3BlblN0YXJ0PXRoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5FbmQ+MCYmKHQub3BlbkVuZD10aGlzLm9wZW5FbmQpLHR9LGcuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gZy5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGcodS5mcm9tSlNPTih0LGUuY29udGVudCksZS5vcGVuU3RhcnR8fDAsZS5vcGVuRW5kfHwwKX0sZy5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgZyh0LG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGcucHJvdG90eXBlLHcpLGcuZW1wdHk9bmV3IGcodS5lbXB0eSwwLDApO3ZhciB6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBvcz10LHRoaXMucGF0aD1lLHRoaXMuZGVwdGg9ZS5sZW5ndGgvMy0xLHRoaXMucGFyZW50T2Zmc2V0PW59LEQ9e3BhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxkb2M6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dE9mZnNldDp7Y29uZmlndXJhYmxlOiEwfSxub2RlQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUJlZm9yZTp7Y29uZmlndXJhYmxlOiEwfX07ei5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxELnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuZGVwdGgpfSxELmRvYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKDApfSx6LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LHoucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KSsxXX0sei5wcm90b3R5cGUuaW5kZXhBZnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLmluZGV4KHQpKyh0IT10aGlzLmRlcHRofHx0aGlzLnRleHRPZmZzZXQ/MTowKX0sei5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sei5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuc3RhcnQodCkrdGhpcy5ub2RlKHQpLmNvbnRlbnQuc2l6ZX0sei5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGJlZm9yZSB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV19LHoucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sRC50ZXh0T2Zmc2V0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXX0sRC5ub2RlQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KHRoaXMuZGVwdGgpO2lmKGU9PXQuY2hpbGRDb3VudClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSxyPXQuY2hpbGQoZSk7cmV0dXJuIG4/dC5jaGlsZChlKS5jdXQobik6cn0sRC5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sei5wcm90b3R5cGUubWFya3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgoKTtpZigwPT10LmNvbnRlbnQuc2l6ZSlyZXR1cm4gbS5ub25lO2lmKHRoaXMudGV4dE9mZnNldClyZXR1cm4gdC5jaGlsZChlKS5tYXJrczt2YXIgbj10Lm1heWJlQ2hpbGQoZS0xKSxyPXQubWF5YmVDaGlsZChlKTtpZighbil7dmFyIG89bjtuPXIscj1vfWZvcih2YXIgaT1uLm1hcmtzLHM9MDtzPGkubGVuZ3RoO3MrKykhMSE9PWlbc10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmaVtzXS5pc0luU2V0KHIubWFya3MpfHwoaT1pW3MtLV0ucmVtb3ZlRnJvbVNldChpKSk7cmV0dXJuIGl9LHoucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sei5wcm90b3R5cGUuc2hhcmVkRGVwdGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZGVwdGg7ZT4wO2UtLSlpZih0aGlzLnN0YXJ0KGUpPD10JiZ0aGlzLmVuZChlKT49dClyZXR1cm4gZTtyZXR1cm4gMH0sei5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMpLHQucG9zPHRoaXMucG9zKXJldHVybiB0LmJsb2NrUmFuZ2UodGhpcyk7Zm9yKHZhciBuPXRoaXMuZGVwdGgtKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnR8fHRoaXMucG9zPT10LnBvcz8xOjApO24+PTA7bi0tKWlmKHQucG9zPD10aGlzLmVuZChuKSYmKCFlfHxlKHRoaXMubm9kZShuKSkpKXJldHVybiBuZXcgRih0aGlzLHQsbil9LHoucHJvdG90eXBlLnNhbWVQYXJlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGFyZW50T2Zmc2V0PT10LnBvcy10LnBhcmVudE9mZnNldH0sei5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvcz50aGlzLnBvcz90OnRoaXN9LHoucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSx6LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTE7ZTw9dGhpcy5kZXB0aDtlKyspdCs9KHQ/Ii8iOiIiKSt0aGlzLm5vZGUoZSkudHlwZS5uYW1lKyJfIit0aGlzLmluZGV4KGUtMSk7cmV0dXJuIHQrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSx6LnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsaD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFoKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWgtMSxyKz1jKzF9cmV0dXJuIG5ldyB6KGUsbixvKX0sei5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxJLmxlbmd0aDtuKyspe3ZhciByPUlbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUlbUF09ei5yZXNvbHZlKHQsZSk7cmV0dXJuIFA9KFArMSklQixvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxEKTt2YXIgST1bXSxQPTAsQj0xMixGPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LGo9e3N0YXJ0Ontjb25maWd1cmFibGU6ITB9LGVuZDp7Y29uZmlndXJhYmxlOiEwfSxwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxlbmRJbmRleDp7Y29uZmlndXJhYmxlOiEwfX07ai5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sai5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LGoucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LGouc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sai5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRi5wcm90b3R5cGUsaik7dmFyIF89T2JqZWN0LmNyZWF0ZShudWxsKSwkPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8dS5lbXB0eSx0aGlzLm1hcmtzPXJ8fG0ubm9uZX0sSj17bm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxpc0Jsb2NrOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0saXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0Ontjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O0oubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sSi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sJC5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sJC5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LCQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LCQucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LCQucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEoudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LCQucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEouZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEoubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSwkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sJC5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LCQucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdih0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxfKSYmbS5zYW1lU2V0KHRoaXMubWFya3Msbnx8bS5ub25lKX0sJC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sJC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sJC5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LCQucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGcuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZyhjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSwkLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gayh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSwkLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSwkLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LCQucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LCQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHoucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSwkLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gei5yZXNvbHZlKHRoaXMsdCl9LCQucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sSi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sSi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxKLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxKLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEouaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxKLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sSi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LCQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLFYodGhpcy5tYXJrcyx0KX0sJC5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSwkLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09biYmKG49dS5lbXB0eSksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89bi5jaGlsZENvdW50KTt2YXIgaT10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoRnJhZ21lbnQobixyLG8pLHM9aSYmaS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtpZighc3x8IXMudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBhPXI7YTxvO2ErKylpZighdGhpcy50eXBlLmFsbG93c01hcmtzKG4uY2hpbGQoYSkubWFya3MpKXJldHVybiExO3JldHVybiEwfSwkLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LCQucHJvdG90eXBlLmNhbkFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250ZW50LnNpemU/dGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCx0aGlzLmNoaWxkQ291bnQsdC5jb250ZW50KTp0aGlzLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKX0sJC5wcm90b3R5cGUuZGVmYXVsdENvbnRlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaEF0KHQpLmRlZmF1bHRUeXBlfSwkLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSwkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSwkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPXUuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJC5wcm90b3R5cGUsSik7dmFyIEw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6Vih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KCQpO2Z1bmN0aW9uIFYodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgcT1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxXPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBIKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiBxLmVtcHR5O3ZhciByPVUobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89b3QoZXQocikpO3JldHVybiBpdChvLG4pLG99LHEucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxxLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVy5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFcuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LHEucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LHEucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIHUuZnJvbShzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGM9MDtjPGkubmV4dC5sZW5ndGg7Yys9Mil7dmFyIGg9aS5uZXh0W2NdLHA9aS5uZXh0W2MrMV07aWYoIWguaXNUZXh0JiYhaC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YocCkpe3IucHVzaChwKTt2YXIgZj1vKHAscy5jb25jYXQoaCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0scS5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxxLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxXLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0scS5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0scS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhxLnByb3RvdHlwZSxXKSxxLmVtcHR5PW5ldyBxKCEwKTt2YXIgSD1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sSz17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gVSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goRyh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gRyh0KXt2YXIgZT1bXTtkb3tlLnB1c2goWCh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFgodCl7Zm9yKHZhciBlPXR0KHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVoodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBZKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49WSh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P1kodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gUSh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIHR0KHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPVUodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49USh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBldCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgaD1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksaCksbyhpKHQuZXhwcixoKSxoKSxbcihoKV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgcD1lLHU9MDt1PHQubWluO3UrKyl7dmFyIGY9bigpO28oaSh0LmV4cHIscCksZikscD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLHApLHApO2Vsc2UgZm9yKHZhciBsPXQubWluO2w8dC5tYXg7bCsrKXt2YXIgZD1uKCk7cihwLGQpLG8oaSh0LmV4cHIscCksZCkscD1kfXJldHVybltyKHApXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gbnQodCxlKXtyZXR1cm4gZS10fWZ1bmN0aW9uIHJ0KHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KG50KTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gb3QodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gbihydCh0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtydCh0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBxKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQobnQpO2kubmV4dC5wdXNoKG9bc10sZVthLmpvaW4oIiwiKV18fG4oYSkpfXJldHVybiBpfX1mdW5jdGlvbiBpdCh0LGUpe2Zvcih2YXIgbj0wLHI9W3RdO248ci5sZW5ndGg7bisrKXtmb3IodmFyIG89cltuXSxpPSFvLnZhbGlkRW5kLHM9W10sYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV0saD1vLm5leHRbYSsxXTtzLnB1c2goYy5uYW1lKSwhaXx8Yy5pc1RleHR8fGMuaGFzUmVxdWlyZWRBdHRycygpfHwoaT0hMSksLTE9PXIuaW5kZXhPZihoKSYmci5wdXNoKGgpfWkmJmUuZXJyKCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoIitzLmpvaW4oIiwgIikrIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiIpfX1mdW5jdGlvbiBzdCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKCFyLmhhc0RlZmF1bHQpcmV0dXJuIG51bGw7ZVtuXT1yLmRlZmF1bHR9cmV0dXJuIGV9ZnVuY3Rpb24gYXQodCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0KXt2YXIgbz1lJiZlW3JdO2lmKHZvaWQgMD09PW8pe3ZhciBpPXRbcl07aWYoIWkuaGFzRGVmYXVsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSAiK3IpO289aS5kZWZhdWx0fW5bcl09b31yZXR1cm4gbn1mdW5jdGlvbiBjdCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQpZm9yKHZhciBuIGluIHQpZVtuXT1uZXcgdXQodFtuXSk7cmV0dXJuIGV9Sy5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LEgucHJvdG90eXBlLmVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0PT10JiYodGhpcy5wb3MrK3x8ITApfSxILnByb3RvdHlwZS5lcnI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKHQrIiAoaW4gY29udGVudCBleHByZXNzaW9uICciK3RoaXMuc3RyaW5nKyInKSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhILnByb3RvdHlwZSxLKTt2YXIgaHQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPWUsdGhpcy5zcGVjPW4sdGhpcy5ncm91cHM9bi5ncm91cD9uLmdyb3VwLnNwbGl0KCIgIik6W10sdGhpcy5hdHRycz1jdChuLmF0dHJzKSx0aGlzLmRlZmF1bHRBdHRycz1zdCh0aGlzLmF0dHJzKSx0aGlzLmNvbnRlbnRNYXRjaD1udWxsLHRoaXMubWFya1NldD1udWxsLHRoaXMuaW5saW5lQ29udGVudD1udWxsLHRoaXMuaXNCbG9jaz0hKG4uaW5saW5lfHwidGV4dCI9PXQpLHRoaXMuaXNUZXh0PSJ0ZXh0Ij09dH0scHQ9e2lzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O3B0LmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzQmxvY2t9LHB0LmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQmxvY2smJnRoaXMuaW5saW5lQ29udGVudH0scHQuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaD09cS5lbXB0eX0scHQuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZnx8dGhpcy5zcGVjLmF0b219LGh0LnByb3RvdHlwZS5oYXNSZXF1aXJlZEF0dHJzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbZV0uaXNSZXF1aXJlZCYmKCF0fHwhKGUgaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxodC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxodC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczphdCh0aGlzLmF0dHJzLHQpfSxodC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgJCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLHUuZnJvbShlKSxtLnNldEZyb20obikpfSxodC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT11LmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgJCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsbS5zZXRGcm9tKG4pKX0saHQucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT11LmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKHUuZW1wdHksITApO3JldHVybiBvP25ldyAkKHRoaXMsdCxlLmFwcGVuZChvKSxtLnNldEZyb20obikpOm51bGx9LGh0LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxodC5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LGh0LnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0saHQucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTptLmVtcHR5OnR9LGh0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaHQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaHQucHJvdG90eXBlLHB0KTt2YXIgdXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sZnQ9e2lzUmVxdWlyZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModXQucHJvdG90eXBlLGZ0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPWN0KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1zdCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBtKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgbSh0aGlzLGF0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sbHQucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxsdC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIGR0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9Y1siYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPWNbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aHQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0aGlzLm5vZGVzKXtpZihyIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IocisiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLnNwZWMuY29udGVudHx8IiIscz1vLnNwZWMubWFya3M7by5jb250ZW50TWF0Y2g9bltpXXx8KG5baV09cS5wYXJzZShpLHRoaXMubm9kZXMpKSxvLmlubGluZUNvbnRlbnQ9by5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxvLm1hcmtTZXQ9Il8iPT1zP251bGw6cz92dCh0aGlzLHMuc3BsaXQoIiAiKSk6IiIhPXMmJm8uaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgYSBpbiB0aGlzLm1hcmtzKXt2YXIgaD10aGlzLm1hcmtzW2FdLHA9aC5zcGVjLmV4Y2x1ZGVzO2guZXhjbHVkZWQ9bnVsbD09cD9baF06IiI9PXA/W106dnQodGhpcyxwLnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB2dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1kdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaHQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxkdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEwobixuLmRlZmF1bHRBdHRycyx0LG0uc2V0RnJvbShlKSl9LGR0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0sZHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gJC5mcm9tSlNPTih0aGlzLHQpfSxkdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBtLmZyb21KU09OKHRoaXMsdCl9LGR0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIG10PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTttdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IEN0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0sbXQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IEN0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZy5tYXhPcGVuKG4uZmluaXNoKCkpfSxtdC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoTnQodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSxtdC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxtdC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUF0KHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9QXQodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LG10LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgbXQodCxtdC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgeXQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZ3Q9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sd3Q9e29sOiEwLHVsOiEwfSx4dD0xLGJ0PTIsa3Q9NDtmdW5jdGlvbiBTdCh0KXtyZXR1cm4odD94dDowKXwoImZ1bGwiPT09dD9idDowKX12YXIgT3Q9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZrdD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9bS5ub25lfTtPdC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZSh1LmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSxPdC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnh0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj11LmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKHUuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9O3ZhciBDdD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uLHRoaXMucGVuZGluZ01hcmtzPVtdO3ZhciByLG89ZS50b3BOb2RlLGk9U3QoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2t0OjApO3I9bz9uZXcgT3Qoby50eXBlLG8uYXR0cnMsbS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IE90KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLG0ubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxNdD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFR0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJnd0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIE50KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gRXQodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIEF0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1NdC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sQ3QucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKEV0KGUpKTpudWxsO2lmKG51bGwhPW4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW3JdKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5bb10pfX0sQ3QucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJnh0KW4ub3B0aW9ucyZidHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSxDdC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7d3QuaGFzT3duUHJvcGVydHkoZSkmJlR0KHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpndC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZih5dC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSxDdC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSxDdC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bS5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSxDdC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxDdC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1ufHwwLGk9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLHM9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtpIT1zO2k9aS5uZXh0U2libGluZywrK28pdGhpcy5maW5kQXRQb2ludCh0LG8pLHRoaXMuYWRkRE9NKGkpLGUmJnl0Lmhhc093blByb3BlcnR5KGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnRoaXMuc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsbyl9LEN0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLm9wZW47cj49MDtyLS0pe3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLmZpbmRXcmFwcGluZyh0KTtpZihpJiYoIWV8fGUubGVuZ3RoPmkubGVuZ3RoKSYmKGU9aSxuPW8sIWkubGVuZ3RoKSlicmVhaztpZihvLnNvbGlkKWJyZWFrfWlmKCFlKXJldHVybiExO3RoaXMuc3luYyhuKTtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl0aGlzLmVudGVySW5uZXIoZVtzXSxudWxsLCExKTtyZXR1cm4hMH0sQ3QucHJvdG90eXBlLmluc2VydE5vZGU9ZnVuY3Rpb24odCl7aWYodC5pc0lubGluZSYmdGhpcy5uZWVkc0Jsb2NrJiYhdGhpcy50b3AudHlwZSl7dmFyIGU9dGhpcy50ZXh0YmxvY2tGcm9tQ29udGV4dCgpO2UmJnRoaXMuZW50ZXJJbm5lcihlKX1pZih0aGlzLmZpbmRQbGFjZSh0KSl7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG49dGhpcy50b3A7dGhpcy5hcHBseVBlbmRpbmdNYXJrcyhuKSxuLm1hdGNoJiYobi5tYXRjaD1uLm1hdGNoLm1hdGNoVHlwZSh0LnR5cGUpKTtmb3IodmFyIHI9bi5hY3RpdmVNYXJrcyxvPTA7bzx0Lm1hcmtzLmxlbmd0aDtvKyspbi50eXBlJiYhbi50eXBlLmFsbG93c01hcmtUeXBlKHQubWFya3Nbb10udHlwZSl8fChyPXQubWFya3Nbb10uYWRkVG9TZXQocikpO3JldHVybiBuLmNvbnRlbnQucHVzaCh0Lm1hcmsocikpLCEwfXJldHVybiExfSxDdC5wcm90b3R5cGUuYXBwbHlQZW5kaW5nTWFya3M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLnBlbmRpbmdNYXJrc1tlXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKXx8bi5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1uLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLHRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLS0sMSkpfX0sQ3QucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxDdC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmt0OlN0KHIpO28ub3B0aW9ucyZrdCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWt0KSx0aGlzLm5vZGVzLnB1c2gobmV3IE90KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LEN0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYoZT50aGlzLm9wZW4pe2Zvcig7ZT50aGlzLm9wZW47ZS0tKXRoaXMubm9kZXNbZS0xXS5jb250ZW50LnB1c2godGhpcy5ub2Rlc1tlXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sQ3QucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LEN0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm9wZW47ZT49MDtlLS0paWYodGhpcy5ub2Rlc1tlXT09dClyZXR1cm4gdm9pZCh0aGlzLm9wZW49ZSl9LEN0LnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnBlbmRpbmdNYXJrcy5wdXNoKHQpfSxDdC5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYoZT4tMSl0aGlzLnBlbmRpbmdNYXJrcy5zcGxpY2UoZSwxKTtlbHNle3ZhciBuPXRoaXMudG9wO24uYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KG4uYWN0aXZlTWFya3MpfX0sTXQuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LEN0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxDdC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sQ3QucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSxDdC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSxDdC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBoPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWh8fGgubmFtZSE9YyYmLTE9PWguZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LEN0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEN0LnByb3RvdHlwZSxNdCk7dmFyIFJ0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiB6dCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIER0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9UnQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1EdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10saD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2gmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGguZG9tKSxvPWguY29udGVudERPTXx8aC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxSdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1SdC5yZW5kZXJTcGVjKER0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxSdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sUnQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmUnQucmVuZGVyU3BlYyhEdChuKSxyKHQsZSkpfSxSdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGg9UnQucmVuZGVyU3BlYyh0LGMpLHA9aC5kb20sdT1oLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sUnQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFJ0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFJ0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT16dCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxSdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHp0KHQubWFya3MpfTt2YXIgSXQ9bigiMGFjMCIpLFB0PU9iamVjdC5jcmVhdGUobnVsbCksQnQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucmFuZ2VzPW58fFtuZXcganQodC5taW4oZSksdC5tYXgoZSkpXSx0aGlzLiRhbmNob3I9dCx0aGlzLiRoZWFkPWV9LEZ0PXthbmNob3I6e2NvbmZpZ3VyYWJsZTohMH0saGVhZDp7Y29uZmlndXJhYmxlOiEwfSxmcm9tOntjb25maWd1cmFibGU6ITB9LHRvOntjb25maWd1cmFibGU6ITB9LCRmcm9tOntjb25maWd1cmFibGU6ITB9LCR0bzp7Y29uZmlndXJhYmxlOiEwfSxlbXB0eTp7Y29uZmlndXJhYmxlOiEwfX07RnQuYW5jaG9yLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbmNob3IucG9zfSxGdC5oZWFkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRoZWFkLnBvc30sRnQuZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5wb3N9LEZ0LnRvLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5wb3N9LEZ0LiRmcm9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1swXS4kZnJvbX0sRnQuJHRvLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1swXS4kdG99LEZ0LmVtcHR5LmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnJhbmdlcyxlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS4kZnJvbS5wb3MhPXRbZV0uJHRvLnBvcylyZXR1cm4hMTtyZXR1cm4hMH0sQnQucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKDApLnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvLCEwKX0sQnQucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1nLmVtcHR5KTtmb3IodmFyIG49ZS5jb250ZW50Lmxhc3RDaGlsZCxyPW51bGwsbz0wO288ZS5vcGVuRW5kO28rKylyPW4sbj1uLmxhc3RDaGlsZDtmb3IodmFyIGk9dC5zdGVwcy5sZW5ndGgscz10aGlzLnJhbmdlcyxhPTA7YTxzLmxlbmd0aDthKyspe3ZhciBjPXNbYV0saD1jLiRmcm9tLHA9Yy4kdG8sdT10Lm1hcHBpbmcuc2xpY2UoaSk7dC5yZXBsYWNlUmFuZ2UodS5tYXAoaC5wb3MpLHUubWFwKHAucG9zKSxhP2cuZW1wdHk6ZSksMD09YSYmSHQodCxpLChuP24uaXNJbmxpbmU6ciYmci5pc1RleHRibG9jayk/LTE6MSl9fSxCdC5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5zdGVwcy5sZW5ndGgscj10aGlzLnJhbmdlcyxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10scz1pLiRmcm9tLGE9aS4kdG8sYz10Lm1hcHBpbmcuc2xpY2UobiksaD1jLm1hcChzLnBvcykscD1jLm1hcChhLnBvcyk7bz90LmRlbGV0ZVJhbmdlKGgscCk6KHQucmVwbGFjZVJhbmdlV2l0aChoLHAsZSksSHQodCxuLGUuaXNJbmxpbmU/LTE6MSkpfX0sQnQuZmluZEZyb209ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQucGFyZW50LmlubGluZUNvbnRlbnQ/bmV3IF90KHQpOld0KHQubm9kZSgwKSx0LnBhcmVudCx0LnBvcyx0LmluZGV4KCksZSxuKTtpZihyKXJldHVybiByO2Zvcih2YXIgbz10LmRlcHRoLTE7bz49MDtvLS0pe3ZhciBpPWU8MD9XdCh0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYmVmb3JlKG8rMSksdC5pbmRleChvKSxlLG4pOld0KHQubm9kZSgwKSx0Lm5vZGUobyksdC5hZnRlcihvKzEpLHQuaW5kZXgobykrMSxlLG4pO2lmKGkpcmV0dXJuIGl9fSxCdC5uZWFyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuZmluZEZyb20odCxlKXx8dGhpcy5maW5kRnJvbSh0LC1lKXx8bmV3IFZ0KHQubm9kZSgwKSl9LEJ0LmF0U3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFd0KHQsdCwwLDAsMSl8fG5ldyBWdCh0KX0sQnQuYXRFbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIFd0KHQsdCx0LmNvbnRlbnQuc2l6ZSx0LmNoaWxkQ291bnQsLTEpfHxuZXcgVnQodCl9LEJ0LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNlbGVjdGlvbi5mcm9tSlNPTiIpO3ZhciBuPVB0W2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHNlbGVjdGlvbiB0eXBlICIrZS50eXBlKyIgZGVmaW5lZCIpO3JldHVybiBuLmZyb21KU09OKHQsZSl9LEJ0Lmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gUHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc2VsZWN0aW9uIEpTT04gSUQgIit0KTtyZXR1cm4gUHRbdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfSxCdC5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gX3QuYmV0d2Vlbih0aGlzLiRhbmNob3IsdGhpcy4kaGVhZCkuZ2V0Qm9va21hcmsoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQnQucHJvdG90eXBlLEZ0KSxCdC5wcm90b3R5cGUudmlzaWJsZT0hMDt2YXIganQ9ZnVuY3Rpb24odCxlKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZX0sX3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpLHQuY2FsbCh0aGlzLGUsbil9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49eyRjdXJzb3I6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLiRjdXJzb3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3M9PXRoaXMuJGhlYWQucG9zP3RoaXMuJGhlYWQ6bnVsbH0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89bi5yZXNvbHZlKHIubWFwKHRoaXMuaGVhZCkpO2lmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiB0Lm5lYXIobyk7dmFyIGk9bi5yZXNvbHZlKHIubWFwKHRoaXMuYW5jaG9yKSk7cmV0dXJuIG5ldyBlKGkucGFyZW50LmlubGluZUNvbnRlbnQ/aTpvLG8pfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49Zy5lbXB0eSksdC5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHRoaXMsZSxuKSxuPT1nLmVtcHR5KXt2YXIgcj10aGlzLiRmcm9tLm1hcmtzQWNyb3NzKHRoaXMuJHRvKTtyJiZlLmVuc3VyZU1hcmtzKHIpfX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3ImJnQuaGVhZD09dGhpcy5oZWFkfSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgJHQodGhpcy5hbmNob3IsdGhpcy5oZWFkKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6InRleHQiLGFuY2hvcjp0aGlzLmFuY2hvcixoZWFkOnRoaXMuaGVhZH19LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yfHwibnVtYmVyIiE9dHlwZW9mIG4uaGVhZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgVGV4dFNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpLHQucmVzb2x2ZShuLmhlYWQpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXQucmVzb2x2ZShlKTtyZXR1cm4gbmV3IHRoaXMocixuPT1lP3I6dC5yZXNvbHZlKG4pKX0sZS5iZXR3ZWVuPWZ1bmN0aW9uKG4scixvKXt2YXIgaT1uLnBvcy1yLnBvcztpZihvJiYhaXx8KG89aT49MD8xOi0xKSwhci5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIHM9dC5maW5kRnJvbShyLG8sITApfHx0LmZpbmRGcm9tKHIsLW8sITApO2lmKCFzKXJldHVybiB0Lm5lYXIocixvKTtyPXMuJGhlYWR9cmV0dXJuIG4ucGFyZW50LmlubGluZUNvbnRlbnR8fCgwPT1pP249cjoobj0odC5maW5kRnJvbShuLC1vLCEwKXx8dC5maW5kRnJvbShuLG8sITApKS4kYW5jaG9yLG4ucG9zPHIucG9zIT1pPDAmJihuPXIpKSksbmV3IGUobixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oQnQpO0J0Lmpzb25JRCgidGV4dCIsX3QpO3ZhciAkdD1mdW5jdGlvbih0LGUpe3RoaXMuYW5jaG9yPXQsdGhpcy5oZWFkPWV9OyR0LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyAkdCh0Lm1hcCh0aGlzLmFuY2hvciksdC5tYXAodGhpcy5oZWFkKSl9LCR0LnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBfdC5iZXR3ZWVuKHQucmVzb2x2ZSh0aGlzLmFuY2hvciksdC5yZXNvbHZlKHRoaXMuaGVhZCkpfTt2YXIgSnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj1lLm5vZGVBZnRlcixyPWUubm9kZSgwKS5yZXNvbHZlKGUucG9zK24ubm9kZVNpemUpO3QuY2FsbCh0aGlzLGUsciksdGhpcy5ub2RlPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPXIubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxpPW8uZGVsZXRlZCxzPW8ucG9zLGE9bi5yZXNvbHZlKHMpO3JldHVybiBpP3QubmVhcihhKTpuZXcgZShhKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe3JldHVybiBuZXcgZyh1LmZyb20odGhpcy5ub2RlKSwwLDApfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuYW5jaG9yPT10aGlzLmFuY2hvcn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6Im5vZGUiLGFuY2hvcjp0aGlzLmFuY2hvcn19LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBMdCh0aGlzLmFuY2hvcil9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlU2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvcikpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgdGhpcyh0LnJlc29sdmUoZSkpfSxlLmlzU2VsZWN0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4hdC5pc1RleHQmJiExIT09dC50eXBlLnNwZWMuc2VsZWN0YWJsZX0sZX0oQnQpO0p0LnByb3RvdHlwZS52aXNpYmxlPSExLEJ0Lmpzb25JRCgibm9kZSIsSnQpO3ZhciBMdD1mdW5jdGlvbih0KXt0aGlzLmFuY2hvcj10fTtMdC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxuPWUuZGVsZXRlZCxyPWUucG9zO3JldHVybiBuP25ldyAkdChyLHIpOm5ldyBMdChyKX0sTHQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNvbHZlKHRoaXMuYW5jaG9yKSxuPWUubm9kZUFmdGVyO3JldHVybiBuJiZKdC5pc1NlbGVjdGFibGUobik/bmV3IEp0KGUpOkJ0Lm5lYXIoZSl9O3ZhciBWdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUucmVzb2x2ZSgwKSxlLnJlc29sdmUoZS5jb250ZW50LnNpemUpKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPWcuZW1wdHkpLG49PWcuZW1wdHkpe2UuZGVsZXRlKDAsZS5kb2MuY29udGVudC5zaXplKTt2YXIgcj10LmF0U3RhcnQoZS5kb2MpO3IuZXEoZS5zZWxlY3Rpb24pfHxlLnNldFNlbGVjdGlvbihyKX1lbHNlIHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbil9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJhbGwifX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gcXR9LGV9KEJ0KTtCdC5qc29uSUQoImFsbCIsVnQpO3ZhciBxdD17bWFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBWdCh0KX19O2Z1bmN0aW9uIFd0KHQsZSxuLHIsbyxpKXtpZihlLmlubGluZUNvbnRlbnQpcmV0dXJuIF90LmNyZWF0ZSh0LG4pO2Zvcih2YXIgcz1yLShvPjA/MDoxKTtvPjA/czxlLmNoaWxkQ291bnQ6cz49MDtzKz1vKXt2YXIgYT1lLmNoaWxkKHMpO2lmKGEuaXNBdG9tKXtpZighaSYmSnQuaXNTZWxlY3RhYmxlKGEpKXJldHVybiBKdC5jcmVhdGUodCxuLShvPDA/YS5ub2RlU2l6ZTowKSl9ZWxzZXt2YXIgYz1XdCh0LGEsbitvLG88MD9hLmNoaWxkQ291bnQ6MCxvLGkpO2lmKGMpcmV0dXJuIGN9bis9YS5ub2RlU2l6ZSpvfX1mdW5jdGlvbiBIdCh0LGUsbil7dmFyIHI9dC5zdGVwcy5sZW5ndGgtMTtpZighKHI8ZSkpe3ZhciBvPXQuc3RlcHNbcl07aWYobyBpbnN0YW5jZW9mIEl0WyJjIl18fG8gaW5zdGFuY2VvZiBJdFsiYiJdKXt2YXIgaSxzPXQubWFwcGluZy5tYXBzW3JdO3MuZm9yRWFjaCgoZnVuY3Rpb24odCxlLG4scil7bnVsbD09aSYmKGk9cil9KSksdC5zZXRTZWxlY3Rpb24oQnQubmVhcih0LmRvYy5yZXNvbHZlKGkpLG4pKX19fXZhciBLdD0xLFV0PTIsR3Q9NCxYdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUuZG9jKSx0aGlzLnRpbWU9RGF0ZS5ub3coKSx0aGlzLmN1clNlbGVjdGlvbj1lLnNlbGVjdGlvbix0aGlzLmN1clNlbGVjdGlvbkZvcj0wLHRoaXMuc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcyx0aGlzLnVwZGF0ZWQ9MCx0aGlzLm1ldGE9T2JqZWN0LmNyZWF0ZShudWxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VsZWN0aW9uOntjb25maWd1cmFibGU6ITB9LHNlbGVjdGlvblNldDp7Y29uZmlndXJhYmxlOiEwfSxzdG9yZWRNYXJrc1NldDp7Y29uZmlndXJhYmxlOiEwfSxpc0dlbmVyaWM6e2NvbmZpZ3VyYWJsZTohMH0sc2Nyb2xsZWRJbnRvVmlldzp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uc2VsZWN0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1clNlbGVjdGlvbkZvcjx0aGlzLnN0ZXBzLmxlbmd0aCYmKHRoaXMuY3VyU2VsZWN0aW9uPXRoaXMuY3VyU2VsZWN0aW9uLm1hcCh0aGlzLmRvYyx0aGlzLm1hcHBpbmcuc2xpY2UodGhpcy5jdXJTZWxlY3Rpb25Gb3IpKSx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCksdGhpcy5jdXJTZWxlY3Rpb259LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0KXtpZih0LiRmcm9tLmRvYyE9dGhpcy5kb2MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNlbGVjdGlvbiBwYXNzZWQgdG8gc2V0U2VsZWN0aW9uIG11c3QgcG9pbnQgYXQgdGhlIGN1cnJlbnQgZG9jdW1lbnQiKTtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb249dCx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCx0aGlzLnVwZGF0ZWQ9KHRoaXMudXBkYXRlZHxLdCkmflV0LHRoaXMuc3RvcmVkTWFya3M9bnVsbCx0aGlzfSxuLnNlbGVjdGlvblNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJkt0KT4wfSxlLnByb3RvdHlwZS5zZXRTdG9yZWRNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdG9yZWRNYXJrcz10LHRoaXMudXBkYXRlZHw9VXQsdGhpc30sZS5wcm90b3R5cGUuZW5zdXJlTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIG0uc2FtZVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kZnJvbS5tYXJrcygpLHQpfHx0aGlzLnNldFN0b3JlZE1hcmtzKHQpLHRoaXN9LGUucHJvdG90eXBlLmFkZFN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5hZGRUb1NldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LGUucHJvdG90eXBlLnJlbW92ZVN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5yZW1vdmVGcm9tU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sbi5zdG9yZWRNYXJrc1NldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJlV0KT4wfSxlLnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKGUsbil7dC5wcm90b3R5cGUuYWRkU3RlcC5jYWxsKHRoaXMsZSxuKSx0aGlzLnVwZGF0ZWQ9dGhpcy51cGRhdGVkJn5VdCx0aGlzLnN0b3JlZE1hcmtzPW51bGx9LGUucHJvdG90eXBlLnNldFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGltZT10LHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uV2l0aD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc2VsZWN0aW9uO3JldHVybiExIT09ZSYmKHQ9dC5tYXJrKHRoaXMuc3RvcmVkTWFya3N8fChuLmVtcHR5P24uJGZyb20ubWFya3MoKTpuLiRmcm9tLm1hcmtzQWNyb3NzKG4uJHRvKXx8bS5ub25lKSkpLG4ucmVwbGFjZVdpdGgodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5kZWxldGVTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzKSx0aGlzfSxlLnByb3RvdHlwZS5pbnNlcnRUZXh0PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj10aGlzLmRvYy50eXBlLnNjaGVtYTtpZihudWxsPT1lKXJldHVybiB0P3RoaXMucmVwbGFjZVNlbGVjdGlvbldpdGgoci50ZXh0KHQpLCEwKTp0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO2lmKCF0KXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKGUsbik7dmFyIG89dGhpcy5zdG9yZWRNYXJrcztpZighbyl7dmFyIGk9dGhpcy5kb2MucmVzb2x2ZShlKTtvPW49PWU/aS5tYXJrcygpOmkubWFya3NBY3Jvc3ModGhpcy5kb2MucmVzb2x2ZShuKSl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlV2l0aChlLG4sci50ZXh0KHQsbykpLHRoaXMuc2VsZWN0aW9uLmVtcHR5fHx0aGlzLnNldFNlbGVjdGlvbihCdC5uZWFyKHRoaXMuc2VsZWN0aW9uLiR0bykpLHRoaXN9LGUucHJvdG90eXBlLnNldE1ldGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XT1lLHRoaXN9LGUucHJvdG90eXBlLmdldE1ldGE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV19LG4uaXNHZW5lcmljLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLm1ldGEpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLnNjcm9sbEludG9WaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlZHw9R3QsdGhpc30sbi5zY3JvbGxlZEludG9WaWV3LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmR3QpPjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KEl0WyJkIl0pO2Z1bmN0aW9uIFl0KHQsZSl7cmV0dXJuIGUmJnQ/dC5iaW5kKGUpOnR9dmFyIFp0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLmluaXQ9WXQoZS5pbml0LG4pLHRoaXMuYXBwbHk9WXQoZS5hcHBseSxuKX0sUXQ9W25ldyBadCgiZG9jIix7aW5pdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N8fHQuc2NoZW1hLnRvcE5vZGVUeXBlLmNyZWF0ZUFuZEZpbGwoKX0sYXBwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9jfX0pLG5ldyBadCgic2VsZWN0aW9uIix7aW5pdDpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNlbGVjdGlvbnx8QnQuYXRTdGFydChlLmRvYyl9LGFwcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0LnNlbGVjdGlvbn19KSxuZXcgWnQoInN0b3JlZE1hcmtzIix7aW5pdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5zdG9yZWRNYXJrc3x8bnVsbH0sYXBwbHk6ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHIuc2VsZWN0aW9uLiRjdXJzb3I/dC5zdG9yZWRNYXJrczpudWxsfX0pLG5ldyBadCgic2Nyb2xsVG9TZWxlY3Rpb24iLHtpbml0OmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGFwcGx5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2Nyb2xsZWRJbnRvVmlldz9lKzE6ZX19KV0sdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5maWVsZHM9UXQuY29uY2F0KCksdGhpcy5wbHVnaW5zPVtdLHRoaXMucGx1Z2luc0J5S2V5PU9iamVjdC5jcmVhdGUobnVsbCksZSYmZS5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihuLnBsdWdpbnNCeUtleVt0LmtleV0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFkZGluZyBkaWZmZXJlbnQgaW5zdGFuY2VzIG9mIGEga2V5ZWQgcGx1Z2luICgiK3Qua2V5KyIpIik7bi5wbHVnaW5zLnB1c2godCksbi5wbHVnaW5zQnlLZXlbdC5rZXldPXQsdC5zcGVjLnN0YXRlJiZuLmZpZWxkcy5wdXNoKG5ldyBadCh0LmtleSx0LnNwZWMuc3RhdGUsdCkpfSkpfSxlZT1mdW5jdGlvbih0KXt0aGlzLmNvbmZpZz10fSxuZT17c2NoZW1hOntjb25maWd1cmFibGU6ITB9LHBsdWdpbnM6e2NvbmZpZ3VyYWJsZTohMH0sdHI6e2NvbmZpZ3VyYWJsZTohMH19O25lLnNjaGVtYS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcuc2NoZW1hfSxuZS5wbHVnaW5zLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5wbHVnaW5zfSxlZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXBwbHlUcmFuc2FjdGlvbih0KS5zdGF0ZX0sZWUucHJvdG90eXBlLmZpbHRlclRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9LTEpO2Zvcih2YXIgbj0wO248dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7bisrKWlmKG4hPWUpe3ZhciByPXRoaXMuY29uZmlnLnBsdWdpbnNbbl07aWYoci5zcGVjLmZpbHRlclRyYW5zYWN0aW9uJiYhci5zcGVjLmZpbHRlclRyYW5zYWN0aW9uLmNhbGwocix0LHRoaXMpKXJldHVybiExfXJldHVybiEwfSxlZS5wcm90b3R5cGUuYXBwbHlUcmFuc2FjdGlvbj1mdW5jdGlvbih0KXtpZighdGhpcy5maWx0ZXJUcmFuc2FjdGlvbih0KSlyZXR1cm57c3RhdGU6dGhpcyx0cmFuc2FjdGlvbnM6W119O2Zvcih2YXIgZT1bdF0sbj10aGlzLmFwcGx5SW5uZXIodCkscj1udWxsOzspe2Zvcih2YXIgbz0hMSxpPTA7aTx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtpKyspe3ZhciBzPXRoaXMuY29uZmlnLnBsdWdpbnNbaV07aWYocy5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uKXt2YXIgYT1yP3JbaV0ubjowLGM9cj9yW2ldLnN0YXRlOnRoaXMsaD1hPGUubGVuZ3RoJiZzLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24uY2FsbChzLGE/ZS5zbGljZShhKTplLGMsbik7aWYoaCYmbi5maWx0ZXJUcmFuc2FjdGlvbihoLGkpKXtpZihoLnNldE1ldGEoImFwcGVuZGVkVHJhbnNhY3Rpb24iLHQpLCFyKXtyPVtdO2Zvcih2YXIgcD0wO3A8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7cCsrKXIucHVzaChwPGk/e3N0YXRlOm4sbjplLmxlbmd0aH06e3N0YXRlOnRoaXMsbjowfSl9ZS5wdXNoKGgpLG49bi5hcHBseUlubmVyKGgpLG89ITB9ciYmKHJbaV09e3N0YXRlOm4sbjplLmxlbmd0aH0pfX1pZighbylyZXR1cm57c3RhdGU6bix0cmFuc2FjdGlvbnM6ZX19fSxlZS5wcm90b3R5cGUuYXBwbHlJbm5lcj1mdW5jdGlvbih0KXtpZighdC5iZWZvcmUuZXEodGhpcy5kb2MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBcHBseWluZyBhIG1pc21hdGNoZWQgdHJhbnNhY3Rpb24iKTtmb3IodmFyIGU9bmV3IGVlKHRoaXMuY29uZmlnKSxuPXRoaXMuY29uZmlnLmZpZWxkcyxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07ZVtvLm5hbWVdPW8uYXBwbHkodCx0aGlzW28ubmFtZV0sdGhpcyxlKX1mb3IodmFyIGk9MDtpPHJlLmxlbmd0aDtpKyspcmVbaV0odGhpcyx0LGUpO3JldHVybiBlfSxuZS50ci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFh0KHRoaXMpfSxlZS5jcmVhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyB0ZSh0LnNjaGVtYXx8dC5kb2MudHlwZS5zY2hlbWEsdC5wbHVnaW5zKSxuPW5ldyBlZShlKSxyPTA7cjxlLmZpZWxkcy5sZW5ndGg7cisrKW5bZS5maWVsZHNbcl0ubmFtZV09ZS5maWVsZHNbcl0uaW5pdCh0LG4pO3JldHVybiBufSxlZS5wcm90b3R5cGUucmVjb25maWd1cmU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyB0ZSh0LnNjaGVtYXx8dGhpcy5zY2hlbWEsdC5wbHVnaW5zKSxuPWUuZmllbGRzLHI9bmV3IGVlKGUpLG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXS5uYW1lO3JbaV09dGhpcy5oYXNPd25Qcm9wZXJ0eShpKT90aGlzW2ldOm5bb10uaW5pdCh0LHIpfXJldHVybiByfSxlZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKHQpe3ZhciBlPXtkb2M6dGhpcy5kb2MudG9KU09OKCksc2VsZWN0aW9uOnRoaXMuc2VsZWN0aW9uLnRvSlNPTigpfTtpZih0aGlzLnN0b3JlZE1hcmtzJiYoZS5zdG9yZWRNYXJrcz10aGlzLnN0b3JlZE1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHQmJiJvYmplY3QiPT10eXBlb2YgdClmb3IodmFyIG4gaW4gdCl7aWYoImRvYyI9PW58fCJzZWxlY3Rpb24iPT1uKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgSlNPTiBmaWVsZHMgYGRvY2AgYW5kIGBzZWxlY3Rpb25gIGFyZSByZXNlcnZlZCIpO3ZhciByPXRbbl0sbz1yLnNwZWMuc3RhdGU7byYmby50b0pTT04mJihlW25dPW8udG9KU09OLmNhbGwocix0aGlzW3Iua2V5XSkpfXJldHVybiBlfSxlZS5mcm9tSlNPTj1mdW5jdGlvbih0LGUsbil7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEVkaXRvclN0YXRlLmZyb21KU09OIik7aWYoIXQuc2NoZW1hKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZXF1aXJlZCBjb25maWcgZmllbGQgJ3NjaGVtYScgbWlzc2luZyIpO3ZhciByPW5ldyB0ZSh0LnNjaGVtYSx0LnBsdWdpbnMpLG89bmV3IGVlKHIpO3JldHVybiByLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbihyKXtpZigiZG9jIj09ci5uYW1lKW8uZG9jPSQuZnJvbUpTT04odC5zY2hlbWEsZS5kb2MpO2Vsc2UgaWYoInNlbGVjdGlvbiI9PXIubmFtZSlvLnNlbGVjdGlvbj1CdC5mcm9tSlNPTihvLmRvYyxlLnNlbGVjdGlvbik7ZWxzZSBpZigic3RvcmVkTWFya3MiPT1yLm5hbWUpZS5zdG9yZWRNYXJrcyYmKG8uc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcy5tYXAodC5zY2hlbWEubWFya0Zyb21KU09OKSk7ZWxzZXtpZihuKWZvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldLGE9cy5zcGVjLnN0YXRlO2lmKHMua2V5PT1yLm5hbWUmJmEmJmEuZnJvbUpTT04mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXJldHVybiB2b2lkKG9bci5uYW1lXT1hLmZyb21KU09OLmNhbGwocyx0LGVbaV0sbykpfW9bci5uYW1lXT1yLmluaXQodCxvKX19KSksb30sZWUuYWRkQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXtyZS5wdXNoKHQpfSxlZS5yZW1vdmVBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXJlLmluZGV4T2YodCk7ZT4tMSYmcmUuc3BsaWNlKGUsMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGVlLnByb3RvdHlwZSxuZSk7dmFyIHJlPVtdO2Z1bmN0aW9uIG9lKHQsZSxuKXtmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXTtvIGluc3RhbmNlb2YgRnVuY3Rpb24/bz1vLmJpbmQoZSk6ImhhbmRsZURPTUV2ZW50cyI9PXImJihvPW9lKG8sZSx7fSkpLG5bcl09b31yZXR1cm4gbn12YXIgaWU9ZnVuY3Rpb24odCl7dGhpcy5wcm9wcz17fSx0LnByb3BzJiZvZSh0LnByb3BzLHRoaXMsdGhpcy5wcm9wcyksdGhpcy5zcGVjPXQsdGhpcy5rZXk9dC5rZXk/dC5rZXkua2V5OmFlKCJwbHVnaW4iKX07aWUucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX07dmFyIHNlPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gYWUodCl7cmV0dXJuIHQgaW4gc2U/dCsiJCIrICsrc2VbdF06KHNlW3RdPTAsdCsiJCIpfXZhciBjZT1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0ia2V5IiksdGhpcy5rZXk9YWUodCl9O2Z1bmN0aW9uIGhlKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQociksaT1lLmNoaWxkKHIpO2lmKG8hPWkpe2lmKCFvLnNhbWVNYXJrdXAoaSkpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9aS50ZXh0KXtmb3IodmFyIHM9MDtvLnRleHRbc109PWkudGV4dFtzXTtzKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxpLmNvbnRlbnQuc2l6ZSl7dmFyIGE9aGUoby5jb250ZW50LGkuY29udGVudCxuKzEpO2lmKG51bGwhPWEpcmV0dXJuIGF9bis9by5ub2RlU2l6ZX1lbHNlIG4rPW8ubm9kZVNpemV9fWZ1bmN0aW9uIHBlKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQsaT1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09aSlyZXR1cm4gbz09aT9udWxsOnthOm4sYjpyfTt2YXIgcz10LmNoaWxkKC0tbyksYT1lLmNoaWxkKC0taSksYz1zLm5vZGVTaXplO2lmKHMhPWEpe2lmKCFzLnNhbWVNYXJrdXAoYSkpcmV0dXJue2E6bixiOnJ9O2lmKHMuaXNUZXh0JiZzLnRleHQhPWEudGV4dCl7dmFyIGg9MCxwPU1hdGgubWluKHMudGV4dC5sZW5ndGgsYS50ZXh0Lmxlbmd0aCk7d2hpbGUoaDxwJiZzLnRleHRbcy50ZXh0Lmxlbmd0aC1oLTFdPT1hLnRleHRbYS50ZXh0Lmxlbmd0aC1oLTFdKWgrKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihzLmNvbnRlbnQuc2l6ZXx8YS5jb250ZW50LnNpemUpe3ZhciB1PXBlKHMuY29udGVudCxhLmNvbnRlbnQsbi0xLHItMSk7aWYodSlyZXR1cm4gdX1uLT1jLHItPWN9ZWxzZSBuLT1jLHItPWN9fWNlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29uZmlnLnBsdWdpbnNCeUtleVt0aGlzLmtleV19LGNlLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciB1ZT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5zaXplKz10W25dLm5vZGVTaXplfSxmZT17Zmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07dWUucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciBoPXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtaCksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1oKSxuLHIraCl9cz1jfX0sdWUucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSx1ZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dmFyIG89IiIsaT0hMDtyZXR1cm4gdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihzLGEpe3MuaXNUZXh0PyhvKz1zLnRleHQuc2xpY2UoTWF0aC5tYXgodCxhKS1hLGUtYSksaT0hbik6cy5pc0xlYWYmJnI/KG8rPXIsaT0hbik6IWkmJnMuaXNCbG9jayYmKG8rPW4saT0hMCl9KSwwKSxvfSx1ZS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyB1ZShyLHRoaXMuc2l6ZSt0LnNpemUpfSx1ZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIG49W10scj0wO2lmKGU+dClmb3IodmFyIG89MCxpPTA7aTxlO28rKyl7dmFyIHM9dGhpcy5jb250ZW50W29dLGE9aStzLm5vZGVTaXplO2E+dCYmKChpPHR8fGE+ZSkmJihzPXMuaXNUZXh0P3MuY3V0KE1hdGgubWF4KDAsdC1pKSxNYXRoLm1pbihzLnRleHQubGVuZ3RoLGUtaSkpOnMuY3V0KE1hdGgubWF4KDAsdC1pLTEpLE1hdGgubWluKHMuY29udGVudC5zaXplLGUtaS0xKSkpLG4ucHVzaChzKSxyKz1zLm5vZGVTaXplKSxpPWF9cmV0dXJuIG5ldyB1ZShuLHIpfSx1ZS5wcm90b3R5cGUuY3V0QnlJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lP3VlLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgdWUodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSx1ZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jb250ZW50W3RdO2lmKG49PWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz10aGlzLnNpemUrZS5ub2RlU2l6ZS1uLm5vZGVTaXplO3JldHVybiByW3RdPWUsbmV3IHVlKHIsbyl9LHVlLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdWUoW3RdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sdWUucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdWUodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHVlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspaWYoIXRoaXMuY29udGVudFtlXS5lcSh0LmNvbnRlbnRbZV0pKXJldHVybiExO3JldHVybiEwfSxmZS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxmZS5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0sZmUuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0sdWUucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSx1ZS5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSx1ZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jb250ZW50W2VdO3QocixuLGUpLG4rPXIubm9kZVNpemV9fSx1ZS5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxoZSh0aGlzLHQsZSl9LHVlLnByb3RvdHlwZS5maW5kRGlmZkVuZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMuc2l6ZSksdm9pZCAwPT09biYmKG49dC5zaXplKSxwZSh0aGlzLHQsZSxuKX0sdWUucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiBkZSgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gZGUodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIG49MCxyPTA7O24rKyl7dmFyIG89dGhpcy5jaGlsZChuKSxpPXIrby5ub2RlU2l6ZTtpZihpPj10KXJldHVybiBpPT10fHxlPjA/ZGUobisxLGkpOmRlKG4scik7cj1pfX0sdWUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sdWUucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LHVlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSx1ZS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiB1ZS5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHVlKGUubWFwKHQubm9kZUZyb21KU09OKSl9LHVlLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIHVlLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgdWUoZXx8dCxuKX0sdWUuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gdWUuZW1wdHk7aWYodCBpbnN0YW5jZW9mIHVlKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyB1ZShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHVlLnByb3RvdHlwZSxmZSk7dmFyIGxlPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBkZSh0LGUpe3JldHVybiBsZS5pbmRleD10LGxlLm9mZnNldD1lLGxlfWZ1bmN0aW9uIHZlKHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF2ZSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdmUodFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9dWUuZW1wdHk9bmV3IHVlKFtdLDApO3ZhciBtZT1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24geWUodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz15ZS5wcm90b3R5cGUsZX1tZS5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LG1lLnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sbWUucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4hMDtyZXR1cm4hMX0sbWUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmdmUodGhpcy5hdHRycyx0LmF0dHJzKX0sbWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0fSxtZS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sbWUuc2FtZVNldD1mdW5jdGlvbih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxKGVbbl0pKXJldHVybiExO3JldHVybiEwfSxtZS5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gbWUubm9uZTtpZih0IGluc3RhbmNlb2YgbWUpcmV0dXJuW3RdO3ZhciBlPXQuc2xpY2UoKTtyZXR1cm4gZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGUucmFuay1lLnR5cGUucmFua30pKSxlfSxtZS5ub25lPVtdLHllLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSkseWUucHJvdG90eXBlLmNvbnN0cnVjdG9yPXllLHllLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBnZT1mdW5jdGlvbih0LGUsbil7dGhpcy5jb250ZW50PXQsdGhpcy5vcGVuU3RhcnQ9ZSx0aGlzLm9wZW5FbmQ9bn0sd2U9e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHhlKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxoPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihoIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh4ZShzLmNvbnRlbnQsZS1pLTEsbi1pLTEpKSl9ZnVuY3Rpb24gYmUodCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz1iZShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBrZSh0LGUsbil7aWYobi5vcGVuU3RhcnQ+dC5kZXB0aCl0aHJvdyBuZXcgeWUoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IHllKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gU2UodCxlLG4sMCl9ZnVuY3Rpb24gU2UodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPVNlKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1SZShuLHQpLGM9YS5zdGFydCxoPWEuZW5kO3JldHVybiBOZShpLEVlKHQsYyxoLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBOZShwLHUuY3V0KDAsdC5wYXJlbnRPZmZzZXQpLmFwcGVuZChuLmNvbnRlbnQpLmFwcGVuZCh1LmN1dChlLnBhcmVudE9mZnNldCkpKX1yZXR1cm4gTmUoaSxBZSh0LGUscikpfWZ1bmN0aW9uIE9lKHQsZSl7aWYoIWUudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpKXRocm93IG5ldyB5ZSgiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gQ2UodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gT2UocixlLm5vZGUobikpLHJ9ZnVuY3Rpb24gTWUodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBUZSh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihNZSh0Lm5vZGVBZnRlcixyKSxpKyspKTtmb3IodmFyIGE9aTthPHM7YSsrKU1lKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZNZShlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gTmUodCxlKXtpZighdC50eXBlLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgeWUoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIEVlKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZDZSh0LGUsbysxKSxzPXIuZGVwdGg+byYmQ2UobixyLG8rMSksYT1bXTtyZXR1cm4gVGUobnVsbCx0LG8sYSksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oT2UoaSxzKSxNZShOZShpLEVlKHQsZSxuLHIsbysxKSksYSkpOihpJiZNZShOZShpLEFlKHQsZSxvKzEpKSxhKSxUZShlLG4sbyxhKSxzJiZNZShOZShzLEFlKG4scixvKzEpKSxhKSksVGUocixudWxsLG8sYSksbmV3IHVlKGEpfWZ1bmN0aW9uIEFlKHQsZSxuKXt2YXIgcj1bXTtpZihUZShudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPUNlKHQsZSxuKzEpO01lKE5lKG8sQWUodCxlLG4rMSkpLHIpfXJldHVybiBUZShlLG51bGwsbixyKSxuZXcgdWUocil9ZnVuY3Rpb24gUmUodCxlKXtmb3IodmFyIG49ZS5kZXB0aC10Lm9wZW5TdGFydCxyPWUubm9kZShuKSxvPXIuY29weSh0LmNvbnRlbnQpLGk9bi0xO2k+PTA7aS0tKW89ZS5ub2RlKGkpLmNvcHkodWUuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX13ZS5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGdlLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUpe3ZhciBuPWJlKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBnZShuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGdlLnByb3RvdHlwZS5yZW1vdmVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBnZSh4ZSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxnZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpJiZ0aGlzLm9wZW5TdGFydD09dC5vcGVuU3RhcnQmJnRoaXMub3BlbkVuZD09dC5vcGVuRW5kfSxnZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sZ2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZ2UuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gZ2UuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBnZSh1ZS5mcm9tSlNPTih0LGUuY29udGVudCksZS5vcGVuU3RhcnR8fDAsZS5vcGVuRW5kfHwwKX0sZ2UubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGdlKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZ2UucHJvdG90eXBlLHdlKSxnZS5lbXB0eT1uZXcgZ2UodWUuZW1wdHksMCwwKTt2YXIgemU9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRGU9e3BhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxkb2M6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dE9mZnNldDp7Y29uZmlndXJhYmxlOiEwfSxub2RlQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUJlZm9yZTp7Y29uZmlndXJhYmxlOiEwfX07emUucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sRGUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LERlLmRvYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKDApfSx6ZS5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSx6ZS5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSx6ZS5wcm90b3R5cGUuaW5kZXhBZnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLmluZGV4KHQpKyh0IT10aGlzLmRlcHRofHx0aGlzLnRleHRPZmZzZXQ/MTowKX0semUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LHplLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSx6ZS5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGJlZm9yZSB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV19LHplLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LERlLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxEZS5ub2RlQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KHRoaXMuZGVwdGgpO2lmKGU9PXQuY2hpbGRDb3VudClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSxyPXQuY2hpbGQoZSk7cmV0dXJuIG4/dC5jaGlsZChlKS5jdXQobik6cn0sRGUubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LHplLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBtZS5ub25lO2lmKHRoaXMudGV4dE9mZnNldClyZXR1cm4gdC5jaGlsZChlKS5tYXJrczt2YXIgbj10Lm1heWJlQ2hpbGQoZS0xKSxyPXQubWF5YmVDaGlsZChlKTtpZighbil7dmFyIG89bjtuPXIscj1vfWZvcih2YXIgaT1uLm1hcmtzLHM9MDtzPGkubGVuZ3RoO3MrKykhMSE9PWlbc10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmaVtzXS5pc0luU2V0KHIubWFya3MpfHwoaT1pW3MtLV0ucmVtb3ZlRnJvbVNldChpKSk7cmV0dXJuIGl9LHplLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LHplLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSx6ZS5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMpLHQucG9zPHRoaXMucG9zKXJldHVybiB0LmJsb2NrUmFuZ2UodGhpcyk7Zm9yKHZhciBuPXRoaXMuZGVwdGgtKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnR8fHRoaXMucG9zPT10LnBvcz8xOjApO24+PTA7bi0tKWlmKHQucG9zPD10aGlzLmVuZChuKSYmKCFlfHxlKHRoaXMubm9kZShuKSkpKXJldHVybiBuZXcgRmUodGhpcyx0LG4pfSx6ZS5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSx6ZS5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvcz50aGlzLnBvcz90OnRoaXN9LHplLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30semUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LHplLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsaD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFoKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWgtMSxyKz1jKzF9cmV0dXJuIG5ldyB6ZShlLG4sbyl9LHplLnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEllLmxlbmd0aDtuKyspe3ZhciByPUllW25dO2lmKHIucG9zPT1lJiZyLmRvYz09dClyZXR1cm4gcn12YXIgbz1JZVtQZV09emUucmVzb2x2ZSh0LGUpO3JldHVybiBQZT0oUGUrMSklQmUsb30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoemUucHJvdG90eXBlLERlKTt2YXIgSWU9W10sUGU9MCxCZT0xMixGZT1mdW5jdGlvbih0LGUsbil7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWUsdGhpcy5kZXB0aD1ufSxqZT17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtqZS5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0samUuZW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5hZnRlcih0aGlzLmRlcHRoKzEpfSxqZS5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0samUuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0samUuZW5kSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEZlLnByb3RvdHlwZSxqZSk7dmFyIF9lPU9iamVjdC5jcmVhdGUobnVsbCksJGU9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHx1ZS5lbXB0eSx0aGlzLm1hcmtzPXJ8fG1lLm5vbmV9LEplPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07SmUubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sSmUuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnR9LCRlLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSwkZS5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LCRlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3RoaXMuY29udGVudC5mb3JFYWNoKHQpfSwkZS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sJGUucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEplLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsIiIpfSwkZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sSmUuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEplLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZH0sJGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSwkZS5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LCRlLnByb3RvdHlwZS5oYXNNYXJrdXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGU9PXQmJnZlKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fF9lKSYmbWUuc2FtZVNldCh0aGlzLm1hcmtzLG58fG1lLm5vbmUpfSwkZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sJGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLmNvbnRlbnQsdCl9LCRlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sJGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGdlLmVtcHR5O3ZhciByPXRoaXMucmVzb2x2ZSh0KSxvPXRoaXMucmVzb2x2ZShlKSxpPW4/MDpyLnNoYXJlZERlcHRoKGUpLHM9ci5zdGFydChpKSxhPXIubm9kZShpKSxjPWEuY29udGVudC5jdXQoci5wb3MtcyxvLnBvcy1zKTtyZXR1cm4gbmV3IGdlKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LCRlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4ga2UodGhpcy5yZXNvbHZlKHQpLHRoaXMucmVzb2x2ZShlKSxuKX0sJGUucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LCRlLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LCRlLnByb3RvdHlwZS5jaGlsZEJlZm9yZT1mdW5jdGlvbih0KXtpZigwPT10KXJldHVybntub2RlOm51bGwsaW5kZXg6MCxvZmZzZXQ6MH07dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtpZihyPHQpcmV0dXJue25vZGU6dGhpcy5jb250ZW50LmNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9O3ZhciBvPXRoaXMuY29udGVudC5jaGlsZChuLTEpO3JldHVybntub2RlOm8saW5kZXg6bi0xLG9mZnNldDpyLW8ubm9kZVNpemV9fSwkZS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gemUucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSwkZS5wcm90b3R5cGUucmVzb2x2ZU5vQ2FjaGU9ZnVuY3Rpb24odCl7cmV0dXJuIHplLnJlc29sdmUodGhpcyx0KX0sJGUucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sSmUuaXNCbG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQmxvY2t9LEplLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEplLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxKZS5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lfSxKZS5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEplLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sSmUuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNBdG9tfSwkZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksVmUodGhpcy5tYXJrcyx0KX0sJGUucHJvdG90eXBlLmNvbnRlbnRNYXRjaEF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsMCx0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxlZCBjb250ZW50TWF0Y2hBdCBvbiBhIG5vZGUgd2l0aCBpbnZhbGlkIGNvbnRlbnQiKTtyZXR1cm4gZX0sJGUucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj11ZS5lbXB0eSksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89bi5jaGlsZENvdW50KTt2YXIgaT10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoRnJhZ21lbnQobixyLG8pLHM9aSYmaS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtpZighc3x8IXMudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBhPXI7YTxvO2ErKylpZighdGhpcy50eXBlLmFsbG93c01hcmtzKG4uY2hpbGQoYSkubWFya3MpKXJldHVybiExO3JldHVybiEwfSwkZS5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSwkZS5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSwkZS5wcm90b3R5cGUuZGVmYXVsdENvbnRlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaEF0KHQpLmRlZmF1bHRUeXBlfSwkZS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sJGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LCRlLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPXVlLmZyb21KU09OKHQsZS5jb250ZW50KTtyZXR1cm4gdC5ub2RlVHlwZShlLnR5cGUpLmNyZWF0ZShlLmF0dHJzLHIsbil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCRlLnByb3RvdHlwZSxKZSk7dmFyIExlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7aWYodC5jYWxsKHRoaXMsZSxuLG51bGwsbyksIXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkVtcHR5IHRleHQgbm9kZXMgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy50ZXh0PXJ9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3RleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LG5vZGVTaXplOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZz90aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpOlZlKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oJGUpO2Z1bmN0aW9uIFZlKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pZT10W25dLnR5cGUubmFtZSsiKCIrZSsiKSI7cmV0dXJuIGV9dmFyIHFlPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LFdlPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cWUucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgSGUodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIHFlLmVtcHR5O3ZhciByPVVlKG4pO24ubmV4dCYmbi5lcnIoIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dCIpO3ZhciBvPW9uKGVuKHIpKTtyZXR1cm4gc24obyxuKSxvfSxxZS5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWlmKHRoaXMubmV4dFtlXT09dClyZXR1cm4gdGhpcy5uZXh0W2UrMV07cmV0dXJuIG51bGx9LHFlLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sV2UuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5leHRbMF07cmV0dXJuISF0JiZ0LmlzSW5saW5lfSxXZS5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMubmV4dC5sZW5ndGg7dCs9Mil7dmFyIGU9dGhpcy5uZXh0W3RdO2lmKCFlLmlzVGV4dCYmIWUuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiBlfX0scWUucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LHFlLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxzKXt2YXIgYT1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihhJiYoIWV8fGEudmFsaWRFbmQpKXJldHVybiB1ZS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgYz0wO2M8aS5uZXh0Lmxlbmd0aDtjKz0yKXt2YXIgaD1pLm5leHRbY10scD1pLm5leHRbYysxXTtpZighaC5pc1RleHQmJiFoLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZihwKSl7ci5wdXNoKHApO3ZhciB1PW8ocCxzLmNvbmNhdChoKSk7aWYodSlyZXR1cm4gdX19fXJldHVybiBvKHRoaXMsW10pfSxxZS5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxxZS5wcm90b3R5cGUuY29tcHV0ZVdyYXBwaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCksbj1be21hdGNoOnRoaXMsdHlwZTpudWxsLHZpYTpudWxsfV07d2hpbGUobi5sZW5ndGgpe3ZhciByPW4uc2hpZnQoKSxvPXIubWF0Y2g7aWYoby5tYXRjaFR5cGUodCkpe2Zvcih2YXIgaT1bXSxzPXI7cy50eXBlO3M9cy52aWEpaS5wdXNoKHMudHlwZSk7cmV0dXJuIGkucmV2ZXJzZSgpfWZvcih2YXIgYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV07Yy5pc0xlYWZ8fGMuaGFzUmVxdWlyZWRBdHRycygpfHxjLm5hbWUgaW4gZXx8ci50eXBlJiYhby5uZXh0W2ErMV0udmFsaWRFbmR8fChuLnB1c2goe21hdGNoOmMuY29udGVudE1hdGNoLHR5cGU6Yyx2aWE6cn0pLGVbYy5uYW1lXT0hMCl9fX0sV2UuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSxxZS5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0scWUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocWUucHJvdG90eXBlLFdlKSxxZS5lbXB0eT1uZXcgcWUoITApO3ZhciBIZT1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sS2U9e25leHQ6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFVlKHQpe3ZhciBlPVtdO2Rve2UucHVzaChHZSh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gR2UodCl7dmFyIGU9W107ZG97ZS5wdXNoKFhlKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gWGUodCl7Zm9yKHZhciBlPXRuKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVplKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gWWUodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIFplKHQsZSl7dmFyIG49WWUodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9ZZSh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBRZSh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIHRuKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPVVlKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVFlKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIGVuKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBoPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxoKSxvKGkodC5leHByLGgpLGgpLFtyKGgpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgZj1uKCk7byhpKHQuZXhwcixwKSxmKSxwPWZ9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGw9dC5taW47bDx0Lm1heDtsKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBubih0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gcm4odCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQobm4pO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiBvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKHJuKHQsMCkpO2Z1bmN0aW9uIG4ocil7dmFyIG89W107ci5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGVybSxyPWUudG87aWYobil7dmFyIGk9by5pbmRleE9mKG4pLHM9aT4tMSYmb1tpKzFdO3JuKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3IHFlKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQobm4pO2kubmV4dC5wdXNoKG9bc10sZVthLmpvaW4oIiwiKV18fG4oYSkpfXJldHVybiBpfX1mdW5jdGlvbiBzbih0LGUpe2Zvcih2YXIgbj0wLHI9W3RdO248ci5sZW5ndGg7bisrKXtmb3IodmFyIG89cltuXSxpPSFvLnZhbGlkRW5kLHM9W10sYT0wO2E8by5uZXh0Lmxlbmd0aDthKz0yKXt2YXIgYz1vLm5leHRbYV0saD1vLm5leHRbYSsxXTtzLnB1c2goYy5uYW1lKSwhaXx8Yy5pc1RleHR8fGMuaGFzUmVxdWlyZWRBdHRycygpfHwoaT0hMSksLTE9PXIuaW5kZXhPZihoKSYmci5wdXNoKGgpfWkmJmUuZXJyKCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoIitzLmpvaW4oIiwgIikrIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiIpfX1mdW5jdGlvbiBhbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKCFyLmhhc0RlZmF1bHQpcmV0dXJuIG51bGw7ZVtuXT1yLmRlZmF1bHR9cmV0dXJuIGV9ZnVuY3Rpb24gY24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0KXt2YXIgbz1lJiZlW3JdO2lmKHZvaWQgMD09PW8pe3ZhciBpPXRbcl07aWYoIWkuaGFzRGVmYXVsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSAiK3IpO289aS5kZWZhdWx0fW5bcl09b31yZXR1cm4gbn1mdW5jdGlvbiBobih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQpZm9yKHZhciBuIGluIHQpZVtuXT1uZXcgZm4odFtuXSk7cmV0dXJuIGV9S2UubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxIZS5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEhlLnByb3RvdHlwZS5lcnI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKHQrIiAoaW4gY29udGVudCBleHByZXNzaW9uICciK3RoaXMuc3RyaW5nKyInKSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIZS5wcm90b3R5cGUsS2UpO3ZhciBwbj1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPWhuKG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWFuKHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSx1bj17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07dW4uaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sdW4uaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSx1bi5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1xZS5lbXB0eX0sdW4uaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZnx8dGhpcy5zcGVjLmF0b219LHBuLnByb3RvdHlwZS5oYXNSZXF1aXJlZEF0dHJzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbZV0uaXNSZXF1aXJlZCYmKCF0fHwhKGUgaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxwbi5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxwbi5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpjbih0aGlzLmF0dHJzLHQpfSxwbi5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgJGUodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSx1ZS5mcm9tKGUpLG1lLnNldEZyb20obikpfSxwbi5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT11ZS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3ICRlKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSxtZS5zZXRGcm9tKG4pKX0scG4ucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT11ZS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZSh1ZS5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3ICRlKHRoaXMsdCxlLmFwcGVuZChvKSxtZS5zZXRGcm9tKG4pKTpudWxsfSxwbi5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIWV8fCFlLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5jaGlsZENvdW50O24rKylpZighdGhpcy5hbGxvd3NNYXJrcyh0LmNoaWxkKG4pLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0scG4ucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxwbi5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmFsbG93c01hcmtUeXBlKHRbZV0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LHBuLnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgZSxuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5hbGxvd3NNYXJrVHlwZSh0W25dLnR5cGUpP2UmJmUucHVzaCh0W25dKTplfHwoZT10LnNsaWNlKDAsbikpO3JldHVybiBlP2UubGVuZ3RoP2U6bWUuZW1wdHk6dH0scG4uY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBwbih0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwbi5wcm90b3R5cGUsdW4pO3ZhciBmbj1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxsbj17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07bG4uaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmbi5wcm90b3R5cGUsbG4pO3ZhciBkbj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9aG4oci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWFuKHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IG1lKHRoaXMsbyl9O2RuLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgbWUodGhpcyxjbih0aGlzLmF0dHJzLHQpKX0sZG4uY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCkscj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIG5bdF09bmV3IGRuKHQscisrLGUsbyl9KSksbn0sZG4ucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGRuLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdFtlXX0sZG4ucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciB2bj1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcGVjPXt9LHQpdGhpcy5zcGVjW2VdPXRbZV07dGhpcy5zcGVjLm5vZGVzPWNbImEiXS5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1jWyJhIl0uZnJvbSh0Lm1hcmtzKSx0aGlzLm5vZGVzPXBuLmNvbXBpbGUodGhpcy5zcGVjLm5vZGVzLHRoaXMpLHRoaXMubWFya3M9ZG4uY29tcGlsZSh0aGlzLnNwZWMubWFya3MsdGhpcyk7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdGhpcy5ub2Rlcyl7aWYociBpbiB0aGlzLm1hcmtzKXRocm93IG5ldyBSYW5nZUVycm9yKHIrIiBjYW4gbm90IGJlIGJvdGggYSBub2RlIGFuZCBhIG1hcmsiKTt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5zcGVjLmNvbnRlbnR8fCIiLHM9by5zcGVjLm1hcmtzO28uY29udGVudE1hdGNoPW5baV18fChuW2ldPXFlLnBhcnNlKGksdGhpcy5ub2RlcykpLG8uaW5saW5lQ29udGVudD1vLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LG8ubWFya1NldD0iXyI9PXM/bnVsbDpzP21uKHRoaXMscy5zcGxpdCgiICIpKToiIiE9cyYmby5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBhIGluIHRoaXMubWFya3Mpe3ZhciBoPXRoaXMubWFya3NbYV0scD1oLnNwZWMuZXhjbHVkZXM7aC5leGNsdWRlZD1udWxsPT1wP1toXToiIj09cD9bXTptbih0aGlzLHAuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIG1uKHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXZuLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBwbikpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHZuLnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgTGUobixuLmRlZmF1bHRBdHRycyx0LG1lLnNldEZyb20oZSkpfSx2bi5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5tYXJrc1t0XSksdC5jcmVhdGUoZSl9LHZuLnByb3RvdHlwZS5ub2RlRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuICRlLmZyb21KU09OKHRoaXMsdCl9LHZuLnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIG1lLmZyb21KU09OKHRoaXMsdCl9LHZuLnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIHluPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTt5bi5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IE1uKHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0seW4ucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IE1uKHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZ2UubWF4T3BlbihuLmZpbmlzaCgpKX0seW4ucHJvdG90eXBlLm1hdGNoVGFnPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLnRhZ3MubGVuZ3RoO24rKyl7dmFyIHI9dGhpcy50YWdzW25dO2lmKEVuKHQsci50YWcpJiYodm9pZCAwPT09ci5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1yLm5hbWVzcGFjZSkmJighci5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KHIuY29udGV4dCkpKXtpZihyLmdldEF0dHJzKXt2YXIgbz1yLmdldEF0dHJzKHQpO2lmKCExPT09byljb250aW51ZTtyLmF0dHJzPW99cmV0dXJuIHJ9fX0seW4ucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wO3I8dGhpcy5zdHlsZXMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5zdHlsZXNbcl07aWYoISgwIT1vLnN0eWxlLmluZGV4T2YodCl8fG8uY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KXx8by5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9by5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8by5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKGUpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0seW4uc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1Sbih0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PVJuKHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaSgpO3JldHVybiBlfSx5bi5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21QYXJzZXJ8fCh0LmNhY2hlZC5kb21QYXJzZXI9bmV3IHluKHQseW4uc2NoZW1hUnVsZXModCkpKX07dmFyIGduPXthZGRyZXNzOiEwLGFydGljbGU6ITAsYXNpZGU6ITAsYmxvY2txdW90ZTohMCxjYW52YXM6ITAsZGQ6ITAsZGl2OiEwLGRsOiEwLGZpZWxkc2V0OiEwLGZpZ2NhcHRpb246ITAsZmlndXJlOiEwLGZvb3RlcjohMCxmb3JtOiEwLGgxOiEwLGgyOiEwLGgzOiEwLGg0OiEwLGg1OiEwLGg2OiEwLGhlYWRlcjohMCxoZ3JvdXA6ITAsaHI6ITAsbGk6ITAsbm9zY3JpcHQ6ITAsb2w6ITAsb3V0cHV0OiEwLHA6ITAscHJlOiEwLHNlY3Rpb246ITAsdGFibGU6ITAsdGZvb3Q6ITAsdWw6ITB9LHduPXtoZWFkOiEwLG5vc2NyaXB0OiEwLG9iamVjdDohMCxzY3JpcHQ6ITAsc3R5bGU6ITAsdGl0bGU6ITB9LHhuPXtvbDohMCx1bDohMH0sYm49MSxrbj0yLFNuPTQ7ZnVuY3Rpb24gT24odCl7cmV0dXJuKHQ/Ym46MCl8KCJmdWxsIj09PXQ/a246MCl9dmFyIENuPWZ1bmN0aW9uKHQsZSxuLHIsbyxpKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1yLHRoaXMubWF0Y2g9b3x8KGkmU24/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPWksdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPW1lLm5vbmV9O0NuLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHVlLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSxDbi5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJmJuKSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj11ZS5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZSh1ZS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIE1uPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT1PbihlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/U246MCk7cj1vP25ldyBDbihvLnR5cGUsby5hdHRycyxtZS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IENuKG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLG1lLm5vbmUsITAsbnVsbCxpKSx0aGlzLm5vZGVzPVtyXSx0aGlzLm9wZW49MCx0aGlzLmZpbmQ9ZS5maW5kUG9zaXRpb25zLHRoaXMubmVlZHNCbG9jaz0hMX0sVG49e3RvcDp7Y29uZmlndXJhYmxlOiEwfSxjdXJyZW50UG9zOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBObih0KXtmb3IodmFyIGU9dC5maXJzdENoaWxkLG49bnVsbDtlO2U9ZS5uZXh0U2libGluZyl7dmFyIHI9MT09ZS5ub2RlVHlwZT9lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtyJiZ4bi5oYXNPd25Qcm9wZXJ0eShyKSYmbj8obi5hcHBlbmRDaGlsZChlKSxlPW4pOiJsaSI9PXI/bj1lOnImJihuPW51bGwpfX1mdW5jdGlvbiBFbih0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQubXNNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfWZ1bmN0aW9uIEFuKHQpe3ZhciBlLG49L1xzKihbXHctXSspXHMqOlxzKihbXjtdKykvZyxyPVtdO3doaWxlKGU9bi5leGVjKHQpKXIucHVzaChlWzFdLGVbMl0udHJpbSgpKTtyZXR1cm4gcn1mdW5jdGlvbiBSbih0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9VG4udG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LE1uLnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhBbihlKSk6bnVsbDtpZihudWxsIT1uKWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKXRoaXMuYWRkUGVuZGluZ01hcmsobltyXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhuW29dKX19LE1uLnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZibiluLm9wdGlvbnMma258fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sTW4ucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3huLmhhc093blByb3BlcnR5KGUpJiZObih0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6d24uaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZ24uaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sTW4ucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sTW4ucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW1lLm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LE1uLnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LE1uLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmZ24uaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0sTW4ucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSxNbi5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LE1uLnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGVuZGluZ01hcmtzW2VdO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShuLnR5cGUpfHxuLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPW4uYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUtLSwxKSl9fSxNbi5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LE1uLnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+U246T24ocik7by5vcHRpb25zJlNuJiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9U24pLHRoaXMubm9kZXMucHVzaChuZXcgQ24odCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30sTW4ucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSxNbi5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0sTW4ucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0sTW4ucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LE1uLnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxUbi5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0sTW4ucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LE1uLnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxNbi5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LE1uLnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LE1uLnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGg9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighaHx8aC5uYW1lIT1jJiYtMT09aC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sTW4ucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTW4ucHJvdG90eXBlLFRuKTt2YXIgem49ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGVzPXR8fHt9LHRoaXMubWFya3M9ZXx8e319O2Z1bmN0aW9uIERuKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dLnNwZWMudG9ET007ciYmKGVbbl09cil9cmV0dXJuIGV9ZnVuY3Rpb24gSW4odCl7cmV0dXJuIHQuZG9jdW1lbnR8fHdpbmRvdy5kb2N1bWVudH16bi5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPUluKGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSxoPXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7aCYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQoaC5kb20pLG89aC5jb250ZW50RE9NfHxoLmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LHpuLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPXpuLnJlbmRlclNwZWMoSW4oZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LHpuLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSx6bi5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZ6bi5yZW5kZXJTcGVjKEluKG4pLHIodCxlKSl9LHpuLnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgaD16bi5yZW5kZXJTcGVjKHQsYykscD1oLmRvbSx1PWguY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSx6bi5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgem4odGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sem4ubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPURuKHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LHpuLm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gRG4odC5tYXJrcyl9O3ZhciBQbj1PYmplY3QuY3JlYXRlKG51bGwpLEJuPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJhbmdlcz1ufHxbbmV3IGpuKHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSxGbj17YW5jaG9yOntjb25maWd1cmFibGU6ITB9LGhlYWQ6e2NvbmZpZ3VyYWJsZTohMH0sZnJvbTp7Y29uZmlndXJhYmxlOiEwfSx0bzp7Y29uZmlndXJhYmxlOiEwfSwkZnJvbTp7Y29uZmlndXJhYmxlOiEwfSwkdG86e2NvbmZpZ3VyYWJsZTohMH0sZW1wdHk6e2NvbmZpZ3VyYWJsZTohMH19O0ZuLmFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvc30sRm4uaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LEZuLmZyb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ucG9zfSxGbi50by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8ucG9zfSxGbi4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LEZuLiR0by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJHRvfSxGbi5lbXB0eS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yYW5nZXMsZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0uJGZyb20ucG9zIT10W2VdLiR0by5wb3MpcmV0dXJuITE7cmV0dXJuITB9LEJuLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LEJuLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9Z2UuZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLHI9bnVsbCxvPTA7bzxlLm9wZW5FbmQ7bysrKXI9bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgaT10LnN0ZXBzLmxlbmd0aCxzPXRoaXMucmFuZ2VzLGE9MDthPHMubGVuZ3RoO2ErKyl7dmFyIGM9c1thXSxoPWMuJGZyb20scD1jLiR0byx1PXQubWFwcGluZy5zbGljZShpKTt0LnJlcGxhY2VSYW5nZSh1Lm1hcChoLnBvcyksdS5tYXAocC5wb3MpLGE/Z2UuZW1wdHk6ZSksMD09YSYmSG4odCxpLChuP24uaXNJbmxpbmU6ciYmci5pc1RleHRibG9jayk/LTE6MSl9fSxCbi5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5zdGVwcy5sZW5ndGgscj10aGlzLnJhbmdlcyxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10scz1pLiRmcm9tLGE9aS4kdG8sYz10Lm1hcHBpbmcuc2xpY2UobiksaD1jLm1hcChzLnBvcykscD1jLm1hcChhLnBvcyk7bz90LmRlbGV0ZVJhbmdlKGgscCk6KHQucmVwbGFjZVJhbmdlV2l0aChoLHAsZSksSG4odCxuLGUuaXNJbmxpbmU/LTE6MSkpfX0sQm4uZmluZEZyb209ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQucGFyZW50LmlubGluZUNvbnRlbnQ/bmV3IF9uKHQpOlduKHQubm9kZSgwKSx0LnBhcmVudCx0LnBvcyx0LmluZGV4KCksZSxuKTtpZihyKXJldHVybiByO2Zvcih2YXIgbz10LmRlcHRoLTE7bz49MDtvLS0pe3ZhciBpPWU8MD9Xbih0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYmVmb3JlKG8rMSksdC5pbmRleChvKSxlLG4pOlduKHQubm9kZSgwKSx0Lm5vZGUobyksdC5hZnRlcihvKzEpLHQuaW5kZXgobykrMSxlLG4pO2lmKGkpcmV0dXJuIGl9fSxCbi5uZWFyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuZmluZEZyb20odCxlKXx8dGhpcy5maW5kRnJvbSh0LC1lKXx8bmV3IFZuKHQubm9kZSgwKSl9LEJuLmF0U3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFduKHQsdCwwLDAsMSl8fG5ldyBWbih0KX0sQm4uYXRFbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIFduKHQsdCx0LmNvbnRlbnQuc2l6ZSx0LmNoaWxkQ291bnQsLTEpfHxuZXcgVm4odCl9LEJuLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNlbGVjdGlvbi5mcm9tSlNPTiIpO3ZhciBuPVBuW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHNlbGVjdGlvbiB0eXBlICIrZS50eXBlKyIgZGVmaW5lZCIpO3JldHVybiBuLmZyb21KU09OKHQsZSl9LEJuLmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gUG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc2VsZWN0aW9uIEpTT04gSUQgIit0KTtyZXR1cm4gUG5bdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfSxCbi5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gX24uYmV0d2Vlbih0aGlzLiRhbmNob3IsdGhpcy4kaGVhZCkuZ2V0Qm9va21hcmsoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQm4ucHJvdG90eXBlLEZuKSxCbi5wcm90b3R5cGUudmlzaWJsZT0hMDt2YXIgam49ZnVuY3Rpb24odCxlKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZX0sX249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpLHQuY2FsbCh0aGlzLGUsbil9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49eyRjdXJzb3I6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLiRjdXJzb3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3M9PXRoaXMuJGhlYWQucG9zP3RoaXMuJGhlYWQ6bnVsbH0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89bi5yZXNvbHZlKHIubWFwKHRoaXMuaGVhZCkpO2lmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiB0Lm5lYXIobyk7dmFyIGk9bi5yZXNvbHZlKHIubWFwKHRoaXMuYW5jaG9yKSk7cmV0dXJuIG5ldyBlKGkucGFyZW50LmlubGluZUNvbnRlbnQ/aTpvLG8pfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49Z2UuZW1wdHkpLHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbiksbj09Z2UuZW1wdHkpe3ZhciByPXRoaXMuJGZyb20ubWFya3NBY3Jvc3ModGhpcy4kdG8pO3ImJmUuZW5zdXJlTWFya3Mocil9fSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuYW5jaG9yPT10aGlzLmFuY2hvciYmdC5oZWFkPT10aGlzLmhlYWR9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyAkbih0aGlzLmFuY2hvcix0aGlzLmhlYWQpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToidGV4dCIsYW5jaG9yOnRoaXMuYW5jaG9yLGhlYWQ6dGhpcy5oZWFkfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5hbmNob3J8fCJudW1iZXIiIT10eXBlb2Ygbi5oZWFkKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBUZXh0U2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvciksdC5yZXNvbHZlKG4uaGVhZCkpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dC5yZXNvbHZlKGUpO3JldHVybiBuZXcgdGhpcyhyLG49PWU/cjp0LnJlc29sdmUobikpfSxlLmJldHdlZW49ZnVuY3Rpb24obixyLG8pe3ZhciBpPW4ucG9zLXIucG9zO2lmKG8mJiFpfHwobz1pPj0wPzE6LTEpLCFyLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgcz10LmZpbmRGcm9tKHIsbywhMCl8fHQuZmluZEZyb20ociwtbywhMCk7aWYoIXMpcmV0dXJuIHQubmVhcihyLG8pO3I9cy4kaGVhZH1yZXR1cm4gbi5wYXJlbnQuaW5saW5lQ29udGVudHx8KDA9PWk/bj1yOihuPSh0LmZpbmRGcm9tKG4sLW8sITApfHx0LmZpbmRGcm9tKG4sbywhMCkpLiRhbmNob3Isbi5wb3M8ci5wb3MhPWk8MCYmKG49cikpKSxuZXcgZShuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShCbik7Qm4uanNvbklEKCJ0ZXh0Iixfbik7dmFyICRuPWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07JG4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3ICRuKHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0sJG4ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIF9uLmJldHdlZW4odC5yZXNvbHZlKHRoaXMuYW5jaG9yKSx0LnJlc29sdmUodGhpcy5oZWFkKSl9O3ZhciBKbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPWUubm9kZUFmdGVyLHI9ZS5ub2RlKDApLnJlc29sdmUoZS5wb3Mrbi5ub2RlU2l6ZSk7dC5jYWxsKHRoaXMsZSxyKSx0aGlzLm5vZGU9bn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89ci5tYXBSZXN1bHQodGhpcy5hbmNob3IpLGk9by5kZWxldGVkLHM9by5wb3MsYT1uLnJlc29sdmUocyk7cmV0dXJuIGk/dC5uZWFyKGEpOm5ldyBlKGEpfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnZSh1ZS5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgTG4odGhpcy5hbmNob3IpfSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZVNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHRoaXModC5yZXNvbHZlKGUpKX0sZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNUZXh0JiYhMSE9PXQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGV9KEJuKTtKbi5wcm90b3R5cGUudmlzaWJsZT0hMSxCbi5qc29uSUQoIm5vZGUiLEpuKTt2YXIgTG49ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07TG4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgZT10Lm1hcFJlc3VsdCh0aGlzLmFuY2hvciksbj1lLmRlbGV0ZWQscj1lLnBvcztyZXR1cm4gbj9uZXcgJG4ocixyKTpuZXcgTG4ocil9LExuLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzb2x2ZSh0aGlzLmFuY2hvciksbj1lLm5vZGVBZnRlcjtyZXR1cm4gbiYmSm4uaXNTZWxlY3RhYmxlKG4pP25ldyBKbihlKTpCbi5uZWFyKGUpfTt2YXIgVm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLnJlc29sdmUoMCksZS5yZXNvbHZlKGUuY29udGVudC5zaXplKSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJhbGwifX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gcW59LGV9KEJuKTtCbi5qc29uSUQoImFsbCIsVm4pO3ZhciBxbj17bWFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBWbih0KX19O2Z1bmN0aW9uIFduKHQsZSxuLHIsbyxpKXtpZihlLmlubGluZUNvbnRlbnQpcmV0dXJuIF9uLmNyZWF0ZSh0LG4pO2Zvcih2YXIgcz1yLShvPjA/MDoxKTtvPjA/czxlLmNoaWxkQ291bnQ6cz49MDtzKz1vKXt2YXIgYT1lLmNoaWxkKHMpO2lmKGEuaXNBdG9tKXtpZighaSYmSm4uaXNTZWxlY3RhYmxlKGEpKXJldHVybiBKbi5jcmVhdGUodCxuLShvPDA/YS5ub2RlU2l6ZTowKSl9ZWxzZXt2YXIgYz1Xbih0LGEsbitvLG88MD9hLmNoaWxkQ291bnQ6MCxvLGkpO2lmKGMpcmV0dXJuIGN9bis9YS5ub2RlU2l6ZSpvfX1mdW5jdGlvbiBIbih0LGUsbil7dmFyIHI9dC5zdGVwcy5sZW5ndGgtMTtpZighKHI8ZSkpe3ZhciBvPXQuc3RlcHNbcl07aWYobyBpbnN0YW5jZW9mIEl0WyJjIl18fG8gaW5zdGFuY2VvZiBJdFsiYiJdKXt2YXIgaSxzPXQubWFwcGluZy5tYXBzW3JdO3MuZm9yRWFjaCgoZnVuY3Rpb24odCxlLG4scil7bnVsbD09aSYmKGk9cil9KSksdC5zZXRTZWxlY3Rpb24oQm4ubmVhcih0LmRvYy5yZXNvbHZlKGkpLG4pKX19fXZhciBLbj0xLFVuPTIsR249NCxYbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUuZG9jKSx0aGlzLnRpbWU9RGF0ZS5ub3coKSx0aGlzLmN1clNlbGVjdGlvbj1lLnNlbGVjdGlvbix0aGlzLmN1clNlbGVjdGlvbkZvcj0wLHRoaXMuc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcyx0aGlzLnVwZGF0ZWQ9MCx0aGlzLm1ldGE9T2JqZWN0LmNyZWF0ZShudWxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2VsZWN0aW9uOntjb25maWd1cmFibGU6ITB9LHNlbGVjdGlvblNldDp7Y29uZmlndXJhYmxlOiEwfSxzdG9yZWRNYXJrc1NldDp7Y29uZmlndXJhYmxlOiEwfSxpc0dlbmVyaWM6e2NvbmZpZ3VyYWJsZTohMH0sc2Nyb2xsZWRJbnRvVmlldzp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uc2VsZWN0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1clNlbGVjdGlvbkZvcjx0aGlzLnN0ZXBzLmxlbmd0aCYmKHRoaXMuY3VyU2VsZWN0aW9uPXRoaXMuY3VyU2VsZWN0aW9uLm1hcCh0aGlzLmRvYyx0aGlzLm1hcHBpbmcuc2xpY2UodGhpcy5jdXJTZWxlY3Rpb25Gb3IpKSx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCksdGhpcy5jdXJTZWxlY3Rpb259LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0KXtpZih0LiRmcm9tLmRvYyE9dGhpcy5kb2MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNlbGVjdGlvbiBwYXNzZWQgdG8gc2V0U2VsZWN0aW9uIG11c3QgcG9pbnQgYXQgdGhlIGN1cnJlbnQgZG9jdW1lbnQiKTtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb249dCx0aGlzLmN1clNlbGVjdGlvbkZvcj10aGlzLnN0ZXBzLmxlbmd0aCx0aGlzLnVwZGF0ZWQ9KHRoaXMudXBkYXRlZHxLbikmflVuLHRoaXMuc3RvcmVkTWFya3M9bnVsbCx0aGlzfSxuLnNlbGVjdGlvblNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJktuKT4wfSxlLnByb3RvdHlwZS5zZXRTdG9yZWRNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdG9yZWRNYXJrcz10LHRoaXMudXBkYXRlZHw9VW4sdGhpc30sZS5wcm90b3R5cGUuZW5zdXJlTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIG1lLnNhbWVTZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGZyb20ubWFya3MoKSx0KXx8dGhpcy5zZXRTdG9yZWRNYXJrcyh0KSx0aGlzfSxlLnByb3RvdHlwZS5hZGRTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQuYWRkVG9TZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpfSxlLnByb3RvdHlwZS5yZW1vdmVTdG9yZWRNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuc3VyZU1hcmtzKHQucmVtb3ZlRnJvbVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LG4uc3RvcmVkTWFya3NTZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZVbik+MH0sZS5wcm90b3R5cGUuYWRkU3RlcD1mdW5jdGlvbihlLG4pe3QucHJvdG90eXBlLmFkZFN0ZXAuY2FsbCh0aGlzLGUsbiksdGhpcy51cGRhdGVkPXRoaXMudXBkYXRlZCZ+VW4sdGhpcy5zdG9yZWRNYXJrcz1udWxsfSxlLnByb3RvdHlwZS5zZXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRpbWU9dCx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUucmVwbGFjZVNlbGVjdGlvbldpdGg9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnNlbGVjdGlvbjtyZXR1cm4hMSE9PWUmJih0PXQubWFyayh0aGlzLnN0b3JlZE1hcmtzfHwobi5lbXB0eT9uLiRmcm9tLm1hcmtzKCk6bi4kZnJvbS5tYXJrc0Fjcm9zcyhuLiR0byl8fG1lLm5vbmUpKSksbi5yZXBsYWNlV2l0aCh0aGlzLHQpLHRoaXN9LGUucHJvdG90eXBlLmRlbGV0ZVNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMpLHRoaXN9LGUucHJvdG90eXBlLmluc2VydFRleHQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXRoaXMuZG9jLnR5cGUuc2NoZW1hO2lmKG51bGw9PWUpcmV0dXJuIHQ/dGhpcy5yZXBsYWNlU2VsZWN0aW9uV2l0aChyLnRleHQodCksITApOnRoaXMuZGVsZXRlU2VsZWN0aW9uKCk7aWYoIXQpcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UoZSxuKTt2YXIgbz10aGlzLnN0b3JlZE1hcmtzO2lmKCFvKXt2YXIgaT10aGlzLmRvYy5yZXNvbHZlKGUpO289bj09ZT9pLm1hcmtzKCk6aS5tYXJrc0Fjcm9zcyh0aGlzLmRvYy5yZXNvbHZlKG4pKX1yZXR1cm4gdGhpcy5yZXBsYWNlUmFuZ2VXaXRoKGUsbixyLnRleHQodCxvKSksdGhpcy5zZWxlY3Rpb24uZW1wdHl8fHRoaXMuc2V0U2VsZWN0aW9uKEJuLm5lYXIodGhpcy5zZWxlY3Rpb24uJHRvKSksdGhpc30sZS5wcm90b3R5cGUuc2V0TWV0YT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldPWUsdGhpc30sZS5wcm90b3R5cGUuZ2V0TWV0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XX0sbi5pc0dlbmVyaWMuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubWV0YSlyZXR1cm4hMTtyZXR1cm4hMH0sZS5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGVkfD1Hbix0aGlzfSxuLnNjcm9sbGVkSW50b1ZpZXcuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZHbik+MH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oSXRbImQiXSk7ZnVuY3Rpb24gWW4odCxlKXtyZXR1cm4gZSYmdD90LmJpbmQoZSk6dH12YXIgWm49ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuaW5pdD1ZbihlLmluaXQsbiksdGhpcy5hcHBseT1ZbihlLmFwcGx5LG4pfSxRbj1bbmV3IFpuKCJkb2MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY3x8dC5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N9fSksbmV3IFpuKCJzZWxlY3Rpb24iLHtpbml0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2VsZWN0aW9ufHxCbi5hdFN0YXJ0KGUuZG9jKX0sYXBwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2VsZWN0aW9ufX0pLG5ldyBabigic3RvcmVkTWFya3MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3JlZE1hcmtzfHxudWxsfSxhcHBseTpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gci5zZWxlY3Rpb24uJGN1cnNvcj90LnN0b3JlZE1hcmtzOm51bGx9fSksbmV3IFpuKCJzY3JvbGxUb1NlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sYXBwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zY3JvbGxlZEludG9WaWV3P2UrMTplfX0pXSx0cj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLmZpZWxkcz1Rbi5jb25jYXQoKSx0aGlzLnBsdWdpbnM9W10sdGhpcy5wbHVnaW5zQnlLZXk9T2JqZWN0LmNyZWF0ZShudWxsKSxlJiZlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4ucGx1Z2luc0J5S2V5W3Qua2V5XSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKCIrdC5rZXkrIikiKTtuLnBsdWdpbnMucHVzaCh0KSxuLnBsdWdpbnNCeUtleVt0LmtleV09dCx0LnNwZWMuc3RhdGUmJm4uZmllbGRzLnB1c2gobmV3IFpuKHQua2V5LHQuc3BlYy5zdGF0ZSx0KSl9KSl9LGVyPWZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXR9LG5yPXtzY2hlbWE6e2NvbmZpZ3VyYWJsZTohMH0scGx1Z2luczp7Y29uZmlndXJhYmxlOiEwfSx0cjp7Y29uZmlndXJhYmxlOiEwfX07bnIuc2NoZW1hLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5zY2hlbWF9LG5yLnBsdWdpbnMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnBsdWdpbnN9LGVyLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHQpLnN0YXRlfSxlci5wcm90b3R5cGUuZmlsdGVyVHJhbnNhY3Rpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0tMSk7Zm9yKHZhciBuPTA7bjx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtuKyspaWYobiE9ZSl7dmFyIHI9dGhpcy5jb25maWcucGx1Z2luc1tuXTtpZihyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24mJiFyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24uY2FsbChyLHQsdGhpcykpcmV0dXJuITF9cmV0dXJuITB9LGVyLnByb3RvdHlwZS5hcHBseVRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmZpbHRlclRyYW5zYWN0aW9uKHQpKXJldHVybntzdGF0ZTp0aGlzLHRyYW5zYWN0aW9uczpbXX07Zm9yKHZhciBlPVt0XSxuPXRoaXMuYXBwbHlJbm5lcih0KSxyPW51bGw7Oyl7Zm9yKHZhciBvPSExLGk9MDtpPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5jb25maWcucGx1Z2luc1tpXTtpZihzLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24pe3ZhciBhPXI/cltpXS5uOjAsYz1yP3JbaV0uc3RhdGU6dGhpcyxoPWE8ZS5sZW5ndGgmJnMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbi5jYWxsKHMsYT9lLnNsaWNlKGEpOmUsYyxuKTtpZihoJiZuLmZpbHRlclRyYW5zYWN0aW9uKGgsaSkpe2lmKGguc2V0TWV0YSgiYXBwZW5kZWRUcmFuc2FjdGlvbiIsdCksIXIpe3I9W107Zm9yKHZhciBwPTA7cDx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtwKyspci5wdXNoKHA8aT97c3RhdGU6bixuOmUubGVuZ3RofTp7c3RhdGU6dGhpcyxuOjB9KX1lLnB1c2goaCksbj1uLmFwcGx5SW5uZXIoaCksbz0hMH1yJiYocltpXT17c3RhdGU6bixuOmUubGVuZ3RofSl9fWlmKCFvKXJldHVybntzdGF0ZTpuLHRyYW5zYWN0aW9uczplfX19LGVyLnByb3RvdHlwZS5hcHBseUlubmVyPWZ1bmN0aW9uKHQpe2lmKCF0LmJlZm9yZS5lcSh0aGlzLmRvYykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFwcGx5aW5nIGEgbWlzbWF0Y2hlZCB0cmFuc2FjdGlvbiIpO2Zvcih2YXIgZT1uZXcgZXIodGhpcy5jb25maWcpLG49dGhpcy5jb25maWcuZmllbGRzLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtlW28ubmFtZV09by5hcHBseSh0LHRoaXNbby5uYW1lXSx0aGlzLGUpfWZvcih2YXIgaT0wO2k8cnIubGVuZ3RoO2krKylycltpXSh0aGlzLHQsZSk7cmV0dXJuIGV9LG5yLnRyLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgWG4odGhpcyl9LGVyLmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IHRyKHQuc2NoZW1hfHx0LmRvYy50eXBlLnNjaGVtYSx0LnBsdWdpbnMpLG49bmV3IGVyKGUpLHI9MDtyPGUuZmllbGRzLmxlbmd0aDtyKyspbltlLmZpZWxkc1tyXS5uYW1lXT1lLmZpZWxkc1tyXS5pbml0KHQsbik7cmV0dXJuIG59LGVyLnByb3RvdHlwZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IHRyKHQuc2NoZW1hfHx0aGlzLnNjaGVtYSx0LnBsdWdpbnMpLG49ZS5maWVsZHMscj1uZXcgZXIoZSksbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dLm5hbWU7cltpXT10aGlzLmhhc093blByb3BlcnR5KGkpP3RoaXNbaV06bltvXS5pbml0KHQscil9cmV0dXJuIHJ9LGVyLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7dmFyIGU9e2RvYzp0aGlzLmRvYy50b0pTT04oKSxzZWxlY3Rpb246dGhpcy5zZWxlY3Rpb24udG9KU09OKCl9O2lmKHRoaXMuc3RvcmVkTWFya3MmJihlLnN0b3JlZE1hcmtzPXRoaXMuc3RvcmVkTWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdCYmIm9iamVjdCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXtpZigiZG9jIj09bnx8InNlbGVjdGlvbiI9PW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSBKU09OIGZpZWxkcyBgZG9jYCBhbmQgYHNlbGVjdGlvbmAgYXJlIHJlc2VydmVkIik7dmFyIHI9dFtuXSxvPXIuc3BlYy5zdGF0ZTtvJiZvLnRvSlNPTiYmKGVbbl09by50b0pTT04uY2FsbChyLHRoaXNbci5rZXldKSl9cmV0dXJuIGV9LGVyLmZyb21KU09OPWZ1bmN0aW9uKHQsZSxuKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRWRpdG9yU3RhdGUuZnJvbUpTT04iKTtpZighdC5zY2hlbWEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlcXVpcmVkIGNvbmZpZyBmaWVsZCAnc2NoZW1hJyBtaXNzaW5nIik7dmFyIHI9bmV3IHRyKHQuc2NoZW1hLHQucGx1Z2lucyksbz1uZXcgZXIocik7cmV0dXJuIHIuZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKHIpe2lmKCJkb2MiPT1yLm5hbWUpby5kb2M9JGUuZnJvbUpTT04odC5zY2hlbWEsZS5kb2MpO2Vsc2UgaWYoInNlbGVjdGlvbiI9PXIubmFtZSlvLnNlbGVjdGlvbj1Cbi5mcm9tSlNPTihvLmRvYyxlLnNlbGVjdGlvbik7ZWxzZSBpZigic3RvcmVkTWFya3MiPT1yLm5hbWUpZS5zdG9yZWRNYXJrcyYmKG8uc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcy5tYXAodC5zY2hlbWEubWFya0Zyb21KU09OKSk7ZWxzZXtpZihuKWZvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldLGE9cy5zcGVjLnN0YXRlO2lmKHMua2V5PT1yLm5hbWUmJmEmJmEuZnJvbUpTT04mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXJldHVybiB2b2lkKG9bci5uYW1lXT1hLmZyb21KU09OLmNhbGwocyx0LGVbaV0sbykpfW9bci5uYW1lXT1yLmluaXQodCxvKX19KSksb30sZXIuYWRkQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXtyci5wdXNoKHQpfSxlci5yZW1vdmVBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXJyLmluZGV4T2YodCk7ZT4tMSYmcnIuc3BsaWNlKGUsMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGVyLnByb3RvdHlwZSxucik7dmFyIHJyPVtdO2Z1bmN0aW9uIG9yKHQsZSxuKXtmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXTtvIGluc3RhbmNlb2YgRnVuY3Rpb24/bz1vLmJpbmQoZSk6ImhhbmRsZURPTUV2ZW50cyI9PXImJihvPW9yKG8sZSx7fSkpLG5bcl09b31yZXR1cm4gbn12YXIgaXI9ZnVuY3Rpb24odCl7dGhpcy5wcm9wcz17fSx0LnByb3BzJiZvcih0LnByb3BzLHRoaXMsdGhpcy5wcm9wcyksdGhpcy5zcGVjPXQsdGhpcy5rZXk9dC5rZXk/dC5rZXkua2V5OmFyKCJwbHVnaW4iKX07aXIucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX07dmFyIHNyPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gYXIodCl7cmV0dXJuIHQgaW4gc3I/dCsiJCIrICsrc3JbdF06KHNyW3RdPTAsdCsiJCIpfXZhciBjcj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0ia2V5IiksdGhpcy5rZXk9YXIodCl9O2NyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29uZmlnLnBsdWdpbnNCeUtleVt0aGlzLmtleV19LGNyLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciBocj17fTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIHByPS9FZGdlXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSx1cj0vTVNJRSBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxmcj0vVHJpZGVudFwvKD86WzctOV18XGR7Mix9KVwuLipydjooXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtoci5tYWM9L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO3ZhciBscj1oci5pZT0hISh1cnx8ZnJ8fHByKTtoci5pZV92ZXJzaW9uPXVyP2RvY3VtZW50LmRvY3VtZW50TW9kZXx8Njpmcj8rZnJbMV06cHI/K3ByWzFdOm51bGwsaHIuZ2Vja289IWxyJiYvZ2Vja29cLyhcZCspL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxoci5nZWNrb192ZXJzaW9uPWhyLmdlY2tvJiYrKC9GaXJlZm94XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdO3ZhciBkcj0hbHImJi9DaHJvbWVcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO2hyLmNocm9tZT0hIWRyLGhyLmNocm9tZV92ZXJzaW9uPWRyJiYrZHJbMV0saHIuaW9zPSFsciYmL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvTW9iaWxlXC9cdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaHIuYW5kcm9pZD0vQW5kcm9pZCBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxoci53ZWJraXQ9IndlYmtpdEZvbnRTbW9vdGhpbmciaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLGhyLnNhZmFyaT0vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvciksaHIud2Via2l0X3ZlcnNpb249aHIud2Via2l0JiYrKC9cYkFwcGxlV2ViS2l0XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdfXZhciB2cj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDs7ZSsrKWlmKHQ9dC5wcmV2aW91c1NpYmxpbmcsIXQpcmV0dXJuIGV9LG1yPWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50Tm9kZTtyZXR1cm4gZSYmMTE9PWUubm9kZVR5cGU/ZS5ob3N0OmV9LHlyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiByLnNldEVuZCh0LG51bGw9PW4/dC5ub2RlVmFsdWUubGVuZ3RoOm4pLHIuc2V0U3RhcnQodCxlfHwwKSxyfSxncj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbiYmKHhyKHQsZSxuLHIsLTEpfHx4cih0LGUsbixyLDEpKX0sd3I9L14oaW1nfGJyfGlucHV0fHRleHRhcmVhfGhyKSQvaTtmdW5jdGlvbiB4cih0LGUsbixyLG8pe2Zvcig7Oyl7aWYodD09biYmZT09cilyZXR1cm4hMDtpZihlPT0obzwwPzA6YnIodCkpKXt2YXIgaT10LnBhcmVudE5vZGU7aWYoMSE9aS5ub2RlVHlwZXx8U3IodCl8fHdyLnRlc3QodC5ub2RlTmFtZSl8fCJmYWxzZSI9PXQuY29udGVudEVkaXRhYmxlKXJldHVybiExO2U9dnIodCkrKG88MD8wOjEpLHQ9aX1lbHNle2lmKDEhPXQubm9kZVR5cGUpcmV0dXJuITE7aWYodD10LmNoaWxkTm9kZXNbZSsobzwwPy0xOjApXSwiZmFsc2UiPT10LmNvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMTtlPW88MD9icih0KTowfX19ZnVuY3Rpb24gYnIodCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24ga3IodCxlLG4pe2Zvcih2YXIgcj0wPT1lLG89ZT09YnIodCk7cnx8bzspe2lmKHQ9PW4pcmV0dXJuITA7dmFyIGk9dnIodCk7aWYodD10LnBhcmVudE5vZGUsIXQpcmV0dXJuITE7cj1yJiYwPT1pLG89byYmaT09YnIodCl9fWZ1bmN0aW9uIFNyKHQpe2Zvcih2YXIgZSxuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihlPW4ucG1WaWV3RGVzYylicmVhaztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9jayYmKGUuZG9tPT10fHxlLmNvbnRlbnRET009PXQpfXZhciBPcj1mdW5jdGlvbih0KXt2YXIgZT10LmlzQ29sbGFwc2VkO3JldHVybiBlJiZoci5jaHJvbWUmJnQucmFuZ2VDb3VudCYmIXQuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQmJihlPSExKSxlfTtmdW5jdGlvbiBDcih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpO3JldHVybiBuLmluaXRFdmVudCgia2V5ZG93biIsITAsITApLG4ua2V5Q29kZT10LG4ua2V5PW4uY29kZT1lLG59ZnVuY3Rpb24gTXIodCl7cmV0dXJue2xlZnQ6MCxyaWdodDp0LmlubmVyV2lkdGgsdG9wOjAsYm90dG9tOnQuaW5uZXJIZWlnaHR9fWZ1bmN0aW9uIFRyKHQsZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P3Q6dFtlXX1mdW5jdGlvbiBOcih0LGUsbil7Zm9yKHZhciByPXQuc29tZVByb3AoInNjcm9sbFRocmVzaG9sZCIpfHwwLG89dC5zb21lUHJvcCgic2Nyb2xsTWFyZ2luIil8fDUsaT10LmRvbS5vd25lckRvY3VtZW50LHM9aS5kZWZhdWx0VmlldyxhPW58fHQuZG9tOzthPW1yKGEpKXtpZighYSlicmVhaztpZigxPT1hLm5vZGVUeXBlKXt2YXIgYz1hPT1pLmJvZHl8fDEhPWEubm9kZVR5cGUsaD1jP01yKHMpOmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscD0wLHU9MDtpZihlLnRvcDxoLnRvcCtUcihyLCJ0b3AiKT91PS0oaC50b3AtZS50b3ArVHIobywidG9wIikpOmUuYm90dG9tPmguYm90dG9tLVRyKHIsImJvdHRvbSIpJiYodT1lLmJvdHRvbS1oLmJvdHRvbStUcihvLCJib3R0b20iKSksZS5sZWZ0PGgubGVmdCtUcihyLCJsZWZ0Iik/cD0tKGgubGVmdC1lLmxlZnQrVHIobywibGVmdCIpKTplLnJpZ2h0PmgucmlnaHQtVHIociwicmlnaHQiKSYmKHA9ZS5yaWdodC1oLnJpZ2h0K1RyKG8sInJpZ2h0IikpLHB8fHUpaWYoYylzLnNjcm9sbEJ5KHAsdSk7ZWxzZXt2YXIgZj1hLnNjcm9sbExlZnQsbD1hLnNjcm9sbFRvcDt1JiYoYS5zY3JvbGxUb3ArPXUpLHAmJihhLnNjcm9sbExlZnQrPXApO3ZhciBkPWEuc2Nyb2xsTGVmdC1mLHY9YS5zY3JvbGxUb3AtbDtlPXtsZWZ0OmUubGVmdC1kLHRvcDplLnRvcC12LHJpZ2h0OmUucmlnaHQtZCxib3R0b206ZS5ib3R0b20tdn19aWYoYylicmVha319fWZ1bmN0aW9uIEVyKHQpe2Zvcih2YXIgZSxuLHI9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1NYXRoLm1heCgwLHIudG9wKSxpPShyLmxlZnQrci5yaWdodCkvMixzPW8rMTtzPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTtzKz01KXt2YXIgYT10LnJvb3QuZWxlbWVudEZyb21Qb2ludChpLHMpO2lmKGEhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhhKSl7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihjLnRvcD49by0yMCl7ZT1hLG49Yy50b3A7YnJlYWt9fX1yZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6QXIodC5kb20pfX1mdW5jdGlvbiBBcih0KXtmb3IodmFyIGU9W10sbj10Lm93bmVyRG9jdW1lbnQ7dDt0PW1yKHQpKWlmKGUucHVzaCh7ZG9tOnQsdG9wOnQuc2Nyb2xsVG9wLGxlZnQ6dC5zY3JvbGxMZWZ0fSksdD09bilicmVhaztyZXR1cm4gZX1mdW5jdGlvbiBScih0KXt2YXIgZT10LnJlZkRPTSxuPXQucmVmVG9wLHI9dC5zdGFjayxvPWU/ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A6MDt6cihyLDA9PW8/MDpvLW4pfWZ1bmN0aW9uIHpyKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0sbz1yLmRvbSxpPXIudG9wLHM9ci5sZWZ0O28uc2Nyb2xsVG9wIT1pK2UmJihvLnNjcm9sbFRvcD1pK2UpLG8uc2Nyb2xsTGVmdCE9cyYmKG8uc2Nyb2xsTGVmdD1zKX19dmFyIERyPW51bGw7ZnVuY3Rpb24gSXIodCl7aWYodC5zZXRBY3RpdmUpcmV0dXJuIHQuc2V0QWN0aXZlKCk7aWYoRHIpcmV0dXJuIHQuZm9jdXMoRHIpO3ZhciBlPUFyKHQpO3QuZm9jdXMobnVsbD09RHI/e2dldCBwcmV2ZW50U2Nyb2xsKCl7cmV0dXJuIERyPXtwcmV2ZW50U2Nyb2xsOiEwfSwhMH19OnZvaWQgMCksRHJ8fChEcj0hMSx6cihlLDApKX1mdW5jdGlvbiBQcih0LGUpe2Zvcih2YXIgbixyLG89MmU4LGk9MCxzPWUudG9wLGE9ZS50b3AsYz10LmZpcnN0Q2hpbGQsaD0wO2M7Yz1jLm5leHRTaWJsaW5nLGgrKyl7dmFyIHA9dm9pZCAwO2lmKDE9PWMubm9kZVR5cGUpcD1jLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1jLm5vZGVUeXBlKWNvbnRpbnVlO3A9eXIoYykuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIHU9MDt1PHAubGVuZ3RoO3UrKyl7dmFyIGY9cFt1XTtpZihmLnRvcDw9cyYmZi5ib3R0b20+PWEpe3M9TWF0aC5tYXgoZi5ib3R0b20scyksYT1NYXRoLm1pbihmLnRvcCxhKTt2YXIgbD1mLmxlZnQ+ZS5sZWZ0P2YubGVmdC1lLmxlZnQ6Zi5yaWdodDxlLmxlZnQ/ZS5sZWZ0LWYucmlnaHQ6MDtpZihsPG8pe249YyxvPWwscj1sJiYzPT1uLm5vZGVUeXBlP3tsZWZ0OmYucmlnaHQ8ZS5sZWZ0P2YucmlnaHQ6Zi5sZWZ0LHRvcDplLnRvcH06ZSwxPT1jLm5vZGVUeXBlJiZsJiYoaT1oKyhlLmxlZnQ+PShmLmxlZnQrZi5yaWdodCkvMj8xOjApKTtjb250aW51ZX19IW4mJihlLmxlZnQ+PWYucmlnaHQmJmUudG9wPj1mLnRvcHx8ZS5sZWZ0Pj1mLmxlZnQmJmUudG9wPj1mLmJvdHRvbSkmJihpPWgrMSl9fXJldHVybiBuJiYzPT1uLm5vZGVUeXBlP0JyKG4scik6IW58fG8mJjE9PW4ubm9kZVR5cGU/e25vZGU6dCxvZmZzZXQ6aX06UHIobixyKX1mdW5jdGlvbiBCcih0LGUpe2Zvcih2YXIgbj10Lm5vZGVWYWx1ZS5sZW5ndGgscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLG89MDtvPG47bysrKXtyLnNldEVuZCh0LG8rMSksci5zZXRTdGFydCh0LG8pO3ZhciBpPVZyKHIsMSk7aWYoaS50b3AhPWkuYm90dG9tJiZGcihlLGkpKXJldHVybntub2RlOnQsb2Zmc2V0Om8rKGUubGVmdD49KGkubGVmdCtpLnJpZ2h0KS8yPzE6MCl9fXJldHVybntub2RlOnQsb2Zmc2V0OjB9fWZ1bmN0aW9uIEZyKHQsZSl7cmV0dXJuIHQubGVmdD49ZS5sZWZ0LTEmJnQubGVmdDw9ZS5yaWdodCsxJiZ0LnRvcD49ZS50b3AtMSYmdC50b3A8PWUuYm90dG9tKzF9ZnVuY3Rpb24ganIodCxlKXt2YXIgbj10LnBhcmVudE5vZGU7cmV0dXJuIG4mJi9ebGkkL2kudGVzdChuLm5vZGVOYW1lKSYmZS5sZWZ0PHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdD9uOnR9ZnVuY3Rpb24gX3IodCxlLG4pe3ZhciByPVByKGUsbiksbz1yLm5vZGUsaT1yLm9mZnNldCxzPS0xO2lmKDE9PW8ubm9kZVR5cGUmJiFvLmZpcnN0Q2hpbGQpe3ZhciBhPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cz1hLmxlZnQhPWEucmlnaHQmJm4ubGVmdD4oYS5sZWZ0K2EucmlnaHQpLzI/MTotMX1yZXR1cm4gdC5kb2NWaWV3LnBvc0Zyb21ET00obyxpLHMpfWZ1bmN0aW9uICRyKHQsZSxuLHIpe2Zvcih2YXIgbz0tMSxpPWU7Oyl7aWYoaT09dC5kb20pYnJlYWs7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGksITApO2lmKCFzKXJldHVybiBudWxsO2lmKHMubm9kZS5pc0Jsb2NrJiZzLnBhcmVudCl7dmFyIGE9cy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoYS5sZWZ0PnIubGVmdHx8YS50b3A+ci50b3Apbz1zLnBvc0JlZm9yZTtlbHNle2lmKCEoYS5yaWdodDxyLmxlZnR8fGEuYm90dG9tPHIudG9wKSlicmVhaztvPXMucG9zQWZ0ZXJ9fWk9cy5kb20ucGFyZW50Tm9kZX1yZXR1cm4gbz4tMT9vOnQuZG9jVmlldy5wb3NGcm9tRE9NKGUsbil9ZnVuY3Rpb24gSnIodCxlLG4pe3ZhciByPXQuY2hpbGROb2Rlcy5sZW5ndGg7aWYociYmbi50b3A8bi5ib3R0b20pZm9yKHZhciBvPU1hdGgubWF4KDAsTWF0aC5taW4oci0xLE1hdGguZmxvb3IociooZS50b3Atbi50b3ApLyhuLmJvdHRvbS1uLnRvcCkpLTIpKSxpPW87Oyl7dmFyIHM9dC5jaGlsZE5vZGVzW2ldO2lmKDE9PXMubm9kZVR5cGUpZm9yKHZhciBhPXMuZ2V0Q2xpZW50UmVjdHMoKSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBoPWFbY107aWYoRnIoZSxoKSlyZXR1cm4gSnIocyxlLGgpfWlmKChpPShpKzEpJXIpPT1vKWJyZWFrfXJldHVybiB0fWZ1bmN0aW9uIExyKHQsZSl7dmFyIG4scixvLGkscz10LnJvb3Q7aWYocy5jYXJldFBvc2l0aW9uRnJvbVBvaW50KXRyeXt2YXIgYT1zLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTthJiYobj1hLG89bi5vZmZzZXROb2RlLGk9bi5vZmZzZXQpfWNhdGNoKHYpe31pZighbyYmcy5jYXJldFJhbmdlRnJvbVBvaW50KXt2YXIgYz1zLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTtjJiYocj1jLG89ci5zdGFydENvbnRhaW5lcixpPXIuc3RhcnRPZmZzZXQpfXZhciBoLHA9cy5lbGVtZW50RnJvbVBvaW50KGUubGVmdCxlLnRvcCsxKTtpZighcHx8IXQuZG9tLmNvbnRhaW5zKDEhPXAubm9kZVR5cGU/cC5wYXJlbnROb2RlOnApKXt2YXIgdT10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZighRnIoZSx1KSlyZXR1cm4gbnVsbDtpZihwPUpyKHQuZG9tLGUsdSksIXApcmV0dXJuIG51bGx9aWYocD1qcihwLGUpLG8pe2lmKGhyLmdlY2tvJiYxPT1vLm5vZGVUeXBlJiYoaT1NYXRoLm1pbihpLG8uY2hpbGROb2Rlcy5sZW5ndGgpLGk8by5jaGlsZE5vZGVzLmxlbmd0aCkpe3ZhciBmLGw9by5jaGlsZE5vZGVzW2ldOyJJTUciPT1sLm5vZGVOYW1lJiYoZj1sLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS5yaWdodDw9ZS5sZWZ0JiZmLmJvdHRvbT5lLnRvcCYmaSsrfW89PXQuZG9tJiZpPT1vLmNoaWxkTm9kZXMubGVuZ3RoLTEmJjE9PW8ubGFzdENoaWxkLm5vZGVUeXBlJiZlLnRvcD5vLmxhc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20/aD10LnN0YXRlLmRvYy5jb250ZW50LnNpemU6MCE9aSYmMT09by5ub2RlVHlwZSYmIkJSIj09by5jaGlsZE5vZGVzW2ktMV0ubm9kZU5hbWV8fChoPSRyKHQsbyxpLGUpKX1udWxsPT1oJiYoaD1fcih0LHAsZSkpO3ZhciBkPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhwLCEwKTtyZXR1cm57cG9zOmgsaW5zaWRlOmQ/ZC5wb3NBdFN0YXJ0LWQuYm9yZGVyOi0xfX1mdW5jdGlvbiBWcih0LGUpe3ZhciBuPXQuZ2V0Q2xpZW50UmVjdHMoKTtyZXR1cm4gbi5sZW5ndGg/bltlPDA/MDpuLmxlbmd0aC0xXTp0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIHFyKHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldDtpZigzPT1yLm5vZGVUeXBlJiYoaHIud2Via2l0fHxoci5nZWNrbykpe3ZhciBpPVZyKHlyKHIsbyxvKSwwKTtpZihoci5nZWNrbyYmbyYmL1xzLy50ZXN0KHIubm9kZVZhbHVlW28tMV0pJiZvPHIubm9kZVZhbHVlLmxlbmd0aCl7dmFyIHM9VnIoeXIocixvLTEsby0xKSwtMSk7aWYocy50b3A9PWkudG9wKXt2YXIgYT1Wcih5cihyLG8sbysxKSwtMSk7aWYoYS50b3AhPWkudG9wKXJldHVybiBXcihhLGEubGVmdDxzLmxlZnQpfX1yZXR1cm4gaX1pZigxPT1yLm5vZGVUeXBlJiYhdC5zdGF0ZS5kb2MucmVzb2x2ZShlKS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGMsaD0hMDtpZihvPHIuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBwPXIuY2hpbGROb2Rlc1tvXTsxPT1wLm5vZGVUeXBlJiYoYz1wLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1pZighYyYmbyl7dmFyIHU9ci5jaGlsZE5vZGVzW28tMV07MT09dS5ub2RlVHlwZSYmKGM9dS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxoPSExKX1yZXR1cm4gSHIoY3x8ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxoKX1mb3IodmFyIGY9LTE7ZjwyO2YrPTIpaWYoZjwwJiZvKXt2YXIgbD12b2lkIDAsZD0zPT1yLm5vZGVUeXBlP3lyKHIsby0xLG8pOjM9PShsPXIuY2hpbGROb2Rlc1tvLTFdKS5ub2RlVHlwZT95cihsKToxPT1sLm5vZGVUeXBlJiYiQlIiIT1sLm5vZGVOYW1lP2w6bnVsbDtpZihkKXt2YXIgdj1WcihkLDEpO2lmKHYudG9wPHYuYm90dG9tKXJldHVybiBXcih2LCExKX19ZWxzZSBpZihmPjAmJm88YnIocikpe3ZhciBtPXZvaWQgMCx5PTM9PXIubm9kZVR5cGU/eXIocixvLG8rMSk6Mz09KG09ci5jaGlsZE5vZGVzW29dKS5ub2RlVHlwZT95cihtKToxPT1tLm5vZGVUeXBlP206bnVsbDtpZih5KXt2YXIgZz1Wcih5LC0xKTtpZihnLnRvcDxnLmJvdHRvbSlyZXR1cm4gV3IoZywhMCl9fXJldHVybiBXcihWcigzPT1yLm5vZGVUeXBlP3lyKHIpOnIsMCksITEpfWZ1bmN0aW9uIFdyKHQsZSl7aWYoMD09dC53aWR0aClyZXR1cm4gdDt2YXIgbj1lP3QubGVmdDp0LnJpZ2h0O3JldHVybnt0b3A6dC50b3AsYm90dG9tOnQuYm90dG9tLGxlZnQ6bixyaWdodDpufX1mdW5jdGlvbiBIcih0LGUpe2lmKDA9PXQuaGVpZ2h0KXJldHVybiB0O3ZhciBuPWU/dC50b3A6dC5ib3R0b207cmV0dXJue3RvcDpuLGJvdHRvbTpuLGxlZnQ6dC5sZWZ0LHJpZ2h0OnQucmlnaHR9fWZ1bmN0aW9uIEtyKHQsZSxuKXt2YXIgcj10LnN0YXRlLG89dC5yb290LmFjdGl2ZUVsZW1lbnQ7ciE9ZSYmdC51cGRhdGVTdGF0ZShlKSxvIT10LmRvbSYmdC5mb2N1cygpO3RyeXtyZXR1cm4gbigpfWZpbmFsbHl7ciE9ZSYmdC51cGRhdGVTdGF0ZShyKSxvIT10LmRvbSYmby5mb2N1cygpfX1mdW5jdGlvbiBVcih0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz0idXAiPT1uP3IuJGFuY2hvci5taW4oci4kaGVhZCk6ci4kYW5jaG9yLm1heChyLiRoZWFkKTtyZXR1cm4gS3IodCxlLChmdW5jdGlvbigpe2Zvcih2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyhvLnBvcykscj1lLm5vZGU7Oyl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHIsITApO2lmKCFpKWJyZWFrO2lmKGkubm9kZS5pc0Jsb2NrKXtyPWkuZG9tO2JyZWFrfXI9aS5kb20ucGFyZW50Tm9kZX1mb3IodmFyIHM9cXIodCxvLnBvcyksYT1yLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe3ZhciBjPXZvaWQgMDtpZigxPT1hLm5vZGVUeXBlKWM9YS5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9YS5ub2RlVHlwZSljb250aW51ZTtjPXlyKGEsMCxhLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciBoPTA7aDxjLmxlbmd0aDtoKyspe3ZhciBwPWNbaF07aWYocC5ib3R0b20+cC50b3AmJigidXAiPT1uP3AuYm90dG9tPHMudG9wKzE6cC50b3A+cy5ib3R0b20tMSkpcmV0dXJuITF9fXJldHVybiEwfSkpfXZhciBHcj0vW1x1MDU5MC1cdTA4YWNdLztmdW5jdGlvbiBYcih0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRoZWFkO2lmKCFvLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgaT1vLnBhcmVudE9mZnNldCxzPSFpLGE9aT09by5wYXJlbnQuY29udGVudC5zaXplLGM9Z2V0U2VsZWN0aW9uKCk7cmV0dXJuIEdyLnRlc3Qoby5wYXJlbnQudGV4dENvbnRlbnQpJiZjLm1vZGlmeT9Lcih0LGUsKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRSYW5nZUF0KDApLHI9Yy5mb2N1c05vZGUsaT1jLmZvY3VzT2Zmc2V0LHM9Yy5jYXJldEJpZGlMZXZlbDtjLm1vZGlmeSgibW92ZSIsbiwiY2hhcmFjdGVyIik7dmFyIGE9by5kZXB0aD90LmRvY1ZpZXcuZG9tQWZ0ZXJQb3Moby5iZWZvcmUoKSk6dC5kb20saD0hYS5jb250YWlucygxPT1jLmZvY3VzTm9kZS5ub2RlVHlwZT9jLmZvY3VzTm9kZTpjLmZvY3VzTm9kZS5wYXJlbnROb2RlKXx8cj09Yy5mb2N1c05vZGUmJmk9PWMuZm9jdXNPZmZzZXQ7cmV0dXJuIGMucmVtb3ZlQWxsUmFuZ2VzKCksYy5hZGRSYW5nZShlKSxudWxsIT1zJiYoYy5jYXJldEJpZGlMZXZlbD1zKSxofSkpOiJsZWZ0Ij09bnx8ImJhY2t3YXJkIj09bj9zOmF9dmFyIFlyPW51bGwsWnI9bnVsbCxRcj0hMTtmdW5jdGlvbiB0byh0LGUsbil7cmV0dXJuIFlyPT1lJiZacj09bj9RcjooWXI9ZSxacj1uLFFyPSJ1cCI9PW58fCJkb3duIj09bj9Vcih0LGUsbik6WHIodCxlLG4pKX12YXIgZW89MCxubz0xLHJvPTIsb289Myxpbz1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRyZW49ZSx0aGlzLmRvbT1uLG4ucG1WaWV3RGVzYz10aGlzLHRoaXMuY29udGVudERPTT1yLHRoaXMuZGlydHk9ZW99LHNvPXtiZWZvcmVQb3NpdGlvbjp7Y29uZmlndXJhYmxlOiEwfSxzaXplOntjb25maWd1cmFibGU6ITB9LGJvcmRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH0scG9zQXRTdGFydDp7Y29uZmlndXJhYmxlOiEwfSxwb3NBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NBdEVuZDp7Y29uZmlndXJhYmxlOiEwfSxjb250ZW50TG9zdDp7Y29uZmlndXJhYmxlOiEwfX07aW8ucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0saW8ucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGlvLnByb3RvdHlwZS5tYXRjaGVzTm9kZT1mdW5jdGlvbigpe3JldHVybiExfSxpby5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc28uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGlvLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saW8ucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbigpe3JldHVybiExfSxzby5zaXplLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl0Kz10aGlzLmNoaWxkcmVuW2VdLnNpemU7cmV0dXJuIHR9LHNvLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0saW8ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9PXRoaXMmJih0aGlzLmRvbS5wbVZpZXdEZXNjPW51bGwpO2Zvcih2YXIgdD0wO3Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7dCsrKXRoaXMuY2hpbGRyZW5bdF0uZGVzdHJveSgpfSxpby5wcm90b3R5cGUucG9zQmVmb3JlQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBvc0F0U3RhcnQ7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY2hpbGRyZW5bZV07aWYocj09dClyZXR1cm4gbjtuKz1yLnNpemV9fSxzby5wb3NCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpfSxzby5wb3NBdFN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnBhcmVudC5wb3NCZWZvcmVDaGlsZCh0aGlzKSt0aGlzLmJvcmRlcjowfSxzby5wb3NBZnRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NCZWZvcmUrdGhpcy5zaXplfSxzby5wb3NBdEVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NBdFN0YXJ0K3RoaXMuc2l6ZS0yKnRoaXMuYm9yZGVyfSxpby5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKSl7aWYobjwwKXt2YXIgcixvO2lmKHQ9PXRoaXMuY29udGVudERPTSlyPXQuY2hpbGROb2Rlc1tlLTFdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7cj10LnByZXZpb3VzU2libGluZ313aGlsZShyJiYoIShvPXIucG1WaWV3RGVzYyl8fG8ucGFyZW50IT10aGlzKSlyPXIucHJldmlvdXNTaWJsaW5nO3JldHVybiByP3RoaXMucG9zQmVmb3JlQ2hpbGQobykrby5zaXplOnRoaXMucG9zQXRTdGFydH12YXIgaSxzO2lmKHQ9PXRoaXMuY29udGVudERPTSlpPXQuY2hpbGROb2Rlc1tlXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO2k9dC5uZXh0U2libGluZ313aGlsZShpJiYoIShzPWkucG1WaWV3RGVzYyl8fHMucGFyZW50IT10aGlzKSlpPWkubmV4dFNpYmxpbmc7cmV0dXJuIGk/dGhpcy5wb3NCZWZvcmVDaGlsZChzKTp0aGlzLnBvc0F0RW5kfXZhciBhO2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSlhPTImdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmNvbnRlbnRET00pO2Vsc2UgaWYodGhpcy5kb20uZmlyc3RDaGlsZCl7aWYoMD09ZSlmb3IodmFyIGM9dDs7Yz1jLnBhcmVudE5vZGUpe2lmKGM9PXRoaXMuZG9tKXthPSExO2JyZWFrfWlmKGMucGFyZW50Tm9kZS5maXJzdENoaWxkIT1jKWJyZWFrfWlmKG51bGw9PWEmJmU9PXQuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciBoPXQ7O2g9aC5wYXJlbnROb2RlKXtpZihoPT10aGlzLmRvbSl7YT0hMDticmVha31pZihoLnBhcmVudE5vZGUubGFzdENoaWxkIT1oKWJyZWFrfX1yZXR1cm4obnVsbD09YT9uPjA6YSk/dGhpcy5wb3NBdEVuZDp0aGlzLnBvc0F0U3RhcnR9LGlvLnByb3RvdHlwZS5uZWFyZXN0RGVzYz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0hMCxyPXQ7cjtyPXIucGFyZW50Tm9kZSl7dmFyIG89dGhpcy5nZXREZXNjKHIpO2lmKG8mJighZXx8by5ub2RlKSl7aWYoIW58fCFvLm5vZGVET018fCgxPT1vLm5vZGVET00ubm9kZVR5cGU/by5ub2RlRE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpOm8ubm9kZURPTT09dCkpcmV0dXJuIG87bj0hMX19fSxpby5wcm90b3R5cGUuZ2V0RGVzYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wbVZpZXdEZXNjLG49ZTtuO249bi5wYXJlbnQpaWYobj09dGhpcylyZXR1cm4gZX0saW8ucHJvdG90eXBlLnBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10OztyPXIucGFyZW50Tm9kZSl7dmFyIG89dGhpcy5nZXREZXNjKHIpO2lmKG8pcmV0dXJuIG8ubG9jYWxQb3NGcm9tRE9NKHQsZSxuKX19LGlvLnByb3RvdHlwZS5kZXNjQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNoaWxkcmVuW2VdLG89bityLnNpemU7aWYobj09dCYmbyE9bil7d2hpbGUoIXIuYm9yZGVyJiZyLmNoaWxkcmVuLmxlbmd0aClyPXIuY2hpbGRyZW5bMF07cmV0dXJuIHJ9aWYodDxvKXJldHVybiByLmRlc2NBdCh0LW4tci5ib3JkZXIpO249b319LGlvLnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmNvbnRlbnRET00pcmV0dXJue25vZGU6dGhpcy5kb20sb2Zmc2V0OjB9O2Zvcih2YXIgZT0wLG49MDs7bisrKXtpZihlPT10KXt3aGlsZShuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5jaGlsZHJlbltuXS5iZWZvcmVQb3NpdGlvbnx8dGhpcy5jaGlsZHJlbltuXS5kb20ucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKSluKys7cmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLG9mZnNldDpuPT10aGlzLmNoaWxkcmVuLmxlbmd0aD90aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGg6dnIodGhpcy5jaGlsZHJlbltuXS5kb20pfX1pZihuPT10aGlzLmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcG9zaXRpb24gIit0KTt2YXIgcj10aGlzLmNoaWxkcmVuW25dLG89ZStyLnNpemU7aWYodDxvKXJldHVybiByLmRvbUZyb21Qb3ModC1lLXIuYm9yZGVyKTtlPW99fSxpby5wcm90b3R5cGUucGFyc2VSYW5nZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49MCksMD09dGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLGZyb206dCx0bzplLGZyb21PZmZzZXQ6MCx0b09mZnNldDp0aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGh9O2Zvcih2YXIgcj0tMSxvPS0xLGk9bixzPTA7O3MrKyl7dmFyIGE9dGhpcy5jaGlsZHJlbltzXSxjPWkrYS5zaXplO2lmKC0xPT1yJiZ0PD1jKXt2YXIgaD1pK2EuYm9yZGVyO2lmKHQ+PWgmJmU8PWMtYS5ib3JkZXImJmEubm9kZSYmYS5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00uY29udGFpbnMoYS5jb250ZW50RE9NKSlyZXR1cm4gYS5wYXJzZVJhbmdlKHQsZSxoKTt0PWk7Zm9yKHZhciBwPXM7cD4wO3AtLSl7dmFyIHU9dGhpcy5jaGlsZHJlbltwLTFdO2lmKHUuc2l6ZSYmdS5kb20ucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NJiYhdS5lbXB0eUNoaWxkQXQoMSkpe3I9dnIodS5kb20pKzE7YnJlYWt9dC09dS5zaXplfS0xPT1yJiYocj0wKX1pZihyPi0xJiZlPD1jKXtlPWM7Zm9yKHZhciBmPXMrMTtmPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2YrKyl7dmFyIGw9dGhpcy5jaGlsZHJlbltmXTtpZihsLnNpemUmJmwuZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSYmIWwuZW1wdHlDaGlsZEF0KC0xKSl7bz12cihsLmRvbSk7YnJlYWt9ZSs9bC5zaXplfS0xPT1vJiYobz10aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGgpO2JyZWFrfWk9Y31yZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sZnJvbTp0LHRvOmUsZnJvbU9mZnNldDpyLHRvT2Zmc2V0Om99fSxpby5wcm90b3R5cGUuZW1wdHlDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuYm9yZGVyfHwhdGhpcy5jb250ZW50RE9NfHwhdGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7dmFyIGU9dGhpcy5jaGlsZHJlblt0PDA/MDp0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTtyZXR1cm4gMD09ZS5zaXplfHxlLmVtcHR5Q2hpbGRBdCh0KX0saW8ucHJvdG90eXBlLmRvbUFmdGVyUG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tRnJvbVBvcyh0KSxuPWUubm9kZSxyPWUub2Zmc2V0O2lmKDEhPW4ubm9kZVR5cGV8fHI9PW4uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYWZ0ZXIgcG9zICIrdCk7cmV0dXJuIG4uY2hpbGROb2Rlc1tyXX0saW8ucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89TWF0aC5taW4odCxlKSxpPU1hdGgubWF4KHQsZSkscz0wLGE9MDtzPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3MrKyl7dmFyIGM9dGhpcy5jaGlsZHJlbltzXSxoPWErYy5zaXplO2lmKG8+YSYmaTxoKXJldHVybiBjLnNldFNlbGVjdGlvbih0LWEtYy5ib3JkZXIsZS1hLWMuYm9yZGVyLG4scik7YT1ofXZhciBwPXRoaXMuZG9tRnJvbVBvcyh0KSx1PXRoaXMuZG9tRnJvbVBvcyhlKSxmPW4uZ2V0U2VsZWN0aW9uKCk7aWYocnx8IWdyKHAubm9kZSxwLm9mZnNldCxmLmFuY2hvck5vZGUsZi5hbmNob3JPZmZzZXQpfHwhZ3IodS5ub2RlLHUub2Zmc2V0LGYuZm9jdXNOb2RlLGYuZm9jdXNPZmZzZXQpKXt2YXIgbD0hMTtpZihmLmV4dGVuZHx8dD09ZSl7Zi5jb2xsYXBzZShwLm5vZGUscC5vZmZzZXQpO3RyeXt0IT1lJiZmLmV4dGVuZCh1Lm5vZGUsdS5vZmZzZXQpLGw9ITB9Y2F0Y2gobSl7aWYoIShtIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSl0aHJvdyBtfX1pZighbCl7aWYodD5lKXt2YXIgZD1wO3A9dSx1PWR9dmFyIHY9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTt2LnNldEVuZCh1Lm5vZGUsdS5vZmZzZXQpLHYuc2V0U3RhcnQocC5ub2RlLHAub2Zmc2V0KSxmLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2Uodil9fX0saW8ucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNvbnRlbnRET00mJiJzZWxlY3Rpb24iIT10LnR5cGV9LHNvLmNvbnRlbnRMb3N0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTSE9dGhpcy5kb20mJiF0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pfSxpby5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj0wO3I8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cisrKXt2YXIgbz10aGlzLmNoaWxkcmVuW3JdLGk9bitvLnNpemU7aWYobj09aT90PD1pJiZlPj1uOnQ8aSYmZT5uKXt2YXIgcz1uK28uYm9yZGVyLGE9aS1vLmJvcmRlcjtpZih0Pj1zJiZlPD1hKXJldHVybiB0aGlzLmRpcnR5PXQ9PW58fGU9PWk/cm86bm8sdm9pZCh0IT1zfHxlIT1hfHwhby5jb250ZW50TG9zdCYmby5kb20ucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NP28ubWFya0RpcnR5KHQtcyxlLXMpOm8uZGlydHk9b28pO28uZGlydHk9b299bj1pfXRoaXMuZGlydHk9cm99LGlvLnByb3RvdHlwZS5tYXJrUGFyZW50c0RpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTEsZT10aGlzLnBhcmVudDtlO2U9ZS5wYXJlbnQsdCsrKXt2YXIgbj0xPT10P3JvOm5vO2UuZGlydHk8biYmKGUuZGlydHk9bil9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpby5wcm90b3R5cGUsc28pO3ZhciBhbz1bXSxjbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3ZhciBpLHM9bi50eXBlLnRvRE9NO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBzJiYocz1zKHIsKGZ1bmN0aW9uKCl7cmV0dXJuIGk/aS5wYXJlbnQ/aS5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoaSk6dm9pZCAwOm99KSkpLCFuLnR5cGUuc3BlYy5yYXcpe2lmKDEhPXMubm9kZVR5cGUpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTthLmFwcGVuZENoaWxkKHMpLHM9YX1zLmNvbnRlbnRFZGl0YWJsZT0hMSxzLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXdpZGdldCIpfXQuY2FsbCh0aGlzLGUsYW8scyxudWxsKSx0aGlzLndpZGdldD1uLGk9dGhpc310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17YmVmb3JlUG9zaXRpb246e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLmJlZm9yZVBvc2l0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpZGdldC50eXBlLnNpZGU8MH0sZS5wcm90b3R5cGUubWF0Y2hlc1dpZGdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXJ0eT09ZW8mJnQudHlwZS5lcSh0aGlzLndpZGdldC50eXBlKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZGdldC5zcGVjLnN0b3BFdmVudDtyZXR1cm4hIWUmJmUodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJzZWxlY3Rpb24iIT10LnR5cGV8fHRoaXMud2lkZ2V0LnNwZWMuaWdub3JlU2VsZWN0aW9ufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShpbyksaG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLGFvLG4sbnVsbCksdGhpcy50ZXh0RE9NPXIsdGhpcy50ZXh0PW99dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUpe3JldHVybiB0IT10aGlzLnRleHRET00/dGhpcy5wb3NBdFN0YXJ0KyhlP3RoaXMuc2l6ZTowKTp0aGlzLnBvc0F0U3RhcnQrZX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLnRleHRET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSI9PT10LnR5cGUmJnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oaW8pLHBvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixvKXt2YXIgaT1vLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scz1pJiZpKG4sbyxyKTtyZXR1cm4gcyYmcy5kb218fChzPXpuLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obixyKSkpLG5ldyBlKHQsbixzLmRvbSxzLmNvbnRlbnRET018fHMuZG9tKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue21hcms6dGhpcy5tYXJrLnR5cGUubmFtZSxhdHRyczp0aGlzLm1hcmsuYXR0cnMsY29udGVudEVsZW1lbnQ6dGhpcy5jb250ZW50RE9NfX0sZS5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHkhPW9vJiZ0aGlzLm1hcmsuZXEodCl9LGUucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbihlLG4pe2lmKHQucHJvdG90eXBlLm1hcmtEaXJ0eS5jYWxsKHRoaXMsZSxuKSx0aGlzLmRpcnR5IT1lbyl7dmFyIHI9dGhpcy5wYXJlbnQ7d2hpbGUoIXIubm9kZSlyPXIucGFyZW50O3IuZGlydHk8dGhpcy5kaXJ0eSYmKHIuZGlydHk9dGhpcy5kaXJ0eSksdGhpcy5kaXJ0eT1lb319LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsbixyKXt2YXIgbz1lLmNyZWF0ZSh0aGlzLnBhcmVudCx0aGlzLm1hcmssITAsciksaT10aGlzLmNoaWxkcmVuLHM9dGhpcy5zaXplO248cyYmKGk9RG8oaSxuLHMscikpLHQ+MCYmKGk9RG8oaSwwLHQscikpO2Zvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSsrKWlbYV0ucGFyZW50PW87cmV0dXJuIG8uY2hpbGRyZW49aSxvfSxlfShpbyksdW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsaCl7dC5jYWxsKHRoaXMsZSxuLmlzTGVhZj9hbzpbXSxpLHMpLHRoaXMubm9kZURPTT1hLHRoaXMubm9kZT1uLHRoaXMub3V0ZXJEZWNvPXIsdGhpcy5pbm5lckRlY289byxzJiZ0aGlzLnVwZGF0ZUNoaWxkcmVuKGMsaCl9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH0sYm9yZGVyOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5jcmVhdGU9ZnVuY3Rpb24odCxuLHIsbyxpLHMpe3ZhciBhLGMsaD1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scD1oJiZoKG4saSwoZnVuY3Rpb24oKXtyZXR1cm4gYz9jLnBhcmVudD9jLnBhcmVudC5wb3NCZWZvcmVDaGlsZChjKTp2b2lkIDA6c30pLHIpLHU9cCYmcC5kb20sZj1wJiZwLmNvbnRlbnRET007aWYobi5pc1RleHQpaWYodSl7aWYoMyE9dS5ub2RlVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGV4dCBtdXN0IGJlIHJlbmRlcmVkIGFzIGEgRE9NIHRleHQgbm9kZSIpfWVsc2UgdT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuLnRleHQpO2Vsc2UgdXx8KGE9em4ucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuKSksdT1hLmRvbSxmPWEuY29udGVudERPTSk7Znx8bi5pc1RleHR8fCJCUiI9PXUubm9kZU5hbWV8fCh1Lmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fCh1LmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYodS5kcmFnZ2FibGU9ITApKTt2YXIgbD11O3JldHVybiB1PVNvKHUscixuKSxwP2M9bmV3IG1vKHQsbixyLG8sdSxmLGwscCxpLHMrMSk6bi5pc1RleHQ/bmV3IGxvKHQsbixyLG8sdSxsLGkpOm5ldyBlKHQsbixyLG8sdSxmLGwsaSxzKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP3VlLmVtcHR5OnQubm9kZS5jb250ZW50fSxlfSxlLnByb3RvdHlwZS5tYXRjaGVzTm9kZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuZGlydHk9PWVvJiZ0LmVxKHRoaXMubm9kZSkmJk9vKGUsdGhpcy5vdXRlckRlY28pJiZuLmVxKHRoaXMuaW5uZXJEZWNvKX0sbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVNpemV9LG4uYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuaXNMZWFmPzA6MX0sZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5ub2RlLmlubGluZUNvbnRlbnQsbz1lLGk9ciYmdC5jb21wb3NpbmcmJnRoaXMubG9jYWxDb21wb3NpdGlvbk5vZGUodCxlKSxzPW5ldyBNbyh0aGlzLGkmJmkubm9kZSk7RW8odGhpcy5ub2RlLHRoaXMuaW5uZXJEZWNvLChmdW5jdGlvbihlLGksYSl7ZS5zcGVjLm1hcmtzP3Muc3luY1RvTWFya3MoZS5zcGVjLm1hcmtzLHIsdCk6ZS50eXBlLnNpZGU+PTAmJiFhJiZzLnN5bmNUb01hcmtzKGk9PW4ubm9kZS5jaGlsZENvdW50P21lLm5vbmU6bi5ub2RlLmNoaWxkKGkpLm1hcmtzLHIsdCkscy5wbGFjZVdpZGdldChlLHQsbyl9KSwoZnVuY3Rpb24oZSxuLGksYSl7cy5zeW5jVG9NYXJrcyhlLm1hcmtzLHIsdCkscy5maW5kTm9kZU1hdGNoKGUsbixpLGEpfHxzLnVwZGF0ZU5leHROb2RlKGUsbixpLHQsYSl8fHMuYWRkTm9kZShlLG4saSx0LG8pLG8rPWUubm9kZVNpemV9KSkscy5zeW5jVG9NYXJrcyhhbyxyLHQpLHRoaXMubm9kZS5pc1RleHRibG9jayYmcy5hZGRUZXh0YmxvY2tIYWNrcygpLHMuZGVzdHJveVJlc3QoKSwocy5jaGFuZ2VkfHx0aGlzLmRpcnR5PT1ybykmJihpJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQsaSksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXt5byh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbiksaHIuaW9zJiZBbyh0aGlzLmRvbSl9LGUucHJvdG90eXBlLmxvY2FsQ29tcG9zaXRpb25Ob2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLmZyb20sbz1uLnRvO2lmKCEoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIF9uKXx8cjxlfHxvPmUrdGhpcy5ub2RlLmNvbnRlbnQuc2l6ZSkpe3ZhciBpPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxzPVJvKGkuZm9jdXNOb2RlLGkuZm9jdXNPZmZzZXQpO2lmKHMmJnRoaXMuZG9tLmNvbnRhaW5zKHMucGFyZW50Tm9kZSkpe3ZhciBhPXMubm9kZVZhbHVlLGM9em8odGhpcy5ub2RlLmNvbnRlbnQsYSxyLWUsby1lKTtyZXR1cm4gYzwwP251bGw6e25vZGU6cyxwb3M6Yyx0ZXh0OmF9fX19LGUucHJvdG90eXBlLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5ub2RlLHI9ZS5wb3Msbz1lLnRleHQ7aWYoIXRoaXMuZ2V0RGVzYyhuKSl7Zm9yKHZhciBpPW47O2k9aS5wYXJlbnROb2RlKXtpZihpLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSlicmVhazt3aGlsZShpLnByZXZpb3VzU2libGluZylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaS5wcmV2aW91c1NpYmxpbmcpO3doaWxlKGkubmV4dFNpYmxpbmcpaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkubmV4dFNpYmxpbmcpO2kucG1WaWV3RGVzYyYmKGkucG1WaWV3RGVzYz1udWxsKX12YXIgcz1uZXcgaG8odGhpcyxpLG4sbyk7dC5jb21wb3NpdGlvbk5vZGVzLnB1c2gocyksdGhpcy5jaGlsZHJlbj1Ebyh0aGlzLmNoaWxkcmVuLHIscitvLmxlbmd0aCx0LHMpfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiEodGhpcy5kaXJ0eT09b298fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZUlubmVyKHQsZSxuLHIpLCEwKX0sZS5wcm90b3R5cGUudXBkYXRlSW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5ub2RlPXQsdGhpcy5pbm5lckRlY289bix0aGlzLmNvbnRlbnRET00mJnRoaXMudXBkYXRlQ2hpbGRyZW4ocix0aGlzLnBvc0F0U3RhcnQpLHRoaXMuZGlydHk9ZW99LGUucHJvdG90eXBlLnVwZGF0ZU91dGVyRGVjbz1mdW5jdGlvbih0KXtpZighT28odCx0aGlzLm91dGVyRGVjbykpe3ZhciBlPTEhPXRoaXMubm9kZURPTS5ub2RlVHlwZSxuPXRoaXMuZG9tO3RoaXMuZG9tPWJvKHRoaXMuZG9tLHRoaXMubm9kZURPTSx4byh0aGlzLm91dGVyRGVjbyx0aGlzLm5vZGUsZSkseG8odCx0aGlzLm5vZGUsZSkpLHRoaXMuZG9tIT1uJiYobi5wbVZpZXdEZXNjPW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz10aGlzKSx0aGlzLm91dGVyRGVjbz10fX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8KHRoaXMuZG9tLmRyYWdnYWJsZT0hMCl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8dGhpcy5kb20ucmVtb3ZlQXR0cmlidXRlKCJkcmFnZ2FibGUiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oaW8pO2Z1bmN0aW9uIGZvKHQsZSxuLHIsbyl7cmV0dXJuIFNvKHIsZSx0KSxuZXcgdW8obnVsbCx0LGUsbixyLHIscixvLDApfXZhciBsbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxudWxsLHMsYSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntza2lwOnRoaXMubm9kZURPTS5wYXJlbnROb2RlfHwhMH19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiEodGhpcy5kaXJ0eT09b298fHRoaXMuZGlydHkhPWVvJiYhdGhpcy5pblBhcmVudCgpfHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5kaXJ0eT09ZW8mJnQudGV4dD09dGhpcy5ub2RlLnRleHR8fHQudGV4dD09dGhpcy5ub2RlRE9NLm5vZGVWYWx1ZXx8KHRoaXMubm9kZURPTS5ub2RlVmFsdWU9dC50ZXh0KSx0aGlzLm5vZGU9dCx0aGlzLmRpcnR5PWVvLCEwKX0sZS5wcm90b3R5cGUuaW5QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQuY29udGVudERPTSxlPXRoaXMubm9kZURPTTtlO2U9ZS5wYXJlbnROb2RlKWlmKGU9PXQpcmV0dXJuITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy5ub2RlRE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gZT09dGhpcy5ub2RlRE9NP3RoaXMucG9zQXRTdGFydCtNYXRoLm1pbihuLHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk6dC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIiE9dC50eXBlJiYic2VsZWN0aW9uIiE9dC50eXBlfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89dGhpcy5ub2RlLmN1dCh0LG4pLGk9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KTtyZXR1cm4gbmV3IGUodGhpcy5wYXJlbnQsbyx0aGlzLm91dGVyRGVjbyx0aGlzLmlubmVyRGVjbyxpLGkscil9LGV9KHVvKSx2bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcnR5PT1lb30sZX0oaW8pLG1vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSxjLGgscCl7dC5jYWxsKHRoaXMsZSxuLHIsbyxpLHMsYSxoLHApLHRoaXMuc3BlYz1jfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSxuLHIsbyl7aWYodGhpcy5kaXJ0eT09b28pcmV0dXJuITE7aWYodGhpcy5zcGVjLnVwZGF0ZSl7dmFyIGk9dGhpcy5zcGVjLnVwZGF0ZShlLG4pO3JldHVybiBpJiZ0aGlzLnVwZGF0ZUlubmVyKGUsbixyLG8pLGl9cmV0dXJuISghdGhpcy5jb250ZW50RE9NJiYhZS5pc0xlYWYpJiZ0LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5zZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLnNlbGVjdE5vZGU/dGhpcy5zcGVjLnNlbGVjdE5vZGUoKTp0LnByb3RvdHlwZS5zZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMuc3BlYy5kZXNlbGVjdE5vZGU/dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLmRlc2VsZWN0Tm9kZS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oZSxuLHIsbyl7dGhpcy5zcGVjLnNldFNlbGVjdGlvbj90aGlzLnNwZWMuc2V0U2VsZWN0aW9uKGUsbixyKTp0LnByb3RvdHlwZS5zZXRTZWxlY3Rpb24uY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc3Ryb3kmJnRoaXMuc3BlYy5kZXN0cm95KCksdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnNwZWMuc3RvcEV2ZW50JiZ0aGlzLnNwZWMuc3RvcEV2ZW50KHQpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uP3RoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbihlKTp0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbi5jYWxsKHRoaXMsZSl9LGV9KHVvKTtmdW5jdGlvbiB5byh0LGUpe2Zvcih2YXIgbj10LmZpcnN0Q2hpbGQscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9by5kb207aWYoaS5wYXJlbnROb2RlPT10KXt3aGlsZShpIT1uKW49Q28obik7bj1uLm5leHRTaWJsaW5nfWVsc2UgdC5pbnNlcnRCZWZvcmUoaSxuKTtpZihvIGluc3RhbmNlb2YgcG8pe3ZhciBzPW4/bi5wcmV2aW91c1NpYmxpbmc6dC5sYXN0Q2hpbGQ7eW8oby5jb250ZW50RE9NLG8uY2hpbGRyZW4pLG49cz9zLm5leHRTaWJsaW5nOnQuZmlyc3RDaGlsZH19d2hpbGUobiluPUNvKG4pfWZ1bmN0aW9uIGdvKHQpe3QmJih0aGlzLm5vZGVOYW1lPXQpfWdvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciB3bz1bbmV3IGdvXTtmdW5jdGlvbiB4byh0LGUsbil7aWYoMD09dC5sZW5ndGgpcmV0dXJuIHdvO2Zvcih2YXIgcj1uP3dvWzBdOm5ldyBnbyxvPVtyXSxpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBzPXRbaV0udHlwZS5hdHRycyxhPXI7aWYocylmb3IodmFyIGMgaW4gcy5ub2RlTmFtZSYmby5wdXNoKGE9bmV3IGdvKHMubm9kZU5hbWUpKSxzKXt2YXIgaD1zW2NdO251bGwhPWgmJihuJiYxPT1vLmxlbmd0aCYmby5wdXNoKGE9cj1uZXcgZ28oZS5pc0lubGluZT8ic3BhbiI6ImRpdiIpKSwiY2xhc3MiPT1jP2EuY2xhc3M9KGEuY2xhc3M/YS5jbGFzcysiICI6IiIpK2g6InN0eWxlIj09Yz9hLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrIjsiOiIiKStoOiJub2RlTmFtZSIhPWMmJihhW2NdPWgpKX19cmV0dXJuIG99ZnVuY3Rpb24gYm8odCxlLG4scil7aWYobj09d28mJnI9PXdvKXJldHVybiBlO2Zvcih2YXIgbz1lLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9cltpXSxhPW5baV07aWYoaSl7dmFyIGM9dm9pZCAwO2EmJmEubm9kZU5hbWU9PXMubm9kZU5hbWUmJm8hPXQmJihjPW8ucGFyZW50Tm9kZSkmJmMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1zLm5vZGVOYW1lfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHMubm9kZU5hbWUpLGMuYXBwZW5kQ2hpbGQobyksYT13b1swXSksbz1jfWtvKG8sYXx8d29bMF0scyl9cmV0dXJuIG99ZnVuY3Rpb24ga28odCxlLG4pe2Zvcih2YXIgciBpbiBlKSJjbGFzcyI9PXJ8fCJzdHlsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fHIgaW4gbnx8dC5yZW1vdmVBdHRyaWJ1dGUocik7Zm9yKHZhciBvIGluIG4pImNsYXNzIiE9byYmInN0eWxlIiE9byYmIm5vZGVOYW1lIiE9byYmbltvXSE9ZVtvXSYmdC5zZXRBdHRyaWJ1dGUobyxuW29dKTtpZihlLmNsYXNzIT1uLmNsYXNzKXtmb3IodmFyIGk9ZS5jbGFzcz9lLmNsYXNzLnNwbGl0KCIgIik6YW8scz1uLmNsYXNzP24uY2xhc3Muc3BsaXQoIiAiKTphbyxhPTA7YTxpLmxlbmd0aDthKyspLTE9PXMuaW5kZXhPZihpW2FdKSYmdC5jbGFzc0xpc3QucmVtb3ZlKGlbYV0pO2Zvcih2YXIgYz0wO2M8cy5sZW5ndGg7YysrKS0xPT1pLmluZGV4T2Yoc1tjXSkmJnQuY2xhc3NMaXN0LmFkZChzW2NdKX1pZihlLnN0eWxlIT1uLnN0eWxlKXtpZihlLnN0eWxlKXt2YXIgaCxwPS9ccyooW1x3XC1ceGExLVx1ZmZmZl0rKVxzKjooPzoiKD86XFwufFteIl0pKiJ8Jyg/OlxcLnxbXiddKSonfFwoLio/XCl8W147XSkqL2c7d2hpbGUoaD1wLmV4ZWMoZS5zdHlsZSkpdC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShoWzFdKX1uLnN0eWxlJiYodC5zdHlsZS5jc3NUZXh0Kz1uLnN0eWxlKX19ZnVuY3Rpb24gU28odCxlLG4pe3JldHVybiBibyh0LHQsd28seG8oZSxuLDEhPXQubm9kZVR5cGUpKX1mdW5jdGlvbiBPbyh0LGUpe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS50eXBlLmVxKGVbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gQ28odCl7dmFyIGU9dC5uZXh0U2libGluZztyZXR1cm4gdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLGV9dmFyIE1vPWZ1bmN0aW9uKHQsZSl7dGhpcy50b3A9dCx0aGlzLmxvY2s9ZSx0aGlzLmluZGV4PTAsdGhpcy5zdGFjaz1bXSx0aGlzLmNoYW5nZWQ9ITE7dmFyIG49VG8odC5ub2RlLmNvbnRlbnQsdC5jaGlsZHJlbik7dGhpcy5wcmVNYXRjaGVkPW4ubm9kZXMsdGhpcy5wcmVNYXRjaE9mZnNldD1uLm9mZnNldH07ZnVuY3Rpb24gVG8odCxlKXtmb3IodmFyIG49W10scj10LmNoaWxkQ291bnQsbz1lLmxlbmd0aC0xO3I+MCYmbz49MDtvLS0pe3ZhciBpPWVbb10scz1pLm5vZGU7aWYocyl7aWYocyE9dC5jaGlsZChyLTEpKWJyZWFrO24ucHVzaChpKSwtLXJ9fXJldHVybntub2RlczpuLnJldmVyc2UoKSxvZmZzZXQ6cn19ZnVuY3Rpb24gTm8odCxlKXtyZXR1cm4gdC50eXBlLnNpZGUtZS50eXBlLnNpZGV9ZnVuY3Rpb24gRW8odCxlLG4scil7dmFyIG89ZS5sb2NhbHModCksaT0wO2lmKDAhPW8ubGVuZ3RoKWZvcih2YXIgcz0wLGE9W10sYz1udWxsLGg9MDs7KXtpZihzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKXt2YXIgcD1vW3MrK10sdT12b2lkIDA7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS50bz09aSkodXx8KHU9W3BdKSkucHVzaChvW3MrK10pO2lmKHUpe3Uuc29ydChObyk7Zm9yKHZhciBmPTA7Zjx1Lmxlbmd0aDtmKyspbih1W2ZdLGgsISFjKX1lbHNlIG4ocCxoLCEhYyl9dmFyIGw9dm9pZCAwLGQ9dm9pZCAwO2lmKGMpZD0tMSxsPWMsYz1udWxsO2Vsc2V7aWYoIShoPHQuY2hpbGRDb3VudCkpYnJlYWs7ZD1oLGw9dC5jaGlsZChoKyspfWZvcih2YXIgdj0wO3Y8YS5sZW5ndGg7disrKWFbdl0udG88PWkmJmEuc3BsaWNlKHYtLSwxKTt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLmZyb209PWkpYS5wdXNoKG9bcysrXSk7dmFyIG09aStsLm5vZGVTaXplO2lmKGwuaXNUZXh0KXt2YXIgeT1tO3M8by5sZW5ndGgmJm9bc10uZnJvbTx5JiYoeT1vW3NdLmZyb20pO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWFbZ10udG88eSYmKHk9YVtnXS50byk7eTxtJiYoYz1sLmN1dCh5LWkpLGw9bC5jdXQoMCx5LWkpLG09eSxkPS0xKX1yKGwsYS5sZW5ndGg/YS5zbGljZSgpOmFvLGUuZm9yQ2hpbGQoaSxsKSxkKSxpPW19ZWxzZSBmb3IodmFyIHc9MDt3PHQuY2hpbGRDb3VudDt3Kyspe3ZhciB4PXQuY2hpbGQodyk7cih4LG8sZS5mb3JDaGlsZChpLHgpLHcpLGkrPXgubm9kZVNpemV9fWZ1bmN0aW9uIEFvKHQpe2lmKCJVTCI9PXQubm9kZU5hbWV8fCJPTCI9PXQubm9kZU5hbWUpe3ZhciBlPXQuc3R5bGUuY3NzVGV4dDt0LnN0eWxlLmNzc1RleHQ9ZSsiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudCIsd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkubGlzdFN0eWxlLHQuc3R5bGUuY3NzVGV4dD1lfX1mdW5jdGlvbiBSbyh0LGUpe2Zvcig7Oyl7aWYoMz09dC5ub2RlVHlwZSlyZXR1cm4gdDtpZigxPT10Lm5vZGVUeXBlJiZlPjApe2lmKHQuY2hpbGROb2Rlcy5sZW5ndGg+ZSYmMz09dC5jaGlsZE5vZGVzW2VdLm5vZGVUeXBlKXJldHVybiB0LmNoaWxkTm9kZXNbZV07dD10LmNoaWxkTm9kZXNbZS0xXSxlPWJyKHQpfWVsc2V7aWYoISgxPT10Lm5vZGVUeXBlJiZlPHQuY2hpbGROb2Rlcy5sZW5ndGgpKXJldHVybiBudWxsO3Q9dC5jaGlsZE5vZGVzW2VdLGU9MH19fWZ1bmN0aW9uIHpvKHQsZSxuLHIpe2Zvcih2YXIgbz0wLGk9MDtvPHQuY2hpbGRDb3VudCYmaTw9cjspe3ZhciBzPXQuY2hpbGQobysrKSxhPWk7aWYoaSs9cy5ub2RlU2l6ZSxzLmlzVGV4dCl7dmFyIGM9cy50ZXh0O3doaWxlKG88dC5jaGlsZENvdW50KXt2YXIgaD10LmNoaWxkKG8rKyk7aWYoaSs9aC5ub2RlU2l6ZSwhaC5pc1RleHQpYnJlYWs7Yys9aC50ZXh0fWlmKGk+PW4pe3ZhciBwPWMubGFzdEluZGV4T2YoZSxyLWEpO2lmKHA+PTAmJnArZS5sZW5ndGgrYT49bilyZXR1cm4gYStwfX19cmV0dXJuLTF9ZnVuY3Rpb24gRG8odCxlLG4scixvKXtmb3IodmFyIGk9W10scz0wLGE9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGM9dFtzXSxoPWEscD1hKz1jLnNpemU7aD49bnx8cDw9ZT9pLnB1c2goYyk6KGg8ZSYmaS5wdXNoKGMuc2xpY2UoMCxlLWgscikpLG8mJihpLnB1c2gobyksbz1udWxsKSxwPm4mJmkucHVzaChjLnNsaWNlKG4taCxjLnNpemUscikpKX1yZXR1cm4gaX1mdW5jdGlvbiBJbyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kYW5jaG9yLG89bi4kaGVhZCxpPWU+MD9yLm1heChvKTpyLm1pbihvKSxzPWkucGFyZW50LmlubGluZUNvbnRlbnQ/aS5kZXB0aD90LmRvYy5yZXNvbHZlKGU+MD9pLmFmdGVyKCk6aS5iZWZvcmUoKSk6bnVsbDppO3JldHVybiBzJiZCbi5maW5kRnJvbShzLGUpfWZ1bmN0aW9uIFBvKHQsZSl7cmV0dXJuIHQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZSkuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24gQm8odCxlLG4pe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uO2lmKHIgaW5zdGFuY2VvZiBfbil7aWYoIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJyaWdodCI6ImxlZnQiKSl7dmFyIG89SW8odC5zdGF0ZSxlKTtyZXR1cm4hIShvJiZvIGluc3RhbmNlb2YgSm4pJiZQbyh0LG8pfXZhciBpLHM9ci4kaGVhZCxhPXMudGV4dE9mZnNldD9udWxsOmU8MD9zLm5vZGVCZWZvcmU6cy5ub2RlQWZ0ZXI7aWYoIWF8fGEuaXNUZXh0KXJldHVybiExO3ZhciBjPWU8MD9zLnBvcy1hLm5vZGVTaXplOnMucG9zO3JldHVybiEhKGEuaXNBdG9tfHwoaT10LmRvY1ZpZXcuZGVzY0F0KGMpKSYmIWkuY29udGVudERPTSkmJihKbi5pc1NlbGVjdGFibGUoYSk/UG8odCxuZXcgSm4oZTwwP3Quc3RhdGUuZG9jLnJlc29sdmUocy5wb3MtYS5ub2RlU2l6ZSk6cykpOiEhaHIud2Via2l0JiZQbyh0LG5ldyBfbih0LnN0YXRlLmRvYy5yZXNvbHZlKGU8MD9jOmMrYS5ub2RlU2l6ZSkpKSl9aWYociBpbnN0YW5jZW9mIEpuJiZyLm5vZGUuaXNJbmxpbmUpcmV0dXJuIFBvKHQsbmV3IF9uKGU+MD9yLiR0bzpyLiRmcm9tKSk7dmFyIGg9SW8odC5zdGF0ZSxlKTtyZXR1cm4hIWgmJlBvKHQsaCl9ZnVuY3Rpb24gRm8odCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gam8odCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiYwPT1lLnNpemUmJih0Lm5leHRTaWJsaW5nfHwiQlIiIT10Lm5vZGVOYW1lKX1mdW5jdGlvbiBfbyh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7dmFyIG8saSxzPSExO2Zvcihoci5nZWNrbyYmMT09bi5ub2RlVHlwZSYmcjxGbyhuKSYmam8obi5jaGlsZE5vZGVzW3JdKSYmKHM9ITApOzspaWYocj4wKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyLTFdO2lmKGpvKGEpKW89bixpPS0tcjtlbHNle2lmKDMhPWEubm9kZVR5cGUpYnJlYWs7bj1hLHI9bi5ub2RlVmFsdWUubGVuZ3RofX1lbHNle2lmKEpvKG4pKWJyZWFrO3ZhciBjPW4ucHJldmlvdXNTaWJsaW5nO3doaWxlKGMmJmpvKGMpKW89bi5wYXJlbnROb2RlLGk9dnIoYyksYz1jLnByZXZpb3VzU2libGluZztpZihjKW49YyxyPUZvKG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj0wfX1zP0xvKHQsZSxuLHIpOm8mJkxvKHQsZSxvLGkpfX1mdW5jdGlvbiAkbyh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7Zm9yKHZhciBvLGkscz1GbyhuKTs7KWlmKHI8cyl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYT1uLmNoaWxkTm9kZXNbcl07aWYoIWpvKGEpKWJyZWFrO289bixpPSsrcn1lbHNle2lmKEpvKG4pKWJyZWFrO3ZhciBjPW4ubmV4dFNpYmxpbmc7d2hpbGUoYyYmam8oYykpbz1jLnBhcmVudE5vZGUsaT12cihjKSsxLGM9Yy5uZXh0U2libGluZztpZihjKW49YyxyPTAscz1GbyhuKTtlbHNle2lmKG49bi5wYXJlbnROb2RlLG49PXQuZG9tKWJyZWFrO3I9cz0wfX1vJiZMbyh0LGUsbyxpKX19ZnVuY3Rpb24gSm8odCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrfWZ1bmN0aW9uIExvKHQsZSxuLHIpe2lmKE9yKGUpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0RW5kKG4sciksby5zZXRTdGFydChuLHIpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShvKX1lbHNlIGUuZXh0ZW5kJiZlLmV4dGVuZChuLHIpO3QuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCl9ZnVuY3Rpb24gVm8odCxlLG4pe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uO2lmKHIgaW5zdGFuY2VvZiBfbiYmIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO3ZhciBvPXIuJGZyb20saT1yLiR0bztpZighby5wYXJlbnQuaW5saW5lQ29udGVudHx8dC5lbmRPZlRleHRibG9jayhlPDA/InVwIjoiZG93biIpKXt2YXIgcz1Jbyh0LnN0YXRlLGUpO2lmKHMmJnMgaW5zdGFuY2VvZiBKbilyZXR1cm4gUG8odCxzKX1pZighby5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGE9Qm4uZmluZEZyb20oZTwwP286aSxlKTtyZXR1cm4hYXx8UG8odCxhKX1yZXR1cm4hMX1mdW5jdGlvbiBxbyh0LGUpe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBfbikpcmV0dXJuITA7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLiRoZWFkLG89bi4kYW5jaG9yLGk9bi5lbXB0eTtpZighci5zYW1lUGFyZW50KG8pKXJldHVybiEwO2lmKCFpKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJmb3J3YXJkIjoiYmFja3dhcmQiKSlyZXR1cm4hMDt2YXIgcz0hci50ZXh0T2Zmc2V0JiYoZTwwP3Iubm9kZUJlZm9yZTpyLm5vZGVBZnRlcik7aWYocyYmIXMuaXNUZXh0KXt2YXIgYT10LnN0YXRlLnRyO3JldHVybiBlPDA/YS5kZWxldGUoci5wb3Mtcy5ub2RlU2l6ZSxyLnBvcyk6YS5kZWxldGUoci5wb3Msci5wb3Mrcy5ub2RlU2l6ZSksdC5kaXNwYXRjaChhKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBXbyh0LGUsbil7dC5kb21PYnNlcnZlci5zdG9wKCksZS5jb250ZW50RWRpdGFibGU9bix0LmRvbU9ic2VydmVyLnN0YXJ0KCl9ZnVuY3Rpb24gSG8odCl7aWYoaHIuY2hyb21lJiYhKHQuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldD4wKSl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4mJjE9PW4ubm9kZVR5cGUmJjA9PXImJm4uZmlyc3RDaGlsZCYmImZhbHNlIj09bi5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSl7dmFyIG89bi5maXJzdENoaWxkO1dvKHQsbywhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gV28odCxvLCExKX0pLDIwKX19fWZ1bmN0aW9uIEtvKHQpe3ZhciBlPSIiO3JldHVybiB0LmN0cmxLZXkmJihlKz0iYyIpLHQubWV0YUtleSYmKGUrPSJtIiksdC5hbHRLZXkmJihlKz0iYSIpLHQuc2hpZnRLZXkmJihlKz0icyIpLGV9ZnVuY3Rpb24gVW8odCxlKXt2YXIgbj1lLmtleUNvZGUscj1LbyhlKTtyZXR1cm4gOD09bnx8aHIubWFjJiY3Mj09biYmImMiPT1yP3FvKHQsLTEpfHxfbyh0KTo0Nj09bnx8aHIubWFjJiY2OD09biYmImMiPT1yP3FvKHQsMSl8fCRvKHQpOjEzPT1ufHwyNz09bnx8KDM3PT1uP0JvKHQsLTEscil8fF9vKHQpOjM5PT1uP0JvKHQsMSxyKXx8JG8odCk6Mzg9PW4/Vm8odCwtMSxyKXx8X28odCk6NDA9PW4/SG8odCl8fFZvKHQsMSxyKXx8JG8odCk6cj09KGhyLm1hYz8ibSI6ImMiKSYmKDY2PT1ufHw3Mz09bnx8ODk9PW58fDkwPT1uKSl9ZnVuY3Rpb24gR28odCxlKXt2YXIgbixyLG89dC5yb290LmdldFNlbGVjdGlvbigpLGk9dC5zdGF0ZS5kb2Mscz10LmRvY1ZpZXcubmVhcmVzdERlc2Moby5mb2N1c05vZGUpLGE9cyYmMD09cy5zaXplLGM9dC5kb2NWaWV3LnBvc0Zyb21ET00oby5mb2N1c05vZGUsby5mb2N1c09mZnNldCksaD1pLnJlc29sdmUoYyk7aWYoT3Iobykpe249aDt3aGlsZShzJiYhcy5ub2RlKXM9cy5wYXJlbnQ7aWYocyYmcy5ub2RlLmlzQXRvbSYmSm4uaXNTZWxlY3RhYmxlKHMubm9kZSkmJnMucGFyZW50JiYoIXMubm9kZS5pc0lubGluZXx8IWtyKG8uZm9jdXNOb2RlLG8uZm9jdXNPZmZzZXQscy5kb20pKSl7dmFyIHA9cy5wb3NCZWZvcmU7cj1uZXcgSm4oYz09cD9oOmkucmVzb2x2ZShwKSl9fWVsc2Ugbj1pLnJlc29sdmUodC5kb2NWaWV3LnBvc0Zyb21ET00oby5hbmNob3JOb2RlLG8uYW5jaG9yT2Zmc2V0KSk7aWYoIXIpe3ZhciB1PSJwb2ludGVyIj09ZXx8dC5zdGF0ZS5zZWxlY3Rpb24uaGVhZDxoLnBvcyYmIWE/MTotMTtyPWlpKHQsbixoLHUpfXJldHVybiByfWZ1bmN0aW9uIFhvKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb247aWYocmkodCxuKSx0LmVkaXRhYmxlP3QuaGFzRm9jdXMoKTphaSh0KSYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jb250YWlucyh0LmRvbSkpe2lmKHQuZG9tT2JzZXJ2ZXIuZGlzY29ubmVjdFNlbGVjdGlvbigpLHQuY3Vyc29yV3JhcHBlciluaSh0KTtlbHNle3ZhciByLG8saT1uLmFuY2hvcixzPW4uaGVhZDshWW98fG4gaW5zdGFuY2VvZiBfbnx8KG4uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChyPVpvKHQsbi5mcm9tKSksbi5lbXB0eXx8bi4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KG89Wm8odCxuLnRvKSkpLHQuZG9jVmlldy5zZXRTZWxlY3Rpb24oaSxzLHQucm9vdCxlKSxZbyYmKHImJnRpKHIpLG8mJnRpKG8pKSxuLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZlaSh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX19TW8ucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LE1vLnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe2lmKHQhPWUpe2Zvcih2YXIgbj10O248ZTtuKyspdGhpcy50b3AuY2hpbGRyZW5bbl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0sTW8ucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LE1vLnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MCxvPXRoaXMuc3RhY2subGVuZ3RoPj4xLGk9TWF0aC5taW4obyx0Lmxlbmd0aCk7d2hpbGUocjxpJiYocj09by0xP3RoaXMudG9wOnRoaXMuc3RhY2tbcisxPDwxXSkubWF0Y2hlc01hcmsodFtyXSkmJiExIT09dFtyXS50eXBlLnNwZWMuc3Bhbm5pbmcpcisrO3doaWxlKHI8byl0aGlzLmRlc3Ryb3lSZXN0KCksdGhpcy50b3AuZGlydHk9ZW8sdGhpcy5pbmRleD10aGlzLnN0YWNrLnBvcCgpLHRoaXMudG9wPXRoaXMuc3RhY2sucG9wKCksby0tO3doaWxlKG88dC5sZW5ndGgpe3RoaXMuc3RhY2sucHVzaCh0aGlzLnRvcCx0aGlzLmluZGV4KzEpO2Zvcih2YXIgcz0tMSxhPXRoaXMuaW5kZXg7YTxNYXRoLm1pbih0aGlzLmluZGV4KzMsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKTthKyspaWYodGhpcy50b3AuY2hpbGRyZW5bYV0ubWF0Y2hlc01hcmsodFtvXSkpe3M9YTticmVha31pZihzPi0xKXM+dGhpcy5pbmRleCYmKHRoaXMuY2hhbmdlZD0hMCx0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgscykpLHRoaXMudG9wPXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdO2Vsc2V7dmFyIGM9cG8uY3JlYXRlKHRoaXMudG9wLHRbb10sZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCwwLGMpLHRoaXMudG9wPWMsdGhpcy5jaGFuZ2VkPSEwfXRoaXMuaW5kZXg9MCxvKyt9fSxNby5wcm90b3R5cGUuZmluZE5vZGVNYXRjaD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0tMSxpPXI8MD92b2lkIDA6dGhpcy5nZXRQcmVNYXRjaChyKSxzPXRoaXMudG9wLmNoaWxkcmVuO2lmKGkmJmkubWF0Y2hlc05vZGUodCxlLG4pKW89cy5pbmRleE9mKGkpO2Vsc2UgZm9yKHZhciBhPXRoaXMuaW5kZXgsYz1NYXRoLm1pbihzLmxlbmd0aCxhKzUpO2E8YzthKyspe3ZhciBoPXNbYV07aWYoaC5tYXRjaGVzTm9kZSh0LGUsbikmJnRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKGgpPDApe289YTticmVha319cmV0dXJuIShvPDApJiYodGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LG8pLHRoaXMuaW5kZXgrKywhMCl9LE1vLnByb3RvdHlwZS51cGRhdGVOZXh0Tm9kZT1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT10aGlzLmluZGV4O2k8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy50b3AuY2hpbGRyZW5baV07aWYocyBpbnN0YW5jZW9mIHVvKXt2YXIgYT10aGlzLnByZU1hdGNoZWQuaW5kZXhPZihzKTtpZihhPi0xJiZhK3RoaXMucHJlTWF0Y2hPZmZzZXQhPW8pcmV0dXJuITE7dmFyIGM9cy5kb20saD10aGlzLmxvY2smJihjPT10aGlzLmxvY2t8fDE9PWMubm9kZVR5cGUmJmMuY29udGFpbnModGhpcy5sb2NrLnBhcmVudE5vZGUpKSYmISh0LmlzVGV4dCYmcy5ub2RlJiZzLm5vZGUuaXNUZXh0JiZzLm5vZGVET00ubm9kZVZhbHVlPT10LnRleHQmJnMuZGlydHkhPW9vJiZPbyhlLHMub3V0ZXJEZWNvKSk7aWYoIWgmJnMudXBkYXRlKHQsZSxuLHIpKXJldHVybiB0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsaSkscy5kb20hPWMmJih0aGlzLmNoYW5nZWQ9ITApLHRoaXMuaW5kZXgrKywhMDticmVha319cmV0dXJuITF9LE1vLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLHVvLmNyZWF0ZSh0aGlzLnRvcCx0LGUsbixyLG8pKSx0aGlzLmNoYW5nZWQ9ITB9LE1vLnByb3RvdHlwZS5wbGFjZVdpZGdldD1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNXaWRnZXQodCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIHI9bmV3IGNvKHRoaXMudG9wLHQsZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsciksdGhpcy5jaGFuZ2VkPSEwfX0sTW8ucHJvdG90eXBlLmFkZFRleHRibG9ja0hhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleC0xXTt3aGlsZSh0IGluc3RhbmNlb2YgcG8pdD10LmNoaWxkcmVuW3QuY2hpbGRyZW4ubGVuZ3RoLTFdO2lmKCF0fHwhKHQgaW5zdGFuY2VvZiBsbyl8fC9cbiQvLnRlc3QodC5ub2RlLnRleHQpKWlmKHRoaXMuaW5kZXg8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XS5tYXRjaGVzSGFjaygpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLG5ldyB2byh0aGlzLnRvcCxhbyxlLG51bGwpKSx0aGlzLmNoYW5nZWQ9ITB9fTt2YXIgWW89aHIuc2FmYXJpfHxoci5jaHJvbWUmJmhyLmNocm9tZV92ZXJzaW9uPDYzO2Z1bmN0aW9uIFpvKHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldCxpPW88ci5jaGlsZE5vZGVzLmxlbmd0aD9yLmNoaWxkTm9kZXNbb106bnVsbCxzPW8/ci5jaGlsZE5vZGVzW28tMV06bnVsbDtpZihoci5zYWZhcmkmJmkmJiJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKXJldHVybiBRbyhpKTtpZigoIWl8fCJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKSYmKCFzfHwiZmFsc2UiPT1zLmNvbnRlbnRFZGl0YWJsZSkpe2lmKGkpcmV0dXJuIFFvKGkpO2lmKHMpcmV0dXJuIFFvKHMpfX1mdW5jdGlvbiBRbyh0KXtyZXR1cm4gdC5jb250ZW50RWRpdGFibGU9InRydWUiLGhyLnNhZmFyaSYmdC5kcmFnZ2FibGUmJih0LmRyYWdnYWJsZT0hMSx0Lndhc0RyYWdnYWJsZT0hMCksdH1mdW5jdGlvbiB0aSh0KXt0LmNvbnRlbnRFZGl0YWJsZT0iZmFsc2UiLHQud2FzRHJhZ2dhYmxlJiYodC5kcmFnZ2FibGU9ITAsdC53YXNEcmFnZ2FibGU9bnVsbCl9ZnVuY3Rpb24gZWkodCl7dmFyIGU9dC5kb20ub3duZXJEb2N1bWVudDtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpO3ZhciBuPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxyPW4uYW5jaG9yTm9kZSxvPW4uYW5jaG9yT2Zmc2V0O2UuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZD1mdW5jdGlvbigpe24uYW5jaG9yTm9kZT09ciYmbi5hbmNob3JPZmZzZXQ9PW98fChlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSl9KX1mdW5jdGlvbiBuaSh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9dC5jdXJzb3JXcmFwcGVyLmRvbSxvPSJJTUciPT1yLm5vZGVOYW1lO28/bi5zZXRFbmQoci5wYXJlbnROb2RlLHZyKHIpKzEpOm4uc2V0RW5kKHIsMCksbi5jb2xsYXBzZSghMSksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG4pLCFvJiYhdC5zdGF0ZS5zZWxlY3Rpb24udmlzaWJsZSYmaHIuaWUmJmhyLmllX3ZlcnNpb248PTExJiYoci5kaXNhYmxlZD0hMCxyLmRpc2FibGVkPSExKX1mdW5jdGlvbiByaSh0LGUpe2lmKGUgaW5zdGFuY2VvZiBKbil7dmFyIG49dC5kb2NWaWV3LmRlc2NBdChlLmZyb20pO24hPXQubGFzdFNlbGVjdGVkVmlld0Rlc2MmJihvaSh0KSxuJiZuLnNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW4pfWVsc2Ugb2kodCl9ZnVuY3Rpb24gb2kodCl7dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKHQubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50JiZ0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLmRlc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bnVsbCl9ZnVuY3Rpb24gaWkodCxlLG4scil7cmV0dXJuIHQuc29tZVByb3AoImNyZWF0ZVNlbGVjdGlvbkJldHdlZW4iLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsbil9KSl8fF9uLmJldHdlZW4oZSxuLHIpfWZ1bmN0aW9uIHNpKHQpe3JldHVybighdC5lZGl0YWJsZXx8dC5yb290LmFjdGl2ZUVsZW1lbnQ9PXQuZG9tKSYmYWkodCl9ZnVuY3Rpb24gYWkodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpO2lmKCFlLmFuY2hvck5vZGUpcmV0dXJuITE7dHJ5e3JldHVybiB0LmRvbS5jb250YWlucygzPT1lLmFuY2hvck5vZGUubm9kZVR5cGU/ZS5hbmNob3JOb2RlLnBhcmVudE5vZGU6ZS5hbmNob3JOb2RlKSYmKHQuZWRpdGFibGV8fHQuZG9tLmNvbnRhaW5zKDM9PWUuZm9jdXNOb2RlLm5vZGVUeXBlP2UuZm9jdXNOb2RlLnBhcmVudE5vZGU6ZS5mb2N1c05vZGUpKX1jYXRjaChuKXtyZXR1cm4hMX19ZnVuY3Rpb24gY2kodCl7dmFyIGU9dC5kb2NWaWV3LmRvbUZyb21Qb3ModC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yKSxuPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtyZXR1cm4gZ3IoZS5ub2RlLGUub2Zmc2V0LG4uYW5jaG9yTm9kZSxuLmFuY2hvck9mZnNldCl9ZnVuY3Rpb24gaGkodCxlLG4pe3ZhciByPXQuZG9jVmlldy5wYXJzZVJhbmdlKGUsbiksbz1yLm5vZGUsaT1yLmZyb21PZmZzZXQscz1yLnRvT2Zmc2V0LGE9ci5mcm9tLGM9ci50byxoPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxwPW51bGwsdT1oLmFuY2hvck5vZGU7aWYodSYmdC5kb20uY29udGFpbnMoMT09dS5ub2RlVHlwZT91OnUucGFyZW50Tm9kZSkmJihwPVt7bm9kZTp1LG9mZnNldDpoLmFuY2hvck9mZnNldH1dLE9yKGgpfHxwLnB1c2goe25vZGU6aC5mb2N1c05vZGUsb2Zmc2V0OmguZm9jdXNPZmZzZXR9KSksaHIuY2hyb21lJiY4PT09dC5sYXN0S2V5Q29kZSlmb3IodmFyIGY9cztmPmk7Zi0tKXt2YXIgbD1vLmNoaWxkTm9kZXNbZi0xXSxkPWwucG1WaWV3RGVzYztpZigiQlIiPT1sLm5vZGVUeXBlJiYhZCl7cz1mO2JyZWFrfWlmKCFkfHxkLnNpemUpYnJlYWt9dmFyIHY9dC5zdGF0ZS5kb2MsbT10LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8eW4uZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSkseT12LnJlc29sdmUoYSksZz1udWxsLHc9bS5wYXJzZShvLHt0b3BOb2RlOnkucGFyZW50LHRvcE1hdGNoOnkucGFyZW50LmNvbnRlbnRNYXRjaEF0KHkuaW5kZXgoKSksdG9wT3BlbjohMCxmcm9tOmksdG86cyxwcmVzZXJ2ZVdoaXRlc3BhY2U6IXkucGFyZW50LnR5cGUuc3BlYy5jb2RlfHwiZnVsbCIsZWRpdGFibGVDb250ZW50OiEwLGZpbmRQb3NpdGlvbnM6cCxydWxlRnJvbU5vZGU6cGksY29udGV4dDp5fSk7aWYocCYmbnVsbCE9cFswXS5wb3Mpe3ZhciB4PXBbMF0ucG9zLGI9cFsxXSYmcFsxXS5wb3M7bnVsbD09YiYmKGI9eCksZz17YW5jaG9yOngrYSxoZWFkOmIrYX19cmV0dXJue2RvYzp3LHNlbDpnLGZyb206YSx0bzpjfX1mdW5jdGlvbiBwaSh0KXt2YXIgZT10LnBtVmlld0Rlc2M7aWYoZSlyZXR1cm4gZS5wYXJzZVJ1bGUoKTtpZigiQlIiPT10Lm5vZGVOYW1lJiZ0LnBhcmVudE5vZGUpe2lmKGhyLnNhZmFyaSYmL14odWx8b2wpJC9pLnRlc3QodC5wYXJlbnROb2RlLm5vZGVOYW1lKSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSkse3NraXA6bn19aWYodC5wYXJlbnROb2RlLmxhc3RDaGlsZD09dHx8aHIuc2FmYXJpJiYvXih0cnx0YWJsZSkkL2kudGVzdCh0LnBhcmVudE5vZGUubm9kZU5hbWUpKXJldHVybntpZ25vcmU6ITB9fWVsc2UgaWYoIklNRyI9PXQubm9kZU5hbWUmJnQuZ2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIikpcmV0dXJue2lnbm9yZTohMH19ZnVuY3Rpb24gdWkodCxlLG4scixvKXtpZihlPDApe3ZhciBpPXQubGFzdFNlbGVjdGlvblRpbWU+RGF0ZS5ub3coKS01MD90Lmxhc3RTZWxlY3Rpb25PcmlnaW46bnVsbCxzPUdvKHQsaSk7aWYoIXQuc3RhdGUuc2VsZWN0aW9uLmVxKHMpKXt2YXIgYT10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihzKTsicG9pbnRlciI9PWk/YS5zZXRNZXRhKCJwb2ludGVyIiwhMCk6ImtleSI9PWkmJmEuc2Nyb2xsSW50b1ZpZXcoKSx0LmRpc3BhdGNoKGEpfX1lbHNle3ZhciBjPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksaD1jLnNoYXJlZERlcHRoKG4pO2U9Yy5iZWZvcmUoaCsxKSxuPXQuc3RhdGUuZG9jLnJlc29sdmUobikuYWZ0ZXIoaCsxKTt2YXIgcCx1LGY9dC5zdGF0ZS5zZWxlY3Rpb24sbD1oaSh0LGUsbiksZD10LnN0YXRlLmRvYyx2PWQuc2xpY2UobC5mcm9tLGwudG8pOzg9PT10Lmxhc3RLZXlDb2RlJiZEYXRlLm5vdygpLTEwMDx0Lmxhc3RLZXlDb2RlVGltZT8ocD10LnN0YXRlLnNlbGVjdGlvbi50byx1PSJlbmQiKToocD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tLHU9InN0YXJ0IiksdC5sYXN0S2V5Q29kZT1udWxsO3ZhciBtPW1pKHYuY29udGVudCxsLmRvYy5jb250ZW50LGwuZnJvbSxwLHUpO2lmKCFtKXtpZighKHImJmYgaW5zdGFuY2VvZiBfbiYmIWYuZW1wdHkmJmYuJGhlYWQuc2FtZVBhcmVudChmLiRhbmNob3IpKXx8dC5jb21wb3Npbmd8fGwuc2VsJiZsLnNlbC5hbmNob3IhPWwuc2VsLmhlYWQpe2lmKGwuc2VsKXt2YXIgeT1maSh0LHQuc3RhdGUuZG9jLGwuc2VsKTt5JiYheS5lcSh0LnN0YXRlLnNlbGVjdGlvbikmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oeSkpfXJldHVybn1tPXtzdGFydDpmLmZyb20sZW5kQTpmLnRvLGVuZEI6Zi50b319dC5kb21DaGFuZ2VDb3VudCsrLHQuc3RhdGUuc2VsZWN0aW9uLmZyb208dC5zdGF0ZS5zZWxlY3Rpb24udG8mJm0uc3RhcnQ9PW0uZW5kQiYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBfbiYmKG0uc3RhcnQ+dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmbS5zdGFydDw9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSsyP20uc3RhcnQ9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTptLmVuZEE8dC5zdGF0ZS5zZWxlY3Rpb24udG8mJm0uZW5kQT49dC5zdGF0ZS5zZWxlY3Rpb24udG8tMiYmKG0uZW5kQis9dC5zdGF0ZS5zZWxlY3Rpb24udG8tbS5lbmRBLG0uZW5kQT10LnN0YXRlLnNlbGVjdGlvbi50bykpLGhyLmllJiZoci5pZV92ZXJzaW9uPD0xMSYmbS5lbmRCPT1tLnN0YXJ0KzEmJm0uZW5kQT09bS5zdGFydCYmbS5zdGFydD5sLmZyb20mJiIgwqAiPT1sLmRvYy50ZXh0QmV0d2VlbihtLnN0YXJ0LWwuZnJvbS0xLG0uc3RhcnQtbC5mcm9tKzEpJiYobS5zdGFydC0tLG0uZW5kQS0tLG0uZW5kQi0tKTt2YXIgZyx3PWwuZG9jLnJlc29sdmVOb0NhY2hlKG0uc3RhcnQtbC5mcm9tKSx4PWwuZG9jLnJlc29sdmVOb0NhY2hlKG0uZW5kQi1sLmZyb20pO2lmKChoci5pb3MmJnQubGFzdElPU0VudGVyPkRhdGUubm93KCktMTAwJiYoIXcuc2FtZVBhcmVudCh4KXx8by5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iRElWIj09dC5ub2RlTmFtZX0pKSl8fCF3LnNhbWVQYXJlbnQoeCkmJncucG9zPGwuZG9jLmNvbnRlbnQuc2l6ZSYmKGc9Qm4uZmluZEZyb20obC5kb2MucmVzb2x2ZSh3LnBvcysxKSwxLCEwKSkmJmcuaGVhZD09eC5wb3MpJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxDcigxMywiRW50ZXIiKSl9KSkpdC5sYXN0SU9TRW50ZXI9MDtlbHNlIGlmKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvcj5tLnN0YXJ0JiZkaShkLG0uc3RhcnQsbS5lbmRBLHcseCkmJnQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LENyKDgsIkJhY2tzcGFjZSIpKX0pKSloci5hbmRyb2lkJiZoci5jaHJvbWUmJnQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCk7ZWxzZXt2YXIgYixrLFMsTyxDPW0uc3RhcnQsTT1tLmVuZEE7aWYody5zYW1lUGFyZW50KHgpJiZ3LnBhcmVudC5pbmxpbmVDb250ZW50KWlmKHcucG9zPT14LnBvcyloci5pZSYmaHIuaWVfdmVyc2lvbjw9MTEmJjA9PXcucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBYbyh0KX0pLDIwKSksYj10LnN0YXRlLnRyLmRlbGV0ZShDLE0pLGs9ZC5yZXNvbHZlKG0uc3RhcnQpLm1hcmtzQWNyb3NzKGQucmVzb2x2ZShtLmVuZEEpKTtlbHNlIGlmKG0uZW5kQT09bS5lbmRCJiYoTz1kLnJlc29sdmUobS5zdGFydCkpJiYoUz1saSh3LnBhcmVudC5jb250ZW50LmN1dCh3LnBhcmVudE9mZnNldCx4LnBhcmVudE9mZnNldCksTy5wYXJlbnQuY29udGVudC5jdXQoTy5wYXJlbnRPZmZzZXQsbS5lbmRBLU8uc3RhcnQoKSkpKSliPXQuc3RhdGUudHIsImFkZCI9PVMudHlwZT9iLmFkZE1hcmsoQyxNLFMubWFyayk6Yi5yZW1vdmVNYXJrKEMsTSxTLm1hcmspO2Vsc2UgaWYody5wYXJlbnQuY2hpbGQody5pbmRleCgpKS5pc1RleHQmJncuaW5kZXgoKT09eC5pbmRleCgpLSh4LnRleHRPZmZzZXQ/MDoxKSl7dmFyIFQ9dy5wYXJlbnQudGV4dEJldHdlZW4ody5wYXJlbnRPZmZzZXQseC5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsQyxNLFQpfSkpKXJldHVybjtiPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChULEMsTSl9aWYoYnx8KGI9dC5zdGF0ZS50ci5yZXBsYWNlKEMsTSxsLmRvYy5zbGljZShtLnN0YXJ0LWwuZnJvbSxtLmVuZEItbC5mcm9tKSkpLGwuc2VsKXt2YXIgTj1maSh0LGIuZG9jLGwuc2VsKTtOJiYhKGhyLmNocm9tZSYmaHIuYW5kcm9pZCYmdC5jb21wb3NpbmcmJk4uZW1wdHkmJihOLmhlYWQ9PUN8fE4uaGVhZD09Yi5tYXBwaW5nLm1hcChNKS0xKXx8aHIuaWUmJk4uZW1wdHkmJk4uaGVhZD09QykmJmIuc2V0U2VsZWN0aW9uKE4pfWsmJmIuZW5zdXJlTWFya3MoayksdC5kaXNwYXRjaChiLnNjcm9sbEludG9WaWV3KCkpfX19ZnVuY3Rpb24gZmkodCxlLG4pe3JldHVybiBNYXRoLm1heChuLmFuY2hvcixuLmhlYWQpPmUuY29udGVudC5zaXplP251bGw6aWkodCxlLnJlc29sdmUobi5hbmNob3IpLGUucmVzb2x2ZShuLmhlYWQpKX1mdW5jdGlvbiBsaSh0LGUpe2Zvcih2YXIgbixyLG8saT10LmZpcnN0Q2hpbGQubWFya3Mscz1lLmZpcnN0Q2hpbGQubWFya3MsYT1pLGM9cyxoPTA7aDxzLmxlbmd0aDtoKyspYT1zW2hdLnJlbW92ZUZyb21TZXQoYSk7Zm9yKHZhciBwPTA7cDxpLmxlbmd0aDtwKyspYz1pW3BdLnJlbW92ZUZyb21TZXQoYyk7aWYoMT09YS5sZW5ndGgmJjA9PWMubGVuZ3RoKXI9YVswXSxuPSJhZGQiLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLmFkZFRvU2V0KHQubWFya3MpKX07ZWxzZXtpZigwIT1hLmxlbmd0aHx8MSE9Yy5sZW5ndGgpcmV0dXJuIG51bGw7cj1jWzBdLG49InJlbW92ZSIsbz1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIucmVtb3ZlRnJvbVNldCh0Lm1hcmtzKSl9fWZvcih2YXIgdT1bXSxmPTA7ZjxlLmNoaWxkQ291bnQ7ZisrKXUucHVzaChvKGUuY2hpbGQoZikpKTtpZih1ZS5mcm9tKHUpLmVxKHQpKXJldHVybnttYXJrOnIsdHlwZTpufX1mdW5jdGlvbiBkaSh0LGUsbixyLG8pe2lmKCFyLnBhcmVudC5pc1RleHRibG9ja3x8bi1lPD1vLnBvcy1yLnBvc3x8dmkociwhMCwhMSk8by5wb3MpcmV0dXJuITE7dmFyIGk9dC5yZXNvbHZlKGUpO2lmKGkucGFyZW50T2Zmc2V0PGkucGFyZW50LmNvbnRlbnQuc2l6ZXx8IWkucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBzPXQucmVzb2x2ZSh2aShpLCEwLCEwKSk7cmV0dXJuISghcy5wYXJlbnQuaXNUZXh0YmxvY2t8fHMucG9zPm58fHZpKHMsITAsITEpPG4pJiZyLnBhcmVudC5jb250ZW50LmN1dChyLnBhcmVudE9mZnNldCkuZXEocy5wYXJlbnQuY29udGVudCl9ZnVuY3Rpb24gdmkodCxlLG4pe3ZhciByPXQuZGVwdGgsbz1lP3QuZW5kKCk6dC5wb3M7d2hpbGUocj4wJiYoZXx8dC5pbmRleEFmdGVyKHIpPT10Lm5vZGUocikuY2hpbGRDb3VudCkpci0tLG8rKyxlPSExO2lmKG4pe3ZhciBpPXQubm9kZShyKS5tYXliZUNoaWxkKHQuaW5kZXhBZnRlcihyKSk7d2hpbGUoaSYmIWkuaXNMZWFmKWk9aS5maXJzdENoaWxkLG8rK31yZXR1cm4gb31mdW5jdGlvbiBtaSh0LGUsbixyLG8pe3ZhciBpPXQuZmluZERpZmZTdGFydChlLG4pO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHM9dC5maW5kRGlmZkVuZChlLG4rdC5zaXplLG4rZS5zaXplKSxhPXMuYSxjPXMuYjtpZigiZW5kIj09byl7dmFyIGg9TWF0aC5tYXgoMCxpLU1hdGgubWluKGEsYykpO3ItPWEraC1pfWlmKGE8aSYmdC5zaXplPGUuc2l6ZSl7dmFyIHA9cjw9aSYmcj49YT9pLXI6MDtpLT1wLGM9aSsoYy1hKSxhPWl9ZWxzZSBpZihjPGkpe3ZhciB1PXI8PWkmJnI+PWM/aS1yOjA7aS09dSxhPWkrKGEtYyksYz1pfXJldHVybntzdGFydDppLGVuZEE6YSxlbmRCOmN9fWZ1bmN0aW9uIHlpKHQsZSl7dmFyIG49W10scj1lLmNvbnRlbnQsbz1lLm9wZW5TdGFydCxpPWUub3BlbkVuZDt3aGlsZShvPjEmJmk+MSYmMT09ci5jaGlsZENvdW50JiYxPT1yLmZpcnN0Q2hpbGQuY2hpbGRDb3VudCl7by0tLGktLTt2YXIgcz1yLmZpcnN0Q2hpbGQ7bi5wdXNoKHMudHlwZS5uYW1lLHMudHlwZS5oYXNSZXF1aXJlZEF0dHJzKCk/cy5hdHRyczpudWxsKSxyPXMuY29udGVudH12YXIgYT10LnNvbWVQcm9wKCJjbGlwYm9hcmRTZXJpYWxpemVyIil8fHpuLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpLGM9VGkoKSxoPWMuY3JlYXRlRWxlbWVudCgiZGl2Iik7aC5hcHBlbmRDaGlsZChhLnNlcmlhbGl6ZUZyYWdtZW50KHIse2RvY3VtZW50OmN9KSk7dmFyIHAsdT1oLmZpcnN0Q2hpbGQ7d2hpbGUodSYmMT09dS5ub2RlVHlwZSYmKHA9Q2lbdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpe2Zvcih2YXIgZj1wLmxlbmd0aC0xO2Y+PTA7Zi0tKXt2YXIgbD1jLmNyZWF0ZUVsZW1lbnQocFtmXSk7d2hpbGUoaC5maXJzdENoaWxkKWwuYXBwZW5kQ2hpbGQoaC5maXJzdENoaWxkKTtoLmFwcGVuZENoaWxkKGwpfXU9aC5maXJzdENoaWxkfXUmJjE9PXUubm9kZVR5cGUmJnUuc2V0QXR0cmlidXRlKCJkYXRhLXBtLXNsaWNlIixvKyIgIitpKyIgIitKU09OLnN0cmluZ2lmeShuKSk7dmFyIGQ9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFNlcmlhbGl6ZXIiLChmdW5jdGlvbih0KXtyZXR1cm4gdChlKX0pKXx8ZS5jb250ZW50LnRleHRCZXR3ZWVuKDAsZS5jb250ZW50LnNpemUsIlxuXG4iKTtyZXR1cm57ZG9tOmgsdGV4dDpkfX1mdW5jdGlvbiBnaSh0LGUsbixyLG8pe3ZhciBpLHMsYT1vLnBhcmVudC50eXBlLnNwZWMuY29kZTtpZighbiYmIWUpcmV0dXJuIG51bGw7dmFyIGM9ZSYmKHJ8fGF8fCFuKTtpZihjKXtpZih0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRUZXh0IiwoZnVuY3Rpb24odCl7ZT10KGUpfSkpLGEpcmV0dXJuIG5ldyBnZSh1ZS5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIGg9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsbyl9KSk7aD9zPWg6KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLGk9Tmkobik7dmFyIHA9aSYmaS5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSx1PXAmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyhwLmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighcyl7dmFyIGY9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHx5bi5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKTtzPWYucGFyc2VTbGljZShpLHtwcmVzZXJ2ZVdoaXRlc3BhY2U6ISghYyYmIXUpLGNvbnRleHQ6b30pfXJldHVybiBzPXU/RWkoT2kocywrdVsxXSwrdVsyXSksdVszXSk6Z2UubWF4T3Blbih3aShzLmNvbnRlbnQsbyksITEpLHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZCIsKGZ1bmN0aW9uKHQpe3M9dChzKX0pKSxzfWZ1bmN0aW9uIHdpKHQsZSl7aWYodC5jaGlsZENvdW50PDIpcmV0dXJuIHQ7Zm9yKHZhciBuPWZ1bmN0aW9uKG4pe3ZhciByPWUubm9kZShuKSxvPXIuY29udGVudE1hdGNoQXQoZS5pbmRleChuKSksaT12b2lkIDAscz1bXTtpZih0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKHMpe3ZhciBlLG49by5maW5kV3JhcHBpbmcodC50eXBlKTtpZighbilyZXR1cm4gcz1udWxsO2lmKGU9cy5sZW5ndGgmJmkubGVuZ3RoJiZiaShuLGksdCxzW3MubGVuZ3RoLTFdLDApKXNbcy5sZW5ndGgtMV09ZTtlbHNle3MubGVuZ3RoJiYoc1tzLmxlbmd0aC0xXT1raShzW3MubGVuZ3RoLTFdLGkubGVuZ3RoKSk7dmFyIHI9eGkodCxuKTtzLnB1c2gociksbz1vLm1hdGNoVHlwZShyLnR5cGUsci5hdHRycyksaT1ufX19KSkscylyZXR1cm57djp1ZS5mcm9tKHMpfX0scj1lLmRlcHRoO3I+PTA7ci0tKXt2YXIgbz1uKHIpO2lmKG8pcmV0dXJuIG8udn1yZXR1cm4gdH1mdW5jdGlvbiB4aSh0LGUsbil7dm9pZCAwPT09biYmKG49MCk7Zm9yKHZhciByPWUubGVuZ3RoLTE7cj49bjtyLS0pdD1lW3JdLmNyZWF0ZShudWxsLHVlLmZyb20odCkpO3JldHVybiB0fWZ1bmN0aW9uIGJpKHQsZSxuLHIsbyl7aWYobzx0Lmxlbmd0aCYmbzxlLmxlbmd0aCYmdFtvXT09ZVtvXSl7dmFyIGk9YmkodCxlLG4sci5sYXN0Q2hpbGQsbysxKTtpZihpKXJldHVybiByLmNvcHkoci5jb250ZW50LnJlcGxhY2VDaGlsZChyLmNoaWxkQ291bnQtMSxpKSk7dmFyIHM9ci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpO2lmKHMubWF0Y2hUeXBlKG89PXQubGVuZ3RoLTE/bi50eXBlOnRbbysxXSkpcmV0dXJuIHIuY29weShyLmNvbnRlbnQuYXBwZW5kKHVlLmZyb20oeGkobix0LG8rMSkpKSl9fWZ1bmN0aW9uIGtpKHQsZSl7aWYoMD09ZSlyZXR1cm4gdDt2YXIgbj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLGtpKHQubGFzdENoaWxkLGUtMSkpLHI9dC5jb250ZW50TWF0Y2hBdCh0LmNoaWxkQ291bnQpLmZpbGxCZWZvcmUodWUuZW1wdHksITApO3JldHVybiB0LmNvcHkobi5hcHBlbmQocikpfWZ1bmN0aW9uIFNpKHQsZSxuLHIsbyxpKXt2YXIgcz1lPDA/dC5maXJzdENoaWxkOnQubGFzdENoaWxkLGE9cy5jb250ZW50O3JldHVybiBvPHItMSYmKGE9U2koYSxlLG4scixvKzEsaSkpLG8+PW4mJihhPWU8MD9zLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUoYSx0LmNoaWxkQ291bnQ+MXx8aTw9bykuYXBwZW5kKGEpOmEuYXBwZW5kKHMuY29udGVudE1hdGNoQXQocy5jaGlsZENvdW50KS5maWxsQmVmb3JlKHVlLmVtcHR5LCEwKSkpLHQucmVwbGFjZUNoaWxkKGU8MD8wOnQuY2hpbGRDb3VudC0xLHMuY29weShhKSl9ZnVuY3Rpb24gT2kodCxlLG4pe3JldHVybiBlPHQub3BlblN0YXJ0JiYodD1uZXcgZ2UoU2kodC5jb250ZW50LC0xLGUsdC5vcGVuU3RhcnQsMCx0Lm9wZW5FbmQpLGUsdC5vcGVuRW5kKSksbjx0Lm9wZW5FbmQmJih0PW5ldyBnZShTaSh0LmNvbnRlbnQsMSxuLHQub3BlbkVuZCwwLDApLHQub3BlblN0YXJ0LG4pKSx0fXZhciBDaT17dGhlYWQ6WyJ0YWJsZSJdLHRib2R5OlsidGFibGUiXSx0Zm9vdDpbInRhYmxlIl0sY2FwdGlvbjpbInRhYmxlIl0sY29sZ3JvdXA6WyJ0YWJsZSJdLGNvbDpbInRhYmxlIiwiY29sZ3JvdXAiXSx0cjpbInRhYmxlIiwidGJvZHkiXSx0ZDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdLHRoOlsidGFibGUiLCJ0Ym9keSIsInRyIl19LE1pPW51bGw7ZnVuY3Rpb24gVGkoKXtyZXR1cm4gTWl8fChNaT1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoInRpdGxlIikpfWZ1bmN0aW9uIE5pKHQpe3ZhciBlPS8oXHMqPG1ldGEgW14+XSo+KSovLmV4ZWModCk7ZSYmKHQ9dC5zbGljZShlWzBdLmxlbmd0aCkpO3ZhciBuLHI9VGkoKS5jcmVhdGVFbGVtZW50KCJkaXYiKSxvPS8oPzo8bWV0YSBbXj5dKj4pKjwoW2Etel1bXj5cc10rKS9pLmV4ZWModCksaT0wOyhuPW8mJkNpW29bMV0udG9Mb3dlckNhc2UoKV0pJiYodD1uLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIjwiK3QrIj4ifSkpLmpvaW4oIiIpK3Qrbi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8LyIrdCsiPiJ9KSkucmV2ZXJzZSgpLmpvaW4oIiIpLGk9bi5sZW5ndGgpLHIuaW5uZXJIVE1MPXQ7Zm9yKHZhciBzPTA7czxpO3MrKylyPXIuZmlyc3RDaGlsZDtyZXR1cm4gcn1mdW5jdGlvbiBFaSh0LGUpe2lmKCF0LnNpemUpcmV0dXJuIHQ7dmFyIG4scj10LmNvbnRlbnQuZmlyc3RDaGlsZC50eXBlLnNjaGVtYTt0cnl7bj1KU09OLnBhcnNlKGUpfWNhdGNoKGgpe3JldHVybiB0fWZvcih2YXIgbz10LmNvbnRlbnQsaT10Lm9wZW5TdGFydCxzPXQub3BlbkVuZCxhPW4ubGVuZ3RoLTI7YT49MDthLT0yKXt2YXIgYz1yLm5vZGVzW25bYV1dO2lmKCFjfHxjLmhhc1JlcXVpcmVkQXR0cnMoKSlicmVhaztvPXVlLmZyb20oYy5jcmVhdGUoblthKzFdLG8pKSxpKysscysrfXJldHVybiBuZXcgZ2UobyxpLHMpfXZhciBBaT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsc3VidHJlZTohMH0sUmk9aHIuaWUmJmhyLmllX3ZlcnNpb248PTExLHppPWZ1bmN0aW9uKCl7dGhpcy5hbmNob3JOb2RlPXRoaXMuYW5jaG9yT2Zmc2V0PXRoaXMuZm9jdXNOb2RlPXRoaXMuZm9jdXNPZmZzZXQ9bnVsbH07emkucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmFuY2hvck5vZGU9dC5hbmNob3JOb2RlLHRoaXMuYW5jaG9yT2Zmc2V0PXQuYW5jaG9yT2Zmc2V0LHRoaXMuZm9jdXNOb2RlPXQuZm9jdXNOb2RlLHRoaXMuZm9jdXNPZmZzZXQ9dC5mb2N1c09mZnNldH0semkucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0LmFuY2hvck5vZGU9PXRoaXMuYW5jaG9yTm9kZSYmdC5hbmNob3JPZmZzZXQ9PXRoaXMuYW5jaG9yT2Zmc2V0JiZ0LmZvY3VzTm9kZT09dGhpcy5mb2N1c05vZGUmJnQuZm9jdXNPZmZzZXQ9PXRoaXMuZm9jdXNPZmZzZXR9O3ZhciBEaT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy52aWV3PXQsdGhpcy5oYW5kbGVET01DaGFuZ2U9ZSx0aGlzLnF1ZXVlPVtdLHRoaXMuZmx1c2hpbmdTb29uPS0xLHRoaXMub2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJm5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspbi5xdWV1ZS5wdXNoKHRbZV0pO2hyLmllJiZoci5pZV92ZXJzaW9uPD0xMSYmdC5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iY2hpbGRMaXN0Ij09dC50eXBlJiZ0LnJlbW92ZWROb2Rlcy5sZW5ndGh8fCJjaGFyYWN0ZXJEYXRhIj09dC50eXBlJiZ0Lm9sZFZhbHVlLmxlbmd0aD50LnRhcmdldC5ub2RlVmFsdWUubGVuZ3RofSkpP24uZmx1c2hTb29uKCk6bi5mbHVzaCgpfSkpLHRoaXMuY3VycmVudFNlbGVjdGlvbj1uZXcgemksUmkmJih0aGlzLm9uQ2hhckRhdGE9ZnVuY3Rpb24odCl7bi5xdWV1ZS5wdXNoKHt0YXJnZXQ6dC50YXJnZXQsdHlwZToiY2hhcmFjdGVyRGF0YSIsb2xkVmFsdWU6dC5wcmV2VmFsdWV9KSxuLmZsdXNoU29vbigpfSksdGhpcy5vblNlbGVjdGlvbkNoYW5nZT10aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITF9O0RpLnByb3RvdHlwZS5mbHVzaFNvb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZmx1c2hpbmdTb29uPDAmJih0aGlzLmZsdXNoaW5nU29vbj13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZsdXNoaW5nU29vbj0tMSx0LmZsdXNoKCl9KSwyMCkpfSxEaS5wcm90b3R5cGUuZm9yY2VGbHVzaD1mdW5jdGlvbigpe3RoaXMuZmx1c2hpbmdTb29uPi0xJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZsdXNoaW5nU29vbiksdGhpcy5mbHVzaGluZ1Nvb249LTEsdGhpcy5mbHVzaCgpKX0sRGkucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlciYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMudmlldy5kb20sQWkpLFJpJiZ0aGlzLnZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcy5vbkNoYXJEYXRhKSx0aGlzLmNvbm5lY3RTZWxlY3Rpb24oKX0sRGkucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMub2JzZXJ2ZXIpe3ZhciBlPXRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtpZihlLmxlbmd0aCl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy5xdWV1ZS5wdXNoKGVbbl0pO3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmZsdXNoKCl9KSwyMCl9dGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCl9UmkmJnRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuZGlzY29ubmVjdFNlbGVjdGlvbigpfSxEaS5wcm90b3R5cGUuY29ubmVjdFNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMudmlldy5kb20ub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpfSxEaS5wcm90b3R5cGUuZGlzY29ubmVjdFNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMudmlldy5kb20ub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpfSxEaS5wcm90b3R5cGUuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX0pLDUwKX0sRGkucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7aWYoc2kodGhpcy52aWV3KSl7aWYodGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMpcmV0dXJuIFhvKHRoaXMudmlldyk7aWYoaHIuaWUmJmhyLmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJmdyKHQuZm9jdXNOb2RlLHQuZm9jdXNPZmZzZXQsdC5hbmNob3JOb2RlLHQuYW5jaG9yT2Zmc2V0KSlyZXR1cm4gdGhpcy5mbHVzaFNvb24oKX10aGlzLmZsdXNoKCl9fSxEaS5wcm90b3R5cGUuc2V0Q3VyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50U2VsZWN0aW9uLnNldCh0aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKSl9LERpLnByb3RvdHlwZS5pZ25vcmVTZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24odCl7aWYoMD09dC5yYW5nZUNvdW50KXJldHVybiEwO3ZhciBlPXQuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcixuPXRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKGUpO3JldHVybiBuJiZuLmlnbm9yZU11dGF0aW9uKHt0eXBlOiJzZWxlY3Rpb24iLHRhcmdldDozPT1lLm5vZGVUeXBlP2UucGFyZW50Tm9kZTplfSk/KHRoaXMuc2V0Q3VyU2VsZWN0aW9uKCksITApOnZvaWQgMH0sRGkucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy52aWV3LmRvY1ZpZXcmJiEodGhpcy5mbHVzaGluZ1Nvb24+LTEpKXt2YXIgdD10aGlzLm9ic2VydmVyP3RoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTpbXTt0aGlzLnF1ZXVlLmxlbmd0aCYmKHQ9dGhpcy5xdWV1ZS5jb25jYXQodCksdGhpcy5xdWV1ZS5sZW5ndGg9MCk7dmFyIGU9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj0hdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMmJiF0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoZSkmJmFpKHRoaXMudmlldykmJiF0aGlzLmlnbm9yZVNlbGVjdGlvbkNoYW5nZShlKSxyPS0xLG89LTEsaT0hMSxzPVtdO2lmKHRoaXMudmlldy5lZGl0YWJsZSlmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIGM9dGhpcy5yZWdpc3Rlck11dGF0aW9uKHRbYV0scyk7YyYmKHI9cjwwP2MuZnJvbTpNYXRoLm1pbihjLmZyb20sciksbz1vPDA/Yy50bzpNYXRoLm1heChjLnRvLG8pLGMudHlwZU92ZXImJihpPSEwKSl9aWYoaHIuZ2Vja28mJnMubGVuZ3RoPjEpe3ZhciBoPXMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4iQlIiPT10Lm5vZGVOYW1lfSkpO2lmKDI9PWgubGVuZ3RoKXt2YXIgcD1oWzBdLHU9aFsxXTtwLnBhcmVudE5vZGUmJnAucGFyZW50Tm9kZS5wYXJlbnROb2RlPT11LnBhcmVudE5vZGU/dS5yZW1vdmUoKTpwLnJlbW92ZSgpfX0ocj4tMXx8bikmJihyPi0xJiYodGhpcy52aWV3LmRvY1ZpZXcubWFya0RpcnR5KHIsbyksUGkodGhpcy52aWV3KSksdGhpcy5oYW5kbGVET01DaGFuZ2UocixvLGkscyksdGhpcy52aWV3LmRvY1ZpZXcuZGlydHk/dGhpcy52aWV3LnVwZGF0ZVN0YXRlKHRoaXMudmlldy5zdGF0ZSk6dGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKGUpfHxYbyh0aGlzLnZpZXcpKX19LERpLnByb3RvdHlwZS5yZWdpc3Rlck11dGF0aW9uPWZ1bmN0aW9uKHQsZSl7aWYoZS5pbmRleE9mKHQudGFyZ2V0KT4tMSlyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0RGVzYyh0LnRhcmdldCk7aWYoImF0dHJpYnV0ZXMiPT10LnR5cGUmJihuPT10aGlzLnZpZXcuZG9jVmlld3x8ImNvbnRlbnRlZGl0YWJsZSI9PXQuYXR0cmlidXRlTmFtZXx8InN0eWxlIj09dC5hdHRyaWJ1dGVOYW1lJiYhdC5vbGRWYWx1ZSYmIXQudGFyZ2V0LmdldEF0dHJpYnV0ZSgic3R5bGUiKSkpcmV0dXJuIG51bGw7aWYoIW58fG4uaWdub3JlTXV0YXRpb24odCkpcmV0dXJuIG51bGw7aWYoImNoaWxkTGlzdCI9PXQudHlwZSl7dmFyIHI9dC5wcmV2aW91c1NpYmxpbmcsbz10Lm5leHRTaWJsaW5nO2lmKGhyLmllJiZoci5pZV92ZXJzaW9uPD0xMSYmdC5hZGRlZE5vZGVzLmxlbmd0aClmb3IodmFyIGk9MDtpPHQuYWRkZWROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgcz10LmFkZGVkTm9kZXNbaV0sYT1zLnByZXZpb3VzU2libGluZyxjPXMubmV4dFNpYmxpbmc7KCFhfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxhKTwwKSYmKHI9YSksKCFjfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxjKTwwKSYmKG89Yyl9Zm9yKHZhciBoPXImJnIucGFyZW50Tm9kZT09dC50YXJnZXQ/dnIocikrMTowLHA9bi5sb2NhbFBvc0Zyb21ET00odC50YXJnZXQsaCwtMSksdT1vJiZvLnBhcmVudE5vZGU9PXQudGFyZ2V0P3ZyKG8pOnQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoLGY9MDtmPHQuYWRkZWROb2Rlcy5sZW5ndGg7ZisrKWUucHVzaCh0LmFkZGVkTm9kZXNbZl0pO3ZhciBsPW4ubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LHUsMSk7cmV0dXJue2Zyb206cCx0bzpsfX1yZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZT97ZnJvbTpuLnBvc0F0U3RhcnQtbi5ib3JkZXIsdG86bi5wb3NBdEVuZCtuLmJvcmRlcn06e2Zyb206bi5wb3NBdFN0YXJ0LHRvOm4ucG9zQXRFbmQsdHlwZU92ZXI6dC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfX07dmFyIElpPSExO2Z1bmN0aW9uIFBpKHQpe0lpfHwoSWk9ITAsIm5vcm1hbCI9PWdldENvbXB1dGVkU3R5bGUodC5kb20pLndoaXRlU3BhY2UmJmNvbnNvbGVbIndhcm4iXSgiUHJvc2VNaXJyb3IgZXhwZWN0cyB0aGUgQ1NTIHdoaXRlLXNwYWNlIHByb3BlcnR5IHRvIGJlIHNldCwgcHJlZmVyYWJseSB0byAncHJlLXdyYXAnLiBJdCBpcyByZWNvbW1lbmRlZCB0byBsb2FkIHN0eWxlL3Byb3NlbWlycm9yLmNzcyBmcm9tIHRoZSBwcm9zZW1pcnJvci12aWV3IHBhY2thZ2UuIikpfXZhciBCaT17fSxGaT17fTtmdW5jdGlvbiBqaSh0KXt0LnNoaWZ0S2V5PSExLHQubW91c2VEb3duPW51bGwsdC5sYXN0S2V5Q29kZT1udWxsLHQubGFzdEtleUNvZGVUaW1lPTAsdC5sYXN0Q2xpY2s9e3RpbWU6MCx4OjAseTowLHR5cGU6IiJ9LHQubGFzdFNlbGVjdGlvbk9yaWdpbj1udWxsLHQubGFzdFNlbGVjdGlvblRpbWU9MCx0Lmxhc3RJT1NFbnRlcj0wLHQuY29tcG9zaW5nPSExLHQuY29tcG9zaW5nVGltZW91dD1udWxsLHQuY29tcG9zaXRpb25Ob2Rlcz1bXSx0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LHQuZG9tT2JzZXJ2ZXI9bmV3IERpKHQsKGZ1bmN0aW9uKGUsbixyLG8pe3JldHVybiB1aSh0LGUsbixyLG8pfSkpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmRvbUNoYW5nZUNvdW50PTAsdC5ldmVudEhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGU9ZnVuY3Rpb24oZSl7dmFyIG49QmlbZV07dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXT1mdW5jdGlvbihlKXshVmkodCxlKXx8TGkodCxlKXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiBGaXx8bih0LGUpfSl9O2Zvcih2YXIgbiBpbiBCaSllKG4pO2hyLnNhZmFyaSYmdC5kb20uYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpLEppKHQpfWZ1bmN0aW9uIF9pKHQsZSl7dC5sYXN0U2VsZWN0aW9uT3JpZ2luPWUsdC5sYXN0U2VsZWN0aW9uVGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uICRpKHQpe2Zvcih2YXIgZSBpbiB0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmV2ZW50SGFuZGxlcnMpdC5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXSk7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCl9ZnVuY3Rpb24gSmkodCl7dC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpdC5ldmVudEhhbmRsZXJzW25dfHx0LmRvbS5hZGRFdmVudExpc3RlbmVyKG4sdC5ldmVudEhhbmRsZXJzW25dPWZ1bmN0aW9uKGUpe3JldHVybiBMaSh0LGUpfSl9KSl9ZnVuY3Rpb24gTGkodCxlKXtyZXR1cm4gdC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24obil7dmFyIHI9bltlLnR5cGVdO3JldHVybiEhciYmKHIodCxlKXx8ZS5kZWZhdWx0UHJldmVudGVkKX0pKX1mdW5jdGlvbiBWaSh0LGUpe2lmKCFlLmJ1YmJsZXMpcmV0dXJuITA7aWYoZS5kZWZhdWx0UHJldmVudGVkKXJldHVybiExO2Zvcih2YXIgbj1lLnRhcmdldDtuIT10LmRvbTtuPW4ucGFyZW50Tm9kZSlpZighbnx8MTE9PW4ubm9kZVR5cGV8fG4ucG1WaWV3RGVzYyYmbi5wbVZpZXdEZXNjLnN0b3BFdmVudChlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxaSh0LGUpe0xpKHQsZSl8fCFCaVtlLnR5cGVdfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIEZpfHxCaVtlLnR5cGVdKHQsZSl9ZnVuY3Rpb24gV2kodCl7cmV0dXJue2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9fWZ1bmN0aW9uIEhpKHQsZSl7dmFyIG49ZS54LXQuY2xpZW50WCxyPWUueS10LmNsaWVudFk7cmV0dXJuIG4qbityKnI8MTAwfWZ1bmN0aW9uIEtpKHQsZSxuLHIsbyl7aWYoLTE9PXIpcmV0dXJuITE7Zm9yKHZhciBpPXQuc3RhdGUuZG9jLnJlc29sdmUocikscz1mdW5jdGlvbihyKXtpZih0LnNvbWVQcm9wKGUsKGZ1bmN0aW9uKGUpe3JldHVybiByPmkuZGVwdGg/ZSh0LG4saS5ub2RlQWZ0ZXIsaS5iZWZvcmUociksbywhMCk6ZSh0LG4saS5ub2RlKHIpLGkuYmVmb3JlKHIpLG8sITEpfSkpKXJldHVybnt2OiEwfX0sYT1pLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9cyhhKTtpZihjKXJldHVybiBjLnZ9cmV0dXJuITF9ZnVuY3Rpb24gVWkodCxlLG4pe3QuZm9jdXNlZHx8dC5mb2N1cygpO3ZhciByPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpOyJwb2ludGVyIj09biYmci5zZXRNZXRhKCJwb2ludGVyIiwhMCksdC5kaXNwYXRjaChyKX1mdW5jdGlvbiBHaSh0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuPXQuc3RhdGUuZG9jLnJlc29sdmUoZSkscj1uLm5vZGVBZnRlcjtyZXR1cm4hIShyJiZyLmlzQXRvbSYmSm4uaXNTZWxlY3RhYmxlKHIpKSYmKFVpKHQsbmV3IEpuKG4pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIFhpKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG4scixvPXQuc3RhdGUuc2VsZWN0aW9uO28gaW5zdGFuY2VvZiBKbiYmKG49by5ub2RlKTtmb3IodmFyIGk9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxzPWkuZGVwdGgrMTtzPjA7cy0tKXt2YXIgYT1zPmkuZGVwdGg/aS5ub2RlQWZ0ZXI6aS5ub2RlKHMpO2lmKEpuLmlzU2VsZWN0YWJsZShhKSl7cj1uJiZvLiRmcm9tLmRlcHRoPjAmJnM+PW8uJGZyb20uZGVwdGgmJmkuYmVmb3JlKG8uJGZyb20uZGVwdGgrMSk9PW8uJGZyb20ucG9zP2kuYmVmb3JlKG8uJGZyb20uZGVwdGgpOmkuYmVmb3JlKHMpO2JyZWFrfX1yZXR1cm4gbnVsbCE9ciYmKFVpKHQsSm4uY3JlYXRlKHQuc3RhdGUuZG9jLHIpLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIFlpKHQsZSxuLHIsbyl7cmV0dXJuIEtpKHQsImhhbmRsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fChvP1hpKHQsbik6R2kodCxuKSl9ZnVuY3Rpb24gWmkodCxlLG4scil7cmV0dXJuIEtpKHQsImhhbmRsZURvdWJsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlRG91YmxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl9ZnVuY3Rpb24gUWkodCxlLG4scil7cmV0dXJuIEtpKHQsImhhbmRsZVRyaXBsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlVHJpcGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fHRzKHQsbil9ZnVuY3Rpb24gdHModCxlKXt2YXIgbj10LnN0YXRlLmRvYztpZigtMT09ZSlyZXR1cm4hIW4uaW5saW5lQ29udGVudCYmKFVpKHQsX24uY3JlYXRlKG4sMCxuLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKSwhMCk7Zm9yKHZhciByPW4ucmVzb2x2ZShlKSxvPXIuZGVwdGgrMTtvPjA7by0tKXt2YXIgaT1vPnIuZGVwdGg/ci5ub2RlQWZ0ZXI6ci5ub2RlKG8pLHM9ci5iZWZvcmUobyk7aWYoaS5pbmxpbmVDb250ZW50KVVpKHQsX24uY3JlYXRlKG4scysxLHMrMStpLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKTtlbHNle2lmKCFKbi5pc1NlbGVjdGFibGUoaSkpY29udGludWU7VWkodCxKbi5jcmVhdGUobixzKSwicG9pbnRlciIpfXJldHVybiEwfX1mdW5jdGlvbiBlcyh0KXtyZXR1cm4gY3ModCl9Rmkua2V5ZG93bj1mdW5jdGlvbih0LGUpe2lmKHQuc2hpZnRLZXk9MTY9PWUua2V5Q29kZXx8ZS5zaGlmdEtleSwhaXModCxlKSlpZih0LmRvbU9ic2VydmVyLmZvcmNlRmx1c2goKSx0Lmxhc3RLZXlDb2RlPWUua2V5Q29kZSx0Lmxhc3RLZXlDb2RlVGltZT1EYXRlLm5vdygpLCFoci5pb3N8fDEzIT1lLmtleUNvZGV8fGUuY3RybEtleXx8ZS5hbHRLZXl8fGUubWV0YUtleSl0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKXx8VW8odCxlKT9lLnByZXZlbnREZWZhdWx0KCk6X2kodCwia2V5Iik7ZWxzZXt2YXIgbj1EYXRlLm5vdygpO3QubGFzdElPU0VudGVyPW4sc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Lmxhc3RJT1NFbnRlcj09biYmKHQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LENyKDEzLCJFbnRlciIpKX0pKSx0Lmxhc3RJT1NFbnRlcj0wKX0pLDUwKX19LEZpLmtleXVwPWZ1bmN0aW9uKHQsZSl7MTY9PWUua2V5Q29kZSYmKHQuc2hpZnRLZXk9ITEpfSxGaS5rZXlwcmVzcz1mdW5jdGlvbih0LGUpe2lmKCEoaXModCxlKXx8IWUuY2hhckNvZGV8fGUuY3RybEtleSYmIWUuYWx0S2V5fHxoci5tYWMmJmUubWV0YUtleSkpaWYodC5zb21lUHJvcCgiaGFuZGxlS2V5UHJlc3MiLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUpfSkpKWUucHJldmVudERlZmF1bHQoKTtlbHNle3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uO2lmKCEobiBpbnN0YW5jZW9mIF9uKXx8IW4uJGZyb20uc2FtZVBhcmVudChuLiR0bykpe3ZhciByPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSk7dC5zb21lUHJvcCgiaGFuZGxlVGV4dElucHV0IiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxuLiRmcm9tLnBvcyxuLiR0by5wb3Mscil9KSl8fHQuZGlzcGF0Y2godC5zdGF0ZS50ci5pbnNlcnRUZXh0KHIpLnNjcm9sbEludG9WaWV3KCkpLGUucHJldmVudERlZmF1bHQoKX19fTt2YXIgbnM9aHIubWFjPyJtZXRhS2V5IjoiY3RybEtleSI7QmkubW91c2Vkb3duPWZ1bmN0aW9uKHQsZSl7dC5zaGlmdEtleT1lLnNoaWZ0S2V5O3ZhciBuPWVzKHQpLHI9RGF0ZS5ub3coKSxvPSJzaW5nbGVDbGljayI7ci10Lmxhc3RDbGljay50aW1lPDUwMCYmSGkoZSx0Lmxhc3RDbGljaykmJiFlW25zXSYmKCJzaW5nbGVDbGljayI9PXQubGFzdENsaWNrLnR5cGU/bz0iZG91YmxlQ2xpY2siOiJkb3VibGVDbGljayI9PXQubGFzdENsaWNrLnR5cGUmJihvPSJ0cmlwbGVDbGljayIpKSx0Lmxhc3RDbGljaz17dGltZTpyLHg6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHR5cGU6b307dmFyIGk9dC5wb3NBdENvb3JkcyhXaShlKSk7aSYmKCJzaW5nbGVDbGljayI9PW8/dC5tb3VzZURvd249bmV3IHJzKHQsaSxlLG4pOigiZG91YmxlQ2xpY2siPT1vP1ppOlFpKSh0LGkucG9zLGkuaW5zaWRlLGUpP2UucHJldmVudERlZmF1bHQoKTpfaSh0LCJwb2ludGVyIikpfTt2YXIgcnM9ZnVuY3Rpb24odCxlLG4scil7dmFyIG8saSxzPXRoaXM7aWYodGhpcy52aWV3PXQsdGhpcy5zdGFydERvYz10LnN0YXRlLmRvYyx0aGlzLnBvcz1lLHRoaXMuZXZlbnQ9bix0aGlzLmZsdXNoZWQ9cix0aGlzLnNlbGVjdE5vZGU9bltuc10sdGhpcy5hbGxvd0RlZmF1bHQ9bi5zaGlmdEtleSxlLmluc2lkZT4tMSlvPXQuc3RhdGUuZG9jLm5vZGVBdChlLmluc2lkZSksaT1lLmluc2lkZTtlbHNle3ZhciBhPXQuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpO289YS5wYXJlbnQsaT1hLmRlcHRoP2EuYmVmb3JlKCk6MH10aGlzLm1pZ2h0RHJhZz1udWxsO3ZhciBjPXI/bnVsbDpuLnRhcmdldCxoPWM/dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGMsITApOm51bGw7dGhpcy50YXJnZXQ9aD9oLmRvbTpudWxsLChvLnR5cGUuc3BlYy5kcmFnZ2FibGUmJiExIT09by50eXBlLnNwZWMuc2VsZWN0YWJsZXx8dC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBKbiYmaT09dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSkmJih0aGlzLm1pZ2h0RHJhZz17bm9kZTpvLHBvczppLGFkZEF0dHI6dGhpcy50YXJnZXQmJiF0aGlzLnRhcmdldC5kcmFnZ2FibGUsc2V0VW5lZGl0YWJsZTp0aGlzLnRhcmdldCYmaHIuZ2Vja28mJiF0aGlzLnRhcmdldC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpfSksdGhpcy50YXJnZXQmJnRoaXMubWlnaHREcmFnJiYodGhpcy5taWdodERyYWcuYWRkQXR0cnx8dGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSkmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITApLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHMudGFyZ2V0LnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwiZmFsc2UiKX0pLDIwKSx0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RhcnQoKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXA9dGhpcy51cC5iaW5kKHRoaXMpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmU9dGhpcy5tb3ZlLmJpbmQodGhpcykpLF9pKHQsInBvaW50ZXIiKX07ZnVuY3Rpb24gaXModCxlKXtyZXR1cm4hIXQuY29tcG9zaW5nfHwhIShoci5zYWZhcmkmJk1hdGguYWJzKGUudGltZVN0YW1wLXQuY29tcG9zaXRpb25FbmRlZEF0KTw1MDApJiYodC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCwhMCl9cnMucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwKSx0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZSksdGhpcy5taWdodERyYWcmJnRoaXMudGFyZ2V0JiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImRyYWdnYWJsZSIpLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHRoaXMudmlldy5tb3VzZURvd249bnVsbH0scnMucHJvdG90eXBlLnVwPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSgpLHRoaXMudmlldy5kb20uY29udGFpbnMoMz09dC50YXJnZXQubm9kZVR5cGU/dC50YXJnZXQucGFyZW50Tm9kZTp0LnRhcmdldCkpe3ZhciBlPXRoaXMucG9zO3RoaXMudmlldy5zdGF0ZS5kb2MhPXRoaXMuc3RhcnREb2MmJihlPXRoaXMudmlldy5wb3NBdENvb3JkcyhXaSh0KSkpLHRoaXMuYWxsb3dEZWZhdWx0fHwhZT9faSh0aGlzLnZpZXcsInBvaW50ZXIiKTpZaSh0aGlzLnZpZXcsZS5wb3MsZS5pbnNpZGUsdCx0aGlzLnNlbGVjdE5vZGUpP3QucHJldmVudERlZmF1bHQoKTohdGhpcy5mbHVzaGVkJiYoIWhyLmNocm9tZXx8dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIF9ufHxlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50byk/X2kodGhpcy52aWV3LCJwb2ludGVyIik6KFVpKHRoaXMudmlldyxCbi5uZWFyKHRoaXMudmlldy5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcykpLCJwb2ludGVyIiksdC5wcmV2ZW50RGVmYXVsdCgpKX19LHJzLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKHQpeyF0aGlzLmFsbG93RGVmYXVsdCYmKE1hdGguYWJzKHRoaXMuZXZlbnQueC10LmNsaWVudFgpPjR8fE1hdGguYWJzKHRoaXMuZXZlbnQueS10LmNsaWVudFkpPjQpJiYodGhpcy5hbGxvd0RlZmF1bHQ9ITApLF9pKHRoaXMudmlldywicG9pbnRlciIpfSxCaS50b3VjaGRvd249ZnVuY3Rpb24odCl7ZXModCksX2kodCwicG9pbnRlciIpfSxCaS5jb250ZXh0bWVudT1mdW5jdGlvbih0KXtyZXR1cm4gZXModCl9O3ZhciBzcz1oci5hbmRyb2lkPzVlMzotMTtmdW5jdGlvbiBhcyh0LGUpe2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpLGU+LTEmJih0LmNvbXBvc2luZ1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gY3ModCl9KSxlKSl9ZnVuY3Rpb24gY3ModCxlKXt0LmRvbU9ic2VydmVyLmZvcmNlRmx1c2goKSx0LmNvbXBvc2luZz0hMTt3aGlsZSh0LmNvbXBvc2l0aW9uTm9kZXMubGVuZ3RoPjApdC5jb21wb3NpdGlvbk5vZGVzLnBvcCgpLm1hcmtQYXJlbnRzRGlydHkoKTtpZihlfHx0LmRvY1ZpZXcuZGlydHkpe3ZhciBuPUdvKHQpO3JldHVybiBuLmVxKHQuc3RhdGUuc2VsZWN0aW9uKT90LnVwZGF0ZVN0YXRlKHQuc3RhdGUpOnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24obikpLCEwfXJldHVybiExfWZ1bmN0aW9uIGhzKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyLmFwcGVuZENoaWxkKGUpLHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4Ijt2YXIgbz1nZXRTZWxlY3Rpb24oKSxpPW4uY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGVDb250ZW50cyhlKSx0LmRvbS5ibHVyKCksby5yZW1vdmVBbGxSYW5nZXMoKSxvLmFkZFJhbmdlKGkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5ib2R5LnJlbW92ZUNoaWxkKHIpLHQuZm9jdXMoKX0pLDUwKX1GaS5jb21wb3NpdGlvbnN0YXJ0PUZpLmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmNvbXBvc2luZyl7dC5kb21PYnNlcnZlci5mbHVzaCgpO3ZhciBlPXQuc3RhdGUsbj1lLnNlbGVjdGlvbi4kZnJvbTtpZihlLnNlbGVjdGlvbi5lbXB0eSYmKGUuc3RvcmVkTWFya3N8fCFuLnRleHRPZmZzZXQmJm4ucGFyZW50T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3Muc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuITE9PT10LnR5cGUuc3BlYy5pbmNsdXNpdmV9KSkpKXQubWFya0N1cnNvcj10LnN0YXRlLnN0b3JlZE1hcmtzfHxuLm1hcmtzKCksY3ModCwhMCksdC5tYXJrQ3Vyc29yPW51bGw7ZWxzZSBpZihjcyh0KSxoci5nZWNrbyYmZS5zZWxlY3Rpb24uZW1wdHkmJm4ucGFyZW50T2Zmc2V0JiYhbi50ZXh0T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3MubGVuZ3RoKWZvcih2YXIgcj10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbz1yLmZvY3VzTm9kZSxpPXIuZm9jdXNPZmZzZXQ7byYmMT09by5ub2RlVHlwZSYmMCE9aTspe3ZhciBzPWk8MD9vLmxhc3RDaGlsZDpvLmNoaWxkTm9kZXNbaS0xXTtpZighcylicmVhaztpZigzPT1zLm5vZGVUeXBlKXtyLmNvbGxhcHNlKHMscy5ub2RlVmFsdWUubGVuZ3RoKTticmVha31vPXMsaT0tMX10LmNvbXBvc2luZz0hMH1hcyh0LHNzKX0sRmkuY29tcG9zaXRpb25lbmQ9ZnVuY3Rpb24odCxlKXt0LmNvbXBvc2luZyYmKHQuY29tcG9zaW5nPSExLHQuY29tcG9zaXRpb25FbmRlZEF0PWUudGltZVN0YW1wLGFzKHQsMjApKX07dmFyIHBzPWhyLmllJiZoci5pZV92ZXJzaW9uPDE1fHxoci5pb3MmJmhyLndlYmtpdF92ZXJzaW9uPDYwNDtmdW5jdGlvbiB1cyh0KXtyZXR1cm4gMD09dC5vcGVuU3RhcnQmJjA9PXQub3BlbkVuZCYmMT09dC5jb250ZW50LmNoaWxkQ291bnQ/dC5jb250ZW50LmZpcnN0Q2hpbGQ6bnVsbH1mdW5jdGlvbiBmcyh0LGUpe3ZhciBuPXQuZG9tLm93bmVyRG9jdW1lbnQscj10LnNoaWZ0S2V5fHx0LnN0YXRlLnNlbGVjdGlvbi4kZnJvbS5wYXJlbnQudHlwZS5zcGVjLmNvZGUsbz1uLmJvZHkuYXBwZW5kQ2hpbGQobi5jcmVhdGVFbGVtZW50KHI/InRleHRhcmVhIjoiZGl2IikpO3J8fChvLmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIpLG8uc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4IixvLmZvY3VzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZvY3VzKCksbi5ib2R5LnJlbW92ZUNoaWxkKG8pLHI/bHModCxvLnZhbHVlLG51bGwsZSk6bHModCxvLnRleHRDb250ZW50LG8uaW5uZXJIVE1MLGUpfSksNTApfWZ1bmN0aW9uIGxzKHQsZSxuLHIpe3ZhciBvPWdpKHQsZSxuLHQuc2hpZnRLZXksdC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20pO2lmKCF0LnNvbWVQcm9wKCJoYW5kbGVQYXN0ZSIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQscixvfHxnZS5lbXB0eSl9KSkmJm8pe3ZhciBpPXVzKG8pLHM9aT90LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKGksdC5zaGlmdEtleSk6dC5zdGF0ZS50ci5yZXBsYWNlU2VsZWN0aW9uKG8pO3QuZGlzcGF0Y2gocy5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInBhc3RlIiwhMCkuc2V0TWV0YSgidWlFdmVudCIsInBhc3RlIikpfX1CaS5jb3B5PUZpLmN1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLHI9ImN1dCI9PWUudHlwZTtpZighbi5lbXB0eSl7dmFyIG89cHM/bnVsbDplLmNsaXBib2FyZERhdGEsaT1uLmNvbnRlbnQoKSxzPXlpKHQsaSksYT1zLmRvbSxjPXMudGV4dDtvPyhlLnByZXZlbnREZWZhdWx0KCksby5jbGVhckRhdGEoKSxvLnNldERhdGEoInRleHQvaHRtbCIsYS5pbm5lckhUTUwpLG8uc2V0RGF0YSgidGV4dC9wbGFpbiIsYykpOmhzKHQsYSksciYmdC5kaXNwYXRjaCh0LnN0YXRlLnRyLmRlbGV0ZVNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCkuc2V0TWV0YSgidWlFdmVudCIsImN1dCIpKX19LEZpLnBhc3RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49cHM/bnVsbDplLmNsaXBib2FyZERhdGEscj1uJiZuLmdldERhdGEoInRleHQvaHRtbCIpLG89biYmbi5nZXREYXRhKCJ0ZXh0L3BsYWluIik7biYmKHJ8fG98fG4uZmlsZXMubGVuZ3RoKT8obHModCxvLHIsZSksZS5wcmV2ZW50RGVmYXVsdCgpKTpmcyh0LGUpfTt2YXIgZHM9ZnVuY3Rpb24odCxlKXt0aGlzLnNsaWNlPXQsdGhpcy5tb3ZlPWV9LHZzPWhyLm1hYz8iYWx0S2V5IjoiY3RybEtleSI7Zm9yKHZhciBtcyBpbiBCaS5kcmFnc3RhcnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm1vdXNlRG93bjtpZihuJiZuLmRvbmUoKSxlLmRhdGFUcmFuc2Zlcil7dmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb24sbz1yLmVtcHR5P251bGw6dC5wb3NBdENvb3JkcyhXaShlKSk7aWYobyYmby5wb3M+PXIuZnJvbSYmby5wb3M8PShyIGluc3RhbmNlb2YgSm4/ci50by0xOnIudG8pKTtlbHNlIGlmKG4mJm4ubWlnaHREcmFnKXQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oSm4uY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighaXx8IWkubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxpPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oSm4uY3JlYXRlKHQuc3RhdGUuZG9jLGkucG9zQmVmb3JlKSkpfXZhciBzPXQuc3RhdGUuc2VsZWN0aW9uLmNvbnRlbnQoKSxhPXlpKHQscyksYz1hLmRvbSxoPWEudGV4dDtlLmRhdGFUcmFuc2Zlci5jbGVhckRhdGEoKSxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKHBzPyJUZXh0IjoidGV4dC9odG1sIixjLmlubmVySFRNTCkscHN8fGUuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQvcGxhaW4iLGgpLHQuZHJhZ2dpbmc9bmV3IGRzKHMsIWVbdnNdKX19LEJpLmRyYWdlbmQ9ZnVuY3Rpb24odCl7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZHJhZ2dpbmc9bnVsbH0pLDUwKX0sRmkuZHJhZ292ZXI9RmkuZHJhZ2VudGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKX0sRmkuZHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZHJhZ2dpbmc7aWYodC5kcmFnZ2luZz1udWxsLGUuZGF0YVRyYW5zZmVyKXt2YXIgcj10LnBvc0F0Q29vcmRzKFdpKGUpKTtpZihyKXt2YXIgbz10LnN0YXRlLmRvYy5yZXNvbHZlKHIucG9zKTtpZihvKXt2YXIgaT1uJiZuLnNsaWNlfHxnaSh0LGUuZGF0YVRyYW5zZmVyLmdldERhdGEocHM/IlRleHQiOiJ0ZXh0L3BsYWluIikscHM/bnVsbDplLmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0L2h0bWwiKSwhMSxvKTtpZih0LnNvbWVQcm9wKCJoYW5kbGVEcm9wIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLGl8fGdlLmVtcHR5LG4mJm4ubW92ZSl9KSkpZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoaSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBzPWk/T2JqZWN0KEl0WyJnIl0pKHQuc3RhdGUuZG9jLG8ucG9zLGkpOm8ucG9zO251bGw9PXMmJihzPW8ucG9zKTt2YXIgYT10LnN0YXRlLnRyO24mJm4ubW92ZSYmYS5kZWxldGVTZWxlY3Rpb24oKTt2YXIgYz1hLm1hcHBpbmcubWFwKHMpLGg9MD09aS5vcGVuU3RhcnQmJjA9PWkub3BlbkVuZCYmMT09aS5jb250ZW50LmNoaWxkQ291bnQscD1hLmRvYztpZihoP2EucmVwbGFjZVJhbmdlV2l0aChjLGMsaS5jb250ZW50LmZpcnN0Q2hpbGQpOmEucmVwbGFjZVJhbmdlKGMsYyxpKSwhYS5kb2MuZXEocCkpe3ZhciB1PWEuZG9jLnJlc29sdmUoYyk7aCYmSm4uaXNTZWxlY3RhYmxlKGkuY29udGVudC5maXJzdENoaWxkKSYmdS5ub2RlQWZ0ZXImJnUubm9kZUFmdGVyLnNhbWVNYXJrdXAoaS5jb250ZW50LmZpcnN0Q2hpbGQpP2Euc2V0U2VsZWN0aW9uKG5ldyBKbih1KSk6YS5zZXRTZWxlY3Rpb24oaWkodCx1LGEuZG9jLnJlc29sdmUoYS5tYXBwaW5nLm1hcChzKSkpKSx0LmZvY3VzKCksdC5kaXNwYXRjaChhLnNldE1ldGEoInVpRXZlbnQiLCJkcm9wIikpfX19fX19LEJpLmZvY3VzPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZHx8KHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5mb2N1c2VkPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5kb2NWaWV3JiZ0Lmhhc0ZvY3VzKCkmJiF0LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uZXEodC5yb290LmdldFNlbGVjdGlvbigpKSYmWG8odCl9KSwyMCkpfSxCaS5ibHVyPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZCYmKHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLnNldCh7fSksdC5mb2N1c2VkPSExKX0sQmkuYmVmb3JlaW5wdXQ9ZnVuY3Rpb24odCxlKXtpZihoci5jaHJvbWUmJmhyLmFuZHJvaWQmJiJkZWxldGVDb250ZW50QmFja3dhcmQiPT1lLmlucHV0VHlwZSl7dmFyIG49dC5kb21DaGFuZ2VDb3VudDtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuZG9tQ2hhbmdlQ291bnQ9PW4mJih0LmRvbS5ibHVyKCksdC5mb2N1cygpLCF0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxDcig4LCJCYWNrc3BhY2UiKSl9KSkpKXt2YXIgZT10LnN0YXRlLnNlbGVjdGlvbixyPWUuJGN1cnNvcjtyJiZyLnBvcz4wJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlKHIucG9zLTEsci5wb3MpLnNjcm9sbEludG9WaWV3KCkpfX0pLDUwKX19LEZpKUJpW21zXT1GaVttc107ZnVuY3Rpb24geXModCxlKXtpZih0PT1lKXJldHVybiEwO2Zvcih2YXIgbiBpbiB0KWlmKHRbbl0hPT1lW25dKXJldHVybiExO2Zvcih2YXIgciBpbiBlKWlmKCEociBpbiB0KSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgZ3M9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8T3MsdGhpcy5zaWRlPXRoaXMuc3BlYy5zaWRlfHwwLHRoaXMudG9ET009dH07Z3MucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcFJlc3VsdChlLmZyb20rcix0aGlzLnNpZGU8MD8tMToxKSxpPW8ucG9zLHM9by5kZWxldGVkO3JldHVybiBzP251bGw6bmV3IGJzKGktbixpLW4sdGhpcyl9LGdzLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiEwfSxncy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiBncyYmKHRoaXMuc3BlYy5rZXkmJnRoaXMuc3BlYy5rZXk9PXQuc3BlYy5rZXl8fHRoaXMudG9ET009PXQudG9ET00mJnlzKHRoaXMuc3BlYyx0LnNwZWMpKX07dmFyIHdzPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fE9zLHRoaXMuYXR0cnM9dH07d3MucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcChlLmZyb20rcix0aGlzLnNwZWMuaW5jbHVzaXZlU3RhcnQ/LTE6MSktbixpPXQubWFwKGUudG8rcix0aGlzLnNwZWMuaW5jbHVzaXZlRW5kPzE6LTEpLW47cmV0dXJuIG8+PWk/bnVsbDpuZXcgYnMobyxpLHRoaXMpfSx3cy5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5mcm9tPGUudG99LHdzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIHdzJiZ5cyh0aGlzLmF0dHJzLHQuYXR0cnMpJiZ5cyh0aGlzLnNwZWMsdC5zcGVjKX0sd3MuaXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSBpbnN0YW5jZW9mIHdzfTt2YXIgeHM9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8T3MsdGhpcy5hdHRycz10fTt4cy5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLDEpO2lmKG8uZGVsZXRlZClyZXR1cm4gbnVsbDt2YXIgaT10Lm1hcFJlc3VsdChlLnRvK3IsLTEpO3JldHVybiBpLmRlbGV0ZWR8fGkucG9zPD1vLnBvcz9udWxsOm5ldyBicyhvLnBvcy1uLGkucG9zLW4sdGhpcyl9LHhzLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuY29udGVudC5maW5kSW5kZXgoZS5mcm9tKSxyPW4uaW5kZXgsbz1uLm9mZnNldDtyZXR1cm4gbz09ZS5mcm9tJiZvK3QuY2hpbGQocikubm9kZVNpemU9PWUudG99LHhzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIHhzJiZ5cyh0aGlzLmF0dHJzLHQuYXR0cnMpJiZ5cyh0aGlzLnNwZWMsdC5zcGVjKX07dmFyIGJzPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmZyb209dCx0aGlzLnRvPWUsdGhpcy50eXBlPW59LGtzPXtzcGVjOntjb25maWd1cmFibGU6ITB9fTticy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgYnModCxlLHRoaXMudHlwZSl9LGJzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLnR5cGUuZXEodC50eXBlKSYmdGhpcy5mcm9tK2U9PXQuZnJvbSYmdGhpcy50bytlPT10LnRvfSxicy5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlLm1hcCh0LHRoaXMsZSxuKX0sYnMud2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IGJzKHQsdCxuZXcgZ3MoZSxuKSl9LGJzLmlubGluZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IGJzKHQsZSxuZXcgd3MobixyKSl9LGJzLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG5ldyBicyh0LGUsbmV3IHhzKG4scikpfSxrcy5zcGVjLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlY30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYnMucHJvdG90eXBlLGtzKTt2YXIgU3M9W10sT3M9e30sQ3M9ZnVuY3Rpb24odCxlKXt0aGlzLmxvY2FsPXQmJnQubGVuZ3RoP3Q6U3MsdGhpcy5jaGlsZHJlbj1lJiZlLmxlbmd0aD9lOlNzfTtDcy5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/RHMoZSx0LDAsT3MpOk1zfSxDcy5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9W107cmV0dXJuIHRoaXMuZmluZElubmVyKG51bGw9PXQ/MDp0LG51bGw9PWU/MWU5OmUsciwwLG4pLHJ9LENzLnByb3RvdHlwZS5maW5kSW5uZXI9ZnVuY3Rpb24odCxlLG4scixvKXtmb3IodmFyIGk9MDtpPHRoaXMubG9jYWwubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5sb2NhbFtpXTtzLmZyb208PWUmJnMudG8+PXQmJighb3x8byhzLnNwZWMpKSYmbi5wdXNoKHMuY29weShzLmZyb20rcixzLnRvK3IpKX1mb3IodmFyIGE9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErPTMpaWYodGhpcy5jaGlsZHJlblthXTxlJiZ0aGlzLmNoaWxkcmVuW2ErMV0+dCl7dmFyIGM9dGhpcy5jaGlsZHJlblthXSsxO3RoaXMuY2hpbGRyZW5bYSsyXS5maW5kSW5uZXIodC1jLGUtYyxuLHIrYyxvKX19LENzLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT1Nc3x8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHxPcyl9LENzLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPTA7czx0aGlzLmxvY2FsLmxlbmd0aDtzKyspe3ZhciBhPXRoaXMubG9jYWxbc10ubWFwKHQsbixyKTthJiZhLnR5cGUudmFsaWQoZSxhKT8oaXx8KGk9W10pKS5wdXNoKGEpOm8ub25SZW1vdmUmJm8ub25SZW1vdmUodGhpcy5sb2NhbFtzXS5zcGVjKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/TnModGhpcy5jaGlsZHJlbixpLHQsZSxuLHIsbyk6aT9uZXcgQ3MoaS5zb3J0KElzKSk6TXN9LENzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dGhpcz09TXM/Q3MuY3JlYXRlKHQsZSk6dGhpcy5hZGRJbm5lcih0LGUsMCk6dGhpc30sQ3MucHJvdG90eXBlLmFkZElubmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPXRoaXMsaT0wO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxzKXt2YXIgYSxjPXMrbjtpZihhPVJzKGUsdCxjKSl7cnx8KHI9by5jaGlsZHJlbi5zbGljZSgpKTt3aGlsZShpPHIubGVuZ3RoJiZyW2ldPHMpaSs9MztyW2ldPT1zP3JbaSsyXT1yW2krMl0uYWRkSW5uZXIodCxhLGMrMSk6ci5zcGxpY2UoaSwwLHMscyt0Lm5vZGVTaXplLERzKGEsdCxjKzEsT3MpKSxpKz0zfX0pKTt2YXIgcz1FcyhpP3pzKGUpOmUsLW4pO3JldHVybiBuZXcgQ3Mocy5sZW5ndGg/dGhpcy5sb2NhbC5jb25jYXQocykuc29ydChJcyk6dGhpcy5sb2NhbCxyfHx0aGlzLmNoaWxkcmVuKX0sQ3MucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09dC5sZW5ndGh8fHRoaXM9PU1zP3RoaXM6dGhpcy5yZW1vdmVJbm5lcih0LDApfSxDcy5wcm90b3R5cGUucmVtb3ZlSW5uZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5jaGlsZHJlbixyPXRoaXMubG9jYWwsbz0wO288bi5sZW5ndGg7bys9Myl7Zm9yKHZhciBpPXZvaWQgMCxzPW5bb10rZSxhPW5bbysxXStlLGM9MCxoPXZvaWQgMDtjPHQubGVuZ3RoO2MrKykoaD10W2NdKSYmaC5mcm9tPnMmJmgudG88YSYmKHRbY109bnVsbCwoaXx8KGk9W10pKS5wdXNoKGgpKTtpZihpKXtuPT10aGlzLmNoaWxkcmVuJiYobj10aGlzLmNoaWxkcmVuLnNsaWNlKCkpO3ZhciBwPW5bbysyXS5yZW1vdmVJbm5lcihpLHMrMSk7cCE9TXM/bltvKzJdPXA6KG4uc3BsaWNlKG8sMyksby09Myl9fWlmKHIubGVuZ3RoKWZvcih2YXIgdT0wLGY9dm9pZCAwO3U8dC5sZW5ndGg7dSsrKWlmKGY9dFt1XSlmb3IodmFyIGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdLmVxKGYsZSkmJihyPT10aGlzLmxvY2FsJiYocj10aGlzLmxvY2FsLnNsaWNlKCkpLHIuc3BsaWNlKGwtLSwxKSk7cmV0dXJuIG49PXRoaXMuY2hpbGRyZW4mJnI9PXRoaXMubG9jYWw/dGhpczpyLmxlbmd0aHx8bi5sZW5ndGg/bmV3IENzKHIsbik6TXN9LENzLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe2lmKHRoaXM9PU1zKXJldHVybiB0aGlzO2lmKGUuaXNMZWFmKXJldHVybiBDcy5lbXB0eTtmb3IodmFyIG4scixvPTA7bzx0aGlzLmNoaWxkcmVuLmxlbmd0aDtvKz0zKWlmKHRoaXMuY2hpbGRyZW5bb10+PXQpe3RoaXMuY2hpbGRyZW5bb109PXQmJihuPXRoaXMuY2hpbGRyZW5bbysyXSk7YnJlYWt9Zm9yKHZhciBpPXQrMSxzPWkrZS5jb250ZW50LnNpemUsYT0wO2E8dGhpcy5sb2NhbC5sZW5ndGg7YSsrKXt2YXIgYz10aGlzLmxvY2FsW2FdO2lmKGMuZnJvbTxzJiZjLnRvPmkmJmMudHlwZSBpbnN0YW5jZW9mIHdzKXt2YXIgaD1NYXRoLm1heChpLGMuZnJvbSktaSxwPU1hdGgubWluKHMsYy50byktaTtoPHAmJihyfHwocj1bXSkpLnB1c2goYy5jb3B5KGgscCkpfX1pZihyKXt2YXIgdT1uZXcgQ3Moci5zb3J0KElzKSk7cmV0dXJuIG4/bmV3IFRzKFt1LG5dKTp1fXJldHVybiBufHxNc30sQ3MucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PXQpcmV0dXJuITA7aWYoISh0IGluc3RhbmNlb2YgQ3MpfHx0aGlzLmxvY2FsLmxlbmd0aCE9dC5sb2NhbC5sZW5ndGh8fHRoaXMuY2hpbGRyZW4ubGVuZ3RoIT10LmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubG9jYWwubGVuZ3RoO2UrKylpZighdGhpcy5sb2NhbFtlXS5lcSh0LmxvY2FsW2VdKSlyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO24rPTMpaWYodGhpcy5jaGlsZHJlbltuXSE9dC5jaGlsZHJlbltuXXx8dGhpcy5jaGlsZHJlbltuKzFdIT10LmNoaWxkcmVuW24rMV18fCF0aGlzLmNoaWxkcmVuW24rMl0uZXEodC5jaGlsZHJlbltuKzJdKSlyZXR1cm4hMTtyZXR1cm4hMH0sQ3MucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtyZXR1cm4gUHModGhpcy5sb2NhbHNJbm5lcih0KSl9LENzLnByb3RvdHlwZS5sb2NhbHNJbm5lcj1mdW5jdGlvbih0KXtpZih0aGlzPT1NcylyZXR1cm4gU3M7aWYodC5pbmxpbmVDb250ZW50fHwhdGhpcy5sb2NhbC5zb21lKHdzLmlzKSlyZXR1cm4gdGhpcy5sb2NhbDtmb3IodmFyIGU9W10sbj0wO248dGhpcy5sb2NhbC5sZW5ndGg7bisrKXRoaXMubG9jYWxbbl0udHlwZSBpbnN0YW5jZW9mIHdzfHxlLnB1c2godGhpcy5sb2NhbFtuXSk7cmV0dXJuIGV9O3ZhciBNcz1uZXcgQ3M7Q3MuZW1wdHk9TXMsQ3MucmVtb3ZlT3ZlcmxhcD1Qczt2YXIgVHM9ZnVuY3Rpb24odCl7dGhpcy5tZW1iZXJzPXR9O2Z1bmN0aW9uIE5zKHQsZSxuLHIsbyxpLHMpe2Zvcih2YXIgYT10LnNsaWNlKCksYz1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIHM9MDtzPGEubGVuZ3RoO3MrPTMpe3ZhciBjPWFbcysxXSxoPXZvaWQgMDstMT09Y3x8dD5jK2l8fChlPj1hW3NdK2k/YVtzKzFdPS0xOm4+PW8mJihoPXItbi0oZS10KSkmJihhW3NdKz1oLGFbcysxXSs9aCkpfX0saD0wO2g8bi5tYXBzLmxlbmd0aDtoKyspbi5tYXBzW2hdLmZvckVhY2goYyk7Zm9yKHZhciBwPSExLHU9MDt1PGEubGVuZ3RoO3UrPTMpaWYoLTE9PWFbdSsxXSl7dmFyIGY9bi5tYXAoYVt1XStpKSxsPWYtbztpZihsPDB8fGw+PXIuY29udGVudC5zaXplKXtwPSEwO2NvbnRpbnVlfXZhciBkPW4ubWFwKHRbdSsxXStpLC0xKSx2PWQtbyxtPXIuY29udGVudC5maW5kSW5kZXgobCkseT1tLmluZGV4LGc9bS5vZmZzZXQsdz1yLm1heWJlQ2hpbGQoeSk7aWYodyYmZz09bCYmZyt3Lm5vZGVTaXplPT12KXt2YXIgeD1hW3UrMl0ubWFwSW5uZXIobix3LGYrMSxhW3VdK2krMSxzKTt4IT1Ncz8oYVt1XT1sLGFbdSsxXT12LGFbdSsyXT14KTooYVt1KzFdPS0yLHA9ITApfWVsc2UgcD0hMH1pZihwKXt2YXIgYj1BcyhhLHQsZXx8W10sbixvLGkscyksaz1EcyhiLHIsMCxzKTtlPWsubG9jYWw7Zm9yKHZhciBTPTA7UzxhLmxlbmd0aDtTKz0zKWFbUysxXTwwJiYoYS5zcGxpY2UoUywzKSxTLT0zKTtmb3IodmFyIE89MCxDPTA7TzxrLmNoaWxkcmVuLmxlbmd0aDtPKz0zKXt2YXIgTT1rLmNoaWxkcmVuW09dO3doaWxlKEM8YS5sZW5ndGgmJmFbQ108TSlDKz0zO2Euc3BsaWNlKEMsMCxrLmNoaWxkcmVuW09dLGsuY2hpbGRyZW5bTysxXSxrLmNoaWxkcmVuW08rMl0pfX1yZXR1cm4gbmV3IENzKGUmJmUuc29ydChJcyksYSl9ZnVuY3Rpb24gRXModCxlKXtpZighZXx8IXQubGVuZ3RoKXJldHVybiB0O2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bi5wdXNoKG5ldyBicyhvLmZyb20rZSxvLnRvK2Usby50eXBlKSl9cmV0dXJuIG59ZnVuY3Rpb24gQXModCxlLG4scixvLGkscyl7ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgYz10LmxvY2FsW2ldLm1hcChyLG8sZSk7Yz9uLnB1c2goYyk6cy5vblJlbW92ZSYmcy5vblJlbW92ZSh0LmxvY2FsW2ldLnNwZWMpfWZvcih2YXIgaD0wO2g8dC5jaGlsZHJlbi5sZW5ndGg7aCs9MylhKHQuY2hpbGRyZW5baCsyXSx0LmNoaWxkcmVuW2hdK2UrMSl9Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKz0zKS0xPT10W2MrMV0mJmEodFtjKzJdLGVbY10raSsxKTtyZXR1cm4gbn1mdW5jdGlvbiBScyh0LGUsbil7aWYoZS5pc0xlYWYpcmV0dXJuIG51bGw7Zm9yKHZhciByPW4rZS5ub2RlU2l6ZSxvPW51bGwsaT0wLHM9dm9pZCAwO2k8dC5sZW5ndGg7aSsrKShzPXRbaV0pJiZzLmZyb20+biYmcy50bzxyJiYoKG98fChvPVtdKSkucHVzaChzKSx0W2ldPW51bGwpO3JldHVybiBvfWZ1bmN0aW9uIHpzKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9dFtuXSYmZS5wdXNoKHRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIERzKHQsZSxuLHIpe3ZhciBvPVtdLGk9ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlLHMpe3ZhciBhPVJzKHQsZSxzK24pO2lmKGEpe2k9ITA7dmFyIGM9RHMoYSxlLG4rcysxLHIpO2MhPU1zJiZvLnB1c2gocyxzK2Uubm9kZVNpemUsYyl9fSkpO2Zvcih2YXIgcz1FcyhpP3pzKHQpOnQsLW4pLnNvcnQoSXMpLGE9MDthPHMubGVuZ3RoO2ErKylzW2FdLnR5cGUudmFsaWQoZSxzW2FdKXx8KHIub25SZW1vdmUmJnIub25SZW1vdmUoc1thXS5zcGVjKSxzLnNwbGljZShhLS0sMSkpO3JldHVybiBzLmxlbmd0aHx8by5sZW5ndGg/bmV3IENzKHMsbyk6TXN9ZnVuY3Rpb24gSXModCxlKXtyZXR1cm4gdC5mcm9tLWUuZnJvbXx8dC50by1lLnRvfWZ1bmN0aW9uIFBzKHQpe2Zvcih2YXIgZT10LG49MDtuPGUubGVuZ3RoLTE7bisrKXt2YXIgcj1lW25dO2lmKHIuZnJvbSE9ci50bylmb3IodmFyIG89bisxO288ZS5sZW5ndGg7bysrKXt2YXIgaT1lW29dO2lmKGkuZnJvbSE9ci5mcm9tKXtpLmZyb208ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtuXT1yLmNvcHkoci5mcm9tLGkuZnJvbSksQnMoZSxvLHIuY29weShpLmZyb20sci50bykpKTticmVha31pLnRvIT1yLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW29dPWkuY29weShpLmZyb20sci50byksQnMoZSxvKzEsaS5jb3B5KHIudG8saS50bykpKX19cmV0dXJuIGV9ZnVuY3Rpb24gQnModCxlLG4pe3doaWxlKGU8dC5sZW5ndGgmJklzKG4sdFtlXSk+MCllKys7dC5zcGxpY2UoZSwwLG4pfWZ1bmN0aW9uIEZzKHQpe3ZhciBlPVtdO3JldHVybiB0LnNvbWVQcm9wKCJkZWNvcmF0aW9ucyIsKGZ1bmN0aW9uKG4pe3ZhciByPW4odC5zdGF0ZSk7ciYmciE9TXMmJmUucHVzaChyKX0pKSx0LmN1cnNvcldyYXBwZXImJmUucHVzaChDcy5jcmVhdGUodC5zdGF0ZS5kb2MsW3QuY3Vyc29yV3JhcHBlci5kZWNvXSkpLFRzLmZyb20oZSl9VHMucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYoZS5pc0xlYWYpcmV0dXJuIENzLmVtcHR5O2Zvcih2YXIgbj1bXSxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmZvckNoaWxkKHQsZSk7byE9TXMmJihvIGluc3RhbmNlb2YgVHM/bj1uLmNvbmNhdChvLm1lbWJlcnMpOm4ucHVzaChvKSl9cmV0dXJuIFRzLmZyb20obil9LFRzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBUcyl8fHQubWVtYmVycy5sZW5ndGghPXRoaXMubWVtYmVycy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLm1lbWJlcnMubGVuZ3RoO2UrKylpZighdGhpcy5tZW1iZXJzW2VdLmVxKHQubWVtYmVyc1tlXSkpcmV0dXJuITE7cmV0dXJuITB9LFRzLnByb3RvdHlwZS5sb2NhbHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITAscj0wO3I8dGhpcy5tZW1iZXJzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMubWVtYmVyc1tyXS5sb2NhbHNJbm5lcih0KTtpZihvLmxlbmd0aClpZihlKXtuJiYoZT1lLnNsaWNlKCksbj0hMSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspZS5wdXNoKG9baV0pfWVsc2UgZT1vfXJldHVybiBlP1BzKG4/ZTplLnNvcnQoSXMpKTpTc30sVHMuZnJvbT1mdW5jdGlvbih0KXtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gTXM7Y2FzZSAxOnJldHVybiB0WzBdO2RlZmF1bHQ6cmV0dXJuIG5ldyBUcyh0KX19O3ZhciBqcz1mdW5jdGlvbih0LGUpe3RoaXMuX3Byb3BzPWUsdGhpcy5zdGF0ZT1lLnN0YXRlLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5kb209dCYmdC5tb3VudHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdCYmKHQuYXBwZW5kQ2hpbGQ/dC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6dC5hcHBseT90KHRoaXMuZG9tKTp0Lm1vdW50JiYodGhpcy5tb3VudGVkPSEwKSksdGhpcy5lZGl0YWJsZT1Mcyh0aGlzKSx0aGlzLm1hcmtDdXJzb3I9bnVsbCx0aGlzLmN1cnNvcldyYXBwZXI9bnVsbCxKcyh0aGlzKSx0aGlzLm5vZGVWaWV3cz1xcyh0aGlzKSx0aGlzLmRvY1ZpZXc9Zm8odGhpcy5zdGF0ZS5kb2MsJHModGhpcyksRnModGhpcyksdGhpcy5kb20sdGhpcyksdGhpcy5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsLHRoaXMuZHJhZ2dpbmc9bnVsbCxqaSh0aGlzKSx0aGlzLnBsdWdpblZpZXdzPVtdLHRoaXMudXBkYXRlUGx1Z2luVmlld3MoKX0sX3M9e3Byb3BzOntjb25maWd1cmFibGU6ITB9LHJvb3Q6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uICRzKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGUuY2xhc3M9IlByb3NlTWlycm9yIixlLmNvbnRlbnRlZGl0YWJsZT1TdHJpbmcodC5lZGl0YWJsZSksdC5zb21lUHJvcCgiYXR0cmlidXRlcyIsKGZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYobj1uKHQuc3RhdGUpKSxuKWZvcih2YXIgciBpbiBuKSJjbGFzcyI9PXI/ZS5jbGFzcys9IiAiK25bcl06ZVtyXXx8ImNvbnRlbnRlZGl0YWJsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fChlW3JdPVN0cmluZyhuW3JdKSl9KSksW2JzLm5vZGUoMCx0LnN0YXRlLmRvYy5jb250ZW50LnNpemUsZSldfWZ1bmN0aW9uIEpzKHQpe2lmKHQubWFya0N1cnNvcil7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7ZS5zZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiLCJ0cnVlIiksdC5jdXJzb3JXcmFwcGVyPXtkb206ZSxkZWNvOmJzLndpZGdldCh0LnN0YXRlLnNlbGVjdGlvbi5oZWFkLGUse3JhdzohMCxtYXJrczp0Lm1hcmtDdXJzb3J9KX19ZWxzZSB0LmN1cnNvcldyYXBwZXI9bnVsbH1mdW5jdGlvbiBMcyh0KXtyZXR1cm4hdC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSl9ZnVuY3Rpb24gVnModCxlKXt2YXIgbj1NYXRoLm1pbih0LiRhbmNob3Iuc2hhcmVkRGVwdGgodC5oZWFkKSxlLiRhbmNob3Iuc2hhcmVkRGVwdGgoZS5oZWFkKSk7cmV0dXJuIHQuJGFuY2hvci5zdGFydChuKSE9ZS4kYW5jaG9yLnN0YXJ0KG4pfWZ1bmN0aW9uIHFzKHQpe3ZhciBlPXt9O3JldHVybiB0LnNvbWVQcm9wKCJub2RlVmlld3MiLChmdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKXx8KGVbbl09dFtuXSl9KSksZX1mdW5jdGlvbiBXcyh0LGUpe3ZhciBuPTAscj0wO2Zvcih2YXIgbyBpbiB0KXtpZih0W29dIT1lW29dKXJldHVybiEwO24rK31mb3IodmFyIGkgaW4gZSlyKys7cmV0dXJuIG4hPXJ9ZnVuY3Rpb24gSHModCl7dmFyIGU9dC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNPZmZzZXQscj1lLmZvY3VzTm9kZTtyZXR1cm4gciYmMT09ci5ub2RlVHlwZT9bcixuLHIuY2hpbGROb2Rlc1tuLTFdLHIuY2hpbGROb2Rlc1tuXV06bnVsbH1mdW5jdGlvbiBLcyh0LGUpe3ZhciBuPUhzKGUpO2lmKCFufHwzPT1uWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKG5bcl0hPXRbcl0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gVXModCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxpPWUuY2hpbGQocik7aWYobyE9aSl7aWYoIW8uc2FtZU1hcmt1cChpKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1pLnRleHQpe2Zvcih2YXIgcz0wO28udGV4dFtzXT09aS50ZXh0W3NdO3MrKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fGkuY29udGVudC5zaXplKXt2YXIgYT1VcyhvLmNvbnRlbnQsaS5jb250ZW50LG4rMSk7aWYobnVsbCE9YSlyZXR1cm4gYX1uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gR3ModCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1pKXJldHVybiBvPT1pP251bGw6e2E6bixiOnJ9O3ZhciBzPXQuY2hpbGQoLS1vKSxhPWUuY2hpbGQoLS1pKSxjPXMubm9kZVNpemU7aWYocyE9YSl7aWYoIXMuc2FtZU1hcmt1cChhKSlyZXR1cm57YTpuLGI6cn07aWYocy5pc1RleHQmJnMudGV4dCE9YS50ZXh0KXt2YXIgaD0wLHA9TWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxhLnRleHQubGVuZ3RoKTt3aGlsZShoPHAmJnMudGV4dFtzLnRleHQubGVuZ3RoLWgtMV09PWEudGV4dFthLnRleHQubGVuZ3RoLWgtMV0paCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKHMuY29udGVudC5zaXplfHxhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9R3Mocy5jb250ZW50LGEuY29udGVudCxuLTEsci0xKTtpZih1KXJldHVybiB1fW4tPWMsci09Y31lbHNlIG4tPWMsci09Y319X3MucHJvcHMuZ2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fcHJvcHMuc3RhdGUhPXRoaXMuc3RhdGUpe3ZhciB0PXRoaXMuX3Byb3BzO2Zvcih2YXIgZSBpbiB0aGlzLl9wcm9wcz17fSx0KXRoaXMuX3Byb3BzW2VdPXRbZV07dGhpcy5fcHJvcHMuc3RhdGU9dGhpcy5zdGF0ZX1yZXR1cm4gdGhpcy5fcHJvcHN9LGpzLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dC5oYW5kbGVET01FdmVudHMhPXRoaXMuX3Byb3BzLmhhbmRsZURPTUV2ZW50cyYmSmkodGhpcyksdGhpcy5fcHJvcHM9dCx0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodC5zdGF0ZSwhMCl9LGpzLnByb3RvdHlwZS5zZXRQcm9wcz1mdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdGhpcy5fcHJvcHMpZVtuXT10aGlzLl9wcm9wc1tuXTtmb3IodmFyIHIgaW4gZS5zdGF0ZT10aGlzLnN0YXRlLHQpZVtyXT10W3JdO3RoaXMudXBkYXRlKGUpfSxqcy5wcm90b3R5cGUudXBkYXRlU3RhdGU9ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVTdGF0ZUlubmVyKHQsdGhpcy5zdGF0ZS5wbHVnaW5zIT10LnBsdWdpbnMpfSxqcy5wcm90b3R5cGUudXBkYXRlU3RhdGVJbm5lcj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj10aGlzLnN0YXRlLG89ITE7aWYodGhpcy5zdGF0ZT10LGUpe3ZhciBpPXFzKHRoaXMpO1dzKGksdGhpcy5ub2RlVmlld3MpJiYodGhpcy5ub2RlVmlld3M9aSxvPSEwKSxKaSh0aGlzKX10aGlzLmVkaXRhYmxlPUxzKHRoaXMpLEpzKHRoaXMpO3ZhciBzPUZzKHRoaXMpLGE9JHModGhpcyksYz1lPyJyZXNldCI6dC5zY3JvbGxUb1NlbGVjdGlvbj5yLnNjcm9sbFRvU2VsZWN0aW9uPyJ0byBzZWxlY3Rpb24iOiJwcmVzZXJ2ZSIsaD1vfHwhdGhpcy5kb2NWaWV3Lm1hdGNoZXNOb2RlKHQuZG9jLGEscykscD1ofHwhdC5zZWxlY3Rpb24uZXEoci5zZWxlY3Rpb24pLHU9InByZXNlcnZlIj09YyYmcCYmbnVsbD09dGhpcy5kb20uc3R5bGUub3ZlcmZsb3dBbmNob3ImJkVyKHRoaXMpO2lmKHApe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpO3ZhciBmPWgmJihoci5pZXx8aHIuY2hyb21lKSYmIXRoaXMuY29tcG9zaW5nJiYhci5zZWxlY3Rpb24uZW1wdHkmJiF0LnNlbGVjdGlvbi5lbXB0eSYmVnMoci5zZWxlY3Rpb24sdC5zZWxlY3Rpb24pO2lmKGgpe3ZhciBsPWhyLmNocm9tZSYmSHModGhpcy5yb290KTshbyYmdGhpcy5kb2NWaWV3LnVwZGF0ZSh0LmRvYyxhLHMsdGhpcyl8fCh0aGlzLmRvY1ZpZXcudXBkYXRlT3V0ZXJEZWNvKFtdKSx0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1mbyh0LmRvYyxhLHMsdGhpcy5kb20sdGhpcykpLGwmJktzKGwsdGhpcy5yb290KSYmKGY9ITApfWZ8fCEodGhpcy5tb3VzZURvd24mJnRoaXMuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh0aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkpJiZjaSh0aGlzKSk/WG8odGhpcyxmKToocmkodGhpcyx0LnNlbGVjdGlvbiksdGhpcy5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfWlmKHRoaXMudXBkYXRlUGx1Z2luVmlld3MociksInJlc2V0Ij09Yyl0aGlzLmRvbS5zY3JvbGxUb3A9MDtlbHNlIGlmKCJ0byBzZWxlY3Rpb24iPT1jKXt2YXIgZD10aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlO3RoaXMuc29tZVByb3AoImhhbmRsZVNjcm9sbFRvU2VsZWN0aW9uIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQobil9KSl8fCh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIEpuP05yKHRoaXMsdGhpcy5kb2NWaWV3LmRvbUFmdGVyUG9zKHQuc2VsZWN0aW9uLmZyb20pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQpOk5yKHRoaXMsdGhpcy5jb29yZHNBdFBvcyh0LnNlbGVjdGlvbi5oZWFkKSxkKSl9ZWxzZSB1JiZScih1KX0sanMucHJvdG90eXBlLmRlc3Ryb3lQbHVnaW5WaWV3cz1mdW5jdGlvbigpe3ZhciB0O3doaWxlKHQ9dGhpcy5wbHVnaW5WaWV3cy5wb3AoKSl0LmRlc3Ryb3kmJnQuZGVzdHJveSgpfSxqcy5wcm90b3R5cGUudXBkYXRlUGx1Z2luVmlld3M9ZnVuY3Rpb24odCl7aWYodCYmdC5wbHVnaW5zPT10aGlzLnN0YXRlLnBsdWdpbnMpZm9yKHZhciBlPTA7ZTx0aGlzLnBsdWdpblZpZXdzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGx1Z2luVmlld3NbZV07bi51cGRhdGUmJm4udXBkYXRlKHRoaXMsdCl9ZWxzZXt0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpO2Zvcih2YXIgcj0wO3I8dGhpcy5zdGF0ZS5wbHVnaW5zLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3RhdGUucGx1Z2luc1tyXTtvLnNwZWMudmlldyYmdGhpcy5wbHVnaW5WaWV3cy5wdXNoKG8uc3BlYy52aWV3KHRoaXMpKX19fSxqcy5wcm90b3R5cGUuc29tZVByb3A9ZnVuY3Rpb24odCxlKXt2YXIgbixyPXRoaXMuX3Byb3BzJiZ0aGlzLl9wcm9wc1t0XTtpZihudWxsIT1yJiYobj1lP2Uocik6cikpcmV0dXJuIG47dmFyIG89dGhpcy5zdGF0ZS5wbHVnaW5zO2lmKG8pZm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0ucHJvcHNbdF07aWYobnVsbCE9cyYmKG49ZT9lKHMpOnMpKXJldHVybiBufX0sanMucHJvdG90eXBlLmhhc0ZvY3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50PT10aGlzLmRvbX0sanMucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5lZGl0YWJsZSYmSXIodGhpcy5kb20pLFhvKHRoaXMpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX0sX3Mucm9vdC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yb290O2lmKG51bGw9PXQpZm9yKHZhciBlPXRoaXMuZG9tLnBhcmVudE5vZGU7ZTtlPWUucGFyZW50Tm9kZSlpZig5PT1lLm5vZGVUeXBlfHwxMT09ZS5ub2RlVHlwZSYmZS5ob3N0KXJldHVybiBlLmdldFNlbGVjdGlvbnx8KE9iamVjdC5nZXRQcm90b3R5cGVPZihlKS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCl9KSx0aGlzLl9yb290PWU7cmV0dXJuIHR8fGRvY3VtZW50fSxqcy5wcm90b3R5cGUucG9zQXRDb29yZHM9ZnVuY3Rpb24odCl7cmV0dXJuIExyKHRoaXMsdCl9LGpzLnByb3RvdHlwZS5jb29yZHNBdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gcXIodGhpcyx0KX0sanMucHJvdG90eXBlLmRvbUF0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvY1ZpZXcuZG9tRnJvbVBvcyh0KX0sanMucHJvdG90eXBlLm5vZGVET009ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb2NWaWV3LmRlc2NBdCh0KTtyZXR1cm4gZT9lLm5vZGVET006bnVsbH0sanMucHJvdG90eXBlLnBvc0F0RE9NPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0tMSk7dmFyIHI9dGhpcy5kb2NWaWV3LnBvc0Zyb21ET00odCxlLG4pO2lmKG51bGw9PXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkRPTSBwb3NpdGlvbiBub3QgaW5zaWRlIHRoZSBlZGl0b3IiKTtyZXR1cm4gcn0sanMucHJvdG90eXBlLmVuZE9mVGV4dGJsb2NrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRvKHRoaXMsZXx8dGhpcy5zdGF0ZSx0KX0sanMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRvY1ZpZXcmJigkaSh0aGlzKSx0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpLHRoaXMubW91bnRlZD8odGhpcy5kb2NWaWV3LnVwZGF0ZSh0aGlzLnN0YXRlLmRvYyxbXSxGcyh0aGlzKSx0aGlzKSx0aGlzLmRvbS50ZXh0Q29udGVudD0iIik6dGhpcy5kb20ucGFyZW50Tm9kZSYmdGhpcy5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbSksdGhpcy5kb2NWaWV3LmRlc3Ryb3koKSx0aGlzLmRvY1ZpZXc9bnVsbCl9LGpzLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBxaSh0aGlzLHQpfSxqcy5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcHJvcHMuZGlzcGF0Y2hUcmFuc2FjdGlvbjtlP2UuY2FsbCh0aGlzLHQpOnRoaXMudXBkYXRlU3RhdGUodGhpcy5zdGF0ZS5hcHBseSh0KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGpzLnByb3RvdHlwZSxfcyk7dmFyIFhzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LFlzPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtYcy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIGg9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC1oKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWgpLG4scitoKX1zPWN9fSxYcy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LFhzLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LFhzLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IFhzKHIsdGhpcy5zaXplK3Quc2l6ZSl9LFhzLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgcz10aGlzLmNvbnRlbnRbb10sYT1pK3Mubm9kZVNpemU7YT50JiYoKGk8dHx8YT5lKSYmKHM9cy5pc1RleHQ/cy5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKHMudGV4dC5sZW5ndGgsZS1pKSk6cy5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4ocy5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKHMpLHIrPXMubm9kZVNpemUpLGk9YX1yZXR1cm4gbmV3IFhzKG4scil9LFhzLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/WHMuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBYcyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LFhzLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgWHMocixvKX0sWHMucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBYcyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxYcy5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBYcyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sWHMucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LFlzLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LFlzLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxZcy5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxYcy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LFhzLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LFhzLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LFhzLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLFVzKHRoaXMsdCxlKX0sWHMucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLEdzKHRoaXMsdCxlLG4pfSxYcy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIFFzKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBRcyh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9RcyhuKzEsaSk6UXMobixyKTtyPWl9fSxYcy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxYcy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sWHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LFhzLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIFhzLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgWHMoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0sWHMuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gWHMuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBYcyhlfHx0LG4pfSxYcy5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBYcy5lbXB0eTtpZih0IGluc3RhbmNlb2YgWHMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IFhzKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoWHMucHJvdG90eXBlLFlzKTt2YXIgWnM9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIFFzKHQsZSl7cmV0dXJuIFpzLmluZGV4PXQsWnMub2Zmc2V0PWUsWnN9ZnVuY3Rpb24gdGEodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXRhKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF0YSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1Ycy5lbXB0eT1uZXcgWHMoW10sMCk7dmFyIGVhPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBuYSh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPW5hLnByb3RvdHlwZSxlfWVhLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sZWEucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxlYS5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxlYS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ0YSh0aGlzLmF0dHJzLHQuYXR0cnMpfSxlYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LGVhLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxlYS5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGVhLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBlYS5ub25lO2lmKHQgaW5zdGFuY2VvZiBlYSlyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGVhLm5vbmU9W10sbmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxuYS5wcm90b3R5cGUuY29uc3RydWN0b3I9bmEsbmEucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIHJhPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxvYT17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gaWEodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGg9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGghPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KGlhKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBzYSh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPXNhKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGFhKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBuYSgiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgbmEoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiBjYSh0LGUsbiwwKX1mdW5jdGlvbiBjYSh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9Y2EodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPW1hKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIGxhKGksZGEodCxjLGgsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIGxhKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBsYShpLHZhKHQsZSxyKSl9ZnVuY3Rpb24gaGEodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IG5hKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBwYSh0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiBoYShyLGUubm9kZShuKSkscn1mdW5jdGlvbiB1YSh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIGZhKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKHVhKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspdWEoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJnVhKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBsYSh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBuYSgiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gZGEodCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJnBhKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZwYShuLHIsbysxKSxhPVtdO3JldHVybiBmYShudWxsLHQsbyxhKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyhoYShpLHMpLHVhKGxhKGksZGEodCxlLG4scixvKzEpKSxhKSk6KGkmJnVhKGxhKGksdmEodCxlLG8rMSkpLGEpLGZhKGUsbixvLGEpLHMmJnVhKGxhKHMsdmEobixyLG8rMSkpLGEpKSxmYShyLG51bGwsbyxhKSxuZXcgWHMoYSl9ZnVuY3Rpb24gdmEodCxlLG4pe3ZhciByPVtdO2lmKGZhKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89cGEodCxlLG4rMSk7dWEobGEobyx2YSh0LGUsbisxKSkscil9cmV0dXJuIGZhKGUsbnVsbCxuLHIpLG5ldyBYcyhyKX1mdW5jdGlvbiBtYSh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShYcy5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fW9hLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0scmEucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49c2EodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IHJhKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0scmEucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHJhKGlhKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LHJhLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LHJhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxyYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxyYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiByYS5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHJhKFhzLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxyYS5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgcmEodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhyYS5wcm90b3R5cGUsb2EpLHJhLmVtcHR5PW5ldyByYShYcy5lbXB0eSwwLDApO3ZhciB5YT1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxnYT17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTt5YS5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxnYS5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sZ2EuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LHlhLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LHlhLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LHlhLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSx5YS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0seWEucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LHlhLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0seWEucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sZ2EudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LGdhLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxnYS5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0seWEucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGVhLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0seWEucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0seWEucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LHlhLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyBrYSh0aGlzLHQsbil9LHlhLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LHlhLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30seWEucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSx5YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0seWEucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IHlhKGUsbixvKX0seWEucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248d2EubGVuZ3RoO24rKyl7dmFyIHI9d2Fbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPXdhW3hhXT15YS5yZXNvbHZlKHQsZSk7cmV0dXJuIHhhPSh4YSsxKSViYSxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh5YS5wcm90b3R5cGUsZ2EpO3ZhciB3YT1bXSx4YT0wLGJhPTEyLGthPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFNhPXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O1NhLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxTYS5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFNhLnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxTYS5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxTYS5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoa2EucHJvdG90eXBlLFNhKTt2YXIgT2E9T2JqZWN0LmNyZWF0ZShudWxsKSxDYT1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fFhzLmVtcHR5LHRoaXMubWFya3M9cnx8ZWEubm9uZX0sTWE9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtNYS5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxNYS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sQ2EucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LENhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sQ2EucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LENhLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxDYS5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sTWEudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LENhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxNYS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sTWEubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxDYS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LENhLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sQ2EucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdGEodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8T2EpJiZlYS5zYW1lU2V0KHRoaXMubWFya3Msbnx8ZWEubm9uZSl9LENhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxDYS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sQ2EucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxDYS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gcmEuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgcmEoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sQ2EucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBhYSh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxDYS5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sQ2EucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sQ2EucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LENhLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiB5YS5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LENhLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4geWEucmVzb2x2ZSh0aGlzLHQpfSxDYS5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxNYS5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sTWEuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sTWEuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LE1hLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LE1hLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sTWEuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxNYS5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LENhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxOYSh0aGlzLm1hcmtzLHQpfSxDYS5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxDYS5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPVhzLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbykscz1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFzfHwhcy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGE9cjthPG87YSsrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChhKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LENhLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LENhLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LENhLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxDYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sQ2EuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9WHMuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2EucHJvdG90eXBlLE1hKTt2YXIgVGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6TmEodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShDYSk7ZnVuY3Rpb24gTmEodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgRWE9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sQWE9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtFYS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBSYSh0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gRWEuZW1wdHk7dmFyIHI9RGEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89VmEoJGEocikpO3JldHVybiBxYShvLG4pLG99LEVhLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sRWEucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxBYS5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LEFhLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxFYS5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sRWEucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIFhzLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBjPTA7YzxpLm5leHQubGVuZ3RoO2MrPTIpe3ZhciBoPWkubmV4dFtjXSxwPWkubmV4dFtjKzFdO2lmKCFoLmlzVGV4dCYmIWguaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHApKXtyLnB1c2gocCk7dmFyIHU9byhwLHMuY29uY2F0KGgpKTtpZih1KXJldHVybiB1fX19cmV0dXJuIG8odGhpcyxbXSl9LEVhLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LEVhLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxBYS5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LEVhLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxFYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFYS5wcm90b3R5cGUsQWEpLEVhLmVtcHR5PW5ldyBFYSghMCk7dmFyIFJhPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSx6YT17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gRGEodCl7dmFyIGU9W107ZG97ZS5wdXNoKElhKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBJYSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goUGEodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBQYSh0KXtmb3IodmFyIGU9X2EodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9RmEodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBCYSh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gRmEodCxlKXt2YXIgbj1CYSh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0JhKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIGphKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gX2EodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9RGEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49amEodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gJGEodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIEphKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBMYSh0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChKYSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIFZhKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oTGEodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07TGEodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgRWEoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChKYSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHFhKHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIFdhKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBIYSh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIEthKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBYYSh0W25dKTtyZXR1cm4gZX16YS5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LFJhLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sUmEucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJhLnByb3RvdHlwZSx6YSk7dmFyIFVhPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9S2Eobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9V2EodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LEdhPXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtHYS5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxHYS5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LEdhLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PUVhLmVtcHR5fSxHYS5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sVWEucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LFVhLnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LFVhLnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOkhhKHRoaXMuYXR0cnMsdCl9LFVhLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBDYSh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLFhzLmZyb20oZSksZWEuc2V0RnJvbShuKSl9LFVhLnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPVhzLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgQ2EodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGVhLnNldEZyb20obikpfSxVYS5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPVhzLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKFhzLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgQ2EodGhpcyx0LGUuYXBwZW5kKG8pLGVhLnNldEZyb20obikpOm51bGx9LFVhLnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxVYS5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LFVhLnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sVWEucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTplYS5lbXB0eTp0fSxVYS5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IFVhKHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFVhLnByb3RvdHlwZSxHYSk7dmFyIFhhPWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LFlhPXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTtZYS5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFhhLnByb3RvdHlwZSxZYSk7dmFyIFphPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1LYShyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89V2EodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgZWEodGhpcyxvKX07WmEucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBlYSh0aGlzLEhhKHRoaXMuYXR0cnMsdCkpfSxaYS5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgWmEodCxyKyssZSxvKX0pKSxufSxaYS5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sWmEucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxaYS5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIFFhPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9Y1siYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPWNbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9VWEuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1aYS5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0aGlzLm5vZGVzKXtpZihyIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IocisiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLnNwZWMuY29udGVudHx8IiIscz1vLnNwZWMubWFya3M7by5jb250ZW50TWF0Y2g9bltpXXx8KG5baV09RWEucGFyc2UoaSx0aGlzLm5vZGVzKSksby5pbmxpbmVDb250ZW50PW8uY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsby5tYXJrU2V0PSJfIj09cz9udWxsOnM/dGModGhpcyxzLnNwbGl0KCIgIikpOiIiIT1zJiZvLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGEgaW4gdGhpcy5tYXJrcyl7dmFyIGg9dGhpcy5tYXJrc1thXSxwPWguc3BlYy5leGNsdWRlcztoLmV4Y2x1ZGVkPW51bGw9PXA/W2hdOiIiPT1wP1tdOnRjKHRoaXMscC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gdGModCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59UWEucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIFVhKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sUWEucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBUYShuLG4uZGVmYXVsdEF0dHJzLHQsZWEuc2V0RnJvbShlKSl9LFFhLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0sUWEucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gQ2EuZnJvbUpTT04odGhpcyx0KX0sUWEucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gZWEuZnJvbUpTT04odGhpcyx0KX0sUWEucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgZWM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O2VjLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgcGModGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxlYy5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgcGModGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxyYS5tYXhPcGVuKG4uZmluaXNoKCkpfSxlYy5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYobGModCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSxlYy5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxlYy5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PXZjKHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9dmModCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LGVjLmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgZWModCxlYy5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgbmM9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0scmM9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sb2M9e29sOiEwLHVsOiEwfSxpYz0xLHNjPTIsYWM9NDtmdW5jdGlvbiBjYyh0KXtyZXR1cm4odD9pYzowKXwoImZ1bGwiPT09dD9zYzowKX12YXIgaGM9ZnVuY3Rpb24odCxlLG4scixvLGkscyl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9byx0aGlzLm1hdGNoPWl8fChzJmFjP251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1zLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz1lYS5ub25lLHRoaXMucGVuZGluZ01hcmtzPXJ9O2hjLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKFhzLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSxoYy5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJmljKSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1Ycy5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShYcy5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn0saGMucHJvdG90eXBlLmFwcGx5UGVuZGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucGVuZGluZ01hcmtzO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdOyh0aGlzLnR5cGU/dGhpcy50eXBlLmFsbG93c01hcmtUeXBlKHIudHlwZSk6bWMoci50eXBlLHQpKSYmIXIuaXNJblNldCh0aGlzLmFjdGl2ZU1hcmtzKSYmKHRoaXMuYWN0aXZlTWFya3M9ci5hZGRUb1NldCh0aGlzLmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcz1yLnJlbW92ZUZyb21TZXQodGhpcy5wZW5kaW5nTWFya3MpKX19O3ZhciBwYz1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uO3ZhciByLG89ZS50b3BOb2RlLGk9Y2MoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2FjOjApO3I9bz9uZXcgaGMoby50eXBlLG8uYXR0cnMsZWEubm9uZSxlYS5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IGhjKG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLGVhLm5vbmUsZWEubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSx1Yz17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGZjKHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJm9jLmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIGxjKHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gZGModCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIHZjKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBtYyh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19dWMudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LHBjLnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhkYyhlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSxwYy5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmaWMpbi5vcHRpb25zJnNjfHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LHBjLnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtvYy5oYXNPd25Qcm9wZXJ0eShlKSYmZmModCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOnJjLmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKG5jLmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LHBjLnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LHBjLnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1lYS5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSxwYy5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGksYSl9LHBjLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmbmMuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0scGMucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSxwYy5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDtuLmFwcGx5UGVuZGluZyh0LnR5cGUpLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LHBjLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiZ0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pLHJ9LHBjLnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28uYXBwbHlQZW5kaW5nKHQpLG8ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+YWM6Y2Mocik7by5vcHRpb25zJmFjJiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9YWMpLHRoaXMubm9kZXMucHVzaChuZXcgaGModCxlLG8uYWN0aXZlTWFya3Msby5wZW5kaW5nTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30scGMucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSxwYy5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0scGMucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0sdWMuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LHBjLnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxwYy5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0scGMucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSxwYy5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSxwYy5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBoPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWh8fGgubmFtZSE9YyYmLTE9PWguZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LHBjLnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LHBjLnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnRvcC5wZW5kaW5nTWFya3M9dC5hZGRUb1NldCh0aGlzLnRvcC5wZW5kaW5nTWFya3MpfSxwYy5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5vcGVuO24+PTA7bi0tKXt2YXIgcj10aGlzLm5vZGVzW25dLG89ci5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYobz4tMT9yLnBlbmRpbmdNYXJrcz10LnJlbW92ZUZyb21TZXQoci5wZW5kaW5nTWFya3MpOnIuYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIuYWN0aXZlTWFya3MpLHI9PWUpYnJlYWt9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwYy5wcm90b3R5cGUsdWMpO3ZhciB5Yz1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gZ2ModCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiB3Yyh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fXljLnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49d2MoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0seWMucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49eWMucmVuZGVyU3BlYyh3YyhlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0seWMucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LHljLnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJnljLnJlbmRlclNwZWMod2Mobikscih0LGUpKX0seWMucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49bnVsbCksInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciByPWVbMF0sbz1yLmluZGV4T2YoIiAiKTtvPjAmJihuPXIuc2xpY2UoMCxvKSxyPXIuc2xpY2UobysxKSk7dmFyIGk9bnVsbCxzPW4/dC5jcmVhdGVFbGVtZW50TlMobixyKTp0LmNyZWF0ZUVsZW1lbnQociksYT1lWzFdLGM9MTtpZihhJiYib2JqZWN0Ij09dHlwZW9mIGEmJm51bGw9PWEubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KGEpKWZvcih2YXIgaCBpbiBjPTIsYSlpZihudWxsIT1hW2hdKXt2YXIgcD1oLmluZGV4T2YoIiAiKTtwPjA/cy5zZXRBdHRyaWJ1dGVOUyhoLnNsaWNlKDAscCksaC5zbGljZShwKzEpLGFbaF0pOnMuc2V0QXR0cmlidXRlKGgsYVtoXSl9Zm9yKHZhciB1PWM7dTxlLmxlbmd0aDt1Kyspe3ZhciBmPWVbdV07aWYoMD09PWYpe2lmKHU8ZS5sZW5ndGgtMXx8dT5jKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOnMsY29udGVudERPTTpzfX12YXIgbD15Yy5yZW5kZXJTcGVjKHQsZixuKSxkPWwuZG9tLHY9bC5jb250ZW50RE9NO2lmKHMuYXBwZW5kQ2hpbGQoZCksdil7aWYoaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO2k9dn19cmV0dXJue2RvbTpzLGNvbnRlbnRET006aX19LHljLmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyB5Yyh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSx5Yy5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9Z2ModC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0seWMubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBnYyh0Lm1hcmtzKX07dmFyIHhjPW4oIjUzMTMiKTtmdW5jdGlvbiBiYyh0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLG5ldyB4Y1siYyJdKHt2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcga2MoZSx0KX19KX12YXIga2M9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuZWRpdG9yVmlldz10LHRoaXMud2lkdGg9ZS53aWR0aHx8MSx0aGlzLmNvbG9yPWUuY29sb3J8fCJibGFjayIsdGhpcy5jbGFzcz1lLmNsYXNzLHRoaXMuY3Vyc29yUG9zPW51bGwsdGhpcy5lbGVtZW50PW51bGwsdGhpcy50aW1lb3V0PW51bGwsdGhpcy5oYW5kbGVycz1bImRyYWdvdmVyIiwiZHJhZ2VuZCIsImRyb3AiLCJkcmFnbGVhdmUiXS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciByPWZ1bmN0aW9uKHQpe3JldHVybiBuW2VdKHQpfTtyZXR1cm4gdC5kb20uYWRkRXZlbnRMaXN0ZW5lcihlLHIpLHtuYW1lOmUsaGFuZGxlcjpyfX0pKX07a2MucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaGFuZGxlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5uYW1lLHI9ZS5oYW5kbGVyO3JldHVybiB0LmVkaXRvclZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIobixyKX0pKX0sa2MucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe251bGwhPXRoaXMuY3Vyc29yUG9zJiZlLmRvYyE9dC5zdGF0ZS5kb2MmJnRoaXMudXBkYXRlT3ZlcmxheSgpfSxrYy5wcm90b3R5cGUuc2V0Q3Vyc29yPWZ1bmN0aW9uKHQpe3QhPXRoaXMuY3Vyc29yUG9zJiYodGhpcy5jdXJzb3JQb3M9dCxudWxsPT10Pyh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD1udWxsKTp0aGlzLnVwZGF0ZU92ZXJsYXkoKSl9LGtjLnByb3RvdHlwZS51cGRhdGVPdmVybGF5PWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmVkaXRvclZpZXcuc3RhdGUuZG9jLnJlc29sdmUodGhpcy5jdXJzb3JQb3MpO2lmKCFlLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgbj1lLm5vZGVCZWZvcmUscj1lLm5vZGVBZnRlcjtpZihufHxyKXt2YXIgbz10aGlzLmVkaXRvclZpZXcubm9kZURPTSh0aGlzLmN1cnNvclBvcy0obj9uLm5vZGVTaXplOjApKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPW4/by5ib3R0b206by50b3A7biYmciYmKGk9KGkrdGhpcy5lZGl0b3JWaWV3Lm5vZGVET00odGhpcy5jdXJzb3JQb3MpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkvMiksdD17bGVmdDpvLmxlZnQscmlnaHQ6by5yaWdodCx0b3A6aS10aGlzLndpZHRoLzIsYm90dG9tOmkrdGhpcy53aWR0aC8yfX19aWYoIXQpe3ZhciBzPXRoaXMuZWRpdG9yVmlldy5jb29yZHNBdFBvcyh0aGlzLmN1cnNvclBvcyk7dD17bGVmdDpzLmxlZnQtdGhpcy53aWR0aC8yLHJpZ2h0OnMubGVmdCt0aGlzLndpZHRoLzIsdG9wOnMudG9wLGJvdHRvbTpzLmJvdHRvbX19dmFyIGE9dGhpcy5lZGl0b3JWaWV3LmRvbS5vZmZzZXRQYXJlbnQ7dGhpcy5lbGVtZW50fHwodGhpcy5lbGVtZW50PWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLHRoaXMuY2xhc3MmJih0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPXRoaXMuY2xhc3MpLHRoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogYWJzb2x1dGU7IHotaW5kZXg6IDUwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLmNvbG9yKTt2YXIgYz0hYXx8YT09ZG9jdW1lbnQuYm9keSYmInN0YXRpYyI9PWdldENvbXB1dGVkU3R5bGUoYSkucG9zaXRpb24/e2xlZnQ6LXBhZ2VYT2Zmc2V0LHRvcDotcGFnZVlPZmZzZXR9OmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5lbGVtZW50LnN0eWxlLmxlZnQ9dC5sZWZ0LWMubGVmdCsicHgiLHRoaXMuZWxlbWVudC5zdHlsZS50b3A9dC50b3AtYy50b3ArInB4Iix0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGg9dC5yaWdodC10LmxlZnQrInB4Iix0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PXQuYm90dG9tLXQudG9wKyJweCJ9LGtjLnByb3RvdHlwZS5zY2hlZHVsZVJlbW92YWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5zZXRDdXJzb3IobnVsbCl9KSx0KX0sa2MucHJvdG90eXBlLmRyYWdvdmVyPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZWRpdG9yVmlldy5lZGl0YWJsZSl7dmFyIGU9dGhpcy5lZGl0b3JWaWV3LnBvc0F0Q29vcmRzKHtsZWZ0OnQuY2xpZW50WCx0b3A6dC5jbGllbnRZfSk7aWYoZSl7dmFyIG49ZS5wb3M7dGhpcy5lZGl0b3JWaWV3LmRyYWdnaW5nJiZ0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcuc2xpY2UmJihuPU9iamVjdChJdFsiZyJdKSh0aGlzLmVkaXRvclZpZXcuc3RhdGUuZG9jLG4sdGhpcy5lZGl0b3JWaWV3LmRyYWdnaW5nLnNsaWNlKSxudWxsPT1uJiYobj1lLnBvcykpLHRoaXMuc2V0Q3Vyc29yKG4pLHRoaXMuc2NoZWR1bGVSZW1vdmFsKDVlMyl9fX0sa2MucHJvdG90eXBlLmRyYWdlbmQ9ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlUmVtb3ZhbCgyMCl9LGtjLnByb3RvdHlwZS5kcm9wPWZ1bmN0aW9uKCl7dGhpcy5zY2hlZHVsZVJlbW92YWwoMjApfSxrYy5wcm90b3R5cGUuZHJhZ2xlYXZlPWZ1bmN0aW9uKHQpe3QudGFyZ2V0IT10aGlzLmVkaXRvclZpZXcuZG9tJiZ0aGlzLmVkaXRvclZpZXcuZG9tLmNvbnRhaW5zKHQucmVsYXRlZFRhcmdldCl8fHRoaXMuc2V0Q3Vyc29yKG51bGwpfTt2YXIgU2M9bigiN2YwNiIpLE9jPW4oIjU3NmEiKSxDYz1uKCIzMDRhIiksTWM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLGUpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24obixyKXt2YXIgbz1uLnJlc29sdmUoci5tYXAodGhpcy5oZWFkKSk7cmV0dXJuIGUudmFsaWQobyk/bmV3IGUobyk6dC5uZWFyKG8pfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIENjWyJpIl0uZW1wdHl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5oZWFkPT10aGlzLmhlYWR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJnYXBjdXJzb3IiLHBvczp0aGlzLmhlYWR9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLnBvcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgR2FwQ3Vyc29yLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLnBvcykpfSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgVGModGhpcy5hbmNob3IpfSxlLnZhbGlkPWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50O2lmKGUuaXNUZXh0YmxvY2t8fCFOYyh0KXx8IUVjKHQpKXJldHVybiExO3ZhciBuPWUudHlwZS5zcGVjLmFsbG93R2FwQ3Vyc29yO2lmKG51bGwhPW4pcmV0dXJuIG47dmFyIHI9ZS5jb250ZW50TWF0Y2hBdCh0LmluZGV4KCkpLmRlZmF1bHRUeXBlO3JldHVybiByJiZyLmlzVGV4dGJsb2NrfSxlLmZpbmRGcm9tPWZ1bmN0aW9uKHQsbixyKXt0OmZvcig7Oyl7aWYoIXImJmUudmFsaWQodCkpcmV0dXJuIHQ7Zm9yKHZhciBvPXQucG9zLGk9bnVsbCxzPXQuZGVwdGg7O3MtLSl7dmFyIGE9dC5ub2RlKHMpO2lmKG4+MD90LmluZGV4QWZ0ZXIocyk8YS5jaGlsZENvdW50OnQuaW5kZXgocyk+MCl7aT1hLmNoaWxkKG4+MD90LmluZGV4QWZ0ZXIocyk6dC5pbmRleChzKS0xKTticmVha31pZigwPT1zKXJldHVybiBudWxsO28rPW47dmFyIGM9dC5kb2MucmVzb2x2ZShvKTtpZihlLnZhbGlkKGMpKXJldHVybiBjfWZvcig7Oyl7dmFyIGg9bj4wP2kuZmlyc3RDaGlsZDppLmxhc3RDaGlsZDtpZighaCl7aWYoaS5pc0F0b20mJiFpLmlzVGV4dCYmIXhjWyJiIl0uaXNTZWxlY3RhYmxlKGkpKXt0PXQuZG9jLnJlc29sdmUobytpLm5vZGVTaXplKm4pLHI9ITE7Y29udGludWUgdH1icmVha31pPWgsbys9bjt2YXIgcD10LmRvYy5yZXNvbHZlKG8pO2lmKGUudmFsaWQocCkpcmV0dXJuIHB9cmV0dXJuIG51bGx9fSxlfSh4Y1siZSJdKTtNYy5wcm90b3R5cGUudmlzaWJsZT0hMSx4Y1siZSJdLmpzb25JRCgiZ2FwY3Vyc29yIixNYyk7dmFyIFRjPWZ1bmN0aW9uKHQpe3RoaXMucG9zPXR9O2Z1bmN0aW9uIE5jKHQpe2Zvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10LmluZGV4KGUpO2lmKDAhPW4pZm9yKHZhciByPXQubm9kZShlKS5jaGlsZChuLTEpOztyPXIubGFzdENoaWxkKXtpZigwPT1yLmNoaWxkQ291bnQmJiFyLmlubGluZUNvbnRlbnR8fHIuaXNBdG9tfHxyLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITA7aWYoci5pbmxpbmVDb250ZW50KXJldHVybiExfX1yZXR1cm4hMH1mdW5jdGlvbiBFYyh0KXtmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5pbmRleEFmdGVyKGUpLHI9dC5ub2RlKGUpO2lmKG4hPXIuY2hpbGRDb3VudClmb3IodmFyIG89ci5jaGlsZChuKTs7bz1vLmZpcnN0Q2hpbGQpe2lmKDA9PW8uY2hpbGRDb3VudCYmIW8uaW5saW5lQ29udGVudHx8by5pc0F0b218fG8udHlwZS5zcGVjLmlzb2xhdGluZylyZXR1cm4hMDtpZihvLmlubGluZUNvbnRlbnQpcmV0dXJuITF9fXJldHVybiEwfVRjLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBUYyh0Lm1hcCh0aGlzLnBvcykpfSxUYy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5wb3MpO3JldHVybiBNYy52YWxpZChlKT9uZXcgTWMoZSk6eGNbImUiXS5uZWFyKGUpfTt2YXIgQWM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHhjWyJjIl0oe3Byb3BzOntkZWNvcmF0aW9uczpJYyxjcmVhdGVTZWxlY3Rpb25CZXR3ZWVuOmZ1bmN0aW9uKHQsZSxuKXtpZihlLnBvcz09bi5wb3MmJk1jLnZhbGlkKG4pKXJldHVybiBuZXcgTWMobil9LGhhbmRsZUNsaWNrOkRjLGhhbmRsZUtleURvd246UmN9fSl9LFJjPU9iamVjdChTY1siYSJdKSh7QXJyb3dMZWZ0OnpjKCJob3JpeiIsLTEpLEFycm93UmlnaHQ6emMoImhvcml6IiwxKSxBcnJvd1VwOnpjKCJ2ZXJ0IiwtMSksQXJyb3dEb3duOnpjKCJ2ZXJ0IiwxKX0pO2Z1bmN0aW9uIHpjKHQsZSl7dmFyIG49InZlcnQiPT10P2U+MD8iZG93biI6InVwIjplPjA/InJpZ2h0IjoibGVmdCI7cmV0dXJuIGZ1bmN0aW9uKHQscixvKXt2YXIgaT10LnNlbGVjdGlvbixzPWU+MD9pLiR0bzppLiRmcm9tLGE9aS5lbXB0eTtpZihpIGluc3RhbmNlb2YgeGNbImciXSl7aWYoIW8uZW5kT2ZUZXh0YmxvY2sobil8fDA9PXMuZGVwdGgpcmV0dXJuITE7YT0hMSxzPXQuZG9jLnJlc29sdmUoZT4wP3MuYWZ0ZXIoKTpzLmJlZm9yZSgpKX12YXIgYz1NYy5maW5kRnJvbShzLGUsYSk7cmV0dXJuISFjJiYociYmcih0LnRyLnNldFNlbGVjdGlvbihuZXcgTWMoYykpKSwhMCl9fWZ1bmN0aW9uIERjKHQsZSxuKXtpZighdC5lZGl0YWJsZSlyZXR1cm4hMTt2YXIgcj10LnN0YXRlLmRvYy5yZXNvbHZlKGUpO2lmKCFNYy52YWxpZChyKSlyZXR1cm4hMTt2YXIgbz10LnBvc0F0Q29vcmRzKHtsZWZ0Om4uY2xpZW50WCx0b3A6bi5jbGllbnRZfSksaT1vLmluc2lkZTtyZXR1cm4hKGk+LTEmJnhjWyJiIl0uaXNTZWxlY3RhYmxlKHQuc3RhdGUuZG9jLm5vZGVBdChpKSkpJiYodC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgTWMocikpKSwhMCl9ZnVuY3Rpb24gSWModCl7aWYoISh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIE1jKSlyZXR1cm4gbnVsbDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc05hbWU9IlByb3NlTWlycm9yLWdhcGN1cnNvciIsT2NbImIiXS5jcmVhdGUodC5kb2MsW09jWyJhIl0ud2lkZ2V0KHQuc2VsZWN0aW9uLmhlYWQsZSx7a2V5OiJnYXBjdXJzb3IifSldKX1mdW5jdGlvbiBQYyh0LGUpe3JldHVybiF0LnNlbGVjdGlvbi5lbXB0eSYmKGUmJmUodC50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gQmModCxlLG4pe3ZhciByPXQuc2VsZWN0aW9uLG89ci4kY3Vyc29yO2lmKCFvfHwobj8hbi5lbmRPZlRleHRibG9jaygiYmFja3dhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PjApKXJldHVybiExO3ZhciBpPV9jKG8pO2lmKCFpKXt2YXIgcz1vLmJsb2NrUmFuZ2UoKSxhPXMmJk9iamVjdChJdFsiaiJdKShzKTtyZXR1cm4gbnVsbCE9YSYmKGUmJmUodC50ci5saWZ0KHMsYSkuc2Nyb2xsSW50b1ZpZXcoKSksITApfXZhciBjPWkubm9kZUJlZm9yZTtpZighYy50eXBlLnNwZWMuaXNvbGF0aW5nJiZaYyh0LGksZSkpcmV0dXJuITA7aWYoMD09by5wYXJlbnQuY29udGVudC5zaXplJiYoRmMoYywiZW5kIil8fHhjWyJiIl0uaXNTZWxlY3RhYmxlKGMpKSl7aWYoZSl7dmFyIGg9dC50ci5kZWxldGVSYW5nZShvLmJlZm9yZSgpLG8uYWZ0ZXIoKSk7aC5zZXRTZWxlY3Rpb24oRmMoYywiZW5kIik/eGNbImUiXS5maW5kRnJvbShoLmRvYy5yZXNvbHZlKGgubWFwcGluZy5tYXAoaS5wb3MsLTEpKSwtMSk6eGNbImIiXS5jcmVhdGUoaC5kb2MsaS5wb3MtYy5ub2RlU2l6ZSkpLGUoaC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH1yZXR1cm4hKCFjLmlzQXRvbXx8aS5kZXB0aCE9by5kZXB0aC0xKSYmKGUmJmUodC50ci5kZWxldGUoaS5wb3MtYy5ub2RlU2l6ZSxpLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIEZjKHQsZSl7Zm9yKDt0O3Q9InN0YXJ0Ij09ZT90LmZpcnN0Q2hpbGQ6dC5sYXN0Q2hpbGQpaWYodC5pc1RleHRibG9jaylyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBqYyh0LGUsbil7dmFyIHI9dC5zZWxlY3Rpb24sbz1yLiRoZWFkLGk9ci5lbXB0eSxzPW87aWYoIWkpcmV0dXJuITE7aWYoby5wYXJlbnQuaXNUZXh0YmxvY2spe2lmKG4/IW4uZW5kT2ZUZXh0YmxvY2soImJhY2t3YXJkIix0KTpvLnBhcmVudE9mZnNldD4wKXJldHVybiExO3M9X2Mobyl9dmFyIGE9cyYmcy5ub2RlQmVmb3JlO3JldHVybiEoIWF8fCF4Y1siYiJdLmlzU2VsZWN0YWJsZShhKSkmJihlJiZlKHQudHIuc2V0U2VsZWN0aW9uKHhjWyJiIl0uY3JlYXRlKHQuZG9jLHMucG9zLWEubm9kZVNpemUpKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gX2ModCl7aWYoIXQucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcpZm9yKHZhciBlPXQuZGVwdGgtMTtlPj0wO2UtLSl7aWYodC5pbmRleChlKT4wKXJldHVybiB0LmRvYy5yZXNvbHZlKHQuYmVmb3JlKGUrMSkpO2lmKHQubm9kZShlKS50eXBlLnNwZWMuaXNvbGF0aW5nKWJyZWFrfXJldHVybiBudWxsfWZ1bmN0aW9uICRjKHQsZSxuKXt2YXIgcj10LnNlbGVjdGlvbixvPXIuJGN1cnNvcjtpZighb3x8KG4/IW4uZW5kT2ZUZXh0YmxvY2soImZvcndhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PG8ucGFyZW50LmNvbnRlbnQuc2l6ZSkpcmV0dXJuITE7dmFyIGk9TGMobyk7aWYoIWkpcmV0dXJuITE7dmFyIHM9aS5ub2RlQWZ0ZXI7aWYoWmModCxpLGUpKXJldHVybiEwO2lmKDA9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSYmKEZjKHMsInN0YXJ0Iil8fHhjWyJiIl0uaXNTZWxlY3RhYmxlKHMpKSl7aWYoZSl7dmFyIGE9dC50ci5kZWxldGVSYW5nZShvLmJlZm9yZSgpLG8uYWZ0ZXIoKSk7YS5zZXRTZWxlY3Rpb24oRmMocywic3RhcnQiKT94Y1siZSJdLmZpbmRGcm9tKGEuZG9jLnJlc29sdmUoYS5tYXBwaW5nLm1hcChpLnBvcykpLDEpOnhjWyJiIl0uY3JlYXRlKGEuZG9jLGEubWFwcGluZy5tYXAoaS5wb3MpKSksZShhLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXJldHVybiEoIXMuaXNBdG9tfHxpLmRlcHRoIT1vLmRlcHRoLTEpJiYoZSYmZSh0LnRyLmRlbGV0ZShpLnBvcyxpLnBvcytzLm5vZGVTaXplKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gSmModCxlLG4pe3ZhciByPXQuc2VsZWN0aW9uLG89ci4kaGVhZCxpPXIuZW1wdHkscz1vO2lmKCFpKXJldHVybiExO2lmKG8ucGFyZW50LmlzVGV4dGJsb2NrKXtpZihuPyFuLmVuZE9mVGV4dGJsb2NrKCJmb3J3YXJkIix0KTpvLnBhcmVudE9mZnNldDxvLnBhcmVudC5jb250ZW50LnNpemUpcmV0dXJuITE7cz1MYyhvKX12YXIgYT1zJiZzLm5vZGVBZnRlcjtyZXR1cm4hKCFhfHwheGNbImIiXS5pc1NlbGVjdGFibGUoYSkpJiYoZSYmZSh0LnRyLnNldFNlbGVjdGlvbih4Y1siYiJdLmNyZWF0ZSh0LmRvYyxzLnBvcykpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBMYyh0KXtpZighdC5wYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZylmb3IodmFyIGU9dC5kZXB0aC0xO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSk7aWYodC5pbmRleChlKSsxPG4uY2hpbGRDb3VudClyZXR1cm4gdC5kb2MucmVzb2x2ZSh0LmFmdGVyKGUrMSkpO2lmKG4udHlwZS5zcGVjLmlzb2xhdGluZylicmVha31yZXR1cm4gbnVsbH1mdW5jdGlvbiBWYyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kZnJvbSxvPW4uJHRvLGk9ci5ibG9ja1JhbmdlKG8pLHM9aSYmT2JqZWN0KEl0WyJqIl0pKGkpO3JldHVybiBudWxsIT1zJiYoZSYmZSh0LnRyLmxpZnQoaSxzKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gcWModCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGhlYWQsbz1uLiRhbmNob3I7cmV0dXJuISghci5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCFyLnNhbWVQYXJlbnQobykpJiYoZSYmZSh0LnRyLmluc2VydFRleHQoIlxuIikuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIFdjKHQpe2Zvcih2YXIgZT0wO2U8dC5lZGdlQ291bnQ7ZSsrKXt2YXIgbj10LmVkZ2UoZSkscj1uLnR5cGU7aWYoci5pc1RleHRibG9jayYmIXIuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiByfXJldHVybiBudWxsfWZ1bmN0aW9uIEhjKHQsZSl7dmFyIG49dC5zZWxlY3Rpb24scj1uLiRoZWFkLG89bi4kYW5jaG9yO2lmKCFyLnBhcmVudC50eXBlLnNwZWMuY29kZXx8IXIuc2FtZVBhcmVudChvKSlyZXR1cm4hMTt2YXIgaT1yLm5vZGUoLTEpLHM9ci5pbmRleEFmdGVyKC0xKSxhPVdjKGkuY29udGVudE1hdGNoQXQocykpO2lmKCFpLmNhblJlcGxhY2VXaXRoKHMscyxhKSlyZXR1cm4hMTtpZihlKXt2YXIgYz1yLmFmdGVyKCksaD10LnRyLnJlcGxhY2VXaXRoKGMsYyxhLmNyZWF0ZUFuZEZpbGwoKSk7aC5zZXRTZWxlY3Rpb24oeGNbImUiXS5uZWFyKGguZG9jLnJlc29sdmUoYyksMSkpLGUoaC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH1mdW5jdGlvbiBLYyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kZnJvbSxvPW4uJHRvO2lmKHIucGFyZW50LmlubGluZUNvbnRlbnR8fG8ucGFyZW50LmlubGluZUNvbnRlbnQpcmV0dXJuITE7dmFyIGk9V2Moci5wYXJlbnQuY29udGVudE1hdGNoQXQoby5pbmRleEFmdGVyKCkpKTtpZighaXx8IWkuaXNUZXh0YmxvY2spcmV0dXJuITE7aWYoZSl7dmFyIHM9KCFyLnBhcmVudE9mZnNldCYmby5pbmRleCgpPG8ucGFyZW50LmNoaWxkQ291bnQ/cjpvKS5wb3MsYT10LnRyLmluc2VydChzLGkuY3JlYXRlQW5kRmlsbCgpKTthLnNldFNlbGVjdGlvbih4Y1siZyJdLmNyZWF0ZShhLmRvYyxzKzEpKSxlKGEuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9ZnVuY3Rpb24gVWModCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGN1cnNvcjtpZighcnx8ci5wYXJlbnQuY29udGVudC5zaXplKXJldHVybiExO2lmKHIuZGVwdGg+MSYmci5hZnRlcigpIT1yLmVuZCgtMSkpe3ZhciBvPXIuYmVmb3JlKCk7aWYoT2JqZWN0KEl0WyJmIl0pKHQuZG9jLG8pKXJldHVybiBlJiZlKHQudHIuc3BsaXQobykuc2Nyb2xsSW50b1ZpZXcoKSksITB9dmFyIGk9ci5ibG9ja1JhbmdlKCkscz1pJiZPYmplY3QoSXRbImoiXSkoaSk7cmV0dXJuIG51bGwhPXMmJihlJiZlKHQudHIubGlmdChpLHMpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBHYyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kZnJvbSxvPW4uJHRvO2lmKHQuc2VsZWN0aW9uIGluc3RhbmNlb2YgeGNbImIiXSYmdC5zZWxlY3Rpb24ubm9kZS5pc0Jsb2NrKXJldHVybiEoIXIucGFyZW50T2Zmc2V0fHwhT2JqZWN0KEl0WyJmIl0pKHQuZG9jLHIucG9zKSkmJihlJiZlKHQudHIuc3BsaXQoci5wb3MpLnNjcm9sbEludG9WaWV3KCkpLCEwKTtpZighci5wYXJlbnQuaXNCbG9jaylyZXR1cm4hMTtpZihlKXt2YXIgaT1vLnBhcmVudE9mZnNldD09by5wYXJlbnQuY29udGVudC5zaXplLHM9dC50cjt0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIHhjWyJnIl0mJnMuZGVsZXRlU2VsZWN0aW9uKCk7dmFyIGE9MD09ci5kZXB0aD9udWxsOldjKHIubm9kZSgtMSkuY29udGVudE1hdGNoQXQoci5pbmRleEFmdGVyKC0xKSkpLGM9aSYmYT9be3R5cGU6YX1dOm51bGwsaD1PYmplY3QoSXRbImYiXSkocy5kb2Mscy5tYXBwaW5nLm1hcChyLnBvcyksMSxjKTtjfHxofHwhT2JqZWN0KEl0WyJmIl0pKHMuZG9jLHMubWFwcGluZy5tYXAoci5wb3MpLDEsYSYmW3t0eXBlOmF9XSl8fChjPVt7dHlwZTphfV0saD0hMCksaCYmKHMuc3BsaXQocy5tYXBwaW5nLm1hcChyLnBvcyksMSxjKSxpfHxyLnBhcmVudE9mZnNldHx8ci5wYXJlbnQudHlwZT09YXx8IXIubm9kZSgtMSkuY2FuUmVwbGFjZShyLmluZGV4KC0xKSxyLmluZGV4QWZ0ZXIoLTEpLENjWyJjIl0uZnJvbShhLmNyZWF0ZSgpLHIucGFyZW50KSl8fHMuc2V0Tm9kZU1hcmt1cChzLm1hcHBpbmcubWFwKHIuYmVmb3JlKCkpLGEpKSxlKHMuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9ZnVuY3Rpb24gWGModCxlKXtyZXR1cm4gZSYmZSh0LnRyLnNldFNlbGVjdGlvbihuZXcgeGNbImEiXSh0LmRvYykpKSwhMH1mdW5jdGlvbiBZYyh0LGUsbil7dmFyIHI9ZS5ub2RlQmVmb3JlLG89ZS5ub2RlQWZ0ZXIsaT1lLmluZGV4KCk7cmV0dXJuISEociYmbyYmci50eXBlLmNvbXBhdGlibGVDb250ZW50KG8udHlwZSkpJiYoIXIuY29udGVudC5zaXplJiZlLnBhcmVudC5jYW5SZXBsYWNlKGktMSxpKT8obiYmbih0LnRyLmRlbGV0ZShlLnBvcy1yLm5vZGVTaXplLGUucG9zKS5zY3JvbGxJbnRvVmlldygpKSwhMCk6ISghZS5wYXJlbnQuY2FuUmVwbGFjZShpLGkrMSl8fCFvLmlzVGV4dGJsb2NrJiYhT2JqZWN0KEl0WyJlIl0pKHQuZG9jLGUucG9zKSkmJihuJiZuKHQudHIuY2xlYXJJbmNvbXBhdGlibGUoZS5wb3Msci50eXBlLHIuY29udGVudE1hdGNoQXQoci5jaGlsZENvdW50KSkuam9pbihlLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSksITApKX1mdW5jdGlvbiBaYyh0LGUsbil7dmFyIHIsbyxpPWUubm9kZUJlZm9yZSxzPWUubm9kZUFmdGVyO2lmKGkudHlwZS5zcGVjLmlzb2xhdGluZ3x8cy50eXBlLnNwZWMuaXNvbGF0aW5nKXJldHVybiExO2lmKFljKHQsZSxuKSlyZXR1cm4hMDtpZihlLnBhcmVudC5jYW5SZXBsYWNlKGUuaW5kZXgoKSxlLmluZGV4KCkrMSkmJihyPShvPWkuY29udGVudE1hdGNoQXQoaS5jaGlsZENvdW50KSkuZmluZFdyYXBwaW5nKHMudHlwZSkpJiZvLm1hdGNoVHlwZShyWzBdfHxzLnR5cGUpLnZhbGlkRW5kKXtpZihuKXtmb3IodmFyIGE9ZS5wb3Mrcy5ub2RlU2l6ZSxjPUNjWyJjIl0uZW1wdHksaD1yLmxlbmd0aC0xO2g+PTA7aC0tKWM9Q2NbImMiXS5mcm9tKHJbaF0uY3JlYXRlKG51bGwsYykpO2M9Q2NbImMiXS5mcm9tKGkuY29weShjKSk7dmFyIHA9dC50ci5zdGVwKG5ldyBJdFsiYiJdKGUucG9zLTEsYSxlLnBvcyxhLG5ldyBDY1siaSJdKGMsMSwwKSxyLmxlbmd0aCwhMCkpLHU9YSsyKnIubGVuZ3RoO09iamVjdChJdFsiZSJdKShwLmRvYyx1KSYmcC5qb2luKHUpLG4ocC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH12YXIgZj14Y1siZSJdLmZpbmRGcm9tKGUsMSksbD1mJiZmLiRmcm9tLmJsb2NrUmFuZ2UoZi4kdG8pLGQ9bCYmT2JqZWN0KEl0WyJqIl0pKGwpO3JldHVybiBudWxsIT1kJiZkPj1lLmRlcHRoJiYobiYmbih0LnRyLmxpZnQobCxkKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gUWModCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgbz1uLnNlbGVjdGlvbixpPW8uJGZyb20scz1vLiR0byxhPWkuYmxvY2tSYW5nZShzKSxjPWEmJk9iamVjdChJdFsiaCJdKShhLHQsZSk7cmV0dXJuISFjJiYociYmcihuLnRyLndyYXAoYSxjKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIHRoKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLmZyb20scz1vLnRvLGE9ITE7cmV0dXJuIG4uZG9jLm5vZGVzQmV0d2VlbihpLHMsKGZ1bmN0aW9uKHIsbyl7aWYoYSlyZXR1cm4hMTtpZihyLmlzVGV4dGJsb2NrJiYhci5oYXNNYXJrdXAodCxlKSlpZihyLnR5cGU9PXQpYT0hMDtlbHNle3ZhciBpPW4uZG9jLnJlc29sdmUobykscz1pLmluZGV4KCk7YT1pLnBhcmVudC5jYW5SZXBsYWNlV2l0aChzLHMrMSx0KX19KSksISFhJiYociYmcihuLnRyLnNldEJsb2NrVHlwZShpLHMsdCxlKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIGVoKHQsZSxuKXtmb3IodmFyIHI9ZnVuY3Rpb24ocil7dmFyIG89ZVtyXSxpPW8uJGZyb20scz1vLiR0byxhPTA9PWkuZGVwdGgmJnQudHlwZS5hbGxvd3NNYXJrVHlwZShuKTtpZih0Lm5vZGVzQmV0d2VlbihpLnBvcyxzLnBvcywoZnVuY3Rpb24odCl7aWYoYSlyZXR1cm4hMTthPXQuaW5saW5lQ29udGVudCYmdC50eXBlLmFsbG93c01hcmtUeXBlKG4pfSkpLGEpcmV0dXJue3Y6ITB9fSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciBpPXIobyk7aWYoaSlyZXR1cm4gaS52fXJldHVybiExfWZ1bmN0aW9uIG5oKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLmVtcHR5LHM9by4kY3Vyc29yLGE9by5yYW5nZXM7aWYoaSYmIXN8fCFlaChuLmRvYyxhLHQpKXJldHVybiExO2lmKHIpaWYocyl0LmlzSW5TZXQobi5zdG9yZWRNYXJrc3x8cy5tYXJrcygpKT9yKG4udHIucmVtb3ZlU3RvcmVkTWFyayh0KSk6cihuLnRyLmFkZFN0b3JlZE1hcmsodC5jcmVhdGUoZSkpKTtlbHNle2Zvcih2YXIgYz0hMSxoPW4udHIscD0wOyFjJiZwPGEubGVuZ3RoO3ArKyl7dmFyIHU9YVtwXSxmPXUuJGZyb20sbD11LiR0bztjPW4uZG9jLnJhbmdlSGFzTWFyayhmLnBvcyxsLnBvcyx0KX1mb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIHY9YVtkXSxtPXYuJGZyb20seT12LiR0bztjP2gucmVtb3ZlTWFyayhtLnBvcyx5LnBvcyx0KTpoLmFkZE1hcmsobS5wb3MseS5wb3MsdC5jcmVhdGUoZSkpfXIoaC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19ZnVuY3Rpb24gcmgoKXt2YXIgdD1bXSxlPWFyZ3VtZW50cy5sZW5ndGg7d2hpbGUoZS0tKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBmdW5jdGlvbihlLG4scil7Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspaWYodFtvXShlLG4scikpcmV0dXJuITA7cmV0dXJuITF9fXZhciBvaD1yaChQYyxCYyxqYyksaWg9cmgoUGMsJGMsSmMpLHNoPXtFbnRlcjpyaChxYyxLYyxVYyxHYyksIk1vZC1FbnRlciI6SGMsQmFja3NwYWNlOm9oLCJNb2QtQmFja3NwYWNlIjpvaCxEZWxldGU6aWgsIk1vZC1EZWxldGUiOmloLCJNb2QtYSI6WGN9LGFoPXsiQ3RybC1oIjpzaFsiQmFja3NwYWNlIl0sIkFsdC1CYWNrc3BhY2UiOnNoWyJNb2QtQmFja3NwYWNlIl0sIkN0cmwtZCI6c2hbIkRlbGV0ZSJdLCJDdHJsLUFsdC1CYWNrc3BhY2UiOnNoWyJNb2QtRGVsZXRlIl0sIkFsdC1EZWxldGUiOnNoWyJNb2QtRGVsZXRlIl0sIkFsdC1kIjpzaFsiTW9kLURlbGV0ZSJdfTtmb3IodmFyIGNoIGluIHNoKWFoW2NoXT1zaFtjaF07dmFyIGhoPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yPy9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKToidW5kZWZpbmVkIiE9dHlwZW9mIG9zJiYiZGFyd2luIj09b3MucGxhdGZvcm0oKSxwaD1oaD9haDpzaCx1aD1mdW5jdGlvbih0LGUpe3RoaXMubWF0Y2g9dCx0aGlzLmhhbmRsZXI9InN0cmluZyI9PXR5cGVvZiBlP2ZoKGUpOmV9O2Z1bmN0aW9uIGZoKHQpe3JldHVybiBmdW5jdGlvbihlLG4scixvKXt2YXIgaT10O2lmKG5bMV0pe3ZhciBzPW5bMF0ubGFzdEluZGV4T2YoblsxXSk7aSs9blswXS5zbGljZShzK25bMV0ubGVuZ3RoKSxyKz1zO3ZhciBhPXItbzthPjAmJihpPW5bMF0uc2xpY2Uocy1hLHMpK2kscj1vKX1yZXR1cm4gZS50ci5pbnNlcnRUZXh0KGkscixvKX19dmFyIGxoPTUwMDtmdW5jdGlvbiBkaCh0KXt2YXIgZT10LnJ1bGVzLG49bmV3IHhjWyJjIl0oe3N0YXRlOntpbml0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGFwcGx5OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRNZXRhKHRoaXMpO3JldHVybiBufHwodC5zZWxlY3Rpb25TZXR8fHQuZG9jQ2hhbmdlZD9udWxsOmUpfX0scHJvcHM6e2hhbmRsZVRleHRJbnB1dDpmdW5jdGlvbih0LHIsbyxpKXtyZXR1cm4gdmgodCxyLG8saSxlLG4pfSxoYW5kbGVET01FdmVudHM6e2NvbXBvc2l0aW9uZW5kOmZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb24sbz1yLiRjdXJzb3I7byYmdmgodCxvLnBvcyxvLnBvcywiIixlLG4pfSkpfX19LGlzSW5wdXRSdWxlczohMH0pO3JldHVybiBufWZ1bmN0aW9uIHZoKHQsZSxuLHIsbyxpKXtpZih0LmNvbXBvc2luZylyZXR1cm4hMTt2YXIgcz10LnN0YXRlLGE9cy5kb2MucmVzb2x2ZShlKTtpZihhLnBhcmVudC50eXBlLnNwZWMuY29kZSlyZXR1cm4hMTtmb3IodmFyIGM9YS5wYXJlbnQudGV4dEJldHdlZW4oTWF0aC5tYXgoMCxhLnBhcmVudE9mZnNldC1saCksYS5wYXJlbnRPZmZzZXQsbnVsbCwi77+8IikrcixoPTA7aDxvLmxlbmd0aDtoKyspe3ZhciBwPW9baF0ubWF0Y2guZXhlYyhjKSx1PXAmJm9baF0uaGFuZGxlcihzLHAsZS0ocFswXS5sZW5ndGgtci5sZW5ndGgpLG4pO2lmKHUpcmV0dXJuIHQuZGlzcGF0Y2godS5zZXRNZXRhKGkse3RyYW5zZm9ybTp1LGZyb206ZSx0bzpuLHRleHQ6cn0pKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBtaCh0LGUpe2Zvcih2YXIgbj10LnBsdWdpbnMscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdLGk9dm9pZCAwO2lmKG8uc3BlYy5pc0lucHV0UnVsZXMmJihpPW8uZ2V0U3RhdGUodCkpKXtpZihlKXtmb3IodmFyIHM9dC50cixhPWkudHJhbnNmb3JtLGM9YS5zdGVwcy5sZW5ndGgtMTtjPj0wO2MtLSlzLnN0ZXAoYS5zdGVwc1tjXS5pbnZlcnQoYS5kb2NzW2NdKSk7dmFyIGg9cy5kb2MucmVzb2x2ZShpLmZyb20pLm1hcmtzKCk7ZShzLnJlcGxhY2VXaXRoKGkuZnJvbSxpLnRvLHQuc2NoZW1hLnRleHQoaS50ZXh0LGgpKSl9cmV0dXJuITB9fXJldHVybiExfW5ldyB1aCgvLS0kLywi4oCUIiksbmV3IHVoKC9cLlwuXC4kLywi4oCmIiksbmV3IHVoKC8oPzpefFtcc1x7XFtcKFw8JyJcdTIwMThcdTIwMUNdKSgiKSQvLCLigJwiKSxuZXcgdWgoLyIkLywi4oCdIiksbmV3IHVoKC8oPzpefFtcc1x7XFtcKFw8JyJcdTIwMThcdTIwMUNdKSgnKSQvLCLigJgiKSxuZXcgdWgoLyckLywi4oCZIik7ZnVuY3Rpb24geWgodCxlLG4scil7cmV0dXJuIG5ldyB1aCh0LChmdW5jdGlvbih0LG8saSxzKXt2YXIgYT1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bihvKTpuLGM9dC50ci5kZWxldGUoaSxzKSxoPWMuZG9jLnJlc29sdmUoaSkscD1oLmJsb2NrUmFuZ2UoKSx1PXAmJk9iamVjdChJdFsiaCJdKShwLGUsYSk7aWYoIXUpcmV0dXJuIG51bGw7Yy53cmFwKHAsdSk7dmFyIGY9Yy5kb2MucmVzb2x2ZShpLTEpLm5vZGVCZWZvcmU7cmV0dXJuIGYmJmYudHlwZT09ZSYmT2JqZWN0KEl0WyJlIl0pKGMuZG9jLGktMSkmJighcnx8cihvLGYpKSYmYy5qb2luKGktMSksY30pKX1mdW5jdGlvbiBnaCh0LGUsbil7cmV0dXJuIG5ldyB1aCh0LChmdW5jdGlvbih0LHIsbyxpKXt2YXIgcz10LmRvYy5yZXNvbHZlKG8pLGE9biBpbnN0YW5jZW9mIEZ1bmN0aW9uP24ocik6bjtyZXR1cm4gcy5ub2RlKC0xKS5jYW5SZXBsYWNlV2l0aChzLmluZGV4KC0xKSxzLmluZGV4QWZ0ZXIoLTEpLGUpP3QudHIuZGVsZXRlKG8saSkuc2V0QmxvY2tUeXBlKG8sbyxlLGEpOm51bGx9KSl9dmFyIHdoPW4oImVmZGYiKTsKLyohCiAgICAqIHRpcHRhcC11dGlscyB2MS45LjAKICAgICogKGMpIDIwMjAgU2NydW1weSBVRyAobGltaXRlZCBsaWFiaWxpdHkpCiAgICAqIEBsaWNlbnNlIE1JVAogICAgKi9mdW5jdGlvbiB4aCh0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gYmgodCxlKXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIGtoKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1tlXT9hcmd1bWVudHNbZV06e307ZSUyP2JoKE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7eGgodCxlLG5bZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOmJoKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIFNoKHQpe3JldHVybiBPaCh0KXx8Q2godCl8fE1oKHQpfHxOaCgpfWZ1bmN0aW9uIE9oKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIFRoKHQpfWZ1bmN0aW9uIENoKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBNaCh0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIFRoKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/VGgodCxlKTp2b2lkIDB9fWZ1bmN0aW9uIFRoKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gTmgoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX1mdW5jdGlvbiBFaCh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi5mcm9tLG89bi50byxpPVtdO3QuZG9jLm5vZGVzQmV0d2VlbihyLG8sKGZ1bmN0aW9uKHQpe2k9W10uY29uY2F0KFNoKGkpLFNoKHQubWFya3MpKX0pKTt2YXIgcz1pLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUubmFtZT09PWUubmFtZX0pKTtyZXR1cm4gcz9zLmF0dHJzOnt9fWZ1bmN0aW9uIEFoKHQsZSl7dmFyIG49dC5zZWxlY3Rpb24scj1uLmZyb20sbz1uLnRvLGk9W107dC5kb2Mubm9kZXNCZXR3ZWVuKHIsbywoZnVuY3Rpb24odCl7aT1bXS5jb25jYXQoU2goaSksW3RdKX0pKTt2YXIgcz1pLnJldmVyc2UoKS5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLm5hbWU9PT1lLm5hbWV9KSk7cmV0dXJuIHM/cy5hdHRyczp7fX1mdW5jdGlvbiBSaCgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7aWYoIXR8fCFlKXJldHVybiExO3ZhciBuPXQucGFyZW50LmNoaWxkQWZ0ZXIodC5wYXJlbnRPZmZzZXQpO2lmKCFuLm5vZGUpcmV0dXJuITE7dmFyIHI9bi5ub2RlLm1hcmtzLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGU9PT1lfSkpO2lmKCFyKXJldHVybiExO3ZhciBvPXQuaW5kZXgoKSxpPXQuc3RhcnQoKStuLm9mZnNldCxzPW8rMSxhPWkrbi5ub2RlLm5vZGVTaXplO3doaWxlKG8+MCYmci5pc0luU2V0KHQucGFyZW50LmNoaWxkKG8tMSkubWFya3MpKW8tPTEsaS09dC5wYXJlbnQuY2hpbGQobykubm9kZVNpemU7d2hpbGUoczx0LnBhcmVudC5jaGlsZENvdW50JiZyLmlzSW5TZXQodC5wYXJlbnQuY2hpbGQocykubWFya3MpKWErPXQucGFyZW50LmNoaWxkKHMpLm5vZGVTaXplLHMrPTE7cmV0dXJue2Zyb206aSx0bzphfX1mdW5jdGlvbiB6aCh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi5mcm9tLG89bi4kZnJvbSxpPW4udG8scz1uLmVtcHR5O3JldHVybiBzPyEhZS5pc0luU2V0KHQuc3RvcmVkTWFya3N8fG8ubWFya3MoKSk6ISF0LmRvYy5yYW5nZUhhc01hcmsocixpLGUpfWZ1bmN0aW9uIERoKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9LG89T2JqZWN0KHdoWyJmaW5kU2VsZWN0ZWROb2RlT2ZUeXBlIl0pKGUpKHQuc2VsZWN0aW9uKXx8T2JqZWN0KHdoWyJmaW5kUGFyZW50Tm9kZSJdKShyKSh0LnNlbGVjdGlvbik7cmV0dXJuIE9iamVjdC5rZXlzKG4pLmxlbmd0aCYmbz9vLm5vZGUuaGFzTWFya3VwKGUsa2goe30sby5ub2RlLmF0dHJzLHt9LG4pKTohIW99dmFyIEloPW4oIjhiYmYiKSxQaD1uLm4oSWgpO2Z1bmN0aW9uIEJoKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLiRmcm9tLHM9by4kdG8sYT1pLmJsb2NrUmFuZ2UocyksYz0hMSxoPWE7aWYoIWEpcmV0dXJuITE7aWYoYS5kZXB0aD49MiYmaS5ub2RlKGEuZGVwdGgtMSkudHlwZS5jb21wYXRpYmxlQ29udGVudCh0KSYmMD09YS5zdGFydEluZGV4KXtpZigwPT1pLmluZGV4KGEuZGVwdGgtMSkpcmV0dXJuITE7dmFyIHA9bi5kb2MucmVzb2x2ZShhLnN0YXJ0LTIpO2g9bmV3IENjWyJnIl0ocCxwLGEuZGVwdGgpLGEuZW5kSW5kZXg8YS5wYXJlbnQuY2hpbGRDb3VudCYmKGE9bmV3IENjWyJnIl0oaSxuLmRvYy5yZXNvbHZlKHMuZW5kKGEuZGVwdGgpKSxhLmRlcHRoKSksYz0hMH12YXIgdT1PYmplY3QoSXRbImgiXSkoaCx0LGUsYSk7cmV0dXJuISF1JiYociYmcihGaChuLnRyLGEsdSxjLHQpLnNjcm9sbEludG9WaWV3KCkpLCEwKX19ZnVuY3Rpb24gRmgodCxlLG4scixvKXtmb3IodmFyIGk9Q2NbImMiXS5lbXB0eSxzPW4ubGVuZ3RoLTE7cz49MDtzLS0paT1DY1siYyJdLmZyb20obltzXS50eXBlLmNyZWF0ZShuW3NdLmF0dHJzLGkpKTt0LnN0ZXAobmV3IEl0WyJiIl0oZS5zdGFydC0ocj8yOjApLGUuZW5kLGUuc3RhcnQsZS5lbmQsbmV3IENjWyJpIl0oaSwwLDApLG4ubGVuZ3RoLCEwKSk7Zm9yKHZhciBhPTAsYz0wO2M8bi5sZW5ndGg7YysrKW5bY10udHlwZT09byYmKGE9YysxKTtmb3IodmFyIGg9bi5sZW5ndGgtYSxwPWUuc3RhcnQrbi5sZW5ndGgtKHI/MjowKSx1PWUucGFyZW50LGY9ZS5zdGFydEluZGV4LGw9ZS5lbmRJbmRleCxkPSEwO2Y8bDtmKyssZD0hMSkhZCYmT2JqZWN0KEl0WyJmIl0pKHQuZG9jLHAsaCkmJih0LnNwbGl0KHAsaCkscCs9MipoKSxwKz11LmNoaWxkKGYpLm5vZGVTaXplO3JldHVybiB0fWZ1bmN0aW9uIGpoKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89ci4kZnJvbSxpPXIuJHRvLHM9ci5ub2RlO2lmKHMmJnMuaXNCbG9ja3x8by5kZXB0aDwyfHwhby5zYW1lUGFyZW50KGkpKXJldHVybiExO3ZhciBhPW8ubm9kZSgtMSk7aWYoYS50eXBlIT10KXJldHVybiExO2lmKDA9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSl7aWYoMj09by5kZXB0aHx8by5ub2RlKC0zKS50eXBlIT10fHxvLmluZGV4KC0yKSE9by5ub2RlKC0yKS5jaGlsZENvdW50LTEpcmV0dXJuITE7aWYobil7Zm9yKHZhciBjPUNjWyJjIl0uZW1wdHksaD1vLmluZGV4KC0xKT4wLHA9by5kZXB0aC0oaD8xOjIpO3A+PW8uZGVwdGgtMztwLS0pYz1DY1siYyJdLmZyb20oby5ub2RlKHApLmNvcHkoYykpO2M9Yy5hcHBlbmQoQ2NbImMiXS5mcm9tKHQuY3JlYXRlQW5kRmlsbCgpKSk7dmFyIHU9ZS50ci5yZXBsYWNlKG8uYmVmb3JlKGg/bnVsbDotMSksby5hZnRlcigtMyksbmV3IENjWyJpIl0oYyxoPzM6MiwyKSk7dS5zZXRTZWxlY3Rpb24oZS5zZWxlY3Rpb24uY29uc3RydWN0b3IubmVhcih1LmRvYy5yZXNvbHZlKG8ucG9zKyhoPzM6MikpKSksbih1LnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXZhciBmPWkucG9zPT1vLmVuZCgpP2EuY29udGVudE1hdGNoQXQoMCkuZGVmYXVsdFR5cGU6bnVsbCxsPWUudHIuZGVsZXRlKG8ucG9zLGkucG9zKSxkPWYmJltudWxsLHt0eXBlOmZ9XTtyZXR1cm4hIU9iamVjdChJdFsiZiJdKShsLmRvYyxvLnBvcywyLGQpJiYobiYmbihsLnNwbGl0KG8ucG9zLDIsZCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfX1mdW5jdGlvbiBfaCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGZyb20saT1yLiR0byxzPW8uYmxvY2tSYW5nZShpLChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZENvdW50JiZlLmZpcnN0Q2hpbGQudHlwZT09dH0pKTtyZXR1cm4hIXMmJighbnx8KG8ubm9kZShzLmRlcHRoLTEpLnR5cGU9PXQ/JGgoZSxuLHQscyk6SmgoZSxuLHMpKSl9fWZ1bmN0aW9uICRoKHQsZSxuLHIpe3ZhciBvPXQudHIsaT1yLmVuZCxzPXIuJHRvLmVuZChyLmRlcHRoKTtyZXR1cm4gaTxzJiYoby5zdGVwKG5ldyBJdFsiYiJdKGktMSxzLGkscyxuZXcgQ2NbImkiXShDY1siYyJdLmZyb20obi5jcmVhdGUobnVsbCxyLnBhcmVudC5jb3B5KCkpKSwxLDApLDEsITApKSxyPW5ldyBDY1siZyJdKG8uZG9jLnJlc29sdmUoci4kZnJvbS5wb3MpLG8uZG9jLnJlc29sdmUocyksci5kZXB0aCkpLGUoby5saWZ0KHIsT2JqZWN0KEl0WyJqIl0pKHIpKS5zY3JvbGxJbnRvVmlldygpKSwhMH1mdW5jdGlvbiBKaCh0LGUsbil7Zm9yKHZhciByPXQudHIsbz1uLnBhcmVudCxpPW4uZW5kLHM9bi5lbmRJbmRleC0xLGE9bi5zdGFydEluZGV4O3M+YTtzLS0paS09by5jaGlsZChzKS5ub2RlU2l6ZSxyLmRlbGV0ZShpLTEsaSsxKTt2YXIgYz1yLmRvYy5yZXNvbHZlKG4uc3RhcnQpLGg9Yy5ub2RlQWZ0ZXIscD0wPT1uLnN0YXJ0SW5kZXgsdT1uLmVuZEluZGV4PT1vLmNoaWxkQ291bnQsZj1jLm5vZGUoLTEpLGw9Yy5pbmRleCgtMSk7aWYoIWYuY2FuUmVwbGFjZShsKyhwPzA6MSksbCsxLGguY29udGVudC5hcHBlbmQodT9DY1siYyJdLmVtcHR5OkNjWyJjIl0uZnJvbShvKSkpKXJldHVybiExO3ZhciBkPWMucG9zLHY9ZCtoLm5vZGVTaXplO3JldHVybiByLnN0ZXAobmV3IEl0WyJiIl0oZC0ocD8xOjApLHYrKHU/MTowKSxkKzEsdi0xLG5ldyBDY1siaSJdKChwP0NjWyJjIl0uZW1wdHk6Q2NbImMiXS5mcm9tKG8uY29weShDY1siYyJdLmVtcHR5KSkpLmFwcGVuZCh1P0NjWyJjIl0uZW1wdHk6Q2NbImMiXS5mcm9tKG8uY29weShDY1siYyJdLmVtcHR5KSkpLHA/MDoxLHU/MDoxKSxwPzA6MSkpLGUoci5zY3JvbGxJbnRvVmlldygpKSwhMH1mdW5jdGlvbiBMaCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGZyb20saT1yLiR0byxzPW8uYmxvY2tSYW5nZShpLChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZENvdW50JiZlLmZpcnN0Q2hpbGQudHlwZT09dH0pKTtpZighcylyZXR1cm4hMTt2YXIgYT1zLnN0YXJ0SW5kZXg7aWYoMD09YSlyZXR1cm4hMTt2YXIgYz1zLnBhcmVudCxoPWMuY2hpbGQoYS0xKTtpZihoLnR5cGUhPXQpcmV0dXJuITE7aWYobil7dmFyIHA9aC5sYXN0Q2hpbGQmJmgubGFzdENoaWxkLnR5cGU9PWMudHlwZSx1PUNjWyJjIl0uZnJvbShwP3QuY3JlYXRlKCk6bnVsbCksZj1uZXcgQ2NbImkiXShDY1siYyJdLmZyb20odC5jcmVhdGUobnVsbCxDY1siYyJdLmZyb20oYy50eXBlLmNyZWF0ZShudWxsLHUpKSkpLHA/MzoxLDApLGw9cy5zdGFydCxkPXMuZW5kO24oZS50ci5zdGVwKG5ldyBJdFsiYiJdKGwtKHA/MzoxKSxkLGwsZCxmLDEsITApKS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19dmFyIFZoPW4oImU3YTgiKSxxaD1uKCIxNTVjIiksV2g9bigiZWU3ZiIpO2Z1bmN0aW9uIEhoKHQpe3JldHVybiBLaCh0KXx8VWgodCl8fEdoKHQpfHxZaCgpfWZ1bmN0aW9uIEtoKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIFhoKHQpfWZ1bmN0aW9uIFVoKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBHaCh0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIFhoKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/WGgodCxlKTp2b2lkIDB9fWZ1bmN0aW9uIFhoKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gWWgoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX1mdW5jdGlvbiBaaCh0LGUsbil7dmFyIHI9W107cmV0dXJuIG4uZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQsZSl7cj1bXS5jb25jYXQoSGgociksSGgodC5tYXJrcy5tYXAoKGZ1bmN0aW9uKG4pe3JldHVybntzdGFydDplLGVuZDplK3Qubm9kZVNpemUsbWFyazpufX0pKSkpfSkpLHJ9ZnVuY3Rpb24gUWgodCxlLG4pe3JldHVybiBuZXcgdWgodCwoZnVuY3Rpb24odCxyLG8saSl7dmFyIHM9biBpbnN0YW5jZW9mIEZ1bmN0aW9uP24ocik6bixhPXQudHIsYz1yLmxlbmd0aC0xLGg9aSxwPW87aWYocltjXSl7dmFyIHU9bytyWzBdLmluZGV4T2YocltjLTFdKSxmPXUrcltjLTFdLmxlbmd0aC0xLGw9dStyW2MtMV0ubGFzdEluZGV4T2YocltjXSksZD1sK3JbY10ubGVuZ3RoLHY9WmgobyxpLHQpLmZpbHRlcigoZnVuY3Rpb24odCl7dmFyIG49dC5tYXJrLnR5cGUuZXhjbHVkZWQ7cmV0dXJuIG4uZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQubmFtZT09PWUubmFtZX0pKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZD51fSkpO2lmKHYubGVuZ3RoKXJldHVybiExO2Q8ZiYmYS5kZWxldGUoZCxmKSxsPnUmJmEuZGVsZXRlKHUsbCkscD11LGg9cCtyW2NdLmxlbmd0aH1yZXR1cm4gYS5hZGRNYXJrKHAsaCxlLmNyZWF0ZShzKSksYS5yZW1vdmVTdG9yZWRNYXJrKGUpLGF9KSl9ZnVuY3Rpb24gdHAodCxlLG4pe3ZhciByPWZ1bmN0aW9uIHIobyl7dmFyIGk9W107cmV0dXJuIG8uZm9yRWFjaCgoZnVuY3Rpb24obyl7aWYoby5pc1RleHQpe3ZhciBzLGE9by50ZXh0LGM9MDtkb3tpZihzPXQuZXhlYyhhKSxzKXt2YXIgaD1zLmluZGV4LHA9aCtzWzBdLmxlbmd0aCx1PW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKHNbMF0pOm47aD4wJiZpLnB1c2goby5jdXQoYyxoKSksaS5wdXNoKG8uY3V0KGgscCkubWFyayhlLmNyZWF0ZSh1KS5hZGRUb1NldChvLm1hcmtzKSkpLGM9cH19d2hpbGUocyk7YzxhLmxlbmd0aCYmaS5wdXNoKG8uY3V0KGMpKX1lbHNlIGkucHVzaChvLmNvcHkocihvLmNvbnRlbnQpKSl9KSkscWhbIkZyYWdtZW50Il0uZnJvbUFycmF5KGkpfTtyZXR1cm4gbmV3IFZoWyJQbHVnaW4iXSh7cHJvcHM6e3RyYW5zZm9ybVBhc3RlZDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHFoWyJTbGljZSJdKHIodC5jb250ZW50KSx0Lm9wZW5TdGFydCx0Lm9wZW5FbmQpfX19KX1mdW5jdGlvbiBlcCh0LGUsbil7dmFyIHI9ZnVuY3Rpb24gcihvLGkpe3ZhciBzPVtdO3JldHVybiBvLmZvckVhY2goKGZ1bmN0aW9uKG8pe2lmKG8uaXNUZXh0KXt2YXIgYSxjPW8udGV4dCxoPW8ubWFya3MscD0wLHU9ISFoLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuImxpbmsiPT09dC50eXBlLm5hbWV9KSlbMF07d2hpbGUoIXUmJm51bGwhPT0oYT10LmV4ZWMoYykpKWlmKGkudHlwZS5hbGxvd3NNYXJrVHlwZShlKSYmYVsxXSl7dmFyIGY9YS5pbmRleCxsPWYrYVswXS5sZW5ndGgsZD1mK2FbMF0uaW5kZXhPZihhWzFdKSx2PWQrYVsxXS5sZW5ndGgsbT1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bihhKTpuO2Y+MCYmcy5wdXNoKG8uY3V0KHAsZikpLHMucHVzaChvLmN1dChkLHYpLm1hcmsoZS5jcmVhdGUobSkuYWRkVG9TZXQoby5tYXJrcykpKSxwPWx9cDxjLmxlbmd0aCYmcy5wdXNoKG8uY3V0KHApKX1lbHNlIHMucHVzaChvLmNvcHkocihvLmNvbnRlbnQsbykpKX0pKSxxaFsiRnJhZ21lbnQiXS5mcm9tQXJyYXkocyl9O3JldHVybiBuZXcgVmhbIlBsdWdpbiJdKHtwcm9wczp7dHJhbnNmb3JtUGFzdGVkOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcWhbIlNsaWNlIl0ocih0LmNvbnRlbnQpLHQub3BlblN0YXJ0LHQub3BlbkVuZCl9fX0pfWZ1bmN0aW9uIG5wKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByPWUudHIsbz1lLnNlbGVjdGlvbixpPW8uZnJvbSxzPW8udG8sYT1vLiRmcm9tLGM9by5lbXB0eTtpZihjKXt2YXIgaD1SaChhLHQpO2k9aC5mcm9tLHM9aC50b31yZXR1cm4gci5yZW1vdmVNYXJrKGkscyx0KSxuKHIpfX1mdW5jdGlvbiBycCh0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToxLHI9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTp2b2lkIDAsbz10LnJlc29sdmUoZSksaT1vLmRlcHRoLW4scz1yJiZyW3IubGVuZ3RoLTFdfHxvLnBhcmVudDtpZihpPDB8fG8ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmd8fCFvLnBhcmVudC5jYW5SZXBsYWNlKG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KXx8IXMudHlwZS52YWxpZENvbnRlbnQoby5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KSkpcmV0dXJuITE7Zm9yKHZhciBhPW8uZGVwdGgtMSxjPW4tMjthPmk7YS0tLGMtLSl7dmFyIGg9by5ub2RlKGEpLHA9by5pbmRleChhKTtpZihoLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7dmFyIHU9aC5jb250ZW50LmN1dEJ5SW5kZXgocCxoLmNoaWxkQ291bnQpLGY9ciYmcltjXXx8aDtpZihmIT1oJiYodT11LnJlcGxhY2VDaGlsZCgwLGYudHlwZS5jcmVhdGUoZi5hdHRycykpKSwhaC5jYW5SZXBsYWNlKHArMSxoLmNoaWxkQ291bnQpKXJldHVybiExfXZhciBsPW8uaW5kZXhBZnRlcihpKSxkPXImJnJbMF07cmV0dXJuIG8ubm9kZShpKS5jYW5SZXBsYWNlV2l0aChsLGwsZD9kLnR5cGU6by5ub2RlKGkrMSkudHlwZSl9ZnVuY3Rpb24gb3AodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRmcm9tLGk9ci4kdG8scz1yLm5vZGU7aWYocyYmcy5pc0Jsb2NrfHxvLmRlcHRoPDJ8fCFvLnNhbWVQYXJlbnQoaSkpcmV0dXJuITE7dmFyIGE9by5ub2RlKC0xKTtpZihhLnR5cGUhPXQpcmV0dXJuITE7aWYoMD09by5wYXJlbnQuY29udGVudC5zaXplKXtpZigyPT1vLmRlcHRofHxvLm5vZGUoLTMpLnR5cGUhPXR8fG8uaW5kZXgoLTIpIT1vLm5vZGUoLTIpLmNoaWxkQ291bnQtMSlyZXR1cm4hMTtpZihuKXtmb3IodmFyIGM9cWhbIkZyYWdtZW50Il0uZW1wdHksaD1vLmluZGV4KC0xKT4wLHA9by5kZXB0aC0oaD8xOjIpO3A+PW8uZGVwdGgtMztwLS0pYz1xaFsiRnJhZ21lbnQiXS5mcm9tKG8ubm9kZShwKS5jb3B5KGMpKTtjPWMuYXBwZW5kKHFoWyJGcmFnbWVudCJdLmZyb20odC5jcmVhdGVBbmRGaWxsKCkpKTt2YXIgdT1lLnRyLnJlcGxhY2Uoby5iZWZvcmUoaD9udWxsOi0xKSxvLmFmdGVyKC0zKSxuZXcgcWhbIlNsaWNlIl0oYyxoPzM6MiwyKSk7dS5zZXRTZWxlY3Rpb24oZS5zZWxlY3Rpb24uY29uc3RydWN0b3IubmVhcih1LmRvYy5yZXNvbHZlKG8ucG9zKyhoPzM6MikpKSksbih1LnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXZhciBmPWkucG9zPT1vLmVuZCgpP2EuY29udGVudE1hdGNoQXQoby5pbmRleEFmdGVyKC0xKSkuZGVmYXVsdFR5cGU6bnVsbCxsPWUudHIuZGVsZXRlKG8ucG9zLGkucG9zKSxkPWYmJlt7dHlwZTp0fSx7dHlwZTpmfV07cmV0dXJuIGR8fChkPVt7dHlwZTp0fSxudWxsXSksISFycChsLmRvYyxvLnBvcywyLGQpJiYobiYmbihsLnNwbGl0KG8ucG9zLDIsZCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfX1mdW5jdGlvbiBpcCh0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtyZXR1cm4gZnVuY3Rpb24ocixvLGkpe3ZhciBzPURoKHIsdCxuKTtyZXR1cm4gcz90aChlKShyLG8saSk6dGgodCxuKShyLG8saSl9fWZ1bmN0aW9uIHNwKHQsZSl7cmV0dXJuIHQudHlwZT09PWUubm9kZXMuYnVsbGV0X2xpc3R8fHQudHlwZT09PWUubm9kZXMub3JkZXJlZF9saXN0fHx0LnR5cGU9PT1lLm5vZGVzLnRvZG9fbGlzdH1mdW5jdGlvbiBhcCh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIsbyl7dmFyIGk9bi5zY2hlbWEscz1uLnNlbGVjdGlvbixhPXMuJGZyb20sYz1zLiR0byxoPWEuYmxvY2tSYW5nZShjKTtpZighaClyZXR1cm4hMTt2YXIgcD1PYmplY3QoV2hbImZpbmRQYXJlbnROb2RlIl0pKChmdW5jdGlvbih0KXtyZXR1cm4gc3AodCxpKX0pKShzKTtpZihoLmRlcHRoPj0xJiZwJiZoLmRlcHRoLXAuZGVwdGg8PTEpe2lmKHAubm9kZS50eXBlPT09dClyZXR1cm4gX2goZSkobixyLG8pO2lmKHNwKHAubm9kZSxpKSYmdC52YWxpZENvbnRlbnQocC5ub2RlLmNvbnRlbnQpKXt2YXIgdT1uLnRyO3JldHVybiB1LnNldE5vZGVNYXJrdXAocC5wb3MsdCksciYmcih1KSwhMX19cmV0dXJuIEJoKHQpKG4scixvKX19ZnVuY3Rpb24gY3AodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXt2YXIgbz1EaChlLHQpO3JldHVybiBvP1ZjKGUsbik6UWModCkoZSxuLHIpfX1mdW5jdGlvbiBocCh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBvPW4udHIsaT1uLnNlbGVjdGlvbixzPW4uZG9jLGE9aS5mcm9tLGM9aS50byxoPWkuJGZyb20scD1pLmVtcHR5O2lmKHApe3ZhciB1PVJoKGgsdCk7YT11LmZyb20sYz11LnRvfXZhciBmPXMucmFuZ2VIYXNNYXJrKGEsYyx0KTtyZXR1cm4gZiYmby5yZW1vdmVNYXJrKGEsYyx0KSxvLmFkZE1hcmsoYSxjLHQuY3JlYXRlKGUpKSxyKG8pfX0KLyohCiAgICAqIHRpcHRhcCB2MS4yNy4wCiAgICAqIChjKSAyMDIwIFNjcnVtcHkgVUcgKGxpbWl0ZWQgbGlhYmlsaXR5KQogICAgKiBAbGljZW5zZSBNSVQKICAgICovZnVuY3Rpb24gcHAodCl7cmV0dXJuIHBwPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxwcCh0KX1mdW5jdGlvbiB1cCh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGZwKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19ZnVuY3Rpb24gbHAodCxlLG4pe3JldHVybiBlJiZmcCh0LnByb3RvdHlwZSxlKSxuJiZmcCh0LG4pLHR9ZnVuY3Rpb24gZHAodCxlLG4pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09bix0fWZ1bmN0aW9uIHZwKHQsZSl7dmFyIG49T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYocj1yLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBtcCh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj92cChPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2RwKHQsZSxuW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTp2cChPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLGUpKX0pKX1yZXR1cm4gdH1mdW5jdGlvbiB5cCh0LGUpe2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmd3AodCxlKX1mdW5jdGlvbiBncCh0KXtyZXR1cm4gZ3A9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0sZ3AodCl9ZnVuY3Rpb24gd3AodCxlKXtyZXR1cm4gd3A9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0LGUpe3JldHVybiB0Ll9fcHJvdG9fXz1lLHR9LHdwKHQsZSl9ZnVuY3Rpb24geHAoKXtpZigidW5kZWZpbmVkIj09PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uIGJwKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gdH1mdW5jdGlvbiBrcCh0LGUpe3JldHVybiFlfHwib2JqZWN0IiE9PXR5cGVvZiBlJiYiZnVuY3Rpb24iIT09dHlwZW9mIGU/YnAodCk6ZX1mdW5jdGlvbiBTcCh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZSxuPWdwKHQpO2lmKHhwKCkpe3ZhciByPWdwKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMscil9ZWxzZSBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBrcCh0aGlzLGUpfX1mdW5jdGlvbiBPcCh0LGUpe3JldHVybiBUcCh0KXx8RXAodCxlKXx8QXAodCxlKXx8RHAoKX1mdW5jdGlvbiBDcCh0KXtyZXR1cm4gTXAodCl8fE5wKHQpfHxBcCh0KXx8enAoKX1mdW5jdGlvbiBNcCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBScCh0KX1mdW5jdGlvbiBUcCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0fWZ1bmN0aW9uIE5wKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBFcCh0LGUpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIHMsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KHM9YS5uZXh0KCkpLmRvbmUpO3I9ITApaWYobi5wdXNoKHMudmFsdWUpLGUmJm4ubGVuZ3RoPT09ZSlicmVha31jYXRjaChjKXtvPSEwLGk9Y31maW5hbGx5e3RyeXtyfHxudWxsPT1hWyJyZXR1cm4iXXx8YVsicmV0dXJuIl0oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59fWZ1bmN0aW9uIEFwKHQsZSl7aWYodCl7aWYoInN0cmluZyI9PT10eXBlb2YgdClyZXR1cm4gUnAodCxlKTt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwtMSk7cmV0dXJuIk9iamVjdCI9PT1uJiZ0LmNvbnN0cnVjdG9yJiYobj10LmNvbnN0cnVjdG9yLm5hbWUpLCJNYXAiPT09bnx8IlNldCI9PT1uP0FycmF5LmZyb20obik6IkFyZ3VtZW50cyI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9ScCh0LGUpOnZvaWQgMH19ZnVuY3Rpb24gUnAodCxlKXsobnVsbD09ZXx8ZT50Lmxlbmd0aCkmJihlPXQubGVuZ3RoKTtmb3IodmFyIG49MCxyPW5ldyBBcnJheShlKTtuPGU7bisrKXJbbl09dFtuXTtyZXR1cm4gcn1mdW5jdGlvbiB6cCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfWZ1bmN0aW9uIERwKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX1mdW5jdGlvbiBJcCh0KXtyZXR1cm4gdC5yZXBsYWNlKC8oPzpeXHd8W0EtWl18XGJcdykvZywoZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PWU/dC50b0xvd2VyQ2FzZSgpOnQudG9VcHBlckNhc2UoKX0pKS5yZXBsYWNlKC9ccysvZywiIil9dmFyIFBwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3ZhciByPW4uZWRpdG9yLG89bi5leHRlbnNpb24saT1uLnBhcmVudCxzPW4ubm9kZSxhPW4udmlldyxjPW4uZGVjb3JhdGlvbnMsaD1uLmdldFBvczt1cCh0aGlzLHQpLHRoaXMuY29tcG9uZW50PWUsdGhpcy5lZGl0b3I9cix0aGlzLmV4dGVuc2lvbj1vLHRoaXMucGFyZW50PWksdGhpcy5ub2RlPXMsdGhpcy52aWV3PWEsdGhpcy5kZWNvcmF0aW9ucz1jLHRoaXMuaXNOb2RlPSEhdGhpcy5ub2RlLm1hcmtzLHRoaXMuaXNNYXJrPSF0aGlzLmlzTm9kZSx0aGlzLmdldFBvcz10aGlzLmlzTWFyaz90aGlzLmdldE1hcmtQb3M6aCx0aGlzLmNhcHR1cmVFdmVudHM9ITAsdGhpcy5kb209dGhpcy5jcmVhdGVET00oKSx0aGlzLmNvbnRlbnRET009dGhpcy52bS4kcmVmcy5jb250ZW50fXJldHVybiBscCh0LFt7a2V5OiJjcmVhdGVET00iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVBoLmEuZXh0ZW5kKHRoaXMuY29tcG9uZW50KSxuPXtlZGl0b3I6dGhpcy5lZGl0b3Isbm9kZTp0aGlzLm5vZGUsdmlldzp0aGlzLnZpZXcsZ2V0UG9zOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0UG9zKCl9LGRlY29yYXRpb25zOnRoaXMuZGVjb3JhdGlvbnMsc2VsZWN0ZWQ6ITEsb3B0aW9uczp0aGlzLmV4dGVuc2lvbi5vcHRpb25zLHVwZGF0ZUF0dHJzOmZ1bmN0aW9uKGUpe3JldHVybiB0LnVwZGF0ZUF0dHJzKGUpfX07cmV0dXJuImZ1bmN0aW9uIj09PXR5cGVvZiB0aGlzLmV4dGVuc2lvbi5zZXRTZWxlY3Rpb24mJih0aGlzLnNldFNlbGVjdGlvbj10aGlzLmV4dGVuc2lvbi5zZXRTZWxlY3Rpb24pLCJmdW5jdGlvbiI9PT10eXBlb2YgdGhpcy5leHRlbnNpb24udXBkYXRlJiYodGhpcy51cGRhdGU9dGhpcy5leHRlbnNpb24udXBkYXRlKSx0aGlzLnZtPW5ldyBlKHtwYXJlbnQ6dGhpcy5wYXJlbnQscHJvcHNEYXRhOm59KS4kbW91bnQoKSx0aGlzLnZtLiRlbH19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlPT09dGhpcy5ub2RlLnR5cGUmJih0PT09dGhpcy5ub2RlJiZ0aGlzLmRlY29yYXRpb25zPT09ZXx8KHRoaXMubm9kZT10LHRoaXMuZGVjb3JhdGlvbnM9ZSx0aGlzLnVwZGF0ZUNvbXBvbmVudFByb3BzKHtub2RlOnQsZGVjb3JhdGlvbnM6ZX0pKSwhMCl9fSx7a2V5OiJ1cGRhdGVDb21wb25lbnRQcm9wcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLnZtLl9wcm9wcyl7dmFyIG49UGguYS5jb25maWcuc2lsZW50O1BoLmEuY29uZmlnLnNpbGVudD0hMCxPYmplY3QuZW50cmllcyh0KS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj1PcCh0LDIpLHI9blswXSxvPW5bMV07ZS52bS5fcHJvcHNbcl09b30pKSxQaC5hLmNvbmZpZy5zaWxlbnQ9bn19fSx7a2V5OiJ1cGRhdGVBdHRycyIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy52aWV3LmVkaXRhYmxlKXt2YXIgZT10aGlzLnZpZXcuc3RhdGUsbj10aGlzLm5vZGUudHlwZSxyPXRoaXMuZ2V0UG9zKCksbz1tcCh7fSx0aGlzLm5vZGUuYXR0cnMse30sdCksaT10aGlzLmlzTWFyaz9lLnRyLnJlbW92ZU1hcmsoci5mcm9tLHIudG8sbikuYWRkTWFyayhyLmZyb20sci50byxuLmNyZWF0ZShvKSk6ZS50ci5zZXROb2RlTWFya3VwKHIsbnVsbCxvKTt0aGlzLnZpZXcuZGlzcGF0Y2goaSl9fX0se2tleToiaWdub3JlTXV0YXRpb24iLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiJzZWxlY3Rpb24iIT09dC50eXBlJiYoIXRoaXMuY29udGVudERPTXx8IXRoaXMuY29udGVudERPTS5jb250YWlucyh0LnRhcmdldCkpfX0se2tleToic3RvcEV2ZW50Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgdGhpcy5leHRlbnNpb24uc3RvcEV2ZW50KXJldHVybiB0aGlzLmV4dGVuc2lvbi5zdG9wRXZlbnQodCk7dmFyIG49ISF0aGlzLmV4dGVuc2lvbi5zY2hlbWEuZHJhZ2dhYmxlO2lmKG4mJiJtb3VzZWRvd24iPT09dC50eXBlKXt2YXIgcj10LnRhcmdldC5jbG9zZXN0JiZ0LnRhcmdldC5jbG9zZXN0KCJbZGF0YS1kcmFnLWhhbmRsZV0iKSxvPXImJih0aGlzLmRvbT09PXJ8fHRoaXMuZG9tLmNvbnRhaW5zKHIpKTtvJiYodGhpcy5jYXB0dXJlRXZlbnRzPSExLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImRyYWdlbmQiLChmdW5jdGlvbigpe2UuY2FwdHVyZUV2ZW50cz0hMH0pLHtvbmNlOiEwfSkpfXZhciBpPSJjb3B5Ij09PXQudHlwZSxzPSJwYXN0ZSI9PT10LnR5cGUsYT0iY3V0Ij09PXQudHlwZSxjPXQudHlwZS5zdGFydHNXaXRoKCJkcmFnIil8fCJkcm9wIj09PXQudHlwZTtyZXR1cm4hKG4mJmN8fGl8fHN8fGEpJiZ0aGlzLmNhcHR1cmVFdmVudHN9fSx7a2V5OiJzZWxlY3ROb2RlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlQ29tcG9uZW50UHJvcHMoe3NlbGVjdGVkOiEwfSl9fSx7a2V5OiJkZXNlbGVjdE5vZGUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVDb21wb25lbnRQcm9wcyh7c2VsZWN0ZWQ6ITF9KX19LHtrZXk6ImdldE1hcmtQb3MiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aWV3LnBvc0F0RE9NKHRoaXMuZG9tKSxlPXRoaXMudmlldy5zdGF0ZS5kb2MucmVzb2x2ZSh0KSxuPVJoKGUsdGhpcy5ub2RlLnR5cGUpO3JldHVybiBufX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnZtLiRkZXN0cm95KCl9fV0pLHR9KCksQnA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dXAodGhpcyx0KX1yZXR1cm4gbHAodCxbe2tleToib24iLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHRoaXMuX2NhbGxiYWNrc1t0XXx8KHRoaXMuX2NhbGxiYWNrc1t0XT1bXSksdGhpcy5fY2FsbGJhY2tzW3RdLnB1c2goZSksdGhpc319LHtrZXk6ImVtaXQiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheShuPjE/bi0xOjApLG89MTtvPG47bysrKXJbby0xXT1hcmd1bWVudHNbb107dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGk9dGhpcy5fY2FsbGJhY2tzW3RdO3JldHVybiBpJiZpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFwcGx5KGUscil9KSksdGhpc319LHtrZXk6Im9mZiIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgbj10aGlzLl9jYWxsYmFja3M/dGhpcy5fY2FsbGJhY2tzW3RdOm51bGw7biYmKGU/dGhpcy5fY2FsbGJhY2tzW3RdPW4uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdCE9PWV9KSk6ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1t0XSl9ZWxzZSB0aGlzLl9jYWxsYmFja3M9e307cmV0dXJuIHRoaXN9fV0pLHR9KCksRnA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3VwKHRoaXMsdCksdGhpcy5vcHRpb25zPW1wKHt9LHRoaXMuZGVmYXVsdE9wdGlvbnMse30sZSl9cmV0dXJuIGxwKHQsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJiaW5kRWRpdG9yIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO3RoaXMuZWRpdG9yPXR9fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybltdfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue319fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19LHtrZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiJleHRlbnNpb24ifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybnt9fX0se2tleToicGx1Z2lucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fV0pLHR9KCksanA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLG49YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7dXAodGhpcyx0KSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuYmluZEVkaXRvcihuKSx0LmluaXQoKX0pKSx0aGlzLmV4dGVuc2lvbnM9ZX1yZXR1cm4gbHAodCxbe2tleToia2V5bWFwcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zY2hlbWEsbj10aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXlzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5cyh7c2NoZW1hOmV9KX0pKSxyPXRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVyblsibm9kZSIsIm1hcmsiXS5pbmNsdWRlcyh0LnR5cGUpfSkpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5c30pKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleXMoe3R5cGU6ZVsiIi5jb25jYXQodC50eXBlLCJzIildW3QubmFtZV0sc2NoZW1hOmV9KX0pKTtyZXR1cm5bXS5jb25jYXQoQ3AobiksQ3AocikpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChTY1siYiJdKSh0KX0pKX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5wdXRSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlucHV0UnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KENwKG8pLENwKGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KENwKHQpLENwKGUpKX0pLFtdKX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQucGFzdGVSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhc3RlUnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KENwKG8pLENwKGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KENwKHQpLENwKGUpKX0pLFtdKX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNjaGVtYSxuPXQudmlldztyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tbWFuZHN9KSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBvPXIubmFtZSxpPXIudHlwZSxzPXt9LGE9ci5jb21tYW5kcyhtcCh7c2NoZW1hOmV9LFsibm9kZSIsIm1hcmsiXS5pbmNsdWRlcyhpKT97dHlwZTplWyIiLmNvbmNhdChpLCJzIildW29dfTp7fSkpLGM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIW4uZWRpdGFibGUmJihuLmZvY3VzKCksdChlKShuLnN0YXRlLG4uZGlzcGF0Y2gsbikpfSxoPWZ1bmN0aW9uKHQsZSl7QXJyYXkuaXNBcnJheShlKT9zW3RdPWZ1bmN0aW9uKHQpe3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBjKGUsdCl9KSl9OiJmdW5jdGlvbiI9PT10eXBlb2YgZSYmKHNbdF09ZnVuY3Rpb24odCl7cmV0dXJuIGMoZSx0KX0pfTtyZXR1cm4ib2JqZWN0Ij09PXBwKGEpP09iamVjdC5lbnRyaWVzKGEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBlPU9wKHQsMiksbj1lWzBdLHI9ZVsxXTtoKG4scil9KSk6aChvLGEpLG1wKHt9LHQse30scyl9KSx7fSl9fSx7a2V5OiJub2RlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJub2RlIj09PXQudHlwZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5uYW1lLHI9ZS5zY2hlbWE7cmV0dXJuIG1wKHt9LHQsZHAoe30sbixyKSl9KSx7fSl9fSx7a2V5OiJvcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZpZXc7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5yZWR1Y2UoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIG1wKHt9LGUsZHAoe30sbi5uYW1lLG5ldyBQcm94eShuLm9wdGlvbnMse3NldDpmdW5jdGlvbihlLG4scil7dmFyIG89ZVtuXSE9PXI7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSxkcCh7fSxuLHIpKSxvJiZ0LnVwZGF0ZVN0YXRlKHQuc3RhdGUpLCEwfX0pKSl9KSx7fSl9fSx7a2V5OiJtYXJrcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJtYXJrIj09PXQudHlwZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5uYW1lLHI9ZS5zY2hlbWE7cmV0dXJuIG1wKHt9LHQsZHAoe30sbixyKSl9KSx7fSl9fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQucGx1Z2luc30pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5wbHVnaW5zO3JldHVybltdLmNvbmNhdChDcCh0KSxDcChuKSl9KSxbXSl9fV0pLHR9KCk7ZnVuY3Rpb24gX3AodCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnR5cGU9InRleHQvY3NzIixlLnRleHRDb250ZW50PXQ7dmFyIG49ZG9jdW1lbnQscj1uLmhlYWQsbz1yLmZpcnN0Q2hpbGQ7bz9yLmluc2VydEJlZm9yZShlLG8pOnIuYXBwZW5kQ2hpbGQoZSl9dmFyICRwPWZ1bmN0aW9uKHQpe3lwKG4sdCk7dmFyIGU9U3Aobik7ZnVuY3Rpb24gbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gdXAodGhpcyxuKSxlLmNhbGwodGhpcyx0KX1yZXR1cm4gbHAobixbe2tleToiY29tbWFuZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIm1hcmsifX0se2tleToidmlldyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX1dKSxufShGcCk7ZnVuY3Rpb24gSnAoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjA7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHBhcnNlSW50KHQsMTApLGUpLG4pfXZhciBMcD1mdW5jdGlvbih0KXt5cChuLHQpO3ZhciBlPVNwKG4pO2Z1bmN0aW9uIG4oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIHVwKHRoaXMsbiksZS5jYWxsKHRoaXMsdCl9cmV0dXJuIGxwKG4sW3trZXk6ImNvbW1hbmQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX19LHtrZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiJub2RlIn19LHtrZXk6InZpZXciLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19XSksbn0oRnApLFZwPWZ1bmN0aW9uKHQpe3lwKG4sdCk7dmFyIGU9U3Aobik7ZnVuY3Rpb24gbigpe3JldHVybiB1cCh0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBscChuLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iZG9jIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6ImJsb2NrKyJ9fX1dKSxufShMcCkscXA9ZnVuY3Rpb24odCl7eXAobix0KTt2YXIgZT1TcChuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHVwKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGxwKG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoKGUpfX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJwYXJhZ3JhcGgifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29udGVudDoiaW5saW5lKiIsZ3JvdXA6ImJsb2NrIixkcmFnZ2FibGU6ITEscGFyc2VET006W3t0YWc6InAifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInAiLDBdfX19fV0pLG59KExwKSxXcD1mdW5jdGlvbih0KXt5cChuLHQpO3ZhciBlPVNwKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gdXAodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbHAobixbe2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRleHQifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Z3JvdXA6ImlubGluZSJ9fX1dKSxufShMcCksSHA9Jy5Qcm9zZU1pcnJvciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLlByb3NlTWlycm9yIHtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIC13ZWJraXQtZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbiAgZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbn1cblxuLlByb3NlTWlycm9yIHByZSB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLlByb3NlTWlycm9yLWdhcGN1cnNvciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG5cbi5Qcm9zZU1pcnJvci1nYXBjdXJzb3I6YWZ0ZXIge1xuICBjb250ZW50OiAiIjtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMnB4O1xuICB3aWR0aDogMjBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIGJsYWNrO1xuICBhbmltYXRpb246IFByb3NlTWlycm9yLWN1cnNvci1ibGluayAxLjFzIHN0ZXBzKDIsIHN0YXJ0KSBpbmZpbml0ZTtcbn1cblxuQGtleWZyYW1lcyBQcm9zZU1pcnJvci1jdXJzb3ItYmxpbmsge1xuICB0byB7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICB9XG59XG5cbi5Qcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uICo6OnNlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiAqOjotbW96LXNlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiAqIHtcbiAgY2FyZXQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItZm9jdXNlZCAuUHJvc2VNaXJyb3ItZ2FwY3Vyc29yIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4nLEtwPWZ1bmN0aW9uKHQpe3lwKG4sdCk7dmFyIGU9U3Aobik7ZnVuY3Rpb24gbigpe3ZhciB0LHI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiB1cCh0aGlzLG4pLHQ9ZS5jYWxsKHRoaXMpLHQuZGVmYXVsdE9wdGlvbnM9e2VkaXRvclByb3BzOnt9LGVkaXRhYmxlOiEwLGF1dG9Gb2N1czpudWxsLGV4dGVuc2lvbnM6W10sY29udGVudDoiIix0b3BOb2RlOiJkb2MiLGVtcHR5RG9jdW1lbnQ6e3R5cGU6ImRvYyIsY29udGVudDpbe3R5cGU6InBhcmFncmFwaCJ9XX0sdXNlQnVpbHRJbkV4dGVuc2lvbnM6ITAsZGlzYWJsZUlucHV0UnVsZXM6ITEsZGlzYWJsZVBhc3RlUnVsZXM6ITEsZHJvcEN1cnNvcjp7fSxwYXJzZU9wdGlvbnM6e30saW5qZWN0Q1NTOiEwLG9uSW5pdDpmdW5jdGlvbigpe30sb25UcmFuc2FjdGlvbjpmdW5jdGlvbigpe30sb25VcGRhdGU6ZnVuY3Rpb24oKXt9LG9uRm9jdXM6ZnVuY3Rpb24oKXt9LG9uQmx1cjpmdW5jdGlvbigpe30sb25QYXN0ZTpmdW5jdGlvbigpe30sb25Ecm9wOmZ1bmN0aW9uKCl7fX0sdC5ldmVudHM9WyJpbml0IiwidHJhbnNhY3Rpb24iLCJ1cGRhdGUiLCJmb2N1cyIsImJsdXIiLCJwYXN0ZSIsImRyb3AiXSx0LmluaXQociksdH1yZXR1cm4gbHAobixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuc2V0T3B0aW9ucyhtcCh7fSx0aGlzLmRlZmF1bHRPcHRpb25zLHt9LGUpKSx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5zZWxlY3Rpb249e2Zyb206MCx0bzowfSx0aGlzLmVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5leHRlbnNpb25zPXRoaXMuY3JlYXRlRXh0ZW5zaW9ucygpLHRoaXMubm9kZXM9dGhpcy5jcmVhdGVOb2RlcygpLHRoaXMubWFya3M9dGhpcy5jcmVhdGVNYXJrcygpLHRoaXMuc2NoZW1hPXRoaXMuY3JlYXRlU2NoZW1hKCksdGhpcy5wbHVnaW5zPXRoaXMuY3JlYXRlUGx1Z2lucygpLHRoaXMua2V5bWFwcz10aGlzLmNyZWF0ZUtleW1hcHMoKSx0aGlzLmlucHV0UnVsZXM9dGhpcy5jcmVhdGVJbnB1dFJ1bGVzKCksdGhpcy5wYXN0ZVJ1bGVzPXRoaXMuY3JlYXRlUGFzdGVSdWxlcygpLHRoaXMudmlldz10aGlzLmNyZWF0ZVZpZXcoKSx0aGlzLmNvbW1hbmRzPXRoaXMuY3JlYXRlQ29tbWFuZHMoKSx0aGlzLnNldEFjdGl2ZU5vZGVzQW5kTWFya3MoKSx0aGlzLm9wdGlvbnMuaW5qZWN0Q1NTJiZfcChIcCksbnVsbCE9PXRoaXMub3B0aW9ucy5hdXRvRm9jdXMmJnRoaXMuZm9jdXModGhpcy5vcHRpb25zLmF1dG9Gb2N1cyksdGhpcy5ldmVudHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbihlLHQub3B0aW9uc1tJcCgib24gIi5jb25jYXQoZSkpXXx8ZnVuY3Rpb24oKXt9KX0pKSx0aGlzLmVtaXQoImluaXQiLHt2aWV3OnRoaXMudmlldyxzdGF0ZTp0aGlzLnN0YXRlfSksdGhpcy5leHRlbnNpb25zLnZpZXc9dGhpcy52aWV3fX0se2tleToic2V0T3B0aW9ucyIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPW1wKHt9LHRoaXMub3B0aW9ucyx7fSx0KSx0aGlzLnZpZXcmJnRoaXMuc3RhdGUmJnRoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlKX19LHtrZXk6ImNyZWF0ZUV4dGVuc2lvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBqcChbXS5jb25jYXQoQ3AodGhpcy5idWlsdEluRXh0ZW5zaW9ucyksQ3AodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKSx0aGlzKX19LHtrZXk6ImNyZWF0ZVBsdWdpbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5wbHVnaW5zfX0se2tleToiY3JlYXRlS2V5bWFwcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmtleW1hcHMoe3NjaGVtYTp0aGlzLnNjaGVtYX0pfX0se2tleToiY3JlYXRlSW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmlucHV0UnVsZXMoe3NjaGVtYTp0aGlzLnNjaGVtYSxleGNsdWRlZEV4dGVuc2lvbnM6dGhpcy5vcHRpb25zLmRpc2FibGVJbnB1dFJ1bGVzfSl9fSx7a2V5OiJjcmVhdGVQYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMucGFzdGVSdWxlcyh7c2NoZW1hOnRoaXMuc2NoZW1hLGV4Y2x1ZGVkRXh0ZW5zaW9uczp0aGlzLm9wdGlvbnMuZGlzYWJsZVBhc3RlUnVsZXN9KX19LHtrZXk6ImNyZWF0ZUNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMuY29tbWFuZHMoe3NjaGVtYTp0aGlzLnNjaGVtYSx2aWV3OnRoaXMudmlld30pfX0se2tleToiY3JlYXRlTm9kZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5ub2Rlc319LHtrZXk6ImNyZWF0ZU1hcmtzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMubWFya3N9fSx7a2V5OiJjcmVhdGVTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRYSh7dG9wTm9kZTp0aGlzLm9wdGlvbnMudG9wTm9kZSxub2Rlczp0aGlzLm5vZGVzLG1hcmtzOnRoaXMubWFya3N9KX19LHtrZXk6ImNyZWF0ZVN0YXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGVlLmNyZWF0ZSh7c2NoZW1hOnRoaXMuc2NoZW1hLGRvYzp0aGlzLmNyZWF0ZURvY3VtZW50KHRoaXMub3B0aW9ucy5jb250ZW50KSxwbHVnaW5zOltdLmNvbmNhdChDcCh0aGlzLnBsdWdpbnMpLFtkaCh7cnVsZXM6dGhpcy5pbnB1dFJ1bGVzfSldLENwKHRoaXMucGFzdGVSdWxlcyksQ3AodGhpcy5rZXltYXBzKSxbT2JqZWN0KFNjWyJiIl0pKHtCYWNrc3BhY2U6bWh9KSxPYmplY3QoU2NbImIiXSkocGgpLGJjKHRoaXMub3B0aW9ucy5kcm9wQ3Vyc29yKSxBYygpLG5ldyBpZSh7a2V5Om5ldyBjZSgiZWRpdGFibGUiKSxwcm9wczp7ZWRpdGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmVkaXRhYmxlfX19KSxuZXcgaWUoe3Byb3BzOnthdHRyaWJ1dGVzOnt0YWJpbmRleDowfSxoYW5kbGVET01FdmVudHM6e2ZvY3VzOmZ1bmN0aW9uKGUsbil7dC5mb2N1c2VkPSEwLHQuZW1pdCgiZm9jdXMiLHtldmVudDpuLHN0YXRlOmUuc3RhdGUsdmlldzplfSk7dmFyIHI9dC5zdGF0ZS50ci5zZXRNZXRhKCJmb2N1c2VkIiwhMCk7dC52aWV3LmRpc3BhdGNoKHIpfSxibHVyOmZ1bmN0aW9uKGUsbil7dC5mb2N1c2VkPSExLHQuZW1pdCgiYmx1ciIse2V2ZW50Om4sc3RhdGU6ZS5zdGF0ZSx2aWV3OmV9KTt2YXIgcj10LnN0YXRlLnRyLnNldE1ldGEoImZvY3VzZWQiLCExKTt0LnZpZXcuZGlzcGF0Y2gocil9fX19KSxuZXcgaWUoe3Byb3BzOnRoaXMub3B0aW9ucy5lZGl0b3JQcm9wc30pXSl9KX19LHtrZXk6ImNyZWF0ZURvY3VtZW50Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5vcHRpb25zLnBhcnNlT3B0aW9ucztpZihudWxsPT09dClyZXR1cm4gdGhpcy5zY2hlbWEubm9kZUZyb21KU09OKHRoaXMub3B0aW9ucy5lbXB0eURvY3VtZW50KTtpZigib2JqZWN0Ij09PXBwKHQpKXRyeXtyZXR1cm4gdGhpcy5zY2hlbWEubm9kZUZyb21KU09OKHQpfWNhdGNoKHIpe3JldHVybiBjb25zb2xlLndhcm4oIlt0aXB0YXAgd2Fybl06IEludmFsaWQgY29udGVudC4iLCJQYXNzZWQgdmFsdWU6Iix0LCJFcnJvcjoiLHIpLHRoaXMuc2NoZW1hLm5vZGVGcm9tSlNPTih0aGlzLm9wdGlvbnMuZW1wdHlEb2N1bWVudCl9aWYoInN0cmluZyI9PT10eXBlb2YgdCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uaW5uZXJIVE1MPXQudHJpbSgpLGVjLmZyb21TY2hlbWEodGhpcy5zY2hlbWEpLnBhcnNlKG4sZSl9cmV0dXJuITF9fSx7a2V5OiJjcmVhdGVWaWV3Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBqcyh0aGlzLmVsZW1lbnQse3N0YXRlOnRoaXMuY3JlYXRlU3RhdGUoKSxoYW5kbGVQYXN0ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09YXJndW1lbnRzW3JdO3QuZW1pdC5hcHBseSh0LFsicGFzdGUiXS5jb25jYXQobikpfSxoYW5kbGVEcm9wOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT1hcmd1bWVudHNbcl07dC5lbWl0LmFwcGx5KHQsWyJkcm9wIl0uY29uY2F0KG4pKX0sZGlzcGF0Y2hUcmFuc2FjdGlvbjp0aGlzLmRpc3BhdGNoVHJhbnNhY3Rpb24uYmluZCh0aGlzKX0pfX0se2tleToic2V0UGFyZW50Q29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO3QmJnRoaXMudmlldy5zZXRQcm9wcyh7bm9kZVZpZXdzOnRoaXMuaW5pdE5vZGVWaWV3cyh7cGFyZW50OnQsZXh0ZW5zaW9uczpbXS5jb25jYXQoQ3AodGhpcy5idWlsdEluRXh0ZW5zaW9ucyksQ3AodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKX0pfSl9fSx7a2V5OiJpbml0Tm9kZVZpZXdzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5wYXJlbnQscj10LmV4dGVuc2lvbnM7cmV0dXJuIHIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZpZXd9KSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBvPWZ1bmN0aW9uKHQsbyxpLHMpe3ZhciBhPXIudmlldztyZXR1cm4gbmV3IFBwKGEse2VkaXRvcjplLGV4dGVuc2lvbjpyLHBhcmVudDpuLG5vZGU6dCx2aWV3Om8sZ2V0UG9zOmksZGVjb3JhdGlvbnM6c30pfTtyZXR1cm4gbXAoe30sdCxkcCh7fSxyLm5hbWUsbykpfSkse30pfX0se2tleToiZGlzcGF0Y2hUcmFuc2FjdGlvbiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZS5hcHBseSh0KTt0aGlzLnZpZXcudXBkYXRlU3RhdGUoZSksdGhpcy5zZWxlY3Rpb249e2Zyb206dGhpcy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSx0bzp0aGlzLnN0YXRlLnNlbGVjdGlvbi50b30sdGhpcy5zZXRBY3RpdmVOb2Rlc0FuZE1hcmtzKCksdGhpcy5lbWl0KCJ0cmFuc2FjdGlvbiIse2dldEhUTUw6dGhpcy5nZXRIVE1MLmJpbmQodGhpcyksZ2V0SlNPTjp0aGlzLmdldEpTT04uYmluZCh0aGlzKSxzdGF0ZTp0aGlzLnN0YXRlLHRyYW5zYWN0aW9uOnR9KSx0LmRvY0NoYW5nZWQmJiF0LmdldE1ldGEoInByZXZlbnRVcGRhdGUiKSYmdGhpcy5lbWl0VXBkYXRlKHQpfX0se2tleToiZW1pdFVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbWl0KCJ1cGRhdGUiLHtnZXRIVE1MOnRoaXMuZ2V0SFRNTC5iaW5kKHRoaXMpLGdldEpTT046dGhpcy5nZXRKU09OLmJpbmQodGhpcyksc3RhdGU6dGhpcy5zdGF0ZSx0cmFuc2FjdGlvbjp0fSl9fSx7a2V5OiJyZXNvbHZlU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO2lmKHRoaXMuc2VsZWN0aW9uJiZudWxsPT09dClyZXR1cm4gdGhpcy5zZWxlY3Rpb247aWYoInN0YXJ0Ij09PXR8fCEwPT09dClyZXR1cm57ZnJvbTowLHRvOjB9O2lmKCJlbmQiPT09dCl7dmFyIGU9dGhpcy5zdGF0ZS5kb2M7cmV0dXJue2Zyb206ZS5jb250ZW50LnNpemUsdG86ZS5jb250ZW50LnNpemV9fXJldHVybntmcm9tOnQsdG86dH19fSx7a2V5OiJmb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7aWYoISh0aGlzLnZpZXcuZm9jdXNlZCYmbnVsbD09PWV8fCExPT09ZSkpe3ZhciBuPXRoaXMucmVzb2x2ZVNlbGVjdGlvbihlKSxyPW4uZnJvbSxvPW4udG87dGhpcy5zZXRTZWxlY3Rpb24ocixvKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnZpZXcuZm9jdXMoKX0pLDEwKX19fSx7a2V5OiJzZXRTZWxlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxuPXRoaXMuc3RhdGUscj1uLmRvYyxvPW4udHIsaT1KcCh0LDAsci5jb250ZW50LnNpemUpLHM9SnAoZSwwLHIuY29udGVudC5zaXplKSxhPV90LmNyZWF0ZShyLGkscyksYz1vLnNldFNlbGVjdGlvbihhKTt0aGlzLnZpZXcuZGlzcGF0Y2goYyl9fSx7a2V5OiJibHVyIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudmlldy5kb20uYmx1cigpfX0se2tleToiZ2V0U2NoZW1hSlNPTiIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7bm9kZXM6dGhpcy5leHRlbnNpb25zLm5vZGVzLG1hcmtzOnRoaXMuZXh0ZW5zaW9ucy5tYXJrc30pKX19LHtrZXk6ImdldEhUTUwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT15Yy5mcm9tU2NoZW1hKHRoaXMuc2NoZW1hKS5zZXJpYWxpemVGcmFnbWVudCh0aGlzLnN0YXRlLmRvYy5jb250ZW50KTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlKSx0LmlubmVySFRNTH19LHtrZXk6ImdldEpTT04iLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuZG9jLnRvSlNPTigpfX0se2tleToic2V0Q29udGVudCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDAscj10aGlzLnN0YXRlLG89ci5kb2MsaT1yLnRyLHM9dGhpcy5jcmVhdGVEb2N1bWVudCh0LG4pLGE9X3QuY3JlYXRlKG8sMCxvLmNvbnRlbnQuc2l6ZSksYz1pLnNldFNlbGVjdGlvbihhKS5yZXBsYWNlU2VsZWN0aW9uV2l0aChzLCExKS5zZXRNZXRhKCJwcmV2ZW50VXBkYXRlIiwhZSk7dGhpcy52aWV3LmRpc3BhdGNoKGMpfX0se2tleToiY2xlYXJDb250ZW50Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07dGhpcy5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5lbXB0eURvY3VtZW50LHQpfX0se2tleToic2V0QWN0aXZlTm9kZXNBbmRNYXJrcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYWN0aXZlTWFya3M9T2JqZWN0LmVudHJpZXModGhpcy5zY2hlbWEubWFya3MpLnJlZHVjZSgoZnVuY3Rpb24oZSxuKXt2YXIgcj1PcChuLDIpLG89clswXSxpPXJbMV07cmV0dXJuIG1wKHt9LGUsZHAoe30sbywoZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIHpoKHQuc3RhdGUsaSxlKX0pKSl9KSx7fSksdGhpcy5hY3RpdmVNYXJrQXR0cnM9T2JqZWN0LmVudHJpZXModGhpcy5zY2hlbWEubWFya3MpLnJlZHVjZSgoZnVuY3Rpb24oZSxuKXt2YXIgcj1PcChuLDIpLG89clswXSxpPXJbMV07cmV0dXJuIG1wKHt9LGUsZHAoe30sbyxFaCh0LnN0YXRlLGkpKSl9KSx7fSksdGhpcy5hY3RpdmVOb2Rlcz1PYmplY3QuZW50cmllcyh0aGlzLnNjaGVtYS5ub2RlcykucmVkdWNlKChmdW5jdGlvbihlLG4pe3ZhciByPU9wKG4sMiksbz1yWzBdLGk9clsxXTtyZXR1cm4gbXAoe30sZSxkcCh7fSxvLChmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gRGgodC5zdGF0ZSxpLGUpfSkpKX0pLHt9KX19LHtrZXk6ImdldE1hcmtBdHRycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtyZXR1cm4gdGhpcy5hY3RpdmVNYXJrQXR0cnNbdF19fSx7a2V5OiJnZXROb2RlQXR0cnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7cmV0dXJuIG1wKHt9LEFoKHRoaXMuc3RhdGUsdGhpcy5zY2hlbWEubm9kZXNbdF0pKX19LHtrZXk6InJlZ2lzdGVyUGx1Z2luIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLGU9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbj0iZnVuY3Rpb24iPT09dHlwZW9mIGU/ZSh0LHRoaXMuc3RhdGUucGx1Z2lucyk6W3RdLmNvbmNhdChDcCh0aGlzLnN0YXRlLnBsdWdpbnMpKSxyPXRoaXMuc3RhdGUucmVjb25maWd1cmUoe3BsdWdpbnM6bn0pO3RoaXMudmlldy51cGRhdGVTdGF0ZShyKX19LHtrZXk6InVucmVnaXN0ZXJQbHVnaW4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7aWYodCYmdGhpcy52aWV3LmRvY1ZpZXcpe3ZhciBlPXRoaXMuc3RhdGUucmVjb25maWd1cmUoe3BsdWdpbnM6dGhpcy5zdGF0ZS5wbHVnaW5zLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIWUua2V5LnN0YXJ0c1dpdGgoIiIuY29uY2F0KHQsIiQiKSl9KSl9KTt0aGlzLnZpZXcudXBkYXRlU3RhdGUoZSl9fX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnZpZXcmJnRoaXMudmlldy5kZXN0cm95KCl9fSx7a2V5OiJidWlsdEluRXh0ZW5zaW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy51c2VCdWlsdEluRXh0ZW5zaW9ucz9bbmV3IFZwLG5ldyBXcCxuZXcgcXBdOltdfX0se2tleToic3RhdGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXc/dGhpcy52aWV3LnN0YXRlOm51bGx9fSx7a2V5OiJpc0FjdGl2ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5lbnRyaWVzKG1wKHt9LHRoaXMuYWN0aXZlTWFya3Mse30sdGhpcy5hY3RpdmVOb2RlcykpLnJlZHVjZSgoZnVuY3Rpb24odCxlKXt2YXIgbj1PcChlLDIpLHI9blswXSxvPW5bMV07cmV0dXJuIG1wKHt9LHQsZHAoe30sciwoZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIG8odCl9KSkpfSkse30pfX1dKSxufShCcCksVXA9e3Byb3BzOntlZGl0b3I6e2RlZmF1bHQ6bnVsbCx0eXBlOk9iamVjdH19LHdhdGNoOntlZGl0b3I6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dCYmdC5lbGVtZW50JiZ0aGlzLiRuZXh0VGljaygoZnVuY3Rpb24oKXtlLiRlbC5hcHBlbmRDaGlsZCh0LmVsZW1lbnQuZmlyc3RDaGlsZCksdC5zZXRQYXJlbnRDb21wb25lbnQoZSl9KSl9fX0scmVuZGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0KCJkaXYiKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWRpdG9yLmVsZW1lbnQ9dGhpcy4kZWx9fSxHcD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcyxyPWUub3B0aW9uczt1cCh0aGlzLHQpLHRoaXMub3B0aW9ucz1yLHRoaXMucHJldmVudEhpZGU9ITEsdGhpcy5tb3VzZWRvd25IYW5kbGVyPXRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSx0aGlzLm9wdGlvbnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMubW91c2Vkb3duSGFuZGxlcix7Y2FwdHVyZTohMH0pLHRoaXMuYmx1ckhhbmRsZXI9ZnVuY3Rpb24oKXtuLnByZXZlbnRIaWRlP24ucHJldmVudEhpZGU9ITE6bi5vcHRpb25zLmVkaXRvci5lbWl0KCJtZW51YmFyOmZvY3VzVXBkYXRlIiwhMSl9LHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImJsdXIiLHRoaXMuYmx1ckhhbmRsZXIpfXJldHVybiBscCh0LFt7a2V5OiJoYW5kbGVDbGljayIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnRIaWRlPSEwfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMubW91c2Vkb3duSGFuZGxlciksdGhpcy5vcHRpb25zLmVkaXRvci5vZmYoImJsdXIiLHRoaXMuYmx1ckhhbmRsZXIpfX1dKSx0fSgpO2Z1bmN0aW9uIFhwKHQpe3JldHVybiBuZXcgaWUoe2tleTpuZXcgY2UoIm1lbnVfYmFyIiksdmlldzpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEdwKHtlZGl0b3JWaWV3OmUsb3B0aW9uczp0fSl9fSl9dmFyIFlwPXtwcm9wczp7ZWRpdG9yOntkZWZhdWx0Om51bGwsdHlwZTpPYmplY3R9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2ZvY3VzZWQ6ITF9fSx3YXRjaDp7ZWRpdG9yOntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3QmJnRoaXMuJG5leHRUaWNrKChmdW5jdGlvbigpe3QucmVnaXN0ZXJQbHVnaW4oWHAoe2VkaXRvcjp0LGVsZW1lbnQ6ZS4kZWx9KSksZS5mb2N1c2VkPXQuZm9jdXNlZCx0Lm9uKCJmb2N1cyIsKGZ1bmN0aW9uKCl7ZS5mb2N1c2VkPSEwfSkpLHQub24oIm1lbnViYXI6Zm9jdXNVcGRhdGUiLChmdW5jdGlvbih0KXtlLmZvY3VzZWQ9dH0pKX0pKX19fSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGl0b3I/dGhpcy4kc2NvcGVkU2xvdHMuZGVmYXVsdCh7Zm9jdXNlZDp0aGlzLmZvY3VzZWQsZm9jdXM6dGhpcy5lZGl0b3IuZm9jdXMsY29tbWFuZHM6dGhpcy5lZGl0b3IuY29tbWFuZHMsaXNBY3RpdmU6dGhpcy5lZGl0b3IuaXNBY3RpdmUsZ2V0TWFya0F0dHJzOnRoaXMuZWRpdG9yLmdldE1hcmtBdHRycy5iaW5kKHRoaXMuZWRpdG9yKSxnZXROb2RlQXR0cnM6dGhpcy5lZGl0b3IuZ2V0Tm9kZUF0dHJzLmJpbmQodGhpcy5lZGl0b3IpfSk6bnVsbH19O2Z1bmN0aW9uIFpwKHQsZSxuKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiByLnNldEVuZCh0LG51bGw9PW4/dC5ub2RlVmFsdWUubGVuZ3RoOm4pLHIuc2V0U3RhcnQodCxlfHwwKSxyfWZ1bmN0aW9uIFFwKHQsZSl7dmFyIG49dC5nZXRDbGllbnRSZWN0cygpO3JldHVybiBuLmxlbmd0aD9uW2U8MD8wOm4ubGVuZ3RoLTFdOnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZnVuY3Rpb24gdHUodCxlKXt2YXIgbixyLG89YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXSxpPXQuZG9jVmlldy5kb21Gcm9tUG9zKGUpLHM9aS5ub2RlLGE9aS5vZmZzZXQ7aWYoMz09PXMubm9kZVR5cGUpbyYmYTxzLm5vZGVWYWx1ZS5sZW5ndGg/KHI9UXAoWnAocyxhLTEsYSksLTEpLG49InJpZ2h0Iik6YTxzLm5vZGVWYWx1ZS5sZW5ndGgmJihyPVFwKFpwKHMsYSxhKzEpLC0xKSxuPSJsZWZ0Iik7ZWxzZSBpZihzLmZpcnN0Q2hpbGQpe2lmKGE8cy5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIGM9cy5jaGlsZE5vZGVzW2FdO3I9UXAoMz09PWMubm9kZVR5cGU/WnAoYyk6YywtMSksbj0ibGVmdCJ9aWYoKCFyfHxyLnRvcD09PXIuYm90dG9tKSYmYSl7dmFyIGg9cy5jaGlsZE5vZGVzW2EtMV07cj1RcCgzPT09aC5ub2RlVHlwZT9acChoKTpoLDEpLG49InJpZ2h0In19ZWxzZSByPXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj0ibGVmdCI7dmFyIHA9cltuXTtyZXR1cm57dG9wOnIudG9wLGJvdHRvbTpyLmJvdHRvbSxsZWZ0OnAscmlnaHQ6cH19dmFyIGV1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzLHI9ZS5vcHRpb25zLG89ZS5lZGl0b3JWaWV3O3VwKHRoaXMsdCksdGhpcy5vcHRpb25zPW1wKHt9LHtlbGVtZW50Om51bGwsa2VlcEluQm91bmRzOiEwLG9uVXBkYXRlOmZ1bmN0aW9uKCl7cmV0dXJuITF9fSx7fSxyKSx0aGlzLmVkaXRvclZpZXc9byx0aGlzLmlzQWN0aXZlPSExLHRoaXMubGVmdD0wLHRoaXMuYm90dG9tPTAsdGhpcy50b3A9MCx0aGlzLnByZXZlbnRIaWRlPSExLHRoaXMubW91c2Vkb3duSGFuZGxlcj10aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyksdGhpcy5vcHRpb25zLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLm1vdXNlZG93bkhhbmRsZXIse2NhcHR1cmU6ITB9KSx0aGlzLmZvY3VzSGFuZGxlcj1mdW5jdGlvbih0KXt2YXIgZT10LnZpZXc7bi51cGRhdGUoZSl9LHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImZvY3VzIix0aGlzLmZvY3VzSGFuZGxlciksdGhpcy5ibHVySGFuZGxlcj1mdW5jdGlvbih0KXt2YXIgZT10LmV2ZW50O24ucHJldmVudEhpZGU/bi5wcmV2ZW50SGlkZT0hMTpuLmhpZGUoZSl9LHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImJsdXIiLHRoaXMuYmx1ckhhbmRsZXIpfXJldHVybiBscCh0LFt7a2V5OiJoYW5kbGVDbGljayIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnRIaWRlPSEwfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGU7aWYoIXQuY29tcG9zaW5nJiYhKGUmJmUuZG9jLmVxKG4uZG9jKSYmZS5zZWxlY3Rpb24uZXEobi5zZWxlY3Rpb24pKSlpZihuLnNlbGVjdGlvbi5lbXB0eSl0aGlzLmhpZGUoKTtlbHNle3ZhciByPW4uc2VsZWN0aW9uLG89ci5mcm9tLGk9ci50byxzPXR1KHQsbyksYT10dSh0LGksITApLGM9dGhpcy5vcHRpb25zLmVsZW1lbnQub2Zmc2V0UGFyZW50O2lmKGMpe3ZhciBoPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscD10aGlzLm9wdGlvbnMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx1PShzLmxlZnQrYS5sZWZ0KS8yLWgubGVmdDt0aGlzLmxlZnQ9TWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMua2VlcEluQm91bmRzP01hdGgubWluKGgud2lkdGgtcC53aWR0aC8yLE1hdGgubWF4KHUscC53aWR0aC8yKSk6dSksdGhpcy5ib3R0b209TWF0aC5yb3VuZChoLmJvdHRvbS1zLnRvcCksdGhpcy50b3A9TWF0aC5yb3VuZChhLmJvdHRvbS1oLnRvcCksdGhpcy5pc0FjdGl2ZT0hMCx0aGlzLnNlbmRVcGRhdGUoKX1lbHNlIHRoaXMuaGlkZSgpfX19LHtrZXk6InNlbmRVcGRhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9uVXBkYXRlKHtpc0FjdGl2ZTp0aGlzLmlzQWN0aXZlLGxlZnQ6dGhpcy5sZWZ0LGJvdHRvbTp0aGlzLmJvdHRvbSx0b3A6dGhpcy50b3B9KX19LHtrZXk6ImhpZGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3QmJnQucmVsYXRlZFRhcmdldCYmdGhpcy5vcHRpb25zLmVsZW1lbnQucGFyZW50Tm9kZSYmdGhpcy5vcHRpb25zLmVsZW1lbnQucGFyZW50Tm9kZS5jb250YWlucyh0LnJlbGF0ZWRUYXJnZXQpfHwodGhpcy5pc0FjdGl2ZT0hMSx0aGlzLnNlbmRVcGRhdGUoKSl9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5tb3VzZWRvd25IYW5kbGVyKSx0aGlzLm9wdGlvbnMuZWRpdG9yLm9mZigiZm9jdXMiLHRoaXMuZm9jdXNIYW5kbGVyKSx0aGlzLm9wdGlvbnMuZWRpdG9yLm9mZigiYmx1ciIsdGhpcy5ibHVySGFuZGxlcil9fV0pLHR9KCk7ZnVuY3Rpb24gbnUodCl7cmV0dXJuIG5ldyBpZSh7a2V5Om5ldyBjZSgibWVudV9idWJibGUiKSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZXUoe2VkaXRvclZpZXc6ZSxvcHRpb25zOnR9KX19KX1Cb29sZWFuO3ZhciBydT1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LiRjcmVhdGVFbGVtZW50LG49dC5fc2VsZi5fY3x8ZTtyZXR1cm4gbigiZGl2Iix7c3RhdGljQ2xhc3M6Imljb24iLGNsYXNzOlsiaWNvbi0tIit0Lm5hbWUsImljb24tLSIrdC5zaXplXX0sW24odC5pY29uLHt0YWc6ImNvbXBvbmVudCJ9KV0sMSl9LG91PVtdO24oImIwYzAiKSxuKCI0ZmFkIik7ZnVuY3Rpb24gaXUodCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdH1uKCJhNGQzIiksbigiZTAxYSIpLG4oImQyOGIiKSxuKCJlMjYwIiksbigiZDNiNyIpLG4oIjNjYTMiKSxuKCJkZGIwIik7ZnVuY3Rpb24gc3UodCxlKXtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCkpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBzLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShzPWEubmV4dCgpKS5kb25lKTtyPSEwKWlmKG4ucHVzaChzLnZhbHVlKSxlJiZuLmxlbmd0aD09PWUpYnJlYWt9Y2F0Y2goYyl7bz0hMCxpPWN9ZmluYWxseXt0cnl7cnx8bnVsbD09YVsicmV0dXJuIl18fGFbInJldHVybiJdKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiBufX1uKCJhNjMwIiksbigiZmI2YSIpLG4oIjI1ZjAiKTtmdW5jdGlvbiBhdSh0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9bmV3IEFycmF5KGUpO248ZTtuKyspcltuXT10W25dO3JldHVybiByfWZ1bmN0aW9uIGN1KHQsZSl7aWYodCl7aWYoInN0cmluZyI9PT10eXBlb2YgdClyZXR1cm4gYXUodCxlKTt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwtMSk7cmV0dXJuIk9iamVjdCI9PT1uJiZ0LmNvbnN0cnVjdG9yJiYobj10LmNvbnN0cnVjdG9yLm5hbWUpLCJNYXAiPT09bnx8IlNldCI9PT1uP0FycmF5LmZyb20odCk6IkFyZ3VtZW50cyI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9hdSh0LGUpOnZvaWQgMH19ZnVuY3Rpb24gaHUoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfWZ1bmN0aW9uIHB1KHQsZSl7cmV0dXJuIGl1KHQpfHxzdSh0LGUpfHxjdSh0LGUpfHxodSgpfWZvcih2YXIgdXU9bigiNzBjNyIpLGZ1PW4ubih1dSksbHU9bigiZWQ1MyIpLGR1PW4ubihsdSksdnU9bigiNWZlZCIpLG11PW4ubih2dSkseXU9bigiZjkzOSIpLGd1PW4ubih5dSksd3U9bigiM2ViMyIpLHh1PW4ubih3dSksYnU9bigiMzkyMiIpLGt1PW4ubihidSksU3U9bigiNDNjYSIpLE91PW4ubihTdSksQ3U9bigiYTcwZCIpLE11PW4ubihDdSksVHU9bigiYWM0ZSIpLE51PW4ubihUdSksRXU9bigiYWQ2ZSIpLEF1PW4ubihFdSksUnU9bigiNWJiMSIpLHp1PW4ubihSdSksRHU9bigiYzZlZSIpLEl1PW4ubihEdSksUHU9bigiYzk0MyIpLEJ1PW4ubihQdSksRnU9bigiNGYzNSIpLGp1PW4ubihGdSksX3U9bigiOWY2MSIpLCR1PW4ubihfdSksSnU9bigiZDdiNiIpLEx1PW4ubihKdSksVnU9bigiNWQ3NSIpLHF1PW4ubihWdSksV3U9bigiNGY2NiIpLEh1PW4ubihXdSksS3U9bigiNDk4YyIpLFV1PW4ubihLdSksR3U9bigiYWVjMiIpLFh1PW4ubihHdSksWXU9bigiMmQxYiIpLFp1PW4ubihZdSksUXU9bigiZTQ4YyIpLHRmPW4ubihRdSksZWY9bigiYTcwNyIpLG5mPW4ubihlZikscmY9bigiNTUwNCIpLG9mPW4ubihyZiksc2Y9bigiNmQ1NCIpLGFmPW4ubihzZiksY2Y9bigiMDEwOSIpLGhmPW4ubihjZikscGY9bigiZmEwYiIpLHVmPW4ubihwZiksZmY9bigiOTJjZiIpLGxmPW4ubihmZiksZGY9e2FkZF9jb2xfYWZ0ZXI6ZnUuYSxhZGRfY29sX2JlZm9yZTpkdS5hLGFkZF9yb3dfYWZ0ZXI6bXUuYSxhZGRfcm93X2JlZm9yZTpndS5hLGJvbGQ6eHUuYSxjaGVja2xpc3Q6a3UuYSxjb2RlOk91LmEsY29kZV9ibG9jazpNdS5hLGNvbWJpbmVfY2VsbHM6TnUuYSxkZWxldGVfY29sOkF1LmEsZGVsZXRlX3Jvdzp6dS5hLGRlbGV0ZV90YWJsZTpJdS5hLGdpdGh1YjpCdS5hLGhyOmp1LmEsaW1hZ2U6JHUuYSxpdGFsaWM6THUuYSxsaW5rOnF1LmEsbWVudGlvbjpIdS5hLG9sOlV1LmEscGFyYWdyYXBoOlh1LmEscXVvdGU6WnUuYSxyZWRvOnRmLmEscmVtb3ZlOm5mLmEsc3RyaWtlOm9mLmEsdGFibGU6YWYuYSx1bDpoZi5hLHVuZGVybGluZTp1Zi5hLHVuZG86bGYuYX0sdmY9e30sbWY9MCx5Zj1PYmplY3QuZW50cmllcyhkZik7bWY8eWYubGVuZ3RoO21mKyspe3ZhciBnZj1wdSh5ZlttZl0sMiksd2Y9Z2ZbMF0seGY9Z2ZbMV07dmZbImljb25fIit3Zl09eGZ9dmFyIGJmPXtjb21wb25lbnRzOnZmLHByb3BzOntuYW1lOnt9LHNpemU6e2RlZmF1bHQ6Im5vcm1hbCJ9LG1vZGlmaWVyOntkZWZhdWx0Om51bGx9LGZpeEFsaWduOntkZWZhdWx0OiEwfX0sY29tcHV0ZWQ6e2ljb246ZnVuY3Rpb24oKXtyZXR1cm4iaWNvbl8iK3RoaXMubmFtZX19fSxrZj1iZjtuKCIxYWZhIik7ZnVuY3Rpb24gU2YodCxlLG4scixvLGkscyxhKXt2YXIgYyxoPSJmdW5jdGlvbiI9PT10eXBlb2YgdD90Lm9wdGlvbnM6dDtpZihlJiYoaC5yZW5kZXI9ZSxoLnN0YXRpY1JlbmRlckZucz1uLGguX2NvbXBpbGVkPSEwKSxyJiYoaC5mdW5jdGlvbmFsPSEwKSxpJiYoaC5fc2NvcGVJZD0iZGF0YS12LSIraSkscz8oYz1mdW5jdGlvbih0KXt0PXR8fHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuJHZub2RlJiZ0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dCx0fHwidW5kZWZpbmVkIj09PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwodD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxvJiZvLmNhbGwodGhpcyx0KSx0JiZ0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmdC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKHMpfSxoLl9zc3JSZWdpc3Rlcj1jKTpvJiYoYz1hP2Z1bmN0aW9uKCl7by5jYWxsKHRoaXMsKGguZnVuY3Rpb25hbD90aGlzLnBhcmVudDp0aGlzKS4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KX06byksYylpZihoLmZ1bmN0aW9uYWwpe2guX2luamVjdFN0eWxlcz1jO3ZhciBwPWgucmVuZGVyO2gucmVuZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGMuY2FsbChlKSxwKHQsZSl9fWVsc2V7dmFyIHU9aC5iZWZvcmVDcmVhdGU7aC5iZWZvcmVDcmVhdGU9dT9bXS5jb25jYXQodSxjKTpbY119cmV0dXJue2V4cG9ydHM6dCxvcHRpb25zOmh9fXZhciBPZj1TZihrZixydSxvdSwhMSxudWxsLCJlNTlmNzgzMiIsbnVsbCksQ2Y9T2YuZXhwb3J0cztuKCIzY2U0Iik7ZnVuY3Rpb24gTWYodCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxpPWUuY2hpbGQocik7aWYobyE9aSl7aWYoIW8uc2FtZU1hcmt1cChpKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1pLnRleHQpe2Zvcih2YXIgcz0wO28udGV4dFtzXT09aS50ZXh0W3NdO3MrKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fGkuY29udGVudC5zaXplKXt2YXIgYT1NZihvLmNvbnRlbnQsaS5jb250ZW50LG4rMSk7aWYobnVsbCE9YSlyZXR1cm4gYX1uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gVGYodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1pKXJldHVybiBvPT1pP251bGw6e2E6bixiOnJ9O3ZhciBzPXQuY2hpbGQoLS1vKSxhPWUuY2hpbGQoLS1pKSxjPXMubm9kZVNpemU7aWYocyE9YSl7aWYoIXMuc2FtZU1hcmt1cChhKSlyZXR1cm57YTpuLGI6cn07aWYocy5pc1RleHQmJnMudGV4dCE9YS50ZXh0KXt2YXIgaD0wLHA9TWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxhLnRleHQubGVuZ3RoKTt3aGlsZShoPHAmJnMudGV4dFtzLnRleHQubGVuZ3RoLWgtMV09PWEudGV4dFthLnRleHQubGVuZ3RoLWgtMV0paCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKHMuY29udGVudC5zaXplfHxhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9VGYocy5jb250ZW50LGEuY29udGVudCxuLTEsci0xKTtpZih1KXJldHVybiB1fW4tPWMsci09Y31lbHNlIG4tPWMsci09Y319dmFyIE5mPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LEVmPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtOZi5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIGg9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC1oKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWgpLG4scitoKX1zPWN9fSxOZi5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LE5mLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LE5mLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IE5mKHIsdGhpcy5zaXplK3Quc2l6ZSl9LE5mLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgcz10aGlzLmNvbnRlbnRbb10sYT1pK3Mubm9kZVNpemU7YT50JiYoKGk8dHx8YT5lKSYmKHM9cy5pc1RleHQ/cy5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKHMudGV4dC5sZW5ndGgsZS1pKSk6cy5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4ocy5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKHMpLHIrPXMubm9kZVNpemUpLGk9YX1yZXR1cm4gbmV3IE5mKG4scil9LE5mLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/TmYuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBOZih0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LE5mLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgTmYocixvKX0sTmYucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBOZihbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxOZi5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBOZih0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sTmYucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LEVmLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LEVmLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxFZi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxOZi5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LE5mLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LE5mLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LE5mLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLE1mKHRoaXMsdCxlKX0sTmYucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLFRmKHRoaXMsdCxlLG4pfSxOZi5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIFJmKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBSZih0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9SZihuKzEsaSk6UmYobixyKTtyPWl9fSxOZi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxOZi5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sTmYucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LE5mLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIE5mLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgTmYoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0sTmYuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gTmYuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBOZihlfHx0LG4pfSxOZi5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBOZi5lbXB0eTtpZih0IGluc3RhbmNlb2YgTmYpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IE5mKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTmYucHJvdG90eXBlLEVmKTt2YXIgQWY9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIFJmKHQsZSl7cmV0dXJuIEFmLmluZGV4PXQsQWYub2Zmc2V0PWUsQWZ9ZnVuY3Rpb24gemYodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIXpmKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF6Zih0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1OZi5lbXB0eT1uZXcgTmYoW10sMCk7dmFyIERmPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBJZih0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPUlmLnByb3RvdHlwZSxlfURmLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sRGYucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxEZi5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxEZi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ6Zih0aGlzLmF0dHJzLHQuYXR0cnMpfSxEZi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LERmLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxEZi5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LERmLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBEZi5ub25lO2lmKHQgaW5zdGFuY2VvZiBEZilyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LERmLm5vbmU9W10sSWYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxJZi5wcm90b3R5cGUuY29uc3RydWN0b3I9SWYsSWYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIFBmPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxCZj17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gRmYodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGg9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGghPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KEZmKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBqZih0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPWpmKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIF9mKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBJZigiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgSWYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiAkZih0LGUsbiwwKX1mdW5jdGlvbiAkZih0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9JGYodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPVVmKG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIFdmKGksSGYodCxjLGgsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIFdmKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBXZihpLEtmKHQsZSxyKSl9ZnVuY3Rpb24gSmYodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IElmKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBMZih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiBKZihyLGUubm9kZShuKSkscn1mdW5jdGlvbiBWZih0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIHFmKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKFZmKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspVmYoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJlZmKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBXZih0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBJZigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gSGYodCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJkxmKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZMZihuLHIsbysxKSxhPVtdO3JldHVybiBxZihudWxsLHQsbyxhKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyhKZihpLHMpLFZmKFdmKGksSGYodCxlLG4scixvKzEpKSxhKSk6KGkmJlZmKFdmKGksS2YodCxlLG8rMSkpLGEpLHFmKGUsbixvLGEpLHMmJlZmKFdmKHMsS2YobixyLG8rMSkpLGEpKSxxZihyLG51bGwsbyxhKSxuZXcgTmYoYSl9ZnVuY3Rpb24gS2YodCxlLG4pe3ZhciByPVtdO2lmKHFmKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89TGYodCxlLG4rMSk7VmYoV2YobyxLZih0LGUsbisxKSkscil9cmV0dXJuIHFmKGUsbnVsbCxuLHIpLG5ldyBOZihyKX1mdW5jdGlvbiBVZih0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShOZi5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fUJmLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sUGYucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49amYodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IFBmKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sUGYucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFBmKEZmKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LFBmLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LFBmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxQZi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxQZi5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBQZi5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IFBmKE5mLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxQZi5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgUGYodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQZi5wcm90b3R5cGUsQmYpLFBmLmVtcHR5PW5ldyBQZihOZi5lbXB0eSwwLDApO3ZhciBHZj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxYZj17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtHZi5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxYZi5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sWGYuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LEdmLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LEdmLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LEdmLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxHZi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sR2YucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LEdmLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sR2YucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sWGYudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LFhmLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxYZi5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sR2YucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIERmLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sR2YucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sR2YucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LEdmLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyB0bCh0aGlzLHQsbil9LEdmLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LEdmLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sR2YucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxHZi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sR2YucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IEdmKGUsbixvKX0sR2YucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248WWYubGVuZ3RoO24rKyl7dmFyIHI9WWZbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPVlmW1pmXT1HZi5yZXNvbHZlKHQsZSk7cmV0dXJuIFpmPShaZisxKSVRZixvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhHZi5wcm90b3R5cGUsWGYpO3ZhciBZZj1bXSxaZj0wLFFmPTEyLHRsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LGVsPXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O2VsLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxlbC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LGVsLnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxlbC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxlbC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGwucHJvdG90eXBlLGVsKTt2YXIgbmw9T2JqZWN0LmNyZWF0ZShudWxsKSxybD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fE5mLmVtcHR5LHRoaXMubWFya3M9cnx8RGYubm9uZX0sb2w9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtvbC5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxvbC5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0scmwucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LHJsLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0scmwucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LHJsLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxybC5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sb2wudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LHJsLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxvbC5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sb2wubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxybC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LHJsLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0scmwucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmemYodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8bmwpJiZEZi5zYW1lU2V0KHRoaXMubWFya3Msbnx8RGYubm9uZSl9LHJsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxybC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0scmwucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxybC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gUGYuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgUGYoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0scmwucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBfZih0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxybC5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0scmwucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0scmwucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LHJsLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBHZi5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LHJsLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gR2YucmVzb2x2ZSh0aGlzLHQpfSxybC5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxvbC5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sb2wuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sb2wuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LG9sLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LG9sLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sb2wuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxvbC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LHJsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxzbCh0aGlzLm1hcmtzLHQpfSxybC5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxybC5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPU5mLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbykscz1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFzfHwhcy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGE9cjthPG87YSsrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChhKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LHJsLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LHJsLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LHJsLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LHJsLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxybC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0scmwuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9TmYuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocmwucHJvdG90eXBlLG9sKTt2YXIgaWw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6c2wodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShybCk7ZnVuY3Rpb24gc2wodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgYWw9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sY2w9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTthbC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBobCh0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gYWwuZW1wdHk7dmFyIHI9dWwobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89YmwoZ2wocikpO3JldHVybiBrbChvLG4pLG99LGFsLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sYWwucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxjbC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LGNsLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxhbC5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sYWwucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIE5mLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBjPTA7YzxpLm5leHQubGVuZ3RoO2MrPTIpe3ZhciBoPWkubmV4dFtjXSxwPWkubmV4dFtjKzFdO2lmKCFoLmlzVGV4dCYmIWguaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHApKXtyLnB1c2gocCk7dmFyIHU9byhwLHMuY29uY2F0KGgpKTtpZih1KXJldHVybiB1fX19cmV0dXJuIG8odGhpcyxbXSl9LGFsLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LGFsLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxjbC5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LGFsLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxhbC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhbC5wcm90b3R5cGUsY2wpLGFsLmVtcHR5PW5ldyBhbCghMCk7dmFyIGhsPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxwbD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gdWwodCl7dmFyIGU9W107ZG97ZS5wdXNoKGZsKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBmbCh0KXt2YXIgZT1bXTtkb3tlLnB1c2gobGwodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBsbCh0KXtmb3IodmFyIGU9eWwodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9dmwodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBkbCh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gdmwodCxlKXt2YXIgbj1kbCh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P2RsKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIG1sKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24geWwodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9dWwodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49bWwodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gZ2wodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIHdsKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiB4bCh0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydCh3bCk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIGJsKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oeGwodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07eGwodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgYWwoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydCh3bCk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGtsKHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIFNsKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBPbCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIENsKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBObCh0W25dKTtyZXR1cm4gZX1wbC5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LGhsLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0saGwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhsLnByb3RvdHlwZSxwbCk7dmFyIE1sPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9Q2wobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9U2wodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LFRsPXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtUbC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxUbC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LFRsLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PWFsLmVtcHR5fSxUbC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sTWwucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1tlXS5pc1JlcXVpcmVkJiYoIXR8fCEoZSBpbiB0KSkpcmV0dXJuITA7cmV0dXJuITF9LE1sLnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LE1sLnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOk9sKHRoaXMuYXR0cnMsdCl9LE1sLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBybCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLE5mLmZyb20oZSksRGYuc2V0RnJvbShuKSl9LE1sLnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPU5mLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgcmwodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLERmLnNldEZyb20obikpfSxNbC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPU5mLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKE5mLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgcmwodGhpcyx0LGUuYXBwZW5kKG8pLERmLnNldEZyb20obikpOm51bGx9LE1sLnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxNbC5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LE1sLnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sTWwucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpEZi5lbXB0eTp0fSxNbC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IE1sKHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE1sLnByb3RvdHlwZSxUbCk7dmFyIE5sPWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LEVsPXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTtFbC5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE5sLnByb3RvdHlwZSxFbCk7dmFyIEFsPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1DbChyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89U2wodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgRGYodGhpcyxvKX07QWwucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBEZih0aGlzLE9sKHRoaXMuYXR0cnMsdCkpfSxBbC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgQWwodCxyKyssZSxvKX0pKSxufSxBbC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sQWwucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxBbC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIFJsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9Y1siYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPWNbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9TWwuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1BbC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0aGlzLm5vZGVzKXtpZihyIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IocisiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLnNwZWMuY29udGVudHx8IiIscz1vLnNwZWMubWFya3M7by5jb250ZW50TWF0Y2g9bltpXXx8KG5baV09YWwucGFyc2UoaSx0aGlzLm5vZGVzKSksby5pbmxpbmVDb250ZW50PW8uY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsby5tYXJrU2V0PSJfIj09cz9udWxsOnM/emwodGhpcyxzLnNwbGl0KCIgIikpOiIiIT1zJiZvLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGEgaW4gdGhpcy5tYXJrcyl7dmFyIGg9dGhpcy5tYXJrc1thXSxwPWguc3BlYy5leGNsdWRlcztoLmV4Y2x1ZGVkPW51bGw9PXA/W2hdOiIiPT1wP1tdOnpsKHRoaXMscC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gemwodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59UmwucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIE1sKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sUmwucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBpbChuLG4uZGVmYXVsdEF0dHJzLHQsRGYuc2V0RnJvbShlKSl9LFJsLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0sUmwucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gcmwuZnJvbUpTT04odGhpcyx0KX0sUmwucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gRGYuZnJvbUpTT04odGhpcyx0KX0sUmwucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgRGw9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O0RsLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgTGwodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxEbC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgTGwodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxQZi5tYXhPcGVuKG4uZmluaXNoKCkpfSxEbC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoV2wodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSxEbC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxEbC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PUtsKHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9S2wodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LERsLmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgRGwodCxEbC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgSWw9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sUGw9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sQmw9e29sOiEwLHVsOiEwfSxGbD0xLGpsPTIsX2w9NDtmdW5jdGlvbiAkbCh0KXtyZXR1cm4odD9GbDowKXwoImZ1bGwiPT09dD9qbDowKX12YXIgSmw9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZfbD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9RGYubm9uZX07SmwucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoTmYuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LEpsLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmRmwpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPU5mLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKE5mLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfTt2YXIgTGw9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bix0aGlzLnBlbmRpbmdNYXJrcz1bXTt2YXIgcixvPWUudG9wTm9kZSxpPSRsKGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9fbDowKTtyPW8/bmV3IEpsKG8udHlwZSxvLmF0dHJzLERmLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgSmwobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsRGYubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxWbD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHFsKHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJkJsLmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFdsKHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gSGwodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIEtsKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1WbC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sTGwucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKEhsKGUpKTpudWxsO2lmKG51bGwhPW4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW3JdKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5bb10pfX0sTGwucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJkZsKW4ub3B0aW9ucyZqbHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSxMbC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7QmwuaGFzT3duUHJvcGVydHkoZSkmJnFsKHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpQbC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZihJbC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSxMbC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSxMbC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9RGYubm9uZSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXt2YXIgcj10aGlzLnBhcnNlci5tYXRjaFN0eWxlKHRbbl0sdFtuKzFdLHRoaXMpO2lmKHIpe2lmKHIuaWdub3JlKXJldHVybiBudWxsO2U9dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3IubWFya10uY3JlYXRlKHIuYXR0cnMpLmFkZFRvU2V0KGUpfX1yZXR1cm4gZX0sTGwucHJvdG90eXBlLmFkZEVsZW1lbnRCeVJ1bGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxzPXRoaXM7ZS5ub2RlPyhyPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tlLm5vZGVdLHIuaXNMZWFmP3RoaXMuaW5zZXJ0Tm9kZShyLmNyZWF0ZShlLmF0dHJzKSl8fHRoaXMubGVhZkZhbGxiYWNrKHQpOm49dGhpcy5lbnRlcihyLGUuYXR0cnMsZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpKToobz10aGlzLnBhcnNlci5zY2hlbWEubWFya3NbZS5tYXJrXSxpPW8uY3JlYXRlKGUuYXR0cnMpLHRoaXMuYWRkUGVuZGluZ01hcmsoaSkpO3ZhciBhPXRoaXMudG9wO2lmKHImJnIuaXNMZWFmKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKGUuZ2V0Q29udGVudCl0aGlzLmZpbmRJbnNpZGUodCksZS5nZXRDb250ZW50KHQsdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gcy5pbnNlcnROb2RlKHQpfSkpO2Vsc2V7dmFyIGM9ZS5jb250ZW50RWxlbWVudDsic3RyaW5nIj09dHlwZW9mIGM/Yz10LnF1ZXJ5U2VsZWN0b3IoYyk6ImZ1bmN0aW9uIj09dHlwZW9mIGMmJihjPWModCkpLGN8fChjPXQpLHRoaXMuZmluZEFyb3VuZCh0LGMsITApLHRoaXMuYWRkQWxsKGMsbil9biYmKHRoaXMuc3luYyhhKSx0aGlzLm9wZW4tLSksaSYmdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhpKX0sTGwucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZJbC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSxMbC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LExsLnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sTGwucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5wZW5kaW5nTWFya3MubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5wZW5kaW5nTWFya3NbZV07dC50eXBlJiYhdC50eXBlLmFsbG93c01hcmtUeXBlKG4udHlwZSl8fG4uaXNJblNldCh0LmFjdGl2ZU1hcmtzKXx8KHQuYWN0aXZlTWFya3M9bi5hZGRUb1NldCh0LmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcy5zcGxpY2UoZS0tLDEpKX19LExsLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiYodGhpcy5hcHBseVBlbmRpbmdNYXJrcyh0aGlzLnRvcCksdGhpcy5lbnRlcklubmVyKHQsZSwhMCxuKSkscn0sTGwucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn5fbDokbChyKTtvLm9wdGlvbnMmX2wmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD1fbCksdGhpcy5ub2Rlcy5wdXNoKG5ldyBKbCh0LGUsby5hY3RpdmVNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSxMbC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LExsLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxMbC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSxMbC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0sTGwucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LFZsLmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciB0PTAsZT10aGlzLm9wZW47ZT49MDtlLS0pe2Zvcih2YXIgbj10aGlzLm5vZGVzW2VdLmNvbnRlbnQscj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQrPW5bcl0ubm9kZVNpemU7ZSYmdCsrfXJldHVybiB0fSxMbC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyl0aGlzLmZpbmRbbl0ubm9kZT09dCYmdGhpcy5maW5kW25dLm9mZnNldD09ZSYmKHRoaXMuZmluZFtuXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sTGwucHJvdG90eXBlLmZpbmRJbnNpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspbnVsbD09dGhpcy5maW5kW2VdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbZV0ubm9kZSkmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcyl9LExsLnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXtpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciByPTA7cjx0aGlzLmZpbmQubGVuZ3RoO3IrKylpZihudWxsPT10aGlzLmZpbmRbcl0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtyXS5ub2RlKSl7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbcl0ubm9kZSk7byYobj8yOjQpJiYodGhpcy5maW5kW3JdLnBvcz10aGlzLmN1cnJlbnRQb3MpfX0sTGwucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspdGhpcy5maW5kW2VdLm5vZGU9PXQmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcy0odC5ub2RlVmFsdWUubGVuZ3RoLXRoaXMuZmluZFtlXS5vZmZzZXQpKX0sTGwucHJvdG90eXBlLm1hdGNoZXNDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5pbmRleE9mKCJ8Iik+LTEpcmV0dXJuIHQuc3BsaXQoL1xzKlx8XHMqLykuc29tZSh0aGlzLm1hdGNoZXNDb250ZXh0LHRoaXMpO3ZhciBuPXQuc3BsaXQoIi8iKSxyPXRoaXMub3B0aW9ucy5jb250ZXh0LG89IXRoaXMuaXNPcGVuJiYoIXJ8fHIucGFyZW50LnR5cGU9PXRoaXMubm9kZXNbMF0udHlwZSksaT0tKHI/ci5kZXB0aCsxOjApKyhvPzA6MSkscz1mdW5jdGlvbih0LGEpe2Zvcig7dD49MDt0LS0pe3ZhciBjPW5bdF07aWYoIiI9PWMpe2lmKHQ9PW4ubGVuZ3RoLTF8fDA9PXQpY29udGludWU7Zm9yKDthPj1pO2EtLSlpZihzKHQtMSxhKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgaD1hPjB8fDA9PWEmJm8/ZS5ub2Rlc1thXS50eXBlOnImJmE+PWk/ci5ub2RlKGEtaSkudHlwZTpudWxsO2lmKCFofHxoLm5hbWUhPWMmJi0xPT1oLmdyb3Vwcy5pbmRleE9mKGMpKXJldHVybiExO2EtLX1yZXR1cm4hMH07cmV0dXJuIHMobi5sZW5ndGgtMSx0aGlzLm9wZW4pfSxMbC5wcm90b3R5cGUudGV4dGJsb2NrRnJvbUNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29udGV4dDtpZih0KWZvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5kZWZhdWx0VHlwZTtpZihuJiZuLmlzVGV4dGJsb2NrJiZuLmRlZmF1bHRBdHRycylyZXR1cm4gbn1mb3IodmFyIHIgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgbz10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbcl07aWYoby5pc1RleHRibG9jayYmby5kZWZhdWx0QXR0cnMpcmV0dXJuIG99fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhMbC5wcm90b3R5cGUsVmwpO3ZhciBVbD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gR2wodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBYbCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVVsLnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49WGwoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVWwucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VWwucmVuZGVyU3BlYyhYbChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVWwucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LFVsLnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJlVsLnJlbmRlclNwZWMoWGwobikscih0LGUpKX0sVWwucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgbj10LmNyZWF0ZUVsZW1lbnQoZVswXSkscj1udWxsLG89ZVsxXSxpPTE7aWYobyYmIm9iamVjdCI9PXR5cGVvZiBvJiZudWxsPT1vLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShvKSlmb3IodmFyIHMgaW4gaT0yLG8pbnVsbCE9b1tzXSYmbi5zZXRBdHRyaWJ1dGUocyxvW3NdKTtmb3IodmFyIGE9aTthPGUubGVuZ3RoO2ErKyl7dmFyIGM9ZVthXTtpZigwPT09Yyl7aWYoYTxlLmxlbmd0aC0xfHxhPmkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206bixjb250ZW50RE9NOm59fXZhciBoPVVsLnJlbmRlclNwZWModCxjKSxwPWguZG9tLHU9aC5jb250ZW50RE9NO2lmKG4uYXBwZW5kQ2hpbGQocCksdSl7aWYocil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO3I9dX19cmV0dXJue2RvbTpuLGNvbnRlbnRET006cn19LFVsLmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyBVbCh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSxVbC5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9R2wodC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0sVWwubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBHbCh0Lm1hcmtzKX07dmFyIFlsPTY1NTM1LFpsPU1hdGgucG93KDIsMTYpO2Z1bmN0aW9uIFFsKHQsZSl7cmV0dXJuIHQrZSpabH1mdW5jdGlvbiB0ZCh0KXtyZXR1cm4gdCZZbH1mdW5jdGlvbiBlZCh0KXtyZXR1cm4odC0odCZZbCkpL1psfXZhciBuZD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPW51bGwpLHRoaXMucG9zPXQsdGhpcy5kZWxldGVkPWUsdGhpcy5yZWNvdmVyPW59LHJkPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMucmFuZ2VzPXQsdGhpcy5pbnZlcnRlZD1lfTtyZC5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbih0KXt2YXIgZT0wLG49dGQodCk7aWYoIXRoaXMuaW52ZXJ0ZWQpZm9yKHZhciByPTA7cjxuO3IrKyllKz10aGlzLnJhbmdlc1szKnIrMl0tdGhpcy5yYW5nZXNbMypyKzFdO3JldHVybiB0aGlzLnJhbmdlc1szKm5dK2UrZWQodCl9LHJkLnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LHJkLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMCl9LHJkLnByb3RvdHlwZS5fbWFwPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MCxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIscz0wO3M8dGhpcy5yYW5nZXMubGVuZ3RoO3MrPTMpe3ZhciBhPXRoaXMucmFuZ2VzW3NdLSh0aGlzLmludmVydGVkP3I6MCk7aWYoYT50KWJyZWFrO3ZhciBjPXRoaXMucmFuZ2VzW3Mrb10saD10aGlzLnJhbmdlc1tzK2ldLHA9YStjO2lmKHQ8PXApe3ZhciB1PWM/dD09YT8tMTp0PT1wPzE6ZTplLGY9YStyKyh1PDA/MDpoKTtpZihuKXJldHVybiBmO3ZhciBsPVFsKHMvMyx0LWEpO3JldHVybiBuZXcgbmQoZixlPDA/dCE9YTp0IT1wLGwpfXIrPWgtY31yZXR1cm4gbj90K3I6bmV3IG5kKHQrcil9LHJkLnByb3RvdHlwZS50b3VjaGVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj10ZChlKSxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIscz0wO3M8dGhpcy5yYW5nZXMubGVuZ3RoO3MrPTMpe3ZhciBhPXRoaXMucmFuZ2VzW3NdLSh0aGlzLmludmVydGVkP246MCk7aWYoYT50KWJyZWFrO3ZhciBjPXRoaXMucmFuZ2VzW3Mrb10saD1hK2M7aWYodDw9aCYmcz09MypyKXJldHVybiEwO24rPXRoaXMucmFuZ2VzW3MraV0tY31yZXR1cm4hMX0scmQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaW52ZXJ0ZWQ/MjoxLG49dGhpcy5pbnZlcnRlZD8xOjIscj0wLG89MDtyPHRoaXMucmFuZ2VzLmxlbmd0aDtyKz0zKXt2YXIgaT10aGlzLnJhbmdlc1tyXSxzPWktKHRoaXMuaW52ZXJ0ZWQ/bzowKSxhPWkrKHRoaXMuaW52ZXJ0ZWQ/MDpvKSxjPXRoaXMucmFuZ2VzW3IrZV0saD10aGlzLnJhbmdlc1tyK25dO3QocyxzK2MsYSxhK2gpLG8rPWgtY319LHJkLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHJkKHRoaXMucmFuZ2VzLCF0aGlzLmludmVydGVkKX0scmQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuaW52ZXJ0ZWQ/Ii0iOiIiKStKU09OLnN0cmluZ2lmeSh0aGlzLnJhbmdlcyl9LHJkLm9mZnNldD1mdW5jdGlvbih0KXtyZXR1cm4gMD09dD9yZC5lbXB0eTpuZXcgcmQodDwwP1swLC10LDBdOlswLDAsdF0pfSxyZC5lbXB0eT1uZXcgcmQoW10pO3ZhciBvZD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm1hcHM9dHx8W10sdGhpcy5mcm9tPW58fDAsdGhpcy50bz1udWxsPT1yP3RoaXMubWFwcy5sZW5ndGg6cix0aGlzLm1pcnJvcj1lfTtmdW5jdGlvbiBpZCh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWlkLnByb3RvdHlwZSxlfW9kLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLm1hcHMubGVuZ3RoKSxuZXcgb2QodGhpcy5tYXBzLHRoaXMubWlycm9yLHQsZSl9LG9kLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvZCh0aGlzLm1hcHMuc2xpY2UoKSx0aGlzLm1pcnJvciYmdGhpcy5taXJyb3Iuc2xpY2UoKSx0aGlzLmZyb20sdGhpcy50byl9LG9kLnByb3RvdHlwZS5hcHBlbmRNYXA9ZnVuY3Rpb24odCxlKXt0aGlzLnRvPXRoaXMubWFwcy5wdXNoKHQpLG51bGwhPWUmJnRoaXMuc2V0TWlycm9yKHRoaXMubWFwcy5sZW5ndGgtMSxlKX0sb2QucHJvdG90eXBlLmFwcGVuZE1hcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLm1hcHMubGVuZ3RoO2U8dC5tYXBzLmxlbmd0aDtlKyspe3ZhciByPXQuZ2V0TWlycm9yKGUpO3RoaXMuYXBwZW5kTWFwKHQubWFwc1tlXSxudWxsIT1yJiZyPGU/bityOm51bGwpfX0sb2QucHJvdG90eXBlLmdldE1pcnJvcj1mdW5jdGlvbih0KXtpZih0aGlzLm1pcnJvcilmb3IodmFyIGU9MDtlPHRoaXMubWlycm9yLmxlbmd0aDtlKyspaWYodGhpcy5taXJyb3JbZV09PXQpcmV0dXJuIHRoaXMubWlycm9yW2UrKGUlMj8tMToxKV19LG9kLnByb3RvdHlwZS5zZXRNaXJyb3I9ZnVuY3Rpb24odCxlKXt0aGlzLm1pcnJvcnx8KHRoaXMubWlycm9yPVtdKSx0aGlzLm1pcnJvci5wdXNoKHQsZSl9LG9kLnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubWFwcy5sZW5ndGgtMSxuPXRoaXMubWFwcy5sZW5ndGgrdC5tYXBzLmxlbmd0aDtlPj0wO2UtLSl7dmFyIHI9dC5nZXRNaXJyb3IoZSk7dGhpcy5hcHBlbmRNYXAodC5tYXBzW2VdLmludmVydCgpLG51bGwhPXImJnI+ZT9uLXItMTpudWxsKX19LG9kLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgb2Q7cmV0dXJuIHQuYXBwZW5kTWFwcGluZ0ludmVydGVkKHRoaXMpLHR9LG9kLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLm1pcnJvcilyZXR1cm4gdGhpcy5fbWFwKHQsZSwhMCk7Zm9yKHZhciBuPXRoaXMuZnJvbTtuPHRoaXMudG87bisrKXQ9dGhpcy5tYXBzW25dLm1hcCh0LGUpO3JldHVybiB0fSxvZC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxvZC5wcm90b3R5cGUuX21hcD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPSExLG89bnVsbCxpPXRoaXMuZnJvbTtpPHRoaXMudG87aSsrKXt2YXIgcz10aGlzLm1hcHNbaV0sYT1vJiZvW2ldO2lmKG51bGwhPWEmJnMudG91Y2hlcyh0LGEpKXQ9cy5yZWNvdmVyKGEpO2Vsc2V7dmFyIGM9cy5tYXBSZXN1bHQodCxlKTtpZihudWxsIT1jLnJlY292ZXIpe3ZhciBoPXRoaXMuZ2V0TWlycm9yKGkpO2lmKG51bGwhPWgmJmg+aSYmaDx0aGlzLnRvKXtpZihjLmRlbGV0ZWQpe2k9aCx0PXRoaXMubWFwc1toXS5yZWNvdmVyKGMucmVjb3Zlcik7Y29udGludWV9KG98fChvPU9iamVjdC5jcmVhdGUobnVsbCkpKVtoXT1jLnJlY292ZXJ9fWMuZGVsZXRlZCYmKHI9ITApLHQ9Yy5wb3N9fXJldHVybiBuP3Q6bmV3IG5kKHQscil9LGlkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksaWQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWlkLGlkLnByb3RvdHlwZS5uYW1lPSJUcmFuc2Zvcm1FcnJvciI7dmFyIHNkPWZ1bmN0aW9uKHQpe3RoaXMuZG9jPXQsdGhpcy5zdGVwcz1bXSx0aGlzLmRvY3M9W10sdGhpcy5tYXBwaW5nPW5ldyBvZH0sYWQ9e2JlZm9yZTp7Y29uZmlndXJhYmxlOiEwfSxkb2NDaGFuZ2VkOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBjZCgpe3Rocm93IG5ldyBFcnJvcigiT3ZlcnJpZGUgbWUiKX1hZC5iZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jcy5sZW5ndGg/dGhpcy5kb2NzWzBdOnRoaXMuZG9jfSxzZC5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heWJlU3RlcCh0KTtpZihlLmZhaWxlZCl0aHJvdyBuZXcgaWQoZS5mYWlsZWQpO3JldHVybiB0aGlzfSxzZC5wcm90b3R5cGUubWF5YmVTdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXQuYXBwbHkodGhpcy5kb2MpO3JldHVybiBlLmZhaWxlZHx8dGhpcy5hZGRTdGVwKHQsZS5kb2MpLGV9LGFkLmRvY0NoYW5nZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoPjB9LHNkLnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKHQsZSl7dGhpcy5kb2NzLnB1c2godGhpcy5kb2MpLHRoaXMuc3RlcHMucHVzaCh0KSx0aGlzLm1hcHBpbmcuYXBwZW5kTWFwKHQuZ2V0TWFwKCkpLHRoaXMuZG9jPWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNkLnByb3RvdHlwZSxhZCk7dmFyIGhkPU9iamVjdC5jcmVhdGUobnVsbCkscGQ9ZnVuY3Rpb24oKXt9O3BkLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gY2QoKX0scGQucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiByZC5lbXB0eX0scGQucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gY2QoKX0scGQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gY2QoKX0scGQucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSxwZC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIGNkKCl9LHBkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnN0ZXBUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTdGVwLmZyb21KU09OIik7dmFyIG49aGRbZS5zdGVwVHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHN0ZXAgdHlwZSAiK2Uuc3RlcFR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0scGQuanNvbklEPWZ1bmN0aW9uKHQsZSl7aWYodCBpbiBoZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgIit0KTtyZXR1cm4gaGRbdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfTt2YXIgdWQ9ZnVuY3Rpb24odCxlKXt0aGlzLmRvYz10LHRoaXMuZmFpbGVkPWV9O3VkLm9rPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdWQodCxudWxsKX0sdWQuZmFpbD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHVkKG51bGwsdCl9LHVkLmZyb21SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIpe3RyeXtyZXR1cm4gdWQub2sodC5yZXBsYWNlKGUsbixyKSl9Y2F0Y2gobyl7aWYobyBpbnN0YW5jZW9mIElmKXJldHVybiB1ZC5mYWlsKG8ubWVzc2FnZSk7dGhyb3cgb319O3ZhciBmZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5zbGljZT1yLHRoaXMuc3RydWN0dXJlPSEhb31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlJiZkZCh0LHRoaXMuZnJvbSx0aGlzLnRvKT91ZC5mYWlsKCJTdHJ1Y3R1cmUgcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpOnVkLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcmQoW3RoaXMuZnJvbSx0aGlzLnRvLXRoaXMuZnJvbSx0aGlzLnNsaWNlLnNpemVdKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSx0LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWQ/bnVsbDpuZXcgZShuLnBvcyxNYXRoLm1heChuLnBvcyxyLnBvcyksdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGUpfHx0LnN0cnVjdHVyZSE9dGhpcy5zdHJ1Y3R1cmUpcmV0dXJuIG51bGw7aWYodGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSE9dC5mcm9tfHx0aGlzLnNsaWNlLm9wZW5FbmR8fHQuc2xpY2Uub3BlblN0YXJ0KXtpZih0LnRvIT10aGlzLmZyb218fHRoaXMuc2xpY2Uub3BlblN0YXJ0fHx0LnNsaWNlLm9wZW5FbmQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9QZi5lbXB0eTpuZXcgUGYodC5zbGljZS5jb250ZW50LmFwcGVuZCh0aGlzLnNsaWNlLmNvbnRlbnQpLHQuc2xpY2Uub3BlblN0YXJ0LHRoaXMuc2xpY2Uub3BlbkVuZCk7cmV0dXJuIG5ldyBlKHQuZnJvbSx0aGlzLnRvLG4sdGhpcy5zdHJ1Y3R1cmUpfXZhciByPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/UGYuZW1wdHk6bmV3IFBmKHRoaXMuc2xpY2UuY29udGVudC5hcHBlbmQodC5zbGljZS5jb250ZW50KSx0aGlzLnNsaWNlLm9wZW5TdGFydCx0LnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy50bysodC50by10LmZyb20pLHIsdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2UiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxQZi5mcm9tSlNPTih0LG4uc2xpY2UpLCEhbi5zdHJ1Y3R1cmUpfSxlfShwZCk7cGQuanNvbklEKCJyZXBsYWNlIixmZCk7dmFyIGxkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSl7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLmdhcEZyb209cix0aGlzLmdhcFRvPW8sdGhpcy5zbGljZT1pLHRoaXMuaW5zZXJ0PXMsdGhpcy5zdHJ1Y3R1cmU9ISFhfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtpZih0aGlzLnN0cnVjdHVyZSYmKGRkKHQsdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbSl8fGRkKHQsdGhpcy5nYXBUbyx0aGlzLnRvKSkpcmV0dXJuIHVkLmZhaWwoIlN0cnVjdHVyZSBnYXAtcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpO3ZhciBlPXQuc2xpY2UodGhpcy5nYXBGcm9tLHRoaXMuZ2FwVG8pO2lmKGUub3BlblN0YXJ0fHxlLm9wZW5FbmQpcmV0dXJuIHVkLmZhaWwoIkdhcCBpcyBub3QgYSBmbGF0IHJhbmdlIik7dmFyIG49dGhpcy5zbGljZS5pbnNlcnRBdCh0aGlzLmluc2VydCxlLmNvbnRlbnQpO3JldHVybiBuP3VkLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbik6dWQuZmFpbCgiQ29udGVudCBkb2VzIG5vdCBmaXQgaW4gZ2FwIil9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcmQoW3RoaXMuZnJvbSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuaW5zZXJ0LHRoaXMuZ2FwVG8sdGhpcy50by10aGlzLmdhcFRvLHRoaXMuc2xpY2Uuc2l6ZS10aGlzLmluc2VydF0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5nYXBUby10aGlzLmdhcEZyb207cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplK24sdGhpcy5mcm9tK3RoaXMuaW5zZXJ0LHRoaXMuZnJvbSt0aGlzLmluc2VydCtuLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLnJlbW92ZUJldHdlZW4odGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmdhcFRvLXRoaXMuZnJvbSksdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKSxvPXQubWFwKHRoaXMuZ2FwRnJvbSwtMSksaT10Lm1hcCh0aGlzLmdhcFRvLDEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bzxuLnBvc3x8aT5yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLG8saSx0aGlzLnNsaWNlLHRoaXMuaW5zZXJ0LHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlQXJvdW5kIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvLGdhcEZyb206dGhpcy5nYXBGcm9tLGdhcFRvOnRoaXMuZ2FwVG8saW5zZXJ0OnRoaXMuaW5zZXJ0fTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50b3x8Im51bWJlciIhPXR5cGVvZiBuLmdhcEZyb218fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBUb3x8Im51bWJlciIhPXR5cGVvZiBuLmluc2VydCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZUFyb3VuZFN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sbi5nYXBGcm9tLG4uZ2FwVG8sUGYuZnJvbUpTT04odCxuLnNsaWNlKSxuLmluc2VydCwhIW4uc3RydWN0dXJlKX0sZX0ocGQpO2Z1bmN0aW9uIGRkKHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSksbz1uLWUsaT1yLmRlcHRoO3doaWxlKG8+MCYmaT4wJiZyLmluZGV4QWZ0ZXIoaSk9PXIubm9kZShpKS5jaGlsZENvdW50KWktLSxvLS07aWYobz4wKXt2YXIgcz1yLm5vZGUoaSkubWF5YmVDaGlsZChyLmluZGV4QWZ0ZXIoaSkpO3doaWxlKG8+MCl7aWYoIXN8fHMuaXNMZWFmKXJldHVybiEwO3M9cy5maXJzdENoaWxkLG8tLX19cmV0dXJuITF9ZnVuY3Rpb24gdmQodCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPXIuaW5kZXgoKTtyZXR1cm4gci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobyxvKzEsbil9ZnVuY3Rpb24gbWQodCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKTtpZihyLnBhcmVudC5jYW5SZXBsYWNlV2l0aChyLmluZGV4KCksci5pbmRleCgpLG4pKXJldHVybiBlO2lmKDA9PXIucGFyZW50T2Zmc2V0KWZvcih2YXIgbz1yLmRlcHRoLTE7bz49MDtvLS0pe3ZhciBpPXIuaW5kZXgobyk7aWYoci5ub2RlKG8pLmNhblJlcGxhY2VXaXRoKGksaSxuKSlyZXR1cm4gci5iZWZvcmUobysxKTtpZihpPjApcmV0dXJuIG51bGx9aWYoci5wYXJlbnRPZmZzZXQ9PXIucGFyZW50LmNvbnRlbnQuc2l6ZSlmb3IodmFyIHM9ci5kZXB0aC0xO3M+PTA7cy0tKXt2YXIgYT1yLmluZGV4QWZ0ZXIocyk7aWYoci5ub2RlKHMpLmNhblJlcGxhY2VXaXRoKGEsYSxuKSlyZXR1cm4gci5hZnRlcihzKzEpO2lmKGE8ci5ub2RlKHMpLmNoaWxkQ291bnQpcmV0dXJuIG51bGx9fWZ1bmN0aW9uIHlkKHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSk7aWYoIW4uY29udGVudC5zaXplKXJldHVybiBlO2Zvcih2YXIgbz1uLmNvbnRlbnQsaT0wO2k8bi5vcGVuU3RhcnQ7aSsrKW89by5maXJzdENoaWxkLmNvbnRlbnQ7Zm9yKHZhciBzPTE7czw9KDA9PW4ub3BlblN0YXJ0JiZuLnNpemU/MjoxKTtzKyspZm9yKHZhciBhPXIuZGVwdGg7YT49MDthLS0pe3ZhciBjPWE9PXIuZGVwdGg/MDpyLnBvczw9KHIuc3RhcnQoYSsxKStyLmVuZChhKzEpKS8yPy0xOjEsaD1yLmluZGV4KGEpKyhjPjA/MTowKTtpZigxPT1zP3Iubm9kZShhKS5jYW5SZXBsYWNlKGgsaCxvKTpyLm5vZGUoYSkuY29udGVudE1hdGNoQXQoaCkuZmluZFdyYXBwaW5nKG8uZmlyc3RDaGlsZC50eXBlKSlyZXR1cm4gMD09Yz9yLnBvczpjPDA/ci5iZWZvcmUoYSsxKTpyLmFmdGVyKGErMSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gZ2QodCxlLG4pe2Zvcih2YXIgcj1bXSxvPTA7bzx0LmNoaWxkQ291bnQ7bysrKXt2YXIgaT10LmNoaWxkKG8pO2kuY29udGVudC5zaXplJiYoaT1pLmNvcHkoZ2QoaS5jb250ZW50LGUsaSkpKSxpLmlzSW5saW5lJiYoaT1lKGksbixvKSksci5wdXNoKGkpfXJldHVybiBOZi5mcm9tQXJyYXkocil9cGQuanNvbklEKCJyZXBsYWNlQXJvdW5kIixsZCksc2QucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC4kZnJvbSxyPXQuJHRvLG89dC5kZXB0aCxpPW4uYmVmb3JlKG8rMSkscz1yLmFmdGVyKG8rMSksYT1pLGM9cyxoPU5mLmVtcHR5LHA9MCx1PW8sZj0hMTt1PmU7dS0tKWZ8fG4uaW5kZXgodSk+MD8oZj0hMCxoPU5mLmZyb20obi5ub2RlKHUpLmNvcHkoaCkpLHArKyk6YS0tO2Zvcih2YXIgbD1OZi5lbXB0eSxkPTAsdj1vLG09ITE7dj5lO3YtLSltfHxyLmFmdGVyKHYrMSk8ci5lbmQodik/KG09ITAsbD1OZi5mcm9tKHIubm9kZSh2KS5jb3B5KGwpKSxkKyspOmMrKztyZXR1cm4gdGhpcy5zdGVwKG5ldyBsZChhLGMsaSxzLG5ldyBQZihoLmFwcGVuZChsKSxwLGQpLGguc2l6ZS1wLCEwKSl9LHNkLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU5mLmVtcHR5LHI9ZS5sZW5ndGgtMTtyPj0wO3ItLSluPU5mLmZyb20oZVtyXS50eXBlLmNyZWF0ZShlW3JdLmF0dHJzLG4pKTt2YXIgbz10LnN0YXJ0LGk9dC5lbmQ7cmV0dXJuIHRoaXMuc3RlcChuZXcgbGQobyxpLG8saSxuZXcgUGYobiwwLDApLGUubGVuZ3RoLCEwKSl9LHNkLnByb3RvdHlwZS5zZXRCbG9ja1R5cGU9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcztpZih2b2lkIDA9PT1lJiYoZT10KSwhbi5pc1RleHRibG9jayl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVHlwZSBnaXZlbiB0byBzZXRCbG9ja1R5cGUgc2hvdWxkIGJlIGEgdGV4dGJsb2NrIik7dmFyIGk9dGhpcy5zdGVwcy5sZW5ndGg7cmV0dXJuIHRoaXMuZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQsZSl7aWYodC5pc1RleHRibG9jayYmIXQuaGFzTWFya3VwKG4scikmJnZkKG8uZG9jLG8ubWFwcGluZy5zbGljZShpKS5tYXAoZSksbikpe28uY2xlYXJJbmNvbXBhdGlibGUoby5tYXBwaW5nLnNsaWNlKGkpLm1hcChlLDEpLG4pO3ZhciBzPW8ubWFwcGluZy5zbGljZShpKSxhPXMubWFwKGUsMSksYz1zLm1hcChlK3Qubm9kZVNpemUsMSk7cmV0dXJuIG8uc3RlcChuZXcgbGQoYSxjLGErMSxjLTEsbmV3IFBmKE5mLmZyb20obi5jcmVhdGUocixudWxsLHQubWFya3MpKSwwLDApLDEsITApKSwhMX19KSksdGhpc30sc2QucHJvdG90eXBlLnNldE5vZGVNYXJrdXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcy5kb2Mubm9kZUF0KHQpO2lmKCFvKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBub2RlIGF0IGdpdmVuIHBvc2l0aW9uIik7ZXx8KGU9by50eXBlKTt2YXIgaT1lLmNyZWF0ZShuLG51bGwscnx8by5tYXJrcyk7aWYoby5pc0xlYWYpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0K28ubm9kZVNpemUsaSk7aWYoIWUudmFsaWRDb250ZW50KG8uY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSB0eXBlICIrZS5uYW1lKTtyZXR1cm4gdGhpcy5zdGVwKG5ldyBsZCh0LHQrby5ub2RlU2l6ZSx0KzEsdCtvLm5vZGVTaXplLTEsbmV3IFBmKE5mLmZyb20oaSksMCwwKSwxLCEwKSl9LHNkLnByb3RvdHlwZS5zcGxpdD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MSk7Zm9yKHZhciByPXRoaXMuZG9jLnJlc29sdmUodCksbz1OZi5lbXB0eSxpPU5mLmVtcHR5LHM9ci5kZXB0aCxhPXIuZGVwdGgtZSxjPWUtMTtzPmE7cy0tLGMtLSl7bz1OZi5mcm9tKHIubm9kZShzKS5jb3B5KG8pKTt2YXIgaD1uJiZuW2NdO2k9TmYuZnJvbShoP2gudHlwZS5jcmVhdGUoaC5hdHRycyxpKTpyLm5vZGUocykuY29weShpKSl9cmV0dXJuIHRoaXMuc3RlcChuZXcgZmQodCx0LG5ldyBQZihvLmFwcGVuZChpKSxlLGUpLCEwKSl9LHNkLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIG49bmV3IGZkKHQtZSx0K2UsUGYuZW1wdHksITApO3JldHVybiB0aGlzLnN0ZXAobil9O3ZhciB3ZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMubWFyaz1yfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zbGljZSh0aGlzLmZyb20sdGhpcy50bykscj10LnJlc29sdmUodGhpcy5mcm9tKSxvPXIubm9kZShyLnNoYXJlZERlcHRoKHRoaXMudG8pKSxpPW5ldyBQZihnZChuLmNvbnRlbnQsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4udHlwZS5hbGxvd3NNYXJrVHlwZShlLm1hcmsudHlwZSk/dC5tYXJrKGUubWFyay5hZGRUb1NldCh0Lm1hcmtzKSk6dH0pLG8pLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIHVkLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8saSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgeGQodGhpcy5mcm9tLHRoaXMudG8sdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bi5wb3M+PXIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGUmJnQubWFyay5lcSh0aGlzLm1hcmspJiZ0aGlzLmZyb208PXQudG8mJnRoaXMudG8+PXQuZnJvbSlyZXR1cm4gbmV3IGUoTWF0aC5taW4odGhpcy5mcm9tLHQuZnJvbSksTWF0aC5tYXgodGhpcy50byx0LnRvKSx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcFR5cGU6ImFkZE1hcmsiLG1hcms6dGhpcy5tYXJrLnRvSlNPTigpLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgQWRkTWFya1N0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sdC5tYXJrRnJvbUpTT04obi5tYXJrKSl9LGV9KHBkKTtwZC5qc29uSUQoImFkZE1hcmsiLHdkKTt2YXIgeGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLm1hcms9cn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLHI9bmV3IFBmKGdkKG4uY29udGVudCwoZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhlLm1hcmsucmVtb3ZlRnJvbVNldCh0Lm1hcmtzKSl9KSksbi5vcGVuU3RhcnQsbi5vcGVuRW5kKTtyZXR1cm4gdWQuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxyKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB3ZCh0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToicmVtb3ZlTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZW1vdmVNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0ocGQpO2Z1bmN0aW9uIGJkKHQsZSxuLHIpe2lmKHZvaWQgMD09PW4mJihuPWUpLHZvaWQgMD09PXImJihyPVBmLmVtcHR5KSxlPT1uJiYhci5zaXplKXJldHVybiBudWxsO3ZhciBvPXQucmVzb2x2ZShlKSxpPXQucmVzb2x2ZShuKTtpZihFZChvLGkscikpcmV0dXJuIG5ldyBmZChlLG4scik7dmFyIHM9emQobyxyKSxhPVNkKG8scyksYz1OZChvLGksYSk7aWYoIWMpcmV0dXJuIG51bGw7aWYoYS5zaXplIT1jLnNpemUmJkFkKG8saSxhKSl7dmFyIGg9aS5kZXB0aCxwPWkuYWZ0ZXIoaCk7d2hpbGUoaD4xJiZwPT1pLmVuZCgtLWgpKSsrcDt2YXIgdT1OZChvLHQucmVzb2x2ZShwKSxhKTtpZih1KXJldHVybiBuZXcgbGQoZSxwLG4saS5lbmQoKSx1LGEuc2l6ZSl9cmV0dXJuIGMuc2l6ZXx8ZSE9bj9uZXcgZmQoZSxuLGMpOm51bGx9ZnVuY3Rpb24ga2QodCxlLG4scil7dmFyIG89TmYuZW1wdHksaT0wLHM9bltlXTtpZih0LmRlcHRoPmUpe3ZhciBhPWtkKHQsZSsxLG4scnx8cyk7aT1hLm9wZW5FbmQrMSxvPU5mLmZyb20odC5ub2RlKGUrMSkuY29weShhLmNvbnRlbnQpKX1yZXR1cm4gcyYmKG89by5hcHBlbmQocy5jb250ZW50KSxpPXMub3BlbkVuZCksciYmKG89by5hcHBlbmQodC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZmlsbEJlZm9yZShOZi5lbXB0eSwhMCkpLGk9MCkse2NvbnRlbnQ6byxvcGVuRW5kOml9fWZ1bmN0aW9uIFNkKHQsZSl7dmFyIG49a2QodCwwLGUsITEpLHI9bi5jb250ZW50LG89bi5vcGVuRW5kO3JldHVybiBuZXcgUGYocix0LmRlcHRoLG98fDApfWZ1bmN0aW9uIE9kKHQsZSxuLHIsbyxpLHMpe3ZhciBhLGM9dC5jaGlsZENvdW50LGg9Yy0ocz4wPzE6MCkscD1pPDA/ZTpuLm5vZGUobyk7YT1pPDA/cC5jb250ZW50TWF0Y2hBdChoKToxPT1jJiZzPjA/cC5jb250ZW50TWF0Y2hBdChpP24uaW5kZXgobyk6bi5pbmRleEFmdGVyKG8pKTpwLmNvbnRlbnRNYXRjaEF0KG4uaW5kZXhBZnRlcihvKSkubWF0Y2hGcmFnbWVudCh0LGM+MCYmaT8xOjAsaCk7dmFyIHU9ci5ub2RlKG8pO2lmKHM+MCYmbzxyLmRlcHRoKXt2YXIgZj11LmNvbnRlbnQuY3V0QnlJbmRleChyLmluZGV4QWZ0ZXIobykpLmFkZFRvU3RhcnQodC5sYXN0Q2hpbGQpLGw9YS5maWxsQmVmb3JlKGYsITApO2lmKGwmJmwuc2l6ZSYmaT4wJiYxPT1jJiYobD1udWxsKSxsKXt2YXIgZD1PZCh0Lmxhc3RDaGlsZC5jb250ZW50LHQubGFzdENoaWxkLG4scixvKzEsMT09Yz9pLTE6LTEscy0xKTtpZihkKXt2YXIgdj10Lmxhc3RDaGlsZC5jb3B5KGQpO3JldHVybiBsLnNpemU/dC5jdXRCeUluZGV4KDAsYy0xKS5hcHBlbmQobCkuYWRkVG9FbmQodik6dC5yZXBsYWNlQ2hpbGQoYy0xLHYpfX19cz4wJiYoYT1hLm1hdGNoVHlwZSgoMT09YyYmaT4wP24ubm9kZShvKzEpOnQubGFzdENoaWxkKS50eXBlKSk7dmFyIG09ci5pbmRleChvKTtpZihtPT11LmNoaWxkQ291bnQmJiF1LnR5cGUuY29tcGF0aWJsZUNvbnRlbnQoZS50eXBlKSlyZXR1cm4gbnVsbDtmb3IodmFyIHk9YS5maWxsQmVmb3JlKHUuY29udGVudCwhMCxtKSxnPW07eSYmZzx1LmNvbnRlbnQuY2hpbGRDb3VudDtnKyspcC50eXBlLmFsbG93c01hcmtzKHUuY29udGVudC5jaGlsZChnKS5tYXJrcyl8fCh5PW51bGwpO2lmKCF5KXJldHVybiBudWxsO2lmKHM+MCl7dmFyIHc9Q2QodC5sYXN0Q2hpbGQscy0xLG4sbysxLDE9PWM/aS0xOi0xKTt0PXQucmVwbGFjZUNoaWxkKGMtMSx3KX1yZXR1cm4gdD10LmFwcGVuZCh5KSxyLmRlcHRoPm8mJih0PXQuYWRkVG9FbmQoTWQocixvKzEpKSksdH1mdW5jdGlvbiBDZCh0LGUsbixyLG8pe3ZhciBpLHM9dC5jb250ZW50LGE9cy5jaGlsZENvdW50O2lmKGk9bz49MD9uLm5vZGUocikuY29udGVudE1hdGNoQXQobi5pbmRleEFmdGVyKHIpKS5tYXRjaEZyYWdtZW50KHMsbz4wPzE6MCxhKTp0LmNvbnRlbnRNYXRjaEF0KGEpLGU+MCl7dmFyIGM9Q2Qocy5sYXN0Q2hpbGQsZS0xLG4scisxLDE9PWE/by0xOi0xKTtzPXMucmVwbGFjZUNoaWxkKGEtMSxjKX1yZXR1cm4gdC5jb3B5KHMuYXBwZW5kKGkuZmlsbEJlZm9yZShOZi5lbXB0eSwhMCkpKX1mdW5jdGlvbiBNZCh0LGUpe3ZhciBuPXQubm9kZShlKSxyPW4uY29udGVudE1hdGNoQXQoMCkuZmlsbEJlZm9yZShuLmNvbnRlbnQsITAsdC5pbmRleChlKSk7cmV0dXJuIHQuZGVwdGg+ZSYmKHI9ci5hZGRUb0VuZChNZCh0LGUrMSkpKSxuLmNvcHkocil9ZnVuY3Rpb24gVGQodCxlLG4pe3doaWxlKGU+MCYmbj4wJiYxPT10LmNoaWxkQ291bnQpdD10LmZpcnN0Q2hpbGQuY29udGVudCxlLS0sbi0tO3JldHVybiBuZXcgUGYodCxlLG4pfWZ1bmN0aW9uIE5kKHQsZSxuKXt2YXIgcj1PZChuLmNvbnRlbnQsdC5ub2RlKDApLHQsZSwwLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIHI/VGQocixuLm9wZW5TdGFydCxlLmRlcHRoKTpudWxsfWZ1bmN0aW9uIEVkKHQsZSxuKXtyZXR1cm4hbi5vcGVuU3RhcnQmJiFuLm9wZW5FbmQmJnQuc3RhcnQoKT09ZS5zdGFydCgpJiZ0LnBhcmVudC5jYW5SZXBsYWNlKHQuaW5kZXgoKSxlLmluZGV4KCksbi5jb250ZW50KX1mdW5jdGlvbiBBZCh0LGUsbil7aWYoIWUucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciByLG89bi5vcGVuRW5kP1JkKG4uY29udGVudCxuLm9wZW5FbmQpOnQubm9kZSh0LmRlcHRoLShuLm9wZW5TdGFydC1uLm9wZW5FbmQpKTtpZighby5pc1RleHRibG9jaylyZXR1cm4hMTtmb3IodmFyIGk9ZS5pbmRleCgpO2k8ZS5wYXJlbnQuY2hpbGRDb3VudDtpKyspaWYoIW8udHlwZS5hbGxvd3NNYXJrcyhlLnBhcmVudC5jaGlsZChpKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuIG4ub3BlbkVuZD9yPW8uY29udGVudE1hdGNoQXQoby5jaGlsZENvdW50KToocj1vLmNvbnRlbnRNYXRjaEF0KG8uY2hpbGRDb3VudCksbi5zaXplJiYocj1yLm1hdGNoRnJhZ21lbnQobi5jb250ZW50LG4ub3BlblN0YXJ0PzE6MCkpKSxyPXIubWF0Y2hGcmFnbWVudChlLnBhcmVudC5jb250ZW50LGUuaW5kZXgoKSksciYmci52YWxpZEVuZH1mdW5jdGlvbiBSZCh0LGUpe2Zvcih2YXIgbj0xO248ZTtuKyspdD10Lmxhc3RDaGlsZC5jb250ZW50O3JldHVybiB0Lmxhc3RDaGlsZH1mdW5jdGlvbiB6ZCh0LGUpe2Zvcih2YXIgbj1uZXcgRGQodCkscj0xO2Uuc2l6ZSYmcjw9MztyKyspe3ZhciBvPW4ucGxhY2VTbGljZShlLmNvbnRlbnQsZS5vcGVuU3RhcnQsZS5vcGVuRW5kLHIpOzM9PXImJm8hPWUmJm8uc2l6ZSYmKHI9MCksZT1vfXdoaWxlKG4ub3Blbi5sZW5ndGgpbi5jbG9zZU5vZGUoKTtyZXR1cm4gbi5wbGFjZWR9cGQuanNvbklEKCJyZW1vdmVNYXJrIix4ZCksc2QucHJvdG90eXBlLmFkZE1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMsbz1bXSxpPVtdLHM9bnVsbCxhPW51bGw7cmV0dXJuIHRoaXMuZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHIsYyxoKXtpZihyLmlzSW5saW5lKXt2YXIgcD1yLm1hcmtzO2lmKCFuLmlzSW5TZXQocCkmJmgudHlwZS5hbGxvd3NNYXJrVHlwZShuLnR5cGUpKXtmb3IodmFyIHU9TWF0aC5tYXgoYyx0KSxmPU1hdGgubWluKGMrci5ub2RlU2l6ZSxlKSxsPW4uYWRkVG9TZXQocCksZD0wO2Q8cC5sZW5ndGg7ZCsrKXBbZF0uaXNJblNldChsKXx8KHMmJnMudG89PXUmJnMubWFyay5lcShwW2RdKT9zLnRvPWY6by5wdXNoKHM9bmV3IHhkKHUsZixwW2RdKSkpO2EmJmEudG89PXU/YS50bz1mOmkucHVzaChhPW5ldyB3ZCh1LGYsbikpfX19KSksby5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLGkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcCh0KX0pKSx0aGlzfSxzZC5wcm90b3R5cGUucmVtb3ZlTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1uJiYobj1udWxsKTt2YXIgbz1bXSxpPTA7cmV0dXJuIHRoaXMuZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHIscyl7aWYoci5pc0lubGluZSl7aSsrO3ZhciBhPW51bGw7aWYobiBpbnN0YW5jZW9mIEFsKXt2YXIgYz1uLmlzSW5TZXQoci5tYXJrcyk7YyYmKGE9W2NdKX1lbHNlIG4/bi5pc0luU2V0KHIubWFya3MpJiYoYT1bbl0pOmE9ci5tYXJrcztpZihhJiZhLmxlbmd0aClmb3IodmFyIGg9TWF0aC5taW4ocytyLm5vZGVTaXplLGUpLHA9MDtwPGEubGVuZ3RoO3ArKyl7Zm9yKHZhciB1PWFbcF0sZj12b2lkIDAsbD0wO2w8by5sZW5ndGg7bCsrKXt2YXIgZD1vW2xdO2Quc3RlcD09aS0xJiZ1LmVxKG9bbF0uc3R5bGUpJiYoZj1kKX1mPyhmLnRvPWgsZi5zdGVwPWkpOm8ucHVzaCh7c3R5bGU6dSxmcm9tOk1hdGgubWF4KHMsdCksdG86aCxzdGVwOml9KX19fSkpLG8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcChuZXcgeGQodC5mcm9tLHQudG8sdC5zdHlsZSkpfSkpLHRoaXN9LHNkLnByb3RvdHlwZS5jbGVhckluY29tcGF0aWJsZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZS5jb250ZW50TWF0Y2gpO2Zvcih2YXIgcj10aGlzLmRvYy5ub2RlQXQodCksbz1bXSxpPXQrMSxzPTA7czxyLmNoaWxkQ291bnQ7cysrKXt2YXIgYT1yLmNoaWxkKHMpLGM9aSthLm5vZGVTaXplLGg9bi5tYXRjaFR5cGUoYS50eXBlLGEuYXR0cnMpO2lmKGgpe249aDtmb3IodmFyIHA9MDtwPGEubWFya3MubGVuZ3RoO3ArKyllLmFsbG93c01hcmtUeXBlKGEubWFya3NbcF0udHlwZSl8fHRoaXMuc3RlcChuZXcgeGQoaSxjLGEubWFya3NbcF0pKX1lbHNlIG8ucHVzaChuZXcgZmQoaSxjLFBmLmVtcHR5KSk7aT1jfWlmKCFuLnZhbGlkRW5kKXt2YXIgdT1uLmZpbGxCZWZvcmUoTmYuZW1wdHksITApO3RoaXMucmVwbGFjZShpLGksbmV3IFBmKHUsMCwwKSl9Zm9yKHZhciBmPW8ubGVuZ3RoLTE7Zj49MDtmLS0pdGhpcy5zdGVwKG9bZl0pO3JldHVybiB0aGlzfSxzZC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9dCksdm9pZCAwPT09biYmKG49UGYuZW1wdHkpO3ZhciByPWJkKHRoaXMuZG9jLHQsZSxuKTtyZXR1cm4gciYmdGhpcy5zdGVwKHIpLHRoaXN9LHNkLnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsbmV3IFBmKE5mLmZyb20obiksMCwwKSl9LHNkLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxQZi5lbXB0eSl9LHNkLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQsZSl9O3ZhciBEZD1mdW5jdGlvbih0KXt0aGlzLm9wZW49W107Zm9yKHZhciBlPTA7ZTw9dC5kZXB0aDtlKyspe3ZhciBuPXQubm9kZShlKSxyPW4uY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKTt0aGlzLm9wZW4ucHVzaCh7cGFyZW50Om4sbWF0Y2g6cixjb250ZW50Ok5mLmVtcHR5LHdyYXBwZXI6ITEsb3BlbkVuZDowLGRlcHRoOmV9KX10aGlzLnBsYWNlZD1bXX07ZnVuY3Rpb24gSWQodCxlLG4pe3ZhciByPXQuY29udGVudDtpZihlPjEpe3ZhciBvPUlkKHQuZmlyc3RDaGlsZCxlLTEsMT09dC5jaGlsZENvdW50P24tMTowKTtyPXQuY29udGVudC5yZXBsYWNlQ2hpbGQoMCxvKX12YXIgaT10LnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUociwwPT1uKTtyZXR1cm4gdC5jb3B5KGkuYXBwZW5kKHIpKX1mdW5jdGlvbiBQZCh0LGUpe3ZhciBuPXQuY29udGVudDtpZihlPjEpe3ZhciByPVBkKHQubGFzdENoaWxkLGUtMSk7bj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLHIpfXZhciBvPXQuY29udGVudE1hdGNoQXQodC5jaGlsZENvdW50KS5maWxsQmVmb3JlKE5mLmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKG8pKX1mdW5jdGlvbiBCZCh0LGUpe3JldHVybiBlP3QucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLFBkKHQubGFzdENoaWxkLGUpKTp0fWZ1bmN0aW9uIEZkKHQsZSxuLHIsbyl7aWYoZTxuKXt2YXIgaT10LmZpcnN0Q2hpbGQ7dD10LnJlcGxhY2VDaGlsZCgwLGkuY29weShGZChpLmNvbnRlbnQsZSsxLG4scixpKSkpfWlmKGU+cil7dmFyIHM9by5jb250ZW50TWF0Y2hBdCgwKSxhPXMuZmlsbEJlZm9yZSh0KS5hcHBlbmQodCk7dD1hLmFwcGVuZChzLm1hdGNoRnJhZ21lbnQoYSkuZmlsbEJlZm9yZShOZi5lbXB0eSwhMCkpfXJldHVybiB0fWZ1bmN0aW9uIGpkKHQsZSl7Zm9yKHZhciBuPVtdLHI9TWF0aC5taW4odC5kZXB0aCxlLmRlcHRoKSxvPXI7bz49MDtvLS0pe3ZhciBpPXQuc3RhcnQobyk7aWYoaTx0LnBvcy0odC5kZXB0aC1vKXx8ZS5lbmQobyk+ZS5wb3MrKGUuZGVwdGgtbyl8fHQubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nfHxlLm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZylicmVhaztpPT1lLnN0YXJ0KG8pJiZuLnB1c2gobyl9cmV0dXJuIG59RGQucHJvdG90eXBlLnBsYWNlU2xpY2U9ZnVuY3Rpb24odCxlLG4scixvKXtpZihlPjApe3ZhciBpPXQuZmlyc3RDaGlsZCxzPXRoaXMucGxhY2VTbGljZShpLmNvbnRlbnQsTWF0aC5tYXgoMCxlLTEpLG4mJjE9PXQuY2hpbGRDb3VudD9uLTE6MCxyLGkpO3MuY29udGVudCE9aS5jb250ZW50JiYocy5jb250ZW50LnNpemU/KHQ9dC5yZXBsYWNlQ2hpbGQoMCxpLmNvcHkocy5jb250ZW50KSksZT1zLm9wZW5TdGFydCsxKTooMT09dC5jaGlsZENvdW50JiYobj0wKSx0PXQuY3V0QnlJbmRleCgxKSxlPTApKX12YXIgYT10aGlzLnBsYWNlQ29udGVudCh0LGUsbixyLG8pO2lmKHI+MiYmYS5zaXplJiYwPT1lKXt2YXIgYz1hLmNvbnRlbnQuZmlyc3RDaGlsZCxoPTE9PWEuY29udGVudC5jaGlsZENvdW50O3RoaXMucGxhY2VDb250ZW50KGMuY29udGVudCwwLG4mJmg/bi0xOjAscixjKSxhPWg/TmYuZW1wdHk6bmV3IFBmKGEuY29udGVudC5jdXRCeUluZGV4KDEpLDAsbil9cmV0dXJuIGF9LERkLnByb3RvdHlwZS5wbGFjZUNvbnRlbnQ9ZnVuY3Rpb24odCxlLG4scixvKXtmb3IodmFyIGk9MDtpPHQuY2hpbGRDb3VudDtpKyspe2Zvcih2YXIgcz10LmNoaWxkKGkpLGE9ITEsYz1pPT10LmNoaWxkQ291bnQtMSxoPXRoaXMub3Blbi5sZW5ndGgtMTtoPj0wO2gtLSl7dmFyIHA9dGhpcy5vcGVuW2hdLHU9dm9pZCAwO2lmKHI+MSYmKHU9cC5tYXRjaC5maW5kV3JhcHBpbmcocy50eXBlKSkmJighb3x8IXUubGVuZ3RofHx1W3UubGVuZ3RoLTFdIT1vLnR5cGUpKXt3aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+aCl0aGlzLmNsb3NlTm9kZSgpO2Zvcih2YXIgZj0wO2Y8dS5sZW5ndGg7ZisrKXAubWF0Y2g9cC5tYXRjaC5tYXRjaFR5cGUodVtmXSksaCsrLHA9e3BhcmVudDp1W2ZdLmNyZWF0ZSgpLG1hdGNoOnVbZl0uY29udGVudE1hdGNoLGNvbnRlbnQ6TmYuZW1wdHksd3JhcHBlcjohMCxvcGVuRW5kOjAsZGVwdGg6aCtmfSx0aGlzLm9wZW4ucHVzaChwKX12YXIgbD1wLm1hdGNoLm1hdGNoVHlwZShzLnR5cGUpO2lmKCFsKXt2YXIgZD1wLm1hdGNoLmZpbGxCZWZvcmUoTmYuZnJvbShzKSk7aWYoIWQpe2lmKG8mJnAubWF0Y2gubWF0Y2hUeXBlKG8udHlwZSkpYnJlYWs7Y29udGludWV9Zm9yKHZhciB2PTA7djxkLmNoaWxkQ291bnQ7disrKXt2YXIgbT1kLmNoaWxkKHYpO3RoaXMuYWRkTm9kZShwLG0sMCksbD1wLm1hdGNoLm1hdGNoRnJhZ21lbnQobSl9fXdoaWxlKHRoaXMub3Blbi5sZW5ndGgtMT5oKXRoaXMuY2xvc2VOb2RlKCk7cz1zLm1hcmsocC5wYXJlbnQudHlwZS5hbGxvd2VkTWFya3Mocy5tYXJrcykpLGUmJihzPUlkKHMsZSxjP246MCksZT0wKSx0aGlzLmFkZE5vZGUocCxzLGM/bjowKSxwLm1hdGNoPWwsYyYmKG49MCksYT0hMDticmVha31pZighYSlicmVha31yZXR1cm4gdGhpcy5vcGVuLmxlbmd0aD4xJiYoaT4wJiZpPT10LmNoaWxkQ291bnR8fG8mJnRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLnBhcmVudC50eXBlPT1vLnR5cGUpJiZ0aGlzLmNsb3NlTm9kZSgpLG5ldyBQZih0LmN1dEJ5SW5kZXgoaSksZSxuKX0sRGQucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4pe3QuY29udGVudD1CZCh0LmNvbnRlbnQsdC5vcGVuRW5kKS5hZGRUb0VuZChlKSx0Lm9wZW5FbmQ9bn0sRGQucHJvdG90eXBlLmNsb3NlTm9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3Blbi5wb3AoKTswPT10LmNvbnRlbnQuc2l6ZXx8KHQud3JhcHBlcj90aGlzLmFkZE5vZGUodGhpcy5vcGVuW3RoaXMub3Blbi5sZW5ndGgtMV0sdC5wYXJlbnQuY29weSh0LmNvbnRlbnQpLHQub3BlbkVuZCsxKTp0aGlzLnBsYWNlZFt0LmRlcHRoXT17ZGVwdGg6dC5kZXB0aCxjb250ZW50OnQuY29udGVudCxvcGVuRW5kOnQub3BlbkVuZH0pfSxzZC5wcm90b3R5cGUucmVwbGFjZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXtpZighbi5zaXplKXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKHQsZSk7dmFyIHI9dGhpcy5kb2MucmVzb2x2ZSh0KSxvPXRoaXMuZG9jLnJlc29sdmUoZSk7aWYoRWQocixvLG4pKXJldHVybiB0aGlzLnN0ZXAobmV3IGZkKHQsZSxuKSk7dmFyIGk9amQocix0aGlzLmRvYy5yZXNvbHZlKGUpKTswPT1pW2kubGVuZ3RoLTFdJiZpLnBvcCgpO3ZhciBzPS0oci5kZXB0aCsxKTtpLnVuc2hpZnQocyk7Zm9yKHZhciBhPXIuZGVwdGgsYz1yLnBvcy0xO2E+MDthLS0sYy0tKXt2YXIgaD1yLm5vZGUoYSkudHlwZS5zcGVjO2lmKGguZGVmaW5pbmd8fGguaXNvbGF0aW5nKWJyZWFrO2kuaW5kZXhPZihhKT4tMT9zPWE6ci5iZWZvcmUoYSk9PWMmJmkuc3BsaWNlKDEsMCwtYSl9Zm9yKHZhciBwPWkuaW5kZXhPZihzKSx1PVtdLGY9bi5vcGVuU3RhcnQsbD1uLmNvbnRlbnQsZD0wOztkKyspe3ZhciB2PWwuZmlyc3RDaGlsZDtpZih1LnB1c2godiksZD09bi5vcGVuU3RhcnQpYnJlYWs7bD12LmNvbnRlbnR9Zj4wJiZ1W2YtMV0udHlwZS5zcGVjLmRlZmluaW5nJiZyLm5vZGUocCkudHlwZSE9dVtmLTFdLnR5cGU/Zi09MTpmPj0yJiZ1W2YtMV0uaXNUZXh0YmxvY2smJnVbZi0yXS50eXBlLnNwZWMuZGVmaW5pbmcmJnIubm9kZShwKS50eXBlIT11W2YtMl0udHlwZSYmKGYtPTIpO2Zvcih2YXIgbT1uLm9wZW5TdGFydDttPj0wO20tLSl7dmFyIHk9KG0rZisxKSUobi5vcGVuU3RhcnQrMSksZz11W3ldO2lmKGcpZm9yKHZhciB3PTA7dzxpLmxlbmd0aDt3Kyspe3ZhciB4PWlbKHcrcCklaS5sZW5ndGhdLGI9ITA7eDwwJiYoYj0hMSx4PS14KTt2YXIgaz1yLm5vZGUoeC0xKSxTPXIuaW5kZXgoeC0xKTtpZihrLmNhblJlcGxhY2VXaXRoKFMsUyxnLnR5cGUsZy5tYXJrcykpcmV0dXJuIHRoaXMucmVwbGFjZShyLmJlZm9yZSh4KSxiP28uYWZ0ZXIoeCk6ZSxuZXcgUGYoRmQobi5jb250ZW50LDAsbi5vcGVuU3RhcnQseSkseSxuLm9wZW5FbmQpKX19Zm9yKHZhciBPPXRoaXMuc3RlcHMubGVuZ3RoLEM9aS5sZW5ndGgtMTtDPj0wO0MtLSl7aWYodGhpcy5yZXBsYWNlKHQsZSxuKSx0aGlzLnN0ZXBzLmxlbmd0aD5PKWJyZWFrO3ZhciBNPWlbQ107QzwwfHwodD1yLmJlZm9yZShNKSxlPW8uYWZ0ZXIoTSkpfXJldHVybiB0aGlzfSxzZC5wcm90b3R5cGUucmVwbGFjZVJhbmdlV2l0aD1mdW5jdGlvbih0LGUsbil7aWYoIW4uaXNJbmxpbmUmJnQ9PWUmJnRoaXMuZG9jLnJlc29sdmUodCkucGFyZW50LmNvbnRlbnQuc2l6ZSl7dmFyIHI9bWQodGhpcy5kb2MsdCxuLnR5cGUpO251bGwhPXImJih0PWU9cil9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlKHQsZSxuZXcgUGYoTmYuZnJvbShuKSwwLDApKX0sc2QucHJvdG90eXBlLmRlbGV0ZVJhbmdlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuZG9jLnJlc29sdmUodCkscj10aGlzLmRvYy5yZXNvbHZlKGUpLG89amQobixyKSxpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1pPT1vLmxlbmd0aC0xO2lmKGEmJjA9PXN8fG4ubm9kZShzKS50eXBlLmNvbnRlbnRNYXRjaC52YWxpZEVuZClyZXR1cm4gdGhpcy5kZWxldGUobi5zdGFydChzKSxyLmVuZChzKSk7aWYocz4wJiYoYXx8bi5ub2RlKHMtMSkuY2FuUmVwbGFjZShuLmluZGV4KHMtMSksci5pbmRleEFmdGVyKHMtMSkpKSlyZXR1cm4gdGhpcy5kZWxldGUobi5iZWZvcmUocyksci5hZnRlcihzKSl9Zm9yKHZhciBjPTE7Yzw9bi5kZXB0aCYmYzw9ci5kZXB0aDtjKyspaWYodC1uLnN0YXJ0KGMpPT1uLmRlcHRoLWMmJmU+bi5lbmQoYykmJnIuZW5kKGMpLWUhPXIuZGVwdGgtYylyZXR1cm4gdGhpcy5kZWxldGUobi5iZWZvcmUoYyksZSk7cmV0dXJuIHRoaXMuZGVsZXRlKHQsZSl9O3ZhciBfZD1PYmplY3QuY3JlYXRlKG51bGwpLCRkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJhbmdlcz1ufHxbbmV3IExkKHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSxKZD17YW5jaG9yOntjb25maWd1cmFibGU6ITB9LGhlYWQ6e2NvbmZpZ3VyYWJsZTohMH0sZnJvbTp7Y29uZmlndXJhYmxlOiEwfSx0bzp7Y29uZmlndXJhYmxlOiEwfSwkZnJvbTp7Y29uZmlndXJhYmxlOiEwfSwkdG86e2NvbmZpZ3VyYWJsZTohMH0sZW1wdHk6e2NvbmZpZ3VyYWJsZTohMH19O0pkLmFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvc30sSmQuaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LEpkLmZyb20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ucG9zfSxKZC50by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8ucG9zfSxKZC4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LEpkLiR0by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJHRvfSxKZC5lbXB0eS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yYW5nZXMsZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0uJGZyb20ucG9zIT10W2VdLiR0by5wb3MpcmV0dXJuITE7cmV0dXJuITB9LCRkLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LCRkLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9UGYuZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLHI9bnVsbCxvPTA7bzxlLm9wZW5FbmQ7bysrKXI9bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgaT10LnN0ZXBzLmxlbmd0aCxzPXRoaXMucmFuZ2VzLGE9MDthPHMubGVuZ3RoO2ErKyl7dmFyIGM9c1thXSxoPWMuJGZyb20scD1jLiR0byx1PXQubWFwcGluZy5zbGljZShpKTt0LnJlcGxhY2VSYW5nZSh1Lm1hcChoLnBvcyksdS5tYXAocC5wb3MpLGE/UGYuZW1wdHk6ZSksMD09YSYmWGQodCxpLChuP24uaXNJbmxpbmU6ciYmci5pc1RleHRibG9jayk/LTE6MSl9fSwkZC5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5zdGVwcy5sZW5ndGgscj10aGlzLnJhbmdlcyxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10scz1pLiRmcm9tLGE9aS4kdG8sYz10Lm1hcHBpbmcuc2xpY2UobiksaD1jLm1hcChzLnBvcykscD1jLm1hcChhLnBvcyk7bz90LmRlbGV0ZVJhbmdlKGgscCk6KHQucmVwbGFjZVJhbmdlV2l0aChoLHAsZSksWGQodCxuLGUuaXNJbmxpbmU/LTE6MSkpfX0sJGQuZmluZEZyb209ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQucGFyZW50LmlubGluZUNvbnRlbnQ/bmV3IFZkKHQpOkdkKHQubm9kZSgwKSx0LnBhcmVudCx0LnBvcyx0LmluZGV4KCksZSxuKTtpZihyKXJldHVybiByO2Zvcih2YXIgbz10LmRlcHRoLTE7bz49MDtvLS0pe3ZhciBpPWU8MD9HZCh0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYmVmb3JlKG8rMSksdC5pbmRleChvKSxlLG4pOkdkKHQubm9kZSgwKSx0Lm5vZGUobyksdC5hZnRlcihvKzEpLHQuaW5kZXgobykrMSxlLG4pO2lmKGkpcmV0dXJuIGl9fSwkZC5uZWFyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuZmluZEZyb20odCxlKXx8dGhpcy5maW5kRnJvbSh0LC1lKXx8bmV3IEtkKHQubm9kZSgwKSl9LCRkLmF0U3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIEdkKHQsdCwwLDAsMSl8fG5ldyBLZCh0KX0sJGQuYXRFbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIEdkKHQsdCx0LmNvbnRlbnQuc2l6ZSx0LmNoaWxkQ291bnQsLTEpfHxuZXcgS2QodCl9LCRkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNlbGVjdGlvbi5mcm9tSlNPTiIpO3ZhciBuPV9kW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHNlbGVjdGlvbiB0eXBlICIrZS50eXBlKyIgZGVmaW5lZCIpO3JldHVybiBuLmZyb21KU09OKHQsZSl9LCRkLmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gX2QpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc2VsZWN0aW9uIEpTT04gSUQgIit0KTtyZXR1cm4gX2RbdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfSwkZC5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gVmQuYmV0d2Vlbih0aGlzLiRhbmNob3IsdGhpcy4kaGVhZCkuZ2V0Qm9va21hcmsoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJGQucHJvdG90eXBlLEpkKSwkZC5wcm90b3R5cGUudmlzaWJsZT0hMDt2YXIgTGQ9ZnVuY3Rpb24odCxlKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZX0sVmQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpLHQuY2FsbCh0aGlzLGUsbil9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49eyRjdXJzb3I6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLiRjdXJzb3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3M9PXRoaXMuJGhlYWQucG9zP3RoaXMuJGhlYWQ6bnVsbH0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89bi5yZXNvbHZlKHIubWFwKHRoaXMuaGVhZCkpO2lmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiB0Lm5lYXIobyk7dmFyIGk9bi5yZXNvbHZlKHIubWFwKHRoaXMuYW5jaG9yKSk7cmV0dXJuIG5ldyBlKGkucGFyZW50LmlubGluZUNvbnRlbnQ/aTpvLG8pfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49UGYuZW1wdHkpLHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbiksbj09UGYuZW1wdHkpe3ZhciByPXRoaXMuJGZyb20ubWFya3NBY3Jvc3ModGhpcy4kdG8pO3ImJmUuZW5zdXJlTWFya3Mocil9fSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuYW5jaG9yPT10aGlzLmFuY2hvciYmdC5oZWFkPT10aGlzLmhlYWR9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBxZCh0aGlzLmFuY2hvcix0aGlzLmhlYWQpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToidGV4dCIsYW5jaG9yOnRoaXMuYW5jaG9yLGhlYWQ6dGhpcy5oZWFkfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5hbmNob3J8fCJudW1iZXIiIT10eXBlb2Ygbi5oZWFkKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBUZXh0U2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvciksdC5yZXNvbHZlKG4uaGVhZCkpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dC5yZXNvbHZlKGUpO3JldHVybiBuZXcgdGhpcyhyLG49PWU/cjp0LnJlc29sdmUobikpfSxlLmJldHdlZW49ZnVuY3Rpb24obixyLG8pe3ZhciBpPW4ucG9zLXIucG9zO2lmKG8mJiFpfHwobz1pPj0wPzE6LTEpLCFyLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgcz10LmZpbmRGcm9tKHIsbywhMCl8fHQuZmluZEZyb20ociwtbywhMCk7aWYoIXMpcmV0dXJuIHQubmVhcihyLG8pO3I9cy4kaGVhZH1yZXR1cm4gbi5wYXJlbnQuaW5saW5lQ29udGVudHx8KDA9PWk/bj1yOihuPSh0LmZpbmRGcm9tKG4sLW8sITApfHx0LmZpbmRGcm9tKG4sbywhMCkpLiRhbmNob3Isbi5wb3M8ci5wb3MhPWk8MCYmKG49cikpKSxuZXcgZShuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfSgkZCk7JGQuanNvbklEKCJ0ZXh0IixWZCk7dmFyIHFkPWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07cWQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHFkKHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0scWQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIFZkLmJldHdlZW4odC5yZXNvbHZlKHRoaXMuYW5jaG9yKSx0LnJlc29sdmUodGhpcy5oZWFkKSl9O3ZhciBXZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPWUubm9kZUFmdGVyLHI9ZS5ub2RlKDApLnJlc29sdmUoZS5wb3Mrbi5ub2RlU2l6ZSk7dC5jYWxsKHRoaXMsZSxyKSx0aGlzLm5vZGU9bn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89ci5tYXBSZXN1bHQodGhpcy5hbmNob3IpLGk9by5kZWxldGVkLHM9by5wb3MsYT1uLnJlc29sdmUocyk7cmV0dXJuIGk/dC5uZWFyKGEpOm5ldyBlKGEpfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQZihOZi5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgSGQodGhpcy5hbmNob3IpfSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmFuY2hvcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZVNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHRoaXModC5yZXNvbHZlKGUpKX0sZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNUZXh0JiYhMSE9PXQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGV9KCRkKTtXZC5wcm90b3R5cGUudmlzaWJsZT0hMSwkZC5qc29uSUQoIm5vZGUiLFdkKTt2YXIgSGQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07SGQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgZT10Lm1hcFJlc3VsdCh0aGlzLmFuY2hvciksbj1lLmRlbGV0ZWQscj1lLnBvcztyZXR1cm4gbj9uZXcgcWQocixyKTpuZXcgSGQocil9LEhkLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzb2x2ZSh0aGlzLmFuY2hvciksbj1lLm5vZGVBZnRlcjtyZXR1cm4gbiYmV2QuaXNTZWxlY3RhYmxlKG4pP25ldyBXZChlKTokZC5uZWFyKGUpfTt2YXIgS2Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLnJlc29sdmUoMCksZS5yZXNvbHZlKGUuY29udGVudC5zaXplKSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJhbGwifX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gVWR9LGV9KCRkKTskZC5qc29uSUQoImFsbCIsS2QpO3ZhciBVZD17bWFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBLZCh0KX19O2Z1bmN0aW9uIEdkKHQsZSxuLHIsbyxpKXtpZihlLmlubGluZUNvbnRlbnQpcmV0dXJuIFZkLmNyZWF0ZSh0LG4pO2Zvcih2YXIgcz1yLShvPjA/MDoxKTtvPjA/czxlLmNoaWxkQ291bnQ6cz49MDtzKz1vKXt2YXIgYT1lLmNoaWxkKHMpO2lmKGEuaXNBdG9tKXtpZighaSYmV2QuaXNTZWxlY3RhYmxlKGEpKXJldHVybiBXZC5jcmVhdGUodCxuLShvPDA/YS5ub2RlU2l6ZTowKSl9ZWxzZXt2YXIgYz1HZCh0LGEsbitvLG88MD9hLmNoaWxkQ291bnQ6MCxvLGkpO2lmKGMpcmV0dXJuIGN9bis9YS5ub2RlU2l6ZSpvfX1mdW5jdGlvbiBYZCh0LGUsbil7dmFyIHI9dC5zdGVwcy5sZW5ndGgtMTtpZighKHI8ZSkpe3ZhciBvPXQuc3RlcHNbcl07aWYobyBpbnN0YW5jZW9mIGZkfHxvIGluc3RhbmNlb2YgbGQpe3ZhciBpLHM9dC5tYXBwaW5nLm1hcHNbcl07cy5mb3JFYWNoKChmdW5jdGlvbih0LGUsbixyKXtudWxsPT1pJiYoaT1yKX0pKSx0LnNldFNlbGVjdGlvbigkZC5uZWFyKHQuZG9jLnJlc29sdmUoaSksbikpfX19dmFyIFlkPTEsWmQ9MixRZD00LHR2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5kb2MpLHRoaXMudGltZT1EYXRlLm5vdygpLHRoaXMuY3VyU2VsZWN0aW9uPWUuc2VsZWN0aW9uLHRoaXMuY3VyU2VsZWN0aW9uRm9yPTAsdGhpcy5zdG9yZWRNYXJrcz1lLnN0b3JlZE1hcmtzLHRoaXMudXBkYXRlZD0wLHRoaXMubWV0YT1PYmplY3QuY3JlYXRlKG51bGwpfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzZWxlY3Rpb246e2NvbmZpZ3VyYWJsZTohMH0sc2VsZWN0aW9uU2V0Ontjb25maWd1cmFibGU6ITB9LHN0b3JlZE1hcmtzU2V0Ontjb25maWd1cmFibGU6ITB9LGlzR2VuZXJpYzp7Y29uZmlndXJhYmxlOiEwfSxzY3JvbGxlZEludG9WaWV3Ontjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5zZWxlY3Rpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uRm9yPHRoaXMuc3RlcHMubGVuZ3RoJiYodGhpcy5jdXJTZWxlY3Rpb249dGhpcy5jdXJTZWxlY3Rpb24ubWFwKHRoaXMuZG9jLHRoaXMubWFwcGluZy5zbGljZSh0aGlzLmN1clNlbGVjdGlvbkZvcikpLHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoKSx0aGlzLmN1clNlbGVjdGlvbn0sZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQpe2lmKHQuJGZyb20uZG9jIT10aGlzLmRvYyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2VsZWN0aW9uIHBhc3NlZCB0byBzZXRTZWxlY3Rpb24gbXVzdCBwb2ludCBhdCB0aGUgY3VycmVudCBkb2N1bWVudCIpO3JldHVybiB0aGlzLmN1clNlbGVjdGlvbj10LHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoLHRoaXMudXBkYXRlZD0odGhpcy51cGRhdGVkfFlkKSZ+WmQsdGhpcy5zdG9yZWRNYXJrcz1udWxsLHRoaXN9LG4uc2VsZWN0aW9uU2V0LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmWWQpPjB9LGUucHJvdG90eXBlLnNldFN0b3JlZE1hcmtzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0b3JlZE1hcmtzPXQsdGhpcy51cGRhdGVkfD1aZCx0aGlzfSxlLnByb3RvdHlwZS5lbnN1cmVNYXJrcz1mdW5jdGlvbih0KXtyZXR1cm4gRGYuc2FtZVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kZnJvbS5tYXJrcygpLHQpfHx0aGlzLnNldFN0b3JlZE1hcmtzKHQpLHRoaXN9LGUucHJvdG90eXBlLmFkZFN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5hZGRUb1NldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LGUucHJvdG90eXBlLnJlbW92ZVN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5yZW1vdmVGcm9tU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sbi5zdG9yZWRNYXJrc1NldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJlpkKT4wfSxlLnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKGUsbil7dC5wcm90b3R5cGUuYWRkU3RlcC5jYWxsKHRoaXMsZSxuKSx0aGlzLnVwZGF0ZWQ9dGhpcy51cGRhdGVkJn5aZCx0aGlzLnN0b3JlZE1hcmtzPW51bGx9LGUucHJvdG90eXBlLnNldFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGltZT10LHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uV2l0aD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc2VsZWN0aW9uO3JldHVybiExIT09ZSYmKHQ9dC5tYXJrKHRoaXMuc3RvcmVkTWFya3N8fChuLmVtcHR5P24uJGZyb20ubWFya3MoKTpuLiRmcm9tLm1hcmtzQWNyb3NzKG4uJHRvKXx8RGYubm9uZSkpKSxuLnJlcGxhY2VXaXRoKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUuZGVsZXRlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyksdGhpc30sZS5wcm90b3R5cGUuaW5zZXJ0VGV4dD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZSk7dmFyIHI9dGhpcy5kb2MudHlwZS5zY2hlbWE7aWYobnVsbD09ZSlyZXR1cm4gdD90aGlzLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHIudGV4dCh0KSwhMCk6dGhpcy5kZWxldGVTZWxlY3Rpb24oKTtpZighdClyZXR1cm4gdGhpcy5kZWxldGVSYW5nZShlLG4pO3ZhciBvPXRoaXMuc3RvcmVkTWFya3M7aWYoIW8pe3ZhciBpPXRoaXMuZG9jLnJlc29sdmUoZSk7bz1uPT1lP2kubWFya3MoKTppLm1hcmtzQWNyb3NzKHRoaXMuZG9jLnJlc29sdmUobikpfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZVdpdGgoZSxuLHIudGV4dCh0LG8pKSx0aGlzLnNlbGVjdGlvbi5lbXB0eXx8dGhpcy5zZXRTZWxlY3Rpb24oJGQubmVhcih0aGlzLnNlbGVjdGlvbi4kdG8pKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRNZXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV09ZSx0aGlzfSxlLnByb3RvdHlwZS5nZXRNZXRhPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldfSxuLmlzR2VuZXJpYy5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5tZXRhKXJldHVybiExO3JldHVybiEwfSxlLnByb3RvdHlwZS5zY3JvbGxJbnRvVmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVwZGF0ZWR8PVFkLHRoaXN9LG4uc2Nyb2xsZWRJbnRvVmlldy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJlFkKT4wfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShzZCk7ZnVuY3Rpb24gZXYodCxlKXtyZXR1cm4gZSYmdD90LmJpbmQoZSk6dH12YXIgbnY9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuaW5pdD1ldihlLmluaXQsbiksdGhpcy5hcHBseT1ldihlLmFwcGx5LG4pfSxydj1bbmV3IG52KCJkb2MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY3x8dC5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N9fSksbmV3IG52KCJzZWxlY3Rpb24iLHtpbml0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2VsZWN0aW9ufHwkZC5hdFN0YXJ0KGUuZG9jKX0sYXBwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2VsZWN0aW9ufX0pLG5ldyBudigic3RvcmVkTWFya3MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3JlZE1hcmtzfHxudWxsfSxhcHBseTpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gci5zZWxlY3Rpb24uJGN1cnNvcj90LnN0b3JlZE1hcmtzOm51bGx9fSksbmV3IG52KCJzY3JvbGxUb1NlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sYXBwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zY3JvbGxlZEludG9WaWV3P2UrMTplfX0pXSxvdj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLmZpZWxkcz1ydi5jb25jYXQoKSx0aGlzLnBsdWdpbnM9W10sdGhpcy5wbHVnaW5zQnlLZXk9T2JqZWN0LmNyZWF0ZShudWxsKSxlJiZlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4ucGx1Z2luc0J5S2V5W3Qua2V5XSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKCIrdC5rZXkrIikiKTtuLnBsdWdpbnMucHVzaCh0KSxuLnBsdWdpbnNCeUtleVt0LmtleV09dCx0LnNwZWMuc3RhdGUmJm4uZmllbGRzLnB1c2gobmV3IG52KHQua2V5LHQuc3BlYy5zdGF0ZSx0KSl9KSl9LGl2PWZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXR9LHN2PXtzY2hlbWE6e2NvbmZpZ3VyYWJsZTohMH0scGx1Z2luczp7Y29uZmlndXJhYmxlOiEwfSx0cjp7Y29uZmlndXJhYmxlOiEwfX07c3Yuc2NoZW1hLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5zY2hlbWF9LHN2LnBsdWdpbnMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnBsdWdpbnN9LGl2LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHQpLnN0YXRlfSxpdi5wcm90b3R5cGUuZmlsdGVyVHJhbnNhY3Rpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0tMSk7Zm9yKHZhciBuPTA7bjx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtuKyspaWYobiE9ZSl7dmFyIHI9dGhpcy5jb25maWcucGx1Z2luc1tuXTtpZihyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24mJiFyLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24uY2FsbChyLHQsdGhpcykpcmV0dXJuITF9cmV0dXJuITB9LGl2LnByb3RvdHlwZS5hcHBseVRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmZpbHRlclRyYW5zYWN0aW9uKHQpKXJldHVybntzdGF0ZTp0aGlzLHRyYW5zYWN0aW9uczpbXX07Zm9yKHZhciBlPVt0XSxuPXRoaXMuYXBwbHlJbm5lcih0KSxyPW51bGw7Oyl7Zm9yKHZhciBvPSExLGk9MDtpPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5jb25maWcucGx1Z2luc1tpXTtpZihzLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24pe3ZhciBhPXI/cltpXS5uOjAsYz1yP3JbaV0uc3RhdGU6dGhpcyxoPWE8ZS5sZW5ndGgmJnMuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbi5jYWxsKHMsYT9lLnNsaWNlKGEpOmUsYyxuKTtpZihoJiZuLmZpbHRlclRyYW5zYWN0aW9uKGgsaSkpe2lmKGguc2V0TWV0YSgiYXBwZW5kZWRUcmFuc2FjdGlvbiIsdCksIXIpe3I9W107Zm9yKHZhciBwPTA7cDx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtwKyspci5wdXNoKHA8aT97c3RhdGU6bixuOmUubGVuZ3RofTp7c3RhdGU6dGhpcyxuOjB9KX1lLnB1c2goaCksbj1uLmFwcGx5SW5uZXIoaCksbz0hMH1yJiYocltpXT17c3RhdGU6bixuOmUubGVuZ3RofSl9fWlmKCFvKXJldHVybntzdGF0ZTpuLHRyYW5zYWN0aW9uczplfX19LGl2LnByb3RvdHlwZS5hcHBseUlubmVyPWZ1bmN0aW9uKHQpe2lmKCF0LmJlZm9yZS5lcSh0aGlzLmRvYykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFwcGx5aW5nIGEgbWlzbWF0Y2hlZCB0cmFuc2FjdGlvbiIpO2Zvcih2YXIgZT1uZXcgaXYodGhpcy5jb25maWcpLG49dGhpcy5jb25maWcuZmllbGRzLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtlW28ubmFtZV09by5hcHBseSh0LHRoaXNbby5uYW1lXSx0aGlzLGUpfWZvcih2YXIgaT0wO2k8YXYubGVuZ3RoO2krKylhdltpXSh0aGlzLHQsZSk7cmV0dXJuIGV9LHN2LnRyLmdldD1mdW5jdGlvbigpe3JldHVybiBuZXcgdHYodGhpcyl9LGl2LmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IG92KHQuc2NoZW1hfHx0LmRvYy50eXBlLnNjaGVtYSx0LnBsdWdpbnMpLG49bmV3IGl2KGUpLHI9MDtyPGUuZmllbGRzLmxlbmd0aDtyKyspbltlLmZpZWxkc1tyXS5uYW1lXT1lLmZpZWxkc1tyXS5pbml0KHQsbik7cmV0dXJuIG59LGl2LnByb3RvdHlwZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IG92KHQuc2NoZW1hfHx0aGlzLnNjaGVtYSx0LnBsdWdpbnMpLG49ZS5maWVsZHMscj1uZXcgaXYoZSksbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dLm5hbWU7cltpXT10aGlzLmhhc093blByb3BlcnR5KGkpP3RoaXNbaV06bltvXS5pbml0KHQscil9cmV0dXJuIHJ9LGl2LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7dmFyIGU9e2RvYzp0aGlzLmRvYy50b0pTT04oKSxzZWxlY3Rpb246dGhpcy5zZWxlY3Rpb24udG9KU09OKCl9O2lmKHRoaXMuc3RvcmVkTWFya3MmJihlLnN0b3JlZE1hcmtzPXRoaXMuc3RvcmVkTWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdCYmIm9iamVjdCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXtpZigiZG9jIj09bnx8InNlbGVjdGlvbiI9PW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSBKU09OIGZpZWxkcyBgZG9jYCBhbmQgYHNlbGVjdGlvbmAgYXJlIHJlc2VydmVkIik7dmFyIHI9dFtuXSxvPXIuc3BlYy5zdGF0ZTtvJiZvLnRvSlNPTiYmKGVbbl09by50b0pTT04uY2FsbChyLHRoaXNbci5rZXldKSl9cmV0dXJuIGV9LGl2LmZyb21KU09OPWZ1bmN0aW9uKHQsZSxuKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRWRpdG9yU3RhdGUuZnJvbUpTT04iKTtpZighdC5zY2hlbWEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlcXVpcmVkIGNvbmZpZyBmaWVsZCAnc2NoZW1hJyBtaXNzaW5nIik7dmFyIHI9bmV3IG92KHQuc2NoZW1hLHQucGx1Z2lucyksbz1uZXcgaXYocik7cmV0dXJuIHIuZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKHIpe2lmKCJkb2MiPT1yLm5hbWUpby5kb2M9cmwuZnJvbUpTT04odC5zY2hlbWEsZS5kb2MpO2Vsc2UgaWYoInNlbGVjdGlvbiI9PXIubmFtZSlvLnNlbGVjdGlvbj0kZC5mcm9tSlNPTihvLmRvYyxlLnNlbGVjdGlvbik7ZWxzZSBpZigic3RvcmVkTWFya3MiPT1yLm5hbWUpZS5zdG9yZWRNYXJrcyYmKG8uc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcy5tYXAodC5zY2hlbWEubWFya0Zyb21KU09OKSk7ZWxzZXtpZihuKWZvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldLGE9cy5zcGVjLnN0YXRlO2lmKHMua2V5PT1yLm5hbWUmJmEmJmEuZnJvbUpTT04mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXJldHVybiB2b2lkKG9bci5uYW1lXT1hLmZyb21KU09OLmNhbGwocyx0LGVbaV0sbykpfW9bci5uYW1lXT1yLmluaXQodCxvKX19KSksb30saXYuYWRkQXBwbHlMaXN0ZW5lcj1mdW5jdGlvbih0KXthdi5wdXNoKHQpfSxpdi5yZW1vdmVBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPWF2LmluZGV4T2YodCk7ZT4tMSYmYXYuc3BsaWNlKGUsMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGl2LnByb3RvdHlwZSxzdik7dmFyIGF2PVtdO2Z1bmN0aW9uIGN2KHQsZSxuKXtmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXTtvIGluc3RhbmNlb2YgRnVuY3Rpb24/bz1vLmJpbmQoZSk6ImhhbmRsZURPTUV2ZW50cyI9PXImJihvPWN2KG8sZSx7fSkpLG5bcl09b31yZXR1cm4gbn12YXIgaHY9ZnVuY3Rpb24odCl7dGhpcy5wcm9wcz17fSx0LnByb3BzJiZjdih0LnByb3BzLHRoaXMsdGhpcy5wcm9wcyksdGhpcy5zcGVjPXQsdGhpcy5rZXk9dC5rZXk/dC5rZXkua2V5OnV2KCJwbHVnaW4iKX07aHYucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX07dmFyIHB2PU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gdXYodCl7cmV0dXJuIHQgaW4gcHY/dCsiJCIrICsrcHZbdF06KHB2W3RdPTAsdCsiJCIpfXZhciBmdj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0ia2V5IiksdGhpcy5rZXk9dXYodCl9O2Z2LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29uZmlnLnBsdWdpbnNCeUtleVt0aGlzLmtleV19LGZ2LnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciBsdj17fTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIGR2PS9FZGdlXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSx2dj0vTVNJRSBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxtdj0vVHJpZGVudFwvKD86WzctOV18XGR7Mix9KVwuLipydjooXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtsdi5tYWM9L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO3ZhciB5dj1sdi5pZT0hISh2dnx8bXZ8fGR2KTtsdi5pZV92ZXJzaW9uPXZ2P2RvY3VtZW50LmRvY3VtZW50TW9kZXx8Njptdj8rbXZbMV06ZHY/K2R2WzFdOm51bGwsbHYuZ2Vja289IXl2JiYvZ2Vja29cLyhcZCspL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxsdi5nZWNrb192ZXJzaW9uPWx2LmdlY2tvJiYrKC9GaXJlZm94XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdO3ZhciBndj0heXYmJi9DaHJvbWVcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO2x2LmNocm9tZT0hIWd2LGx2LmNocm9tZV92ZXJzaW9uPWd2JiYrZ3ZbMV0sbHYuaW9zPSF5diYmL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvTW9iaWxlXC9cdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbHYuYW5kcm9pZD0vQW5kcm9pZCBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxsdi53ZWJraXQ9IndlYmtpdEZvbnRTbW9vdGhpbmciaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLGx2LnNhZmFyaT0vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvciksbHYud2Via2l0X3ZlcnNpb249bHYud2Via2l0JiYrKC9cYkFwcGxlV2ViS2l0XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdfXZhciB3dj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDs7ZSsrKWlmKHQ9dC5wcmV2aW91c1NpYmxpbmcsIXQpcmV0dXJuIGV9LHh2PWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50Tm9kZTtyZXR1cm4gZSYmMTE9PWUubm9kZVR5cGU/ZS5ob3N0OmV9LGJ2PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiByLnNldEVuZCh0LG51bGw9PW4/dC5ub2RlVmFsdWUubGVuZ3RoOm4pLHIuc2V0U3RhcnQodCxlfHwwKSxyfSxrdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbiYmKE92KHQsZSxuLHIsLTEpfHxPdih0LGUsbixyLDEpKX0sU3Y9L14oaW1nfGJyfGlucHV0fHRleHRhcmVhfGhyKSQvaTtmdW5jdGlvbiBPdih0LGUsbixyLG8pe2Zvcig7Oyl7aWYodD09biYmZT09cilyZXR1cm4hMDtpZihlPT0obzwwPzA6Q3YodCkpKXt2YXIgaT10LnBhcmVudE5vZGU7aWYoMSE9aS5ub2RlVHlwZXx8VHYodCl8fFN2LnRlc3QodC5ub2RlTmFtZSl8fCJmYWxzZSI9PXQuY29udGVudEVkaXRhYmxlKXJldHVybiExO2U9d3YodCkrKG88MD8wOjEpLHQ9aX1lbHNle2lmKDEhPXQubm9kZVR5cGUpcmV0dXJuITE7aWYodD10LmNoaWxkTm9kZXNbZSsobzwwPy0xOjApXSwiZmFsc2UiPT10LmNvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMTtlPW88MD9Ddih0KTowfX19ZnVuY3Rpb24gQ3YodCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gTXYodCxlLG4pe2Zvcih2YXIgcj0wPT1lLG89ZT09Q3YodCk7cnx8bzspe2lmKHQ9PW4pcmV0dXJuITA7dmFyIGk9d3YodCk7aWYodD10LnBhcmVudE5vZGUsIXQpcmV0dXJuITE7cj1yJiYwPT1pLG89byYmaT09Q3YodCl9fWZ1bmN0aW9uIFR2KHQpe2Zvcih2YXIgZSxuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihlPW4ucG1WaWV3RGVzYylicmVhaztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9jayYmKGUuZG9tPT10fHxlLmNvbnRlbnRET009PXQpfXZhciBOdj1mdW5jdGlvbih0KXt2YXIgZT10LmlzQ29sbGFwc2VkO3JldHVybiBlJiZsdi5jaHJvbWUmJnQucmFuZ2VDb3VudCYmIXQuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQmJihlPSExKSxlfTtmdW5jdGlvbiBFdih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpO3JldHVybiBuLmluaXRFdmVudCgia2V5ZG93biIsITAsITApLG4ua2V5Q29kZT10LG4ua2V5PW4uY29kZT1lLG59ZnVuY3Rpb24gQXYodCl7cmV0dXJue2xlZnQ6MCxyaWdodDp0LmlubmVyV2lkdGgsdG9wOjAsYm90dG9tOnQuaW5uZXJIZWlnaHR9fWZ1bmN0aW9uIFJ2KHQsZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P3Q6dFtlXX1mdW5jdGlvbiB6dih0LGUsbil7Zm9yKHZhciByPXQuc29tZVByb3AoInNjcm9sbFRocmVzaG9sZCIpfHwwLG89dC5zb21lUHJvcCgic2Nyb2xsTWFyZ2luIil8fDUsaT10LmRvbS5vd25lckRvY3VtZW50LHM9aS5kZWZhdWx0VmlldyxhPW58fHQuZG9tOzthPXh2KGEpKXtpZighYSlicmVhaztpZigxPT1hLm5vZGVUeXBlKXt2YXIgYz1hPT1pLmJvZHl8fDEhPWEubm9kZVR5cGUsaD1jP0F2KHMpOmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscD0wLHU9MDtpZihlLnRvcDxoLnRvcCtSdihyLCJ0b3AiKT91PS0oaC50b3AtZS50b3ArUnYobywidG9wIikpOmUuYm90dG9tPmguYm90dG9tLVJ2KHIsImJvdHRvbSIpJiYodT1lLmJvdHRvbS1oLmJvdHRvbStSdihvLCJib3R0b20iKSksZS5sZWZ0PGgubGVmdCtSdihyLCJsZWZ0Iik/cD0tKGgubGVmdC1lLmxlZnQrUnYobywibGVmdCIpKTplLnJpZ2h0PmgucmlnaHQtUnYociwicmlnaHQiKSYmKHA9ZS5yaWdodC1oLnJpZ2h0K1J2KG8sInJpZ2h0IikpLHB8fHUpaWYoYylzLnNjcm9sbEJ5KHAsdSk7ZWxzZXt2YXIgZj1hLnNjcm9sbExlZnQsbD1hLnNjcm9sbFRvcDt1JiYoYS5zY3JvbGxUb3ArPXUpLHAmJihhLnNjcm9sbExlZnQrPXApO3ZhciBkPWEuc2Nyb2xsTGVmdC1mLHY9YS5zY3JvbGxUb3AtbDtlPXtsZWZ0OmUubGVmdC1kLHRvcDplLnRvcC12LHJpZ2h0OmUucmlnaHQtZCxib3R0b206ZS5ib3R0b20tdn19aWYoYylicmVha319fWZ1bmN0aW9uIER2KHQpe2Zvcih2YXIgZSxuLHI9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1NYXRoLm1heCgwLHIudG9wKSxpPShyLmxlZnQrci5yaWdodCkvMixzPW8rMTtzPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTtzKz01KXt2YXIgYT10LnJvb3QuZWxlbWVudEZyb21Qb2ludChpLHMpO2lmKGEhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhhKSl7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihjLnRvcD49by0yMCl7ZT1hLG49Yy50b3A7YnJlYWt9fX1yZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6SXYodC5kb20pfX1mdW5jdGlvbiBJdih0KXtmb3IodmFyIGU9W10sbj10Lm93bmVyRG9jdW1lbnQ7dDt0PXh2KHQpKWlmKGUucHVzaCh7ZG9tOnQsdG9wOnQuc2Nyb2xsVG9wLGxlZnQ6dC5zY3JvbGxMZWZ0fSksdD09bilicmVhaztyZXR1cm4gZX1mdW5jdGlvbiBQdih0KXt2YXIgZT10LnJlZkRPTSxuPXQucmVmVG9wLHI9dC5zdGFjayxvPWU/ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A6MDtCdihyLDA9PW8/MDpvLW4pfWZ1bmN0aW9uIEJ2KHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0sbz1yLmRvbSxpPXIudG9wLHM9ci5sZWZ0O28uc2Nyb2xsVG9wIT1pK2UmJihvLnNjcm9sbFRvcD1pK2UpLG8uc2Nyb2xsTGVmdCE9cyYmKG8uc2Nyb2xsTGVmdD1zKX19dmFyIEZ2PW51bGw7ZnVuY3Rpb24ganYodCl7aWYodC5zZXRBY3RpdmUpcmV0dXJuIHQuc2V0QWN0aXZlKCk7aWYoRnYpcmV0dXJuIHQuZm9jdXMoRnYpO3ZhciBlPUl2KHQpO3QuZm9jdXMobnVsbD09RnY/e2dldCBwcmV2ZW50U2Nyb2xsKCl7cmV0dXJuIEZ2PXtwcmV2ZW50U2Nyb2xsOiEwfSwhMH19OnZvaWQgMCksRnZ8fChGdj0hMSxCdihlLDApKX1mdW5jdGlvbiBfdih0LGUpe2Zvcih2YXIgbixyLG89MmU4LGk9MCxzPWUudG9wLGE9ZS50b3AsYz10LmZpcnN0Q2hpbGQsaD0wO2M7Yz1jLm5leHRTaWJsaW5nLGgrKyl7dmFyIHA9dm9pZCAwO2lmKDE9PWMubm9kZVR5cGUpcD1jLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1jLm5vZGVUeXBlKWNvbnRpbnVlO3A9YnYoYykuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIHU9MDt1PHAubGVuZ3RoO3UrKyl7dmFyIGY9cFt1XTtpZihmLnRvcDw9cyYmZi5ib3R0b20+PWEpe3M9TWF0aC5tYXgoZi5ib3R0b20scyksYT1NYXRoLm1pbihmLnRvcCxhKTt2YXIgbD1mLmxlZnQ+ZS5sZWZ0P2YubGVmdC1lLmxlZnQ6Zi5yaWdodDxlLmxlZnQ/ZS5sZWZ0LWYucmlnaHQ6MDtpZihsPG8pe249YyxvPWwscj1sJiYzPT1uLm5vZGVUeXBlP3tsZWZ0OmYucmlnaHQ8ZS5sZWZ0P2YucmlnaHQ6Zi5sZWZ0LHRvcDplLnRvcH06ZSwxPT1jLm5vZGVUeXBlJiZsJiYoaT1oKyhlLmxlZnQ+PShmLmxlZnQrZi5yaWdodCkvMj8xOjApKTtjb250aW51ZX19IW4mJihlLmxlZnQ+PWYucmlnaHQmJmUudG9wPj1mLnRvcHx8ZS5sZWZ0Pj1mLmxlZnQmJmUudG9wPj1mLmJvdHRvbSkmJihpPWgrMSl9fXJldHVybiBuJiYzPT1uLm5vZGVUeXBlPyR2KG4scik6IW58fG8mJjE9PW4ubm9kZVR5cGU/e25vZGU6dCxvZmZzZXQ6aX06X3YobixyKX1mdW5jdGlvbiAkdih0LGUpe2Zvcih2YXIgbj10Lm5vZGVWYWx1ZS5sZW5ndGgscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLG89MDtvPG47bysrKXtyLnNldEVuZCh0LG8rMSksci5zZXRTdGFydCh0LG8pO3ZhciBpPUt2KHIsMSk7aWYoaS50b3AhPWkuYm90dG9tJiZKdihlLGkpKXJldHVybntub2RlOnQsb2Zmc2V0Om8rKGUubGVmdD49KGkubGVmdCtpLnJpZ2h0KS8yPzE6MCl9fXJldHVybntub2RlOnQsb2Zmc2V0OjB9fWZ1bmN0aW9uIEp2KHQsZSl7cmV0dXJuIHQubGVmdD49ZS5sZWZ0LTEmJnQubGVmdDw9ZS5yaWdodCsxJiZ0LnRvcD49ZS50b3AtMSYmdC50b3A8PWUuYm90dG9tKzF9ZnVuY3Rpb24gTHYodCxlKXt2YXIgbj10LnBhcmVudE5vZGU7cmV0dXJuIG4mJi9ebGkkL2kudGVzdChuLm5vZGVOYW1lKSYmZS5sZWZ0PHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdD9uOnR9ZnVuY3Rpb24gVnYodCxlLG4pe3ZhciByPV92KGUsbiksbz1yLm5vZGUsaT1yLm9mZnNldCxzPS0xO2lmKDE9PW8ubm9kZVR5cGUmJiFvLmZpcnN0Q2hpbGQpe3ZhciBhPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cz1hLmxlZnQhPWEucmlnaHQmJm4ubGVmdD4oYS5sZWZ0K2EucmlnaHQpLzI/MTotMX1yZXR1cm4gdC5kb2NWaWV3LnBvc0Zyb21ET00obyxpLHMpfWZ1bmN0aW9uIHF2KHQsZSxuLHIpe2Zvcih2YXIgbz0tMSxpPWU7Oyl7aWYoaT09dC5kb20pYnJlYWs7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGksITApO2lmKCFzKXJldHVybiBudWxsO2lmKHMubm9kZS5pc0Jsb2NrJiZzLnBhcmVudCl7dmFyIGE9cy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoYS5sZWZ0PnIubGVmdHx8YS50b3A+ci50b3Apbz1zLnBvc0JlZm9yZTtlbHNle2lmKCEoYS5yaWdodDxyLmxlZnR8fGEuYm90dG9tPHIudG9wKSlicmVhaztvPXMucG9zQWZ0ZXJ9fWk9cy5kb20ucGFyZW50Tm9kZX1yZXR1cm4gbz4tMT9vOnQuZG9jVmlldy5wb3NGcm9tRE9NKGUsbil9ZnVuY3Rpb24gV3YodCxlLG4pe3ZhciByPXQuY2hpbGROb2Rlcy5sZW5ndGg7aWYociYmbi50b3A8bi5ib3R0b20pZm9yKHZhciBvPU1hdGgubWF4KDAsTWF0aC5taW4oci0xLE1hdGguZmxvb3IociooZS50b3Atbi50b3ApLyhuLmJvdHRvbS1uLnRvcCkpLTIpKSxpPW87Oyl7dmFyIHM9dC5jaGlsZE5vZGVzW2ldO2lmKDE9PXMubm9kZVR5cGUpZm9yKHZhciBhPXMuZ2V0Q2xpZW50UmVjdHMoKSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBoPWFbY107aWYoSnYoZSxoKSlyZXR1cm4gV3YocyxlLGgpfWlmKChpPShpKzEpJXIpPT1vKWJyZWFrfXJldHVybiB0fWZ1bmN0aW9uIEh2KHQsZSl7dmFyIG4scixvLGkscz10LnJvb3Q7aWYocy5jYXJldFBvc2l0aW9uRnJvbVBvaW50KXRyeXt2YXIgYT1zLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTthJiYobj1hLG89bi5vZmZzZXROb2RlLGk9bi5vZmZzZXQpfWNhdGNoKHYpe31pZighbyYmcy5jYXJldFJhbmdlRnJvbVBvaW50KXt2YXIgYz1zLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTtjJiYocj1jLG89ci5zdGFydENvbnRhaW5lcixpPXIuc3RhcnRPZmZzZXQpfXZhciBoLHA9cy5lbGVtZW50RnJvbVBvaW50KGUubGVmdCxlLnRvcCsxKTtpZighcHx8IXQuZG9tLmNvbnRhaW5zKDEhPXAubm9kZVR5cGU/cC5wYXJlbnROb2RlOnApKXt2YXIgdT10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZighSnYoZSx1KSlyZXR1cm4gbnVsbDtpZihwPVd2KHQuZG9tLGUsdSksIXApcmV0dXJuIG51bGx9aWYocD1MdihwLGUpLG8pe2lmKGx2LmdlY2tvJiYxPT1vLm5vZGVUeXBlJiYoaT1NYXRoLm1pbihpLG8uY2hpbGROb2Rlcy5sZW5ndGgpLGk8by5jaGlsZE5vZGVzLmxlbmd0aCkpe3ZhciBmLGw9by5jaGlsZE5vZGVzW2ldOyJJTUciPT1sLm5vZGVOYW1lJiYoZj1sLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS5yaWdodDw9ZS5sZWZ0JiZmLmJvdHRvbT5lLnRvcCYmaSsrfW89PXQuZG9tJiZpPT1vLmNoaWxkTm9kZXMubGVuZ3RoLTEmJjE9PW8ubGFzdENoaWxkLm5vZGVUeXBlJiZlLnRvcD5vLmxhc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20/aD10LnN0YXRlLmRvYy5jb250ZW50LnNpemU6MCE9aSYmMT09by5ub2RlVHlwZSYmIkJSIj09by5jaGlsZE5vZGVzW2ktMV0ubm9kZU5hbWV8fChoPXF2KHQsbyxpLGUpKX1udWxsPT1oJiYoaD1Wdih0LHAsZSkpO3ZhciBkPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhwLCEwKTtyZXR1cm57cG9zOmgsaW5zaWRlOmQ/ZC5wb3NBdFN0YXJ0LWQuYm9yZGVyOi0xfX1mdW5jdGlvbiBLdih0LGUpe3ZhciBuPXQuZ2V0Q2xpZW50UmVjdHMoKTtyZXR1cm4gbi5sZW5ndGg/bltlPDA/MDpuLmxlbmd0aC0xXTp0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIFV2KHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldDtpZigzPT1yLm5vZGVUeXBlJiYobHYud2Via2l0fHxsdi5nZWNrbykpe3ZhciBpPUt2KGJ2KHIsbyxvKSwwKTtpZihsdi5nZWNrbyYmbyYmL1xzLy50ZXN0KHIubm9kZVZhbHVlW28tMV0pJiZvPHIubm9kZVZhbHVlLmxlbmd0aCl7dmFyIHM9S3YoYnYocixvLTEsby0xKSwtMSk7aWYocy50b3A9PWkudG9wKXt2YXIgYT1LdihidihyLG8sbysxKSwtMSk7aWYoYS50b3AhPWkudG9wKXJldHVybiBHdihhLGEubGVmdDxzLmxlZnQpfX1yZXR1cm4gaX1pZigxPT1yLm5vZGVUeXBlJiYhdC5zdGF0ZS5kb2MucmVzb2x2ZShlKS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGMsaD0hMDtpZihvPHIuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBwPXIuY2hpbGROb2Rlc1tvXTsxPT1wLm5vZGVUeXBlJiYoYz1wLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1pZighYyYmbyl7dmFyIHU9ci5jaGlsZE5vZGVzW28tMV07MT09dS5ub2RlVHlwZSYmKGM9dS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxoPSExKX1yZXR1cm4gWHYoY3x8ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxoKX1mb3IodmFyIGY9LTE7ZjwyO2YrPTIpaWYoZjwwJiZvKXt2YXIgbD12b2lkIDAsZD0zPT1yLm5vZGVUeXBlP2J2KHIsby0xLG8pOjM9PShsPXIuY2hpbGROb2Rlc1tvLTFdKS5ub2RlVHlwZT9idihsKToxPT1sLm5vZGVUeXBlJiYiQlIiIT1sLm5vZGVOYW1lP2w6bnVsbDtpZihkKXt2YXIgdj1LdihkLDEpO2lmKHYudG9wPHYuYm90dG9tKXJldHVybiBHdih2LCExKX19ZWxzZSBpZihmPjAmJm88Q3Yocikpe3ZhciBtPXZvaWQgMCx5PTM9PXIubm9kZVR5cGU/YnYocixvLG8rMSk6Mz09KG09ci5jaGlsZE5vZGVzW29dKS5ub2RlVHlwZT9idihtKToxPT1tLm5vZGVUeXBlP206bnVsbDtpZih5KXt2YXIgZz1Ldih5LC0xKTtpZihnLnRvcDxnLmJvdHRvbSlyZXR1cm4gR3YoZywhMCl9fXJldHVybiBHdihLdigzPT1yLm5vZGVUeXBlP2J2KHIpOnIsMCksITEpfWZ1bmN0aW9uIEd2KHQsZSl7aWYoMD09dC53aWR0aClyZXR1cm4gdDt2YXIgbj1lP3QubGVmdDp0LnJpZ2h0O3JldHVybnt0b3A6dC50b3AsYm90dG9tOnQuYm90dG9tLGxlZnQ6bixyaWdodDpufX1mdW5jdGlvbiBYdih0LGUpe2lmKDA9PXQuaGVpZ2h0KXJldHVybiB0O3ZhciBuPWU/dC50b3A6dC5ib3R0b207cmV0dXJue3RvcDpuLGJvdHRvbTpuLGxlZnQ6dC5sZWZ0LHJpZ2h0OnQucmlnaHR9fWZ1bmN0aW9uIFl2KHQsZSxuKXt2YXIgcj10LnN0YXRlLG89dC5yb290LmFjdGl2ZUVsZW1lbnQ7ciE9ZSYmdC51cGRhdGVTdGF0ZShlKSxvIT10LmRvbSYmdC5mb2N1cygpO3RyeXtyZXR1cm4gbigpfWZpbmFsbHl7ciE9ZSYmdC51cGRhdGVTdGF0ZShyKSxvIT10LmRvbSYmby5mb2N1cygpfX1mdW5jdGlvbiBadih0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz0idXAiPT1uP3IuJGFuY2hvci5taW4oci4kaGVhZCk6ci4kYW5jaG9yLm1heChyLiRoZWFkKTtyZXR1cm4gWXYodCxlLChmdW5jdGlvbigpe2Zvcih2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyhvLnBvcykscj1lLm5vZGU7Oyl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHIsITApO2lmKCFpKWJyZWFrO2lmKGkubm9kZS5pc0Jsb2NrKXtyPWkuZG9tO2JyZWFrfXI9aS5kb20ucGFyZW50Tm9kZX1mb3IodmFyIHM9VXYodCxvLnBvcyksYT1yLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe3ZhciBjPXZvaWQgMDtpZigxPT1hLm5vZGVUeXBlKWM9YS5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9YS5ub2RlVHlwZSljb250aW51ZTtjPWJ2KGEsMCxhLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciBoPTA7aDxjLmxlbmd0aDtoKyspe3ZhciBwPWNbaF07aWYocC5ib3R0b20+cC50b3AmJigidXAiPT1uP3AuYm90dG9tPHMudG9wKzE6cC50b3A+cy5ib3R0b20tMSkpcmV0dXJuITF9fXJldHVybiEwfSkpfXZhciBRdj0vW1x1MDU5MC1cdTA4YWNdLztmdW5jdGlvbiB0bSh0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRoZWFkO2lmKCFvLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgaT1vLnBhcmVudE9mZnNldCxzPSFpLGE9aT09by5wYXJlbnQuY29udGVudC5zaXplLGM9Z2V0U2VsZWN0aW9uKCk7cmV0dXJuIFF2LnRlc3Qoby5wYXJlbnQudGV4dENvbnRlbnQpJiZjLm1vZGlmeT9Zdih0LGUsKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRSYW5nZUF0KDApLHI9Yy5mb2N1c05vZGUsaT1jLmZvY3VzT2Zmc2V0LHM9Yy5jYXJldEJpZGlMZXZlbDtjLm1vZGlmeSgibW92ZSIsbiwiY2hhcmFjdGVyIik7dmFyIGE9by5kZXB0aD90LmRvY1ZpZXcuZG9tQWZ0ZXJQb3Moby5iZWZvcmUoKSk6dC5kb20saD0hYS5jb250YWlucygxPT1jLmZvY3VzTm9kZS5ub2RlVHlwZT9jLmZvY3VzTm9kZTpjLmZvY3VzTm9kZS5wYXJlbnROb2RlKXx8cj09Yy5mb2N1c05vZGUmJmk9PWMuZm9jdXNPZmZzZXQ7cmV0dXJuIGMucmVtb3ZlQWxsUmFuZ2VzKCksYy5hZGRSYW5nZShlKSxudWxsIT1zJiYoYy5jYXJldEJpZGlMZXZlbD1zKSxofSkpOiJsZWZ0Ij09bnx8ImJhY2t3YXJkIj09bj9zOmF9dmFyIGVtPW51bGwsbm09bnVsbCxybT0hMTtmdW5jdGlvbiBvbSh0LGUsbil7cmV0dXJuIGVtPT1lJiZubT09bj9ybTooZW09ZSxubT1uLHJtPSJ1cCI9PW58fCJkb3duIj09bj9adih0LGUsbik6dG0odCxlLG4pKX12YXIgaW09MCxzbT0xLGFtPTIsY209MyxobT1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRyZW49ZSx0aGlzLmRvbT1uLG4ucG1WaWV3RGVzYz10aGlzLHRoaXMuY29udGVudERPTT1yLHRoaXMuZGlydHk9aW19LHBtPXtiZWZvcmVQb3NpdGlvbjp7Y29uZmlndXJhYmxlOiEwfSxzaXplOntjb25maWd1cmFibGU6ITB9LGJvcmRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH0scG9zQXRTdGFydDp7Y29uZmlndXJhYmxlOiEwfSxwb3NBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NBdEVuZDp7Y29uZmlndXJhYmxlOiEwfSxjb250ZW50TG9zdDp7Y29uZmlndXJhYmxlOiEwfX07aG0ucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0saG0ucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGhtLnByb3RvdHlwZS5tYXRjaGVzTm9kZT1mdW5jdGlvbigpe3JldHVybiExfSxobS5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4hMX0scG0uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGhtLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saG0ucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbigpe3JldHVybiExfSxwbS5zaXplLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl0Kz10aGlzLmNoaWxkcmVuW2VdLnNpemU7cmV0dXJuIHR9LHBtLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0saG0ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9PXRoaXMmJih0aGlzLmRvbS5wbVZpZXdEZXNjPW51bGwpO2Zvcih2YXIgdD0wO3Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7dCsrKXRoaXMuY2hpbGRyZW5bdF0uZGVzdHJveSgpfSxobS5wcm90b3R5cGUucG9zQmVmb3JlQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBvc0F0U3RhcnQ7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY2hpbGRyZW5bZV07aWYocj09dClyZXR1cm4gbjtuKz1yLnNpemV9fSxwbS5wb3NCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpfSxwbS5wb3NBdFN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnBhcmVudC5wb3NCZWZvcmVDaGlsZCh0aGlzKSt0aGlzLmJvcmRlcjowfSxwbS5wb3NBZnRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NCZWZvcmUrdGhpcy5zaXplfSxwbS5wb3NBdEVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NBdFN0YXJ0K3RoaXMuc2l6ZS0yKnRoaXMuYm9yZGVyfSxobS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKSl7aWYobjwwKXt2YXIgcixvO2lmKHQ9PXRoaXMuY29udGVudERPTSlyPXQuY2hpbGROb2Rlc1tlLTFdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7cj10LnByZXZpb3VzU2libGluZ313aGlsZShyJiYoIShvPXIucG1WaWV3RGVzYyl8fG8ucGFyZW50IT10aGlzKSlyPXIucHJldmlvdXNTaWJsaW5nO3JldHVybiByP3RoaXMucG9zQmVmb3JlQ2hpbGQobykrby5zaXplOnRoaXMucG9zQXRTdGFydH12YXIgaSxzO2lmKHQ9PXRoaXMuY29udGVudERPTSlpPXQuY2hpbGROb2Rlc1tlXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO2k9dC5uZXh0U2libGluZ313aGlsZShpJiYoIShzPWkucG1WaWV3RGVzYyl8fHMucGFyZW50IT10aGlzKSlpPWkubmV4dFNpYmxpbmc7cmV0dXJuIGk/dGhpcy5wb3NCZWZvcmVDaGlsZChzKTp0aGlzLnBvc0F0RW5kfXZhciBhO2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSlhPTImdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmNvbnRlbnRET00pO2Vsc2UgaWYodGhpcy5kb20uZmlyc3RDaGlsZCl7aWYoMD09ZSlmb3IodmFyIGM9dDs7Yz1jLnBhcmVudE5vZGUpe2lmKGM9PXRoaXMuZG9tKXthPSExO2JyZWFrfWlmKGMucGFyZW50Tm9kZS5maXJzdENoaWxkIT1jKWJyZWFrfWlmKG51bGw9PWEmJmU9PXQuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciBoPXQ7O2g9aC5wYXJlbnROb2RlKXtpZihoPT10aGlzLmRvbSl7YT0hMDticmVha31pZihoLnBhcmVudE5vZGUubGFzdENoaWxkIT1oKWJyZWFrfX1yZXR1cm4obnVsbD09YT9uPjA6YSk/dGhpcy5wb3NBdEVuZDp0aGlzLnBvc0F0U3RhcnR9LGhtLnByb3RvdHlwZS5uZWFyZXN0RGVzYz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0hMCxyPXQ7cjtyPXIucGFyZW50Tm9kZSl7dmFyIG89dGhpcy5nZXREZXNjKHIpO2lmKG8mJighZXx8by5ub2RlKSl7aWYoIW58fCFvLm5vZGVET018fCgxPT1vLm5vZGVET00ubm9kZVR5cGU/by5ub2RlRE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpOm8ubm9kZURPTT09dCkpcmV0dXJuIG87bj0hMX19fSxobS5wcm90b3R5cGUuZ2V0RGVzYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wbVZpZXdEZXNjLG49ZTtuO249bi5wYXJlbnQpaWYobj09dGhpcylyZXR1cm4gZX0saG0ucHJvdG90eXBlLnBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10OztyPXIucGFyZW50Tm9kZSl7dmFyIG89dGhpcy5nZXREZXNjKHIpO2lmKG8pcmV0dXJuIG8ubG9jYWxQb3NGcm9tRE9NKHQsZSxuKX19LGhtLnByb3RvdHlwZS5kZXNjQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNoaWxkcmVuW2VdLG89bityLnNpemU7aWYobj09dCYmbyE9bil7d2hpbGUoIXIuYm9yZGVyJiZyLmNoaWxkcmVuLmxlbmd0aClyPXIuY2hpbGRyZW5bMF07cmV0dXJuIHJ9aWYodDxvKXJldHVybiByLmRlc2NBdCh0LW4tci5ib3JkZXIpO249b319LGhtLnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmNvbnRlbnRET00pcmV0dXJue25vZGU6dGhpcy5kb20sb2Zmc2V0OjB9O2Zvcih2YXIgZT0wLG49MDs7bisrKXtpZihlPT10KXt3aGlsZShuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5jaGlsZHJlbltuXS5iZWZvcmVQb3NpdGlvbnx8dGhpcy5jaGlsZHJlbltuXS5kb20ucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKSluKys7cmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLG9mZnNldDpuPT10aGlzLmNoaWxkcmVuLmxlbmd0aD90aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGg6d3YodGhpcy5jaGlsZHJlbltuXS5kb20pfX1pZihuPT10aGlzLmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcG9zaXRpb24gIit0KTt2YXIgcj10aGlzLmNoaWxkcmVuW25dLG89ZStyLnNpemU7aWYodDxvKXJldHVybiByLmRvbUZyb21Qb3ModC1lLXIuYm9yZGVyKTtlPW99fSxobS5wcm90b3R5cGUucGFyc2VSYW5nZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09biYmKG49MCksMD09dGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLGZyb206dCx0bzplLGZyb21PZmZzZXQ6MCx0b09mZnNldDp0aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGh9O2Zvcih2YXIgcj0tMSxvPS0xLGk9bixzPTA7O3MrKyl7dmFyIGE9dGhpcy5jaGlsZHJlbltzXSxjPWkrYS5zaXplO2lmKC0xPT1yJiZ0PD1jKXt2YXIgaD1pK2EuYm9yZGVyO2lmKHQ+PWgmJmU8PWMtYS5ib3JkZXImJmEubm9kZSYmYS5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00uY29udGFpbnMoYS5jb250ZW50RE9NKSlyZXR1cm4gYS5wYXJzZVJhbmdlKHQsZSxoKTt0PWk7Zm9yKHZhciBwPXM7cD4wO3AtLSl7dmFyIHU9dGhpcy5jaGlsZHJlbltwLTFdO2lmKHUuc2l6ZSYmdS5kb20ucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NJiYhdS5lbXB0eUNoaWxkQXQoMSkpe3I9d3YodS5kb20pKzE7YnJlYWt9dC09dS5zaXplfS0xPT1yJiYocj0wKX1pZihyPi0xJiZlPD1jKXtlPWM7Zm9yKHZhciBmPXMrMTtmPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2YrKyl7dmFyIGw9dGhpcy5jaGlsZHJlbltmXTtpZihsLnNpemUmJmwuZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSYmIWwuZW1wdHlDaGlsZEF0KC0xKSl7bz13dihsLmRvbSk7YnJlYWt9ZSs9bC5zaXplfS0xPT1vJiYobz10aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGgpO2JyZWFrfWk9Y31yZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sZnJvbTp0LHRvOmUsZnJvbU9mZnNldDpyLHRvT2Zmc2V0Om99fSxobS5wcm90b3R5cGUuZW1wdHlDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuYm9yZGVyfHwhdGhpcy5jb250ZW50RE9NfHwhdGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7dmFyIGU9dGhpcy5jaGlsZHJlblt0PDA/MDp0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTtyZXR1cm4gMD09ZS5zaXplfHxlLmVtcHR5Q2hpbGRBdCh0KX0saG0ucHJvdG90eXBlLmRvbUFmdGVyUG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tRnJvbVBvcyh0KSxuPWUubm9kZSxyPWUub2Zmc2V0O2lmKDEhPW4ubm9kZVR5cGV8fHI9PW4uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYWZ0ZXIgcG9zICIrdCk7cmV0dXJuIG4uY2hpbGROb2Rlc1tyXX0saG0ucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89TWF0aC5taW4odCxlKSxpPU1hdGgubWF4KHQsZSkscz0wLGE9MDtzPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3MrKyl7dmFyIGM9dGhpcy5jaGlsZHJlbltzXSxoPWErYy5zaXplO2lmKG8+YSYmaTxoKXJldHVybiBjLnNldFNlbGVjdGlvbih0LWEtYy5ib3JkZXIsZS1hLWMuYm9yZGVyLG4scik7YT1ofXZhciBwPXRoaXMuZG9tRnJvbVBvcyh0KSx1PXRoaXMuZG9tRnJvbVBvcyhlKSxmPW4uZ2V0U2VsZWN0aW9uKCk7aWYocnx8IWt2KHAubm9kZSxwLm9mZnNldCxmLmFuY2hvck5vZGUsZi5hbmNob3JPZmZzZXQpfHwha3YodS5ub2RlLHUub2Zmc2V0LGYuZm9jdXNOb2RlLGYuZm9jdXNPZmZzZXQpKXt2YXIgbD0hMTtpZihmLmV4dGVuZHx8dD09ZSl7Zi5jb2xsYXBzZShwLm5vZGUscC5vZmZzZXQpO3RyeXt0IT1lJiZmLmV4dGVuZCh1Lm5vZGUsdS5vZmZzZXQpLGw9ITB9Y2F0Y2gobSl7aWYoIShtIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSl0aHJvdyBtfX1pZighbCl7aWYodD5lKXt2YXIgZD1wO3A9dSx1PWR9dmFyIHY9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTt2LnNldEVuZCh1Lm5vZGUsdS5vZmZzZXQpLHYuc2V0U3RhcnQocC5ub2RlLHAub2Zmc2V0KSxmLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2Uodil9fX0saG0ucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNvbnRlbnRET00mJiJzZWxlY3Rpb24iIT10LnR5cGV9LHBtLmNvbnRlbnRMb3N0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTSE9dGhpcy5kb20mJiF0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pfSxobS5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj0wO3I8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cisrKXt2YXIgbz10aGlzLmNoaWxkcmVuW3JdLGk9bitvLnNpemU7aWYobj09aT90PD1pJiZlPj1uOnQ8aSYmZT5uKXt2YXIgcz1uK28uYm9yZGVyLGE9aS1vLmJvcmRlcjtpZih0Pj1zJiZlPD1hKXJldHVybiB0aGlzLmRpcnR5PXQ9PW58fGU9PWk/YW06c20sdm9pZCh0IT1zfHxlIT1hfHwhby5jb250ZW50TG9zdCYmby5kb20ucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NP28ubWFya0RpcnR5KHQtcyxlLXMpOm8uZGlydHk9Y20pO28uZGlydHk9Y219bj1pfXRoaXMuZGlydHk9YW19LGhtLnByb3RvdHlwZS5tYXJrUGFyZW50c0RpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTEsZT10aGlzLnBhcmVudDtlO2U9ZS5wYXJlbnQsdCsrKXt2YXIgbj0xPT10P2FtOnNtO2UuZGlydHk8biYmKGUuZGlydHk9bil9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhobS5wcm90b3R5cGUscG0pO3ZhciB1bT1bXSxmbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3ZhciBpLHM9bi50eXBlLnRvRE9NO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBzJiYocz1zKHIsKGZ1bmN0aW9uKCl7cmV0dXJuIGk/aS5wYXJlbnQ/aS5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoaSk6dm9pZCAwOm99KSkpLCFuLnR5cGUuc3BlYy5yYXcpe2lmKDEhPXMubm9kZVR5cGUpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTthLmFwcGVuZENoaWxkKHMpLHM9YX1zLmNvbnRlbnRFZGl0YWJsZT0hMSxzLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXdpZGdldCIpfXQuY2FsbCh0aGlzLGUsdW0scyxudWxsKSx0aGlzLndpZGdldD1uLGk9dGhpc310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17YmVmb3JlUG9zaXRpb246e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLmJlZm9yZVBvc2l0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpZGdldC50eXBlLnNpZGU8MH0sZS5wcm90b3R5cGUubWF0Y2hlc1dpZGdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXJ0eT09aW0mJnQudHlwZS5lcSh0aGlzLndpZGdldC50eXBlKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZGdldC5zcGVjLnN0b3BFdmVudDtyZXR1cm4hIWUmJmUodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJzZWxlY3Rpb24iIT10LnR5cGV8fHRoaXMud2lkZ2V0LnNwZWMuaWdub3JlU2VsZWN0aW9ufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShobSksbG09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLHVtLG4sbnVsbCksdGhpcy50ZXh0RE9NPXIsdGhpcy50ZXh0PW99dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUpe3JldHVybiB0IT10aGlzLnRleHRET00/dGhpcy5wb3NBdFN0YXJ0KyhlP3RoaXMuc2l6ZTowKTp0aGlzLnBvc0F0U3RhcnQrZX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLnRleHRET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSI9PT10LnR5cGUmJnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oaG0pLGRtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixvKXt2YXIgaT1vLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scz1pJiZpKG4sbyxyKTtyZXR1cm4gcyYmcy5kb218fChzPVVsLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obixyKSkpLG5ldyBlKHQsbixzLmRvbSxzLmNvbnRlbnRET018fHMuZG9tKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue21hcms6dGhpcy5tYXJrLnR5cGUubmFtZSxhdHRyczp0aGlzLm1hcmsuYXR0cnMsY29udGVudEVsZW1lbnQ6dGhpcy5jb250ZW50RE9NfX0sZS5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHkhPWNtJiZ0aGlzLm1hcmsuZXEodCl9LGUucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbihlLG4pe2lmKHQucHJvdG90eXBlLm1hcmtEaXJ0eS5jYWxsKHRoaXMsZSxuKSx0aGlzLmRpcnR5IT1pbSl7dmFyIHI9dGhpcy5wYXJlbnQ7d2hpbGUoIXIubm9kZSlyPXIucGFyZW50O3IuZGlydHk8dGhpcy5kaXJ0eSYmKHIuZGlydHk9dGhpcy5kaXJ0eSksdGhpcy5kaXJ0eT1pbX19LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsbixyKXt2YXIgbz1lLmNyZWF0ZSh0aGlzLnBhcmVudCx0aGlzLm1hcmssITAsciksaT10aGlzLmNoaWxkcmVuLHM9dGhpcy5zaXplO248cyYmKGk9Qm0oaSxuLHMscikpLHQ+MCYmKGk9Qm0oaSwwLHQscikpO2Zvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSsrKWlbYV0ucGFyZW50PW87cmV0dXJuIG8uY2hpbGRyZW49aSxvfSxlfShobSksdm09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsaCl7dC5jYWxsKHRoaXMsZSxuLmlzTGVhZj91bTpbXSxpLHMpLHRoaXMubm9kZURPTT1hLHRoaXMubm9kZT1uLHRoaXMub3V0ZXJEZWNvPXIsdGhpcy5pbm5lckRlY289byxzJiZ0aGlzLnVwZGF0ZUNoaWxkcmVuKGMsaCl9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH0sYm9yZGVyOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5jcmVhdGU9ZnVuY3Rpb24odCxuLHIsbyxpLHMpe3ZhciBhLGMsaD1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scD1oJiZoKG4saSwoZnVuY3Rpb24oKXtyZXR1cm4gYz9jLnBhcmVudD9jLnBhcmVudC5wb3NCZWZvcmVDaGlsZChjKTp2b2lkIDA6c30pLHIpLHU9cCYmcC5kb20sZj1wJiZwLmNvbnRlbnRET007aWYobi5pc1RleHQpaWYodSl7aWYoMyE9dS5ub2RlVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGV4dCBtdXN0IGJlIHJlbmRlcmVkIGFzIGEgRE9NIHRleHQgbm9kZSIpfWVsc2UgdT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuLnRleHQpO2Vsc2UgdXx8KGE9VWwucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuKSksdT1hLmRvbSxmPWEuY29udGVudERPTSk7Znx8bi5pc1RleHR8fCJCUiI9PXUubm9kZU5hbWV8fCh1Lmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fCh1LmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYodS5kcmFnZ2FibGU9ITApKTt2YXIgbD11O3JldHVybiB1PU1tKHUscixuKSxwP2M9bmV3IHdtKHQsbixyLG8sdSxmLGwscCxpLHMrMSk6bi5pc1RleHQ/bmV3IHltKHQsbixyLG8sdSxsLGkpOm5ldyBlKHQsbixyLG8sdSxmLGwsaSxzKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP05mLmVtcHR5OnQubm9kZS5jb250ZW50fSxlfSxlLnByb3RvdHlwZS5tYXRjaGVzTm9kZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuZGlydHk9PWltJiZ0LmVxKHRoaXMubm9kZSkmJlRtKGUsdGhpcy5vdXRlckRlY28pJiZuLmVxKHRoaXMuaW5uZXJEZWNvKX0sbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVNpemV9LG4uYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuaXNMZWFmPzA6MX0sZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5ub2RlLmlubGluZUNvbnRlbnQsbz1lLGk9ciYmdC5jb21wb3NpbmcmJnRoaXMubG9jYWxDb21wb3NpdGlvbk5vZGUodCxlKSxzPW5ldyBFbSh0aGlzLGkmJmkubm9kZSk7em0odGhpcy5ub2RlLHRoaXMuaW5uZXJEZWNvLChmdW5jdGlvbihlLGksYSl7ZS5zcGVjLm1hcmtzP3Muc3luY1RvTWFya3MoZS5zcGVjLm1hcmtzLHIsdCk6ZS50eXBlLnNpZGU+PTAmJiFhJiZzLnN5bmNUb01hcmtzKGk9PW4ubm9kZS5jaGlsZENvdW50P0RmLm5vbmU6bi5ub2RlLmNoaWxkKGkpLm1hcmtzLHIsdCkscy5wbGFjZVdpZGdldChlLHQsbyl9KSwoZnVuY3Rpb24oZSxuLGksYSl7cy5zeW5jVG9NYXJrcyhlLm1hcmtzLHIsdCkscy5maW5kTm9kZU1hdGNoKGUsbixpLGEpfHxzLnVwZGF0ZU5leHROb2RlKGUsbixpLHQsYSl8fHMuYWRkTm9kZShlLG4saSx0LG8pLG8rPWUubm9kZVNpemV9KSkscy5zeW5jVG9NYXJrcyh1bSxyLHQpLHRoaXMubm9kZS5pc1RleHRibG9jayYmcy5hZGRUZXh0YmxvY2tIYWNrcygpLHMuZGVzdHJveVJlc3QoKSwocy5jaGFuZ2VkfHx0aGlzLmRpcnR5PT1hbSkmJihpJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQsaSksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXt4bSh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbiksbHYuaW9zJiZEbSh0aGlzLmRvbSl9LGUucHJvdG90eXBlLmxvY2FsQ29tcG9zaXRpb25Ob2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLmZyb20sbz1uLnRvO2lmKCEoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIFZkKXx8cjxlfHxvPmUrdGhpcy5ub2RlLmNvbnRlbnQuc2l6ZSkpe3ZhciBpPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxzPUltKGkuZm9jdXNOb2RlLGkuZm9jdXNPZmZzZXQpO2lmKHMmJnRoaXMuZG9tLmNvbnRhaW5zKHMucGFyZW50Tm9kZSkpe3ZhciBhPXMubm9kZVZhbHVlLGM9UG0odGhpcy5ub2RlLmNvbnRlbnQsYSxyLWUsby1lKTtyZXR1cm4gYzwwP251bGw6e25vZGU6cyxwb3M6Yyx0ZXh0OmF9fX19LGUucHJvdG90eXBlLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5ub2RlLHI9ZS5wb3Msbz1lLnRleHQ7aWYoIXRoaXMuZ2V0RGVzYyhuKSl7Zm9yKHZhciBpPW47O2k9aS5wYXJlbnROb2RlKXtpZihpLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSlicmVhazt3aGlsZShpLnByZXZpb3VzU2libGluZylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaS5wcmV2aW91c1NpYmxpbmcpO3doaWxlKGkubmV4dFNpYmxpbmcpaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkubmV4dFNpYmxpbmcpO2kucG1WaWV3RGVzYyYmKGkucG1WaWV3RGVzYz1udWxsKX12YXIgcz1uZXcgbG0odGhpcyxpLG4sbyk7dC5jb21wb3NpdGlvbk5vZGVzLnB1c2gocyksdGhpcy5jaGlsZHJlbj1CbSh0aGlzLmNoaWxkcmVuLHIscitvLmxlbmd0aCx0LHMpfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiEodGhpcy5kaXJ0eT09Y218fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZUlubmVyKHQsZSxuLHIpLCEwKX0sZS5wcm90b3R5cGUudXBkYXRlSW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5ub2RlPXQsdGhpcy5pbm5lckRlY289bix0aGlzLmNvbnRlbnRET00mJnRoaXMudXBkYXRlQ2hpbGRyZW4ocix0aGlzLnBvc0F0U3RhcnQpLHRoaXMuZGlydHk9aW19LGUucHJvdG90eXBlLnVwZGF0ZU91dGVyRGVjbz1mdW5jdGlvbih0KXtpZighVG0odCx0aGlzLm91dGVyRGVjbykpe3ZhciBlPTEhPXRoaXMubm9kZURPTS5ub2RlVHlwZSxuPXRoaXMuZG9tO3RoaXMuZG9tPU9tKHRoaXMuZG9tLHRoaXMubm9kZURPTSxTbSh0aGlzLm91dGVyRGVjbyx0aGlzLm5vZGUsZSksU20odCx0aGlzLm5vZGUsZSkpLHRoaXMuZG9tIT1uJiYobi5wbVZpZXdEZXNjPW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz10aGlzKSx0aGlzLm91dGVyRGVjbz10fX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8KHRoaXMuZG9tLmRyYWdnYWJsZT0hMCl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8dGhpcy5kb20ucmVtb3ZlQXR0cmlidXRlKCJkcmFnZ2FibGUiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oaG0pO2Z1bmN0aW9uIG1tKHQsZSxuLHIsbyl7cmV0dXJuIE1tKHIsZSx0KSxuZXcgdm0obnVsbCx0LGUsbixyLHIscixvLDApfXZhciB5bT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxudWxsLHMsYSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntza2lwOnRoaXMubm9kZURPTS5wYXJlbnROb2RlfHwhMH19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiEodGhpcy5kaXJ0eT09Y218fHRoaXMuZGlydHkhPWltJiYhdGhpcy5pblBhcmVudCgpfHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5kaXJ0eT09aW0mJnQudGV4dD09dGhpcy5ub2RlLnRleHR8fHQudGV4dD09dGhpcy5ub2RlRE9NLm5vZGVWYWx1ZXx8KHRoaXMubm9kZURPTS5ub2RlVmFsdWU9dC50ZXh0KSx0aGlzLm5vZGU9dCx0aGlzLmRpcnR5PWltLCEwKX0sZS5wcm90b3R5cGUuaW5QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQuY29udGVudERPTSxlPXRoaXMubm9kZURPTTtlO2U9ZS5wYXJlbnROb2RlKWlmKGU9PXQpcmV0dXJuITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy5ub2RlRE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gZT09dGhpcy5ub2RlRE9NP3RoaXMucG9zQXRTdGFydCtNYXRoLm1pbihuLHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk6dC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIiE9dC50eXBlJiYic2VsZWN0aW9uIiE9dC50eXBlfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89dGhpcy5ub2RlLmN1dCh0LG4pLGk9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KTtyZXR1cm4gbmV3IGUodGhpcy5wYXJlbnQsbyx0aGlzLm91dGVyRGVjbyx0aGlzLmlubmVyRGVjbyxpLGkscil9LGV9KHZtKSxnbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcnR5PT1pbX0sZX0oaG0pLHdtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSxjLGgscCl7dC5jYWxsKHRoaXMsZSxuLHIsbyxpLHMsYSxoLHApLHRoaXMuc3BlYz1jfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSxuLHIsbyl7aWYodGhpcy5kaXJ0eT09Y20pcmV0dXJuITE7aWYodGhpcy5zcGVjLnVwZGF0ZSl7dmFyIGk9dGhpcy5zcGVjLnVwZGF0ZShlLG4pO3JldHVybiBpJiZ0aGlzLnVwZGF0ZUlubmVyKGUsbixyLG8pLGl9cmV0dXJuISghdGhpcy5jb250ZW50RE9NJiYhZS5pc0xlYWYpJiZ0LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5zZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLnNlbGVjdE5vZGU/dGhpcy5zcGVjLnNlbGVjdE5vZGUoKTp0LnByb3RvdHlwZS5zZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMuc3BlYy5kZXNlbGVjdE5vZGU/dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLmRlc2VsZWN0Tm9kZS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oZSxuLHIsbyl7dGhpcy5zcGVjLnNldFNlbGVjdGlvbj90aGlzLnNwZWMuc2V0U2VsZWN0aW9uKGUsbixyKTp0LnByb3RvdHlwZS5zZXRTZWxlY3Rpb24uY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc3Ryb3kmJnRoaXMuc3BlYy5kZXN0cm95KCksdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnNwZWMuc3RvcEV2ZW50JiZ0aGlzLnNwZWMuc3RvcEV2ZW50KHQpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uP3RoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbihlKTp0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbi5jYWxsKHRoaXMsZSl9LGV9KHZtKTtmdW5jdGlvbiB4bSh0LGUpe2Zvcih2YXIgbj10LmZpcnN0Q2hpbGQscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9by5kb207aWYoaS5wYXJlbnROb2RlPT10KXt3aGlsZShpIT1uKW49Tm0obik7bj1uLm5leHRTaWJsaW5nfWVsc2UgdC5pbnNlcnRCZWZvcmUoaSxuKTtpZihvIGluc3RhbmNlb2YgZG0pe3ZhciBzPW4/bi5wcmV2aW91c1NpYmxpbmc6dC5sYXN0Q2hpbGQ7eG0oby5jb250ZW50RE9NLG8uY2hpbGRyZW4pLG49cz9zLm5leHRTaWJsaW5nOnQuZmlyc3RDaGlsZH19d2hpbGUobiluPU5tKG4pfWZ1bmN0aW9uIGJtKHQpe3QmJih0aGlzLm5vZGVOYW1lPXQpfWJtLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBrbT1bbmV3IGJtXTtmdW5jdGlvbiBTbSh0LGUsbil7aWYoMD09dC5sZW5ndGgpcmV0dXJuIGttO2Zvcih2YXIgcj1uP2ttWzBdOm5ldyBibSxvPVtyXSxpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBzPXRbaV0udHlwZS5hdHRycyxhPXI7aWYocylmb3IodmFyIGMgaW4gcy5ub2RlTmFtZSYmby5wdXNoKGE9bmV3IGJtKHMubm9kZU5hbWUpKSxzKXt2YXIgaD1zW2NdO251bGwhPWgmJihuJiYxPT1vLmxlbmd0aCYmby5wdXNoKGE9cj1uZXcgYm0oZS5pc0lubGluZT8ic3BhbiI6ImRpdiIpKSwiY2xhc3MiPT1jP2EuY2xhc3M9KGEuY2xhc3M/YS5jbGFzcysiICI6IiIpK2g6InN0eWxlIj09Yz9hLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrIjsiOiIiKStoOiJub2RlTmFtZSIhPWMmJihhW2NdPWgpKX19cmV0dXJuIG99ZnVuY3Rpb24gT20odCxlLG4scil7aWYobj09a20mJnI9PWttKXJldHVybiBlO2Zvcih2YXIgbz1lLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9cltpXSxhPW5baV07aWYoaSl7dmFyIGM9dm9pZCAwO2EmJmEubm9kZU5hbWU9PXMubm9kZU5hbWUmJm8hPXQmJihjPW8ucGFyZW50Tm9kZSkmJmMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1zLm5vZGVOYW1lfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHMubm9kZU5hbWUpLGMuYXBwZW5kQ2hpbGQobyksYT1rbVswXSksbz1jfUNtKG8sYXx8a21bMF0scyl9cmV0dXJuIG99ZnVuY3Rpb24gQ20odCxlLG4pe2Zvcih2YXIgciBpbiBlKSJjbGFzcyI9PXJ8fCJzdHlsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fHIgaW4gbnx8dC5yZW1vdmVBdHRyaWJ1dGUocik7Zm9yKHZhciBvIGluIG4pImNsYXNzIiE9byYmInN0eWxlIiE9byYmIm5vZGVOYW1lIiE9byYmbltvXSE9ZVtvXSYmdC5zZXRBdHRyaWJ1dGUobyxuW29dKTtpZihlLmNsYXNzIT1uLmNsYXNzKXtmb3IodmFyIGk9ZS5jbGFzcz9lLmNsYXNzLnNwbGl0KCIgIik6dW0scz1uLmNsYXNzP24uY2xhc3Muc3BsaXQoIiAiKTp1bSxhPTA7YTxpLmxlbmd0aDthKyspLTE9PXMuaW5kZXhPZihpW2FdKSYmdC5jbGFzc0xpc3QucmVtb3ZlKGlbYV0pO2Zvcih2YXIgYz0wO2M8cy5sZW5ndGg7YysrKS0xPT1pLmluZGV4T2Yoc1tjXSkmJnQuY2xhc3NMaXN0LmFkZChzW2NdKX1pZihlLnN0eWxlIT1uLnN0eWxlKXtpZihlLnN0eWxlKXt2YXIgaCxwPS9ccyooW1x3XC1ceGExLVx1ZmZmZl0rKVxzKjooPzoiKD86XFwufFteIl0pKiJ8Jyg/OlxcLnxbXiddKSonfFwoLio/XCl8W147XSkqL2c7d2hpbGUoaD1wLmV4ZWMoZS5zdHlsZSkpdC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShoWzFdKX1uLnN0eWxlJiYodC5zdHlsZS5jc3NUZXh0Kz1uLnN0eWxlKX19ZnVuY3Rpb24gTW0odCxlLG4pe3JldHVybiBPbSh0LHQsa20sU20oZSxuLDEhPXQubm9kZVR5cGUpKX1mdW5jdGlvbiBUbSh0LGUpe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS50eXBlLmVxKGVbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gTm0odCl7dmFyIGU9dC5uZXh0U2libGluZztyZXR1cm4gdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLGV9dmFyIEVtPWZ1bmN0aW9uKHQsZSl7dGhpcy50b3A9dCx0aGlzLmxvY2s9ZSx0aGlzLmluZGV4PTAsdGhpcy5zdGFjaz1bXSx0aGlzLmNoYW5nZWQ9ITE7dmFyIG49QW0odC5ub2RlLmNvbnRlbnQsdC5jaGlsZHJlbik7dGhpcy5wcmVNYXRjaGVkPW4ubm9kZXMsdGhpcy5wcmVNYXRjaE9mZnNldD1uLm9mZnNldH07ZnVuY3Rpb24gQW0odCxlKXtmb3IodmFyIG49W10scj10LmNoaWxkQ291bnQsbz1lLmxlbmd0aC0xO3I+MCYmbz49MDtvLS0pe3ZhciBpPWVbb10scz1pLm5vZGU7aWYocyl7aWYocyE9dC5jaGlsZChyLTEpKWJyZWFrO24ucHVzaChpKSwtLXJ9fXJldHVybntub2RlczpuLnJldmVyc2UoKSxvZmZzZXQ6cn19ZnVuY3Rpb24gUm0odCxlKXtyZXR1cm4gdC50eXBlLnNpZGUtZS50eXBlLnNpZGV9ZnVuY3Rpb24gem0odCxlLG4scil7dmFyIG89ZS5sb2NhbHModCksaT0wO2lmKDAhPW8ubGVuZ3RoKWZvcih2YXIgcz0wLGE9W10sYz1udWxsLGg9MDs7KXtpZihzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKXt2YXIgcD1vW3MrK10sdT12b2lkIDA7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS50bz09aSkodXx8KHU9W3BdKSkucHVzaChvW3MrK10pO2lmKHUpe3Uuc29ydChSbSk7Zm9yKHZhciBmPTA7Zjx1Lmxlbmd0aDtmKyspbih1W2ZdLGgsISFjKX1lbHNlIG4ocCxoLCEhYyl9dmFyIGw9dm9pZCAwLGQ9dm9pZCAwO2lmKGMpZD0tMSxsPWMsYz1udWxsO2Vsc2V7aWYoIShoPHQuY2hpbGRDb3VudCkpYnJlYWs7ZD1oLGw9dC5jaGlsZChoKyspfWZvcih2YXIgdj0wO3Y8YS5sZW5ndGg7disrKWFbdl0udG88PWkmJmEuc3BsaWNlKHYtLSwxKTt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLmZyb209PWkpYS5wdXNoKG9bcysrXSk7dmFyIG09aStsLm5vZGVTaXplO2lmKGwuaXNUZXh0KXt2YXIgeT1tO3M8by5sZW5ndGgmJm9bc10uZnJvbTx5JiYoeT1vW3NdLmZyb20pO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWFbZ10udG88eSYmKHk9YVtnXS50byk7eTxtJiYoYz1sLmN1dCh5LWkpLGw9bC5jdXQoMCx5LWkpLG09eSxkPS0xKX1yKGwsYS5sZW5ndGg/YS5zbGljZSgpOnVtLGUuZm9yQ2hpbGQoaSxsKSxkKSxpPW19ZWxzZSBmb3IodmFyIHc9MDt3PHQuY2hpbGRDb3VudDt3Kyspe3ZhciB4PXQuY2hpbGQodyk7cih4LG8sZS5mb3JDaGlsZChpLHgpLHcpLGkrPXgubm9kZVNpemV9fWZ1bmN0aW9uIERtKHQpe2lmKCJVTCI9PXQubm9kZU5hbWV8fCJPTCI9PXQubm9kZU5hbWUpe3ZhciBlPXQuc3R5bGUuY3NzVGV4dDt0LnN0eWxlLmNzc1RleHQ9ZSsiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudCIsd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkubGlzdFN0eWxlLHQuc3R5bGUuY3NzVGV4dD1lfX1mdW5jdGlvbiBJbSh0LGUpe2Zvcig7Oyl7aWYoMz09dC5ub2RlVHlwZSlyZXR1cm4gdDtpZigxPT10Lm5vZGVUeXBlJiZlPjApe2lmKHQuY2hpbGROb2Rlcy5sZW5ndGg+ZSYmMz09dC5jaGlsZE5vZGVzW2VdLm5vZGVUeXBlKXJldHVybiB0LmNoaWxkTm9kZXNbZV07dD10LmNoaWxkTm9kZXNbZS0xXSxlPUN2KHQpfWVsc2V7aWYoISgxPT10Lm5vZGVUeXBlJiZlPHQuY2hpbGROb2Rlcy5sZW5ndGgpKXJldHVybiBudWxsO3Q9dC5jaGlsZE5vZGVzW2VdLGU9MH19fWZ1bmN0aW9uIFBtKHQsZSxuLHIpe2Zvcih2YXIgbz0wLGk9MDtvPHQuY2hpbGRDb3VudCYmaTw9cjspe3ZhciBzPXQuY2hpbGQobysrKSxhPWk7aWYoaSs9cy5ub2RlU2l6ZSxzLmlzVGV4dCl7dmFyIGM9cy50ZXh0O3doaWxlKG88dC5jaGlsZENvdW50KXt2YXIgaD10LmNoaWxkKG8rKyk7aWYoaSs9aC5ub2RlU2l6ZSwhaC5pc1RleHQpYnJlYWs7Yys9aC50ZXh0fWlmKGk+PW4pe3ZhciBwPWMubGFzdEluZGV4T2YoZSxyLWEpO2lmKHA+PTAmJnArZS5sZW5ndGgrYT49bilyZXR1cm4gYStwfX19cmV0dXJuLTF9ZnVuY3Rpb24gQm0odCxlLG4scixvKXtmb3IodmFyIGk9W10scz0wLGE9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGM9dFtzXSxoPWEscD1hKz1jLnNpemU7aD49bnx8cDw9ZT9pLnB1c2goYyk6KGg8ZSYmaS5wdXNoKGMuc2xpY2UoMCxlLWgscikpLG8mJihpLnB1c2gobyksbz1udWxsKSxwPm4mJmkucHVzaChjLnNsaWNlKG4taCxjLnNpemUscikpKX1yZXR1cm4gaX1mdW5jdGlvbiBGbSh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kYW5jaG9yLG89bi4kaGVhZCxpPWU+MD9yLm1heChvKTpyLm1pbihvKSxzPWkucGFyZW50LmlubGluZUNvbnRlbnQ/aS5kZXB0aD90LmRvYy5yZXNvbHZlKGU+MD9pLmFmdGVyKCk6aS5iZWZvcmUoKSk6bnVsbDppO3JldHVybiBzJiYkZC5maW5kRnJvbShzLGUpfWZ1bmN0aW9uIGptKHQsZSl7cmV0dXJuIHQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZSkuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24gX20odCxlLG4pe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uO2lmKHIgaW5zdGFuY2VvZiBWZCl7aWYoIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJyaWdodCI6ImxlZnQiKSl7dmFyIG89Rm0odC5zdGF0ZSxlKTtyZXR1cm4hIShvJiZvIGluc3RhbmNlb2YgV2QpJiZqbSh0LG8pfXZhciBpLHM9ci4kaGVhZCxhPXMudGV4dE9mZnNldD9udWxsOmU8MD9zLm5vZGVCZWZvcmU6cy5ub2RlQWZ0ZXI7aWYoIWF8fGEuaXNUZXh0KXJldHVybiExO3ZhciBjPWU8MD9zLnBvcy1hLm5vZGVTaXplOnMucG9zO3JldHVybiEhKGEuaXNBdG9tfHwoaT10LmRvY1ZpZXcuZGVzY0F0KGMpKSYmIWkuY29udGVudERPTSkmJihXZC5pc1NlbGVjdGFibGUoYSk/am0odCxuZXcgV2QoZTwwP3Quc3RhdGUuZG9jLnJlc29sdmUocy5wb3MtYS5ub2RlU2l6ZSk6cykpOiEhbHYud2Via2l0JiZqbSh0LG5ldyBWZCh0LnN0YXRlLmRvYy5yZXNvbHZlKGU8MD9jOmMrYS5ub2RlU2l6ZSkpKSl9aWYociBpbnN0YW5jZW9mIFdkJiZyLm5vZGUuaXNJbmxpbmUpcmV0dXJuIGptKHQsbmV3IFZkKGU+MD9yLiR0bzpyLiRmcm9tKSk7dmFyIGg9Rm0odC5zdGF0ZSxlKTtyZXR1cm4hIWgmJmptKHQsaCl9ZnVuY3Rpb24gJG0odCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gSm0odCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiYwPT1lLnNpemUmJih0Lm5leHRTaWJsaW5nfHwiQlIiIT10Lm5vZGVOYW1lKX1mdW5jdGlvbiBMbSh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7dmFyIG8saSxzPSExO2Zvcihsdi5nZWNrbyYmMT09bi5ub2RlVHlwZSYmcjwkbShuKSYmSm0obi5jaGlsZE5vZGVzW3JdKSYmKHM9ITApOzspaWYocj4wKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyLTFdO2lmKEptKGEpKW89bixpPS0tcjtlbHNle2lmKDMhPWEubm9kZVR5cGUpYnJlYWs7bj1hLHI9bi5ub2RlVmFsdWUubGVuZ3RofX1lbHNle2lmKHFtKG4pKWJyZWFrO3ZhciBjPW4ucHJldmlvdXNTaWJsaW5nO3doaWxlKGMmJkptKGMpKW89bi5wYXJlbnROb2RlLGk9d3YoYyksYz1jLnByZXZpb3VzU2libGluZztpZihjKW49YyxyPSRtKG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj0wfX1zP1dtKHQsZSxuLHIpOm8mJldtKHQsZSxvLGkpfX1mdW5jdGlvbiBWbSh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7Zm9yKHZhciBvLGkscz0kbShuKTs7KWlmKHI8cyl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYT1uLmNoaWxkTm9kZXNbcl07aWYoIUptKGEpKWJyZWFrO289bixpPSsrcn1lbHNle2lmKHFtKG4pKWJyZWFrO3ZhciBjPW4ubmV4dFNpYmxpbmc7d2hpbGUoYyYmSm0oYykpbz1jLnBhcmVudE5vZGUsaT13dihjKSsxLGM9Yy5uZXh0U2libGluZztpZihjKW49YyxyPTAscz0kbShuKTtlbHNle2lmKG49bi5wYXJlbnROb2RlLG49PXQuZG9tKWJyZWFrO3I9cz0wfX1vJiZXbSh0LGUsbyxpKX19ZnVuY3Rpb24gcW0odCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrfWZ1bmN0aW9uIFdtKHQsZSxuLHIpe2lmKE52KGUpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0RW5kKG4sciksby5zZXRTdGFydChuLHIpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShvKX1lbHNlIGUuZXh0ZW5kJiZlLmV4dGVuZChuLHIpO3QuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCl9ZnVuY3Rpb24gSG0odCxlLG4pe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uO2lmKHIgaW5zdGFuY2VvZiBWZCYmIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO3ZhciBvPXIuJGZyb20saT1yLiR0bztpZighby5wYXJlbnQuaW5saW5lQ29udGVudHx8dC5lbmRPZlRleHRibG9jayhlPDA/InVwIjoiZG93biIpKXt2YXIgcz1GbSh0LnN0YXRlLGUpO2lmKHMmJnMgaW5zdGFuY2VvZiBXZClyZXR1cm4gam0odCxzKX1pZighby5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGE9JGQuZmluZEZyb20oZTwwP286aSxlKTtyZXR1cm4hYXx8am0odCxhKX1yZXR1cm4hMX1mdW5jdGlvbiBLbSh0LGUpe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBWZCkpcmV0dXJuITA7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLiRoZWFkLG89bi4kYW5jaG9yLGk9bi5lbXB0eTtpZighci5zYW1lUGFyZW50KG8pKXJldHVybiEwO2lmKCFpKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJmb3J3YXJkIjoiYmFja3dhcmQiKSlyZXR1cm4hMDt2YXIgcz0hci50ZXh0T2Zmc2V0JiYoZTwwP3Iubm9kZUJlZm9yZTpyLm5vZGVBZnRlcik7aWYocyYmIXMuaXNUZXh0KXt2YXIgYT10LnN0YXRlLnRyO3JldHVybiBlPDA/YS5kZWxldGUoci5wb3Mtcy5ub2RlU2l6ZSxyLnBvcyk6YS5kZWxldGUoci5wb3Msci5wb3Mrcy5ub2RlU2l6ZSksdC5kaXNwYXRjaChhKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBVbSh0LGUsbil7dC5kb21PYnNlcnZlci5zdG9wKCksZS5jb250ZW50RWRpdGFibGU9bix0LmRvbU9ic2VydmVyLnN0YXJ0KCl9ZnVuY3Rpb24gR20odCl7aWYobHYuY2hyb21lJiYhKHQuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldD4wKSl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4mJjE9PW4ubm9kZVR5cGUmJjA9PXImJm4uZmlyc3RDaGlsZCYmImZhbHNlIj09bi5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSl7dmFyIG89bi5maXJzdENoaWxkO1VtKHQsbywhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gVW0odCxvLCExKX0pLDIwKX19fWZ1bmN0aW9uIFhtKHQpe3ZhciBlPSIiO3JldHVybiB0LmN0cmxLZXkmJihlKz0iYyIpLHQubWV0YUtleSYmKGUrPSJtIiksdC5hbHRLZXkmJihlKz0iYSIpLHQuc2hpZnRLZXkmJihlKz0icyIpLGV9ZnVuY3Rpb24gWW0odCxlKXt2YXIgbj1lLmtleUNvZGUscj1YbShlKTtyZXR1cm4gOD09bnx8bHYubWFjJiY3Mj09biYmImMiPT1yP0ttKHQsLTEpfHxMbSh0KTo0Nj09bnx8bHYubWFjJiY2OD09biYmImMiPT1yP0ttKHQsMSl8fFZtKHQpOjEzPT1ufHwyNz09bnx8KDM3PT1uP19tKHQsLTEscil8fExtKHQpOjM5PT1uP19tKHQsMSxyKXx8Vm0odCk6Mzg9PW4/SG0odCwtMSxyKXx8TG0odCk6NDA9PW4/R20odCl8fEhtKHQsMSxyKXx8Vm0odCk6cj09KGx2Lm1hYz8ibSI6ImMiKSYmKDY2PT1ufHw3Mz09bnx8ODk9PW58fDkwPT1uKSl9ZnVuY3Rpb24gWm0odCxlKXt2YXIgbixyLG89dC5yb290LmdldFNlbGVjdGlvbigpLGk9dC5zdGF0ZS5kb2Mscz10LmRvY1ZpZXcubmVhcmVzdERlc2Moby5mb2N1c05vZGUpLGE9cyYmMD09cy5zaXplLGM9dC5kb2NWaWV3LnBvc0Zyb21ET00oby5mb2N1c05vZGUsby5mb2N1c09mZnNldCksaD1pLnJlc29sdmUoYyk7aWYoTnYobykpe249aDt3aGlsZShzJiYhcy5ub2RlKXM9cy5wYXJlbnQ7aWYocyYmcy5ub2RlLmlzQXRvbSYmV2QuaXNTZWxlY3RhYmxlKHMubm9kZSkmJnMucGFyZW50JiYoIXMubm9kZS5pc0lubGluZXx8IU12KG8uZm9jdXNOb2RlLG8uZm9jdXNPZmZzZXQscy5kb20pKSl7dmFyIHA9cy5wb3NCZWZvcmU7cj1uZXcgV2QoYz09cD9oOmkucmVzb2x2ZShwKSl9fWVsc2Ugbj1pLnJlc29sdmUodC5kb2NWaWV3LnBvc0Zyb21ET00oby5hbmNob3JOb2RlLG8uYW5jaG9yT2Zmc2V0KSk7aWYoIXIpe3ZhciB1PSJwb2ludGVyIj09ZXx8dC5zdGF0ZS5zZWxlY3Rpb24uaGVhZDxoLnBvcyYmIWE/MTotMTtyPWN5KHQsbixoLHUpfXJldHVybiByfWZ1bmN0aW9uIFFtKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb247aWYoc3kodCxuKSx0LmVkaXRhYmxlP3QuaGFzRm9jdXMoKTpweSh0KSYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jb250YWlucyh0LmRvbSkpe2lmKHQuZG9tT2JzZXJ2ZXIuZGlzY29ubmVjdFNlbGVjdGlvbigpLHQuY3Vyc29yV3JhcHBlcilpeSh0KTtlbHNle3ZhciByLG8saT1uLmFuY2hvcixzPW4uaGVhZDshdHl8fG4gaW5zdGFuY2VvZiBWZHx8KG4uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChyPWV5KHQsbi5mcm9tKSksbi5lbXB0eXx8bi4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KG89ZXkodCxuLnRvKSkpLHQuZG9jVmlldy5zZXRTZWxlY3Rpb24oaSxzLHQucm9vdCxlKSx0eSYmKHImJnJ5KHIpLG8mJnJ5KG8pKSxuLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZveSh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX19RW0ucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LEVtLnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe2lmKHQhPWUpe2Zvcih2YXIgbj10O248ZTtuKyspdGhpcy50b3AuY2hpbGRyZW5bbl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0sRW0ucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LEVtLnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MCxvPXRoaXMuc3RhY2subGVuZ3RoPj4xLGk9TWF0aC5taW4obyx0Lmxlbmd0aCk7d2hpbGUocjxpJiYocj09by0xP3RoaXMudG9wOnRoaXMuc3RhY2tbcisxPDwxXSkubWF0Y2hlc01hcmsodFtyXSkmJiExIT09dFtyXS50eXBlLnNwZWMuc3Bhbm5pbmcpcisrO3doaWxlKHI8byl0aGlzLmRlc3Ryb3lSZXN0KCksdGhpcy50b3AuZGlydHk9aW0sdGhpcy5pbmRleD10aGlzLnN0YWNrLnBvcCgpLHRoaXMudG9wPXRoaXMuc3RhY2sucG9wKCksby0tO3doaWxlKG88dC5sZW5ndGgpe3RoaXMuc3RhY2sucHVzaCh0aGlzLnRvcCx0aGlzLmluZGV4KzEpO2Zvcih2YXIgcz0tMSxhPXRoaXMuaW5kZXg7YTxNYXRoLm1pbih0aGlzLmluZGV4KzMsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKTthKyspaWYodGhpcy50b3AuY2hpbGRyZW5bYV0ubWF0Y2hlc01hcmsodFtvXSkpe3M9YTticmVha31pZihzPi0xKXM+dGhpcy5pbmRleCYmKHRoaXMuY2hhbmdlZD0hMCx0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgscykpLHRoaXMudG9wPXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdO2Vsc2V7dmFyIGM9ZG0uY3JlYXRlKHRoaXMudG9wLHRbb10sZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCwwLGMpLHRoaXMudG9wPWMsdGhpcy5jaGFuZ2VkPSEwfXRoaXMuaW5kZXg9MCxvKyt9fSxFbS5wcm90b3R5cGUuZmluZE5vZGVNYXRjaD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0tMSxpPXI8MD92b2lkIDA6dGhpcy5nZXRQcmVNYXRjaChyKSxzPXRoaXMudG9wLmNoaWxkcmVuO2lmKGkmJmkubWF0Y2hlc05vZGUodCxlLG4pKW89cy5pbmRleE9mKGkpO2Vsc2UgZm9yKHZhciBhPXRoaXMuaW5kZXgsYz1NYXRoLm1pbihzLmxlbmd0aCxhKzUpO2E8YzthKyspe3ZhciBoPXNbYV07aWYoaC5tYXRjaGVzTm9kZSh0LGUsbikmJnRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKGgpPDApe289YTticmVha319cmV0dXJuIShvPDApJiYodGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LG8pLHRoaXMuaW5kZXgrKywhMCl9LEVtLnByb3RvdHlwZS51cGRhdGVOZXh0Tm9kZT1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT10aGlzLmluZGV4O2k8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy50b3AuY2hpbGRyZW5baV07aWYocyBpbnN0YW5jZW9mIHZtKXt2YXIgYT10aGlzLnByZU1hdGNoZWQuaW5kZXhPZihzKTtpZihhPi0xJiZhK3RoaXMucHJlTWF0Y2hPZmZzZXQhPW8pcmV0dXJuITE7dmFyIGM9cy5kb20saD10aGlzLmxvY2smJihjPT10aGlzLmxvY2t8fDE9PWMubm9kZVR5cGUmJmMuY29udGFpbnModGhpcy5sb2NrLnBhcmVudE5vZGUpKSYmISh0LmlzVGV4dCYmcy5ub2RlJiZzLm5vZGUuaXNUZXh0JiZzLm5vZGVET00ubm9kZVZhbHVlPT10LnRleHQmJnMuZGlydHkhPWNtJiZUbShlLHMub3V0ZXJEZWNvKSk7aWYoIWgmJnMudXBkYXRlKHQsZSxuLHIpKXJldHVybiB0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsaSkscy5kb20hPWMmJih0aGlzLmNoYW5nZWQ9ITApLHRoaXMuaW5kZXgrKywhMDticmVha319cmV0dXJuITF9LEVtLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLHZtLmNyZWF0ZSh0aGlzLnRvcCx0LGUsbixyLG8pKSx0aGlzLmNoYW5nZWQ9ITB9LEVtLnByb3RvdHlwZS5wbGFjZVdpZGdldD1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNXaWRnZXQodCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIHI9bmV3IGZtKHRoaXMudG9wLHQsZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsciksdGhpcy5jaGFuZ2VkPSEwfX0sRW0ucHJvdG90eXBlLmFkZFRleHRibG9ja0hhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleC0xXTt3aGlsZSh0IGluc3RhbmNlb2YgZG0pdD10LmNoaWxkcmVuW3QuY2hpbGRyZW4ubGVuZ3RoLTFdO2lmKCF0fHwhKHQgaW5zdGFuY2VvZiB5bSl8fC9cbiQvLnRlc3QodC5ub2RlLnRleHQpKWlmKHRoaXMuaW5kZXg8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XS5tYXRjaGVzSGFjaygpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLG5ldyBnbSh0aGlzLnRvcCx1bSxlLG51bGwpKSx0aGlzLmNoYW5nZWQ9ITB9fTt2YXIgdHk9bHYuc2FmYXJpfHxsdi5jaHJvbWUmJmx2LmNocm9tZV92ZXJzaW9uPDYzO2Z1bmN0aW9uIGV5KHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldCxpPW88ci5jaGlsZE5vZGVzLmxlbmd0aD9yLmNoaWxkTm9kZXNbb106bnVsbCxzPW8/ci5jaGlsZE5vZGVzW28tMV06bnVsbDtpZihsdi5zYWZhcmkmJmkmJiJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKXJldHVybiBueShpKTtpZigoIWl8fCJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKSYmKCFzfHwiZmFsc2UiPT1zLmNvbnRlbnRFZGl0YWJsZSkpe2lmKGkpcmV0dXJuIG55KGkpO2lmKHMpcmV0dXJuIG55KHMpfX1mdW5jdGlvbiBueSh0KXtyZXR1cm4gdC5jb250ZW50RWRpdGFibGU9InRydWUiLGx2LnNhZmFyaSYmdC5kcmFnZ2FibGUmJih0LmRyYWdnYWJsZT0hMSx0Lndhc0RyYWdnYWJsZT0hMCksdH1mdW5jdGlvbiByeSh0KXt0LmNvbnRlbnRFZGl0YWJsZT0iZmFsc2UiLHQud2FzRHJhZ2dhYmxlJiYodC5kcmFnZ2FibGU9ITAsdC53YXNEcmFnZ2FibGU9bnVsbCl9ZnVuY3Rpb24gb3kodCl7dmFyIGU9dC5kb20ub3duZXJEb2N1bWVudDtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpO3ZhciBuPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxyPW4uYW5jaG9yTm9kZSxvPW4uYW5jaG9yT2Zmc2V0O2UuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZD1mdW5jdGlvbigpe24uYW5jaG9yTm9kZT09ciYmbi5hbmNob3JPZmZzZXQ9PW98fChlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSl9KX1mdW5jdGlvbiBpeSh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9dC5jdXJzb3JXcmFwcGVyLmRvbSxvPSJJTUciPT1yLm5vZGVOYW1lO28/bi5zZXRFbmQoci5wYXJlbnROb2RlLHd2KHIpKzEpOm4uc2V0RW5kKHIsMCksbi5jb2xsYXBzZSghMSksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG4pLCFvJiYhdC5zdGF0ZS5zZWxlY3Rpb24udmlzaWJsZSYmbHYuaWUmJmx2LmllX3ZlcnNpb248PTExJiYoci5kaXNhYmxlZD0hMCxyLmRpc2FibGVkPSExKX1mdW5jdGlvbiBzeSh0LGUpe2lmKGUgaW5zdGFuY2VvZiBXZCl7dmFyIG49dC5kb2NWaWV3LmRlc2NBdChlLmZyb20pO24hPXQubGFzdFNlbGVjdGVkVmlld0Rlc2MmJihheSh0KSxuJiZuLnNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW4pfWVsc2UgYXkodCl9ZnVuY3Rpb24gYXkodCl7dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKHQubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50JiZ0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLmRlc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bnVsbCl9ZnVuY3Rpb24gY3kodCxlLG4scil7cmV0dXJuIHQuc29tZVByb3AoImNyZWF0ZVNlbGVjdGlvbkJldHdlZW4iLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsbil9KSl8fFZkLmJldHdlZW4oZSxuLHIpfWZ1bmN0aW9uIGh5KHQpe3JldHVybighdC5lZGl0YWJsZXx8dC5yb290LmFjdGl2ZUVsZW1lbnQ9PXQuZG9tKSYmcHkodCl9ZnVuY3Rpb24gcHkodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpO2lmKCFlLmFuY2hvck5vZGUpcmV0dXJuITE7dHJ5e3JldHVybiB0LmRvbS5jb250YWlucygzPT1lLmFuY2hvck5vZGUubm9kZVR5cGU/ZS5hbmNob3JOb2RlLnBhcmVudE5vZGU6ZS5hbmNob3JOb2RlKSYmKHQuZWRpdGFibGV8fHQuZG9tLmNvbnRhaW5zKDM9PWUuZm9jdXNOb2RlLm5vZGVUeXBlP2UuZm9jdXNOb2RlLnBhcmVudE5vZGU6ZS5mb2N1c05vZGUpKX1jYXRjaChuKXtyZXR1cm4hMX19ZnVuY3Rpb24gdXkodCl7dmFyIGU9dC5kb2NWaWV3LmRvbUZyb21Qb3ModC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yKSxuPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtyZXR1cm4ga3YoZS5ub2RlLGUub2Zmc2V0LG4uYW5jaG9yTm9kZSxuLmFuY2hvck9mZnNldCl9ZnVuY3Rpb24gZnkodCxlLG4pe3ZhciByPXQuZG9jVmlldy5wYXJzZVJhbmdlKGUsbiksbz1yLm5vZGUsaT1yLmZyb21PZmZzZXQscz1yLnRvT2Zmc2V0LGE9ci5mcm9tLGM9ci50byxoPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxwPW51bGwsdT1oLmFuY2hvck5vZGU7aWYodSYmdC5kb20uY29udGFpbnMoMT09dS5ub2RlVHlwZT91OnUucGFyZW50Tm9kZSkmJihwPVt7bm9kZTp1LG9mZnNldDpoLmFuY2hvck9mZnNldH1dLE52KGgpfHxwLnB1c2goe25vZGU6aC5mb2N1c05vZGUsb2Zmc2V0OmguZm9jdXNPZmZzZXR9KSksbHYuY2hyb21lJiY4PT09dC5sYXN0S2V5Q29kZSlmb3IodmFyIGY9cztmPmk7Zi0tKXt2YXIgbD1vLmNoaWxkTm9kZXNbZi0xXSxkPWwucG1WaWV3RGVzYztpZigiQlIiPT1sLm5vZGVUeXBlJiYhZCl7cz1mO2JyZWFrfWlmKCFkfHxkLnNpemUpYnJlYWt9dmFyIHY9dC5zdGF0ZS5kb2MsbT10LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8RGwuZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSkseT12LnJlc29sdmUoYSksZz1udWxsLHc9bS5wYXJzZShvLHt0b3BOb2RlOnkucGFyZW50LHRvcE1hdGNoOnkucGFyZW50LmNvbnRlbnRNYXRjaEF0KHkuaW5kZXgoKSksdG9wT3BlbjohMCxmcm9tOmksdG86cyxwcmVzZXJ2ZVdoaXRlc3BhY2U6IXkucGFyZW50LnR5cGUuc3BlYy5jb2RlfHwiZnVsbCIsZWRpdGFibGVDb250ZW50OiEwLGZpbmRQb3NpdGlvbnM6cCxydWxlRnJvbU5vZGU6bHksY29udGV4dDp5fSk7aWYocCYmbnVsbCE9cFswXS5wb3Mpe3ZhciB4PXBbMF0ucG9zLGI9cFsxXSYmcFsxXS5wb3M7bnVsbD09YiYmKGI9eCksZz17YW5jaG9yOngrYSxoZWFkOmIrYX19cmV0dXJue2RvYzp3LHNlbDpnLGZyb206YSx0bzpjfX1mdW5jdGlvbiBseSh0KXt2YXIgZT10LnBtVmlld0Rlc2M7aWYoZSlyZXR1cm4gZS5wYXJzZVJ1bGUoKTtpZigiQlIiPT10Lm5vZGVOYW1lJiZ0LnBhcmVudE5vZGUpe2lmKGx2LnNhZmFyaSYmL14odWx8b2wpJC9pLnRlc3QodC5wYXJlbnROb2RlLm5vZGVOYW1lKSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSkse3NraXA6bn19aWYodC5wYXJlbnROb2RlLmxhc3RDaGlsZD09dHx8bHYuc2FmYXJpJiYvXih0cnx0YWJsZSkkL2kudGVzdCh0LnBhcmVudE5vZGUubm9kZU5hbWUpKXJldHVybntpZ25vcmU6ITB9fWVsc2UgaWYoIklNRyI9PXQubm9kZU5hbWUmJnQuZ2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIikpcmV0dXJue2lnbm9yZTohMH19ZnVuY3Rpb24gZHkodCxlLG4scixvKXtpZihlPDApe3ZhciBpPXQubGFzdFNlbGVjdGlvblRpbWU+RGF0ZS5ub3coKS01MD90Lmxhc3RTZWxlY3Rpb25PcmlnaW46bnVsbCxzPVptKHQsaSk7aWYoIXQuc3RhdGUuc2VsZWN0aW9uLmVxKHMpKXt2YXIgYT10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihzKTsicG9pbnRlciI9PWk/YS5zZXRNZXRhKCJwb2ludGVyIiwhMCk6ImtleSI9PWkmJmEuc2Nyb2xsSW50b1ZpZXcoKSx0LmRpc3BhdGNoKGEpfX1lbHNle3ZhciBjPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksaD1jLnNoYXJlZERlcHRoKG4pO2U9Yy5iZWZvcmUoaCsxKSxuPXQuc3RhdGUuZG9jLnJlc29sdmUobikuYWZ0ZXIoaCsxKTt2YXIgcCx1LGY9dC5zdGF0ZS5zZWxlY3Rpb24sbD1meSh0LGUsbiksZD10LnN0YXRlLmRvYyx2PWQuc2xpY2UobC5mcm9tLGwudG8pOzg9PT10Lmxhc3RLZXlDb2RlJiZEYXRlLm5vdygpLTEwMDx0Lmxhc3RLZXlDb2RlVGltZT8ocD10LnN0YXRlLnNlbGVjdGlvbi50byx1PSJlbmQiKToocD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tLHU9InN0YXJ0IiksdC5sYXN0S2V5Q29kZT1udWxsO3ZhciBtPXd5KHYuY29udGVudCxsLmRvYy5jb250ZW50LGwuZnJvbSxwLHUpO2lmKCFtKXtpZighKHImJmYgaW5zdGFuY2VvZiBWZCYmIWYuZW1wdHkmJmYuJGhlYWQuc2FtZVBhcmVudChmLiRhbmNob3IpKXx8dC5jb21wb3Npbmd8fGwuc2VsJiZsLnNlbC5hbmNob3IhPWwuc2VsLmhlYWQpe2lmKGwuc2VsKXt2YXIgeT12eSh0LHQuc3RhdGUuZG9jLGwuc2VsKTt5JiYheS5lcSh0LnN0YXRlLnNlbGVjdGlvbikmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oeSkpfXJldHVybn1tPXtzdGFydDpmLmZyb20sZW5kQTpmLnRvLGVuZEI6Zi50b319dC5kb21DaGFuZ2VDb3VudCsrLHQuc3RhdGUuc2VsZWN0aW9uLmZyb208dC5zdGF0ZS5zZWxlY3Rpb24udG8mJm0uc3RhcnQ9PW0uZW5kQiYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBWZCYmKG0uc3RhcnQ+dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmbS5zdGFydDw9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSsyP20uc3RhcnQ9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTptLmVuZEE8dC5zdGF0ZS5zZWxlY3Rpb24udG8mJm0uZW5kQT49dC5zdGF0ZS5zZWxlY3Rpb24udG8tMiYmKG0uZW5kQis9dC5zdGF0ZS5zZWxlY3Rpb24udG8tbS5lbmRBLG0uZW5kQT10LnN0YXRlLnNlbGVjdGlvbi50bykpLGx2LmllJiZsdi5pZV92ZXJzaW9uPD0xMSYmbS5lbmRCPT1tLnN0YXJ0KzEmJm0uZW5kQT09bS5zdGFydCYmbS5zdGFydD5sLmZyb20mJiIgwqAiPT1sLmRvYy50ZXh0QmV0d2VlbihtLnN0YXJ0LWwuZnJvbS0xLG0uc3RhcnQtbC5mcm9tKzEpJiYobS5zdGFydC0tLG0uZW5kQS0tLG0uZW5kQi0tKTt2YXIgZyx3PWwuZG9jLnJlc29sdmVOb0NhY2hlKG0uc3RhcnQtbC5mcm9tKSx4PWwuZG9jLnJlc29sdmVOb0NhY2hlKG0uZW5kQi1sLmZyb20pO2lmKChsdi5pb3MmJnQubGFzdElPU0VudGVyPkRhdGUubm93KCktMTAwJiYoIXcuc2FtZVBhcmVudCh4KXx8by5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iRElWIj09dC5ub2RlTmFtZX0pKSl8fCF3LnNhbWVQYXJlbnQoeCkmJncucG9zPGwuZG9jLmNvbnRlbnQuc2l6ZSYmKGc9JGQuZmluZEZyb20obC5kb2MucmVzb2x2ZSh3LnBvcysxKSwxLCEwKSkmJmcuaGVhZD09eC5wb3MpJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxFdigxMywiRW50ZXIiKSl9KSkpdC5sYXN0SU9TRW50ZXI9MDtlbHNlIGlmKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvcj5tLnN0YXJ0JiZ5eShkLG0uc3RhcnQsbS5lbmRBLHcseCkmJnQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LEV2KDgsIkJhY2tzcGFjZSIpKX0pKSlsdi5hbmRyb2lkJiZsdi5jaHJvbWUmJnQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCk7ZWxzZXt2YXIgYixrLFMsTyxDPW0uc3RhcnQsTT1tLmVuZEE7aWYody5zYW1lUGFyZW50KHgpJiZ3LnBhcmVudC5pbmxpbmVDb250ZW50KWlmKHcucG9zPT14LnBvcylsdi5pZSYmbHYuaWVfdmVyc2lvbjw9MTEmJjA9PXcucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBRbSh0KX0pLDIwKSksYj10LnN0YXRlLnRyLmRlbGV0ZShDLE0pLGs9ZC5yZXNvbHZlKG0uc3RhcnQpLm1hcmtzQWNyb3NzKGQucmVzb2x2ZShtLmVuZEEpKTtlbHNlIGlmKG0uZW5kQT09bS5lbmRCJiYoTz1kLnJlc29sdmUobS5zdGFydCkpJiYoUz1teSh3LnBhcmVudC5jb250ZW50LmN1dCh3LnBhcmVudE9mZnNldCx4LnBhcmVudE9mZnNldCksTy5wYXJlbnQuY29udGVudC5jdXQoTy5wYXJlbnRPZmZzZXQsbS5lbmRBLU8uc3RhcnQoKSkpKSliPXQuc3RhdGUudHIsImFkZCI9PVMudHlwZT9iLmFkZE1hcmsoQyxNLFMubWFyayk6Yi5yZW1vdmVNYXJrKEMsTSxTLm1hcmspO2Vsc2UgaWYody5wYXJlbnQuY2hpbGQody5pbmRleCgpKS5pc1RleHQmJncuaW5kZXgoKT09eC5pbmRleCgpLSh4LnRleHRPZmZzZXQ/MDoxKSl7dmFyIFQ9dy5wYXJlbnQudGV4dEJldHdlZW4ody5wYXJlbnRPZmZzZXQseC5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsQyxNLFQpfSkpKXJldHVybjtiPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChULEMsTSl9aWYoYnx8KGI9dC5zdGF0ZS50ci5yZXBsYWNlKEMsTSxsLmRvYy5zbGljZShtLnN0YXJ0LWwuZnJvbSxtLmVuZEItbC5mcm9tKSkpLGwuc2VsKXt2YXIgTj12eSh0LGIuZG9jLGwuc2VsKTtOJiYhKGx2LmNocm9tZSYmbHYuYW5kcm9pZCYmdC5jb21wb3NpbmcmJk4uZW1wdHkmJihOLmhlYWQ9PUN8fE4uaGVhZD09Yi5tYXBwaW5nLm1hcChNKS0xKXx8bHYuaWUmJk4uZW1wdHkmJk4uaGVhZD09QykmJmIuc2V0U2VsZWN0aW9uKE4pfWsmJmIuZW5zdXJlTWFya3MoayksdC5kaXNwYXRjaChiLnNjcm9sbEludG9WaWV3KCkpfX19ZnVuY3Rpb24gdnkodCxlLG4pe3JldHVybiBNYXRoLm1heChuLmFuY2hvcixuLmhlYWQpPmUuY29udGVudC5zaXplP251bGw6Y3kodCxlLnJlc29sdmUobi5hbmNob3IpLGUucmVzb2x2ZShuLmhlYWQpKX1mdW5jdGlvbiBteSh0LGUpe2Zvcih2YXIgbixyLG8saT10LmZpcnN0Q2hpbGQubWFya3Mscz1lLmZpcnN0Q2hpbGQubWFya3MsYT1pLGM9cyxoPTA7aDxzLmxlbmd0aDtoKyspYT1zW2hdLnJlbW92ZUZyb21TZXQoYSk7Zm9yKHZhciBwPTA7cDxpLmxlbmd0aDtwKyspYz1pW3BdLnJlbW92ZUZyb21TZXQoYyk7aWYoMT09YS5sZW5ndGgmJjA9PWMubGVuZ3RoKXI9YVswXSxuPSJhZGQiLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLmFkZFRvU2V0KHQubWFya3MpKX07ZWxzZXtpZigwIT1hLmxlbmd0aHx8MSE9Yy5sZW5ndGgpcmV0dXJuIG51bGw7cj1jWzBdLG49InJlbW92ZSIsbz1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIucmVtb3ZlRnJvbVNldCh0Lm1hcmtzKSl9fWZvcih2YXIgdT1bXSxmPTA7ZjxlLmNoaWxkQ291bnQ7ZisrKXUucHVzaChvKGUuY2hpbGQoZikpKTtpZihOZi5mcm9tKHUpLmVxKHQpKXJldHVybnttYXJrOnIsdHlwZTpufX1mdW5jdGlvbiB5eSh0LGUsbixyLG8pe2lmKCFyLnBhcmVudC5pc1RleHRibG9ja3x8bi1lPD1vLnBvcy1yLnBvc3x8Z3kociwhMCwhMSk8by5wb3MpcmV0dXJuITE7dmFyIGk9dC5yZXNvbHZlKGUpO2lmKGkucGFyZW50T2Zmc2V0PGkucGFyZW50LmNvbnRlbnQuc2l6ZXx8IWkucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBzPXQucmVzb2x2ZShneShpLCEwLCEwKSk7cmV0dXJuISghcy5wYXJlbnQuaXNUZXh0YmxvY2t8fHMucG9zPm58fGd5KHMsITAsITEpPG4pJiZyLnBhcmVudC5jb250ZW50LmN1dChyLnBhcmVudE9mZnNldCkuZXEocy5wYXJlbnQuY29udGVudCl9ZnVuY3Rpb24gZ3kodCxlLG4pe3ZhciByPXQuZGVwdGgsbz1lP3QuZW5kKCk6dC5wb3M7d2hpbGUocj4wJiYoZXx8dC5pbmRleEFmdGVyKHIpPT10Lm5vZGUocikuY2hpbGRDb3VudCkpci0tLG8rKyxlPSExO2lmKG4pe3ZhciBpPXQubm9kZShyKS5tYXliZUNoaWxkKHQuaW5kZXhBZnRlcihyKSk7d2hpbGUoaSYmIWkuaXNMZWFmKWk9aS5maXJzdENoaWxkLG8rK31yZXR1cm4gb31mdW5jdGlvbiB3eSh0LGUsbixyLG8pe3ZhciBpPXQuZmluZERpZmZTdGFydChlLG4pO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHM9dC5maW5kRGlmZkVuZChlLG4rdC5zaXplLG4rZS5zaXplKSxhPXMuYSxjPXMuYjtpZigiZW5kIj09byl7dmFyIGg9TWF0aC5tYXgoMCxpLU1hdGgubWluKGEsYykpO3ItPWEraC1pfWlmKGE8aSYmdC5zaXplPGUuc2l6ZSl7dmFyIHA9cjw9aSYmcj49YT9pLXI6MDtpLT1wLGM9aSsoYy1hKSxhPWl9ZWxzZSBpZihjPGkpe3ZhciB1PXI8PWkmJnI+PWM/aS1yOjA7aS09dSxhPWkrKGEtYyksYz1pfXJldHVybntzdGFydDppLGVuZEE6YSxlbmRCOmN9fWZ1bmN0aW9uIHh5KHQsZSl7dmFyIG49W10scj1lLmNvbnRlbnQsbz1lLm9wZW5TdGFydCxpPWUub3BlbkVuZDt3aGlsZShvPjEmJmk+MSYmMT09ci5jaGlsZENvdW50JiYxPT1yLmZpcnN0Q2hpbGQuY2hpbGRDb3VudCl7by0tLGktLTt2YXIgcz1yLmZpcnN0Q2hpbGQ7bi5wdXNoKHMudHlwZS5uYW1lLHMudHlwZS5oYXNSZXF1aXJlZEF0dHJzKCk/cy5hdHRyczpudWxsKSxyPXMuY29udGVudH12YXIgYT10LnNvbWVQcm9wKCJjbGlwYm9hcmRTZXJpYWxpemVyIil8fFVsLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpLGM9QXkoKSxoPWMuY3JlYXRlRWxlbWVudCgiZGl2Iik7aC5hcHBlbmRDaGlsZChhLnNlcmlhbGl6ZUZyYWdtZW50KHIse2RvY3VtZW50OmN9KSk7dmFyIHAsdT1oLmZpcnN0Q2hpbGQ7d2hpbGUodSYmMT09dS5ub2RlVHlwZSYmKHA9TnlbdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpe2Zvcih2YXIgZj1wLmxlbmd0aC0xO2Y+PTA7Zi0tKXt2YXIgbD1jLmNyZWF0ZUVsZW1lbnQocFtmXSk7d2hpbGUoaC5maXJzdENoaWxkKWwuYXBwZW5kQ2hpbGQoaC5maXJzdENoaWxkKTtoLmFwcGVuZENoaWxkKGwpfXU9aC5maXJzdENoaWxkfXUmJjE9PXUubm9kZVR5cGUmJnUuc2V0QXR0cmlidXRlKCJkYXRhLXBtLXNsaWNlIixvKyIgIitpKyIgIitKU09OLnN0cmluZ2lmeShuKSk7dmFyIGQ9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFNlcmlhbGl6ZXIiLChmdW5jdGlvbih0KXtyZXR1cm4gdChlKX0pKXx8ZS5jb250ZW50LnRleHRCZXR3ZWVuKDAsZS5jb250ZW50LnNpemUsIlxuXG4iKTtyZXR1cm57ZG9tOmgsdGV4dDpkfX1mdW5jdGlvbiBieSh0LGUsbixyLG8pe3ZhciBpLHMsYT1vLnBhcmVudC50eXBlLnNwZWMuY29kZTtpZighbiYmIWUpcmV0dXJuIG51bGw7dmFyIGM9ZSYmKHJ8fGF8fCFuKTtpZihjKXtpZih0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRUZXh0IiwoZnVuY3Rpb24odCl7ZT10KGUpfSkpLGEpcmV0dXJuIG5ldyBQZihOZi5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIGg9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsbyl9KSk7aD9zPWg6KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLGk9Unkobik7dmFyIHA9aSYmaS5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSx1PXAmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyhwLmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighcyl7dmFyIGY9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHxEbC5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKTtzPWYucGFyc2VTbGljZShpLHtwcmVzZXJ2ZVdoaXRlc3BhY2U6ISghYyYmIXUpLGNvbnRleHQ6b30pfXJldHVybiBzPXU/enkoVHkocywrdVsxXSwrdVsyXSksdVszXSk6UGYubWF4T3BlbihreShzLmNvbnRlbnQsbyksITEpLHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZCIsKGZ1bmN0aW9uKHQpe3M9dChzKX0pKSxzfWZ1bmN0aW9uIGt5KHQsZSl7aWYodC5jaGlsZENvdW50PDIpcmV0dXJuIHQ7Zm9yKHZhciBuPWZ1bmN0aW9uKG4pe3ZhciByPWUubm9kZShuKSxvPXIuY29udGVudE1hdGNoQXQoZS5pbmRleChuKSksaT12b2lkIDAscz1bXTtpZih0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKHMpe3ZhciBlLG49by5maW5kV3JhcHBpbmcodC50eXBlKTtpZighbilyZXR1cm4gcz1udWxsO2lmKGU9cy5sZW5ndGgmJmkubGVuZ3RoJiZPeShuLGksdCxzW3MubGVuZ3RoLTFdLDApKXNbcy5sZW5ndGgtMV09ZTtlbHNle3MubGVuZ3RoJiYoc1tzLmxlbmd0aC0xXT1DeShzW3MubGVuZ3RoLTFdLGkubGVuZ3RoKSk7dmFyIHI9U3kodCxuKTtzLnB1c2gociksbz1vLm1hdGNoVHlwZShyLnR5cGUsci5hdHRycyksaT1ufX19KSkscylyZXR1cm57djpOZi5mcm9tKHMpfX0scj1lLmRlcHRoO3I+PTA7ci0tKXt2YXIgbz1uKHIpO2lmKG8pcmV0dXJuIG8udn1yZXR1cm4gdH1mdW5jdGlvbiBTeSh0LGUsbil7dm9pZCAwPT09biYmKG49MCk7Zm9yKHZhciByPWUubGVuZ3RoLTE7cj49bjtyLS0pdD1lW3JdLmNyZWF0ZShudWxsLE5mLmZyb20odCkpO3JldHVybiB0fWZ1bmN0aW9uIE95KHQsZSxuLHIsbyl7aWYobzx0Lmxlbmd0aCYmbzxlLmxlbmd0aCYmdFtvXT09ZVtvXSl7dmFyIGk9T3kodCxlLG4sci5sYXN0Q2hpbGQsbysxKTtpZihpKXJldHVybiByLmNvcHkoci5jb250ZW50LnJlcGxhY2VDaGlsZChyLmNoaWxkQ291bnQtMSxpKSk7dmFyIHM9ci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpO2lmKHMubWF0Y2hUeXBlKG89PXQubGVuZ3RoLTE/bi50eXBlOnRbbysxXSkpcmV0dXJuIHIuY29weShyLmNvbnRlbnQuYXBwZW5kKE5mLmZyb20oU3kobix0LG8rMSkpKSl9fWZ1bmN0aW9uIEN5KHQsZSl7aWYoMD09ZSlyZXR1cm4gdDt2YXIgbj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLEN5KHQubGFzdENoaWxkLGUtMSkpLHI9dC5jb250ZW50TWF0Y2hBdCh0LmNoaWxkQ291bnQpLmZpbGxCZWZvcmUoTmYuZW1wdHksITApO3JldHVybiB0LmNvcHkobi5hcHBlbmQocikpfWZ1bmN0aW9uIE15KHQsZSxuLHIsbyxpKXt2YXIgcz1lPDA/dC5maXJzdENoaWxkOnQubGFzdENoaWxkLGE9cy5jb250ZW50O3JldHVybiBvPHItMSYmKGE9TXkoYSxlLG4scixvKzEsaSkpLG8+PW4mJihhPWU8MD9zLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUoYSx0LmNoaWxkQ291bnQ+MXx8aTw9bykuYXBwZW5kKGEpOmEuYXBwZW5kKHMuY29udGVudE1hdGNoQXQocy5jaGlsZENvdW50KS5maWxsQmVmb3JlKE5mLmVtcHR5LCEwKSkpLHQucmVwbGFjZUNoaWxkKGU8MD8wOnQuY2hpbGRDb3VudC0xLHMuY29weShhKSl9ZnVuY3Rpb24gVHkodCxlLG4pe3JldHVybiBlPHQub3BlblN0YXJ0JiYodD1uZXcgUGYoTXkodC5jb250ZW50LC0xLGUsdC5vcGVuU3RhcnQsMCx0Lm9wZW5FbmQpLGUsdC5vcGVuRW5kKSksbjx0Lm9wZW5FbmQmJih0PW5ldyBQZihNeSh0LmNvbnRlbnQsMSxuLHQub3BlbkVuZCwwLDApLHQub3BlblN0YXJ0LG4pKSx0fXZhciBOeT17dGhlYWQ6WyJ0YWJsZSJdLHRib2R5OlsidGFibGUiXSx0Zm9vdDpbInRhYmxlIl0sY2FwdGlvbjpbInRhYmxlIl0sY29sZ3JvdXA6WyJ0YWJsZSJdLGNvbDpbInRhYmxlIiwiY29sZ3JvdXAiXSx0cjpbInRhYmxlIiwidGJvZHkiXSx0ZDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdLHRoOlsidGFibGUiLCJ0Ym9keSIsInRyIl19LEV5PW51bGw7ZnVuY3Rpb24gQXkoKXtyZXR1cm4gRXl8fChFeT1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoInRpdGxlIikpfWZ1bmN0aW9uIFJ5KHQpe3ZhciBlPS8oXHMqPG1ldGEgW14+XSo+KSovLmV4ZWModCk7ZSYmKHQ9dC5zbGljZShlWzBdLmxlbmd0aCkpO3ZhciBuLHI9QXkoKS5jcmVhdGVFbGVtZW50KCJkaXYiKSxvPS8oPzo8bWV0YSBbXj5dKj4pKjwoW2Etel1bXj5cc10rKS9pLmV4ZWModCksaT0wOyhuPW8mJk55W29bMV0udG9Mb3dlckNhc2UoKV0pJiYodD1uLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIjwiK3QrIj4ifSkpLmpvaW4oIiIpK3Qrbi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8LyIrdCsiPiJ9KSkucmV2ZXJzZSgpLmpvaW4oIiIpLGk9bi5sZW5ndGgpLHIuaW5uZXJIVE1MPXQ7Zm9yKHZhciBzPTA7czxpO3MrKylyPXIuZmlyc3RDaGlsZDtyZXR1cm4gcn1mdW5jdGlvbiB6eSh0LGUpe2lmKCF0LnNpemUpcmV0dXJuIHQ7dmFyIG4scj10LmNvbnRlbnQuZmlyc3RDaGlsZC50eXBlLnNjaGVtYTt0cnl7bj1KU09OLnBhcnNlKGUpfWNhdGNoKGgpe3JldHVybiB0fWZvcih2YXIgbz10LmNvbnRlbnQsaT10Lm9wZW5TdGFydCxzPXQub3BlbkVuZCxhPW4ubGVuZ3RoLTI7YT49MDthLT0yKXt2YXIgYz1yLm5vZGVzW25bYV1dO2lmKCFjfHxjLmhhc1JlcXVpcmVkQXR0cnMoKSlicmVhaztvPU5mLmZyb20oYy5jcmVhdGUoblthKzFdLG8pKSxpKysscysrfXJldHVybiBuZXcgUGYobyxpLHMpfXZhciBEeT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsc3VidHJlZTohMH0sSXk9bHYuaWUmJmx2LmllX3ZlcnNpb248PTExLFB5PWZ1bmN0aW9uKCl7dGhpcy5hbmNob3JOb2RlPXRoaXMuYW5jaG9yT2Zmc2V0PXRoaXMuZm9jdXNOb2RlPXRoaXMuZm9jdXNPZmZzZXQ9bnVsbH07UHkucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmFuY2hvck5vZGU9dC5hbmNob3JOb2RlLHRoaXMuYW5jaG9yT2Zmc2V0PXQuYW5jaG9yT2Zmc2V0LHRoaXMuZm9jdXNOb2RlPXQuZm9jdXNOb2RlLHRoaXMuZm9jdXNPZmZzZXQ9dC5mb2N1c09mZnNldH0sUHkucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0LmFuY2hvck5vZGU9PXRoaXMuYW5jaG9yTm9kZSYmdC5hbmNob3JPZmZzZXQ9PXRoaXMuYW5jaG9yT2Zmc2V0JiZ0LmZvY3VzTm9kZT09dGhpcy5mb2N1c05vZGUmJnQuZm9jdXNPZmZzZXQ9PXRoaXMuZm9jdXNPZmZzZXR9O3ZhciBCeT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy52aWV3PXQsdGhpcy5oYW5kbGVET01DaGFuZ2U9ZSx0aGlzLnF1ZXVlPVtdLHRoaXMuZmx1c2hpbmdTb29uPS0xLHRoaXMub2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJm5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspbi5xdWV1ZS5wdXNoKHRbZV0pO2x2LmllJiZsdi5pZV92ZXJzaW9uPD0xMSYmdC5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iY2hpbGRMaXN0Ij09dC50eXBlJiZ0LnJlbW92ZWROb2Rlcy5sZW5ndGh8fCJjaGFyYWN0ZXJEYXRhIj09dC50eXBlJiZ0Lm9sZFZhbHVlLmxlbmd0aD50LnRhcmdldC5ub2RlVmFsdWUubGVuZ3RofSkpP24uZmx1c2hTb29uKCk6bi5mbHVzaCgpfSkpLHRoaXMuY3VycmVudFNlbGVjdGlvbj1uZXcgUHksSXkmJih0aGlzLm9uQ2hhckRhdGE9ZnVuY3Rpb24odCl7bi5xdWV1ZS5wdXNoKHt0YXJnZXQ6dC50YXJnZXQsdHlwZToiY2hhcmFjdGVyRGF0YSIsb2xkVmFsdWU6dC5wcmV2VmFsdWV9KSxuLmZsdXNoU29vbigpfSksdGhpcy5vblNlbGVjdGlvbkNoYW5nZT10aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITF9O0J5LnByb3RvdHlwZS5mbHVzaFNvb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZmx1c2hpbmdTb29uPDAmJih0aGlzLmZsdXNoaW5nU29vbj13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZsdXNoaW5nU29vbj0tMSx0LmZsdXNoKCl9KSwyMCkpfSxCeS5wcm90b3R5cGUuZm9yY2VGbHVzaD1mdW5jdGlvbigpe3RoaXMuZmx1c2hpbmdTb29uPi0xJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZsdXNoaW5nU29vbiksdGhpcy5mbHVzaGluZ1Nvb249LTEsdGhpcy5mbHVzaCgpKX0sQnkucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlciYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMudmlldy5kb20sRHkpLEl5JiZ0aGlzLnZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcy5vbkNoYXJEYXRhKSx0aGlzLmNvbm5lY3RTZWxlY3Rpb24oKX0sQnkucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMub2JzZXJ2ZXIpe3ZhciBlPXRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtpZihlLmxlbmd0aCl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy5xdWV1ZS5wdXNoKGVbbl0pO3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmZsdXNoKCl9KSwyMCl9dGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCl9SXkmJnRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuZGlzY29ubmVjdFNlbGVjdGlvbigpfSxCeS5wcm90b3R5cGUuY29ubmVjdFNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMudmlldy5kb20ub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpfSxCeS5wcm90b3R5cGUuZGlzY29ubmVjdFNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMudmlldy5kb20ub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpfSxCeS5wcm90b3R5cGUuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX0pLDUwKX0sQnkucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7aWYoaHkodGhpcy52aWV3KSl7aWYodGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMpcmV0dXJuIFFtKHRoaXMudmlldyk7aWYobHYuaWUmJmx2LmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJmt2KHQuZm9jdXNOb2RlLHQuZm9jdXNPZmZzZXQsdC5hbmNob3JOb2RlLHQuYW5jaG9yT2Zmc2V0KSlyZXR1cm4gdGhpcy5mbHVzaFNvb24oKX10aGlzLmZsdXNoKCl9fSxCeS5wcm90b3R5cGUuc2V0Q3VyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50U2VsZWN0aW9uLnNldCh0aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKSl9LEJ5LnByb3RvdHlwZS5pZ25vcmVTZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24odCl7aWYoMD09dC5yYW5nZUNvdW50KXJldHVybiEwO3ZhciBlPXQuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcixuPXRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKGUpO3JldHVybiBuJiZuLmlnbm9yZU11dGF0aW9uKHt0eXBlOiJzZWxlY3Rpb24iLHRhcmdldDozPT1lLm5vZGVUeXBlP2UucGFyZW50Tm9kZTplfSk/KHRoaXMuc2V0Q3VyU2VsZWN0aW9uKCksITApOnZvaWQgMH0sQnkucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy52aWV3LmRvY1ZpZXcmJiEodGhpcy5mbHVzaGluZ1Nvb24+LTEpKXt2YXIgdD10aGlzLm9ic2VydmVyP3RoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTpbXTt0aGlzLnF1ZXVlLmxlbmd0aCYmKHQ9dGhpcy5xdWV1ZS5jb25jYXQodCksdGhpcy5xdWV1ZS5sZW5ndGg9MCk7dmFyIGU9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj0hdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMmJiF0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoZSkmJnB5KHRoaXMudmlldykmJiF0aGlzLmlnbm9yZVNlbGVjdGlvbkNoYW5nZShlKSxyPS0xLG89LTEsaT0hMSxzPVtdO2lmKHRoaXMudmlldy5lZGl0YWJsZSlmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIGM9dGhpcy5yZWdpc3Rlck11dGF0aW9uKHRbYV0scyk7YyYmKHI9cjwwP2MuZnJvbTpNYXRoLm1pbihjLmZyb20sciksbz1vPDA/Yy50bzpNYXRoLm1heChjLnRvLG8pLGMudHlwZU92ZXImJihpPSEwKSl9aWYobHYuZ2Vja28mJnMubGVuZ3RoPjEpe3ZhciBoPXMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4iQlIiPT10Lm5vZGVOYW1lfSkpO2lmKDI9PWgubGVuZ3RoKXt2YXIgcD1oWzBdLHU9aFsxXTtwLnBhcmVudE5vZGUmJnAucGFyZW50Tm9kZS5wYXJlbnROb2RlPT11LnBhcmVudE5vZGU/dS5yZW1vdmUoKTpwLnJlbW92ZSgpfX0ocj4tMXx8bikmJihyPi0xJiYodGhpcy52aWV3LmRvY1ZpZXcubWFya0RpcnR5KHIsbyksankodGhpcy52aWV3KSksdGhpcy5oYW5kbGVET01DaGFuZ2UocixvLGkscyksdGhpcy52aWV3LmRvY1ZpZXcuZGlydHk/dGhpcy52aWV3LnVwZGF0ZVN0YXRlKHRoaXMudmlldy5zdGF0ZSk6dGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKGUpfHxRbSh0aGlzLnZpZXcpKX19LEJ5LnByb3RvdHlwZS5yZWdpc3Rlck11dGF0aW9uPWZ1bmN0aW9uKHQsZSl7aWYoZS5pbmRleE9mKHQudGFyZ2V0KT4tMSlyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0RGVzYyh0LnRhcmdldCk7aWYoImF0dHJpYnV0ZXMiPT10LnR5cGUmJihuPT10aGlzLnZpZXcuZG9jVmlld3x8ImNvbnRlbnRlZGl0YWJsZSI9PXQuYXR0cmlidXRlTmFtZXx8InN0eWxlIj09dC5hdHRyaWJ1dGVOYW1lJiYhdC5vbGRWYWx1ZSYmIXQudGFyZ2V0LmdldEF0dHJpYnV0ZSgic3R5bGUiKSkpcmV0dXJuIG51bGw7aWYoIW58fG4uaWdub3JlTXV0YXRpb24odCkpcmV0dXJuIG51bGw7aWYoImNoaWxkTGlzdCI9PXQudHlwZSl7dmFyIHI9dC5wcmV2aW91c1NpYmxpbmcsbz10Lm5leHRTaWJsaW5nO2lmKGx2LmllJiZsdi5pZV92ZXJzaW9uPD0xMSYmdC5hZGRlZE5vZGVzLmxlbmd0aClmb3IodmFyIGk9MDtpPHQuYWRkZWROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgcz10LmFkZGVkTm9kZXNbaV0sYT1zLnByZXZpb3VzU2libGluZyxjPXMubmV4dFNpYmxpbmc7KCFhfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxhKTwwKSYmKHI9YSksKCFjfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxjKTwwKSYmKG89Yyl9Zm9yKHZhciBoPXImJnIucGFyZW50Tm9kZT09dC50YXJnZXQ/d3YocikrMTowLHA9bi5sb2NhbFBvc0Zyb21ET00odC50YXJnZXQsaCwtMSksdT1vJiZvLnBhcmVudE5vZGU9PXQudGFyZ2V0P3d2KG8pOnQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoLGY9MDtmPHQuYWRkZWROb2Rlcy5sZW5ndGg7ZisrKWUucHVzaCh0LmFkZGVkTm9kZXNbZl0pO3ZhciBsPW4ubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LHUsMSk7cmV0dXJue2Zyb206cCx0bzpsfX1yZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZT97ZnJvbTpuLnBvc0F0U3RhcnQtbi5ib3JkZXIsdG86bi5wb3NBdEVuZCtuLmJvcmRlcn06e2Zyb206bi5wb3NBdFN0YXJ0LHRvOm4ucG9zQXRFbmQsdHlwZU92ZXI6dC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfX07dmFyIEZ5PSExO2Z1bmN0aW9uIGp5KHQpe0Z5fHwoRnk9ITAsIm5vcm1hbCI9PWdldENvbXB1dGVkU3R5bGUodC5kb20pLndoaXRlU3BhY2UmJmNvbnNvbGVbIndhcm4iXSgiUHJvc2VNaXJyb3IgZXhwZWN0cyB0aGUgQ1NTIHdoaXRlLXNwYWNlIHByb3BlcnR5IHRvIGJlIHNldCwgcHJlZmVyYWJseSB0byAncHJlLXdyYXAnLiBJdCBpcyByZWNvbW1lbmRlZCB0byBsb2FkIHN0eWxlL3Byb3NlbWlycm9yLmNzcyBmcm9tIHRoZSBwcm9zZW1pcnJvci12aWV3IHBhY2thZ2UuIikpfXZhciBfeT17fSwkeT17fTtmdW5jdGlvbiBKeSh0KXt0LnNoaWZ0S2V5PSExLHQubW91c2VEb3duPW51bGwsdC5sYXN0S2V5Q29kZT1udWxsLHQubGFzdEtleUNvZGVUaW1lPTAsdC5sYXN0Q2xpY2s9e3RpbWU6MCx4OjAseTowLHR5cGU6IiJ9LHQubGFzdFNlbGVjdGlvbk9yaWdpbj1udWxsLHQubGFzdFNlbGVjdGlvblRpbWU9MCx0Lmxhc3RJT1NFbnRlcj0wLHQuY29tcG9zaW5nPSExLHQuY29tcG9zaW5nVGltZW91dD1udWxsLHQuY29tcG9zaXRpb25Ob2Rlcz1bXSx0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LHQuZG9tT2JzZXJ2ZXI9bmV3IEJ5KHQsKGZ1bmN0aW9uKGUsbixyLG8pe3JldHVybiBkeSh0LGUsbixyLG8pfSkpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmRvbUNoYW5nZUNvdW50PTAsdC5ldmVudEhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGU9ZnVuY3Rpb24oZSl7dmFyIG49X3lbZV07dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXT1mdW5jdGlvbihlKXshSHkodCxlKXx8V3kodCxlKXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiAkeXx8bih0LGUpfSl9O2Zvcih2YXIgbiBpbiBfeSllKG4pO2x2LnNhZmFyaSYmdC5kb20uYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpLHF5KHQpfWZ1bmN0aW9uIEx5KHQsZSl7dC5sYXN0U2VsZWN0aW9uT3JpZ2luPWUsdC5sYXN0U2VsZWN0aW9uVGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uIFZ5KHQpe2Zvcih2YXIgZSBpbiB0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmV2ZW50SGFuZGxlcnMpdC5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXSk7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCl9ZnVuY3Rpb24gcXkodCl7dC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpdC5ldmVudEhhbmRsZXJzW25dfHx0LmRvbS5hZGRFdmVudExpc3RlbmVyKG4sdC5ldmVudEhhbmRsZXJzW25dPWZ1bmN0aW9uKGUpe3JldHVybiBXeSh0LGUpfSl9KSl9ZnVuY3Rpb24gV3kodCxlKXtyZXR1cm4gdC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24obil7dmFyIHI9bltlLnR5cGVdO3JldHVybiEhciYmKHIodCxlKXx8ZS5kZWZhdWx0UHJldmVudGVkKX0pKX1mdW5jdGlvbiBIeSh0LGUpe2lmKCFlLmJ1YmJsZXMpcmV0dXJuITA7aWYoZS5kZWZhdWx0UHJldmVudGVkKXJldHVybiExO2Zvcih2YXIgbj1lLnRhcmdldDtuIT10LmRvbTtuPW4ucGFyZW50Tm9kZSlpZighbnx8MTE9PW4ubm9kZVR5cGV8fG4ucG1WaWV3RGVzYyYmbi5wbVZpZXdEZXNjLnN0b3BFdmVudChlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBLeSh0LGUpe1d5KHQsZSl8fCFfeVtlLnR5cGVdfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluICR5fHxfeVtlLnR5cGVdKHQsZSl9ZnVuY3Rpb24gVXkodCl7cmV0dXJue2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9fWZ1bmN0aW9uIEd5KHQsZSl7dmFyIG49ZS54LXQuY2xpZW50WCxyPWUueS10LmNsaWVudFk7cmV0dXJuIG4qbityKnI8MTAwfWZ1bmN0aW9uIFh5KHQsZSxuLHIsbyl7aWYoLTE9PXIpcmV0dXJuITE7Zm9yKHZhciBpPXQuc3RhdGUuZG9jLnJlc29sdmUocikscz1mdW5jdGlvbihyKXtpZih0LnNvbWVQcm9wKGUsKGZ1bmN0aW9uKGUpe3JldHVybiByPmkuZGVwdGg/ZSh0LG4saS5ub2RlQWZ0ZXIsaS5iZWZvcmUociksbywhMCk6ZSh0LG4saS5ub2RlKHIpLGkuYmVmb3JlKHIpLG8sITEpfSkpKXJldHVybnt2OiEwfX0sYT1pLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9cyhhKTtpZihjKXJldHVybiBjLnZ9cmV0dXJuITF9ZnVuY3Rpb24gWXkodCxlLG4pe3QuZm9jdXNlZHx8dC5mb2N1cygpO3ZhciByPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpOyJwb2ludGVyIj09biYmci5zZXRNZXRhKCJwb2ludGVyIiwhMCksdC5kaXNwYXRjaChyKX1mdW5jdGlvbiBaeSh0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuPXQuc3RhdGUuZG9jLnJlc29sdmUoZSkscj1uLm5vZGVBZnRlcjtyZXR1cm4hIShyJiZyLmlzQXRvbSYmV2QuaXNTZWxlY3RhYmxlKHIpKSYmKFl5KHQsbmV3IFdkKG4pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIFF5KHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG4scixvPXQuc3RhdGUuc2VsZWN0aW9uO28gaW5zdGFuY2VvZiBXZCYmKG49by5ub2RlKTtmb3IodmFyIGk9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxzPWkuZGVwdGgrMTtzPjA7cy0tKXt2YXIgYT1zPmkuZGVwdGg/aS5ub2RlQWZ0ZXI6aS5ub2RlKHMpO2lmKFdkLmlzU2VsZWN0YWJsZShhKSl7cj1uJiZvLiRmcm9tLmRlcHRoPjAmJnM+PW8uJGZyb20uZGVwdGgmJmkuYmVmb3JlKG8uJGZyb20uZGVwdGgrMSk9PW8uJGZyb20ucG9zP2kuYmVmb3JlKG8uJGZyb20uZGVwdGgpOmkuYmVmb3JlKHMpO2JyZWFrfX1yZXR1cm4gbnVsbCE9ciYmKFl5KHQsV2QuY3JlYXRlKHQuc3RhdGUuZG9jLHIpLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIHRnKHQsZSxuLHIsbyl7cmV0dXJuIFh5KHQsImhhbmRsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fChvP1F5KHQsbik6WnkodCxuKSl9ZnVuY3Rpb24gZWcodCxlLG4scil7cmV0dXJuIFh5KHQsImhhbmRsZURvdWJsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlRG91YmxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl9ZnVuY3Rpb24gbmcodCxlLG4scil7cmV0dXJuIFh5KHQsImhhbmRsZVRyaXBsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlVHJpcGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fHJnKHQsbil9ZnVuY3Rpb24gcmcodCxlKXt2YXIgbj10LnN0YXRlLmRvYztpZigtMT09ZSlyZXR1cm4hIW4uaW5saW5lQ29udGVudCYmKFl5KHQsVmQuY3JlYXRlKG4sMCxuLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKSwhMCk7Zm9yKHZhciByPW4ucmVzb2x2ZShlKSxvPXIuZGVwdGgrMTtvPjA7by0tKXt2YXIgaT1vPnIuZGVwdGg/ci5ub2RlQWZ0ZXI6ci5ub2RlKG8pLHM9ci5iZWZvcmUobyk7aWYoaS5pbmxpbmVDb250ZW50KVl5KHQsVmQuY3JlYXRlKG4scysxLHMrMStpLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKTtlbHNle2lmKCFXZC5pc1NlbGVjdGFibGUoaSkpY29udGludWU7WXkodCxXZC5jcmVhdGUobixzKSwicG9pbnRlciIpfXJldHVybiEwfX1mdW5jdGlvbiBvZyh0KXtyZXR1cm4gcGcodCl9JHkua2V5ZG93bj1mdW5jdGlvbih0LGUpe2lmKHQuc2hpZnRLZXk9MTY9PWUua2V5Q29kZXx8ZS5zaGlmdEtleSwhYWcodCxlKSlpZih0LmRvbU9ic2VydmVyLmZvcmNlRmx1c2goKSx0Lmxhc3RLZXlDb2RlPWUua2V5Q29kZSx0Lmxhc3RLZXlDb2RlVGltZT1EYXRlLm5vdygpLCFsdi5pb3N8fDEzIT1lLmtleUNvZGV8fGUuY3RybEtleXx8ZS5hbHRLZXl8fGUubWV0YUtleSl0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKXx8WW0odCxlKT9lLnByZXZlbnREZWZhdWx0KCk6THkodCwia2V5Iik7ZWxzZXt2YXIgbj1EYXRlLm5vdygpO3QubGFzdElPU0VudGVyPW4sc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Lmxhc3RJT1NFbnRlcj09biYmKHQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LEV2KDEzLCJFbnRlciIpKX0pKSx0Lmxhc3RJT1NFbnRlcj0wKX0pLDUwKX19LCR5LmtleXVwPWZ1bmN0aW9uKHQsZSl7MTY9PWUua2V5Q29kZSYmKHQuc2hpZnRLZXk9ITEpfSwkeS5rZXlwcmVzcz1mdW5jdGlvbih0LGUpe2lmKCEoYWcodCxlKXx8IWUuY2hhckNvZGV8fGUuY3RybEtleSYmIWUuYWx0S2V5fHxsdi5tYWMmJmUubWV0YUtleSkpaWYodC5zb21lUHJvcCgiaGFuZGxlS2V5UHJlc3MiLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUpfSkpKWUucHJldmVudERlZmF1bHQoKTtlbHNle3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uO2lmKCEobiBpbnN0YW5jZW9mIFZkKXx8IW4uJGZyb20uc2FtZVBhcmVudChuLiR0bykpe3ZhciByPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSk7dC5zb21lUHJvcCgiaGFuZGxlVGV4dElucHV0IiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxuLiRmcm9tLnBvcyxuLiR0by5wb3Mscil9KSl8fHQuZGlzcGF0Y2godC5zdGF0ZS50ci5pbnNlcnRUZXh0KHIpLnNjcm9sbEludG9WaWV3KCkpLGUucHJldmVudERlZmF1bHQoKX19fTt2YXIgaWc9bHYubWFjPyJtZXRhS2V5IjoiY3RybEtleSI7X3kubW91c2Vkb3duPWZ1bmN0aW9uKHQsZSl7dC5zaGlmdEtleT1lLnNoaWZ0S2V5O3ZhciBuPW9nKHQpLHI9RGF0ZS5ub3coKSxvPSJzaW5nbGVDbGljayI7ci10Lmxhc3RDbGljay50aW1lPDUwMCYmR3koZSx0Lmxhc3RDbGljaykmJiFlW2lnXSYmKCJzaW5nbGVDbGljayI9PXQubGFzdENsaWNrLnR5cGU/bz0iZG91YmxlQ2xpY2siOiJkb3VibGVDbGljayI9PXQubGFzdENsaWNrLnR5cGUmJihvPSJ0cmlwbGVDbGljayIpKSx0Lmxhc3RDbGljaz17dGltZTpyLHg6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHR5cGU6b307dmFyIGk9dC5wb3NBdENvb3JkcyhVeShlKSk7aSYmKCJzaW5nbGVDbGljayI9PW8/dC5tb3VzZURvd249bmV3IHNnKHQsaSxlLG4pOigiZG91YmxlQ2xpY2siPT1vP2VnOm5nKSh0LGkucG9zLGkuaW5zaWRlLGUpP2UucHJldmVudERlZmF1bHQoKTpMeSh0LCJwb2ludGVyIikpfTt2YXIgc2c9ZnVuY3Rpb24odCxlLG4scil7dmFyIG8saSxzPXRoaXM7aWYodGhpcy52aWV3PXQsdGhpcy5zdGFydERvYz10LnN0YXRlLmRvYyx0aGlzLnBvcz1lLHRoaXMuZXZlbnQ9bix0aGlzLmZsdXNoZWQ9cix0aGlzLnNlbGVjdE5vZGU9bltpZ10sdGhpcy5hbGxvd0RlZmF1bHQ9bi5zaGlmdEtleSxlLmluc2lkZT4tMSlvPXQuc3RhdGUuZG9jLm5vZGVBdChlLmluc2lkZSksaT1lLmluc2lkZTtlbHNle3ZhciBhPXQuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpO289YS5wYXJlbnQsaT1hLmRlcHRoP2EuYmVmb3JlKCk6MH10aGlzLm1pZ2h0RHJhZz1udWxsO3ZhciBjPXI/bnVsbDpuLnRhcmdldCxoPWM/dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGMsITApOm51bGw7dGhpcy50YXJnZXQ9aD9oLmRvbTpudWxsLChvLnR5cGUuc3BlYy5kcmFnZ2FibGUmJiExIT09by50eXBlLnNwZWMuc2VsZWN0YWJsZXx8dC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBXZCYmaT09dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSkmJih0aGlzLm1pZ2h0RHJhZz17bm9kZTpvLHBvczppLGFkZEF0dHI6dGhpcy50YXJnZXQmJiF0aGlzLnRhcmdldC5kcmFnZ2FibGUsc2V0VW5lZGl0YWJsZTp0aGlzLnRhcmdldCYmbHYuZ2Vja28mJiF0aGlzLnRhcmdldC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpfSksdGhpcy50YXJnZXQmJnRoaXMubWlnaHREcmFnJiYodGhpcy5taWdodERyYWcuYWRkQXR0cnx8dGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSkmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITApLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHMudGFyZ2V0LnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwiZmFsc2UiKX0pLDIwKSx0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RhcnQoKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXA9dGhpcy51cC5iaW5kKHRoaXMpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmU9dGhpcy5tb3ZlLmJpbmQodGhpcykpLEx5KHQsInBvaW50ZXIiKX07ZnVuY3Rpb24gYWcodCxlKXtyZXR1cm4hIXQuY29tcG9zaW5nfHwhIShsdi5zYWZhcmkmJk1hdGguYWJzKGUudGltZVN0YW1wLXQuY29tcG9zaXRpb25FbmRlZEF0KTw1MDApJiYodC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCwhMCl9c2cucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwKSx0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZSksdGhpcy5taWdodERyYWcmJnRoaXMudGFyZ2V0JiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImRyYWdnYWJsZSIpLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHRoaXMudmlldy5tb3VzZURvd249bnVsbH0sc2cucHJvdG90eXBlLnVwPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSgpLHRoaXMudmlldy5kb20uY29udGFpbnMoMz09dC50YXJnZXQubm9kZVR5cGU/dC50YXJnZXQucGFyZW50Tm9kZTp0LnRhcmdldCkpe3ZhciBlPXRoaXMucG9zO3RoaXMudmlldy5zdGF0ZS5kb2MhPXRoaXMuc3RhcnREb2MmJihlPXRoaXMudmlldy5wb3NBdENvb3JkcyhVeSh0KSkpLHRoaXMuYWxsb3dEZWZhdWx0fHwhZT9MeSh0aGlzLnZpZXcsInBvaW50ZXIiKTp0Zyh0aGlzLnZpZXcsZS5wb3MsZS5pbnNpZGUsdCx0aGlzLnNlbGVjdE5vZGUpP3QucHJldmVudERlZmF1bHQoKTohdGhpcy5mbHVzaGVkJiYoIWx2LmNocm9tZXx8dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIFZkfHxlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50byk/THkodGhpcy52aWV3LCJwb2ludGVyIik6KFl5KHRoaXMudmlldywkZC5uZWFyKHRoaXMudmlldy5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcykpLCJwb2ludGVyIiksdC5wcmV2ZW50RGVmYXVsdCgpKX19LHNnLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKHQpeyF0aGlzLmFsbG93RGVmYXVsdCYmKE1hdGguYWJzKHRoaXMuZXZlbnQueC10LmNsaWVudFgpPjR8fE1hdGguYWJzKHRoaXMuZXZlbnQueS10LmNsaWVudFkpPjQpJiYodGhpcy5hbGxvd0RlZmF1bHQ9ITApLEx5KHRoaXMudmlldywicG9pbnRlciIpfSxfeS50b3VjaGRvd249ZnVuY3Rpb24odCl7b2codCksTHkodCwicG9pbnRlciIpfSxfeS5jb250ZXh0bWVudT1mdW5jdGlvbih0KXtyZXR1cm4gb2codCl9O3ZhciBjZz1sdi5hbmRyb2lkPzVlMzotMTtmdW5jdGlvbiBoZyh0LGUpe2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpLGU+LTEmJih0LmNvbXBvc2luZ1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gcGcodCl9KSxlKSl9ZnVuY3Rpb24gcGcodCxlKXt0LmRvbU9ic2VydmVyLmZvcmNlRmx1c2goKSx0LmNvbXBvc2luZz0hMTt3aGlsZSh0LmNvbXBvc2l0aW9uTm9kZXMubGVuZ3RoPjApdC5jb21wb3NpdGlvbk5vZGVzLnBvcCgpLm1hcmtQYXJlbnRzRGlydHkoKTtpZihlfHx0LmRvY1ZpZXcuZGlydHkpe3ZhciBuPVptKHQpO3JldHVybiBuLmVxKHQuc3RhdGUuc2VsZWN0aW9uKT90LnVwZGF0ZVN0YXRlKHQuc3RhdGUpOnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24obikpLCEwfXJldHVybiExfWZ1bmN0aW9uIHVnKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyLmFwcGVuZENoaWxkKGUpLHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4Ijt2YXIgbz1nZXRTZWxlY3Rpb24oKSxpPW4uY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGVDb250ZW50cyhlKSx0LmRvbS5ibHVyKCksby5yZW1vdmVBbGxSYW5nZXMoKSxvLmFkZFJhbmdlKGkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5ib2R5LnJlbW92ZUNoaWxkKHIpLHQuZm9jdXMoKX0pLDUwKX0keS5jb21wb3NpdGlvbnN0YXJ0PSR5LmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmNvbXBvc2luZyl7dC5kb21PYnNlcnZlci5mbHVzaCgpO3ZhciBlPXQuc3RhdGUsbj1lLnNlbGVjdGlvbi4kZnJvbTtpZihlLnNlbGVjdGlvbi5lbXB0eSYmKGUuc3RvcmVkTWFya3N8fCFuLnRleHRPZmZzZXQmJm4ucGFyZW50T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3Muc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuITE9PT10LnR5cGUuc3BlYy5pbmNsdXNpdmV9KSkpKXQubWFya0N1cnNvcj10LnN0YXRlLnN0b3JlZE1hcmtzfHxuLm1hcmtzKCkscGcodCwhMCksdC5tYXJrQ3Vyc29yPW51bGw7ZWxzZSBpZihwZyh0KSxsdi5nZWNrbyYmZS5zZWxlY3Rpb24uZW1wdHkmJm4ucGFyZW50T2Zmc2V0JiYhbi50ZXh0T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3MubGVuZ3RoKWZvcih2YXIgcj10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbz1yLmZvY3VzTm9kZSxpPXIuZm9jdXNPZmZzZXQ7byYmMT09by5ub2RlVHlwZSYmMCE9aTspe3ZhciBzPWk8MD9vLmxhc3RDaGlsZDpvLmNoaWxkTm9kZXNbaS0xXTtpZighcylicmVhaztpZigzPT1zLm5vZGVUeXBlKXtyLmNvbGxhcHNlKHMscy5ub2RlVmFsdWUubGVuZ3RoKTticmVha31vPXMsaT0tMX10LmNvbXBvc2luZz0hMH1oZyh0LGNnKX0sJHkuY29tcG9zaXRpb25lbmQ9ZnVuY3Rpb24odCxlKXt0LmNvbXBvc2luZyYmKHQuY29tcG9zaW5nPSExLHQuY29tcG9zaXRpb25FbmRlZEF0PWUudGltZVN0YW1wLGhnKHQsMjApKX07dmFyIGZnPWx2LmllJiZsdi5pZV92ZXJzaW9uPDE1fHxsdi5pb3MmJmx2LndlYmtpdF92ZXJzaW9uPDYwNDtmdW5jdGlvbiBsZyh0KXtyZXR1cm4gMD09dC5vcGVuU3RhcnQmJjA9PXQub3BlbkVuZCYmMT09dC5jb250ZW50LmNoaWxkQ291bnQ/dC5jb250ZW50LmZpcnN0Q2hpbGQ6bnVsbH1mdW5jdGlvbiBkZyh0LGUpe3ZhciBuPXQuZG9tLm93bmVyRG9jdW1lbnQscj10LnNoaWZ0S2V5fHx0LnN0YXRlLnNlbGVjdGlvbi4kZnJvbS5wYXJlbnQudHlwZS5zcGVjLmNvZGUsbz1uLmJvZHkuYXBwZW5kQ2hpbGQobi5jcmVhdGVFbGVtZW50KHI/InRleHRhcmVhIjoiZGl2IikpO3J8fChvLmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIpLG8uc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4IixvLmZvY3VzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZvY3VzKCksbi5ib2R5LnJlbW92ZUNoaWxkKG8pLHI/dmcodCxvLnZhbHVlLG51bGwsZSk6dmcodCxvLnRleHRDb250ZW50LG8uaW5uZXJIVE1MLGUpfSksNTApfWZ1bmN0aW9uIHZnKHQsZSxuLHIpe3ZhciBvPWJ5KHQsZSxuLHQuc2hpZnRLZXksdC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20pO2lmKCF0LnNvbWVQcm9wKCJoYW5kbGVQYXN0ZSIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQscixvfHxQZi5lbXB0eSl9KSkmJm8pe3ZhciBpPWxnKG8pLHM9aT90LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKGksdC5zaGlmdEtleSk6dC5zdGF0ZS50ci5yZXBsYWNlU2VsZWN0aW9uKG8pO3QuZGlzcGF0Y2gocy5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInBhc3RlIiwhMCkuc2V0TWV0YSgidWlFdmVudCIsInBhc3RlIikpfX1feS5jb3B5PSR5LmN1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLHI9ImN1dCI9PWUudHlwZTtpZighbi5lbXB0eSl7dmFyIG89Zmc/bnVsbDplLmNsaXBib2FyZERhdGEsaT1uLmNvbnRlbnQoKSxzPXh5KHQsaSksYT1zLmRvbSxjPXMudGV4dDtvPyhlLnByZXZlbnREZWZhdWx0KCksby5jbGVhckRhdGEoKSxvLnNldERhdGEoInRleHQvaHRtbCIsYS5pbm5lckhUTUwpLG8uc2V0RGF0YSgidGV4dC9wbGFpbiIsYykpOnVnKHQsYSksciYmdC5kaXNwYXRjaCh0LnN0YXRlLnRyLmRlbGV0ZVNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCkuc2V0TWV0YSgidWlFdmVudCIsImN1dCIpKX19LCR5LnBhc3RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49Zmc/bnVsbDplLmNsaXBib2FyZERhdGEscj1uJiZuLmdldERhdGEoInRleHQvaHRtbCIpLG89biYmbi5nZXREYXRhKCJ0ZXh0L3BsYWluIik7biYmKHJ8fG98fG4uZmlsZXMubGVuZ3RoKT8odmcodCxvLHIsZSksZS5wcmV2ZW50RGVmYXVsdCgpKTpkZyh0LGUpfTt2YXIgbWc9ZnVuY3Rpb24odCxlKXt0aGlzLnNsaWNlPXQsdGhpcy5tb3ZlPWV9LHlnPWx2Lm1hYz8iYWx0S2V5IjoiY3RybEtleSI7Zm9yKHZhciBnZyBpbiBfeS5kcmFnc3RhcnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm1vdXNlRG93bjtpZihuJiZuLmRvbmUoKSxlLmRhdGFUcmFuc2Zlcil7dmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb24sbz1yLmVtcHR5P251bGw6dC5wb3NBdENvb3JkcyhVeShlKSk7aWYobyYmby5wb3M+PXIuZnJvbSYmby5wb3M8PShyIGluc3RhbmNlb2YgV2Q/ci50by0xOnIudG8pKTtlbHNlIGlmKG4mJm4ubWlnaHREcmFnKXQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oV2QuY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighaXx8IWkubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxpPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oV2QuY3JlYXRlKHQuc3RhdGUuZG9jLGkucG9zQmVmb3JlKSkpfXZhciBzPXQuc3RhdGUuc2VsZWN0aW9uLmNvbnRlbnQoKSxhPXh5KHQscyksYz1hLmRvbSxoPWEudGV4dDtlLmRhdGFUcmFuc2Zlci5jbGVhckRhdGEoKSxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKGZnPyJUZXh0IjoidGV4dC9odG1sIixjLmlubmVySFRNTCksZmd8fGUuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQvcGxhaW4iLGgpLHQuZHJhZ2dpbmc9bmV3IG1nKHMsIWVbeWddKX19LF95LmRyYWdlbmQ9ZnVuY3Rpb24odCl7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZHJhZ2dpbmc9bnVsbH0pLDUwKX0sJHkuZHJhZ292ZXI9JHkuZHJhZ2VudGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKX0sJHkuZHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZHJhZ2dpbmc7aWYodC5kcmFnZ2luZz1udWxsLGUuZGF0YVRyYW5zZmVyKXt2YXIgcj10LnBvc0F0Q29vcmRzKFV5KGUpKTtpZihyKXt2YXIgbz10LnN0YXRlLmRvYy5yZXNvbHZlKHIucG9zKTtpZihvKXt2YXIgaT1uJiZuLnNsaWNlfHxieSh0LGUuZGF0YVRyYW5zZmVyLmdldERhdGEoZmc/IlRleHQiOiJ0ZXh0L3BsYWluIiksZmc/bnVsbDplLmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0L2h0bWwiKSwhMSxvKTtpZih0LnNvbWVQcm9wKCJoYW5kbGVEcm9wIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLGl8fFBmLmVtcHR5LG4mJm4ubW92ZSl9KSkpZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoaSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBzPWk/eWQodC5zdGF0ZS5kb2Msby5wb3MsaSk6by5wb3M7bnVsbD09cyYmKHM9by5wb3MpO3ZhciBhPXQuc3RhdGUudHI7biYmbi5tb3ZlJiZhLmRlbGV0ZVNlbGVjdGlvbigpO3ZhciBjPWEubWFwcGluZy5tYXAocyksaD0wPT1pLm9wZW5TdGFydCYmMD09aS5vcGVuRW5kJiYxPT1pLmNvbnRlbnQuY2hpbGRDb3VudCxwPWEuZG9jO2lmKGg/YS5yZXBsYWNlUmFuZ2VXaXRoKGMsYyxpLmNvbnRlbnQuZmlyc3RDaGlsZCk6YS5yZXBsYWNlUmFuZ2UoYyxjLGkpLCFhLmRvYy5lcShwKSl7dmFyIHU9YS5kb2MucmVzb2x2ZShjKTtoJiZXZC5pc1NlbGVjdGFibGUoaS5jb250ZW50LmZpcnN0Q2hpbGQpJiZ1Lm5vZGVBZnRlciYmdS5ub2RlQWZ0ZXIuc2FtZU1hcmt1cChpLmNvbnRlbnQuZmlyc3RDaGlsZCk/YS5zZXRTZWxlY3Rpb24obmV3IFdkKHUpKTphLnNldFNlbGVjdGlvbihjeSh0LHUsYS5kb2MucmVzb2x2ZShhLm1hcHBpbmcubWFwKHMpKSkpLHQuZm9jdXMoKSx0LmRpc3BhdGNoKGEuc2V0TWV0YSgidWlFdmVudCIsImRyb3AiKSl9fX19fX0sX3kuZm9jdXM9ZnVuY3Rpb24odCl7dC5mb2N1c2VkfHwodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmZvY3VzZWQ9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmRvY1ZpZXcmJnQuaGFzRm9jdXMoKSYmIXQuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh0LnJvb3QuZ2V0U2VsZWN0aW9uKCkpJiZRbSh0KX0pLDIwKSl9LF95LmJsdXI9ZnVuY3Rpb24odCl7dC5mb2N1c2VkJiYodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHt9KSx0LmZvY3VzZWQ9ITEpfSxfeS5iZWZvcmVpbnB1dD1mdW5jdGlvbih0LGUpe2lmKGx2LmNocm9tZSYmbHYuYW5kcm9pZCYmImRlbGV0ZUNvbnRlbnRCYWNrd2FyZCI9PWUuaW5wdXRUeXBlKXt2YXIgbj10LmRvbUNoYW5nZUNvdW50O3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5kb21DaGFuZ2VDb3VudD09biYmKHQuZG9tLmJsdXIoKSx0LmZvY3VzKCksIXQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LEV2KDgsIkJhY2tzcGFjZSIpKX0pKSkpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLHI9ZS4kY3Vyc29yO3ImJnIucG9zPjAmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGUoci5wb3MtMSxyLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSl9fSksNTApfX0sJHkpX3lbZ2ddPSR5W2dnXTtmdW5jdGlvbiB3Zyh0LGUpe2lmKHQ9PWUpcmV0dXJuITA7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWVbbl0pcmV0dXJuITE7Zm9yKHZhciByIGluIGUpaWYoIShyIGluIHQpKXJldHVybiExO3JldHVybiEwfXZhciB4Zz1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHxNZyx0aGlzLnNpZGU9dGhpcy5zcGVjLnNpZGV8fDAsdGhpcy50b0RPTT10fTt4Zy5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLHRoaXMuc2lkZTwwPy0xOjEpLGk9by5wb3Mscz1vLmRlbGV0ZWQ7cmV0dXJuIHM/bnVsbDpuZXcgU2coaS1uLGktbix0aGlzKX0seGcucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LHhnLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIHhnJiYodGhpcy5zcGVjLmtleSYmdGhpcy5zcGVjLmtleT09dC5zcGVjLmtleXx8dGhpcy50b0RPTT09dC50b0RPTSYmd2codGhpcy5zcGVjLHQuc3BlYykpfTt2YXIgYmc9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8TWcsdGhpcy5hdHRycz10fTtiZy5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwKGUuZnJvbStyLHRoaXMuc3BlYy5pbmNsdXNpdmVTdGFydD8tMToxKS1uLGk9dC5tYXAoZS50bytyLHRoaXMuc3BlYy5pbmNsdXNpdmVFbmQ/MTotMSktbjtyZXR1cm4gbz49aT9udWxsOm5ldyBTZyhvLGksdGhpcyl9LGJnLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZyb208ZS50b30sYmcucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2YgYmcmJndnKHRoaXMuYXR0cnMsdC5hdHRycykmJndnKHRoaXMuc3BlYyx0LnNwZWMpfSxiZy5pcz1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlIGluc3RhbmNlb2YgYmd9O3ZhciBrZz1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHxNZyx0aGlzLmF0dHJzPXR9O2tnLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXBSZXN1bHQoZS5mcm9tK3IsMSk7aWYoby5kZWxldGVkKXJldHVybiBudWxsO3ZhciBpPXQubWFwUmVzdWx0KGUudG8rciwtMSk7cmV0dXJuIGkuZGVsZXRlZHx8aS5wb3M8PW8ucG9zP251bGw6bmV3IFNnKG8ucG9zLW4saS5wb3Mtbix0aGlzKX0sa2cucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jb250ZW50LmZpbmRJbmRleChlLmZyb20pLHI9bi5pbmRleCxvPW4ub2Zmc2V0O3JldHVybiBvPT1lLmZyb20mJm8rdC5jaGlsZChyKS5ub2RlU2l6ZT09ZS50b30sa2cucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2Yga2cmJndnKHRoaXMuYXR0cnMsdC5hdHRycykmJndnKHRoaXMuc3BlYyx0LnNwZWMpfTt2YXIgU2c9ZnVuY3Rpb24odCxlLG4pe3RoaXMuZnJvbT10LHRoaXMudG89ZSx0aGlzLnR5cGU9bn0sT2c9e3NwZWM6e2NvbmZpZ3VyYWJsZTohMH19O1NnLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBTZyh0LGUsdGhpcy50eXBlKX0sU2cucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHRoaXMudHlwZS5lcSh0LnR5cGUpJiZ0aGlzLmZyb20rZT09dC5mcm9tJiZ0aGlzLnRvK2U9PXQudG99LFNnLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGUubWFwKHQsdGhpcyxlLG4pfSxTZy53aWRnZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgU2codCx0LG5ldyB4ZyhlLG4pKX0sU2cuaW5saW5lPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuZXcgU2codCxlLG5ldyBiZyhuLHIpKX0sU2cubm9kZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IFNnKHQsZSxuZXcga2cobixyKSl9LE9nLnNwZWMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhTZy5wcm90b3R5cGUsT2cpO3ZhciBDZz1bXSxNZz17fSxUZz1mdW5jdGlvbih0LGUpe3RoaXMubG9jYWw9dCYmdC5sZW5ndGg/dDpDZyx0aGlzLmNoaWxkcmVuPWUmJmUubGVuZ3RoP2U6Q2d9O1RnLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD9QZyhlLHQsMCxNZyk6Tmd9LFRnLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gdGhpcy5maW5kSW5uZXIobnVsbD09dD8wOnQsbnVsbD09ZT8xZTk6ZSxyLDAsbikscn0sVGcucHJvdG90eXBlLmZpbmRJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT0wO2k8dGhpcy5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLmxvY2FsW2ldO3MuZnJvbTw9ZSYmcy50bz49dCYmKCFvfHxvKHMuc3BlYykpJiZuLnB1c2gocy5jb3B5KHMuZnJvbStyLHMudG8rcikpfWZvcih2YXIgYT0wO2E8dGhpcy5jaGlsZHJlbi5sZW5ndGg7YSs9MylpZih0aGlzLmNoaWxkcmVuW2FdPGUmJnRoaXMuY2hpbGRyZW5bYSsxXT50KXt2YXIgYz10aGlzLmNoaWxkcmVuW2FdKzE7dGhpcy5jaGlsZHJlblthKzJdLmZpbmRJbm5lcih0LWMsZS1jLG4scitjLG8pfX0sVGcucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXM9PU5nfHwwPT10Lm1hcHMubGVuZ3RoP3RoaXM6dGhpcy5tYXBJbm5lcih0LGUsMCwwLG58fE1nKX0sVGcucHJvdG90eXBlLm1hcElubmVyPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpLHM9MDtzPHRoaXMubG9jYWwubGVuZ3RoO3MrKyl7dmFyIGE9dGhpcy5sb2NhbFtzXS5tYXAodCxuLHIpO2EmJmEudHlwZS52YWxpZChlLGEpPyhpfHwoaT1bXSkpLnB1c2goYSk6by5vblJlbW92ZSYmby5vblJlbW92ZSh0aGlzLmxvY2FsW3NdLnNwZWMpfXJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aD9BZyh0aGlzLmNoaWxkcmVuLGksdCxlLG4scixvKTppP25ldyBUZyhpLnNvcnQoQmcpKTpOZ30sVGcucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD90aGlzPT1OZz9UZy5jcmVhdGUodCxlKTp0aGlzLmFkZElubmVyKHQsZSwwKTp0aGlzfSxUZy5wcm90b3R5cGUuYWRkSW5uZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByLG89dGhpcyxpPTA7dC5mb3JFYWNoKChmdW5jdGlvbih0LHMpe3ZhciBhLGM9cytuO2lmKGE9RGcoZSx0LGMpKXtyfHwocj1vLmNoaWxkcmVuLnNsaWNlKCkpO3doaWxlKGk8ci5sZW5ndGgmJnJbaV08cylpKz0zO3JbaV09PXM/cltpKzJdPXJbaSsyXS5hZGRJbm5lcih0LGEsYysxKTpyLnNwbGljZShpLDAscyxzK3Qubm9kZVNpemUsUGcoYSx0LGMrMSxNZykpLGkrPTN9fSkpO3ZhciBzPVJnKGk/SWcoZSk6ZSwtbik7cmV0dXJuIG5ldyBUZyhzLmxlbmd0aD90aGlzLmxvY2FsLmNvbmNhdChzKS5zb3J0KEJnKTp0aGlzLmxvY2FsLHJ8fHRoaXMuY2hpbGRyZW4pfSxUZy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3JldHVybiAwPT10Lmxlbmd0aHx8dGhpcz09Tmc/dGhpczp0aGlzLnJlbW92ZUlubmVyKHQsMCl9LFRnLnByb3RvdHlwZS5yZW1vdmVJbm5lcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmNoaWxkcmVuLHI9dGhpcy5sb2NhbCxvPTA7bzxuLmxlbmd0aDtvKz0zKXtmb3IodmFyIGk9dm9pZCAwLHM9bltvXStlLGE9bltvKzFdK2UsYz0wLGg9dm9pZCAwO2M8dC5sZW5ndGg7YysrKShoPXRbY10pJiZoLmZyb20+cyYmaC50bzxhJiYodFtjXT1udWxsLChpfHwoaT1bXSkpLnB1c2goaCkpO2lmKGkpe249PXRoaXMuY2hpbGRyZW4mJihuPXRoaXMuY2hpbGRyZW4uc2xpY2UoKSk7dmFyIHA9bltvKzJdLnJlbW92ZUlubmVyKGkscysxKTtwIT1OZz9uW28rMl09cDoobi5zcGxpY2UobywzKSxvLT0zKX19aWYoci5sZW5ndGgpZm9yKHZhciB1PTAsZj12b2lkIDA7dTx0Lmxlbmd0aDt1KyspaWYoZj10W3VdKWZvcih2YXIgbD0wO2w8ci5sZW5ndGg7bCsrKXJbbF0uZXEoZixlKSYmKHI9PXRoaXMubG9jYWwmJihyPXRoaXMubG9jYWwuc2xpY2UoKSksci5zcGxpY2UobC0tLDEpKTtyZXR1cm4gbj09dGhpcy5jaGlsZHJlbiYmcj09dGhpcy5sb2NhbD90aGlzOnIubGVuZ3RofHxuLmxlbmd0aD9uZXcgVGcocixuKTpOZ30sVGcucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYodGhpcz09TmcpcmV0dXJuIHRoaXM7aWYoZS5pc0xlYWYpcmV0dXJuIFRnLmVtcHR5O2Zvcih2YXIgbixyLG89MDtvPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO28rPTMpaWYodGhpcy5jaGlsZHJlbltvXT49dCl7dGhpcy5jaGlsZHJlbltvXT09dCYmKG49dGhpcy5jaGlsZHJlbltvKzJdKTticmVha31mb3IodmFyIGk9dCsxLHM9aStlLmNvbnRlbnQuc2l6ZSxhPTA7YTx0aGlzLmxvY2FsLmxlbmd0aDthKyspe3ZhciBjPXRoaXMubG9jYWxbYV07aWYoYy5mcm9tPHMmJmMudG8+aSYmYy50eXBlIGluc3RhbmNlb2YgYmcpe3ZhciBoPU1hdGgubWF4KGksYy5mcm9tKS1pLHA9TWF0aC5taW4ocyxjLnRvKS1pO2g8cCYmKHJ8fChyPVtdKSkucHVzaChjLmNvcHkoaCxwKSl9fWlmKHIpe3ZhciB1PW5ldyBUZyhyLnNvcnQoQmcpKTtyZXR1cm4gbj9uZXcgRWcoW3Usbl0pOnV9cmV0dXJuIG58fE5nfSxUZy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcz09dClyZXR1cm4hMDtpZighKHQgaW5zdGFuY2VvZiBUZyl8fHRoaXMubG9jYWwubGVuZ3RoIT10LmxvY2FsLmxlbmd0aHx8dGhpcy5jaGlsZHJlbi5sZW5ndGghPXQuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhbC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmxvY2FsW2VdLmVxKHQubG9jYWxbZV0pKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bis9MylpZih0aGlzLmNoaWxkcmVuW25dIT10LmNoaWxkcmVuW25dfHx0aGlzLmNoaWxkcmVuW24rMV0hPXQuY2hpbGRyZW5bbisxXXx8IXRoaXMuY2hpbGRyZW5bbisyXS5lcSh0LmNoaWxkcmVuW24rMl0pKXJldHVybiExO3JldHVybiEwfSxUZy5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe3JldHVybiBGZyh0aGlzLmxvY2Fsc0lubmVyKHQpKX0sVGcucHJvdG90eXBlLmxvY2Fsc0lubmVyPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PU5nKXJldHVybiBDZztpZih0LmlubGluZUNvbnRlbnR8fCF0aGlzLmxvY2FsLnNvbWUoYmcuaXMpKXJldHVybiB0aGlzLmxvY2FsO2Zvcih2YXIgZT1bXSxuPTA7bjx0aGlzLmxvY2FsLmxlbmd0aDtuKyspdGhpcy5sb2NhbFtuXS50eXBlIGluc3RhbmNlb2YgYmd8fGUucHVzaCh0aGlzLmxvY2FsW25dKTtyZXR1cm4gZX07dmFyIE5nPW5ldyBUZztUZy5lbXB0eT1OZyxUZy5yZW1vdmVPdmVybGFwPUZnO3ZhciBFZz1mdW5jdGlvbih0KXt0aGlzLm1lbWJlcnM9dH07ZnVuY3Rpb24gQWcodCxlLG4scixvLGkscyl7Zm9yKHZhciBhPXQuc2xpY2UoKSxjPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgcz0wO3M8YS5sZW5ndGg7cys9Myl7dmFyIGM9YVtzKzFdLGg9dm9pZCAwOy0xPT1jfHx0PmMraXx8KGU+PWFbc10raT9hW3MrMV09LTE6bj49byYmKGg9ci1uLShlLXQpKSYmKGFbc10rPWgsYVtzKzFdKz1oKSl9fSxoPTA7aDxuLm1hcHMubGVuZ3RoO2grKyluLm1hcHNbaF0uZm9yRWFjaChjKTtmb3IodmFyIHA9ITEsdT0wO3U8YS5sZW5ndGg7dSs9MylpZigtMT09YVt1KzFdKXt2YXIgZj1uLm1hcChhW3VdK2kpLGw9Zi1vO2lmKGw8MHx8bD49ci5jb250ZW50LnNpemUpe3A9ITA7Y29udGludWV9dmFyIGQ9bi5tYXAodFt1KzFdK2ksLTEpLHY9ZC1vLG09ci5jb250ZW50LmZpbmRJbmRleChsKSx5PW0uaW5kZXgsZz1tLm9mZnNldCx3PXIubWF5YmVDaGlsZCh5KTtpZih3JiZnPT1sJiZnK3cubm9kZVNpemU9PXYpe3ZhciB4PWFbdSsyXS5tYXBJbm5lcihuLHcsZisxLGFbdV0raSsxLHMpO3ghPU5nPyhhW3VdPWwsYVt1KzFdPXYsYVt1KzJdPXgpOihhW3UrMV09LTIscD0hMCl9ZWxzZSBwPSEwfWlmKHApe3ZhciBiPXpnKGEsdCxlfHxbXSxuLG8saSxzKSxrPVBnKGIsciwwLHMpO2U9ay5sb2NhbDtmb3IodmFyIFM9MDtTPGEubGVuZ3RoO1MrPTMpYVtTKzFdPDAmJihhLnNwbGljZShTLDMpLFMtPTMpO2Zvcih2YXIgTz0wLEM9MDtPPGsuY2hpbGRyZW4ubGVuZ3RoO08rPTMpe3ZhciBNPWsuY2hpbGRyZW5bT107d2hpbGUoQzxhLmxlbmd0aCYmYVtDXTxNKUMrPTM7YS5zcGxpY2UoQywwLGsuY2hpbGRyZW5bT10say5jaGlsZHJlbltPKzFdLGsuY2hpbGRyZW5bTysyXSl9fXJldHVybiBuZXcgVGcoZSYmZS5zb3J0KEJnKSxhKX1mdW5jdGlvbiBSZyh0LGUpe2lmKCFlfHwhdC5sZW5ndGgpcmV0dXJuIHQ7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuLnB1c2gobmV3IFNnKG8uZnJvbStlLG8udG8rZSxvLnR5cGUpKX1yZXR1cm4gbn1mdW5jdGlvbiB6Zyh0LGUsbixyLG8saSxzKXtmdW5jdGlvbiBhKHQsZSl7Zm9yKHZhciBpPTA7aTx0LmxvY2FsLmxlbmd0aDtpKyspe3ZhciBjPXQubG9jYWxbaV0ubWFwKHIsbyxlKTtjP24ucHVzaChjKTpzLm9uUmVtb3ZlJiZzLm9uUmVtb3ZlKHQubG9jYWxbaV0uc3BlYyl9Zm9yKHZhciBoPTA7aDx0LmNoaWxkcmVuLmxlbmd0aDtoKz0zKWEodC5jaGlsZHJlbltoKzJdLHQuY2hpbGRyZW5baF0rZSsxKX1mb3IodmFyIGM9MDtjPHQubGVuZ3RoO2MrPTMpLTE9PXRbYysxXSYmYSh0W2MrMl0sZVtjXStpKzEpO3JldHVybiBufWZ1bmN0aW9uIERnKHQsZSxuKXtpZihlLmlzTGVhZilyZXR1cm4gbnVsbDtmb3IodmFyIHI9bitlLm5vZGVTaXplLG89bnVsbCxpPTAscz12b2lkIDA7aTx0Lmxlbmd0aDtpKyspKHM9dFtpXSkmJnMuZnJvbT5uJiZzLnRvPHImJigob3x8KG89W10pKS5wdXNoKHMpLHRbaV09bnVsbCk7cmV0dXJuIG99ZnVuY3Rpb24gSWcodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyludWxsIT10W25dJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9ZnVuY3Rpb24gUGcodCxlLG4scil7dmFyIG89W10saT0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUscyl7dmFyIGE9RGcodCxlLHMrbik7aWYoYSl7aT0hMDt2YXIgYz1QZyhhLGUsbitzKzEscik7YyE9TmcmJm8ucHVzaChzLHMrZS5ub2RlU2l6ZSxjKX19KSk7Zm9yKHZhciBzPVJnKGk/SWcodCk6dCwtbikuc29ydChCZyksYT0wO2E8cy5sZW5ndGg7YSsrKXNbYV0udHlwZS52YWxpZChlLHNbYV0pfHwoci5vblJlbW92ZSYmci5vblJlbW92ZShzW2FdLnNwZWMpLHMuc3BsaWNlKGEtLSwxKSk7cmV0dXJuIHMubGVuZ3RofHxvLmxlbmd0aD9uZXcgVGcocyxvKTpOZ31mdW5jdGlvbiBCZyh0LGUpe3JldHVybiB0LmZyb20tZS5mcm9tfHx0LnRvLWUudG99ZnVuY3Rpb24gRmcodCl7Zm9yKHZhciBlPXQsbj0wO248ZS5sZW5ndGgtMTtuKyspe3ZhciByPWVbbl07aWYoci5mcm9tIT1yLnRvKWZvcih2YXIgbz1uKzE7bzxlLmxlbmd0aDtvKyspe3ZhciBpPWVbb107aWYoaS5mcm9tIT1yLmZyb20pe2kuZnJvbTxyLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW25dPXIuY29weShyLmZyb20saS5mcm9tKSxqZyhlLG8sci5jb3B5KGkuZnJvbSxyLnRvKSkpO2JyZWFrfWkudG8hPXIudG8mJihlPT10JiYoZT10LnNsaWNlKCkpLGVbb109aS5jb3B5KGkuZnJvbSxyLnRvKSxqZyhlLG8rMSxpLmNvcHkoci50byxpLnRvKSkpfX1yZXR1cm4gZX1mdW5jdGlvbiBqZyh0LGUsbil7d2hpbGUoZTx0Lmxlbmd0aCYmQmcobix0W2VdKT4wKWUrKzt0LnNwbGljZShlLDAsbil9ZnVuY3Rpb24gX2codCl7dmFyIGU9W107cmV0dXJuIHQuc29tZVByb3AoImRlY29yYXRpb25zIiwoZnVuY3Rpb24obil7dmFyIHI9bih0LnN0YXRlKTtyJiZyIT1OZyYmZS5wdXNoKHIpfSkpLHQuY3Vyc29yV3JhcHBlciYmZS5wdXNoKFRnLmNyZWF0ZSh0LnN0YXRlLmRvYyxbdC5jdXJzb3JXcmFwcGVyLmRlY29dKSksRWcuZnJvbShlKX1FZy5wcm90b3R5cGUuZm9yQ2hpbGQ9ZnVuY3Rpb24odCxlKXtpZihlLmlzTGVhZilyZXR1cm4gVGcuZW1wdHk7Zm9yKHZhciBuPVtdLHI9MDtyPHRoaXMubWVtYmVycy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLm1lbWJlcnNbcl0uZm9yQ2hpbGQodCxlKTtvIT1OZyYmKG8gaW5zdGFuY2VvZiBFZz9uPW4uY29uY2F0KG8ubWVtYmVycyk6bi5wdXNoKG8pKX1yZXR1cm4gRWcuZnJvbShuKX0sRWcucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEVnKXx8dC5tZW1iZXJzLmxlbmd0aCE9dGhpcy5tZW1iZXJzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubWVtYmVycy5sZW5ndGg7ZSsrKWlmKCF0aGlzLm1lbWJlcnNbZV0uZXEodC5tZW1iZXJzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sRWcucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMCxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmxvY2Fsc0lubmVyKHQpO2lmKG8ubGVuZ3RoKWlmKGUpe24mJihlPWUuc2xpY2UoKSxuPSExKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyllLnB1c2gob1tpXSl9ZWxzZSBlPW99cmV0dXJuIGU/Rmcobj9lOmUuc29ydChCZykpOkNnfSxFZy5mcm9tPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBOZztjYXNlIDE6cmV0dXJuIHRbMF07ZGVmYXVsdDpyZXR1cm4gbmV3IEVnKHQpfX07dmFyICRnPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcHJvcHM9ZSx0aGlzLnN0YXRlPWUuc3RhdGUsdGhpcy5kaXNwYXRjaD10aGlzLmRpc3BhdGNoLmJpbmQodGhpcyksdGhpcy5fcm9vdD1udWxsLHRoaXMuZm9jdXNlZD0hMSx0aGlzLmRvbT10JiZ0Lm1vdW50fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0JiYodC5hcHBlbmRDaGlsZD90LmFwcGVuZENoaWxkKHRoaXMuZG9tKTp0LmFwcGx5P3QodGhpcy5kb20pOnQubW91bnQmJih0aGlzLm1vdW50ZWQ9ITApKSx0aGlzLmVkaXRhYmxlPXFnKHRoaXMpLHRoaXMubWFya0N1cnNvcj1udWxsLHRoaXMuY3Vyc29yV3JhcHBlcj1udWxsLFZnKHRoaXMpLHRoaXMubm9kZVZpZXdzPUhnKHRoaXMpLHRoaXMuZG9jVmlldz1tbSh0aGlzLnN0YXRlLmRvYyxMZyh0aGlzKSxfZyh0aGlzKSx0aGlzLmRvbSx0aGlzKSx0aGlzLmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwsdGhpcy5kcmFnZ2luZz1udWxsLEp5KHRoaXMpLHRoaXMucGx1Z2luVmlld3M9W10sdGhpcy51cGRhdGVQbHVnaW5WaWV3cygpfSxKZz17cHJvcHM6e2NvbmZpZ3VyYWJsZTohMH0scm9vdDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gTGcodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZS5jbGFzcz0iUHJvc2VNaXJyb3IiLGUuY29udGVudGVkaXRhYmxlPVN0cmluZyh0LmVkaXRhYmxlKSx0LnNvbWVQcm9wKCJhdHRyaWJ1dGVzIiwoZnVuY3Rpb24obil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4mJihuPW4odC5zdGF0ZSkpLG4pZm9yKHZhciByIGluIG4pImNsYXNzIj09cj9lLmNsYXNzKz0iICIrbltyXTplW3JdfHwiY29udGVudGVkaXRhYmxlIj09cnx8Im5vZGVOYW1lIj09cnx8KGVbcl09U3RyaW5nKG5bcl0pKX0pKSxbU2cubm9kZSgwLHQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZSxlKV19ZnVuY3Rpb24gVmcodCl7aWYodC5tYXJrQ3Vyc29yKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTtlLnNldEF0dHJpYnV0ZSgibWFyay1wbGFjZWhvbGRlciIsInRydWUiKSx0LmN1cnNvcldyYXBwZXI9e2RvbTplLGRlY286U2cud2lkZ2V0KHQuc3RhdGUuc2VsZWN0aW9uLmhlYWQsZSx7cmF3OiEwLG1hcmtzOnQubWFya0N1cnNvcn0pfX1lbHNlIHQuY3Vyc29yV3JhcHBlcj1udWxsfWZ1bmN0aW9uIHFnKHQpe3JldHVybiF0LnNvbWVQcm9wKCJlZGl0YWJsZSIsKGZ1bmN0aW9uKGUpe3JldHVybiExPT09ZSh0LnN0YXRlKX0pKX1mdW5jdGlvbiBXZyh0LGUpe3ZhciBuPU1hdGgubWluKHQuJGFuY2hvci5zaGFyZWREZXB0aCh0LmhlYWQpLGUuJGFuY2hvci5zaGFyZWREZXB0aChlLmhlYWQpKTtyZXR1cm4gdC4kYW5jaG9yLnN0YXJ0KG4pIT1lLiRhbmNob3Iuc3RhcnQobil9ZnVuY3Rpb24gSGcodCl7dmFyIGU9e307cmV0dXJuIHQuc29tZVByb3AoIm5vZGVWaWV3cyIsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pfHwoZVtuXT10W25dKX0pKSxlfWZ1bmN0aW9uIEtnKHQsZSl7dmFyIG49MCxyPTA7Zm9yKHZhciBvIGluIHQpe2lmKHRbb10hPWVbb10pcmV0dXJuITA7bisrfWZvcih2YXIgaSBpbiBlKXIrKztyZXR1cm4gbiE9cn1mdW5jdGlvbiBVZyh0KXt2YXIgZT10LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c09mZnNldCxyPWUuZm9jdXNOb2RlO3JldHVybiByJiYxPT1yLm5vZGVUeXBlP1tyLG4sci5jaGlsZE5vZGVzW24tMV0sci5jaGlsZE5vZGVzW25dXTpudWxsfWZ1bmN0aW9uIEdnKHQsZSl7dmFyIG49VWcoZSk7aWYoIW58fDM9PW5bMF0ubm9kZVR5cGUpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYobltyXSE9dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX1KZy5wcm9wcy5nZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9wcm9wcy5zdGF0ZSE9dGhpcy5zdGF0ZSl7dmFyIHQ9dGhpcy5fcHJvcHM7Zm9yKHZhciBlIGluIHRoaXMuX3Byb3BzPXt9LHQpdGhpcy5fcHJvcHNbZV09dFtlXTt0aGlzLl9wcm9wcy5zdGF0ZT10aGlzLnN0YXRlfXJldHVybiB0aGlzLl9wcm9wc30sJGcucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0LmhhbmRsZURPTUV2ZW50cyE9dGhpcy5fcHJvcHMuaGFuZGxlRE9NRXZlbnRzJiZxeSh0aGlzKSx0aGlzLl9wcm9wcz10LHRoaXMudXBkYXRlU3RhdGVJbm5lcih0LnN0YXRlLCEwKX0sJGcucHJvdG90eXBlLnNldFByb3BzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0aGlzLl9wcm9wcyllW25dPXRoaXMuX3Byb3BzW25dO2Zvcih2YXIgciBpbiBlLnN0YXRlPXRoaXMuc3RhdGUsdCllW3JdPXRbcl07dGhpcy51cGRhdGUoZSl9LCRnLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodCx0aGlzLnN0YXRlLnBsdWdpbnMhPXQucGx1Z2lucyl9LCRnLnByb3RvdHlwZS51cGRhdGVTdGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMuc3RhdGUsbz0hMTtpZih0aGlzLnN0YXRlPXQsZSl7dmFyIGk9SGcodGhpcyk7S2coaSx0aGlzLm5vZGVWaWV3cykmJih0aGlzLm5vZGVWaWV3cz1pLG89ITApLHF5KHRoaXMpfXRoaXMuZWRpdGFibGU9cWcodGhpcyksVmcodGhpcyk7dmFyIHM9X2codGhpcyksYT1MZyh0aGlzKSxjPWU/InJlc2V0Ijp0LnNjcm9sbFRvU2VsZWN0aW9uPnIuc2Nyb2xsVG9TZWxlY3Rpb24/InRvIHNlbGVjdGlvbiI6InByZXNlcnZlIixoPW98fCF0aGlzLmRvY1ZpZXcubWF0Y2hlc05vZGUodC5kb2MsYSxzKSxwPWh8fCF0LnNlbGVjdGlvbi5lcShyLnNlbGVjdGlvbiksdT0icHJlc2VydmUiPT1jJiZwJiZudWxsPT10aGlzLmRvbS5zdHlsZS5vdmVyZmxvd0FuY2hvciYmRHYodGhpcyk7aWYocCl7dGhpcy5kb21PYnNlcnZlci5zdG9wKCk7dmFyIGY9aCYmKGx2LmllfHxsdi5jaHJvbWUpJiYhdGhpcy5jb21wb3NpbmcmJiFyLnNlbGVjdGlvbi5lbXB0eSYmIXQuc2VsZWN0aW9uLmVtcHR5JiZXZyhyLnNlbGVjdGlvbix0LnNlbGVjdGlvbik7aWYoaCl7dmFyIGw9bHYuY2hyb21lJiZVZyh0aGlzLnJvb3QpOyFvJiZ0aGlzLmRvY1ZpZXcudXBkYXRlKHQuZG9jLGEscyx0aGlzKXx8KHRoaXMuZG9jVmlldy51cGRhdGVPdXRlckRlY28oW10pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PW1tKHQuZG9jLGEscyx0aGlzLmRvbSx0aGlzKSksbCYmR2cobCx0aGlzLnJvb3QpJiYoZj0hMCl9Znx8ISh0aGlzLm1vdXNlRG93biYmdGhpcy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmVxKHRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKSkmJnV5KHRoaXMpKT9RbSh0aGlzLGYpOihzeSh0aGlzLHQuc2VsZWN0aW9uKSx0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9aWYodGhpcy51cGRhdGVQbHVnaW5WaWV3cyhyKSwicmVzZXQiPT1jKXRoaXMuZG9tLnNjcm9sbFRvcD0wO2Vsc2UgaWYoInRvIHNlbGVjdGlvbiI9PWMpe3ZhciBkPXRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGU7dGhpcy5zb21lUHJvcCgiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb24iLChmdW5jdGlvbih0KXtyZXR1cm4gdChuKX0pKXx8KHQuc2VsZWN0aW9uIGluc3RhbmNlb2YgV2Q/enYodGhpcyx0aGlzLmRvY1ZpZXcuZG9tQWZ0ZXJQb3ModC5zZWxlY3Rpb24uZnJvbSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZCk6enYodGhpcyx0aGlzLmNvb3Jkc0F0UG9zKHQuc2VsZWN0aW9uLmhlYWQpLGQpKX1lbHNlIHUmJlB2KHUpfSwkZy5wcm90b3R5cGUuZGVzdHJveVBsdWdpblZpZXdzPWZ1bmN0aW9uKCl7dmFyIHQ7d2hpbGUodD10aGlzLnBsdWdpblZpZXdzLnBvcCgpKXQuZGVzdHJveSYmdC5kZXN0cm95KCl9LCRnLnByb3RvdHlwZS51cGRhdGVQbHVnaW5WaWV3cz1mdW5jdGlvbih0KXtpZih0JiZ0LnBsdWdpbnM9PXRoaXMuc3RhdGUucGx1Z2lucylmb3IodmFyIGU9MDtlPHRoaXMucGx1Z2luVmlld3MubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5wbHVnaW5WaWV3c1tlXTtuLnVwZGF0ZSYmbi51cGRhdGUodGhpcyx0KX1lbHNle3RoaXMuZGVzdHJveVBsdWdpblZpZXdzKCk7Zm9yKHZhciByPTA7cjx0aGlzLnN0YXRlLnBsdWdpbnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5zdGF0ZS5wbHVnaW5zW3JdO28uc3BlYy52aWV3JiZ0aGlzLnBsdWdpblZpZXdzLnB1c2goby5zcGVjLnZpZXcodGhpcykpfX19LCRnLnByb3RvdHlwZS5zb21lUHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuLHI9dGhpcy5fcHJvcHMmJnRoaXMuX3Byb3BzW3RdO2lmKG51bGwhPXImJihuPWU/ZShyKTpyKSlyZXR1cm4gbjt2YXIgbz10aGlzLnN0YXRlLnBsdWdpbnM7aWYobylmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXS5wcm9wc1t0XTtpZihudWxsIT1zJiYobj1lP2Uocyk6cykpcmV0dXJuIG59fSwkZy5wcm90b3R5cGUuaGFzRm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmFjdGl2ZUVsZW1lbnQ9PXRoaXMuZG9tfSwkZy5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt0aGlzLmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLmVkaXRhYmxlJiZqdih0aGlzLmRvbSksUW0odGhpcyksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfSxKZy5yb290LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Jvb3Q7aWYobnVsbD09dClmb3IodmFyIGU9dGhpcy5kb20ucGFyZW50Tm9kZTtlO2U9ZS5wYXJlbnROb2RlKWlmKDk9PWUubm9kZVR5cGV8fDExPT1lLm5vZGVUeXBlJiZlLmhvc3QpcmV0dXJuIGUuZ2V0U2VsZWN0aW9ufHwoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKX0pLHRoaXMuX3Jvb3Q9ZTtyZXR1cm4gdHx8ZG9jdW1lbnR9LCRnLnByb3RvdHlwZS5wb3NBdENvb3Jkcz1mdW5jdGlvbih0KXtyZXR1cm4gSHYodGhpcyx0KX0sJGcucHJvdG90eXBlLmNvb3Jkc0F0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiBVdih0aGlzLHQpfSwkZy5wcm90b3R5cGUuZG9tQXRQb3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jVmlldy5kb21Gcm9tUG9zKHQpfSwkZy5wcm90b3R5cGUubm9kZURPTT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRvY1ZpZXcuZGVzY0F0KHQpO3JldHVybiBlP2Uubm9kZURPTTpudWxsfSwkZy5wcm90b3R5cGUucG9zQXRET009ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTt2YXIgcj10aGlzLmRvY1ZpZXcucG9zRnJvbURPTSh0LGUsbik7aWYobnVsbD09cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRE9NIHBvc2l0aW9uIG5vdCBpbnNpZGUgdGhlIGVkaXRvciIpO3JldHVybiByfSwkZy5wcm90b3R5cGUuZW5kT2ZUZXh0YmxvY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb20odGhpcyxlfHx0aGlzLnN0YXRlLHQpfSwkZy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZG9jVmlldyYmKFZ5KHRoaXMpLHRoaXMuZGVzdHJveVBsdWdpblZpZXdzKCksdGhpcy5tb3VudGVkPyh0aGlzLmRvY1ZpZXcudXBkYXRlKHRoaXMuc3RhdGUuZG9jLFtdLF9nKHRoaXMpLHRoaXMpLHRoaXMuZG9tLnRleHRDb250ZW50PSIiKTp0aGlzLmRvbS5wYXJlbnROb2RlJiZ0aGlzLmRvbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZG9tKSx0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1udWxsKX0sJGcucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIEt5KHRoaXMsdCl9LCRnLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9wcm9wcy5kaXNwYXRjaFRyYW5zYWN0aW9uO2U/ZS5jYWxsKHRoaXMsdCk6dGhpcy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlLmFwcGx5KHQpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJGcucHJvdG90eXBlLEpnKTt2YXIgWGc9bigiNDBmNyIpLFlnPW4oImYwMmMiKSxaZz1uKCI1NWJlIik7ZnVuY3Rpb24gUWcodCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxpPWUuY2hpbGQocik7aWYobyE9aSl7aWYoIW8uc2FtZU1hcmt1cChpKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1pLnRleHQpe2Zvcih2YXIgcz0wO28udGV4dFtzXT09aS50ZXh0W3NdO3MrKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fGkuY29udGVudC5zaXplKXt2YXIgYT1RZyhvLmNvbnRlbnQsaS5jb250ZW50LG4rMSk7aWYobnVsbCE9YSlyZXR1cm4gYX1uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gdHcodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1pKXJldHVybiBvPT1pP251bGw6e2E6bixiOnJ9O3ZhciBzPXQuY2hpbGQoLS1vKSxhPWUuY2hpbGQoLS1pKSxjPXMubm9kZVNpemU7aWYocyE9YSl7aWYoIXMuc2FtZU1hcmt1cChhKSlyZXR1cm57YTpuLGI6cn07aWYocy5pc1RleHQmJnMudGV4dCE9YS50ZXh0KXt2YXIgaD0wLHA9TWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxhLnRleHQubGVuZ3RoKTt3aGlsZShoPHAmJnMudGV4dFtzLnRleHQubGVuZ3RoLWgtMV09PWEudGV4dFthLnRleHQubGVuZ3RoLWgtMV0paCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKHMuY29udGVudC5zaXplfHxhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9dHcocy5jb250ZW50LGEuY29udGVudCxuLTEsci0xKTtpZih1KXJldHVybiB1fW4tPWMsci09Y31lbHNlIG4tPWMsci09Y319dmFyIGV3PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LG53PXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtldy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIGg9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC1oKSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLWgpLG4scitoKX1zPWN9fSxldy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LGV3LnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGV3LnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IGV3KHIsdGhpcy5zaXplK3Quc2l6ZSl9LGV3LnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgcz10aGlzLmNvbnRlbnRbb10sYT1pK3Mubm9kZVNpemU7YT50JiYoKGk8dHx8YT5lKSYmKHM9cy5pc1RleHQ/cy5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKHMudGV4dC5sZW5ndGgsZS1pKSk6cy5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4ocy5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKHMpLHIrPXMubm9kZVNpemUpLGk9YX1yZXR1cm4gbmV3IGV3KG4scil9LGV3LnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/ZXcuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBldyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LGV3LnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgZXcocixvKX0sZXcucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBldyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxldy5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBldyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sZXcucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LG53LmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LG53Lmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxudy5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxldy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LGV3LnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGV3LnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LGV3LnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLFFnKHRoaXMsdCxlKX0sZXcucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHR3KHRoaXMsdCxlLG4pfSxldy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIG93KDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBvdyh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9vdyhuKzEsaSk6b3cobixyKTtyPWl9fSxldy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxldy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sZXcucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LGV3LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGV3LmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZXcoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0sZXcuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gZXcuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBldyhlfHx0LG4pfSxldy5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBldy5lbXB0eTtpZih0IGluc3RhbmNlb2YgZXcpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IGV3KFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZXcucHJvdG90eXBlLG53KTt2YXIgcnc9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIG93KHQsZSl7cmV0dXJuIHJ3LmluZGV4PXQscncub2Zmc2V0PWUscnd9ZnVuY3Rpb24gaXcodCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIWl3KHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCFpdyh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1ldy5lbXB0eT1uZXcgZXcoW10sMCk7dmFyIHN3PWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBhdyh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWF3LnByb3RvdHlwZSxlfXN3LnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sc3cucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxzdy5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxzdy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZpdyh0aGlzLmF0dHJzLHQuYXR0cnMpfSxzdy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LHN3LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxzdy5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LHN3LnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBzdy5ub25lO2lmKHQgaW5zdGFuY2VvZiBzdylyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LHN3Lm5vbmU9W10sYXcucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxhdy5wcm90b3R5cGUuY29uc3RydWN0b3I9YXcsYXcucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGN3PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxodz17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gcHcodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGg9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGghPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHB3KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB1dyh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPXV3KGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGZ3KHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBhdygiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgYXcoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiBsdyh0LGUsbiwwKX1mdW5jdGlvbiBsdyh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9bHcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPWJ3KG4sdCksYz1hLnN0YXJ0LGg9YS5lbmQ7cmV0dXJuIGd3KGksd3codCxjLGgsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIGd3KHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBndyhpLHh3KHQsZSxyKSl9ZnVuY3Rpb24gZHcodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGF3KCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiB2dyh0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiBkdyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBtdyh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIHl3KHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKG13KHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspbXcoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJm13KGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBndyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBhdygiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gd3codCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJnZ3KHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZ2dyhuLHIsbysxKSxhPVtdO3JldHVybiB5dyhudWxsLHQsbyxhKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyhkdyhpLHMpLG13KGd3KGksd3codCxlLG4scixvKzEpKSxhKSk6KGkmJm13KGd3KGkseHcodCxlLG8rMSkpLGEpLHl3KGUsbixvLGEpLHMmJm13KGd3KHMseHcobixyLG8rMSkpLGEpKSx5dyhyLG51bGwsbyxhKSxuZXcgZXcoYSl9ZnVuY3Rpb24geHcodCxlLG4pe3ZhciByPVtdO2lmKHl3KG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89dncodCxlLG4rMSk7bXcoZ3cobyx4dyh0LGUsbisxKSkscil9cmV0dXJuIHl3KGUsbnVsbCxuLHIpLG5ldyBldyhyKX1mdW5jdGlvbiBidyh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShldy5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fWh3LnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sY3cucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dXcodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IGN3KG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sY3cucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGN3KHB3KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGN3LnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGN3LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxjdy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxjdy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBjdy5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGN3KGV3LmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxjdy5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgY3codCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjdy5wcm90b3R5cGUsaHcpLGN3LmVtcHR5PW5ldyBjdyhldy5lbXB0eSwwLDApO3ZhciBrdz1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxTdz17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtrdy5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxTdy5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sU3cuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LGt3LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LGt3LnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LGt3LnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxrdy5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sa3cucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LGt3LnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sa3cucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sU3cudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LFN3Lm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxTdy5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sa3cucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIHN3Lm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sa3cucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sa3cucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LGt3LnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyBUdyh0aGlzLHQsbil9LGt3LnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LGt3LnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sa3cucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxrdy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sa3cucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxoPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWgpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289aC0xLHIrPWMrMX1yZXR1cm4gbmV3IGt3KGUsbixvKX0sa3cucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248T3cubGVuZ3RoO24rKyl7dmFyIHI9T3dbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPU93W0N3XT1rdy5yZXNvbHZlKHQsZSk7cmV0dXJuIEN3PShDdysxKSVNdyxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhrdy5wcm90b3R5cGUsU3cpO3ZhciBPdz1bXSxDdz0wLE13PTEyLFR3PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LE53PXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O053LnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxOdy5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LE53LnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxOdy5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxOdy5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVHcucHJvdG90eXBlLE53KTt2YXIgRXc9T2JqZWN0LmNyZWF0ZShudWxsKSxBdz1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fGV3LmVtcHR5LHRoaXMubWFya3M9cnx8c3cubm9uZX0sUnc9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtSdy5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxSdy5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sQXcucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LEF3LnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sQXcucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LEF3LnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxBdy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sUncudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LEF3LnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxSdy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sUncubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxBdy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LEF3LnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sQXcucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmaXcodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8RXcpJiZzdy5zYW1lU2V0KHRoaXMubWFya3Msbnx8c3cubm9uZSl9LEF3LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxBdy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sQXcucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxBdy5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gY3cuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgY3coYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sQXcucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxBdy5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sQXcucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sQXcucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LEF3LnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBrdy5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LEF3LnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4ga3cucmVzb2x2ZSh0aGlzLHQpfSxBdy5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxSdy5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sUncuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sUncuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LFJ3LmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LFJ3LmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sUncuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxSdy5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LEF3LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxEdyh0aGlzLm1hcmtzLHQpfSxBdy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxBdy5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPWV3LmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbykscz1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFzfHwhcy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGE9cjthPG87YSsrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChhKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LEF3LnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LEF3LnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LEF3LnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LEF3LnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxBdy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sQXcuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9ZXcuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXcucHJvdG90eXBlLFJ3KTt2YXIgenc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6RHcodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShBdyk7ZnVuY3Rpb24gRHcodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgSXc9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sUHc9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtJdy5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBCdyh0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gSXcuZW1wdHk7dmFyIHI9ancobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89VXcoV3cocikpO3JldHVybiBHdyhvLG4pLG99LEl3LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0sSXcucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxQdy5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFB3LmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxJdy5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sSXcucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIGV3LmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBjPTA7YzxpLm5leHQubGVuZ3RoO2MrPTIpe3ZhciBoPWkubmV4dFtjXSxwPWkubmV4dFtjKzFdO2lmKCFoLmlzVGV4dCYmIWguaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHApKXtyLnB1c2gocCk7dmFyIHU9byhwLHMuY29uY2F0KGgpKTtpZih1KXJldHVybiB1fX19cmV0dXJuIG8odGhpcyxbXSl9LEl3LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LEl3LnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxQdy5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LEl3LnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxJdy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhJdy5wcm90b3R5cGUsUHcpLEl3LmVtcHR5PW5ldyBJdyghMCk7dmFyIEJ3PWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxGdz17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gancodCl7dmFyIGU9W107ZG97ZS5wdXNoKF93KHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBfdyh0KXt2YXIgZT1bXTtkb3tlLnB1c2goJHcodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiAkdyh0KXtmb3IodmFyIGU9cXcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9THcodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBKdyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gTHcodCxlKXt2YXIgbj1Kdyh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0p3KHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIFZ3KHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gcXcodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9ancodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49VncodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gV3codCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGg9bigpO3JldHVybiBvKGkodC5leHByLGUpLGgpLG8oaSh0LmV4cHIsaCksaCksW3IoaCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBmPW4oKTtvKGkodC5leHByLHApLGYpLHA9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgbD10Lm1pbjtsPHQubWF4O2wrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIEh3KHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBLdyh0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChIdyk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIFV3KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oS3codCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07S3codCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgSXcoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChIdyk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIEd3KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxoPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGgpJiZyLnB1c2goaCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIFh3KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBZdyh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIFp3KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBleCh0W25dKTtyZXR1cm4gZX1Gdy5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LEJ3LnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sQncucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEJ3LnByb3RvdHlwZSxGdyk7dmFyIFF3PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9Wncobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9WHcodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LHR4PXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTt0eC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSx0eC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LHR4LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PUl3LmVtcHR5fSx0eC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sUXcucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpaWYodGhpcy5hdHRyc1tlXS5pc1JlcXVpcmVkJiYoIXR8fCEoZSBpbiB0KSkpcmV0dXJuITA7cmV0dXJuITF9LFF3LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LFF3LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOll3KHRoaXMuYXR0cnMsdCl9LFF3LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBBdyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGV3LmZyb20oZSksc3cuc2V0RnJvbShuKSl9LFF3LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPWV3LmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgQXcodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLHN3LnNldEZyb20obikpfSxRdy5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPWV3LmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKGV3LmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgQXcodGhpcyx0LGUuYXBwZW5kKG8pLHN3LnNldEZyb20obikpOm51bGx9LFF3LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxRdy5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LFF3LnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sUXcucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpzdy5lbXB0eTp0fSxRdy5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IFF3KHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFF3LnByb3RvdHlwZSx0eCk7dmFyIGV4PWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LG54PXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTtueC5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV4LnByb3RvdHlwZSxueCk7dmFyIHJ4PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1adyhyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89WHcodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgc3codGhpcyxvKX07cngucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBzdyh0aGlzLFl3KHRoaXMuYXR0cnMsdCkpfSxyeC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgcngodCxyKyssZSxvKX0pKSxufSxyeC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0scngucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxyeC5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIG94PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9Y1siYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPWNbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9UXcuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1yeC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0aGlzLm5vZGVzKXtpZihyIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IocisiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLnNwZWMuY29udGVudHx8IiIscz1vLnNwZWMubWFya3M7by5jb250ZW50TWF0Y2g9bltpXXx8KG5baV09SXcucGFyc2UoaSx0aGlzLm5vZGVzKSksby5pbmxpbmVDb250ZW50PW8uY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsby5tYXJrU2V0PSJfIj09cz9udWxsOnM/aXgodGhpcyxzLnNwbGl0KCIgIikpOiIiIT1zJiZvLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGEgaW4gdGhpcy5tYXJrcyl7dmFyIGg9dGhpcy5tYXJrc1thXSxwPWguc3BlYy5leGNsdWRlcztoLmV4Y2x1ZGVkPW51bGw9PXA/W2hdOiIiPT1wP1tdOml4KHRoaXMscC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gaXgodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59b3gucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIFF3KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sb3gucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyB6dyhuLG4uZGVmYXVsdEF0dHJzLHQsc3cuc2V0RnJvbShlKSl9LG94LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0sb3gucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gQXcuZnJvbUpTT04odGhpcyx0KX0sb3gucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gc3cuZnJvbUpTT04odGhpcyx0KX0sb3gucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgc3g9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O3N4LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgdngodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxzeC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgdngodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxjdy5tYXhPcGVuKG4uZmluaXNoKCkpfSxzeC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoZ3godCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSxzeC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxzeC5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PXh4KHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9eHgodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LHN4LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgc3godCxzeC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgYXg9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sY3g9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0saHg9e29sOiEwLHVsOiEwfSxweD0xLHV4PTIsZng9NDtmdW5jdGlvbiBseCh0KXtyZXR1cm4odD9weDowKXwoImZ1bGwiPT09dD91eDowKX12YXIgZHg9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZmeD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9c3cubm9uZX07ZHgucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZXcuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LGR4LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmcHgpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWV3LmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKGV3LmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfTt2YXIgdng9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bix0aGlzLnBlbmRpbmdNYXJrcz1bXTt2YXIgcixvPWUudG9wTm9kZSxpPWx4KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9meDowKTtyPW8/bmV3IGR4KG8udHlwZSxvLmF0dHJzLHN3Lm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgZHgobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsc3cubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxteD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHl4KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmh4Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIGd4KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gd3godCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIHh4KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1teC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sdngucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKHd4KGUpKTpudWxsO2lmKG51bGwhPW4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW3JdKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5bb10pfX0sdngucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvW14gXHRcclxuXHUwMDBjXS8udGVzdChlKSl7aWYobi5vcHRpb25zJnB4KW4ub3B0aW9ucyZ1eHx8KGU9ZS5yZXBsYWNlKC9ccj9cbnxcci9nLCIgIikpO2Vsc2UgaWYoZT1lLnJlcGxhY2UoL1sgXHRcclxuXHUwMDBjXSsvZywiICIpLC9eWyBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1sgXHRcclxuXHUwMDBjXSQvLnRlc3Qoci50ZXh0KSkmJihlPWUuc2xpY2UoMSkpfWUmJnRoaXMuaW5zZXJ0Tm9kZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChlKSksdGhpcy5maW5kSW5UZXh0KHQpfWVsc2UgdGhpcy5maW5kSW5zaWRlKHQpfSx2eC5wcm90b3R5cGUuYWRkRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aHguaGFzT3duUHJvcGVydHkoZSkmJnl4KHQpO3ZhciBuPXRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUmJnRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUodCl8fHRoaXMucGFyc2VyLm1hdGNoVGFnKHQsdGhpcyk7aWYobj9uLmlnbm9yZTpjeC5oYXNPd25Qcm9wZXJ0eShlKSl0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZighbnx8bi5za2lwKXtuJiZuLnNraXAubm9kZVR5cGUmJih0PW4uc2tpcCk7dmFyIHIsbz10aGlzLnRvcCxpPXRoaXMubmVlZHNCbG9jaztpZihheC5oYXNPd25Qcm9wZXJ0eShlKSlyPSEwLG8udHlwZXx8KHRoaXMubmVlZHNCbG9jaz0hMCk7ZWxzZSBpZighdC5maXJzdENoaWxkKXJldHVybiB2b2lkIHRoaXMubGVhZkZhbGxiYWNrKHQpO3RoaXMuYWRkQWxsKHQpLHImJnRoaXMuc3luYyhvKSx0aGlzLm5lZWRzQmxvY2s9aX1lbHNlIHRoaXMuYWRkRWxlbWVudEJ5UnVsZSh0LG4pfSx2eC5wcm90b3R5cGUubGVhZkZhbGxiYWNrPWZ1bmN0aW9uKHQpeyJCUiI9PXQubm9kZU5hbWUmJnRoaXMudG9wLnR5cGUmJnRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCYmdGhpcy5hZGRUZXh0Tm9kZSh0Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIikpfSx2eC5wcm90b3R5cGUucmVhZFN0eWxlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9c3cubm9uZSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXt2YXIgcj10aGlzLnBhcnNlci5tYXRjaFN0eWxlKHRbbl0sdFtuKzFdLHRoaXMpO2lmKHIpe2lmKHIuaWdub3JlKXJldHVybiBudWxsO2U9dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3IubWFya10uY3JlYXRlKHIuYXR0cnMpLmFkZFRvU2V0KGUpfX1yZXR1cm4gZX0sdngucHJvdG90eXBlLmFkZEVsZW1lbnRCeVJ1bGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxzPXRoaXM7ZS5ub2RlPyhyPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tlLm5vZGVdLHIuaXNMZWFmP3RoaXMuaW5zZXJ0Tm9kZShyLmNyZWF0ZShlLmF0dHJzKSl8fHRoaXMubGVhZkZhbGxiYWNrKHQpOm49dGhpcy5lbnRlcihyLGUuYXR0cnMsZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpKToobz10aGlzLnBhcnNlci5zY2hlbWEubWFya3NbZS5tYXJrXSxpPW8uY3JlYXRlKGUuYXR0cnMpLHRoaXMuYWRkUGVuZGluZ01hcmsoaSkpO3ZhciBhPXRoaXMudG9wO2lmKHImJnIuaXNMZWFmKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKGUuZ2V0Q29udGVudCl0aGlzLmZpbmRJbnNpZGUodCksZS5nZXRDb250ZW50KHQsdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gcy5pbnNlcnROb2RlKHQpfSkpO2Vsc2V7dmFyIGM9ZS5jb250ZW50RWxlbWVudDsic3RyaW5nIj09dHlwZW9mIGM/Yz10LnF1ZXJ5U2VsZWN0b3IoYyk6ImZ1bmN0aW9uIj09dHlwZW9mIGMmJihjPWModCkpLGN8fChjPXQpLHRoaXMuZmluZEFyb3VuZCh0LGMsITApLHRoaXMuYWRkQWxsKGMsbil9biYmKHRoaXMuc3luYyhhKSx0aGlzLm9wZW4tLSksaSYmdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhpKX0sdngucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZheC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSx2eC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LHZ4LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sdngucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5wZW5kaW5nTWFya3MubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5wZW5kaW5nTWFya3NbZV07dC50eXBlJiYhdC50eXBlLmFsbG93c01hcmtUeXBlKG4udHlwZSl8fG4uaXNJblNldCh0LmFjdGl2ZU1hcmtzKXx8KHQuYWN0aXZlTWFya3M9bi5hZGRUb1NldCh0LmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcy5zcGxpY2UoZS0tLDEpKX19LHZ4LnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiYodGhpcy5hcHBseVBlbmRpbmdNYXJrcyh0aGlzLnRvcCksdGhpcy5lbnRlcklubmVyKHQsZSwhMCxuKSkscn0sdngucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn5meDpseChyKTtvLm9wdGlvbnMmZngmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD1meCksdGhpcy5ub2Rlcy5wdXNoKG5ldyBkeCh0LGUsby5hY3RpdmVNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSx2eC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LHZ4LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSx2eC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSx2eC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0sdngucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LG14LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciB0PTAsZT10aGlzLm9wZW47ZT49MDtlLS0pe2Zvcih2YXIgbj10aGlzLm5vZGVzW2VdLmNvbnRlbnQscj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQrPW5bcl0ubm9kZVNpemU7ZSYmdCsrfXJldHVybiB0fSx2eC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyl0aGlzLmZpbmRbbl0ubm9kZT09dCYmdGhpcy5maW5kW25dLm9mZnNldD09ZSYmKHRoaXMuZmluZFtuXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sdngucHJvdG90eXBlLmZpbmRJbnNpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspbnVsbD09dGhpcy5maW5kW2VdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbZV0ubm9kZSkmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHZ4LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXtpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciByPTA7cjx0aGlzLmZpbmQubGVuZ3RoO3IrKylpZihudWxsPT10aGlzLmZpbmRbcl0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtyXS5ub2RlKSl7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbcl0ubm9kZSk7byYobj8yOjQpJiYodGhpcy5maW5kW3JdLnBvcz10aGlzLmN1cnJlbnRQb3MpfX0sdngucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspdGhpcy5maW5kW2VdLm5vZGU9PXQmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcy0odC5ub2RlVmFsdWUubGVuZ3RoLXRoaXMuZmluZFtlXS5vZmZzZXQpKX0sdngucHJvdG90eXBlLm1hdGNoZXNDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5pbmRleE9mKCJ8Iik+LTEpcmV0dXJuIHQuc3BsaXQoL1xzKlx8XHMqLykuc29tZSh0aGlzLm1hdGNoZXNDb250ZXh0LHRoaXMpO3ZhciBuPXQuc3BsaXQoIi8iKSxyPXRoaXMub3B0aW9ucy5jb250ZXh0LG89IXRoaXMuaXNPcGVuJiYoIXJ8fHIucGFyZW50LnR5cGU9PXRoaXMubm9kZXNbMF0udHlwZSksaT0tKHI/ci5kZXB0aCsxOjApKyhvPzA6MSkscz1mdW5jdGlvbih0LGEpe2Zvcig7dD49MDt0LS0pe3ZhciBjPW5bdF07aWYoIiI9PWMpe2lmKHQ9PW4ubGVuZ3RoLTF8fDA9PXQpY29udGludWU7Zm9yKDthPj1pO2EtLSlpZihzKHQtMSxhKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgaD1hPjB8fDA9PWEmJm8/ZS5ub2Rlc1thXS50eXBlOnImJmE+PWk/ci5ub2RlKGEtaSkudHlwZTpudWxsO2lmKCFofHxoLm5hbWUhPWMmJi0xPT1oLmdyb3Vwcy5pbmRleE9mKGMpKXJldHVybiExO2EtLX1yZXR1cm4hMH07cmV0dXJuIHMobi5sZW5ndGgtMSx0aGlzLm9wZW4pfSx2eC5wcm90b3R5cGUudGV4dGJsb2NrRnJvbUNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29udGV4dDtpZih0KWZvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5kZWZhdWx0VHlwZTtpZihuJiZuLmlzVGV4dGJsb2NrJiZuLmRlZmF1bHRBdHRycylyZXR1cm4gbn1mb3IodmFyIHIgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgbz10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbcl07aWYoby5pc1RleHRibG9jayYmby5kZWZhdWx0QXR0cnMpcmV0dXJuIG99fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2eC5wcm90b3R5cGUsbXgpO3ZhciBieD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24ga3godCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBTeCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fWJ4LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49U3goZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGg9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtoJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChoLmRvbSksbz1oLmNvbnRlbnRET018fGguZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sYngucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49YngucmVuZGVyU3BlYyhTeChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sYngucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTtmb3IodmFyIG49dGhpcy5zZXJpYWxpemVOb2RlKHQsZSkscj10Lm1hcmtzLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbz10aGlzLnNlcmlhbGl6ZU1hcmsodC5tYXJrc1tyXSx0LmlzSW5saW5lLGUpO28mJigoby5jb250ZW50RE9NfHxvLmRvbSkuYXBwZW5kQ2hpbGQobiksbj1vLmRvbSl9cmV0dXJuIG59LGJ4LnByb3RvdHlwZS5zZXJpYWxpemVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj17fSk7dmFyIHI9dGhpcy5tYXJrc1t0LnR5cGUubmFtZV07cmV0dXJuIHImJmJ4LnJlbmRlclNwZWMoU3gobikscih0LGUpKX0sYngucmVuZGVyU3BlYz1mdW5jdGlvbih0LGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgbj10LmNyZWF0ZUVsZW1lbnQoZVswXSkscj1udWxsLG89ZVsxXSxpPTE7aWYobyYmIm9iamVjdCI9PXR5cGVvZiBvJiZudWxsPT1vLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShvKSlmb3IodmFyIHMgaW4gaT0yLG8pbnVsbCE9b1tzXSYmbi5zZXRBdHRyaWJ1dGUocyxvW3NdKTtmb3IodmFyIGE9aTthPGUubGVuZ3RoO2ErKyl7dmFyIGM9ZVthXTtpZigwPT09Yyl7aWYoYTxlLmxlbmd0aC0xfHxhPmkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206bixjb250ZW50RE9NOm59fXZhciBoPWJ4LnJlbmRlclNwZWModCxjKSxwPWguZG9tLHU9aC5jb250ZW50RE9NO2lmKG4uYXBwZW5kQ2hpbGQocCksdSl7aWYocil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTXVsdGlwbGUgY29udGVudCBob2xlcyIpO3I9dX19cmV0dXJue2RvbTpuLGNvbnRlbnRET006cn19LGJ4LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXJ8fCh0LmNhY2hlZC5kb21TZXJpYWxpemVyPW5ldyBieCh0aGlzLm5vZGVzRnJvbVNjaGVtYSh0KSx0aGlzLm1hcmtzRnJvbVNjaGVtYSh0KSkpfSxieC5ub2Rlc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7dmFyIGU9a3godC5ub2Rlcyk7cmV0dXJuIGUudGV4dHx8KGUudGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0fSksZX0sYngubWFya3NGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiBreCh0Lm1hcmtzKX07dmFyIE94PTY1NTM1LEN4PU1hdGgucG93KDIsMTYpO2Z1bmN0aW9uIE14KHQsZSl7cmV0dXJuIHQrZSpDeH1mdW5jdGlvbiBUeCh0KXtyZXR1cm4gdCZPeH1mdW5jdGlvbiBOeCh0KXtyZXR1cm4odC0odCZPeCkpL0N4fXZhciBFeD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPW51bGwpLHRoaXMucG9zPXQsdGhpcy5kZWxldGVkPWUsdGhpcy5yZWNvdmVyPW59LEF4PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMucmFuZ2VzPXQsdGhpcy5pbnZlcnRlZD1lfTtBeC5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbih0KXt2YXIgZT0wLG49VHgodCk7aWYoIXRoaXMuaW52ZXJ0ZWQpZm9yKHZhciByPTA7cjxuO3IrKyllKz10aGlzLnJhbmdlc1szKnIrMl0tdGhpcy5yYW5nZXNbMypyKzFdO3JldHVybiB0aGlzLnJhbmdlc1szKm5dK2UrTngodCl9LEF4LnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LEF4LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMCl9LEF4LnByb3RvdHlwZS5fbWFwPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MCxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIscz0wO3M8dGhpcy5yYW5nZXMubGVuZ3RoO3MrPTMpe3ZhciBhPXRoaXMucmFuZ2VzW3NdLSh0aGlzLmludmVydGVkP3I6MCk7aWYoYT50KWJyZWFrO3ZhciBjPXRoaXMucmFuZ2VzW3Mrb10saD10aGlzLnJhbmdlc1tzK2ldLHA9YStjO2lmKHQ8PXApe3ZhciB1PWM/dD09YT8tMTp0PT1wPzE6ZTplLGY9YStyKyh1PDA/MDpoKTtpZihuKXJldHVybiBmO3ZhciBsPU14KHMvMyx0LWEpO3JldHVybiBuZXcgRXgoZixlPDA/dCE9YTp0IT1wLGwpfXIrPWgtY31yZXR1cm4gbj90K3I6bmV3IEV4KHQrcil9LEF4LnByb3RvdHlwZS50b3VjaGVzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj1UeChlKSxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIscz0wO3M8dGhpcy5yYW5nZXMubGVuZ3RoO3MrPTMpe3ZhciBhPXRoaXMucmFuZ2VzW3NdLSh0aGlzLmludmVydGVkP246MCk7aWYoYT50KWJyZWFrO3ZhciBjPXRoaXMucmFuZ2VzW3Mrb10saD1hK2M7aWYodDw9aCYmcz09MypyKXJldHVybiEwO24rPXRoaXMucmFuZ2VzW3MraV0tY31yZXR1cm4hMX0sQXgucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaW52ZXJ0ZWQ/MjoxLG49dGhpcy5pbnZlcnRlZD8xOjIscj0wLG89MDtyPHRoaXMucmFuZ2VzLmxlbmd0aDtyKz0zKXt2YXIgaT10aGlzLnJhbmdlc1tyXSxzPWktKHRoaXMuaW52ZXJ0ZWQ/bzowKSxhPWkrKHRoaXMuaW52ZXJ0ZWQ/MDpvKSxjPXRoaXMucmFuZ2VzW3IrZV0saD10aGlzLnJhbmdlc1tyK25dO3QocyxzK2MsYSxhK2gpLG8rPWgtY319LEF4LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEF4KHRoaXMucmFuZ2VzLCF0aGlzLmludmVydGVkKX0sQXgucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuaW52ZXJ0ZWQ/Ii0iOiIiKStKU09OLnN0cmluZ2lmeSh0aGlzLnJhbmdlcyl9LEF4Lm9mZnNldD1mdW5jdGlvbih0KXtyZXR1cm4gMD09dD9BeC5lbXB0eTpuZXcgQXgodDwwP1swLC10LDBdOlswLDAsdF0pfSxBeC5lbXB0eT1uZXcgQXgoW10pO3ZhciBSeD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm1hcHM9dHx8W10sdGhpcy5mcm9tPW58fDAsdGhpcy50bz1udWxsPT1yP3RoaXMubWFwcy5sZW5ndGg6cix0aGlzLm1pcnJvcj1lfTtmdW5jdGlvbiB6eCh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPXp4LnByb3RvdHlwZSxlfVJ4LnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLm1hcHMubGVuZ3RoKSxuZXcgUngodGhpcy5tYXBzLHRoaXMubWlycm9yLHQsZSl9LFJ4LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBSeCh0aGlzLm1hcHMuc2xpY2UoKSx0aGlzLm1pcnJvciYmdGhpcy5taXJyb3Iuc2xpY2UoKSx0aGlzLmZyb20sdGhpcy50byl9LFJ4LnByb3RvdHlwZS5hcHBlbmRNYXA9ZnVuY3Rpb24odCxlKXt0aGlzLnRvPXRoaXMubWFwcy5wdXNoKHQpLG51bGwhPWUmJnRoaXMuc2V0TWlycm9yKHRoaXMubWFwcy5sZW5ndGgtMSxlKX0sUngucHJvdG90eXBlLmFwcGVuZE1hcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLm1hcHMubGVuZ3RoO2U8dC5tYXBzLmxlbmd0aDtlKyspe3ZhciByPXQuZ2V0TWlycm9yKGUpO3RoaXMuYXBwZW5kTWFwKHQubWFwc1tlXSxudWxsIT1yJiZyPGU/bityOm51bGwpfX0sUngucHJvdG90eXBlLmdldE1pcnJvcj1mdW5jdGlvbih0KXtpZih0aGlzLm1pcnJvcilmb3IodmFyIGU9MDtlPHRoaXMubWlycm9yLmxlbmd0aDtlKyspaWYodGhpcy5taXJyb3JbZV09PXQpcmV0dXJuIHRoaXMubWlycm9yW2UrKGUlMj8tMToxKV19LFJ4LnByb3RvdHlwZS5zZXRNaXJyb3I9ZnVuY3Rpb24odCxlKXt0aGlzLm1pcnJvcnx8KHRoaXMubWlycm9yPVtdKSx0aGlzLm1pcnJvci5wdXNoKHQsZSl9LFJ4LnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubWFwcy5sZW5ndGgtMSxuPXRoaXMubWFwcy5sZW5ndGgrdC5tYXBzLmxlbmd0aDtlPj0wO2UtLSl7dmFyIHI9dC5nZXRNaXJyb3IoZSk7dGhpcy5hcHBlbmRNYXAodC5tYXBzW2VdLmludmVydCgpLG51bGwhPXImJnI+ZT9uLXItMTpudWxsKX19LFJ4LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUng7cmV0dXJuIHQuYXBwZW5kTWFwcGluZ0ludmVydGVkKHRoaXMpLHR9LFJ4LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLm1pcnJvcilyZXR1cm4gdGhpcy5fbWFwKHQsZSwhMCk7Zm9yKHZhciBuPXRoaXMuZnJvbTtuPHRoaXMudG87bisrKXQ9dGhpcy5tYXBzW25dLm1hcCh0LGUpO3JldHVybiB0fSxSeC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxSeC5wcm90b3R5cGUuX21hcD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPSExLG89bnVsbCxpPXRoaXMuZnJvbTtpPHRoaXMudG87aSsrKXt2YXIgcz10aGlzLm1hcHNbaV0sYT1vJiZvW2ldO2lmKG51bGwhPWEmJnMudG91Y2hlcyh0LGEpKXQ9cy5yZWNvdmVyKGEpO2Vsc2V7dmFyIGM9cy5tYXBSZXN1bHQodCxlKTtpZihudWxsIT1jLnJlY292ZXIpe3ZhciBoPXRoaXMuZ2V0TWlycm9yKGkpO2lmKG51bGwhPWgmJmg+aSYmaDx0aGlzLnRvKXtpZihjLmRlbGV0ZWQpe2k9aCx0PXRoaXMubWFwc1toXS5yZWNvdmVyKGMucmVjb3Zlcik7Y29udGludWV9KG98fChvPU9iamVjdC5jcmVhdGUobnVsbCkpKVtoXT1jLnJlY292ZXJ9fWMuZGVsZXRlZCYmKHI9ITApLHQ9Yy5wb3N9fXJldHVybiBuP3Q6bmV3IEV4KHQscil9LHp4LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksengucHJvdG90eXBlLmNvbnN0cnVjdG9yPXp4LHp4LnByb3RvdHlwZS5uYW1lPSJUcmFuc2Zvcm1FcnJvciI7dmFyIER4PWZ1bmN0aW9uKHQpe3RoaXMuZG9jPXQsdGhpcy5zdGVwcz1bXSx0aGlzLmRvY3M9W10sdGhpcy5tYXBwaW5nPW5ldyBSeH0sSXg9e2JlZm9yZTp7Y29uZmlndXJhYmxlOiEwfSxkb2NDaGFuZ2VkOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBQeCgpe3Rocm93IG5ldyBFcnJvcigiT3ZlcnJpZGUgbWUiKX1JeC5iZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jcy5sZW5ndGg/dGhpcy5kb2NzWzBdOnRoaXMuZG9jfSxEeC5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heWJlU3RlcCh0KTtpZihlLmZhaWxlZCl0aHJvdyBuZXcgengoZS5mYWlsZWQpO3JldHVybiB0aGlzfSxEeC5wcm90b3R5cGUubWF5YmVTdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXQuYXBwbHkodGhpcy5kb2MpO3JldHVybiBlLmZhaWxlZHx8dGhpcy5hZGRTdGVwKHQsZS5kb2MpLGV9LEl4LmRvY0NoYW5nZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoPjB9LER4LnByb3RvdHlwZS5hZGRTdGVwPWZ1bmN0aW9uKHQsZSl7dGhpcy5kb2NzLnB1c2godGhpcy5kb2MpLHRoaXMuc3RlcHMucHVzaCh0KSx0aGlzLm1hcHBpbmcuYXBwZW5kTWFwKHQuZ2V0TWFwKCkpLHRoaXMuZG9jPWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKER4LnByb3RvdHlwZSxJeCk7dmFyIEJ4PU9iamVjdC5jcmVhdGUobnVsbCksRng9ZnVuY3Rpb24oKXt9O0Z4LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gUHgoKX0sRngucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBBeC5lbXB0eX0sRngucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gUHgoKX0sRngucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gUHgoKX0sRngucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSxGeC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIFB4KCl9LEZ4LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnN0ZXBUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTdGVwLmZyb21KU09OIik7dmFyIG49QnhbZS5zdGVwVHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHN0ZXAgdHlwZSAiK2Uuc3RlcFR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0sRnguanNvbklEPWZ1bmN0aW9uKHQsZSl7aWYodCBpbiBCeCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgIit0KTtyZXR1cm4gQnhbdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfTt2YXIgang9ZnVuY3Rpb24odCxlKXt0aGlzLmRvYz10LHRoaXMuZmFpbGVkPWV9O2p4Lm9rPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgangodCxudWxsKX0sanguZmFpbD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGp4KG51bGwsdCl9LGp4LmZyb21SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIpe3RyeXtyZXR1cm4gangub2sodC5yZXBsYWNlKGUsbixyKSl9Y2F0Y2gobyl7aWYobyBpbnN0YW5jZW9mIGF3KXJldHVybiBqeC5mYWlsKG8ubWVzc2FnZSk7dGhyb3cgb319O3ZhciBfeD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5zbGljZT1yLHRoaXMuc3RydWN0dXJlPSEhb31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlJiZKeCh0LHRoaXMuZnJvbSx0aGlzLnRvKT9qeC5mYWlsKCJTdHJ1Y3R1cmUgcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpOmp4LmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgQXgoW3RoaXMuZnJvbSx0aGlzLnRvLXRoaXMuZnJvbSx0aGlzLnNsaWNlLnNpemVdKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSx0LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWQ/bnVsbDpuZXcgZShuLnBvcyxNYXRoLm1heChuLnBvcyxyLnBvcyksdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGUpfHx0LnN0cnVjdHVyZSE9dGhpcy5zdHJ1Y3R1cmUpcmV0dXJuIG51bGw7aWYodGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSE9dC5mcm9tfHx0aGlzLnNsaWNlLm9wZW5FbmR8fHQuc2xpY2Uub3BlblN0YXJ0KXtpZih0LnRvIT10aGlzLmZyb218fHRoaXMuc2xpY2Uub3BlblN0YXJ0fHx0LnNsaWNlLm9wZW5FbmQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9jdy5lbXB0eTpuZXcgY3codC5zbGljZS5jb250ZW50LmFwcGVuZCh0aGlzLnNsaWNlLmNvbnRlbnQpLHQuc2xpY2Uub3BlblN0YXJ0LHRoaXMuc2xpY2Uub3BlbkVuZCk7cmV0dXJuIG5ldyBlKHQuZnJvbSx0aGlzLnRvLG4sdGhpcy5zdHJ1Y3R1cmUpfXZhciByPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/Y3cuZW1wdHk6bmV3IGN3KHRoaXMuc2xpY2UuY29udGVudC5hcHBlbmQodC5zbGljZS5jb250ZW50KSx0aGlzLnNsaWNlLm9wZW5TdGFydCx0LnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy50bysodC50by10LmZyb20pLHIsdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2UiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxjdy5mcm9tSlNPTih0LG4uc2xpY2UpLCEhbi5zdHJ1Y3R1cmUpfSxlfShGeCk7RnguanNvbklEKCJyZXBsYWNlIixfeCk7dmFyICR4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSl7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLmdhcEZyb209cix0aGlzLmdhcFRvPW8sdGhpcy5zbGljZT1pLHRoaXMuaW5zZXJ0PXMsdGhpcy5zdHJ1Y3R1cmU9ISFhfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtpZih0aGlzLnN0cnVjdHVyZSYmKEp4KHQsdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbSl8fEp4KHQsdGhpcy5nYXBUbyx0aGlzLnRvKSkpcmV0dXJuIGp4LmZhaWwoIlN0cnVjdHVyZSBnYXAtcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpO3ZhciBlPXQuc2xpY2UodGhpcy5nYXBGcm9tLHRoaXMuZ2FwVG8pO2lmKGUub3BlblN0YXJ0fHxlLm9wZW5FbmQpcmV0dXJuIGp4LmZhaWwoIkdhcCBpcyBub3QgYSBmbGF0IHJhbmdlIik7dmFyIG49dGhpcy5zbGljZS5pbnNlcnRBdCh0aGlzLmluc2VydCxlLmNvbnRlbnQpO3JldHVybiBuP2p4LmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbik6anguZmFpbCgiQ29udGVudCBkb2VzIG5vdCBmaXQgaW4gZ2FwIil9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgQXgoW3RoaXMuZnJvbSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuaW5zZXJ0LHRoaXMuZ2FwVG8sdGhpcy50by10aGlzLmdhcFRvLHRoaXMuc2xpY2Uuc2l6ZS10aGlzLmluc2VydF0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5nYXBUby10aGlzLmdhcEZyb207cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplK24sdGhpcy5mcm9tK3RoaXMuaW5zZXJ0LHRoaXMuZnJvbSt0aGlzLmluc2VydCtuLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLnJlbW92ZUJldHdlZW4odGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmdhcFRvLXRoaXMuZnJvbSksdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKSxvPXQubWFwKHRoaXMuZ2FwRnJvbSwtMSksaT10Lm1hcCh0aGlzLmdhcFRvLDEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bzxuLnBvc3x8aT5yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLG8saSx0aGlzLnNsaWNlLHRoaXMuaW5zZXJ0LHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlQXJvdW5kIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvLGdhcEZyb206dGhpcy5nYXBGcm9tLGdhcFRvOnRoaXMuZ2FwVG8saW5zZXJ0OnRoaXMuaW5zZXJ0fTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50b3x8Im51bWJlciIhPXR5cGVvZiBuLmdhcEZyb218fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBUb3x8Im51bWJlciIhPXR5cGVvZiBuLmluc2VydCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZUFyb3VuZFN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sbi5nYXBGcm9tLG4uZ2FwVG8sY3cuZnJvbUpTT04odCxuLnNsaWNlKSxuLmluc2VydCwhIW4uc3RydWN0dXJlKX0sZX0oRngpO2Z1bmN0aW9uIEp4KHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSksbz1uLWUsaT1yLmRlcHRoO3doaWxlKG8+MCYmaT4wJiZyLmluZGV4QWZ0ZXIoaSk9PXIubm9kZShpKS5jaGlsZENvdW50KWktLSxvLS07aWYobz4wKXt2YXIgcz1yLm5vZGUoaSkubWF5YmVDaGlsZChyLmluZGV4QWZ0ZXIoaSkpO3doaWxlKG8+MCl7aWYoIXN8fHMuaXNMZWFmKXJldHVybiEwO3M9cy5maXJzdENoaWxkLG8tLX19cmV0dXJuITF9ZnVuY3Rpb24gTHgodCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPXIuaW5kZXgoKTtyZXR1cm4gci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobyxvKzEsbil9ZnVuY3Rpb24gVngodCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKTtpZihyLnBhcmVudC5jYW5SZXBsYWNlV2l0aChyLmluZGV4KCksci5pbmRleCgpLG4pKXJldHVybiBlO2lmKDA9PXIucGFyZW50T2Zmc2V0KWZvcih2YXIgbz1yLmRlcHRoLTE7bz49MDtvLS0pe3ZhciBpPXIuaW5kZXgobyk7aWYoci5ub2RlKG8pLmNhblJlcGxhY2VXaXRoKGksaSxuKSlyZXR1cm4gci5iZWZvcmUobysxKTtpZihpPjApcmV0dXJuIG51bGx9aWYoci5wYXJlbnRPZmZzZXQ9PXIucGFyZW50LmNvbnRlbnQuc2l6ZSlmb3IodmFyIHM9ci5kZXB0aC0xO3M+PTA7cy0tKXt2YXIgYT1yLmluZGV4QWZ0ZXIocyk7aWYoci5ub2RlKHMpLmNhblJlcGxhY2VXaXRoKGEsYSxuKSlyZXR1cm4gci5hZnRlcihzKzEpO2lmKGE8ci5ub2RlKHMpLmNoaWxkQ291bnQpcmV0dXJuIG51bGx9fWZ1bmN0aW9uIHF4KHQsZSxuKXtmb3IodmFyIHI9W10sbz0wO288dC5jaGlsZENvdW50O28rKyl7dmFyIGk9dC5jaGlsZChvKTtpLmNvbnRlbnQuc2l6ZSYmKGk9aS5jb3B5KHF4KGkuY29udGVudCxlLGkpKSksaS5pc0lubGluZSYmKGk9ZShpLG4sbykpLHIucHVzaChpKX1yZXR1cm4gZXcuZnJvbUFycmF5KHIpfUZ4Lmpzb25JRCgicmVwbGFjZUFyb3VuZCIsJHgpLER4LnByb3RvdHlwZS5saWZ0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuJGZyb20scj10LiR0byxvPXQuZGVwdGgsaT1uLmJlZm9yZShvKzEpLHM9ci5hZnRlcihvKzEpLGE9aSxjPXMsaD1ldy5lbXB0eSxwPTAsdT1vLGY9ITE7dT5lO3UtLSlmfHxuLmluZGV4KHUpPjA/KGY9ITAsaD1ldy5mcm9tKG4ubm9kZSh1KS5jb3B5KGgpKSxwKyspOmEtLTtmb3IodmFyIGw9ZXcuZW1wdHksZD0wLHY9byxtPSExO3Y+ZTt2LS0pbXx8ci5hZnRlcih2KzEpPHIuZW5kKHYpPyhtPSEwLGw9ZXcuZnJvbShyLm5vZGUodikuY29weShsKSksZCsrKTpjKys7cmV0dXJuIHRoaXMuc3RlcChuZXcgJHgoYSxjLGkscyxuZXcgY3coaC5hcHBlbmQobCkscCxkKSxoLnNpemUtcCwhMCkpfSxEeC5wcm90b3R5cGUud3JhcD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1ldy5lbXB0eSxyPWUubGVuZ3RoLTE7cj49MDtyLS0pbj1ldy5mcm9tKGVbcl0udHlwZS5jcmVhdGUoZVtyXS5hdHRycyxuKSk7dmFyIG89dC5zdGFydCxpPXQuZW5kO3JldHVybiB0aGlzLnN0ZXAobmV3ICR4KG8saSxvLGksbmV3IGN3KG4sMCwwKSxlLmxlbmd0aCwhMCkpfSxEeC5wcm90b3R5cGUuc2V0QmxvY2tUeXBlPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9dCksIW4uaXNUZXh0YmxvY2spdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9jayIpO3ZhciBpPXRoaXMuc3RlcHMubGVuZ3RoO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0LGUpe2lmKHQuaXNUZXh0YmxvY2smJiF0Lmhhc01hcmt1cChuLHIpJiZMeChvLmRvYyxvLm1hcHBpbmcuc2xpY2UoaSkubWFwKGUpLG4pKXtvLmNsZWFySW5jb21wYXRpYmxlKG8ubWFwcGluZy5zbGljZShpKS5tYXAoZSwxKSxuKTt2YXIgcz1vLm1hcHBpbmcuc2xpY2UoaSksYT1zLm1hcChlLDEpLGM9cy5tYXAoZSt0Lm5vZGVTaXplLDEpO3JldHVybiBvLnN0ZXAobmV3ICR4KGEsYyxhKzEsYy0xLG5ldyBjdyhldy5mcm9tKG4uY3JlYXRlKHIsbnVsbCx0Lm1hcmtzKSksMCwwKSwxLCEwKSksITF9fSkpLHRoaXN9LER4LnByb3RvdHlwZS5zZXROb2RlTWFya3VwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXRoaXMuZG9jLm5vZGVBdCh0KTtpZighbyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gbm9kZSBhdCBnaXZlbiBwb3NpdGlvbiIpO2V8fChlPW8udHlwZSk7dmFyIGk9ZS5jcmVhdGUobixudWxsLHJ8fG8ubWFya3MpO2lmKG8uaXNMZWFmKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKHQsdCtvLm5vZGVTaXplLGkpO2lmKCFlLnZhbGlkQ29udGVudChvLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgdHlwZSAiK2UubmFtZSk7cmV0dXJuIHRoaXMuc3RlcChuZXcgJHgodCx0K28ubm9kZVNpemUsdCsxLHQrby5ub2RlU2l6ZS0xLG5ldyBjdyhldy5mcm9tKGkpLDAsMCksMSwhMCkpfSxEeC5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTEpO2Zvcih2YXIgcj10aGlzLmRvYy5yZXNvbHZlKHQpLG89ZXcuZW1wdHksaT1ldy5lbXB0eSxzPXIuZGVwdGgsYT1yLmRlcHRoLWUsYz1lLTE7cz5hO3MtLSxjLS0pe289ZXcuZnJvbShyLm5vZGUocykuY29weShvKSk7dmFyIGg9biYmbltjXTtpPWV3LmZyb20oaD9oLnR5cGUuY3JlYXRlKGguYXR0cnMsaSk6ci5ub2RlKHMpLmNvcHkoaSkpfXJldHVybiB0aGlzLnN0ZXAobmV3IF94KHQsdCxuZXcgY3coby5hcHBlbmQoaSksZSxlKSwhMCkpfSxEeC5wcm90b3R5cGUuam9pbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPTEpO3ZhciBuPW5ldyBfeCh0LWUsdCtlLGN3LmVtcHR5LCEwKTtyZXR1cm4gdGhpcy5zdGVwKG4pfTt2YXIgV3g9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLm1hcms9cn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLHI9dC5yZXNvbHZlKHRoaXMuZnJvbSksbz1yLm5vZGUoci5zaGFyZWREZXB0aCh0aGlzLnRvKSksaT1uZXcgY3cocXgobi5jb250ZW50LChmdW5jdGlvbih0LG4pe3JldHVybiBuLnR5cGUuYWxsb3dzTWFya1R5cGUoZS5tYXJrLnR5cGUpP3QubWFyayhlLm1hcmsuYWRkVG9TZXQodC5tYXJrcykpOnR9KSxvKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBqeC5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLGkpfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEh4KHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG4ucG9zPj1yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBlJiZ0Lm1hcmsuZXEodGhpcy5tYXJrKSYmdGhpcy5mcm9tPD10LnRvJiZ0aGlzLnRvPj10LmZyb20pcmV0dXJuIG5ldyBlKE1hdGgubWluKHRoaXMuZnJvbSx0LmZyb20pLE1hdGgubWF4KHRoaXMudG8sdC50byksdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3N0ZXBUeXBlOiJhZGRNYXJrIixtYXJrOnRoaXMubWFyay50b0pTT04oKSxmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEFkZE1hcmtTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLHQubWFya0Zyb21KU09OKG4ubWFyaykpfSxlfShGeCk7RnguanNvbklEKCJhZGRNYXJrIixXeCk7dmFyIEh4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxyPW5ldyBjdyhxeChuLmNvbnRlbnQsKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoZS5tYXJrLnJlbW92ZUZyb21TZXQodC5tYXJrcykpfSkpLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIGp4LmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8scil9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgV3godGhpcy5mcm9tLHRoaXMudG8sdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bi5wb3M+PXIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGUmJnQubWFyay5lcSh0aGlzLm1hcmspJiZ0aGlzLmZyb208PXQudG8mJnRoaXMudG8+PXQuZnJvbSlyZXR1cm4gbmV3IGUoTWF0aC5taW4odGhpcy5mcm9tLHQuZnJvbSksTWF0aC5tYXgodGhpcy50byx0LnRvKSx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcFR5cGU6InJlbW92ZU1hcmsiLG1hcms6dGhpcy5tYXJrLnRvSlNPTigpLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVtb3ZlTWFya1N0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sdC5tYXJrRnJvbUpTT04obi5tYXJrKSl9LGV9KEZ4KTtmdW5jdGlvbiBLeCh0LGUsbixyKXtpZih2b2lkIDA9PT1uJiYobj1lKSx2b2lkIDA9PT1yJiYocj1jdy5lbXB0eSksZT09biYmIXIuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgbz10LnJlc29sdmUoZSksaT10LnJlc29sdmUobik7cmV0dXJuIFV4KG8saSxyKT9uZXcgX3goZSxuLHIpOm5ldyBHeChvLGkscikuZml0KCl9ZnVuY3Rpb24gVXgodCxlLG4pe3JldHVybiFuLm9wZW5TdGFydCYmIW4ub3BlbkVuZCYmdC5zdGFydCgpPT1lLnN0YXJ0KCkmJnQucGFyZW50LmNhblJlcGxhY2UodC5pbmRleCgpLGUuaW5kZXgoKSxuLmNvbnRlbnQpfUZ4Lmpzb25JRCgicmVtb3ZlTWFyayIsSHgpLER4LnByb3RvdHlwZS5hZGRNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89W10saT1bXSxzPW51bGwsYT1udWxsO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLGMsaCl7aWYoci5pc0lubGluZSl7dmFyIHA9ci5tYXJrcztpZighbi5pc0luU2V0KHApJiZoLnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKSl7Zm9yKHZhciB1PU1hdGgubWF4KGMsdCksZj1NYXRoLm1pbihjK3Iubm9kZVNpemUsZSksbD1uLmFkZFRvU2V0KHApLGQ9MDtkPHAubGVuZ3RoO2QrKylwW2RdLmlzSW5TZXQobCl8fChzJiZzLnRvPT11JiZzLm1hcmsuZXEocFtkXSk/cy50bz1mOm8ucHVzaChzPW5ldyBIeCh1LGYscFtkXSkpKTthJiZhLnRvPT11P2EudG89ZjppLnB1c2goYT1uZXcgV3godSxmLG4pKX19fSkpLG8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcCh0KX0pKSxpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAodCl9KSksdGhpc30sRHgucHJvdG90eXBlLnJlbW92ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCk7dmFyIG89W10saT0wO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLHMpe2lmKHIuaXNJbmxpbmUpe2krKzt2YXIgYT1udWxsO2lmKG4gaW5zdGFuY2VvZiByeCl7dmFyIGM9bi5pc0luU2V0KHIubWFya3MpO2MmJihhPVtjXSl9ZWxzZSBuP24uaXNJblNldChyLm1hcmtzKSYmKGE9W25dKTphPXIubWFya3M7aWYoYSYmYS5sZW5ndGgpZm9yKHZhciBoPU1hdGgubWluKHMrci5ub2RlU2l6ZSxlKSxwPTA7cDxhLmxlbmd0aDtwKyspe2Zvcih2YXIgdT1hW3BdLGY9dm9pZCAwLGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIGQ9b1tsXTtkLnN0ZXA9PWktMSYmdS5lcShvW2xdLnN0eWxlKSYmKGY9ZCl9Zj8oZi50bz1oLGYuc3RlcD1pKTpvLnB1c2goe3N0eWxlOnUsZnJvbTpNYXRoLm1heChzLHQpLHRvOmgsc3RlcDppfSl9fX0pKSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAobmV3IEh4KHQuZnJvbSx0LnRvLHQuc3R5bGUpKX0pKSx0aGlzfSxEeC5wcm90b3R5cGUuY2xlYXJJbmNvbXBhdGlibGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUuY29udGVudE1hdGNoKTtmb3IodmFyIHI9dGhpcy5kb2Mubm9kZUF0KHQpLG89W10saT10KzEscz0wO3M8ci5jaGlsZENvdW50O3MrKyl7dmFyIGE9ci5jaGlsZChzKSxjPWkrYS5ub2RlU2l6ZSxoPW4ubWF0Y2hUeXBlKGEudHlwZSxhLmF0dHJzKTtpZihoKXtuPWg7Zm9yKHZhciBwPTA7cDxhLm1hcmtzLmxlbmd0aDtwKyspZS5hbGxvd3NNYXJrVHlwZShhLm1hcmtzW3BdLnR5cGUpfHx0aGlzLnN0ZXAobmV3IEh4KGksYyxhLm1hcmtzW3BdKSl9ZWxzZSBvLnB1c2gobmV3IF94KGksYyxjdy5lbXB0eSkpO2k9Y31pZighbi52YWxpZEVuZCl7dmFyIHU9bi5maWxsQmVmb3JlKGV3LmVtcHR5LCEwKTt0aGlzLnJlcGxhY2UoaSxpLG5ldyBjdyh1LDAsMCkpfWZvcih2YXIgZj1vLmxlbmd0aC0xO2Y+PTA7Zi0tKXRoaXMuc3RlcChvW2ZdKTtyZXR1cm4gdGhpc30sRHgucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPXQpLHZvaWQgMD09PW4mJihuPWN3LmVtcHR5KTt2YXIgcj1LeCh0aGlzLmRvYyx0LGUsbik7cmV0dXJuIHImJnRoaXMuc3RlcChyKSx0aGlzfSxEeC5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnJlcGxhY2UodCxlLG5ldyBjdyhldy5mcm9tKG4pLDAsMCkpfSxEeC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsY3cuZW1wdHkpfSxEeC5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0LGUpfTt2YXIgR3g9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJHRvPWUsdGhpcy4kZnJvbT10LHRoaXMudW5wbGFjZWQ9bix0aGlzLmZyb250aWVyPVtdO2Zvcih2YXIgcj0wO3I8PXQuZGVwdGg7cisrKXt2YXIgbz10Lm5vZGUocik7dGhpcy5mcm9udGllci5wdXNoKHt0eXBlOm8udHlwZSxtYXRjaDpvLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihyKSl9KX10aGlzLnBsYWNlZD1ldy5lbXB0eTtmb3IodmFyIGk9dC5kZXB0aDtpPjA7aS0tKXRoaXMucGxhY2VkPWV3LmZyb20odC5ub2RlKGkpLmNvcHkodGhpcy5wbGFjZWQpKX0sWHg9e2RlcHRoOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBZeCh0LGUsbil7cmV0dXJuIDA9PWU/dC5jdXRCeUluZGV4KG4pOnQucmVwbGFjZUNoaWxkKDAsdC5maXJzdENoaWxkLmNvcHkoWXgodC5maXJzdENoaWxkLmNvbnRlbnQsZS0xLG4pKSl9ZnVuY3Rpb24gWngodCxlLG4pe3JldHVybiAwPT1lP3QuYXBwZW5kKG4pOnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLHQubGFzdENoaWxkLmNvcHkoWngodC5sYXN0Q2hpbGQuY29udGVudCxlLTEsbikpKX1mdW5jdGlvbiBReCh0LGUpe2Zvcih2YXIgbj0wO248ZTtuKyspdD10LmZpcnN0Q2hpbGQuY29udGVudDtyZXR1cm4gdH1mdW5jdGlvbiB0Yih0LGUsbil7aWYoZTw9MClyZXR1cm4gdDt2YXIgcj10LmNvbnRlbnQ7cmV0dXJuIGU+MSYmKHI9ci5yZXBsYWNlQ2hpbGQoMCx0YihyLmZpcnN0Q2hpbGQsZS0xLDE9PXIuY2hpbGRDb3VudD9uLTE6MCkpKSxlPjAmJihyPXQudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShyKS5hcHBlbmQociksbjw9MCYmKHI9ci5hcHBlbmQodC50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHIpLmZpbGxCZWZvcmUoZXcuZW1wdHksITApKSkpLHQuY29weShyKX1mdW5jdGlvbiBlYih0LGUsbixyLG8pe3ZhciBpPXQubm9kZShlKSxzPW8/dC5pbmRleEFmdGVyKGUpOnQuaW5kZXgoZSk7aWYocz09aS5jaGlsZENvdW50JiYhbi5jb21wYXRpYmxlQ29udGVudChpLnR5cGUpKXJldHVybiBudWxsO3ZhciBhPXIuZmlsbEJlZm9yZShpLmNvbnRlbnQsITAscyk7cmV0dXJuIGEmJiFuYihuLGkuY29udGVudCxzKT9hOm51bGx9ZnVuY3Rpb24gbmIodCxlLG4pe2Zvcih2YXIgcj1uO3I8ZS5jaGlsZENvdW50O3IrKylpZighdC5hbGxvd3NNYXJrcyhlLmNoaWxkKHIpLm1hcmtzKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiByYih0LGUsbixyLG8pe2lmKGU8bil7dmFyIGk9dC5maXJzdENoaWxkO3Q9dC5yZXBsYWNlQ2hpbGQoMCxpLmNvcHkocmIoaS5jb250ZW50LGUrMSxuLHIsaSkpKX1pZihlPnIpe3ZhciBzPW8uY29udGVudE1hdGNoQXQoMCksYT1zLmZpbGxCZWZvcmUodCkuYXBwZW5kKHQpO3Q9YS5hcHBlbmQocy5tYXRjaEZyYWdtZW50KGEpLmZpbGxCZWZvcmUoZXcuZW1wdHksITApKX1yZXR1cm4gdH1mdW5jdGlvbiBvYih0LGUpe2Zvcih2YXIgbj1bXSxyPU1hdGgubWluKHQuZGVwdGgsZS5kZXB0aCksbz1yO28+PTA7by0tKXt2YXIgaT10LnN0YXJ0KG8pO2lmKGk8dC5wb3MtKHQuZGVwdGgtbyl8fGUuZW5kKG8pPmUucG9zKyhlLmRlcHRoLW8pfHx0Lm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZ3x8ZS5ub2RlKG8pLnR5cGUuc3BlYy5pc29sYXRpbmcpYnJlYWs7aT09ZS5zdGFydChvKSYmbi5wdXNoKG8pfXJldHVybiBufVh4LmRlcHRoLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZyb250aWVyLmxlbmd0aC0xfSxHeC5wcm90b3R5cGUuZml0PWZ1bmN0aW9uKCl7d2hpbGUodGhpcy51bnBsYWNlZC5zaXplKXt2YXIgdD10aGlzLmZpbmRGaXR0YWJsZSgpO3Q/dGhpcy5wbGFjZU5vZGVzKHQpOnRoaXMub3Blbk1vcmUoKXx8dGhpcy5kcm9wTm9kZSgpfXZhciBlPXRoaXMubXVzdE1vdmVJbmxpbmUoKSxuPXRoaXMucGxhY2VkLnNpemUtdGhpcy5kZXB0aC10aGlzLiRmcm9tLmRlcHRoLHI9dGhpcy4kZnJvbSxvPWU8MD90aGlzLiR0bzpyLmRvYy5yZXNvbHZlKGUpO2lmKHRoaXMuY2xvc2Uobykpe3ZhciBpPXRoaXMucGxhY2VkLHM9ci5kZXB0aCxhPW8uZGVwdGg7d2hpbGUocyYmYSYmMT09aS5jaGlsZENvdW50KWk9aS5maXJzdENoaWxkLmNvbnRlbnQscy0tLGEtLTt2YXIgYz1uZXcgY3coaSxzLGEpO2lmKGU+LTEpcmV0dXJuIG5ldyAkeChyLnBvcyxlLHRoaXMuJHRvLnBvcyx0aGlzLiR0by5lbmQoKSxjLG4pO2lmKGMuc2l6ZXx8ci5wb3MhPXRoaXMuJHRvLnBvcylyZXR1cm4gbmV3IF94KHIucG9zLG8ucG9zLGMpfXJldHVybiBudWxsfSxHeC5wcm90b3R5cGUuZmluZEZpdHRhYmxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTE7dDw9Mjt0KyspZm9yKHZhciBlPXRoaXMudW5wbGFjZWQub3BlblN0YXJ0O2U+PTA7ZS0tKXt2YXIgbj12b2lkIDAscj12b2lkIDA7ZT8ocj1ReCh0aGlzLnVucGxhY2VkLmNvbnRlbnQsZS0xKS5maXJzdENoaWxkLG49ci5jb250ZW50KTpuPXRoaXMudW5wbGFjZWQuY29udGVudDtmb3IodmFyIG89bi5maXJzdENoaWxkLGk9dGhpcy5kZXB0aDtpPj0wO2ktLSl7dmFyIHM9dGhpcy5mcm9udGllcltpXSxhPXMudHlwZSxjPXMubWF0Y2gsaD12b2lkIDAscD12b2lkIDA7aWYoMT09dCYmKG8/Yy5tYXRjaFR5cGUoby50eXBlKXx8KHA9Yy5maWxsQmVmb3JlKGV3LmZyb20obyksITEpKTphLmNvbXBhdGlibGVDb250ZW50KHIudHlwZSkpKXJldHVybntzbGljZURlcHRoOmUsZnJvbnRpZXJEZXB0aDppLHBhcmVudDpyLGluamVjdDpwfTtpZigyPT10JiZvJiYoaD1jLmZpbmRXcmFwcGluZyhvLnR5cGUpKSlyZXR1cm57c2xpY2VEZXB0aDplLGZyb250aWVyRGVwdGg6aSxwYXJlbnQ6cix3cmFwOmh9O2lmKHImJmMubWF0Y2hUeXBlKHIudHlwZSkpYnJlYWt9fX0sR3gucHJvdG90eXBlLm9wZW5Nb3JlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBsYWNlZCxlPXQuY29udGVudCxuPXQub3BlblN0YXJ0LHI9dC5vcGVuRW5kLG89UXgoZSxuKTtyZXR1cm4hKCFvLmNoaWxkQ291bnR8fG8uZmlyc3RDaGlsZC5pc0xlYWYpJiYodGhpcy51bnBsYWNlZD1uZXcgY3coZSxuKzEsTWF0aC5tYXgocixvLnNpemUrbj49ZS5zaXplLXI/bisxOjApKSwhMCl9LEd4LnByb3RvdHlwZS5kcm9wTm9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wbGFjZWQsZT10LmNvbnRlbnQsbj10Lm9wZW5TdGFydCxyPXQub3BlbkVuZCxvPVF4KGUsbik7aWYoby5jaGlsZENvdW50PD0xJiZuPjApe3ZhciBpPWUuc2l6ZS1uPD1uK28uc2l6ZTt0aGlzLnVucGxhY2VkPW5ldyBjdyhZeChlLG4tMSwxKSxuLTEsaT9uLTE6cil9ZWxzZSB0aGlzLnVucGxhY2VkPW5ldyBjdyhZeChlLG4sMSksbixyKX0sR3gucHJvdG90eXBlLnBsYWNlTm9kZXM9ZnVuY3Rpb24odCl7dmFyIGU9dC5zbGljZURlcHRoLG49dC5mcm9udGllckRlcHRoLHI9dC5wYXJlbnQsbz10LmluamVjdCxpPXQud3JhcDt3aGlsZSh0aGlzLmRlcHRoPm4pdGhpcy5jbG9zZUZyb250aWVyTm9kZSgpO2lmKGkpZm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspdGhpcy5vcGVuRnJvbnRpZXJOb2RlKGlbc10pO3ZhciBhPXRoaXMudW5wbGFjZWQsYz1yP3IuY29udGVudDphLmNvbnRlbnQsaD1hLm9wZW5TdGFydC1lLHA9MCx1PVtdLGY9dGhpcy5mcm9udGllcltuXSxsPWYubWF0Y2gsZD1mLnR5cGU7aWYobyl7Zm9yKHZhciB2PTA7djxvLmNoaWxkQ291bnQ7disrKXUucHVzaChvLmNoaWxkKHYpKTtsPWwubWF0Y2hGcmFnbWVudChvKX12YXIgbT1jLnNpemUrZS0oYS5jb250ZW50LnNpemUtYS5vcGVuRW5kKTt3aGlsZShwPGMuY2hpbGRDb3VudCl7dmFyIHk9Yy5jaGlsZChwKSxnPWwubWF0Y2hUeXBlKHkudHlwZSk7aWYoIWcpYnJlYWs7cCsrLChwPjF8fDA9PWh8fHkuY29udGVudC5zaXplKSYmKGw9Zyx1LnB1c2godGIoeS5tYXJrKGQuYWxsb3dlZE1hcmtzKHkubWFya3MpKSwxPT1wP2g6MCxwPT1jLmNoaWxkQ291bnQ/bTotMSkpKX12YXIgdz1wPT1jLmNoaWxkQ291bnQ7d3x8KG09LTEpLHcmJm08MCYmciYmci50eXBlPT10aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdLnR5cGU/dGhpcy5jbG9zZUZyb250aWVyTm9kZSgpOnRoaXMuZnJvbnRpZXJbbl0ubWF0Y2g9bDtmb3IodmFyIHg9MCxiPWM7eDxtO3grKyl7dmFyIGs9Yi5sYXN0Q2hpbGQ7dGhpcy5mcm9udGllci5wdXNoKHt0eXBlOmsudHlwZSxtYXRjaDprLmNvbnRlbnRNYXRjaEF0KGsuY2hpbGRDb3VudCl9KSxiPWsuY29udGVudH10aGlzLnVucGxhY2VkPXc/MD09ZT9jdy5lbXB0eTpuZXcgY3coWXgoYS5jb250ZW50LGUtMSwxKSxlLTEsbTwwP2Eub3BlbkVuZDplLTEpOm5ldyBjdyhZeChhLmNvbnRlbnQsZSxwKSxhLm9wZW5TdGFydCxhLm9wZW5FbmQpLHRoaXMucGxhY2VkPVp4KHRoaXMucGxhY2VkLG4sZXcuZnJvbSh1KSl9LEd4LnByb3RvdHlwZS5tdXN0TW92ZUlubGluZT1mdW5jdGlvbigpe2lmKCF0aGlzLiR0by5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuLTE7dmFyIHQsZT10aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdO2lmKCFlLnR5cGUuaXNUZXh0YmxvY2t8fCFlYih0aGlzLiR0byx0aGlzLiR0by5kZXB0aCxlLnR5cGUsZS5tYXRjaCwhMSl8fHRoaXMuJHRvLmRlcHRoPT10aGlzLmRlcHRoJiYodD10aGlzLmZpbmRDbG9zZUxldmVsKHRoaXMuJHRvKSkmJnQuZGVwdGg9PXRoaXMuZGVwdGgpcmV0dXJuLTE7dmFyIG49dGhpcy4kdG8scj1uLmRlcHRoLG89dGhpcy4kdG8uYWZ0ZXIocik7d2hpbGUocj4xJiZvPT10aGlzLiR0by5lbmQoLS1yKSkrK287cmV0dXJuIG99LEd4LnByb3RvdHlwZS5maW5kQ2xvc2VMZXZlbD1mdW5jdGlvbih0KXt0OmZvcih2YXIgZT1NYXRoLm1pbih0aGlzLmRlcHRoLHQuZGVwdGgpO2U+PTA7ZS0tKXt2YXIgbj10aGlzLmZyb250aWVyW2VdLHI9bi5tYXRjaCxvPW4udHlwZSxpPWViKHQsZSxvLHIsITEpO2lmKGkpe2Zvcih2YXIgcz1lLTE7cz49MDtzLS0pe3ZhciBhPXRoaXMuZnJvbnRpZXJbc10sYz1hLm1hdGNoLGg9YS50eXBlLHA9ZWIodCxzLGgsYywhMCk7aWYoIXB8fHAuY2hpbGRDb3VudCljb250aW51ZSB0fXJldHVybntkZXB0aDplLGZpdDppfX19fSxHeC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kQ2xvc2VMZXZlbCh0KTtpZighZSlyZXR1cm4hMTt3aGlsZSh0aGlzLmRlcHRoPmUuZGVwdGgpdGhpcy5jbG9zZUZyb250aWVyTm9kZSgpO2UuZml0LmNoaWxkQ291bnQmJih0aGlzLnBsYWNlZD1aeCh0aGlzLnBsYWNlZCxlLmRlcHRoLGUuZml0KSk7Zm9yKHZhciBuPWUuZGVwdGgrMTtuPD10LmRlcHRoO24rKyl7dmFyIHI9dC5ub2RlKG4pLG89ci50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHIuY29udGVudCwhMCx0LmluZGV4KG4pKTt0aGlzLm9wZW5Gcm9udGllck5vZGUoci50eXBlLHIuYXR0cnMsbyl9cmV0dXJuITB9LEd4LnByb3RvdHlwZS5vcGVuRnJvbnRpZXJOb2RlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdO3IubWF0Y2g9ci5tYXRjaC5tYXRjaFR5cGUodCksdGhpcy5wbGFjZWQ9WngodGhpcy5wbGFjZWQsdGhpcy5kZXB0aCxldy5mcm9tKHQuY3JlYXRlKGUsbikpKSx0aGlzLmZyb250aWVyLnB1c2goe3R5cGU6dCxtYXRjaDp0LmNvbnRlbnRNYXRjaH0pfSxHeC5wcm90b3R5cGUuY2xvc2VGcm9udGllck5vZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZyb250aWVyLnBvcCgpLGU9dC5tYXRjaC5maWxsQmVmb3JlKGV3LmVtcHR5LCEwKTtlLmNoaWxkQ291bnQmJih0aGlzLnBsYWNlZD1aeCh0aGlzLnBsYWNlZCx0aGlzLmZyb250aWVyLmxlbmd0aCxlKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEd4LnByb3RvdHlwZSxYeCksRHgucHJvdG90eXBlLnJlcGxhY2VSYW5nZT1mdW5jdGlvbih0LGUsbil7aWYoIW4uc2l6ZSlyZXR1cm4gdGhpcy5kZWxldGVSYW5nZSh0LGUpO3ZhciByPXRoaXMuZG9jLnJlc29sdmUodCksbz10aGlzLmRvYy5yZXNvbHZlKGUpO2lmKFV4KHIsbyxuKSlyZXR1cm4gdGhpcy5zdGVwKG5ldyBfeCh0LGUsbikpO3ZhciBpPW9iKHIsdGhpcy5kb2MucmVzb2x2ZShlKSk7MD09aVtpLmxlbmd0aC0xXSYmaS5wb3AoKTt2YXIgcz0tKHIuZGVwdGgrMSk7aS51bnNoaWZ0KHMpO2Zvcih2YXIgYT1yLmRlcHRoLGM9ci5wb3MtMTthPjA7YS0tLGMtLSl7dmFyIGg9ci5ub2RlKGEpLnR5cGUuc3BlYztpZihoLmRlZmluaW5nfHxoLmlzb2xhdGluZylicmVhaztpLmluZGV4T2YoYSk+LTE/cz1hOnIuYmVmb3JlKGEpPT1jJiZpLnNwbGljZSgxLDAsLWEpfWZvcih2YXIgcD1pLmluZGV4T2YocyksdT1bXSxmPW4ub3BlblN0YXJ0LGw9bi5jb250ZW50LGQ9MDs7ZCsrKXt2YXIgdj1sLmZpcnN0Q2hpbGQ7aWYodS5wdXNoKHYpLGQ9PW4ub3BlblN0YXJ0KWJyZWFrO2w9di5jb250ZW50fWY+MCYmdVtmLTFdLnR5cGUuc3BlYy5kZWZpbmluZyYmci5ub2RlKHApLnR5cGUhPXVbZi0xXS50eXBlP2YtPTE6Zj49MiYmdVtmLTFdLmlzVGV4dGJsb2NrJiZ1W2YtMl0udHlwZS5zcGVjLmRlZmluaW5nJiZyLm5vZGUocCkudHlwZSE9dVtmLTJdLnR5cGUmJihmLT0yKTtmb3IodmFyIG09bi5vcGVuU3RhcnQ7bT49MDttLS0pe3ZhciB5PShtK2YrMSklKG4ub3BlblN0YXJ0KzEpLGc9dVt5XTtpZihnKWZvcih2YXIgdz0wO3c8aS5sZW5ndGg7dysrKXt2YXIgeD1pWyh3K3ApJWkubGVuZ3RoXSxiPSEwO3g8MCYmKGI9ITEseD0teCk7dmFyIGs9ci5ub2RlKHgtMSksUz1yLmluZGV4KHgtMSk7aWYoay5jYW5SZXBsYWNlV2l0aChTLFMsZy50eXBlLGcubWFya3MpKXJldHVybiB0aGlzLnJlcGxhY2Uoci5iZWZvcmUoeCksYj9vLmFmdGVyKHgpOmUsbmV3IGN3KHJiKG4uY29udGVudCwwLG4ub3BlblN0YXJ0LHkpLHksbi5vcGVuRW5kKSl9fWZvcih2YXIgTz10aGlzLnN0ZXBzLmxlbmd0aCxDPWkubGVuZ3RoLTE7Qz49MDtDLS0pe2lmKHRoaXMucmVwbGFjZSh0LGUsbiksdGhpcy5zdGVwcy5sZW5ndGg+TylicmVhazt2YXIgTT1pW0NdO0M8MHx8KHQ9ci5iZWZvcmUoTSksZT1vLmFmdGVyKE0pKX1yZXR1cm4gdGhpc30sRHgucHJvdG90eXBlLnJlcGxhY2VSYW5nZVdpdGg9ZnVuY3Rpb24odCxlLG4pe2lmKCFuLmlzSW5saW5lJiZ0PT1lJiZ0aGlzLmRvYy5yZXNvbHZlKHQpLnBhcmVudC5jb250ZW50LnNpemUpe3ZhciByPVZ4KHRoaXMuZG9jLHQsbi50eXBlKTtudWxsIT1yJiYodD1lPXIpfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZSh0LGUsbmV3IGN3KGV3LmZyb20obiksMCwwKSl9LER4LnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmRvYy5yZXNvbHZlKHQpLHI9dGhpcy5kb2MucmVzb2x2ZShlKSxvPW9iKG4sciksaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9aT09by5sZW5ndGgtMTtpZihhJiYwPT1zfHxuLm5vZGUocykudHlwZS5jb250ZW50TWF0Y2gudmFsaWRFbmQpcmV0dXJuIHRoaXMuZGVsZXRlKG4uc3RhcnQocyksci5lbmQocykpO2lmKHM+MCYmKGF8fG4ubm9kZShzLTEpLmNhblJlcGxhY2Uobi5pbmRleChzLTEpLHIuaW5kZXhBZnRlcihzLTEpKSkpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKHMpLHIuYWZ0ZXIocykpfWZvcih2YXIgYz0xO2M8PW4uZGVwdGgmJmM8PXIuZGVwdGg7YysrKWlmKHQtbi5zdGFydChjKT09bi5kZXB0aC1jJiZlPm4uZW5kKGMpJiZyLmVuZChjKS1lIT1yLmRlcHRoLWMpcmV0dXJuIHRoaXMuZGVsZXRlKG4uYmVmb3JlKGMpLGUpO3JldHVybiB0aGlzLmRlbGV0ZSh0LGUpfTtuZXcgeGNbImQiXSgiY29sbGFiIik7dmFyIGliPTIwMCxzYj1mdW5jdGlvbigpe307c2IucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg/KHQ9c2IuZnJvbSh0KSwhdGhpcy5sZW5ndGgmJnR8fHQubGVuZ3RoPGliJiZ0aGlzLmxlYWZBcHBlbmQodCl8fHRoaXMubGVuZ3RoPGliJiZ0LmxlYWZQcmVwZW5kKHRoaXMpfHx0aGlzLmFwcGVuZElubmVyKHQpKTp0aGlzfSxzYi5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg/c2IuZnJvbSh0KS5hcHBlbmQodGhpcyk6dGhpc30sc2IucHJvdG90eXBlLmFwcGVuZElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgY2IodGhpcyx0KX0sc2IucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKSx0Pj1lP3NiLmVtcHR5OnRoaXMuc2xpY2VJbm5lcihNYXRoLm1heCgwLHQpLE1hdGgubWluKHRoaXMubGVuZ3RoLGUpKX0sc2IucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZighKHQ8MHx8dD49dGhpcy5sZW5ndGgpKXJldHVybiB0aGlzLmdldElubmVyKHQpfSxzYi5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dGhpcy5sZW5ndGgpLGU8PW4/dGhpcy5mb3JFYWNoSW5uZXIodCxlLG4sMCk6dGhpcy5mb3JFYWNoSW52ZXJ0ZWRJbm5lcih0LGUsbiwwKX0sc2IucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dGhpcy5sZW5ndGgpO3ZhciByPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHIucHVzaCh0KGUsbikpfSksZSxuKSxyfSxzYi5mcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygc2I/dDp0JiZ0Lmxlbmd0aD9uZXcgYWIodCk6c2IuZW1wdHl9O3ZhciBhYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz1lfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtsZW5ndGg6e2NvbmZpZ3VyYWJsZTohMH0sZGVwdGg6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzfSxlLnByb3RvdHlwZS5zbGljZUlubmVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIDA9PXQmJm49PXRoaXMubGVuZ3RoP3RoaXM6bmV3IGUodGhpcy52YWx1ZXMuc2xpY2UodCxuKSl9LGUucHJvdG90eXBlLmdldElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlc1t0XX0sZS5wcm90b3R5cGUuZm9yRWFjaElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1lO288bjtvKyspaWYoITE9PT10KHRoaXMudmFsdWVzW29dLHIrbykpcmV0dXJuITF9LGUucHJvdG90eXBlLmZvckVhY2hJbnZlcnRlZElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1lLTE7bz49bjtvLS0paWYoITE9PT10KHRoaXMudmFsdWVzW29dLHIrbykpcmV0dXJuITF9LGUucHJvdG90eXBlLmxlYWZBcHBlbmQ9ZnVuY3Rpb24odCl7aWYodGhpcy5sZW5ndGgrdC5sZW5ndGg8PWliKXJldHVybiBuZXcgZSh0aGlzLnZhbHVlcy5jb25jYXQodC5mbGF0dGVuKCkpKX0sZS5wcm90b3R5cGUubGVhZlByZXBlbmQ9ZnVuY3Rpb24odCl7aWYodGhpcy5sZW5ndGgrdC5sZW5ndGg8PWliKXJldHVybiBuZXcgZSh0LmZsYXR0ZW4oKS5jb25jYXQodGhpcy52YWx1ZXMpKX0sbi5sZW5ndGguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aH0sbi5kZXB0aC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oc2IpO3NiLmVtcHR5PW5ldyBhYihbXSk7dmFyIGNiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyksdGhpcy5sZWZ0PWUsdGhpcy5yaWdodD1uLHRoaXMubGVuZ3RoPWUubGVuZ3RoK24ubGVuZ3RoLHRoaXMuZGVwdGg9TWF0aC5tYXgoZS5kZXB0aCxuLmRlcHRoKSsxfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdC5mbGF0dGVuKCkuY29uY2F0KHRoaXMucmlnaHQuZmxhdHRlbigpKX0sZS5wcm90b3R5cGUuZ2V0SW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8dGhpcy5sZWZ0Lmxlbmd0aD90aGlzLmxlZnQuZ2V0KHQpOnRoaXMucmlnaHQuZ2V0KHQtdGhpcy5sZWZ0Lmxlbmd0aCl9LGUucHJvdG90eXBlLmZvckVhY2hJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10aGlzLmxlZnQubGVuZ3RoO3JldHVybiEoZTxvJiYhMT09PXRoaXMubGVmdC5mb3JFYWNoSW5uZXIodCxlLE1hdGgubWluKG4sbykscikpJiYoIShuPm8mJiExPT09dGhpcy5yaWdodC5mb3JFYWNoSW5uZXIodCxNYXRoLm1heChlLW8sMCksTWF0aC5taW4odGhpcy5sZW5ndGgsbiktbyxyK28pKSYmdm9pZCAwKX0sZS5wcm90b3R5cGUuZm9yRWFjaEludmVydGVkSW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcy5sZWZ0Lmxlbmd0aDtyZXR1cm4hKGU+byYmITE9PT10aGlzLnJpZ2h0LmZvckVhY2hJbnZlcnRlZElubmVyKHQsZS1vLE1hdGgubWF4KG4sbyktbyxyK28pKSYmKCEobjxvJiYhMT09PXRoaXMubGVmdC5mb3JFYWNoSW52ZXJ0ZWRJbm5lcih0LE1hdGgubWluKGUsbyksbixyKSkmJnZvaWQgMCl9LGUucHJvdG90eXBlLnNsaWNlSW5uZXI9ZnVuY3Rpb24odCxlKXtpZigwPT10JiZlPT10aGlzLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgbj10aGlzLmxlZnQubGVuZ3RoO3JldHVybiBlPD1uP3RoaXMubGVmdC5zbGljZSh0LGUpOnQ+PW4/dGhpcy5yaWdodC5zbGljZSh0LW4sZS1uKTp0aGlzLmxlZnQuc2xpY2UodCxuKS5hcHBlbmQodGhpcy5yaWdodC5zbGljZSgwLGUtbikpfSxlLnByb3RvdHlwZS5sZWFmQXBwZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucmlnaHQubGVhZkFwcGVuZCh0KTtpZihuKXJldHVybiBuZXcgZSh0aGlzLmxlZnQsbil9LGUucHJvdG90eXBlLmxlYWZQcmVwZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMubGVmdC5sZWFmUHJlcGVuZCh0KTtpZihuKXJldHVybiBuZXcgZShuLHRoaXMucmlnaHQpfSxlLnByb3RvdHlwZS5hcHBlbmRJbm5lcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sZWZ0LmRlcHRoPj1NYXRoLm1heCh0aGlzLnJpZ2h0LmRlcHRoLHQuZGVwdGgpKzE/bmV3IGUodGhpcy5sZWZ0LG5ldyBlKHRoaXMucmlnaHQsdCkpOm5ldyBlKHRoaXMsdCl9LGV9KHNiKSxoYj1zYixwYj1oYix1Yj01MDAsZmI9ZnVuY3Rpb24odCxlKXt0aGlzLml0ZW1zPXQsdGhpcy5ldmVudENvdW50PWV9O2Z1bmN0aW9uIGxiKHQsZSl7dmFyIG47cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtpZih0LnNlbGVjdGlvbiYmMD09ZS0tKXJldHVybiBuPXIsITF9KSksdC5zbGljZShuKX1mYi5wcm90b3R5cGUucG9wRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKDA9PXRoaXMuZXZlbnRDb3VudClyZXR1cm4gbnVsbDtmb3IodmFyIHIsbyxpPXRoaXMuaXRlbXMubGVuZ3RoOztpLS0pe3ZhciBzPXRoaXMuaXRlbXMuZ2V0KGktMSk7aWYocy5zZWxlY3Rpb24pey0taTticmVha319ZSYmKHI9dGhpcy5yZW1hcHBpbmcoaSx0aGlzLml0ZW1zLmxlbmd0aCksbz1yLm1hcHMubGVuZ3RoKTt2YXIgYSxjLGg9dC50cixwPVtdLHU9W107cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtpZighdC5zdGVwKXJldHVybiByfHwocj1uLnJlbWFwcGluZyhpLGUrMSksbz1yLm1hcHMubGVuZ3RoKSxvLS0sdm9pZCB1LnB1c2godCk7aWYocil7dS5wdXNoKG5ldyBkYih0Lm1hcCkpO3ZhciBzLGY9dC5zdGVwLm1hcChyLnNsaWNlKG8pKTtmJiZoLm1heWJlU3RlcChmKS5kb2MmJihzPWgubWFwcGluZy5tYXBzW2gubWFwcGluZy5tYXBzLmxlbmd0aC0xXSxwLnB1c2gobmV3IGRiKHMsbnVsbCxudWxsLHAubGVuZ3RoK3UubGVuZ3RoKSkpLG8tLSxzJiZyLmFwcGVuZE1hcChzLG8pfWVsc2UgaC5tYXliZVN0ZXAodC5zdGVwKTtyZXR1cm4gdC5zZWxlY3Rpb24/KGE9cj90LnNlbGVjdGlvbi5tYXAoci5zbGljZShvKSk6dC5zZWxlY3Rpb24sYz1uZXcgZmIobi5pdGVtcy5zbGljZSgwLGkpLmFwcGVuZCh1LnJldmVyc2UoKS5jb25jYXQocCkpLG4uZXZlbnRDb3VudC0xKSwhMSk6dm9pZCAwfSksdGhpcy5pdGVtcy5sZW5ndGgsMCkse3JlbWFpbmluZzpjLHRyYW5zZm9ybTpoLHNlbGVjdGlvbjphfX0sZmIucHJvdG90eXBlLmFkZFRyYW5zZm9ybT1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89W10saT10aGlzLmV2ZW50Q291bnQscz10aGlzLml0ZW1zLGE9IXImJnMubGVuZ3RoP3MuZ2V0KHMubGVuZ3RoLTEpOm51bGwsYz0wO2M8dC5zdGVwcy5sZW5ndGg7YysrKXt2YXIgaD10LnN0ZXBzW2NdLmludmVydCh0LmRvY3NbY10pLHA9bmV3IGRiKHQubWFwcGluZy5tYXBzW2NdLGgsZSksdT12b2lkIDA7KHU9YSYmYS5tZXJnZShwKSkmJihwPXUsYz9vLnBvcCgpOnM9cy5zbGljZSgwLHMubGVuZ3RoLTEpKSxvLnB1c2gocCksZSYmKGkrKyxlPW51bGwpLHJ8fChhPXApfXZhciBmPWktbi5kZXB0aDtyZXR1cm4gZj5tYiYmKHM9bGIocyxmKSxpLT1mKSxuZXcgZmIocy5hcHBlbmQobyksaSl9LGZiLnByb3RvdHlwZS5yZW1hcHBpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgSXRbImEiXTtyZXR1cm4gdGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlLHIpe3ZhciBvPW51bGwhPWUubWlycm9yT2Zmc2V0JiZyLWUubWlycm9yT2Zmc2V0Pj10P24ubWFwcy5sZW5ndGgtZS5taXJyb3JPZmZzZXQ6bnVsbDtuLmFwcGVuZE1hcChlLm1hcCxvKX0pLHQsZSksbn0sZmIucHJvdG90eXBlLmFkZE1hcHM9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXRoaXMuZXZlbnRDb3VudD90aGlzOm5ldyBmYih0aGlzLml0ZW1zLmFwcGVuZCh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBkYih0KX0pKSksdGhpcy5ldmVudENvdW50KX0sZmIucHJvdG90eXBlLnJlYmFzZWQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5ldmVudENvdW50KXJldHVybiB0aGlzO3ZhciBuPVtdLHI9TWF0aC5tYXgoMCx0aGlzLml0ZW1zLmxlbmd0aC1lKSxvPXQubWFwcGluZyxpPXQuc3RlcHMubGVuZ3RoLHM9dGhpcy5ldmVudENvdW50O3RoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zZWxlY3Rpb24mJnMtLX0pLHIpO3ZhciBhPWU7dGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1vLmdldE1pcnJvcigtLWEpO2lmKG51bGwhPXIpe2k9TWF0aC5taW4oaSxyKTt2YXIgYz1vLm1hcHNbcl07aWYoZS5zdGVwKXt2YXIgaD10LnN0ZXBzW3JdLmludmVydCh0LmRvY3Nbcl0pLHA9ZS5zZWxlY3Rpb24mJmUuc2VsZWN0aW9uLm1hcChvLnNsaWNlKGErMSxyKSk7cCYmcysrLG4ucHVzaChuZXcgZGIoYyxoLHApKX1lbHNlIG4ucHVzaChuZXcgZGIoYykpfX0pLHIpO2Zvcih2YXIgYz1bXSxoPWU7aDxpO2grKyljLnB1c2gobmV3IGRiKG8ubWFwc1toXSkpO3ZhciBwPXRoaXMuaXRlbXMuc2xpY2UoMCxyKS5hcHBlbmQoYykuYXBwZW5kKG4pLHU9bmV3IGZiKHAscyk7cmV0dXJuIHUuZW1wdHlJdGVtQ291bnQoKT51YiYmKHU9dS5jb21wcmVzcyh0aGlzLml0ZW1zLmxlbmd0aC1uLmxlbmd0aCkpLHV9LGZiLnByb3RvdHlwZS5lbXB0eUl0ZW1Db3VudD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zdGVwfHx0Kyt9KSksdH0sZmIucHJvdG90eXBlLmNvbXByZXNzPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PXRoaXMuaXRlbXMubGVuZ3RoKTt2YXIgZT10aGlzLnJlbWFwcGluZygwLHQpLG49ZS5tYXBzLmxlbmd0aCxyPVtdLG89MDtyZXR1cm4gdGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihpLHMpe2lmKHM+PXQpci5wdXNoKGkpLGkuc2VsZWN0aW9uJiZvKys7ZWxzZSBpZihpLnN0ZXApe3ZhciBhPWkuc3RlcC5tYXAoZS5zbGljZShuKSksYz1hJiZhLmdldE1hcCgpO2lmKG4tLSxjJiZlLmFwcGVuZE1hcChjLG4pLGEpe3ZhciBoPWkuc2VsZWN0aW9uJiZpLnNlbGVjdGlvbi5tYXAoZS5zbGljZShuKSk7aCYmbysrO3ZhciBwLHU9bmV3IGRiKGMuaW52ZXJ0KCksYSxoKSxmPXIubGVuZ3RoLTE7KHA9ci5sZW5ndGgmJnJbZl0ubWVyZ2UodSkpP3JbZl09cDpyLnB1c2godSl9fWVsc2UgaS5tYXAmJm4tLX0pLHRoaXMuaXRlbXMubGVuZ3RoLDApLG5ldyBmYihwYi5mcm9tKHIucmV2ZXJzZSgpKSxvKX0sZmIuZW1wdHk9bmV3IGZiKHBiLmVtcHR5LDApO3ZhciBkYj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm1hcD10LHRoaXMuc3RlcD1lLHRoaXMuc2VsZWN0aW9uPW4sdGhpcy5taXJyb3JPZmZzZXQ9cn07ZGIucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RlcCYmdC5zdGVwJiYhdC5zZWxlY3Rpb24pe3ZhciBlPXQuc3RlcC5tZXJnZSh0aGlzLnN0ZXApO2lmKGUpcmV0dXJuIG5ldyBkYihlLmdldE1hcCgpLmludmVydCgpLGUsdGhpcy5zZWxlY3Rpb24pfX07dmFyIHZiPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuZG9uZT10LHRoaXMudW5kb25lPWUsdGhpcy5wcmV2UmFuZ2VzPW4sdGhpcy5wcmV2VGltZT1yfSxtYj0yMDtmdW5jdGlvbiB5Yih0LGUsbixyKXt2YXIgbyxpPW4uZ2V0TWV0YShDYik7aWYoaSlyZXR1cm4gaS5oaXN0b3J5U3RhdGU7bi5nZXRNZXRhKE1iKSYmKHQ9bmV3IHZiKHQuZG9uZSx0LnVuZG9uZSxudWxsLDApKTt2YXIgcz1uLmdldE1ldGEoImFwcGVuZGVkVHJhbnNhY3Rpb24iKTtpZigwPT1uLnN0ZXBzLmxlbmd0aClyZXR1cm4gdDtpZihzJiZzLmdldE1ldGEoQ2IpKXJldHVybiBzLmdldE1ldGEoQ2IpLnJlZG8/bmV3IHZiKHQuZG9uZS5hZGRUcmFuc2Zvcm0obixudWxsLHIsT2IoZSkpLHQudW5kb25lLHdiKG4ubWFwcGluZy5tYXBzW24uc3RlcHMubGVuZ3RoLTFdKSx0LnByZXZUaW1lKTpuZXcgdmIodC5kb25lLHQudW5kb25lLmFkZFRyYW5zZm9ybShuLG51bGwscixPYihlKSksbnVsbCx0LnByZXZUaW1lKTtpZighMT09PW4uZ2V0TWV0YSgiYWRkVG9IaXN0b3J5Iil8fHMmJiExPT09cy5nZXRNZXRhKCJhZGRUb0hpc3RvcnkiKSlyZXR1cm4obz1uLmdldE1ldGEoInJlYmFzZWQiKSk/bmV3IHZiKHQuZG9uZS5yZWJhc2VkKG4sbyksdC51bmRvbmUucmViYXNlZChuLG8pLHhiKHQucHJldlJhbmdlcyxuLm1hcHBpbmcpLHQucHJldlRpbWUpOm5ldyB2Yih0LmRvbmUuYWRkTWFwcyhuLm1hcHBpbmcubWFwcyksdC51bmRvbmUuYWRkTWFwcyhuLm1hcHBpbmcubWFwcykseGIodC5wcmV2UmFuZ2VzLG4ubWFwcGluZyksdC5wcmV2VGltZSk7dmFyIGE9MD09dC5wcmV2VGltZXx8IXMmJih0LnByZXZUaW1lPChuLnRpbWV8fDApLXIubmV3R3JvdXBEZWxheXx8IWdiKG4sdC5wcmV2UmFuZ2VzKSksYz1zP3hiKHQucHJldlJhbmdlcyxuLm1hcHBpbmcpOndiKG4ubWFwcGluZy5tYXBzW24uc3RlcHMubGVuZ3RoLTFdKTtyZXR1cm4gbmV3IHZiKHQuZG9uZS5hZGRUcmFuc2Zvcm0obixhP2Uuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCk6bnVsbCxyLE9iKGUpKSxmYi5lbXB0eSxjLG4udGltZSl9ZnVuY3Rpb24gZ2IodCxlKXtpZighZSlyZXR1cm4hMTtpZighdC5kb2NDaGFuZ2VkKXJldHVybiEwO3ZhciBuPSExO3JldHVybiB0Lm1hcHBpbmcubWFwc1swXS5mb3JFYWNoKChmdW5jdGlvbih0LHIpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bys9Mil0PD1lW28rMV0mJnI+PWVbb10mJihuPSEwKX0pKSxufWZ1bmN0aW9uIHdiKHQpe3ZhciBlPVtdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbixyLG8pe3JldHVybiBlLnB1c2gocixvKX0pKSxlfWZ1bmN0aW9uIHhiKHQsZSl7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUubWFwKHRbcl0sMSksaT1lLm1hcCh0W3IrMV0sLTEpO288PWkmJm4ucHVzaChvLGkpfXJldHVybiBufWZ1bmN0aW9uIGJiKHQsZSxuLHIpe3ZhciBvPU9iKGUpLGk9Q2IuZ2V0KGUpLnNwZWMuY29uZmlnLHM9KHI/dC51bmRvbmU6dC5kb25lKS5wb3BFdmVudChlLG8pO2lmKHMpe3ZhciBhPXMuc2VsZWN0aW9uLnJlc29sdmUocy50cmFuc2Zvcm0uZG9jKSxjPShyP3QuZG9uZTp0LnVuZG9uZSkuYWRkVHJhbnNmb3JtKHMudHJhbnNmb3JtLGUuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCksaSxvKSxoPW5ldyB2YihyP2M6cy5yZW1haW5pbmcscj9zLnJlbWFpbmluZzpjLG51bGwsMCk7bihzLnRyYW5zZm9ybS5zZXRTZWxlY3Rpb24oYSkuc2V0TWV0YShDYix7cmVkbzpyLGhpc3RvcnlTdGF0ZTpofSkuc2Nyb2xsSW50b1ZpZXcoKSl9fXZhciBrYj0hMSxTYj1udWxsO2Z1bmN0aW9uIE9iKHQpe3ZhciBlPXQucGx1Z2lucztpZihTYiE9ZSl7a2I9ITEsU2I9ZTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihlW25dLnNwZWMuaGlzdG9yeVByZXNlcnZlSXRlbXMpe2tiPSEwO2JyZWFrfX1yZXR1cm4ga2J9dmFyIENiPW5ldyB4Y1siZCJdKCJoaXN0b3J5IiksTWI9bmV3IHhjWyJkIl0oImNsb3NlSGlzdG9yeSIpO2Z1bmN0aW9uIFRiKHQpe3JldHVybiB0PXtkZXB0aDp0JiZ0LmRlcHRofHwxMDAsbmV3R3JvdXBEZWxheTp0JiZ0Lm5ld0dyb3VwRGVsYXl8fDUwMH0sbmV3IHhjWyJjIl0oe2tleTpDYixzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBuZXcgdmIoZmIuZW1wdHksZmIuZW1wdHksbnVsbCwwKX0sYXBwbHk6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB5YihuLHIsZSx0KX19LGNvbmZpZzp0fSl9ZnVuY3Rpb24gTmIodCxlKXt2YXIgbj1DYi5nZXRTdGF0ZSh0KTtyZXR1cm4hKCFufHwwPT1uLmRvbmUuZXZlbnRDb3VudCkmJihlJiZiYihuLHQsZSwhMSksITApfWZ1bmN0aW9uIEViKHQsZSl7dmFyIG49Q2IuZ2V0U3RhdGUodCk7cmV0dXJuISghbnx8MD09bi51bmRvbmUuZXZlbnRDb3VudCkmJihlJiZiYihuLHQsZSwhMCksITApfWZ1bmN0aW9uIEFiKHQpe3ZhciBlPUNiLmdldFN0YXRlKHQpO3JldHVybiBlP2UuZG9uZS5ldmVudENvdW50OjB9ZnVuY3Rpb24gUmIodCl7dmFyIGU9Q2IuZ2V0U3RhdGUodCk7cmV0dXJuIGU/ZS51bmRvbmUuZXZlbnRDb3VudDowfQovKiEKICAgICogdGlwdGFwLWV4dGVuc2lvbnMgdjEuMjkuMAogICAgKiAoYykgMjAyMCBTY3J1bXB5IFVHIChsaW1pdGVkIGxpYWJpbGl0eSkKICAgICogQGxpY2Vuc2UgTUlUCiAgICAqL2Z1bmN0aW9uIHpiKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gRGIodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1mdW5jdGlvbiBJYih0LGUsbil7cmV0dXJuIGUmJkRiKHQucHJvdG90eXBlLGUpLG4mJkRiKHQsbiksdH1mdW5jdGlvbiBQYih0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gQmIodCxlKXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIEZiKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1tlXT9hcmd1bWVudHNbZV06e307ZSUyP0JiKE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7UGIodCxlLG5bZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOkJiKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIGpiKHQsZSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYkYih0LGUpfWZ1bmN0aW9uIF9iKHQpe3JldHVybiBfYj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxfYih0KX1mdW5jdGlvbiAkYih0LGUpe3JldHVybiAkYj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0sJGIodCxlKX1mdW5jdGlvbiBKYigpe2lmKCJ1bmRlZmluZWQiPT09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gTGIodCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiB0fWZ1bmN0aW9uIFZiKHQsZSl7cmV0dXJuIWV8fCJvYmplY3QiIT09dHlwZW9mIGUmJiJmdW5jdGlvbiIhPT10eXBlb2YgZT9MYih0KTplfWZ1bmN0aW9uIHFiKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlLG49X2IodCk7aWYoSmIoKSl7dmFyIHI9X2IodGhpcykuY29uc3RydWN0b3I7ZT1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxyKX1lbHNlIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIFZiKHRoaXMsZSl9fWZ1bmN0aW9uIFdiKHQpe3JldHVybiBIYih0KXx8S2IodCl8fFViKHQpfHxYYigpfWZ1bmN0aW9uIEhiKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEdiKHQpfWZ1bmN0aW9uIEtiKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBVYih0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIEdiKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/R2IodCxlKTp2b2lkIDB9fWZ1bmN0aW9uIEdiKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gWGIoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX12YXIgWWI9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGUsbj10LnNjaGVtYTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY3AoZSxuLm5vZGVzLnBhcmFncmFwaCl9fX0se2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiQ3RybC0+IjpjcChlKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3loKC9eXHMqPlxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJsb2NrcXVvdGUifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29udGVudDoiYmxvY2sqIixncm91cDoiYmxvY2siLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoiYmxvY2txdW90ZSJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsiYmxvY2txdW90ZSIsMF19fX19XSksbn0oTHApLFpiPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFwKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC04IjphcChlLG4ubm9kZXMubGlzdF9pdGVtKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3loKC9eXHMqKFstKypdKVxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJ1bGxldF9saXN0In19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6Imxpc3RfaXRlbSsiLGdyb3VwOiJibG9jayIscGFyc2VET006W3t0YWc6InVsIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJ1bCIsMF19fX19XSksbn0oTHApLFFiPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGlwKGUsbi5ub2Rlcy5wYXJhZ3JhcGgpfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57IlNoaWZ0LUN0cmwtXFwiOnRoKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bZ2goL15gYGAkLyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iY29kZV9ibG9jayJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntjb250ZW50OiJ0ZXh0KiIsbWFya3M6IiIsZ3JvdXA6ImJsb2NrIixjb2RlOiEwLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoicHJlIixwcmVzZXJ2ZVdoaXRlc3BhY2U6ImZ1bGwifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInByZSIsWyJjb2RlIiwwXV19fX19XSksbn0oTHApO3ZhciB0az1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49cmgoSGMsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4odC50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChlLmNyZWF0ZSgpKS5zY3JvbGxJbnRvVmlldygpKSwhMH0pKTtyZXR1cm57Ik1vZC1FbnRlciI6biwiU2hpZnQtRW50ZXIiOm59fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImhhcmRfYnJlYWsifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57aW5saW5lOiEwLGdyb3VwOiJpbmxpbmUiLHNlbGVjdGFibGU6ITEscGFyc2VET006W3t0YWc6ImJyIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJiciJdfX19fV0pLG59KExwKSxlaz1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gaXAoZSxuLm5vZGVzLnBhcmFncmFwaCx0KX19fSx7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIHRoaXMub3B0aW9ucy5sZXZlbHMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiBGYih7fSx0LHt9LFBiKHt9LCJTaGlmdC1DdHJsLSIuY29uY2F0KG4pLHRoKGUse2xldmVsOm59KSkpfSkse30pfX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybiB0aGlzLm9wdGlvbnMubGV2ZWxzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGdoKG5ldyBSZWdFeHAoIl4oI3sxLCIuY29uY2F0KHQsIn0pXFxzJCIpKSxlLChmdW5jdGlvbigpe3JldHVybntsZXZlbDp0fX0pKX0pKX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJoZWFkaW5nIn19LHtrZXk6ImRlZmF1bHRPcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57bGV2ZWxzOlsxLDIsMyw0LDUsNl19fX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXR0cnM6e2xldmVsOntkZWZhdWx0OjF9fSxjb250ZW50OiJpbmxpbmUqIixncm91cDoiYmxvY2siLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTp0aGlzLm9wdGlvbnMubGV2ZWxzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJue3RhZzoiaCIuY29uY2F0KHQpLGF0dHJzOntsZXZlbDp0fX19KSksdG9ET006ZnVuY3Rpb24odCl7cmV0dXJuWyJoIi5jb25jYXQodC5hdHRycy5sZXZlbCksMF19fX19XSksbn0oTHApLG5rPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJue0VudGVyOmpoKGUpLFRhYjpMaChlKSwiU2hpZnQtVGFiIjpfaChlKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ibGlzdF9pdGVtIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6InBhcmFncmFwaCBibG9jayoiLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoibGkifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImxpIiwwXX19fX1dKSxufShMcCk7dmFyIHJrPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFwKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC05IjphcChlLG4ubm9kZXMubGlzdF9pdGVtKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3loKC9eKFxkKylcLlxzJC8sZSwoZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOit0WzFdfX0pLChmdW5jdGlvbih0LGUpe3JldHVybiBlLmNoaWxkQ291bnQrZS5hdHRycy5vcmRlcj09PSt0WzFdfSkpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJvcmRlcmVkX2xpc3QifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXR0cnM6e29yZGVyOntkZWZhdWx0OjF9fSxjb250ZW50OiJsaXN0X2l0ZW0rIixncm91cDoiYmxvY2siLHBhcnNlRE9NOlt7dGFnOiJvbCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOnQuaGFzQXR0cmlidXRlKCJzdGFydCIpPyt0LmdldEF0dHJpYnV0ZSgic3RhcnQiKToxfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQuYXR0cnMub3JkZXI/WyJvbCIsMF06WyJvbCIse3N0YXJ0OnQuYXR0cnMub3JkZXJ9LDBdfX19fV0pLG59KExwKSxvaz1PYmplY3QoWmdbInRhYmxlTm9kZXMiXSkoe3RhYmxlR3JvdXA6ImJsb2NrIixjZWxsQ29udGVudDoiYmxvY2srIixjZWxsQXR0cmlidXRlczp7YmFja2dyb3VuZDp7ZGVmYXVsdDpudWxsLGdldEZyb21ET006ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3R5bGUuYmFja2dyb3VuZENvbG9yfHxudWxsfSxzZXRET01BdHRyOmZ1bmN0aW9uKHQsZSl7aWYodCl7dmFyIG49e3N0eWxlOiIiLmNvbmNhdChlLnN0eWxlfHwiIiwiYmFja2dyb3VuZC1jb2xvcjogIikuY29uY2F0KHQsIjsiKX07T2JqZWN0LmFzc2lnbihlLG4pfX19fX0pLGlrPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zY2hlbWE7cmV0dXJue2NyZWF0ZVRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPXQucm93c0NvdW50LHI9dC5jb2xzQ291bnQsbz10LndpdGhIZWFkZXJSb3c7cmV0dXJuIGZ1bmN0aW9uKHQsaSl7dmFyIHM9dC50ci5zZWxlY3Rpb24uYW5jaG9yKzEsYT1PYmplY3QoWGdbImNyZWF0ZVRhYmxlIl0pKGUsbixyLG8pLGM9dC50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChhKS5zY3JvbGxJbnRvVmlldygpLGg9Yy5kb2MucmVzb2x2ZShzKTtjLnNldFNlbGVjdGlvbihZZ1siVGV4dFNlbGVjdGlvbiJdLm5lYXIoaCkpLGkoYyl9fSxhZGRDb2x1bW5CZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gWmdbImFkZENvbHVtbkJlZm9yZSJdfSxhZGRDb2x1bW5BZnRlcjpmdW5jdGlvbigpe3JldHVybiBaZ1siYWRkQ29sdW1uQWZ0ZXIiXX0sZGVsZXRlQ29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJkZWxldGVDb2x1bW4iXX0sYWRkUm93QmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJhZGRSb3dCZWZvcmUiXX0sYWRkUm93QWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gWmdbImFkZFJvd0FmdGVyIl19LGRlbGV0ZVJvdzpmdW5jdGlvbigpe3JldHVybiBaZ1siZGVsZXRlUm93Il19LGRlbGV0ZVRhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJkZWxldGVUYWJsZSJdfSx0b2dnbGVDZWxsTWVyZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtPYmplY3QoWmdbIm1lcmdlQ2VsbHMiXSkodCxlKXx8T2JqZWN0KFpnWyJzcGxpdENlbGwiXSkodCxlKX19LG1lcmdlQ2VsbHM6ZnVuY3Rpb24oKXtyZXR1cm4gWmdbIm1lcmdlQ2VsbHMiXX0sc3BsaXRDZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJzcGxpdENlbGwiXX0sdG9nZ2xlSGVhZGVyQ29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJ0b2dnbGVIZWFkZXJDb2x1bW4iXX0sdG9nZ2xlSGVhZGVyUm93OmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJ0b2dnbGVIZWFkZXJSb3ciXX0sdG9nZ2xlSGVhZGVyQ2VsbDpmdW5jdGlvbigpe3JldHVybiBaZ1sidG9nZ2xlSGVhZGVyQ2VsbCJdfSxzZXRDZWxsQXR0cjpmdW5jdGlvbigpe3JldHVybiBaZ1sic2V0Q2VsbEF0dHIiXX0sZml4VGFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIFpnWyJmaXhUYWJsZXMiXX19fX0se2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57VGFiOk9iamVjdChaZ1siZ29Ub05leHRDZWxsIl0pKDEpLCJTaGlmdC1UYWIiOk9iamVjdChaZ1siZ29Ub05leHRDZWxsIl0pKC0xKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idGFibGUifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntyZXNpemFibGU6ITF9fX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb2sudGFibGV9fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQoV2IodGhpcy5vcHRpb25zLnJlc2l6YWJsZT9bT2JqZWN0KFpnWyJjb2x1bW5SZXNpemluZyJdKSgpXTpbXSksW09iamVjdChaZ1sidGFibGVFZGl0aW5nIl0pKCldKX19XSksbn0oTHApLHNrPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idGFibGVfaGVhZGVyIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9rLnRhYmxlX2hlYWRlcn19XSksbn0oTHApLGFrPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idGFibGVfY2VsbCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBvay50YWJsZV9jZWxsfX1dKSxufShMcCksY2s9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZV9yb3cifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb2sudGFibGVfcm93fX1dKSxufShMcCksaGs9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57RW50ZXI6b3AoZSksVGFiOnRoaXMub3B0aW9ucy5uZXN0ZWQ/TGgoZSk6ZnVuY3Rpb24oKXt9LCJTaGlmdC1UYWIiOl9oKGUpfX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0b2RvX2l0ZW0ifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntuZXN0ZWQ6ITF9fX0se2tleToidmlldyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOlsibm9kZSIsInVwZGF0ZUF0dHJzIiwidmlldyJdLG1ldGhvZHM6e29uQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVBdHRycyh7ZG9uZTohdGhpcy5ub2RlLmF0dHJzLmRvbmV9KX19LHRlbXBsYXRlOidcbiAgICAgICAgPGxpIDpkYXRhLXR5cGU9Im5vZGUudHlwZS5uYW1lIiA6ZGF0YS1kb25lPSJub2RlLmF0dHJzLmRvbmUudG9TdHJpbmcoKSIgZGF0YS1kcmFnLWhhbmRsZT5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0idG9kby1jaGVja2JveCIgY29udGVudGVkaXRhYmxlPSJmYWxzZSIgQGNsaWNrPSJvbkNoYW5nZSI+PC9zcGFuPlxuICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tY29udGVudCIgcmVmPSJjb250ZW50IiA6Y29udGVudGVkaXRhYmxlPSJ2aWV3LmVkaXRhYmxlLnRvU3RyaW5nKCkiPjwvZGl2PlxuICAgICAgICA8L2xpPlxuICAgICAgJ319fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJue2F0dHJzOntkb25lOntkZWZhdWx0OiExfX0sZHJhZ2dhYmxlOiEwLGNvbnRlbnQ6dGhpcy5vcHRpb25zLm5lc3RlZD8iKHBhcmFncmFwaHx0b2RvX2xpc3QpKyI6InBhcmFncmFwaCsiLHRvRE9NOmZ1bmN0aW9uKGUpe3ZhciBuPWUuYXR0cnMuZG9uZTtyZXR1cm5bImxpIix7ImRhdGEtdHlwZSI6dC5uYW1lLCJkYXRhLWRvbmUiOm4udG9TdHJpbmcoKX0sWyJzcGFuIix7Y2xhc3M6InRvZG8tY2hlY2tib3giLGNvbnRlbnRlZGl0YWJsZToiZmFsc2UifV0sWyJkaXYiLHtjbGFzczoidG9kby1jb250ZW50In0sMF1dfSxwYXJzZURPTTpbe3ByaW9yaXR5OjUxLHRhZzonW2RhdGEtdHlwZT0iJy5jb25jYXQodGhpcy5uYW1lLCciXScpLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybntkb25lOiJ0cnVlIj09PXQuZ2V0QXR0cmlidXRlKCJkYXRhLWRvbmUiKX19fV19fX1dKSxufShMcCkscGs9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGUsbj10LnNjaGVtYTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXAoZSxuLm5vZGVzLnRvZG9faXRlbSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt5aCgvXlxzKihcWyBcXSlccyQvLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0b2RvX2xpc3QifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybntncm91cDoiYmxvY2siLGNvbnRlbnQ6InRvZG9faXRlbSsiLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJ1bCIseyJkYXRhLXR5cGUiOnQubmFtZX0sMF19LHBhcnNlRE9NOlt7cHJpb3JpdHk6NTEsdGFnOidbZGF0YS10eXBlPSInLmNvbmNhdCh0aGlzLm5hbWUsJyJdJyl9XX19fV0pLG59KExwKSx1az1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiTW9kLWIiOm5oKGUpfX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5oKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUWgoLyg/OlwqXCp8X18pKFteKl9dKykoPzpcKlwqfF9fKSQvLGUpXX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bZXAoLyg/OlwqXCp8X18pKFteKl9dKykoPzpcKlwqfF9fKS9nLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJib2xkIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue3BhcnNlRE9NOlt7dGFnOiJzdHJvbmcifSx7dGFnOiJiIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4ibm9ybWFsIiE9PXQuc3R5bGUuZm9udFdlaWdodCYmbnVsbH19LHtzdHlsZToiZm9udC13ZWlnaHQiLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybi9eKGJvbGQoZXIpP3xbNS05XVxkezIsfSkkLy50ZXN0KHQpJiZudWxsfX1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJzdHJvbmciLDBdfX19fV0pLG59KCRwKSxmaz1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiTW9kLWAiOm5oKGUpfX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5oKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUWgoLyg/OmApKFteYF0rKSg/OmApJC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltlcCgvKD86YCkoW15gXSspKD86YCkvZyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iY29kZSJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntleGNsdWRlczoiXyIscGFyc2VET006W3t0YWc6ImNvZGUifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImNvZGUiLDBdfX19fV0pLG59KCRwKSxsaz1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiTW9kLWkiOm5oKGUpfX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5oKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUWgoLyg/Ol58W15fXSkoXyhbXl9dKylfKSQvLGUpLFFoKC8oPzpefFteKl0pKFwqKFteKl0rKVwqKSQvLGUpXX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bZXAoL18oW15fXSspXy9nLGUpLGVwKC9cKihbXipdKylcKi9nLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJpdGFsaWMifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cGFyc2VET006W3t0YWc6ImkifSx7dGFnOiJlbSJ9LHtzdHlsZToiZm9udC1zdHlsZT1pdGFsaWMifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImVtIiwwXX19fX1dKSxufSgkcCksZGs9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB0LmhyZWY/aHAoZSx0KTpucChlKX19fSx7a2V5OiJwYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3RwKC9odHRwcz86XC9cLyh3d3dcLik/Wy1hLXpBLVowLTlAOiUuXyt+Iz1dezIsMjU2fVwuW2EtekEtWl17Mix9XGIoWy1hLXpBLVowLTlAOiVfKy5+Iz8mLy89XSopL2csZSwoZnVuY3Rpb24odCl7cmV0dXJue2hyZWY6dH19KSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImxpbmsifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntvcGVuT25DbGljazohMH19fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybnthdHRyczp7aHJlZjp7ZGVmYXVsdDpudWxsfX0saW5jbHVzaXZlOiExLHBhcnNlRE9NOlt7dGFnOiJhW2hyZWZdIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm57aHJlZjp0LmdldEF0dHJpYnV0ZSgiaHJlZiIpfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm5bImEiLEZiKHt9LHQuYXR0cnMse3JlbDoibm9vcGVuZXIgbm9yZWZlcnJlciBub2ZvbGxvdyJ9KSwwXX19fX0se2tleToicGx1Z2lucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5vcGVuT25DbGljaz9bbmV3IGllKHtwcm9wczp7aGFuZGxlQ2xpY2s6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQuc3RhdGUuc2NoZW1hLG89RWgodC5zdGF0ZSxyLm1hcmtzLmxpbmspO28uaHJlZiYmbi50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCYmKG4uc3RvcFByb3BhZ2F0aW9uKCksd2luZG93Lm9wZW4oby5ocmVmKSl9fX0pXTpbXX19XSksbn0oJHApLHZrPWZ1bmN0aW9uKHQpe2piKG4sdCk7dmFyIGU9cWIobik7ZnVuY3Rpb24gbigpe3JldHVybiB6Yih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBJYihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtZCI6bmgoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmgoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltRaCgvfihbXn5dKyl+JC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltlcCgvfihbXn5dKyl+L2csZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInN0cmlrZSJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntwYXJzZURPTTpbe3RhZzoicyJ9LHt0YWc6ImRlbCJ9LHt0YWc6InN0cmlrZSJ9LHtzdHlsZToidGV4dC1kZWNvcmF0aW9uIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4ibGluZS10aHJvdWdoIj09PXR9fV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInMiLDBdfX19fV0pLG59KCRwKSxtaz1mdW5jdGlvbih0KXtqYihuLHQpO3ZhciBlPXFiKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gemIodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSWIobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiTW9kLXUiOm5oKGUpfX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5oKGUpfX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ1bmRlcmxpbmUifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cGFyc2VET006W3t0YWc6InUifSx7c3R5bGU6InRleHQtZGVjb3JhdGlvbiIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuInVuZGVybGluZSI9PT10fX1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJ1IiwwXX19fX1dKSxufSgkcCkseWs9ZnVuY3Rpb24odCl7amIobix0KTt2YXIgZT1xYihuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIHpiKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEliKG4sW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9eyJNb2QteiI6TmIsIk1vZC15IjpFYiwiU2hpZnQtTW9kLXoiOkVifTtyZXR1cm4gdH19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt1bmRvOmZ1bmN0aW9uKCl7cmV0dXJuIE5ifSxyZWRvOmZ1bmN0aW9uKCl7cmV0dXJuIEVifSx1bmRvRGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gQWJ9LHJlZG9EZXB0aDpmdW5jdGlvbigpe3JldHVybiBSYn19fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImhpc3RvcnkifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntkZXB0aDoiIixuZXdHcm91cERlbGF5OiIifX19LHtrZXk6InBsdWdpbnMiLGdldDpmdW5jdGlvbigpe3JldHVybltUYih7ZGVwdGg6dGhpcy5vcHRpb25zLmRlcHRoLG5ld0dyb3VwRGVsYXk6dGhpcy5vcHRpb25zLm5ld0dyb3VwRGVsYXl9KV19fV0pLG59KEZwKTtmdW5jdGlvbiBnaygpe3JldHVybltuZXcgWWIsbmV3IFpiLG5ldyBRYixuZXcgdGssbmV3IGVrLG5ldyBuayxuZXcgcmssbmV3IGhrLG5ldyBwayxuZXcgZGssbmV3IGlrKHtyZXNpemFibGU6ITB9KSxuZXcgc2ssbmV3IGFrLG5ldyBjayxuZXcgdWssbmV3IGZrLG5ldyBsayxuZXcgdmssbmV3IG1rLG5ldyB5a119dmFyIHdrPXtpbmplY3Q6WyJjb3JlIl0sY29tcG9uZW50czp7RWRpdG9yQ29udGVudDpVcCxFZGl0b3JNZW51QmFyOllwLEljb246Q2Z9LHByb3BzOntmaWVsZE5hbWU6U3RyaW5nLHZhbHVlOlN0cmluZ30sbW91bnRlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuJHByb3BzLGU9dC52YWx1ZSxuPXQuZmllbGROYW1lO3RoaXMuY29yZS5zZXRGb3JtVmFsdWUobixlKX0sZGF0YTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LiRwcm9wcy5maWVsZE5hbWU7cmV0dXJue2VkaXRvcjpuZXcgS3Aoe2NvbnRlbnQ6dGhpcy4kcHJvcHMudmFsdWUsZXh0ZW5zaW9uczpnaygpLG9uVXBkYXRlOmZ1bmN0aW9uKG4pe3ZhciByPW4uZ2V0SFRNTCxvPXIoKTtlJiYwIT1lLmxlbmd0aCYmdC5jb3JlLnNldEZvcm1WYWx1ZShlLG8pfX0pfX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWRpdG9yLmRlc3Ryb3koKX19LHhrPXdrLGJrPVNmKHhrLHMsYSwhMSxudWxsLG51bGwsbnVsbCksa2s9YmsuZXhwb3J0czsod2luZG93Ll9fZ29wbGFpZFZ1ZUNvbXBvbmVudFJlZ2lzdGVycz13aW5kb3cuX19nb3BsYWlkVnVlQ29tcG9uZW50UmVnaXN0ZXJzfHxbXSkucHVzaCgoZnVuY3Rpb24odCl7dC5jb21wb25lbnQoInRpcHRhcC1lZGl0b3IiLGtrKX0pKX0sZmI2YTpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjIzZTciKSxvPW4oIjg2MWQiKSxpPW4oImU4YjUiKSxzPW4oIjIzY2IiKSxhPW4oIjUwYzQiKSxjPW4oImZjNmEiKSxoPW4oIjg0MTgiKSxwPW4oImI2MjIiKSx1PW4oIjFkZGUiKSxmPW4oImFlNDAiKSxsPXUoInNsaWNlIiksZD1mKCJzbGljZSIse0FDQ0VTU09SUzohMCwwOjAsMToyfSksdj1wKCJzcGVjaWVzIiksbT1bXS5zbGljZSx5PU1hdGgubWF4O3Ioe3RhcmdldDoiQXJyYXkiLHByb3RvOiEwLGZvcmNlZDohbHx8IWR9LHtzbGljZTpmdW5jdGlvbih0LGUpe3ZhciBuLHIscCx1PWModGhpcyksZj1hKHUubGVuZ3RoKSxsPXModCxmKSxkPXModm9pZCAwPT09ZT9mOmUsZik7aWYoaSh1KSYmKG49dS5jb25zdHJ1Y3RvciwiZnVuY3Rpb24iIT10eXBlb2Ygbnx8biE9PUFycmF5JiYhaShuLnByb3RvdHlwZSk/byhuKSYmKG49blt2XSxudWxsPT09biYmKG49dm9pZCAwKSk6bj12b2lkIDAsbj09PUFycmF5fHx2b2lkIDA9PT1uKSlyZXR1cm4gbS5jYWxsKHUsbCxkKTtmb3Iocj1uZXcodm9pZCAwPT09bj9BcnJheTpuKSh5KGQtbCwwKSkscD0wO2w8ZDtsKysscCsrKWwgaW4gdSYmaChyLHAsdVtsXSk7cmV0dXJuIHIubGVuZ3RoPXAscn19KX0sZmM2YTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNDRhZCIpLG89bigiMWQ4MCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcihvKHQpKX19LGZkYmM6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e0NTU1J1bGVMaXN0OjAsQ1NTU3R5bGVEZWNsYXJhdGlvbjowLENTU1ZhbHVlTGlzdDowLENsaWVudFJlY3RMaXN0OjAsRE9NUmVjdExpc3Q6MCxET01TdHJpbmdMaXN0OjAsRE9NVG9rZW5MaXN0OjEsRGF0YVRyYW5zZmVySXRlbUxpc3Q6MCxGaWxlTGlzdDowLEhUTUxBbGxDb2xsZWN0aW9uOjAsSFRNTENvbGxlY3Rpb246MCxIVE1MRm9ybUVsZW1lbnQ6MCxIVE1MU2VsZWN0RWxlbWVudDowLE1lZGlhTGlzdDowLE1pbWVUeXBlQXJyYXk6MCxOYW1lZE5vZGVNYXA6MCxOb2RlTGlzdDoxLFBhaW50UmVxdWVzdExpc3Q6MCxQbHVnaW46MCxQbHVnaW5BcnJheTowLFNWR0xlbmd0aExpc3Q6MCxTVkdOdW1iZXJMaXN0OjAsU1ZHUGF0aFNlZ0xpc3Q6MCxTVkdQb2ludExpc3Q6MCxTVkdTdHJpbmdMaXN0OjAsU1ZHVHJhbnNmb3JtTGlzdDowLFNvdXJjZUJ1ZmZlckxpc3Q6MCxTdHlsZVNoZWV0TGlzdDowLFRleHRUcmFja0N1ZUxpc3Q6MCxUZXh0VHJhY2tMaXN0OjAsVG91Y2hMaXN0OjB9fSxmZGJmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0OTMwIik7dC5leHBvcnRzPXImJiFTeW1ib2wuc2hhbSYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3J9fSlbImRlZmF1bHQiXX0pKTs=\"")
}
